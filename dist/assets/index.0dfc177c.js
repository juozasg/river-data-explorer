(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();function qi(){}const D2=r=>r;function cn(r,t){for(const e in t)r[e]=t[e];return r}function M2(r){return r&&typeof r=="object"&&typeof r.then=="function"}function a_(r){return r()}function Sg(){return Object.create(null)}function Ma(r){r.forEach(a_)}function Ci(r){return typeof r=="function"}function _i(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}function k2(r){return Object.keys(r).length===0}function o_(r,...t){if(r==null)return qi;const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Bv(r){let t;return o_(r,e=>t=e)(),t}function Ei(r,t,e){r.$$.on_destroy.push(o_(t,e))}function Ni(r,t,e,i){if(r){const o=s_(r,t,e,i);return r[0](o)}}function s_(r,t,e,i){return r[1]&&i?cn(e.ctx.slice(),r[1](i(t))):e.ctx}function Ui(r,t,e,i){if(r[2]&&i){const o=r[2](i(e));if(t.dirty===void 0)return o;if(typeof o=="object"){const a=[],s=Math.max(t.dirty.length,o.length);for(let n=0;n<s;n+=1)a[n]=t.dirty[n]|o[n];return a}return t.dirty|o}return t.dirty}function Hi(r,t,e,i,o,a){if(o){const s=s_(t,e,i,a);r.p(s,o)}}function Vi(r){if(r.ctx.length>32){const t=[],e=r.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function ga(r){const t={};for(const e in r)e[0]!=="$"&&(t[e]=r[e]);return t}function ei(r,t){const e={};t=new Set(t);for(const i in r)!t.has(i)&&i[0]!=="$"&&(e[i]=r[i]);return e}function l_(r){const t={};for(const e in r)t[e]=!0;return t}function Va(r,t,e){return r.set(e),t}function ri(r){return r&&Ci(r.destroy)?r.destroy:qi}const u_=typeof window<"u";let I2=u_?()=>window.performance.now():()=>Date.now(),Nv=u_?r=>requestAnimationFrame(r):qi;const sh=new Set;function c_(r){sh.forEach(t=>{t.c(r)||(sh.delete(t),t.f())}),sh.size!==0&&Nv(c_)}function L2(r){let t;return sh.size===0&&Nv(c_),{promise:new Promise(e=>{sh.add(t={c:r,f:e})}),abort(){sh.delete(t)}}}function En(r,t){r.appendChild(t)}function f_(r){if(!r)return document;const t=r.getRootNode?r.getRootNode():r.ownerDocument;return t&&t.host?t:r.ownerDocument}function P2(r){const t=_n("style");return R2(f_(r),t),t.sheet}function R2(r,t){return En(r.head||r,t),t.sheet}function Er(r,t,e){r.insertBefore(t,e||null)}function Sr(r){r.parentNode.removeChild(r)}function Bf(r,t){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(t)}function _n(r){return document.createElement(r)}function su(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function oi(r){return document.createTextNode(r)}function Rn(){return oi(" ")}function ea(){return oi("")}function si(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function F2(r){return function(t){return t.preventDefault(),r.call(this,t)}}function Uv(r){return function(t){return t.stopPropagation(),r.call(this,t)}}function nn(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Xn(r,t){const e=Object.getOwnPropertyDescriptors(r.__proto__);for(const i in t)t[i]==null?r.removeAttribute(i):i==="style"?r.style.cssText=t[i]:i==="__value"?r.value=r[i]=t[i]:e[i]&&e[i].set?r[i]=t[i]:nn(r,i,t[i])}function Eg(r,t){for(const e in t)nn(r,e,t[e])}function hp(r,t){Object.keys(t).forEach(e=>{O2(r,e,t[e])})}function O2(r,t,e){t in r?r[t]=typeof r[t]=="boolean"&&e===""?!0:e:nn(r,t,e)}function z2(r){return Array.from(r.childNodes)}function uo(r,t){t=""+t,r.wholeText!==t&&(r.data=t)}function Do(r,t,e,i){e===null?r.style.removeProperty(t):r.style.setProperty(t,e,i?"important":"")}function B2(r,t,{bubbles:e=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(r,e,i,t),o}class Hv{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,i=null){this.e||(this.is_svg?this.e=su(e.nodeName):this.e=_n(e.nodeName),this.t=e,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)Er(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(Sr)}}function ss(r,t){return new r(t)}const dp=new Map;let pp=0;function N2(r){let t=5381,e=r.length;for(;e--;)t=(t<<5)-t^r.charCodeAt(e);return t>>>0}function U2(r,t){const e={stylesheet:P2(t),rules:{}};return dp.set(r,e),e}function Cg(r,t,e,i,o,a,s,n=0){const l=16.666/i;let u=`{
`;for(let x=0;x<=1;x+=l){const E=t+(e-t)*a(x);u+=x*100+`%{${s(E,1-E)}}
`}const h=u+`100% {${s(e,1-e)}}
}`,v=`__svelte_${N2(h)}_${n}`,d=f_(r),{stylesheet:p,rules:_}=dp.get(d)||U2(d,r);_[v]||(_[v]=!0,p.insertRule(`@keyframes ${v} ${h}`,p.cssRules.length));const b=r.style.animation||"";return r.style.animation=`${b?`${b}, `:""}${v} ${i}ms linear ${o}ms 1 both`,pp+=1,v}function H2(r,t){const e=(r.style.animation||"").split(", "),i=e.filter(t?a=>a.indexOf(t)<0:a=>a.indexOf("__svelte")===-1),o=e.length-i.length;o&&(r.style.animation=i.join(", "),pp-=o,pp||V2())}function V2(){Nv(()=>{pp||(dp.forEach(r=>{const{ownerNode:t}=r.stylesheet;t&&Sr(t)}),dp.clear())})}let cd;function Fc(r){cd=r}function oa(){if(!cd)throw new Error("Function called outside component initialization");return cd}function bo(r){oa().$$.on_mount.push(r)}function Vc(r){oa().$$.on_destroy.push(r)}function wi(r,t){return oa().$$.context.set(r,t),t}function Ki(r){return oa().$$.context.get(r)}function nv(r,t){const e=r.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const qh=[],ci=[],ip=[],iv=[],G2=Promise.resolve();let av=!1;function Z2(){av||(av=!0,G2.then(Vv))}function ic(r){ip.push(r)}function Th(r){iv.push(r)}const Pm=new Set;let Bd=0;function Vv(){const r=cd;do{for(;Bd<qh.length;){const t=qh[Bd];Bd++,Fc(t),W2(t.$$)}for(Fc(null),qh.length=0,Bd=0;ci.length;)ci.pop()();for(let t=0;t<ip.length;t+=1){const e=ip[t];Pm.has(e)||(Pm.add(e),e())}ip.length=0}while(qh.length);for(;iv.length;)iv.pop()();av=!1,Pm.clear(),Fc(r)}function W2(r){if(r.fragment!==null){r.update(),Ma(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(ic)}}let Wh;function j2(){return Wh||(Wh=Promise.resolve(),Wh.then(()=>{Wh=null})),Wh}function Rm(r,t,e){r.dispatchEvent(B2(`${t?"intro":"outro"}${e}`))}const ap=new Set;let Oc;function Ri(){Oc={r:0,c:[],p:Oc}}function Fi(){Oc.r||Ma(Oc.c),Oc=Oc.p}function Kt(r,t){r&&r.i&&(ap.delete(r),r.i(t))}function lr(r,t,e,i){if(r&&r.o){if(ap.has(r))return;ap.add(r),Oc.c.push(()=>{ap.delete(r),i&&(e&&r.d(1),i())}),r.o(t)}else i&&i()}const Y2={duration:0};function lu(r,t,e,i){let o=t(r,e),a=i?0:1,s=null,n=null,l=null;function u(){l&&H2(r,l)}function h(d,p){const _=d.b-a;return p*=Math.abs(_),{a,b:d.b,d:_,duration:p,start:d.start,end:d.start+p,group:d.group}}function v(d){const{delay:p=0,duration:_=300,easing:b=D2,tick:x=qi,css:E}=o||Y2,A={start:I2()+p,b:d};d||(A.group=Oc,Oc.r+=1),s||n?n=A:(E&&(u(),l=Cg(r,a,d,_,p,b,E)),d&&x(0,1),s=h(A,_),ic(()=>Rm(r,d,"start")),L2(P=>{if(n&&P>n.start&&(s=h(n,_),n=null,Rm(r,s.b,"start"),E&&(u(),l=Cg(r,a,s.b,s.duration,0,b,o.css))),s){if(P>=s.end)x(a=s.b,1-a),Rm(r,s.b,"end"),n||(s.b?u():--s.group.r||Ma(s.group.c)),s=null;else if(P>=s.start){const D=P-s.start;a=s.a+s.d*b(D/s.duration),x(a,1-a)}}return!!(s||n)}))}return{run(d){Ci(o)?j2().then(()=>{o=o(),v(d)}):v(d)},end(){u(),s=n=null}}}function h_(r,t){const e=t.token={};function i(o,a,s,n){if(t.token!==e)return;t.resolved=n;let l=t.ctx;s!==void 0&&(l=l.slice(),l[s]=n);const u=o&&(t.current=o)(l);let h=!1;t.block&&(t.blocks?t.blocks.forEach((v,d)=>{d!==a&&v&&(Ri(),lr(v,1,1,()=>{t.blocks[d]===v&&(t.blocks[d]=null)}),Fi())}):t.block.d(1),u.c(),Kt(u,1),u.m(t.mount(),t.anchor),h=!0),t.block=u,t.blocks&&(t.blocks[a]=u),h&&Vv()}if(M2(r)){const o=oa();if(r.then(a=>{Fc(o),i(t.then,1,t.value,a),Fc(null)},a=>{if(Fc(o),i(t.catch,2,t.error,a),Fc(null),!t.hasCatch)throw a}),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,r),!0;t.resolved=r}}function d_(r,t,e){const i=t.slice(),{resolved:o}=r;r.current===r.then&&(i[r.value]=o),r.current===r.catch&&(i[r.error]=o),r.block.p(i,e)}const p_=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function X2(r,t){lr(r,1,1,()=>{t.delete(r.key)})}function K2(r,t,e,i,o,a,s,n,l,u,h,v){let d=r.length,p=a.length,_=d;const b={};for(;_--;)b[r[_].key]=_;const x=[],E=new Map,A=new Map;for(_=p;_--;){const S=v(o,a,_),I=e(S);let T=s.get(I);T?i&&T.p(S,t):(T=u(I,S),T.c()),E.set(I,x[_]=T),I in b&&A.set(I,Math.abs(_-b[I]))}const P=new Set,D=new Set;function R(S){Kt(S,1),S.m(n,h),s.set(S.key,S),h=S.first,p--}for(;d&&p;){const S=x[p-1],I=r[d-1],T=S.key,M=I.key;S===I?(h=S.first,d--,p--):E.has(M)?!s.has(T)||P.has(T)?R(S):D.has(M)?d--:A.get(T)>A.get(M)?(D.add(T),R(S)):(P.add(M),d--):(l(I,s),d--)}for(;d--;){const S=r[d];E.has(S.key)||l(S,s)}for(;p;)R(x[p-1]);return x}function li(r,t){const e={},i={},o={$$scope:1};let a=r.length;for(;a--;){const s=r[a],n=t[a];if(n){for(const l in s)l in n||(i[l]=1);for(const l in n)o[l]||(e[l]=n[l],o[l]=1);r[a]=n}else for(const l in s)o[l]=1}for(const s in i)s in e||(e[s]=void 0);return e}function pa(r){return typeof r=="object"&&r!==null?r:{}}function Ah(r,t,e){const i=r.$$.props[t];i!==void 0&&(r.$$.bound[i]=e,e(r.$$.ctx[i]))}function un(r){r&&r.c()}function on(r,t,e,i){const{fragment:o,after_update:a}=r.$$;o&&o.m(t,e),i||ic(()=>{const s=r.$$.on_mount.map(a_).filter(Ci);r.$$.on_destroy?r.$$.on_destroy.push(...s):Ma(s),r.$$.on_mount=[]}),a.forEach(ic)}function sn(r,t){const e=r.$$;e.fragment!==null&&(Ma(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function J2(r,t){r.$$.dirty[0]===-1&&(qh.push(r),Z2(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function Mi(r,t,e,i,o,a,s,n=[-1]){const l=cd;Fc(r);const u=r.$$={fragment:null,ctx:[],props:a,update:qi,not_equal:o,bound:Sg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Sg(),dirty:n,skip_bound:!1,root:t.target||l.$$.root};s&&s(u.root);let h=!1;if(u.ctx=e?e(r,t.props||{},(v,d,...p)=>{const _=p.length?p[0]:d;return u.ctx&&o(u.ctx[v],u.ctx[v]=_)&&(!u.skip_bound&&u.bound[v]&&u.bound[v](_),h&&J2(r,v)),d}):[],u.update(),h=!0,Ma(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const v=z2(t.target);u.fragment&&u.fragment.l(v),v.forEach(Sr)}else u.fragment&&u.fragment.c();t.intro&&Kt(r.$$.fragment),on(r,t.target,t.anchor,t.customElement),Vv()}Fc(l)}class ki{$destroy(){sn(this,1),this.$destroy=qi}$on(t,e){if(!Ci(e))return qi;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const o=i.indexOf(e);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!k2(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wr={exports:{}};/* @preserve
 * Leaflet 1.9.2, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(r,t){(function(e,i){i(t)})(tc,function(e){var i="1.9.2";function o(y){var B,fe,Pe,et;for(fe=1,Pe=arguments.length;fe<Pe;fe++){et=arguments[fe];for(B in et)y[B]=et[B]}return y}var a=Object.create||function(){function y(){}return function(B){return y.prototype=B,new y}}();function s(y,B){var fe=Array.prototype.slice;if(y.bind)return y.bind.apply(y,fe.call(arguments,1));var Pe=fe.call(arguments,2);return function(){return y.apply(B,Pe.length?Pe.concat(fe.call(arguments)):arguments)}}var n=0;function l(y){return"_leaflet_id"in y||(y._leaflet_id=++n),y._leaflet_id}function u(y,B,fe){var Pe,et,St,sr;return sr=function(){Pe=!1,et&&(St.apply(fe,et),et=!1)},St=function(){Pe?et=arguments:(y.apply(fe,arguments),setTimeout(sr,B),Pe=!0)},St}function h(y,B,fe){var Pe=B[1],et=B[0],St=Pe-et;return y===Pe&&fe?y:((y-et)%St+St)%St+et}function v(){return!1}function d(y,B){if(B===!1)return y;var fe=Math.pow(10,B===void 0?6:B);return Math.round(y*fe)/fe}function p(y){return y.trim?y.trim():y.replace(/^\s+|\s+$/g,"")}function _(y){return p(y).split(/\s+/)}function b(y,B){Object.prototype.hasOwnProperty.call(y,"options")||(y.options=y.options?a(y.options):{});for(var fe in B)y.options[fe]=B[fe];return y.options}function x(y,B,fe){var Pe=[];for(var et in y)Pe.push(encodeURIComponent(fe?et.toUpperCase():et)+"="+encodeURIComponent(y[et]));return(!B||B.indexOf("?")===-1?"?":"&")+Pe.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function A(y,B){return y.replace(E,function(fe,Pe){var et=B[Pe];if(et===void 0)throw new Error("No value provided for variable "+fe);return typeof et=="function"&&(et=et(B)),et})}var P=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"};function D(y,B){for(var fe=0;fe<y.length;fe++)if(y[fe]===B)return fe;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function S(y){return window["webkit"+y]||window["moz"+y]||window["ms"+y]}var I=0;function T(y){var B=+new Date,fe=Math.max(0,16-(B-I));return I=B+fe,window.setTimeout(y,fe)}var M=window.requestAnimationFrame||S("RequestAnimationFrame")||T,z=window.cancelAnimationFrame||S("CancelAnimationFrame")||S("CancelRequestAnimationFrame")||function(y){window.clearTimeout(y)};function U(y,B,fe){if(fe&&M===T)y.call(B);else return M.call(window,s(y,B))}function F(y){y&&z.call(window,y)}var V={__proto__:null,extend:o,create:a,bind:s,get lastId(){return n},stamp:l,throttle:u,wrapNum:h,falseFn:v,formatNum:d,trim:p,splitWords:_,setOptions:b,getParamString:x,template:A,isArray:P,indexOf:D,emptyImageUrl:R,requestFn:M,cancelFn:z,requestAnimFrame:U,cancelAnimFrame:F};function j(){}j.extend=function(y){var B=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},fe=B.__super__=this.prototype,Pe=a(fe);Pe.constructor=B,B.prototype=Pe;for(var et in this)Object.prototype.hasOwnProperty.call(this,et)&&et!=="prototype"&&et!=="__super__"&&(B[et]=this[et]);return y.statics&&o(B,y.statics),y.includes&&(H(y.includes),o.apply(null,[Pe].concat(y.includes))),o(Pe,y),delete Pe.statics,delete Pe.includes,Pe.options&&(Pe.options=fe.options?a(fe.options):{},o(Pe.options,y.options)),Pe._initHooks=[],Pe.callInitHooks=function(){if(!this._initHooksCalled){fe.callInitHooks&&fe.callInitHooks.call(this),this._initHooksCalled=!0;for(var St=0,sr=Pe._initHooks.length;St<sr;St++)Pe._initHooks[St].call(this)}},B},j.include=function(y){var B=this.prototype.options;return o(this.prototype,y),y.options&&(this.prototype.options=B,this.mergeOptions(y.options)),this},j.mergeOptions=function(y){return o(this.prototype.options,y),this},j.addInitHook=function(y){var B=Array.prototype.slice.call(arguments,1),fe=typeof y=="function"?y:function(){this[y].apply(this,B)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(fe),this};function H(y){if(!(typeof L>"u"||!L||!L.Mixin)){y=P(y)?y:[y];for(var B=0;B<y.length;B++)y[B]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(y,B,fe){if(typeof y=="object")for(var Pe in y)this._on(Pe,y[Pe],B);else{y=_(y);for(var et=0,St=y.length;et<St;et++)this._on(y[et],B,fe)}return this},off:function(y,B,fe){if(!arguments.length)delete this._events;else if(typeof y=="object")for(var Pe in y)this._off(Pe,y[Pe],B);else{y=_(y);for(var et=arguments.length===1,St=0,sr=y.length;St<sr;St++)et?this._off(y[St]):this._off(y[St],B,fe)}return this},_on:function(y,B,fe,Pe){if(typeof B!="function"){console.warn("wrong listener type: "+typeof B);return}if(this._listens(y,B,fe)===!1){fe===this&&(fe=void 0);var et={fn:B,ctx:fe};Pe&&(et.once=!0),this._events=this._events||{},this._events[y]=this._events[y]||[],this._events[y].push(et)}},_off:function(y,B,fe){var Pe,et,St;if(!!this._events&&(Pe=this._events[y],!!Pe)){if(arguments.length===1){if(this._firingCount)for(et=0,St=Pe.length;et<St;et++)Pe[et].fn=v;delete this._events[y];return}if(typeof B!="function"){console.warn("wrong listener type: "+typeof B);return}var sr=this._listens(y,B,fe);if(sr!==!1){var hr=Pe[sr];this._firingCount&&(hr.fn=v,this._events[y]=Pe=Pe.slice()),Pe.splice(sr,1)}}},fire:function(y,B,fe){if(!this.listens(y,fe))return this;var Pe=o({},B,{type:y,target:this,sourceTarget:B&&B.sourceTarget||this});if(this._events){var et=this._events[y];if(et){this._firingCount=this._firingCount+1||1;for(var St=0,sr=et.length;St<sr;St++){var hr=et[St],Ar=hr.fn;hr.once&&this.off(y,Ar,hr.ctx),Ar.call(hr.ctx||this,Pe)}this._firingCount--}}return fe&&this._propagateEvent(Pe),this},listens:function(y,B,fe,Pe){typeof y!="string"&&console.warn('"string" type argument expected');var et=B;typeof B!="function"&&(Pe=!!B,et=void 0,fe=void 0);var St=this._events&&this._events[y];if(St&&St.length&&this._listens(y,et,fe)!==!1)return!0;if(Pe){for(var sr in this._eventParents)if(this._eventParents[sr].listens(y,B,fe,Pe))return!0}return!1},_listens:function(y,B,fe){if(!this._events)return!1;var Pe=this._events[y]||[];if(!B)return!!Pe.length;fe===this&&(fe=void 0);for(var et=0,St=Pe.length;et<St;et++)if(Pe[et].fn===B&&Pe[et].ctx===fe)return et;return!1},once:function(y,B,fe){if(typeof y=="object")for(var Pe in y)this._on(Pe,y[Pe],B,!0);else{y=_(y);for(var et=0,St=y.length;et<St;et++)this._on(y[et],B,fe,!0)}return this},addEventParent:function(y){return this._eventParents=this._eventParents||{},this._eventParents[l(y)]=y,this},removeEventParent:function(y){return this._eventParents&&delete this._eventParents[l(y)],this},_propagateEvent:function(y){for(var B in this._eventParents)this._eventParents[B].fire(y.type,o({layer:y.target,propagatedFrom:y.target},y),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var J=j.extend(Y);function ne(y,B,fe){this.x=fe?Math.round(y):y,this.y=fe?Math.round(B):B}var q=Math.trunc||function(y){return y>0?Math.floor(y):Math.ceil(y)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(y){return this.clone()._add(we(y))},_add:function(y){return this.x+=y.x,this.y+=y.y,this},subtract:function(y){return this.clone()._subtract(we(y))},_subtract:function(y){return this.x-=y.x,this.y-=y.y,this},divideBy:function(y){return this.clone()._divideBy(y)},_divideBy:function(y){return this.x/=y,this.y/=y,this},multiplyBy:function(y){return this.clone()._multiplyBy(y)},_multiplyBy:function(y){return this.x*=y,this.y*=y,this},scaleBy:function(y){return new ne(this.x*y.x,this.y*y.y)},unscaleBy:function(y){return new ne(this.x/y.x,this.y/y.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=q(this.x),this.y=q(this.y),this},distanceTo:function(y){y=we(y);var B=y.x-this.x,fe=y.y-this.y;return Math.sqrt(B*B+fe*fe)},equals:function(y){return y=we(y),y.x===this.x&&y.y===this.y},contains:function(y){return y=we(y),Math.abs(y.x)<=Math.abs(this.x)&&Math.abs(y.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}};function we(y,B,fe){return y instanceof ne?y:P(y)?new ne(y[0],y[1]):y==null?y:typeof y=="object"&&"x"in y&&"y"in y?new ne(y.x,y.y):new ne(y,B,fe)}function ee(y,B){if(!!y)for(var fe=B?[y,B]:y,Pe=0,et=fe.length;Pe<et;Pe++)this.extend(fe[Pe])}ee.prototype={extend:function(y){var B,fe;if(!y)return this;if(y instanceof ne||typeof y[0]=="number"||"x"in y)B=fe=we(y);else if(y=X(y),B=y.min,fe=y.max,!B||!fe)return this;return!this.min&&!this.max?(this.min=B.clone(),this.max=fe.clone()):(this.min.x=Math.min(B.x,this.min.x),this.max.x=Math.max(fe.x,this.max.x),this.min.y=Math.min(B.y,this.min.y),this.max.y=Math.max(fe.y,this.max.y)),this},getCenter:function(y){return we((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,y)},getBottomLeft:function(){return we(this.min.x,this.max.y)},getTopRight:function(){return we(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(y){var B,fe;return typeof y[0]=="number"||y instanceof ne?y=we(y):y=X(y),y instanceof ee?(B=y.min,fe=y.max):B=fe=y,B.x>=this.min.x&&fe.x<=this.max.x&&B.y>=this.min.y&&fe.y<=this.max.y},intersects:function(y){y=X(y);var B=this.min,fe=this.max,Pe=y.min,et=y.max,St=et.x>=B.x&&Pe.x<=fe.x,sr=et.y>=B.y&&Pe.y<=fe.y;return St&&sr},overlaps:function(y){y=X(y);var B=this.min,fe=this.max,Pe=y.min,et=y.max,St=et.x>B.x&&Pe.x<fe.x,sr=et.y>B.y&&Pe.y<fe.y;return St&&sr},isValid:function(){return!!(this.min&&this.max)},pad:function(y){var B=this.min,fe=this.max,Pe=Math.abs(B.x-fe.x)*y,et=Math.abs(B.y-fe.y)*y;return X(we(B.x-Pe,B.y-et),we(fe.x+Pe,fe.y+et))},equals:function(y){return y?(y=X(y),this.min.equals(y.getTopLeft())&&this.max.equals(y.getBottomRight())):!1}};function X(y,B){return!y||y instanceof ee?y:new ee(y,B)}function re(y,B){if(!!y)for(var fe=B?[y,B]:y,Pe=0,et=fe.length;Pe<et;Pe++)this.extend(fe[Pe])}re.prototype={extend:function(y){var B=this._southWest,fe=this._northEast,Pe,et;if(y instanceof me)Pe=y,et=y;else if(y instanceof re){if(Pe=y._southWest,et=y._northEast,!Pe||!et)return this}else return y?this.extend(xe(y)||de(y)):this;return!B&&!fe?(this._southWest=new me(Pe.lat,Pe.lng),this._northEast=new me(et.lat,et.lng)):(B.lat=Math.min(Pe.lat,B.lat),B.lng=Math.min(Pe.lng,B.lng),fe.lat=Math.max(et.lat,fe.lat),fe.lng=Math.max(et.lng,fe.lng)),this},pad:function(y){var B=this._southWest,fe=this._northEast,Pe=Math.abs(B.lat-fe.lat)*y,et=Math.abs(B.lng-fe.lng)*y;return new re(new me(B.lat-Pe,B.lng-et),new me(fe.lat+Pe,fe.lng+et))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(y){typeof y[0]=="number"||y instanceof me||"lat"in y?y=xe(y):y=de(y);var B=this._southWest,fe=this._northEast,Pe,et;return y instanceof re?(Pe=y.getSouthWest(),et=y.getNorthEast()):Pe=et=y,Pe.lat>=B.lat&&et.lat<=fe.lat&&Pe.lng>=B.lng&&et.lng<=fe.lng},intersects:function(y){y=de(y);var B=this._southWest,fe=this._northEast,Pe=y.getSouthWest(),et=y.getNorthEast(),St=et.lat>=B.lat&&Pe.lat<=fe.lat,sr=et.lng>=B.lng&&Pe.lng<=fe.lng;return St&&sr},overlaps:function(y){y=de(y);var B=this._southWest,fe=this._northEast,Pe=y.getSouthWest(),et=y.getNorthEast(),St=et.lat>B.lat&&Pe.lat<fe.lat,sr=et.lng>B.lng&&Pe.lng<fe.lng;return St&&sr},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(y,B){return y?(y=de(y),this._southWest.equals(y.getSouthWest(),B)&&this._northEast.equals(y.getNorthEast(),B)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(y,B){return y instanceof re?y:new re(y,B)}function me(y,B,fe){if(isNaN(y)||isNaN(B))throw new Error("Invalid LatLng object: ("+y+", "+B+")");this.lat=+y,this.lng=+B,fe!==void 0&&(this.alt=+fe)}me.prototype={equals:function(y,B){if(!y)return!1;y=xe(y);var fe=Math.max(Math.abs(this.lat-y.lat),Math.abs(this.lng-y.lng));return fe<=(B===void 0?1e-9:B)},toString:function(y){return"LatLng("+d(this.lat,y)+", "+d(this.lng,y)+")"},distanceTo:function(y){return Re.distance(this,xe(y))},wrap:function(){return Re.wrapLatLng(this)},toBounds:function(y){var B=180*y/40075017,fe=B/Math.cos(Math.PI/180*this.lat);return de([this.lat-B,this.lng-fe],[this.lat+B,this.lng+fe])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function xe(y,B,fe){return y instanceof me?y:P(y)&&typeof y[0]!="object"?y.length===3?new me(y[0],y[1],y[2]):y.length===2?new me(y[0],y[1]):null:y==null?y:typeof y=="object"&&"lat"in y?new me(y.lat,"lng"in y?y.lng:y.lon,y.alt):B===void 0?null:new me(y,B,fe)}var He={latLngToPoint:function(y,B){var fe=this.projection.project(y),Pe=this.scale(B);return this.transformation._transform(fe,Pe)},pointToLatLng:function(y,B){var fe=this.scale(B),Pe=this.transformation.untransform(y,fe);return this.projection.unproject(Pe)},project:function(y){return this.projection.project(y)},unproject:function(y){return this.projection.unproject(y)},scale:function(y){return 256*Math.pow(2,y)},zoom:function(y){return Math.log(y/256)/Math.LN2},getProjectedBounds:function(y){if(this.infinite)return null;var B=this.projection.bounds,fe=this.scale(y),Pe=this.transformation.transform(B.min,fe),et=this.transformation.transform(B.max,fe);return new ee(Pe,et)},infinite:!1,wrapLatLng:function(y){var B=this.wrapLng?h(y.lng,this.wrapLng,!0):y.lng,fe=this.wrapLat?h(y.lat,this.wrapLat,!0):y.lat,Pe=y.alt;return new me(fe,B,Pe)},wrapLatLngBounds:function(y){var B=y.getCenter(),fe=this.wrapLatLng(B),Pe=B.lat-fe.lat,et=B.lng-fe.lng;if(Pe===0&&et===0)return y;var St=y.getSouthWest(),sr=y.getNorthEast(),hr=new me(St.lat-Pe,St.lng-et),Ar=new me(sr.lat-Pe,sr.lng-et);return new re(hr,Ar)}},Re=o({},He,{wrapLng:[-180,180],R:6371e3,distance:function(y,B){var fe=Math.PI/180,Pe=y.lat*fe,et=B.lat*fe,St=Math.sin((B.lat-y.lat)*fe/2),sr=Math.sin((B.lng-y.lng)*fe/2),hr=St*St+Math.cos(Pe)*Math.cos(et)*sr*sr,Ar=2*Math.atan2(Math.sqrt(hr),Math.sqrt(1-hr));return this.R*Ar}}),Ee=6378137,ke={R:Ee,MAX_LATITUDE:85.0511287798,project:function(y){var B=Math.PI/180,fe=this.MAX_LATITUDE,Pe=Math.max(Math.min(fe,y.lat),-fe),et=Math.sin(Pe*B);return new ne(this.R*y.lng*B,this.R*Math.log((1+et)/(1-et))/2)},unproject:function(y){var B=180/Math.PI;return new me((2*Math.atan(Math.exp(y.y/this.R))-Math.PI/2)*B,y.x*B/this.R)},bounds:function(){var y=Ee*Math.PI;return new ee([-y,-y],[y,y])}()};function $(y,B,fe,Pe){if(P(y)){this._a=y[0],this._b=y[1],this._c=y[2],this._d=y[3];return}this._a=y,this._b=B,this._c=fe,this._d=Pe}$.prototype={transform:function(y,B){return this._transform(y.clone(),B)},_transform:function(y,B){return B=B||1,y.x=B*(this._a*y.x+this._b),y.y=B*(this._c*y.y+this._d),y},untransform:function(y,B){return B=B||1,new ne((y.x/B-this._b)/this._a,(y.y/B-this._d)/this._c)}};function le(y,B,fe,Pe){return new $(y,B,fe,Pe)}var K=o({},Re,{code:"EPSG:3857",projection:ke,transformation:function(){var y=.5/(Math.PI*ke.R);return le(y,.5,-y,.5)}()}),te=o({},K,{code:"EPSG:900913"});function ie(y){return document.createElementNS("http://www.w3.org/2000/svg",y)}function ce(y,B){var fe="",Pe,et,St,sr,hr,Ar;for(Pe=0,St=y.length;Pe<St;Pe++){for(hr=y[Pe],et=0,sr=hr.length;et<sr;et++)Ar=hr[et],fe+=(et?"L":"M")+Ar.x+" "+Ar.y;fe+=B?Ue.svg?"z":"x":""}return fe||"M0 0"}var ae=document.documentElement.style,ve="ActiveXObject"in window,pe=ve&&!document.addEventListener,he="msLaunchUri"in navigator&&!("documentMode"in document),ye=zt("webkit"),_e=zt("android"),je=zt("android 2")||zt("android 3"),Je=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),nt=_e&&zt("Google")&&Je<537&&!("AudioNode"in window),at=!!window.opera,Fe=!he&&zt("chrome"),Ie=zt("gecko")&&!ye&&!at&&!ve,Ke=!Fe&&zt("safari"),Qe=zt("phantom"),it="OTransition"in ae,Ne=navigator.platform.indexOf("Win")===0,ht=ve&&"transition"in ae,Tt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,Xt="MozPerspective"in ae,Nt=!window.L_DISABLE_3D&&(ht||Tt||Xt)&&!it&&!Qe,Mt=typeof orientation<"u"||zt("mobile"),Vt=Mt&&ye,Yt=Mt&&Tt,cr=!window.PointerEvent&&window.MSPointerEvent,Nr=!!(window.PointerEvent||cr),er="ontouchstart"in window||!!window.TouchEvent,Wt=!window.L_NO_TOUCH&&(er||Nr),dr=Mt&&at,zr=Mt&&Ie,Dr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,$e=function(){var y=!1;try{var B=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("testPassiveEventSupport",v,B),window.removeEventListener("testPassiveEventSupport",v,B)}catch{}return y}(),pt=function(){return!!document.createElement("canvas").getContext}(),kt=!!(document.createElementNS&&ie("svg").createSVGRect),Me=!!kt&&function(){var y=document.createElement("div");return y.innerHTML="<svg/>",(y.firstChild&&y.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),rt=!kt&&function(){try{var y=document.createElement("div");y.innerHTML='<v:shape adj="1"/>';var B=y.firstChild;return B.style.behavior="url(#default#VML)",B&&typeof B.adj=="object"}catch{return!1}}(),st=navigator.platform.indexOf("Mac")===0,ft=navigator.platform.indexOf("Linux")===0;function zt(y){return navigator.userAgent.toLowerCase().indexOf(y)>=0}var Ue={ie:ve,ielt9:pe,edge:he,webkit:ye,android:_e,android23:je,androidStock:nt,opera:at,chrome:Fe,gecko:Ie,safari:Ke,phantom:Qe,opera12:it,win:Ne,ie3d:ht,webkit3d:Tt,gecko3d:Xt,any3d:Nt,mobile:Mt,mobileWebkit:Vt,mobileWebkit3d:Yt,msPointer:cr,pointer:Nr,touch:Wt,touchNative:er,mobileOpera:dr,mobileGecko:zr,retina:Dr,passiveEvents:$e,canvas:pt,svg:kt,vml:rt,inlineSvg:Me,mac:st,linux:ft},Ae=Ue.msPointer?"MSPointerDown":"pointerdown",Oe=Ue.msPointer?"MSPointerMove":"pointermove",We=Ue.msPointer?"MSPointerUp":"pointerup",Ve=Ue.msPointer?"MSPointerCancel":"pointercancel",lt={touchstart:Ae,touchmove:Oe,touchend:We,touchcancel:Ve},mt={touchstart:Rr,touchmove:Mr,touchend:Mr,touchcancel:Mr},dt={},At=!1;function Bt(y,B,fe){return B==="touchstart"&&Gt(),mt[B]?(fe=mt[B].bind(this,fe),y.addEventListener(lt[B],fe,!1),fe):(console.warn("wrong event specified:",B),L.Util.falseFn)}function ir(y,B,fe){if(!lt[B]){console.warn("wrong event specified:",B);return}y.removeEventListener(lt[B],fe,!1)}function tr(y){dt[y.pointerId]=y}function vt(y){dt[y.pointerId]&&(dt[y.pointerId]=y)}function pr(y){delete dt[y.pointerId]}function Gt(){At||(document.addEventListener(Ae,tr,!0),document.addEventListener(Oe,vt,!0),document.addEventListener(We,pr,!0),document.addEventListener(Ve,pr,!0),At=!0)}function Mr(y,B){if(B.pointerType!==(B.MSPOINTER_TYPE_MOUSE||"mouse")){B.touches=[];for(var fe in dt)B.touches.push(dt[fe]);B.changedTouches=[B],y(B)}}function Rr(y,B){B.MSPOINTER_TYPE_TOUCH&&B.pointerType===B.MSPOINTER_TYPE_TOUCH&&Wi(B),Mr(y,B)}function Yr(y){var B={},fe,Pe;for(Pe in y)fe=y[Pe],B[Pe]=fe&&fe.bind?fe.bind(y):fe;return y=B,B.type="dblclick",B.detail=2,B.isTrusted=!1,B._simulated=!0,B}var Kr=200;function vr(y,B){y.addEventListener("dblclick",B);var fe=0,Pe;function et(St){if(St.detail!==1){Pe=St.detail;return}if(!(St.pointerType==="mouse"||St.sourceCapabilities&&!St.sourceCapabilities.firesTouchEvents)){var sr=Ts(St);if(!(sr.some(function(Ar){return Ar instanceof HTMLLabelElement&&Ar.attributes.for})&&!sr.some(function(Ar){return Ar instanceof HTMLInputElement||Ar instanceof HTMLSelectElement}))){var hr=Date.now();hr-fe<=Kr?(Pe++,Pe===2&&B(Yr(St))):Pe=1,fe=hr}}}return y.addEventListener("click",et),{dblclick:B,simDblclick:et}}function Xr(y,B){y.removeEventListener("dblclick",B.dblclick),y.removeEventListener("click",B.simDblclick)}var $r=Ir(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Le=Ir(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),De=Le==="webkitTransition"||Le==="OTransition"?Le+"End":"transitionend";function bt(y){return typeof y=="string"?document.getElementById(y):y}function xt(y,B){var fe=y.style[B]||y.currentStyle&&y.currentStyle[B];if((!fe||fe==="auto")&&document.defaultView){var Pe=document.defaultView.getComputedStyle(y,null);fe=Pe?Pe[B]:null}return fe==="auto"?null:fe}function Ct(y,B,fe){var Pe=document.createElement(y);return Pe.className=B||"",fe&&fe.appendChild(Pe),Pe}function Rt(y){var B=y.parentNode;B&&B.removeChild(y)}function Lt(y){for(;y.firstChild;)y.removeChild(y.firstChild)}function Pt(y){var B=y.parentNode;B&&B.lastChild!==y&&B.appendChild(y)}function nr(y){var B=y.parentNode;B&&B.firstChild!==y&&B.insertBefore(y,B.firstChild)}function Tr(y,B){if(y.classList!==void 0)return y.classList.contains(B);var fe=Pr(y);return fe.length>0&&new RegExp("(^|\\s)"+B+"(\\s|$)").test(fe)}function gr(y,B){if(y.classList!==void 0)for(var fe=_(B),Pe=0,et=fe.length;Pe<et;Pe++)y.classList.add(fe[Pe]);else if(!Tr(y,B)){var St=Pr(y);mr(y,(St?St+" ":"")+B)}}function $t(y,B){y.classList!==void 0?y.classList.remove(B):mr(y,p((" "+Pr(y)+" ").replace(" "+B+" "," ")))}function mr(y,B){y.className.baseVal===void 0?y.className=B:y.className.baseVal=B}function Pr(y){return y.correspondingElement&&(y=y.correspondingElement),y.className.baseVal===void 0?y.className:y.className.baseVal}function wr(y,B){"opacity"in y.style?y.style.opacity=B:"filter"in y.style&&fr(y,B)}function fr(y,B){var fe=!1,Pe="DXImageTransform.Microsoft.Alpha";try{fe=y.filters.item(Pe)}catch{if(B===1)return}B=Math.round(B*100),fe?(fe.Enabled=B!==100,fe.Opacity=B):y.style.filter+=" progid:"+Pe+"(opacity="+B+")"}function Ir(y){for(var B=document.documentElement.style,fe=0;fe<y.length;fe++)if(y[fe]in B)return y[fe];return!1}function Vr(y,B,fe){var Pe=B||new ne(0,0);y.style[$r]=(Ue.ie3d?"translate("+Pe.x+"px,"+Pe.y+"px)":"translate3d("+Pe.x+"px,"+Pe.y+"px,0)")+(fe?" scale("+fe+")":"")}function _r(y,B){y._leaflet_pos=B,Ue.any3d?Vr(y,B):(y.style.left=B.x+"px",y.style.top=B.y+"px")}function Gr(y){return y._leaflet_pos||new ne(0,0)}var qr,tn,Ur;if("onselectstart"in document)qr=function(){Bn(window,"selectstart",Wi)},tn=function(){vi(window,"selectstart",Wi)};else{var Sn=Ir(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qr=function(){if(Sn){var y=document.documentElement.style;Ur=y[Sn],y[Sn]="none"}},tn=function(){Sn&&(document.documentElement.style[Sn]=Ur,Ur=void 0)}}function wn(){Bn(window,"dragstart",Wi)}function hn(){vi(window,"dragstart",Wi)}var bn,mn;function Dn(y){for(;y.tabIndex===-1;)y=y.parentNode;!y.style||(Yn(),bn=y,mn=y.style.outline,y.style.outline="none",Bn(window,"keydown",Yn))}function Yn(){!bn||(bn.style.outline=mn,bn=void 0,mn=void 0,vi(window,"keydown",Yn))}function hi(y){do y=y.parentNode;while((!y.offsetWidth||!y.offsetHeight)&&y!==document.body);return y}function mi(y){var B=y.getBoundingClientRect();return{x:B.width/y.offsetWidth||1,y:B.height/y.offsetHeight||1,boundingClientRect:B}}var Zi={__proto__:null,TRANSFORM:$r,TRANSITION:Le,TRANSITION_END:De,get:bt,getStyle:xt,create:Ct,remove:Rt,empty:Lt,toFront:Pt,toBack:nr,hasClass:Tr,addClass:gr,removeClass:$t,setClass:mr,getClass:Pr,setOpacity:wr,testProp:Ir,setTransform:Vr,setPosition:_r,getPosition:Gr,get disableTextSelection(){return qr},get enableTextSelection(){return tn},disableImageDrag:wn,enableImageDrag:hn,preventOutline:Dn,restoreOutline:Yn,getSizedParentNode:hi,getScale:mi};function Bn(y,B,fe,Pe){if(B&&typeof B=="object")for(var et in B)Ea(y,et,B[et],fe);else{B=_(B);for(var St=0,sr=B.length;St<sr;St++)Ea(y,B[St],fe,Pe)}return this}var Ai="_leaflet_events";function vi(y,B,fe,Pe){if(arguments.length===1)Mo(y),delete y[Ai];else if(B&&typeof B=="object")for(var et in B)Oa(y,et,B[et],fe);else if(B=_(B),arguments.length===2)Mo(y,function(hr){return D(B,hr)!==-1});else for(var St=0,sr=B.length;St<sr;St++)Oa(y,B[St],fe,Pe);return this}function Mo(y,B){for(var fe in y[Ai]){var Pe=fe.split(/\d/)[0];(!B||B(Pe))&&Oa(y,Pe,null,null,fe)}}var sa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ea(y,B,fe,Pe){var et=B+l(fe)+(Pe?"_"+l(Pe):"");if(y[Ai]&&y[Ai][et])return this;var St=function(hr){return fe.call(Pe||y,hr||window.event)},sr=St;!Ue.touchNative&&Ue.pointer&&B.indexOf("touch")===0?St=Bt(y,B,St):Ue.touch&&B==="dblclick"?St=vr(y,St):"addEventListener"in y?B==="touchstart"||B==="touchmove"||B==="wheel"||B==="mousewheel"?y.addEventListener(sa[B]||B,St,Ue.passiveEvents?{passive:!1}:!1):B==="mouseenter"||B==="mouseleave"?(St=function(hr){hr=hr||window.event,us(y,hr)&&sr(hr)},y.addEventListener(sa[B],St,!1)):y.addEventListener(B,sr,!1):y.attachEvent("on"+B,St),y[Ai]=y[Ai]||{},y[Ai][et]=St}function Oa(y,B,fe,Pe,et){et=et||B+l(fe)+(Pe?"_"+l(Pe):"");var St=y[Ai]&&y[Ai][et];if(!St)return this;!Ue.touchNative&&Ue.pointer&&B.indexOf("touch")===0?ir(y,B,St):Ue.touch&&B==="dblclick"?Xr(y,St):"removeEventListener"in y?y.removeEventListener(sa[B]||B,St,!1):y.detachEvent("on"+B,St),y[Ai][et]=null}function Kn(y){return y.stopPropagation?y.stopPropagation():y.originalEvent?y.originalEvent._stopped=!0:y.cancelBubble=!0,this}function ko(y){return Ea(y,"wheel",Kn),this}function to(y){return Bn(y,"mousedown touchstart dblclick contextmenu",Kn),y._leaflet_disable_click=!0,this}function Wi(y){return y.preventDefault?y.preventDefault():y.returnValue=!1,this}function ro(y){return Wi(y),Kn(y),this}function Ts(y){if(y.composedPath)return y.composedPath();for(var B=[],fe=y.target;fe;)B.push(fe),fe=fe.parentNode;return B}function ya(y,B){if(!B)return new ne(y.clientX,y.clientY);var fe=mi(B),Pe=fe.boundingClientRect;return new ne((y.clientX-Pe.left)/fe.x-B.clientLeft,(y.clientY-Pe.top)/fe.y-B.clientTop)}var Io=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function za(y){return Ue.edge?y.wheelDeltaY/2:y.deltaY&&y.deltaMode===0?-y.deltaY/Io:y.deltaY&&y.deltaMode===1?-y.deltaY*20:y.deltaY&&y.deltaMode===2?-y.deltaY*60:y.deltaX||y.deltaZ?0:y.wheelDelta?(y.wheelDeltaY||y.wheelDelta)/2:y.detail&&Math.abs(y.detail)<32765?-y.detail*20:y.detail?y.detail/-32765*60:0}function us(y,B){var fe=B.relatedTarget;if(!fe)return!0;try{for(;fe&&fe!==y;)fe=fe.parentNode}catch{return!1}return fe!==y}var Jo={__proto__:null,on:Bn,off:vi,stopPropagation:Kn,disableScrollPropagation:ko,disableClickPropagation:to,preventDefault:Wi,stop:ro,getPropagationPath:Ts,getMousePosition:ya,getWheelDelta:za,isExternalTarget:us,addListener:Bn,removeListener:vi},Ta=J.extend({run:function(y,B,fe,Pe){this.stop(),this._el=y,this._inProgress=!0,this._duration=fe||.25,this._easeOutPower=1/Math.max(Pe||.5,.2),this._startPos=Gr(y),this._offset=B.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(y){var B=+new Date-this._startTime,fe=this._duration*1e3;B<fe?this._runFrame(this._easeOut(B/fe),y):(this._runFrame(1),this._complete())},_runFrame:function(y,B){var fe=this._startPos.add(this._offset.multiplyBy(y));B&&fe._round(),_r(this._el,fe),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(y){return 1-Math.pow(1-y,this._easeOutPower)}}),di=J.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(y,B){B=b(this,B),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(y),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),B.maxBounds&&this.setMaxBounds(B.maxBounds),B.zoom!==void 0&&(this._zoom=this._limitZoom(B.zoom)),B.center&&B.zoom!==void 0&&this.setView(xe(B.center),B.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Le&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Bn(this._proxy,De,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(y,B,fe){if(B=B===void 0?this._zoom:this._limitZoom(B),y=this._limitCenter(xe(y),B,this.options.maxBounds),fe=fe||{},this._stop(),this._loaded&&!fe.reset&&fe!==!0){fe.animate!==void 0&&(fe.zoom=o({animate:fe.animate},fe.zoom),fe.pan=o({animate:fe.animate,duration:fe.duration},fe.pan));var Pe=this._zoom!==B?this._tryAnimatedZoom&&this._tryAnimatedZoom(y,B,fe.zoom):this._tryAnimatedPan(y,fe.pan);if(Pe)return clearTimeout(this._sizeTimer),this}return this._resetView(y,B,fe.pan&&fe.pan.noMoveStart),this},setZoom:function(y,B){return this._loaded?this.setView(this.getCenter(),y,{zoom:B}):(this._zoom=y,this)},zoomIn:function(y,B){return y=y||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+y,B)},zoomOut:function(y,B){return y=y||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-y,B)},setZoomAround:function(y,B,fe){var Pe=this.getZoomScale(B),et=this.getSize().divideBy(2),St=y instanceof ne?y:this.latLngToContainerPoint(y),sr=St.subtract(et).multiplyBy(1-1/Pe),hr=this.containerPointToLatLng(et.add(sr));return this.setView(hr,B,{zoom:fe})},_getBoundsCenterZoom:function(y,B){B=B||{},y=y.getBounds?y.getBounds():de(y);var fe=we(B.paddingTopLeft||B.padding||[0,0]),Pe=we(B.paddingBottomRight||B.padding||[0,0]),et=this.getBoundsZoom(y,!1,fe.add(Pe));if(et=typeof B.maxZoom=="number"?Math.min(B.maxZoom,et):et,et===1/0)return{center:y.getCenter(),zoom:et};var St=Pe.subtract(fe).divideBy(2),sr=this.project(y.getSouthWest(),et),hr=this.project(y.getNorthEast(),et),Ar=this.unproject(sr.add(hr).divideBy(2).add(St),et);return{center:Ar,zoom:et}},fitBounds:function(y,B){if(y=de(y),!y.isValid())throw new Error("Bounds are not valid.");var fe=this._getBoundsCenterZoom(y,B);return this.setView(fe.center,fe.zoom,B)},fitWorld:function(y){return this.fitBounds([[-90,-180],[90,180]],y)},panTo:function(y,B){return this.setView(y,this._zoom,{pan:B})},panBy:function(y,B){if(y=we(y).round(),B=B||{},!y.x&&!y.y)return this.fire("moveend");if(B.animate!==!0&&!this.getSize().contains(y))return this._resetView(this.unproject(this.project(this.getCenter()).add(y)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ta,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),B.noMoveStart||this.fire("movestart"),B.animate!==!1){gr(this._mapPane,"leaflet-pan-anim");var fe=this._getMapPanePos().subtract(y).round();this._panAnim.run(this._mapPane,fe,B.duration||.25,B.easeLinearity)}else this._rawPanBy(y),this.fire("move").fire("moveend");return this},flyTo:function(y,B,fe){if(fe=fe||{},fe.animate===!1||!Ue.any3d)return this.setView(y,B,fe);this._stop();var Pe=this.project(this.getCenter()),et=this.project(y),St=this.getSize(),sr=this._zoom;y=xe(y),B=B===void 0?sr:B;var hr=Math.max(St.x,St.y),Ar=hr*this.getZoomScale(sr,B),dn=et.distanceTo(Pe)||1,Zn=1.42,ii=Zn*Zn;function Qn(O){var G=O?-1:1,oe=O?Ar:hr,Te=Ar*Ar-hr*hr+G*ii*ii*dn*dn,Be=2*oe*ii*dn,Ze=Te/Be,qe=Math.sqrt(Ze*Ze+1)-Ze,ut=qe<1e-9?-18:Math.log(qe);return ut}function Pa(O){return(Math.exp(O)-Math.exp(-O))/2}function Xa(O){return(Math.exp(O)+Math.exp(-O))/2}function gu(O){return Pa(O)/Xa(O)}var so=Qn(0);function Aa(O){return hr*(Xa(so)/Xa(so+Zn*O))}function Za(O){return hr*(Xa(so)*gu(so+Zn*O)-Pa(so))/ii}function mc(O){return 1-Math.pow(1-O,1.5)}var cl=Date.now(),N=(Qn(1)-so)/Zn,f=fe.duration?1e3*fe.duration:1e3*N*.8;function w(){var O=(Date.now()-cl)/f,G=mc(O)*N;O<=1?(this._flyToFrame=U(w,this),this._move(this.unproject(Pe.add(et.subtract(Pe).multiplyBy(Za(G)/dn)),sr),this.getScaleZoom(hr/Aa(G),sr),{flyTo:!0})):this._move(y,B)._moveEnd(!0)}return this._moveStart(!0,fe.noMoveStart),w.call(this),this},flyToBounds:function(y,B){var fe=this._getBoundsCenterZoom(y,B);return this.flyTo(fe.center,fe.zoom,B)},setMaxBounds:function(y){return y=de(y),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),y.isValid()?(this.options.maxBounds=y,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(y){var B=this.options.minZoom;return this.options.minZoom=y,this._loaded&&B!==y&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(y):this},setMaxZoom:function(y){var B=this.options.maxZoom;return this.options.maxZoom=y,this._loaded&&B!==y&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(y):this},panInsideBounds:function(y,B){this._enforcingBounds=!0;var fe=this.getCenter(),Pe=this._limitCenter(fe,this._zoom,de(y));return fe.equals(Pe)||this.panTo(Pe,B),this._enforcingBounds=!1,this},panInside:function(y,B){B=B||{};var fe=we(B.paddingTopLeft||B.padding||[0,0]),Pe=we(B.paddingBottomRight||B.padding||[0,0]),et=this.project(this.getCenter()),St=this.project(y),sr=this.getPixelBounds(),hr=X([sr.min.add(fe),sr.max.subtract(Pe)]),Ar=hr.getSize();if(!hr.contains(St)){this._enforcingBounds=!0;var dn=St.subtract(hr.getCenter()),Zn=hr.extend(St).getSize().subtract(Ar);et.x+=dn.x<0?-Zn.x:Zn.x,et.y+=dn.y<0?-Zn.y:Zn.y,this.panTo(this.unproject(et),B),this._enforcingBounds=!1}return this},invalidateSize:function(y){if(!this._loaded)return this;y=o({animate:!1,pan:!0},y===!0?{animate:!0}:y);var B=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var fe=this.getSize(),Pe=B.divideBy(2).round(),et=fe.divideBy(2).round(),St=Pe.subtract(et);return!St.x&&!St.y?this:(y.animate&&y.pan?this.panBy(St):(y.pan&&this._rawPanBy(St),this.fire("move"),y.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:B,newSize:fe}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(y){if(y=this._locateOptions=o({timeout:1e4,watch:!1},y),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var B=s(this._handleGeolocationResponse,this),fe=s(this._handleGeolocationError,this);return y.watch?this._locationWatchId=navigator.geolocation.watchPosition(B,fe,y):navigator.geolocation.getCurrentPosition(B,fe,y),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(y){if(!!this._container._leaflet_id){var B=y.code,fe=y.message||(B===1?"permission denied":B===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:B,message:"Geolocation error: "+fe+"."})}},_handleGeolocationResponse:function(y){if(!!this._container._leaflet_id){var B=y.coords.latitude,fe=y.coords.longitude,Pe=new me(B,fe),et=Pe.toBounds(y.coords.accuracy*2),St=this._locateOptions;if(St.setView){var sr=this.getBoundsZoom(et);this.setView(Pe,St.maxZoom?Math.min(sr,St.maxZoom):sr)}var hr={latlng:Pe,bounds:et,timestamp:y.timestamp};for(var Ar in y.coords)typeof y.coords[Ar]=="number"&&(hr[Ar]=y.coords[Ar]);this.fire("locationfound",hr)}},addHandler:function(y,B){if(!B)return this;var fe=this[y]=new B(this);return this._handlers.push(fe),this.options[y]&&fe.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var y;for(y in this._layers)this._layers[y].remove();for(y in this._panes)Rt(this._panes[y]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(y,B){var fe="leaflet-pane"+(y?" leaflet-"+y.replace("Pane","")+"-pane":""),Pe=Ct("div",fe,B||this._mapPane);return y&&(this._panes[y]=Pe),Pe},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var y=this.getPixelBounds(),B=this.unproject(y.getBottomLeft()),fe=this.unproject(y.getTopRight());return new re(B,fe)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(y,B,fe){y=de(y),fe=we(fe||[0,0]);var Pe=this.getZoom()||0,et=this.getMinZoom(),St=this.getMaxZoom(),sr=y.getNorthWest(),hr=y.getSouthEast(),Ar=this.getSize().subtract(fe),dn=X(this.project(hr,Pe),this.project(sr,Pe)).getSize(),Zn=Ue.any3d?this.options.zoomSnap:1,ii=Ar.x/dn.x,Qn=Ar.y/dn.y,Pa=B?Math.max(ii,Qn):Math.min(ii,Qn);return Pe=this.getScaleZoom(Pa,Pe),Zn&&(Pe=Math.round(Pe/(Zn/100))*(Zn/100),Pe=B?Math.ceil(Pe/Zn)*Zn:Math.floor(Pe/Zn)*Zn),Math.max(et,Math.min(St,Pe))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(y,B){var fe=this._getTopLeftPoint(y,B);return new ee(fe,fe.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(y){return this.options.crs.getProjectedBounds(y===void 0?this.getZoom():y)},getPane:function(y){return typeof y=="string"?this._panes[y]:y},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(y,B){var fe=this.options.crs;return B=B===void 0?this._zoom:B,fe.scale(y)/fe.scale(B)},getScaleZoom:function(y,B){var fe=this.options.crs;B=B===void 0?this._zoom:B;var Pe=fe.zoom(y*fe.scale(B));return isNaN(Pe)?1/0:Pe},project:function(y,B){return B=B===void 0?this._zoom:B,this.options.crs.latLngToPoint(xe(y),B)},unproject:function(y,B){return B=B===void 0?this._zoom:B,this.options.crs.pointToLatLng(we(y),B)},layerPointToLatLng:function(y){var B=we(y).add(this.getPixelOrigin());return this.unproject(B)},latLngToLayerPoint:function(y){var B=this.project(xe(y))._round();return B._subtract(this.getPixelOrigin())},wrapLatLng:function(y){return this.options.crs.wrapLatLng(xe(y))},wrapLatLngBounds:function(y){return this.options.crs.wrapLatLngBounds(de(y))},distance:function(y,B){return this.options.crs.distance(xe(y),xe(B))},containerPointToLayerPoint:function(y){return we(y).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(y){return we(y).add(this._getMapPanePos())},containerPointToLatLng:function(y){var B=this.containerPointToLayerPoint(we(y));return this.layerPointToLatLng(B)},latLngToContainerPoint:function(y){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(y)))},mouseEventToContainerPoint:function(y){return ya(y,this._container)},mouseEventToLayerPoint:function(y){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(y))},mouseEventToLatLng:function(y){return this.layerPointToLatLng(this.mouseEventToLayerPoint(y))},_initContainer:function(y){var B=this._container=bt(y);if(B){if(B._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Bn(B,"scroll",this._onScroll,this),this._containerId=l(B)},_initLayout:function(){var y=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,gr(y,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var B=xt(y,"position");B!=="absolute"&&B!=="relative"&&B!=="fixed"&&(y.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var y=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_r(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(gr(y.markerPane,"leaflet-zoom-hide"),gr(y.shadowPane,"leaflet-zoom-hide"))},_resetView:function(y,B,fe){_r(this._mapPane,new ne(0,0));var Pe=!this._loaded;this._loaded=!0,B=this._limitZoom(B),this.fire("viewprereset");var et=this._zoom!==B;this._moveStart(et,fe)._move(y,B)._moveEnd(et),this.fire("viewreset"),Pe&&this.fire("load")},_moveStart:function(y,B){return y&&this.fire("zoomstart"),B||this.fire("movestart"),this},_move:function(y,B,fe,Pe){B===void 0&&(B=this._zoom);var et=this._zoom!==B;return this._zoom=B,this._lastCenter=y,this._pixelOrigin=this._getNewPixelOrigin(y),Pe?fe&&fe.pinch&&this.fire("zoom",fe):((et||fe&&fe.pinch)&&this.fire("zoom",fe),this.fire("move",fe)),this},_moveEnd:function(y){return y&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(y){_r(this._mapPane,this._getMapPanePos().subtract(y))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(y){this._targets={},this._targets[l(this._container)]=this;var B=y?vi:Bn;B(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&B(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(y?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var y=this._getMapPanePos();Math.max(Math.abs(y.x),Math.abs(y.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(y,B){for(var fe=[],Pe,et=B==="mouseout"||B==="mouseover",St=y.target||y.srcElement,sr=!1;St;){if(Pe=this._targets[l(St)],Pe&&(B==="click"||B==="preclick")&&this._draggableMoved(Pe)){sr=!0;break}if(Pe&&Pe.listens(B,!0)&&(et&&!us(St,y)||(fe.push(Pe),et))||St===this._container)break;St=St.parentNode}return!fe.length&&!sr&&!et&&this.listens(B,!0)&&(fe=[this]),fe},_isClickDisabled:function(y){for(;y&&y!==this._container;){if(y._leaflet_disable_click)return!0;y=y.parentNode}},_handleDOMEvent:function(y){var B=y.target||y.srcElement;if(!(!this._loaded||B._leaflet_disable_events||y.type==="click"&&this._isClickDisabled(B))){var fe=y.type;fe==="mousedown"&&Dn(B),this._fireDOMEvent(y,fe)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(y,B,fe){if(y.type==="click"){var Pe=o({},y);Pe.type="preclick",this._fireDOMEvent(Pe,Pe.type,fe)}var et=this._findEventTargets(y,B);if(fe){for(var St=[],sr=0;sr<fe.length;sr++)fe[sr].listens(B,!0)&&St.push(fe[sr]);et=St.concat(et)}if(!!et.length){B==="contextmenu"&&Wi(y);var hr=et[0],Ar={originalEvent:y};if(y.type!=="keypress"&&y.type!=="keydown"&&y.type!=="keyup"){var dn=hr.getLatLng&&(!hr._radius||hr._radius<=10);Ar.containerPoint=dn?this.latLngToContainerPoint(hr.getLatLng()):this.mouseEventToContainerPoint(y),Ar.layerPoint=this.containerPointToLayerPoint(Ar.containerPoint),Ar.latlng=dn?hr.getLatLng():this.layerPointToLatLng(Ar.layerPoint)}for(sr=0;sr<et.length;sr++)if(et[sr].fire(B,Ar,!0),Ar.originalEvent._stopped||et[sr].options.bubblingMouseEvents===!1&&D(this._mouseEvents,B)!==-1)return}},_draggableMoved:function(y){return y=y.dragging&&y.dragging.enabled()?y:this,y.dragging&&y.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var y=0,B=this._handlers.length;y<B;y++)this._handlers[y].disable()},whenReady:function(y,B){return this._loaded?y.call(B||this,{target:this}):this.on("load",y,B),this},_getMapPanePos:function(){return Gr(this._mapPane)||new ne(0,0)},_moved:function(){var y=this._getMapPanePos();return y&&!y.equals([0,0])},_getTopLeftPoint:function(y,B){var fe=y&&B!==void 0?this._getNewPixelOrigin(y,B):this.getPixelOrigin();return fe.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(y,B){var fe=this.getSize()._divideBy(2);return this.project(y,B)._subtract(fe)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(y,B,fe){var Pe=this._getNewPixelOrigin(fe,B);return this.project(y,B)._subtract(Pe)},_latLngBoundsToNewLayerBounds:function(y,B,fe){var Pe=this._getNewPixelOrigin(fe,B);return X([this.project(y.getSouthWest(),B)._subtract(Pe),this.project(y.getNorthWest(),B)._subtract(Pe),this.project(y.getSouthEast(),B)._subtract(Pe),this.project(y.getNorthEast(),B)._subtract(Pe)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(y){return this.latLngToLayerPoint(y).subtract(this._getCenterLayerPoint())},_limitCenter:function(y,B,fe){if(!fe)return y;var Pe=this.project(y,B),et=this.getSize().divideBy(2),St=new ee(Pe.subtract(et),Pe.add(et)),sr=this._getBoundsOffset(St,fe,B);return sr.round().equals([0,0])?y:this.unproject(Pe.add(sr),B)},_limitOffset:function(y,B){if(!B)return y;var fe=this.getPixelBounds(),Pe=new ee(fe.min.add(y),fe.max.add(y));return y.add(this._getBoundsOffset(Pe,B))},_getBoundsOffset:function(y,B,fe){var Pe=X(this.project(B.getNorthEast(),fe),this.project(B.getSouthWest(),fe)),et=Pe.min.subtract(y.min),St=Pe.max.subtract(y.max),sr=this._rebound(et.x,-St.x),hr=this._rebound(et.y,-St.y);return new ne(sr,hr)},_rebound:function(y,B){return y+B>0?Math.round(y-B)/2:Math.max(0,Math.ceil(y))-Math.max(0,Math.floor(B))},_limitZoom:function(y){var B=this.getMinZoom(),fe=this.getMaxZoom(),Pe=Ue.any3d?this.options.zoomSnap:1;return Pe&&(y=Math.round(y/Pe)*Pe),Math.max(B,Math.min(fe,y))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$t(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(y,B){var fe=this._getCenterOffset(y)._trunc();return(B&&B.animate)!==!0&&!this.getSize().contains(fe)?!1:(this.panBy(fe,B),!0)},_createAnimProxy:function(){var y=this._proxy=Ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(y),this.on("zoomanim",function(B){var fe=$r,Pe=this._proxy.style[fe];Vr(this._proxy,this.project(B.center,B.zoom),this.getZoomScale(B.zoom,1)),Pe===this._proxy.style[fe]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var y=this.getCenter(),B=this.getZoom();Vr(this._proxy,this.project(y,B),this.getZoomScale(B,1))},_catchTransitionEnd:function(y){this._animatingZoom&&y.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(y,B,fe){if(this._animatingZoom)return!0;if(fe=fe||{},!this._zoomAnimated||fe.animate===!1||this._nothingToAnimate()||Math.abs(B-this._zoom)>this.options.zoomAnimationThreshold)return!1;var Pe=this.getZoomScale(B),et=this._getCenterOffset(y)._divideBy(1-1/Pe);return fe.animate!==!0&&!this.getSize().contains(et)?!1:(U(function(){this._moveStart(!0,!1)._animateZoom(y,B,!0)},this),!0)},_animateZoom:function(y,B,fe,Pe){!this._mapPane||(fe&&(this._animatingZoom=!0,this._animateToCenter=y,this._animateToZoom=B,gr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:y,zoom:B,noUpdate:Pe}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&$t(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function zs(y,B){return new di(y,B)}var Ya=j.extend({options:{position:"topright"},initialize:function(y){b(this,y)},getPosition:function(){return this.options.position},setPosition:function(y){var B=this._map;return B&&B.removeControl(this),this.options.position=y,B&&B.addControl(this),this},getContainer:function(){return this._container},addTo:function(y){this.remove(),this._map=y;var B=this._container=this.onAdd(y),fe=this.getPosition(),Pe=y._controlCorners[fe];return gr(B,"leaflet-control"),fe.indexOf("bottom")!==-1?Pe.insertBefore(B,Pe.firstChild):Pe.appendChild(B),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(y){this._map&&y&&y.screenX>0&&y.screenY>0&&this._map.getContainer().focus()}}),_a=function(y){return new Ya(y)};di.include({addControl:function(y){return y.addTo(this),this},removeControl:function(y){return y.remove(),this},_initControlPos:function(){var y=this._controlCorners={},B="leaflet-",fe=this._controlContainer=Ct("div",B+"control-container",this._container);function Pe(et,St){var sr=B+et+" "+B+St;y[et+St]=Ct("div",sr,fe)}Pe("top","left"),Pe("top","right"),Pe("bottom","left"),Pe("bottom","right")},_clearControlPos:function(){for(var y in this._controlCorners)Rt(this._controlCorners[y]);Rt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ba=Ya.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(y,B,fe,Pe){return fe<Pe?-1:Pe<fe?1:0}},initialize:function(y,B,fe){b(this,fe),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var Pe in y)this._addLayer(y[Pe],Pe);for(Pe in B)this._addLayer(B[Pe],Pe,!0)},onAdd:function(y){this._initLayout(),this._update(),this._map=y,y.on("zoomend",this._checkDisabledLayers,this);for(var B=0;B<this._layers.length;B++)this._layers[B].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(y){return Ya.prototype.addTo.call(this,y),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(y,B){return this._addLayer(y,B),this._map?this._update():this},addOverlay:function(y,B){return this._addLayer(y,B,!0),this._map?this._update():this},removeLayer:function(y){y.off("add remove",this._onLayerChange,this);var B=this._getLayer(l(y));return B&&this._layers.splice(this._layers.indexOf(B),1),this._map?this._update():this},expand:function(){gr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var y=this._map.getSize().y-(this._container.offsetTop+50);return y<this._section.clientHeight?(gr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=y+"px"):$t(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $t(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var y="leaflet-control-layers",B=this._container=Ct("div",y),fe=this.options.collapsed;B.setAttribute("aria-haspopup",!0),to(B),ko(B);var Pe=this._section=Ct("section",y+"-list");fe&&(this._map.on("click",this.collapse,this),Bn(B,{mouseenter:function(){Bn(Pe,"click",Wi),this.expand(),setTimeout(function(){vi(Pe,"click",Wi)})},mouseleave:this.collapse},this));var et=this._layersLink=Ct("a",y+"-toggle",B);et.href="#",et.title="Layers",et.setAttribute("role","button"),Bn(et,"click",Wi),Bn(et,"focus",this.expand,this),fe||this.expand(),this._baseLayersList=Ct("div",y+"-base",Pe),this._separator=Ct("div",y+"-separator",Pe),this._overlaysList=Ct("div",y+"-overlays",Pe),B.appendChild(Pe)},_getLayer:function(y){for(var B=0;B<this._layers.length;B++)if(this._layers[B]&&l(this._layers[B].layer)===y)return this._layers[B]},_addLayer:function(y,B,fe){this._map&&y.on("add remove",this._onLayerChange,this),this._layers.push({layer:y,name:B,overlay:fe}),this.options.sortLayers&&this._layers.sort(s(function(Pe,et){return this.options.sortFunction(Pe.layer,et.layer,Pe.name,et.name)},this)),this.options.autoZIndex&&y.setZIndex&&(this._lastZIndex++,y.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Lt(this._baseLayersList),Lt(this._overlaysList),this._layerControlInputs=[];var y,B,fe,Pe,et=0;for(fe=0;fe<this._layers.length;fe++)Pe=this._layers[fe],this._addItem(Pe),B=B||Pe.overlay,y=y||!Pe.overlay,et+=Pe.overlay?0:1;return this.options.hideSingleBase&&(y=y&&et>1,this._baseLayersList.style.display=y?"":"none"),this._separator.style.display=B&&y?"":"none",this},_onLayerChange:function(y){this._handlingClick||this._update();var B=this._getLayer(l(y.target)),fe=B.overlay?y.type==="add"?"overlayadd":"overlayremove":y.type==="add"?"baselayerchange":null;fe&&this._map.fire(fe,B)},_createRadioElement:function(y,B){var fe='<input type="radio" class="leaflet-control-layers-selector" name="'+y+'"'+(B?' checked="checked"':"")+"/>",Pe=document.createElement("div");return Pe.innerHTML=fe,Pe.firstChild},_addItem:function(y){var B=document.createElement("label"),fe=this._map.hasLayer(y.layer),Pe;y.overlay?(Pe=document.createElement("input"),Pe.type="checkbox",Pe.className="leaflet-control-layers-selector",Pe.defaultChecked=fe):Pe=this._createRadioElement("leaflet-base-layers_"+l(this),fe),this._layerControlInputs.push(Pe),Pe.layerId=l(y.layer),Bn(Pe,"click",this._onInputClick,this);var et=document.createElement("span");et.innerHTML=" "+y.name;var St=document.createElement("span");B.appendChild(St),St.appendChild(Pe),St.appendChild(et);var sr=y.overlay?this._overlaysList:this._baseLayersList;return sr.appendChild(B),this._checkDisabledLayers(),B},_onInputClick:function(){var y=this._layerControlInputs,B,fe,Pe=[],et=[];this._handlingClick=!0;for(var St=y.length-1;St>=0;St--)B=y[St],fe=this._getLayer(B.layerId).layer,B.checked?Pe.push(fe):B.checked||et.push(fe);for(St=0;St<et.length;St++)this._map.hasLayer(et[St])&&this._map.removeLayer(et[St]);for(St=0;St<Pe.length;St++)this._map.hasLayer(Pe[St])||this._map.addLayer(Pe[St]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var y=this._layerControlInputs,B,fe,Pe=this._map.getZoom(),et=y.length-1;et>=0;et--)B=y[et],fe=this._getLayer(B.layerId).layer,B.disabled=fe.options.minZoom!==void 0&&Pe<fe.options.minZoom||fe.options.maxZoom!==void 0&&Pe>fe.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),cs=function(y,B,fe){return new Ba(y,B,fe)},fs=Ya.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(y){var B="leaflet-control-zoom",fe=Ct("div",B+" leaflet-bar"),Pe=this.options;return this._zoomInButton=this._createButton(Pe.zoomInText,Pe.zoomInTitle,B+"-in",fe,this._zoomIn),this._zoomOutButton=this._createButton(Pe.zoomOutText,Pe.zoomOutTitle,B+"-out",fe,this._zoomOut),this._updateDisabled(),y.on("zoomend zoomlevelschange",this._updateDisabled,this),fe},onRemove:function(y){y.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(y){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(y.shiftKey?3:1))},_zoomOut:function(y){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(y.shiftKey?3:1))},_createButton:function(y,B,fe,Pe,et){var St=Ct("a",fe,Pe);return St.innerHTML=y,St.href="#",St.title=B,St.setAttribute("role","button"),St.setAttribute("aria-label",B),to(St),Bn(St,"click",ro),Bn(St,"click",et,this),Bn(St,"click",this._refocusOnMap,this),St},_updateDisabled:function(){var y=this._map,B="leaflet-disabled";$t(this._zoomInButton,B),$t(this._zoomOutButton,B),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||y._zoom===y.getMinZoom())&&(gr(this._zoomOutButton,B),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||y._zoom===y.getMaxZoom())&&(gr(this._zoomInButton,B),this._zoomInButton.setAttribute("aria-disabled","true"))}});di.mergeOptions({zoomControl:!0}),di.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fs,this.addControl(this.zoomControl))});var $o=function(y){return new fs(y)},As=Ya.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(y){var B="leaflet-control-scale",fe=Ct("div",B),Pe=this.options;return this._addScales(Pe,B+"-line",fe),y.on(Pe.updateWhenIdle?"moveend":"move",this._update,this),y.whenReady(this._update,this),fe},onRemove:function(y){y.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(y,B,fe){y.metric&&(this._mScale=Ct("div",B,fe)),y.imperial&&(this._iScale=Ct("div",B,fe))},_update:function(){var y=this._map,B=y.getSize().y/2,fe=y.distance(y.containerPointToLatLng([0,B]),y.containerPointToLatLng([this.options.maxWidth,B]));this._updateScales(fe)},_updateScales:function(y){this.options.metric&&y&&this._updateMetric(y),this.options.imperial&&y&&this._updateImperial(y)},_updateMetric:function(y){var B=this._getRoundNum(y),fe=B<1e3?B+" m":B/1e3+" km";this._updateScale(this._mScale,fe,B/y)},_updateImperial:function(y){var B=y*3.2808399,fe,Pe,et;B>5280?(fe=B/5280,Pe=this._getRoundNum(fe),this._updateScale(this._iScale,Pe+" mi",Pe/fe)):(et=this._getRoundNum(B),this._updateScale(this._iScale,et+" ft",et/B))},_updateScale:function(y,B,fe){y.style.width=Math.round(this.options.maxWidth*fe)+"px",y.innerHTML=B},_getRoundNum:function(y){var B=Math.pow(10,(Math.floor(y)+"").length-1),fe=y/B;return fe=fe>=10?10:fe>=5?5:fe>=3?3:fe>=2?2:1,B*fe}}),Fu=function(y){return new As(y)},Ou='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Vl=Ya.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?Ou+" ":"")+"Leaflet</a>"},initialize:function(y){b(this,y),this._attributions={}},onAdd:function(y){y.attributionControl=this,this._container=Ct("div","leaflet-control-attribution"),to(this._container);for(var B in y._layers)y._layers[B].getAttribution&&this.addAttribution(y._layers[B].getAttribution());return this._update(),y.on("layeradd",this._addAttribution,this),this._container},onRemove:function(y){y.off("layeradd",this._addAttribution,this)},_addAttribution:function(y){y.layer.getAttribution&&(this.addAttribution(y.layer.getAttribution()),y.layer.once("remove",function(){this.removeAttribution(y.layer.getAttribution())},this))},setPrefix:function(y){return this.options.prefix=y,this._update(),this},addAttribution:function(y){return y?(this._attributions[y]||(this._attributions[y]=0),this._attributions[y]++,this._update(),this):this},removeAttribution:function(y){return y?(this._attributions[y]&&(this._attributions[y]--,this._update()),this):this},_update:function(){if(!!this._map){var y=[];for(var B in this._attributions)this._attributions[B]&&y.push(B);var fe=[];this.options.prefix&&fe.push(this.options.prefix),y.length&&fe.push(y.join(", ")),this._container.innerHTML=fe.join(' <span aria-hidden="true">|</span> ')}}});di.mergeOptions({attributionControl:!0}),di.addInitHook(function(){this.options.attributionControl&&new Vl().addTo(this)});var Zc=function(y){return new Vl(y)};Ya.Layers=Ba,Ya.Zoom=fs,Ya.Scale=As,Ya.Attribution=Vl,_a.layers=cs,_a.zoom=$o,_a.scale=Fu,_a.attribution=Zc;var co=j.extend({initialize:function(y){this._map=y},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});co.addTo=function(y,B){return y.addHandler(B,this),this};var zu={Events:Y},xl=Ue.touch?"touchstart mousedown":"mousedown",Ho=J.extend({options:{clickTolerance:3},initialize:function(y,B,fe,Pe){b(this,Pe),this._element=y,this._dragStartTarget=B||y,this._preventOutline=fe},enable:function(){this._enabled||(Bn(this._dragStartTarget,xl,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Ho._dragging===this&&this.finishDrag(!0),vi(this._dragStartTarget,xl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(y){if(!!this._enabled&&(this._moved=!1,!Tr(this._element,"leaflet-zoom-anim"))){if(y.touches&&y.touches.length!==1){Ho._dragging===this&&this.finishDrag();return}if(!(Ho._dragging||y.shiftKey||y.which!==1&&y.button!==1&&!y.touches)&&(Ho._dragging=this,this._preventOutline&&Dn(this._element),wn(),qr(),!this._moving)){this.fire("down");var B=y.touches?y.touches[0]:y,fe=hi(this._element);this._startPoint=new ne(B.clientX,B.clientY),this._startPos=Gr(this._element),this._parentScale=mi(fe);var Pe=y.type==="mousedown";Bn(document,Pe?"mousemove":"touchmove",this._onMove,this),Bn(document,Pe?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(y){if(!!this._enabled){if(y.touches&&y.touches.length>1){this._moved=!0;return}var B=y.touches&&y.touches.length===1?y.touches[0]:y,fe=new ne(B.clientX,B.clientY)._subtract(this._startPoint);!fe.x&&!fe.y||Math.abs(fe.x)+Math.abs(fe.y)<this.options.clickTolerance||(fe.x/=this._parentScale.x,fe.y/=this._parentScale.y,Wi(y),this._moved||(this.fire("dragstart"),this._moved=!0,gr(document.body,"leaflet-dragging"),this._lastTarget=y.target||y.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),gr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(fe),this._moving=!0,this._lastEvent=y,this._updatePosition())}},_updatePosition:function(){var y={originalEvent:this._lastEvent};this.fire("predrag",y),_r(this._element,this._newPos),this.fire("drag",y)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(y){$t(document.body,"leaflet-dragging"),this._lastTarget&&($t(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vi(document,"mousemove touchmove",this._onMove,this),vi(document,"mouseup touchend touchcancel",this._onUp,this),hn(),tn(),this._moved&&this._moving&&this.fire("dragend",{noInertia:y,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ho._dragging=!1}});function Bs(y,B){if(!B||!y.length)return y.slice();var fe=B*B;return y=Bu(y,fe),y=il(y,fe),y}function Gl(y,B,fe){return Math.sqrt($i(y,B,fe,!0))}function Zl(y,B,fe){return $i(y,B,fe)}function il(y,B){var fe=y.length,Pe=typeof Uint8Array!=void 0+""?Uint8Array:Array,et=new Pe(fe);et[0]=et[fe-1]=1,Ss(y,et,B,0,fe-1);var St,sr=[];for(St=0;St<fe;St++)et[St]&&sr.push(y[St]);return sr}function Ss(y,B,fe,Pe,et){var St=0,sr,hr,Ar;for(hr=Pe+1;hr<=et-1;hr++)Ar=$i(y[hr],y[Pe],y[et],!0),Ar>St&&(sr=hr,St=Ar);St>fe&&(B[sr]=1,Ss(y,B,fe,Pe,sr),Ss(y,B,fe,sr,et))}function Bu(y,B){for(var fe=[y[0]],Pe=1,et=0,St=y.length;Pe<St;Pe++)Ji(y[Pe],y[et])>B&&(fe.push(y[Pe]),et=Pe);return et<St-1&&fe.push(y[St-1]),fe}var wl;function la(y,B,fe,Pe,et){var St=Pe?wl:gi(y,fe),sr=gi(B,fe),hr,Ar,dn;for(wl=sr;;){if(!(St|sr))return[y,B];if(St&sr)return!1;hr=St||sr,Ar=uu(y,B,hr,fe,et),dn=gi(Ar,fe),hr===St?(y=Ar,St=dn):(B=Ar,sr=dn)}}function uu(y,B,fe,Pe,et){var St=B.x-y.x,sr=B.y-y.y,hr=Pe.min,Ar=Pe.max,dn,Zn;return fe&8?(dn=y.x+St*(Ar.y-y.y)/sr,Zn=Ar.y):fe&4?(dn=y.x+St*(hr.y-y.y)/sr,Zn=hr.y):fe&2?(dn=Ar.x,Zn=y.y+sr*(Ar.x-y.x)/St):fe&1&&(dn=hr.x,Zn=y.y+sr*(hr.x-y.x)/St),new ne(dn,Zn,et)}function gi(y,B){var fe=0;return y.x<B.min.x?fe|=1:y.x>B.max.x&&(fe|=2),y.y<B.min.y?fe|=4:y.y>B.max.y&&(fe|=8),fe}function Ji(y,B){var fe=B.x-y.x,Pe=B.y-y.y;return fe*fe+Pe*Pe}function $i(y,B,fe,Pe){var et=B.x,St=B.y,sr=fe.x-et,hr=fe.y-St,Ar=sr*sr+hr*hr,dn;return Ar>0&&(dn=((y.x-et)*sr+(y.y-St)*hr)/Ar,dn>1?(et=fe.x,St=fe.y):dn>0&&(et+=sr*dn,St+=hr*dn)),sr=y.x-et,hr=y.y-St,Pe?sr*sr+hr*hr:new ne(et,St)}function Si(y){return!P(y[0])||typeof y[0][0]!="object"&&typeof y[0][0]<"u"}function Wl(y){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Si(y)}function Ns(y,B){var fe,Pe,et,St,sr,hr,Ar,dn;if(!y||y.length===0)throw new Error("latlngs not passed");Si(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var Zn=[];for(var ii in y)Zn.push(B.project(xe(y[ii])));var Qn=Zn.length;for(fe=0,Pe=0;fe<Qn-1;fe++)Pe+=Zn[fe].distanceTo(Zn[fe+1])/2;if(Pe===0)dn=Zn[0];else for(fe=0,St=0;fe<Qn-1;fe++)if(sr=Zn[fe],hr=Zn[fe+1],et=sr.distanceTo(hr),St+=et,St>Pe){Ar=(St-Pe)/et,dn=[hr.x-Ar*(hr.x-sr.x),hr.y-Ar*(hr.y-sr.y)];break}return B.unproject(we(dn))}var Wc={__proto__:null,simplify:Bs,pointToSegmentDistance:Gl,closestPointOnSegment:Zl,clipSegment:la,_getEdgeIntersection:uu,_getBitCode:gi,_sqClosestPointOnSegment:$i,isFlat:Si,_flat:Wl,polylineCenter:Ns};function Es(y,B,fe){var Pe,et=[1,4,2,8],St,sr,hr,Ar,dn,Zn,ii,Qn;for(St=0,Zn=y.length;St<Zn;St++)y[St]._code=gi(y[St],B);for(hr=0;hr<4;hr++){for(ii=et[hr],Pe=[],St=0,Zn=y.length,sr=Zn-1;St<Zn;sr=St++)Ar=y[St],dn=y[sr],Ar._code&ii?dn._code&ii||(Qn=uu(dn,Ar,ii,B,fe),Qn._code=gi(Qn,B),Pe.push(Qn)):(dn._code&ii&&(Qn=uu(dn,Ar,ii,B,fe),Qn._code=gi(Qn,B),Pe.push(Qn)),Pe.push(Ar));y=Pe}return y}function Nu(y,B){var fe,Pe,et,St,sr,hr,Ar,dn,Zn;if(!y||y.length===0)throw new Error("latlngs not passed");Si(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var ii=[];for(var Qn in y)ii.push(B.project(xe(y[Qn])));var Pa=ii.length;for(hr=Ar=dn=0,fe=0,Pe=Pa-1;fe<Pa;Pe=fe++)et=ii[fe],St=ii[Pe],sr=et.y*St.x-St.y*et.x,Ar+=(et.x+St.x)*sr,dn+=(et.y+St.y)*sr,hr+=sr*3;return hr===0?Zn=ii[0]:Zn=[Ar/hr,dn/hr],B.unproject(we(Zn))}var oc={__proto__:null,clipPolygon:Es,polygonCenter:Nu},al={project:function(y){return new ne(y.lng,y.lat)},unproject:function(y){return new me(y.y,y.x)},bounds:new ee([-180,-90],[180,90])},Vo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(y){var B=Math.PI/180,fe=this.R,Pe=y.lat*B,et=this.R_MINOR/fe,St=Math.sqrt(1-et*et),sr=St*Math.sin(Pe),hr=Math.tan(Math.PI/4-Pe/2)/Math.pow((1-sr)/(1+sr),St/2);return Pe=-fe*Math.log(Math.max(hr,1e-10)),new ne(y.lng*B*fe,Pe)},unproject:function(y){for(var B=180/Math.PI,fe=this.R,Pe=this.R_MINOR/fe,et=Math.sqrt(1-Pe*Pe),St=Math.exp(-y.y/fe),sr=Math.PI/2-2*Math.atan(St),hr=0,Ar=.1,dn;hr<15&&Math.abs(Ar)>1e-7;hr++)dn=et*Math.sin(sr),dn=Math.pow((1-dn)/(1+dn),et/2),Ar=Math.PI/2-2*Math.atan(St*dn)-sr,sr+=Ar;return new me(sr*B,y.x*B/fe)}},ol={__proto__:null,LonLat:al,Mercator:Vo,SphericalMercator:ke},jl=o({},Re,{code:"EPSG:3395",projection:Vo,transformation:function(){var y=.5/(Math.PI*Vo.R);return le(y,.5,-y,.5)}()}),Uu=o({},Re,{code:"EPSG:4326",projection:al,transformation:le(1/180,1,-1/180,.5)}),jc=o({},He,{projection:al,transformation:le(1,0,-1,0),scale:function(y){return Math.pow(2,y)},zoom:function(y){return Math.log(y)/Math.LN2},distance:function(y,B){var fe=B.lng-y.lng,Pe=B.lat-y.lat;return Math.sqrt(fe*fe+Pe*Pe)},infinite:!0});He.Earth=Re,He.EPSG3395=jl,He.EPSG3857=K,He.EPSG900913=te,He.EPSG4326=Uu,He.Simple=jc;var Lo=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(y){return y.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(y){return y&&y.removeLayer(this),this},getPane:function(y){return this._map.getPane(y?this.options[y]||y:this.options.pane)},addInteractiveTarget:function(y){return this._map._targets[l(y)]=this,this},removeInteractiveTarget:function(y){return delete this._map._targets[l(y)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(y){var B=y.target;if(!!B.hasLayer(this)){if(this._map=B,this._zoomAnimated=B._zoomAnimated,this.getEvents){var fe=this.getEvents();B.on(fe,this),this.once("remove",function(){B.off(fe,this)},this)}this.onAdd(B),this.fire("add"),B.fire("layeradd",{layer:this})}}});di.include({addLayer:function(y){if(!y._layerAdd)throw new Error("The provided object is not a Layer.");var B=l(y);return this._layers[B]?this:(this._layers[B]=y,y._mapToAdd=this,y.beforeAdd&&y.beforeAdd(this),this.whenReady(y._layerAdd,y),this)},removeLayer:function(y){var B=l(y);return this._layers[B]?(this._loaded&&y.onRemove(this),delete this._layers[B],this._loaded&&(this.fire("layerremove",{layer:y}),y.fire("remove")),y._map=y._mapToAdd=null,this):this},hasLayer:function(y){return l(y)in this._layers},eachLayer:function(y,B){for(var fe in this._layers)y.call(B,this._layers[fe]);return this},_addLayers:function(y){y=y?P(y)?y:[y]:[];for(var B=0,fe=y.length;B<fe;B++)this.addLayer(y[B])},_addZoomLimit:function(y){(!isNaN(y.options.maxZoom)||!isNaN(y.options.minZoom))&&(this._zoomBoundLayers[l(y)]=y,this._updateZoomLevels())},_removeZoomLimit:function(y){var B=l(y);this._zoomBoundLayers[B]&&(delete this._zoomBoundLayers[B],this._updateZoomLevels())},_updateZoomLevels:function(){var y=1/0,B=-1/0,fe=this._getZoomSpan();for(var Pe in this._zoomBoundLayers){var et=this._zoomBoundLayers[Pe].options;y=et.minZoom===void 0?y:Math.min(y,et.minZoom),B=et.maxZoom===void 0?B:Math.max(B,et.maxZoom)}this._layersMaxZoom=B===-1/0?void 0:B,this._layersMinZoom=y===1/0?void 0:y,fe!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Cs=Lo.extend({initialize:function(y,B){b(this,B),this._layers={};var fe,Pe;if(y)for(fe=0,Pe=y.length;fe<Pe;fe++)this.addLayer(y[fe])},addLayer:function(y){var B=this.getLayerId(y);return this._layers[B]=y,this._map&&this._map.addLayer(y),this},removeLayer:function(y){var B=y in this._layers?y:this.getLayerId(y);return this._map&&this._layers[B]&&this._map.removeLayer(this._layers[B]),delete this._layers[B],this},hasLayer:function(y){var B=typeof y=="number"?y:this.getLayerId(y);return B in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(y){var B=Array.prototype.slice.call(arguments,1),fe,Pe;for(fe in this._layers)Pe=this._layers[fe],Pe[y]&&Pe[y].apply(Pe,B);return this},onAdd:function(y){this.eachLayer(y.addLayer,y)},onRemove:function(y){this.eachLayer(y.removeLayer,y)},eachLayer:function(y,B){for(var fe in this._layers)y.call(B,this._layers[fe]);return this},getLayer:function(y){return this._layers[y]},getLayers:function(){var y=[];return this.eachLayer(y.push,y),y},setZIndex:function(y){return this.invoke("setZIndex",y)},getLayerId:function(y){return l(y)}}),Qo=function(y,B){return new Cs(y,B)},sl=Cs.extend({addLayer:function(y){return this.hasLayer(y)?this:(y.addEventParent(this),Cs.prototype.addLayer.call(this,y),this.fire("layeradd",{layer:y}))},removeLayer:function(y){return this.hasLayer(y)?(y in this._layers&&(y=this._layers[y]),y.removeEventParent(this),Cs.prototype.removeLayer.call(this,y),this.fire("layerremove",{layer:y})):this},setStyle:function(y){return this.invoke("setStyle",y)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var y=new re;for(var B in this._layers){var fe=this._layers[B];y.extend(fe.getBounds?fe.getBounds():fe.getLatLng())}return y}}),sc=function(y,B){return new sl(y,B)},Tl=j.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(y){b(this,y)},createIcon:function(y){return this._createIcon("icon",y)},createShadow:function(y){return this._createIcon("shadow",y)},_createIcon:function(y,B){var fe=this._getIconUrl(y);if(!fe){if(y==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var Pe=this._createImg(fe,B&&B.tagName==="IMG"?B:null);return this._setIconStyles(Pe,y),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Pe.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),Pe},_setIconStyles:function(y,B){var fe=this.options,Pe=fe[B+"Size"];typeof Pe=="number"&&(Pe=[Pe,Pe]);var et=we(Pe),St=we(B==="shadow"&&fe.shadowAnchor||fe.iconAnchor||et&&et.divideBy(2,!0));y.className="leaflet-marker-"+B+" "+(fe.className||""),St&&(y.style.marginLeft=-St.x+"px",y.style.marginTop=-St.y+"px"),et&&(y.style.width=et.x+"px",y.style.height=et.y+"px")},_createImg:function(y,B){return B=B||document.createElement("img"),B.src=y,B},_getIconUrl:function(y){return Ue.retina&&this.options[y+"RetinaUrl"]||this.options[y+"Url"]}});function Al(y){return new Tl(y)}var Us=Tl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(y){return typeof Us.imagePath!="string"&&(Us.imagePath=this._detectIconPath()),(this.options.imagePath||Us.imagePath)+Tl.prototype._getIconUrl.call(this,y)},_stripUrl:function(y){var B=function(fe,Pe,et){var St=Pe.exec(fe);return St&&St[et]};return y=B(y,/^url\((['"])?(.+)\1\)$/,2),y&&B(y,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var y=Ct("div","leaflet-default-icon-path",document.body),B=xt(y,"background-image")||xt(y,"backgroundImage");if(document.body.removeChild(y),B=this._stripUrl(B),B)return B;var fe=document.querySelector('link[href$="leaflet.css"]');return fe?fe.href.substring(0,fe.href.length-11-1):""}}),Sl=co.extend({initialize:function(y){this._marker=y},addHooks:function(){var y=this._marker._icon;this._draggable||(this._draggable=new Ho(y,y,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),gr(y,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$t(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(y){var B=this._marker,fe=B._map,Pe=this._marker.options.autoPanSpeed,et=this._marker.options.autoPanPadding,St=Gr(B._icon),sr=fe.getPixelBounds(),hr=fe.getPixelOrigin(),Ar=X(sr.min._subtract(hr).add(et),sr.max._subtract(hr).subtract(et));if(!Ar.contains(St)){var dn=we((Math.max(Ar.max.x,St.x)-Ar.max.x)/(sr.max.x-Ar.max.x)-(Math.min(Ar.min.x,St.x)-Ar.min.x)/(sr.min.x-Ar.min.x),(Math.max(Ar.max.y,St.y)-Ar.max.y)/(sr.max.y-Ar.max.y)-(Math.min(Ar.min.y,St.y)-Ar.min.y)/(sr.min.y-Ar.min.y)).multiplyBy(Pe);fe.panBy(dn,{animate:!1}),this._draggable._newPos._add(dn),this._draggable._startPos._add(dn),_r(B._icon,this._draggable._newPos),this._onDrag(y),this._panRequest=U(this._adjustPan.bind(this,y))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(y){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,y)))},_onDrag:function(y){var B=this._marker,fe=B._shadow,Pe=Gr(B._icon),et=B._map.layerPointToLatLng(Pe);fe&&_r(fe,Pe),B._latlng=et,y.latlng=et,y.oldLatLng=this._oldLatLng,B.fire("move",y).fire("drag",y)},_onDragEnd:function(y){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",y)}}),Hu=Lo.extend({options:{icon:new Us,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(y,B){b(this,B),this._latlng=xe(y)},onAdd:function(y){this._zoomAnimated=this._zoomAnimated&&y.options.markerZoomAnimation,this._zoomAnimated&&y.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(y){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&y.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(y){var B=this._latlng;return this._latlng=xe(y),this.update(),this.fire("move",{oldLatLng:B,latlng:this._latlng})},setZIndexOffset:function(y){return this.options.zIndexOffset=y,this.update()},getIcon:function(){return this.options.icon},setIcon:function(y){return this.options.icon=y,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var y=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(y)}return this},_initIcon:function(){var y=this.options,B="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),fe=y.icon.createIcon(this._icon),Pe=!1;fe!==this._icon&&(this._icon&&this._removeIcon(),Pe=!0,y.title&&(fe.title=y.title),fe.tagName==="IMG"&&(fe.alt=y.alt||"")),gr(fe,B),y.keyboard&&(fe.tabIndex="0",fe.setAttribute("role","button")),this._icon=fe,y.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bn(fe,"focus",this._panOnFocus,this);var et=y.icon.createShadow(this._shadow),St=!1;et!==this._shadow&&(this._removeShadow(),St=!0),et&&(gr(et,B),et.alt=""),this._shadow=et,y.opacity<1&&this._updateOpacity(),Pe&&this.getPane().appendChild(this._icon),this._initInteraction(),et&&St&&this.getPane(y.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vi(this._icon,"focus",this._panOnFocus,this),Rt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rt(this._shadow),this._shadow=null},_setPos:function(y){this._icon&&_r(this._icon,y),this._shadow&&_r(this._shadow,y),this._zIndex=y.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(y){this._icon&&(this._icon.style.zIndex=this._zIndex+y)},_animateZoom:function(y){var B=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center).round();this._setPos(B)},_initInteraction:function(){if(!!this.options.interactive&&(gr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Sl)){var y=this.options.draggable;this.dragging&&(y=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Sl(this),y&&this.dragging.enable()}},setOpacity:function(y){return this.options.opacity=y,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var y=this.options.opacity;this._icon&&wr(this._icon,y),this._shadow&&wr(this._shadow,y)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var y=this._map;if(!!y){var B=this.options.icon.options,fe=B.iconSize?we(B.iconSize):we(0,0),Pe=B.iconAnchor?we(B.iconAnchor):we(0,0);y.panInside(this._latlng,{paddingTopLeft:Pe,paddingBottomRight:fe.subtract(Pe)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Vu(y,B){return new Hu(y,B)}var Hs=Lo.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(y){this._renderer=y.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(y){return b(this,y),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&y&&Object.prototype.hasOwnProperty.call(y,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),cu=Hs.extend({options:{fill:!0,radius:10},initialize:function(y,B){b(this,B),this._latlng=xe(y),this._radius=this.options.radius},setLatLng:function(y){var B=this._latlng;return this._latlng=xe(y),this.redraw(),this.fire("move",{oldLatLng:B,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(y){return this.options.radius=this._radius=y,this.redraw()},getRadius:function(){return this._radius},setStyle:function(y){var B=y&&y.radius||this._radius;return Hs.prototype.setStyle.call(this,y),this.setRadius(B),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var y=this._radius,B=this._radiusY||y,fe=this._clickTolerance(),Pe=[y+fe,B+fe];this._pxBounds=new ee(this._point.subtract(Pe),this._point.add(Pe))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(y){return y.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fu(y,B){return new cu(y,B)}var hu=cu.extend({initialize:function(y,B,fe){if(typeof B=="number"&&(B=o({},fe,{radius:B})),b(this,B),this._latlng=xe(y),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(y){return this._mRadius=y,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var y=[this._radius,this._radiusY||this._radius];return new re(this._map.layerPointToLatLng(this._point.subtract(y)),this._map.layerPointToLatLng(this._point.add(y)))},setStyle:Hs.prototype.setStyle,_project:function(){var y=this._latlng.lng,B=this._latlng.lat,fe=this._map,Pe=fe.options.crs;if(Pe.distance===Re.distance){var et=Math.PI/180,St=this._mRadius/Re.R/et,sr=fe.project([B+St,y]),hr=fe.project([B-St,y]),Ar=sr.add(hr).divideBy(2),dn=fe.unproject(Ar).lat,Zn=Math.acos((Math.cos(St*et)-Math.sin(B*et)*Math.sin(dn*et))/(Math.cos(B*et)*Math.cos(dn*et)))/et;(isNaN(Zn)||Zn===0)&&(Zn=St/Math.cos(Math.PI/180*B)),this._point=Ar.subtract(fe.getPixelOrigin()),this._radius=isNaN(Zn)?0:Ar.x-fe.project([dn,y-Zn]).x,this._radiusY=Ar.y-sr.y}else{var ii=Pe.unproject(Pe.project(this._latlng).subtract([this._mRadius,0]));this._point=fe.latLngToLayerPoint(this._latlng),this._radius=this._point.x-fe.latLngToLayerPoint(ii).x}this._updateBounds()}});function Gu(y,B,fe){return new hu(y,B,fe)}var Po=Hs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(y,B){b(this,B),this._setLatLngs(y)},getLatLngs:function(){return this._latlngs},setLatLngs:function(y){return this._setLatLngs(y),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(y){for(var B=1/0,fe=null,Pe=$i,et,St,sr=0,hr=this._parts.length;sr<hr;sr++)for(var Ar=this._parts[sr],dn=1,Zn=Ar.length;dn<Zn;dn++){et=Ar[dn-1],St=Ar[dn];var ii=Pe(y,et,St,!0);ii<B&&(B=ii,fe=Pe(y,et,St))}return fe&&(fe.distance=Math.sqrt(B)),fe},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ns(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(y,B){return B=B||this._defaultShape(),y=xe(y),B.push(y),this._bounds.extend(y),this.redraw()},_setLatLngs:function(y){this._bounds=new re,this._latlngs=this._convertLatLngs(y)},_defaultShape:function(){return Si(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(y){for(var B=[],fe=Si(y),Pe=0,et=y.length;Pe<et;Pe++)fe?(B[Pe]=xe(y[Pe]),this._bounds.extend(B[Pe])):B[Pe]=this._convertLatLngs(y[Pe]);return B},_project:function(){var y=new ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,y),this._bounds.isValid()&&y.isValid()&&(this._rawPxBounds=y,this._updateBounds())},_updateBounds:function(){var y=this._clickTolerance(),B=new ne(y,y);!this._rawPxBounds||(this._pxBounds=new ee([this._rawPxBounds.min.subtract(B),this._rawPxBounds.max.add(B)]))},_projectLatlngs:function(y,B,fe){var Pe=y[0]instanceof me,et=y.length,St,sr;if(Pe){for(sr=[],St=0;St<et;St++)sr[St]=this._map.latLngToLayerPoint(y[St]),fe.extend(sr[St]);B.push(sr)}else for(St=0;St<et;St++)this._projectLatlngs(y[St],B,fe)},_clipPoints:function(){var y=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}var B=this._parts,fe,Pe,et,St,sr,hr,Ar;for(fe=0,et=0,St=this._rings.length;fe<St;fe++)for(Ar=this._rings[fe],Pe=0,sr=Ar.length;Pe<sr-1;Pe++)hr=la(Ar[Pe],Ar[Pe+1],y,Pe,!0),hr&&(B[et]=B[et]||[],B[et].push(hr[0]),(hr[1]!==Ar[Pe+1]||Pe===sr-2)&&(B[et].push(hr[1]),et++))}},_simplifyPoints:function(){for(var y=this._parts,B=this.options.smoothFactor,fe=0,Pe=y.length;fe<Pe;fe++)y[fe]=Bs(y[fe],B)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(y,B){var fe,Pe,et,St,sr,hr,Ar=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(fe=0,St=this._parts.length;fe<St;fe++)for(hr=this._parts[fe],Pe=0,sr=hr.length,et=sr-1;Pe<sr;et=Pe++)if(!(!B&&Pe===0)&&Gl(y,hr[et],hr[Pe])<=Ar)return!0;return!1}});function El(y,B){return new Po(y,B)}Po._flat=Wl;var hs=Po.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(y){var B=Po.prototype._convertLatLngs.call(this,y),fe=B.length;return fe>=2&&B[0]instanceof me&&B[0].equals(B[fe-1])&&B.pop(),B},_setLatLngs:function(y){Po.prototype._setLatLngs.call(this,y),Si(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Si(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var y=this._renderer._bounds,B=this.options.weight,fe=new ne(B,B);if(y=new ee(y.min.subtract(fe),y.max.add(fe)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}for(var Pe=0,et=this._rings.length,St;Pe<et;Pe++)St=Es(this._rings[Pe],y,!0),St.length&&this._parts.push(St)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(y){var B=!1,fe,Pe,et,St,sr,hr,Ar,dn;if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(St=0,Ar=this._parts.length;St<Ar;St++)for(fe=this._parts[St],sr=0,dn=fe.length,hr=dn-1;sr<dn;hr=sr++)Pe=fe[sr],et=fe[hr],Pe.y>y.y!=et.y>y.y&&y.x<(et.x-Pe.x)*(y.y-Pe.y)/(et.y-Pe.y)+Pe.x&&(B=!B);return B||Po.prototype._containsPoint.call(this,y,!0)}});function lc(y,B){return new hs(y,B)}var Go=sl.extend({initialize:function(y,B){b(this,B),this._layers={},y&&this.addData(y)},addData:function(y){var B=P(y)?y:y.features,fe,Pe,et;if(B){for(fe=0,Pe=B.length;fe<Pe;fe++)et=B[fe],(et.geometries||et.geometry||et.features||et.coordinates)&&this.addData(et);return this}var St=this.options;if(St.filter&&!St.filter(y))return this;var sr=du(y,St);return sr?(sr.feature=fo(y),sr.defaultOptions=sr.options,this.resetStyle(sr),St.onEachFeature&&St.onEachFeature(y,sr),this.addLayer(sr)):this},resetStyle:function(y){return y===void 0?this.eachLayer(this.resetStyle,this):(y.options=o({},y.defaultOptions),this._setLayerStyle(y,this.options.style),this)},setStyle:function(y){return this.eachLayer(function(B){this._setLayerStyle(B,y)},this)},_setLayerStyle:function(y,B){y.setStyle&&(typeof B=="function"&&(B=B(y.feature)),y.setStyle(B))}});function du(y,B){var fe=y.type==="Feature"?y.geometry:y,Pe=fe?fe.coordinates:null,et=[],St=B&&B.pointToLayer,sr=B&&B.coordsToLatLng||Zu,hr,Ar,dn,Zn;if(!Pe&&!fe)return null;switch(fe.type){case"Point":return hr=sr(Pe),ll(St,y,hr,B);case"MultiPoint":for(dn=0,Zn=Pe.length;dn<Zn;dn++)hr=sr(Pe[dn]),et.push(ll(St,y,hr,B));return new sl(et);case"LineString":case"MultiLineString":return Ar=Vs(Pe,fe.type==="LineString"?0:1,sr),new Po(Ar,B);case"Polygon":case"MultiPolygon":return Ar=Vs(Pe,fe.type==="Polygon"?1:2,sr),new hs(Ar,B);case"GeometryCollection":for(dn=0,Zn=fe.geometries.length;dn<Zn;dn++){var ii=du({geometry:fe.geometries[dn],type:"Feature",properties:y.properties},B);ii&&et.push(ii)}return new sl(et);case"FeatureCollection":for(dn=0,Zn=fe.features.length;dn<Zn;dn++){var Qn=du(fe.features[dn],B);Qn&&et.push(Qn)}return new sl(et);default:throw new Error("Invalid GeoJSON object.")}}function ll(y,B,fe,Pe){return y?y(B,fe):new Hu(fe,Pe&&Pe.markersInheritOptions&&Pe)}function Zu(y){return new me(y[1],y[0],y[2])}function Vs(y,B,fe){for(var Pe=[],et=0,St=y.length,sr;et<St;et++)sr=B?Vs(y[et],B-1,fe):(fe||Zu)(y[et]),Pe.push(sr);return Pe}function Wu(y,B){return y=xe(y),y.alt!==void 0?[d(y.lng,B),d(y.lat,B),d(y.alt,B)]:[d(y.lng,B),d(y.lat,B)]}function ul(y,B,fe,Pe){for(var et=[],St=0,sr=y.length;St<sr;St++)et.push(B?ul(y[St],Si(y[St])?0:B-1,fe,Pe):Wu(y[St],Pe));return!B&&fe&&et.push(et[0]),et}function ds(y,B){return y.feature?o({},y.feature,{geometry:B}):fo(B)}function fo(y){return y.type==="Feature"||y.type==="FeatureCollection"?y:{type:"Feature",properties:{},geometry:y}}var Cl={toGeoJSON:function(y){return ds(this,{type:"Point",coordinates:Wu(this.getLatLng(),y)})}};Hu.include(Cl),hu.include(Cl),cu.include(Cl),Po.include({toGeoJSON:function(y){var B=!Si(this._latlngs),fe=ul(this._latlngs,B?1:0,!1,y);return ds(this,{type:(B?"Multi":"")+"LineString",coordinates:fe})}}),hs.include({toGeoJSON:function(y){var B=!Si(this._latlngs),fe=B&&!Si(this._latlngs[0]),Pe=ul(this._latlngs,fe?2:B?1:0,!0,y);return B||(Pe=[Pe]),ds(this,{type:(fe?"Multi":"")+"Polygon",coordinates:Pe})}}),Cs.include({toMultiPoint:function(y){var B=[];return this.eachLayer(function(fe){B.push(fe.toGeoJSON(y).geometry.coordinates)}),ds(this,{type:"MultiPoint",coordinates:B})},toGeoJSON:function(y){var B=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(B==="MultiPoint")return this.toMultiPoint(y);var fe=B==="GeometryCollection",Pe=[];return this.eachLayer(function(et){if(et.toGeoJSON){var St=et.toGeoJSON(y);if(fe)Pe.push(St.geometry);else{var sr=fo(St);sr.type==="FeatureCollection"?Pe.push.apply(Pe,sr.features):Pe.push(sr)}}}),fe?ds(this,{geometries:Pe,type:"GeometryCollection"}):{type:"FeatureCollection",features:Pe}}});function Ro(y,B){return new Go(y,B)}var Yc=Ro,ps=Lo.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(y,B,fe){this._url=y,this._bounds=de(B),b(this,fe)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(gr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(y){return this.options.opacity=y,this._image&&this._updateOpacity(),this},setStyle:function(y){return y.opacity&&this.setOpacity(y.opacity),this},bringToFront:function(){return this._map&&Pt(this._image),this},bringToBack:function(){return this._map&&nr(this._image),this},setUrl:function(y){return this._url=y,this._image&&(this._image.src=y),this},setBounds:function(y){return this._bounds=de(y),this._map&&this._reset(),this},getEvents:function(){var y={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var y=this._url.tagName==="IMG",B=this._image=y?this._url:Ct("img");if(gr(B,"leaflet-image-layer"),this._zoomAnimated&&gr(B,"leaflet-zoom-animated"),this.options.className&&gr(B,this.options.className),B.onselectstart=v,B.onmousemove=v,B.onload=s(this.fire,this,"load"),B.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(B.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),y){this._url=B.src;return}B.src=this._url,B.alt=this.options.alt},_animateZoom:function(y){var B=this._map.getZoomScale(y.zoom),fe=this._map._latLngBoundsToNewLayerBounds(this._bounds,y.zoom,y.center).min;Vr(this._image,fe,B)},_reset:function(){var y=this._image,B=new ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),fe=B.getSize();_r(y,B.min),y.style.width=fe.x+"px",y.style.height=fe.y+"px"},_updateOpacity:function(){wr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var y=this.options.errorOverlayUrl;y&&this._url!==y&&(this._url=y,this._image.src=y)},getCenter:function(){return this._bounds.getCenter()}}),Xc=function(y,B,fe){return new ps(y,B,fe)},Ds=ps.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var y=this._url.tagName==="VIDEO",B=this._image=y?this._url:Ct("video");if(gr(B,"leaflet-image-layer"),this._zoomAnimated&&gr(B,"leaflet-zoom-animated"),this.options.className&&gr(B,this.options.className),B.onselectstart=v,B.onmousemove=v,B.onloadeddata=s(this.fire,this,"load"),y){for(var fe=B.getElementsByTagName("source"),Pe=[],et=0;et<fe.length;et++)Pe.push(fe[et].src);this._url=fe.length>0?Pe:[B.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(B.style,"objectFit")&&(B.style.objectFit="fill"),B.autoplay=!!this.options.autoplay,B.loop=!!this.options.loop,B.muted=!!this.options.muted,B.playsInline=!!this.options.playsInline;for(var St=0;St<this._url.length;St++){var sr=Ct("source");sr.src=this._url[St],B.appendChild(sr)}}});function pu(y,B,fe){return new Ds(y,B,fe)}var ju=ps.extend({_initImage:function(){var y=this._image=this._url;gr(y,"leaflet-image-layer"),this._zoomAnimated&&gr(y,"leaflet-zoom-animated"),this.options.className&&gr(y,this.options.className),y.onselectstart=v,y.onmousemove=v}});function Kc(y,B,fe){return new ju(y,B,fe)}var Ms=Lo.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(y,B){y&&(y instanceof L.LatLng||P(y))?(this._latlng=xe(y),b(this,B)):(b(this,y),this._source=B),this.options.content&&(this._content=this.options.content)},openOn:function(y){return y=arguments.length?y:this._source._map,y.hasLayer(this)||y.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(y){return this._map?this.close():(arguments.length?this._source=y:y=this._source,this._prepareOpen(),this.openOn(y._map)),this},onAdd:function(y){this._zoomAnimated=y._zoomAnimated,this._container||this._initLayout(),y._fadeAnimated&&wr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),y._fadeAnimated&&wr(this._container,1),this.bringToFront(),this.options.interactive&&(gr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(y){y._fadeAnimated?(wr(this._container,0),this._removeTimeout=setTimeout(s(Rt,void 0,this._container),200)):Rt(this._container),this.options.interactive&&($t(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(y){return this._latlng=xe(y),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(y){return this._content=y,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var y={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pt(this._container),this},bringToBack:function(){return this._map&&nr(this._container),this},_prepareOpen:function(y){var B=this._source;if(!B._map)return!1;if(B instanceof sl){B=null;var fe=this._source._layers;for(var Pe in fe)if(fe[Pe]._map){B=fe[Pe];break}if(!B)return!1;this._source=B}if(!y)if(B.getCenter)y=B.getCenter();else if(B.getLatLng)y=B.getLatLng();else if(B.getBounds)y=B.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(y),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var y=this._contentNode,B=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof B=="string")y.innerHTML=B;else{for(;y.hasChildNodes();)y.removeChild(y.firstChild);y.appendChild(B)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var y=this._map.latLngToLayerPoint(this._latlng),B=we(this.options.offset),fe=this._getAnchor();this._zoomAnimated?_r(this._container,y.add(fe)):B=B.add(y).add(fe);var Pe=this._containerBottom=-B.y,et=this._containerLeft=-Math.round(this._containerWidth/2)+B.x;this._container.style.bottom=Pe+"px",this._container.style.left=et+"px"}},_getAnchor:function(){return[0,0]}});di.include({_initOverlay:function(y,B,fe,Pe){var et=B;return et instanceof y||(et=new y(Pe).setContent(B)),fe&&et.setLatLng(fe),et}}),Lo.include({_initOverlay:function(y,B,fe,Pe){var et=fe;return et instanceof y?(b(et,Pe),et._source=this):(et=B&&!Pe?B:new y(Pe,this),et.setContent(fe)),et}});var Dl=Ms.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(y){return y=arguments.length?y:this._source._map,!y.hasLayer(this)&&y._popup&&y._popup.options.autoClose&&y.removeLayer(y._popup),y._popup=this,Ms.prototype.openOn.call(this,y)},onAdd:function(y){Ms.prototype.onAdd.call(this,y),y.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hs||this._source.on("preclick",Kn))},onRemove:function(y){Ms.prototype.onRemove.call(this,y),y.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hs||this._source.off("preclick",Kn))},getEvents:function(){var y=Ms.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(y.preclick=this.close),this.options.keepInView&&(y.moveend=this._adjustPan),y},_initLayout:function(){var y="leaflet-popup",B=this._container=Ct("div",y+" "+(this.options.className||"")+" leaflet-zoom-animated"),fe=this._wrapper=Ct("div",y+"-content-wrapper",B);if(this._contentNode=Ct("div",y+"-content",fe),to(B),ko(this._contentNode),Bn(B,"contextmenu",Kn),this._tipContainer=Ct("div",y+"-tip-container",B),this._tip=Ct("div",y+"-tip",this._tipContainer),this.options.closeButton){var Pe=this._closeButton=Ct("a",y+"-close-button",B);Pe.setAttribute("role","button"),Pe.setAttribute("aria-label","Close popup"),Pe.href="#close",Pe.innerHTML='<span aria-hidden="true">&#215;</span>',Bn(Pe,"click",function(et){Wi(et),this.close()},this)}},_updateLayout:function(){var y=this._contentNode,B=y.style;B.width="",B.whiteSpace="nowrap";var fe=y.offsetWidth;fe=Math.min(fe,this.options.maxWidth),fe=Math.max(fe,this.options.minWidth),B.width=fe+1+"px",B.whiteSpace="",B.height="";var Pe=y.offsetHeight,et=this.options.maxHeight,St="leaflet-popup-scrolled";et&&Pe>et?(B.height=et+"px",gr(y,St)):$t(y,St),this._containerWidth=this._container.offsetWidth},_animateZoom:function(y){var B=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center),fe=this._getAnchor();_r(this._container,B.add(fe))},_adjustPan:function(y){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var B=this._map,fe=parseInt(xt(this._container,"marginBottom"),10)||0,Pe=this._container.offsetHeight+fe,et=this._containerWidth,St=new ne(this._containerLeft,-Pe-this._containerBottom);St._add(Gr(this._container));var sr=B.layerPointToContainerPoint(St),hr=we(this.options.autoPanPadding),Ar=we(this.options.autoPanPaddingTopLeft||hr),dn=we(this.options.autoPanPaddingBottomRight||hr),Zn=B.getSize(),ii=0,Qn=0;sr.x+et+dn.x>Zn.x&&(ii=sr.x+et-Zn.x+dn.x),sr.x-ii-Ar.x<0&&(ii=sr.x-Ar.x),sr.y+Pe+dn.y>Zn.y&&(Qn=sr.y+Pe-Zn.y+dn.y),sr.y-Qn-Ar.y<0&&(Qn=sr.y-Ar.y),(ii||Qn)&&B.fire("autopanstart").panBy([ii,Qn],{animate:y&&y.type==="moveend"})}},_getAnchor:function(){return we(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),mu=function(y,B){return new Dl(y,B)};di.mergeOptions({closePopupOnClick:!0}),di.include({openPopup:function(y,B,fe){return this._initOverlay(Dl,y,B,fe).openOn(this),this},closePopup:function(y){return y=arguments.length?y:this._popup,y&&y.close(),this}}),Lo.include({bindPopup:function(y,B){return this._popup=this._initOverlay(Dl,this._popup,y,B),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(y){return this._popup&&this._popup._prepareOpen(y||this._latlng)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(y){return this._popup&&this._popup.setContent(y),this},getPopup:function(){return this._popup},_openPopup:function(y){if(!(!this._popup||!this._map)){ro(y);var B=y.layer||y.target;if(this._popup._source===B&&!(B instanceof Hs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(y.latlng);return}this._popup._source=B,this.openPopup(y.latlng)}},_movePopup:function(y){this._popup.setLatLng(y.latlng)},_onKeyPress:function(y){y.originalEvent.keyCode===13&&this._openPopup(y)}});var ho=Ms.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(y){Ms.prototype.onAdd.call(this,y),this.setOpacity(this.options.opacity),y.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(y){Ms.prototype.onRemove.call(this,y),y.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var y=Ms.prototype.getEvents.call(this);return this.options.permanent||(y.preclick=this.close),y},_initLayout:function(){var y="leaflet-tooltip",B=y+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ct("div",B),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(y){var B,fe,Pe=this._map,et=this._container,St=Pe.latLngToContainerPoint(Pe.getCenter()),sr=Pe.layerPointToContainerPoint(y),hr=this.options.direction,Ar=et.offsetWidth,dn=et.offsetHeight,Zn=we(this.options.offset),ii=this._getAnchor();hr==="top"?(B=Ar/2,fe=dn):hr==="bottom"?(B=Ar/2,fe=0):hr==="center"?(B=Ar/2,fe=dn/2):hr==="right"?(B=0,fe=dn/2):hr==="left"?(B=Ar,fe=dn/2):sr.x<St.x?(hr="right",B=0,fe=dn/2):(hr="left",B=Ar+(Zn.x+ii.x)*2,fe=dn/2),y=y.subtract(we(B,fe,!0)).add(Zn).add(ii),$t(et,"leaflet-tooltip-right"),$t(et,"leaflet-tooltip-left"),$t(et,"leaflet-tooltip-top"),$t(et,"leaflet-tooltip-bottom"),gr(et,"leaflet-tooltip-"+hr),_r(et,y)},_updatePosition:function(){var y=this._map.latLngToLayerPoint(this._latlng);this._setPosition(y)},setOpacity:function(y){this.options.opacity=y,this._container&&wr(this._container,y)},_animateZoom:function(y){var B=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center);this._setPosition(B)},_getAnchor:function(){return we(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),On=function(y,B){return new ho(y,B)};di.include({openTooltip:function(y,B,fe){return this._initOverlay(ho,y,B,fe).openOn(this),this},closeTooltip:function(y){return y.close(),this}}),Lo.include({bindTooltip:function(y,B){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ho,this._tooltip,y,B),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(y){if(!(!y&&this._tooltipHandlersAdded)){var B=y?"off":"on",fe={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?fe.add=this._openTooltip:(fe.mouseover=this._openTooltip,fe.mouseout=this.closeTooltip,fe.click=this._openTooltip,this._map?this._addFocusListeners():fe.add=this._addFocusListeners),this._tooltip.options.sticky&&(fe.mousemove=this._moveTooltip),this[B](fe),this._tooltipHandlersAdded=!y}},openTooltip:function(y){return this._tooltip&&this._tooltip._prepareOpen(y)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(y){return this._tooltip&&this._tooltip.setContent(y),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(y){var B=y.getElement();B&&(Bn(B,"focus",function(){this._tooltip._source=y,this.openTooltip()},this),Bn(B,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(y){var B=y.getElement();B&&B.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(y){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=y.layer||y.target,this.openTooltip(this._tooltip.options.sticky?y.latlng:void 0))},_moveTooltip:function(y){var B=y.latlng,fe,Pe;this._tooltip.options.sticky&&y.originalEvent&&(fe=this._map.mouseEventToContainerPoint(y.originalEvent),Pe=this._map.containerPointToLayerPoint(fe),B=this._map.layerPointToLatLng(Pe)),this._tooltip.setLatLng(B)}});var qo=Tl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(y){var B=y&&y.tagName==="DIV"?y:document.createElement("div"),fe=this.options;if(fe.html instanceof Element?(Lt(B),B.appendChild(fe.html)):B.innerHTML=fe.html!==!1?fe.html:"",fe.bgPos){var Pe=we(fe.bgPos);B.style.backgroundPosition=-Pe.x+"px "+-Pe.y+"px"}return this._setIconStyles(B,"icon"),B},createShadow:function(){return null}});function Ml(y){return new qo(y)}Tl.Default=Us;var es=Lo.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(y){b(this,y)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(y){y._addZoomLimit(this)},onRemove:function(y){this._removeAllTiles(),Rt(this._container),y._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(nr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(y){return this.options.opacity=y,this._updateOpacity(),this},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var y=this._clampZoom(this._map.getZoom());y!==this._tileZoom&&(this._tileZoom=y,this._updateLevels()),this._update()}return this},getEvents:function(){var y={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),y.move=this._onMove),this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},createTile:function(){return document.createElement("div")},getTileSize:function(){var y=this.options.tileSize;return y instanceof ne?y:new ne(y,y)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(y){for(var B=this.getPane().children,fe=-y(-1/0,1/0),Pe=0,et=B.length,St;Pe<et;Pe++)St=B[Pe].style.zIndex,B[Pe]!==this._container&&St&&(fe=y(fe,+St));isFinite(fe)&&(this.options.zIndex=fe+y(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!Ue.ielt9){wr(this._container,this.options.opacity);var y=+new Date,B=!1,fe=!1;for(var Pe in this._tiles){var et=this._tiles[Pe];if(!(!et.current||!et.loaded)){var St=Math.min(1,(y-et.loaded)/200);wr(et.el,St),St<1?B=!0:(et.active?fe=!0:this._onOpaqueTile(et),et.active=!0)}}fe&&!this._noPrune&&this._pruneTiles(),B&&(F(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var y=this._tileZoom,B=this.options.maxZoom;if(y!==void 0){for(var fe in this._levels)fe=Number(fe),this._levels[fe].el.children.length||fe===y?(this._levels[fe].el.style.zIndex=B-Math.abs(y-fe),this._onUpdateLevel(fe)):(Rt(this._levels[fe].el),this._removeTilesAtZoom(fe),this._onRemoveLevel(fe),delete this._levels[fe]);var Pe=this._levels[y],et=this._map;return Pe||(Pe=this._levels[y]={},Pe.el=Ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),Pe.el.style.zIndex=B,Pe.origin=et.project(et.unproject(et.getPixelOrigin()),y).round(),Pe.zoom=y,this._setZoomTransform(Pe,et.getCenter(),et.getZoom()),v(Pe.el.offsetWidth),this._onCreateLevel(Pe)),this._level=Pe,Pe}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(!!this._map){var y,B,fe=this._map.getZoom();if(fe>this.options.maxZoom||fe<this.options.minZoom){this._removeAllTiles();return}for(y in this._tiles)B=this._tiles[y],B.retain=B.current;for(y in this._tiles)if(B=this._tiles[y],B.current&&!B.active){var Pe=B.coords;this._retainParent(Pe.x,Pe.y,Pe.z,Pe.z-5)||this._retainChildren(Pe.x,Pe.y,Pe.z,Pe.z+2)}for(y in this._tiles)this._tiles[y].retain||this._removeTile(y)}},_removeTilesAtZoom:function(y){for(var B in this._tiles)this._tiles[B].coords.z===y&&this._removeTile(B)},_removeAllTiles:function(){for(var y in this._tiles)this._removeTile(y)},_invalidateAll:function(){for(var y in this._levels)Rt(this._levels[y].el),this._onRemoveLevel(Number(y)),delete this._levels[y];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(y,B,fe,Pe){var et=Math.floor(y/2),St=Math.floor(B/2),sr=fe-1,hr=new ne(+et,+St);hr.z=+sr;var Ar=this._tileCoordsToKey(hr),dn=this._tiles[Ar];return dn&&dn.active?(dn.retain=!0,!0):(dn&&dn.loaded&&(dn.retain=!0),sr>Pe?this._retainParent(et,St,sr,Pe):!1)},_retainChildren:function(y,B,fe,Pe){for(var et=2*y;et<2*y+2;et++)for(var St=2*B;St<2*B+2;St++){var sr=new ne(et,St);sr.z=fe+1;var hr=this._tileCoordsToKey(sr),Ar=this._tiles[hr];if(Ar&&Ar.active){Ar.retain=!0;continue}else Ar&&Ar.loaded&&(Ar.retain=!0);fe+1<Pe&&this._retainChildren(et,St,fe+1,Pe)}},_resetView:function(y){var B=y&&(y.pinch||y.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),B,B)},_animateZoom:function(y){this._setView(y.center,y.zoom,!0,y.noUpdate)},_clampZoom:function(y){var B=this.options;return B.minNativeZoom!==void 0&&y<B.minNativeZoom?B.minNativeZoom:B.maxNativeZoom!==void 0&&B.maxNativeZoom<y?B.maxNativeZoom:y},_setView:function(y,B,fe,Pe){var et=Math.round(B);this.options.maxZoom!==void 0&&et>this.options.maxZoom||this.options.minZoom!==void 0&&et<this.options.minZoom?et=void 0:et=this._clampZoom(et);var St=this.options.updateWhenZooming&&et!==this._tileZoom;(!Pe||St)&&(this._tileZoom=et,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),et!==void 0&&this._update(y),fe||this._pruneTiles(),this._noPrune=!!fe),this._setZoomTransforms(y,B)},_setZoomTransforms:function(y,B){for(var fe in this._levels)this._setZoomTransform(this._levels[fe],y,B)},_setZoomTransform:function(y,B,fe){var Pe=this._map.getZoomScale(fe,y.zoom),et=y.origin.multiplyBy(Pe).subtract(this._map._getNewPixelOrigin(B,fe)).round();Ue.any3d?Vr(y.el,et,Pe):_r(y.el,et)},_resetGrid:function(){var y=this._map,B=y.options.crs,fe=this._tileSize=this.getTileSize(),Pe=this._tileZoom,et=this._map.getPixelWorldBounds(this._tileZoom);et&&(this._globalTileRange=this._pxBoundsToTileRange(et)),this._wrapX=B.wrapLng&&!this.options.noWrap&&[Math.floor(y.project([0,B.wrapLng[0]],Pe).x/fe.x),Math.ceil(y.project([0,B.wrapLng[1]],Pe).x/fe.y)],this._wrapY=B.wrapLat&&!this.options.noWrap&&[Math.floor(y.project([B.wrapLat[0],0],Pe).y/fe.x),Math.ceil(y.project([B.wrapLat[1],0],Pe).y/fe.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(y){var B=this._map,fe=B._animatingZoom?Math.max(B._animateToZoom,B.getZoom()):B.getZoom(),Pe=B.getZoomScale(fe,this._tileZoom),et=B.project(y,this._tileZoom).floor(),St=B.getSize().divideBy(Pe*2);return new ee(et.subtract(St),et.add(St))},_update:function(y){var B=this._map;if(!!B){var fe=this._clampZoom(B.getZoom());if(y===void 0&&(y=B.getCenter()),this._tileZoom!==void 0){var Pe=this._getTiledPixelBounds(y),et=this._pxBoundsToTileRange(Pe),St=et.getCenter(),sr=[],hr=this.options.keepBuffer,Ar=new ee(et.getBottomLeft().subtract([hr,-hr]),et.getTopRight().add([hr,-hr]));if(!(isFinite(et.min.x)&&isFinite(et.min.y)&&isFinite(et.max.x)&&isFinite(et.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var dn in this._tiles){var Zn=this._tiles[dn].coords;(Zn.z!==this._tileZoom||!Ar.contains(new ne(Zn.x,Zn.y)))&&(this._tiles[dn].current=!1)}if(Math.abs(fe-this._tileZoom)>1){this._setView(y,fe);return}for(var ii=et.min.y;ii<=et.max.y;ii++)for(var Qn=et.min.x;Qn<=et.max.x;Qn++){var Pa=new ne(Qn,ii);if(Pa.z=this._tileZoom,!!this._isValidTile(Pa)){var Xa=this._tiles[this._tileCoordsToKey(Pa)];Xa?Xa.current=!0:sr.push(Pa)}}if(sr.sort(function(so,Aa){return so.distanceTo(St)-Aa.distanceTo(St)}),sr.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gu=document.createDocumentFragment();for(Qn=0;Qn<sr.length;Qn++)this._addTile(sr[Qn],gu);this._level.el.appendChild(gu)}}}},_isValidTile:function(y){var B=this._map.options.crs;if(!B.infinite){var fe=this._globalTileRange;if(!B.wrapLng&&(y.x<fe.min.x||y.x>fe.max.x)||!B.wrapLat&&(y.y<fe.min.y||y.y>fe.max.y))return!1}if(!this.options.bounds)return!0;var Pe=this._tileCoordsToBounds(y);return de(this.options.bounds).overlaps(Pe)},_keyToBounds:function(y){return this._tileCoordsToBounds(this._keyToTileCoords(y))},_tileCoordsToNwSe:function(y){var B=this._map,fe=this.getTileSize(),Pe=y.scaleBy(fe),et=Pe.add(fe),St=B.unproject(Pe,y.z),sr=B.unproject(et,y.z);return[St,sr]},_tileCoordsToBounds:function(y){var B=this._tileCoordsToNwSe(y),fe=new re(B[0],B[1]);return this.options.noWrap||(fe=this._map.wrapLatLngBounds(fe)),fe},_tileCoordsToKey:function(y){return y.x+":"+y.y+":"+y.z},_keyToTileCoords:function(y){var B=y.split(":"),fe=new ne(+B[0],+B[1]);return fe.z=+B[2],fe},_removeTile:function(y){var B=this._tiles[y];!B||(Rt(B.el),delete this._tiles[y],this.fire("tileunload",{tile:B.el,coords:this._keyToTileCoords(y)}))},_initTile:function(y){gr(y,"leaflet-tile");var B=this.getTileSize();y.style.width=B.x+"px",y.style.height=B.y+"px",y.onselectstart=v,y.onmousemove=v,Ue.ielt9&&this.options.opacity<1&&wr(y,this.options.opacity)},_addTile:function(y,B){var fe=this._getTilePos(y),Pe=this._tileCoordsToKey(y),et=this.createTile(this._wrapCoords(y),s(this._tileReady,this,y));this._initTile(et),this.createTile.length<2&&U(s(this._tileReady,this,y,null,et)),_r(et,fe),this._tiles[Pe]={el:et,coords:y,current:!0},B.appendChild(et),this.fire("tileloadstart",{tile:et,coords:y})},_tileReady:function(y,B,fe){B&&this.fire("tileerror",{error:B,tile:fe,coords:y});var Pe=this._tileCoordsToKey(y);fe=this._tiles[Pe],fe&&(fe.loaded=+new Date,this._map._fadeAnimated?(wr(fe.el,0),F(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(fe.active=!0,this._pruneTiles()),B||(gr(fe.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:fe.el,coords:y})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(y){return y.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(y){var B=new ne(this._wrapX?h(y.x,this._wrapX):y.x,this._wrapY?h(y.y,this._wrapY):y.y);return B.z=y.z,B},_pxBoundsToTileRange:function(y){var B=this.getTileSize();return new ee(y.min.unscaleBy(B).floor(),y.max.unscaleBy(B).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var y in this._tiles)if(!this._tiles[y].loaded)return!1;return!0}});function uc(y){return new es(y)}var Mn=es.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(y,B){this._url=y,B=b(this,B),B.detectRetina&&Ue.retina&&B.maxZoom>0?(B.tileSize=Math.floor(B.tileSize/2),B.zoomReverse?(B.zoomOffset--,B.minZoom=Math.min(B.maxZoom,B.minZoom+1)):(B.zoomOffset++,B.maxZoom=Math.max(B.minZoom,B.maxZoom-1)),B.minZoom=Math.max(0,B.minZoom)):B.zoomReverse?B.minZoom=Math.min(B.maxZoom,B.minZoom):B.maxZoom=Math.max(B.minZoom,B.maxZoom),typeof B.subdomains=="string"&&(B.subdomains=B.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(y,B){return this._url===y&&B===void 0&&(B=!0),this._url=y,B||this.redraw(),this},createTile:function(y,B){var fe=document.createElement("img");return Bn(fe,"load",s(this._tileOnLoad,this,B,fe)),Bn(fe,"error",s(this._tileOnError,this,B,fe)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(fe.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(fe.referrerPolicy=this.options.referrerPolicy),fe.alt="",fe.src=this.getTileUrl(y),fe},getTileUrl:function(y){var B={r:Ue.retina?"@2x":"",s:this._getSubdomain(y),x:y.x,y:y.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var fe=this._globalTileRange.max.y-y.y;this.options.tms&&(B.y=fe),B["-y"]=fe}return A(this._url,o(B,this.options))},_tileOnLoad:function(y,B){Ue.ielt9?setTimeout(s(y,this,null,B),0):y(null,B)},_tileOnError:function(y,B,fe){var Pe=this.options.errorTileUrl;Pe&&B.getAttribute("src")!==Pe&&(B.src=Pe),y(fe,B)},_onTileRemove:function(y){y.tile.onload=null},_getZoomForUrl:function(){var y=this._tileZoom,B=this.options.maxZoom,fe=this.options.zoomReverse,Pe=this.options.zoomOffset;return fe&&(y=B-y),y+Pe},_getSubdomain:function(y){var B=Math.abs(y.x+y.y)%this.options.subdomains.length;return this.options.subdomains[B]},_abortLoading:function(){var y,B;for(y in this._tiles)if(this._tiles[y].coords.z!==this._tileZoom&&(B=this._tiles[y].el,B.onload=v,B.onerror=v,!B.complete)){B.src=R;var fe=this._tiles[y].coords;Rt(B),delete this._tiles[y],this.fire("tileabort",{tile:B,coords:fe})}},_removeTile:function(y){var B=this._tiles[y];if(!!B)return B.el.setAttribute("src",R),es.prototype._removeTile.call(this,y)},_tileReady:function(y,B,fe){if(!(!this._map||fe&&fe.getAttribute("src")===R))return es.prototype._tileReady.call(this,y,B,fe)}});function Yl(y,B){return new Mn(y,B)}var Jc=Mn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(y,B){this._url=y;var fe=o({},this.defaultWmsParams);for(var Pe in B)Pe in this.options||(fe[Pe]=B[Pe]);B=b(this,B);var et=B.detectRetina&&Ue.retina?2:1,St=this.getTileSize();fe.width=St.x*et,fe.height=St.y*et,this.wmsParams=fe},onAdd:function(y){this._crs=this.options.crs||y.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var B=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[B]=this._crs.code,Mn.prototype.onAdd.call(this,y)},getTileUrl:function(y){var B=this._tileCoordsToNwSe(y),fe=this._crs,Pe=X(fe.project(B[0]),fe.project(B[1])),et=Pe.min,St=Pe.max,sr=(this._wmsVersion>=1.3&&this._crs===Uu?[et.y,et.x,St.y,St.x]:[et.x,et.y,St.x,St.y]).join(","),hr=Mn.prototype.getTileUrl.call(this,y);return hr+x(this.wmsParams,hr,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+sr},setParams:function(y,B){return o(this.wmsParams,y),B||this.redraw(),this}});function cc(y,B){return new Jc(y,B)}Mn.WMS=Jc,Yl.wms=cc;var ms=Lo.extend({options:{padding:.1},initialize:function(y){b(this,y),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&gr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var y={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(y.zoomanim=this._onAnimZoom),y},_onAnimZoom:function(y){this._updateTransform(y.center,y.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(y,B){var fe=this._map.getZoomScale(B,this._zoom),Pe=this._map.getSize().multiplyBy(.5+this.options.padding),et=this._map.project(this._center,B),St=Pe.multiplyBy(-fe).add(et).subtract(this._map._getNewPixelOrigin(y,B));Ue.any3d?Vr(this._container,St,fe):_r(this._container,St)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var y in this._layers)this._layers[y]._reset()},_onZoomEnd:function(){for(var y in this._layers)this._layers[y]._project()},_updatePaths:function(){for(var y in this._layers)this._layers[y]._update()},_update:function(){var y=this.options.padding,B=this._map.getSize(),fe=this._map.containerPointToLayerPoint(B.multiplyBy(-y)).round();this._bounds=new ee(fe,fe.add(B.multiplyBy(1+y*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fc=ms.extend({options:{tolerance:0},getEvents:function(){var y=ms.prototype.getEvents.call(this);return y.viewprereset=this._onViewPreReset,y},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ms.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var y=this._container=document.createElement("canvas");Bn(y,"mousemove",this._onMouseMove,this),Bn(y,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Bn(y,"mouseout",this._handleMouseOut,this),y._leaflet_disable_events=!0,this._ctx=y.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,Rt(this._container),vi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var y;this._redrawBounds=null;for(var B in this._layers)y=this._layers[B],y._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var y=this._bounds,B=this._container,fe=y.getSize(),Pe=Ue.retina?2:1;_r(B,y.min),B.width=Pe*fe.x,B.height=Pe*fe.y,B.style.width=fe.x+"px",B.style.height=fe.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-y.min.x,-y.min.y),this.fire("update")}},_reset:function(){ms.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(y){this._updateDashArray(y),this._layers[l(y)]=y;var B=y._order={layer:y,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=B),this._drawLast=B,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(y){this._requestRedraw(y)},_removePath:function(y){var B=y._order,fe=B.next,Pe=B.prev;fe?fe.prev=Pe:this._drawLast=Pe,Pe?Pe.next=fe:this._drawFirst=fe,delete y._order,delete this._layers[l(y)],this._requestRedraw(y)},_updatePath:function(y){this._extendRedrawBounds(y),y._project(),y._update(),this._requestRedraw(y)},_updateStyle:function(y){this._updateDashArray(y),this._requestRedraw(y)},_updateDashArray:function(y){if(typeof y.options.dashArray=="string"){var B=y.options.dashArray.split(/[, ]+/),fe=[],Pe,et;for(et=0;et<B.length;et++){if(Pe=Number(B[et]),isNaN(Pe))return;fe.push(Pe)}y.options._dashArray=fe}else y.options._dashArray=y.options.dashArray},_requestRedraw:function(y){!this._map||(this._extendRedrawBounds(y),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(y){if(y._pxBounds){var B=(y.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ee,this._redrawBounds.extend(y._pxBounds.min.subtract([B,B])),this._redrawBounds.extend(y._pxBounds.max.add([B,B]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var y=this._redrawBounds;if(y){var B=y.getSize();this._ctx.clearRect(y.min.x,y.min.y,B.x,B.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var y,B=this._redrawBounds;if(this._ctx.save(),B){var fe=B.getSize();this._ctx.beginPath(),this._ctx.rect(B.min.x,B.min.y,fe.x,fe.y),this._ctx.clip()}this._drawing=!0;for(var Pe=this._drawFirst;Pe;Pe=Pe.next)y=Pe.layer,(!B||y._pxBounds&&y._pxBounds.intersects(B))&&y._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(y,B){if(!!this._drawing){var fe,Pe,et,St,sr=y._parts,hr=sr.length,Ar=this._ctx;if(!!hr){for(Ar.beginPath(),fe=0;fe<hr;fe++){for(Pe=0,et=sr[fe].length;Pe<et;Pe++)St=sr[fe][Pe],Ar[Pe?"lineTo":"moveTo"](St.x,St.y);B&&Ar.closePath()}this._fillStroke(Ar,y)}}},_updateCircle:function(y){if(!(!this._drawing||y._empty())){var B=y._point,fe=this._ctx,Pe=Math.max(Math.round(y._radius),1),et=(Math.max(Math.round(y._radiusY),1)||Pe)/Pe;et!==1&&(fe.save(),fe.scale(1,et)),fe.beginPath(),fe.arc(B.x,B.y/et,Pe,0,Math.PI*2,!1),et!==1&&fe.restore(),this._fillStroke(fe,y)}},_fillStroke:function(y,B){var fe=B.options;fe.fill&&(y.globalAlpha=fe.fillOpacity,y.fillStyle=fe.fillColor||fe.color,y.fill(fe.fillRule||"evenodd")),fe.stroke&&fe.weight!==0&&(y.setLineDash&&y.setLineDash(B.options&&B.options._dashArray||[]),y.globalAlpha=fe.opacity,y.lineWidth=fe.weight,y.strokeStyle=fe.color,y.lineCap=fe.lineCap,y.lineJoin=fe.lineJoin,y.stroke())},_onClick:function(y){for(var B=this._map.mouseEventToLayerPoint(y),fe,Pe,et=this._drawFirst;et;et=et.next)fe=et.layer,fe.options.interactive&&fe._containsPoint(B)&&(!(y.type==="click"||y.type==="preclick")||!this._map._draggableMoved(fe))&&(Pe=fe);this._fireEvent(Pe?[Pe]:!1,y)},_onMouseMove:function(y){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var B=this._map.mouseEventToLayerPoint(y);this._handleMouseHover(y,B)}},_handleMouseOut:function(y){var B=this._hoveredLayer;B&&($t(this._container,"leaflet-interactive"),this._fireEvent([B],y,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(y,B){if(!this._mouseHoverThrottled){for(var fe,Pe,et=this._drawFirst;et;et=et.next)fe=et.layer,fe.options.interactive&&fe._containsPoint(B)&&(Pe=fe);Pe!==this._hoveredLayer&&(this._handleMouseOut(y),Pe&&(gr(this._container,"leaflet-interactive"),this._fireEvent([Pe],y,"mouseover"),this._hoveredLayer=Pe)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,y),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(y,B,fe){this._map._fireDOMEvent(B,fe||B.type,y)},_bringToFront:function(y){var B=y._order;if(!!B){var fe=B.next,Pe=B.prev;if(fe)fe.prev=Pe;else return;Pe?Pe.next=fe:fe&&(this._drawFirst=fe),B.prev=this._drawLast,this._drawLast.next=B,B.next=null,this._drawLast=B,this._requestRedraw(y)}},_bringToBack:function(y){var B=y._order;if(!!B){var fe=B.next,Pe=B.prev;if(Pe)Pe.next=fe;else return;fe?fe.prev=Pe:Pe&&(this._drawLast=Pe),B.prev=null,B.next=this._drawFirst,this._drawFirst.prev=B,this._drawFirst=B,this._requestRedraw(y)}}});function hc(y){return Ue.canvas?new fc(y):null}var kl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(y){return document.createElement("<lvml:"+y+' class="lvml">')}}catch{}return function(y){return document.createElement("<"+y+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Yu={_initContainer:function(){this._container=Ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ms.prototype._update.call(this),this.fire("update"))},_initPath:function(y){var B=y._container=kl("shape");gr(B,"leaflet-vml-shape "+(this.options.className||"")),B.coordsize="1 1",y._path=kl("path"),B.appendChild(y._path),this._updateStyle(y),this._layers[l(y)]=y},_addPath:function(y){var B=y._container;this._container.appendChild(B),y.options.interactive&&y.addInteractiveTarget(B)},_removePath:function(y){var B=y._container;Rt(B),y.removeInteractiveTarget(B),delete this._layers[l(y)]},_updateStyle:function(y){var B=y._stroke,fe=y._fill,Pe=y.options,et=y._container;et.stroked=!!Pe.stroke,et.filled=!!Pe.fill,Pe.stroke?(B||(B=y._stroke=kl("stroke")),et.appendChild(B),B.weight=Pe.weight+"px",B.color=Pe.color,B.opacity=Pe.opacity,Pe.dashArray?B.dashStyle=P(Pe.dashArray)?Pe.dashArray.join(" "):Pe.dashArray.replace(/( *, *)/g," "):B.dashStyle="",B.endcap=Pe.lineCap.replace("butt","flat"),B.joinstyle=Pe.lineJoin):B&&(et.removeChild(B),y._stroke=null),Pe.fill?(fe||(fe=y._fill=kl("fill")),et.appendChild(fe),fe.color=Pe.fillColor||Pe.color,fe.opacity=Pe.fillOpacity):fe&&(et.removeChild(fe),y._fill=null)},_updateCircle:function(y){var B=y._point.round(),fe=Math.round(y._radius),Pe=Math.round(y._radiusY||fe);this._setPath(y,y._empty()?"M0 0":"AL "+B.x+","+B.y+" "+fe+","+Pe+" 0,"+65535*360)},_setPath:function(y,B){y._path.v=B},_bringToFront:function(y){Pt(y._container)},_bringToBack:function(y){nr(y._container)}},Xl=Ue.vml?kl:ie,Il=ms.extend({_initContainer:function(){this._container=Xl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rt(this._container),vi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var y=this._bounds,B=y.getSize(),fe=this._container;(!this._svgSize||!this._svgSize.equals(B))&&(this._svgSize=B,fe.setAttribute("width",B.x),fe.setAttribute("height",B.y)),_r(fe,y.min),fe.setAttribute("viewBox",[y.min.x,y.min.y,B.x,B.y].join(" ")),this.fire("update")}},_initPath:function(y){var B=y._path=Xl("path");y.options.className&&gr(B,y.options.className),y.options.interactive&&gr(B,"leaflet-interactive"),this._updateStyle(y),this._layers[l(y)]=y},_addPath:function(y){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(y._path),y.addInteractiveTarget(y._path)},_removePath:function(y){Rt(y._path),y.removeInteractiveTarget(y._path),delete this._layers[l(y)]},_updatePath:function(y){y._project(),y._update()},_updateStyle:function(y){var B=y._path,fe=y.options;!B||(fe.stroke?(B.setAttribute("stroke",fe.color),B.setAttribute("stroke-opacity",fe.opacity),B.setAttribute("stroke-width",fe.weight),B.setAttribute("stroke-linecap",fe.lineCap),B.setAttribute("stroke-linejoin",fe.lineJoin),fe.dashArray?B.setAttribute("stroke-dasharray",fe.dashArray):B.removeAttribute("stroke-dasharray"),fe.dashOffset?B.setAttribute("stroke-dashoffset",fe.dashOffset):B.removeAttribute("stroke-dashoffset")):B.setAttribute("stroke","none"),fe.fill?(B.setAttribute("fill",fe.fillColor||fe.color),B.setAttribute("fill-opacity",fe.fillOpacity),B.setAttribute("fill-rule",fe.fillRule||"evenodd")):B.setAttribute("fill","none"))},_updatePoly:function(y,B){this._setPath(y,ce(y._parts,B))},_updateCircle:function(y){var B=y._point,fe=Math.max(Math.round(y._radius),1),Pe=Math.max(Math.round(y._radiusY),1)||fe,et="a"+fe+","+Pe+" 0 1,0 ",St=y._empty()?"M0 0":"M"+(B.x-fe)+","+B.y+et+fe*2+",0 "+et+-fe*2+",0 ";this._setPath(y,St)},_setPath:function(y,B){y._path.setAttribute("d",B)},_bringToFront:function(y){Pt(y._path)},_bringToBack:function(y){nr(y._path)}});Ue.vml&&Il.include(Yu);function Xu(y){return Ue.svg||Ue.vml?new Il(y):null}di.include({getRenderer:function(y){var B=y.options.renderer||this._getPaneRenderer(y.options.pane)||this.options.renderer||this._renderer;return B||(B=this._renderer=this._createRenderer()),this.hasLayer(B)||this.addLayer(B),B},_getPaneRenderer:function(y){if(y==="overlayPane"||y===void 0)return!1;var B=this._paneRenderers[y];return B===void 0&&(B=this._createRenderer({pane:y}),this._paneRenderers[y]=B),B},_createRenderer:function(y){return this.options.preferCanvas&&hc(y)||Xu(y)}});var Ku=hs.extend({initialize:function(y,B){hs.prototype.initialize.call(this,this._boundsToLatLngs(y),B)},setBounds:function(y){return this.setLatLngs(this._boundsToLatLngs(y))},_boundsToLatLngs:function(y){return y=de(y),[y.getSouthWest(),y.getNorthWest(),y.getNorthEast(),y.getSouthEast()]}});function wo(y,B){return new Ku(y,B)}Il.create=Xl,Il.pointsToPath=ce,Go.geometryToLayer=du,Go.coordsToLatLng=Zu,Go.coordsToLatLngs=Vs,Go.latLngToCoords=Wu,Go.latLngsToCoords=ul,Go.getFeature=ds,Go.asFeature=fo,di.mergeOptions({boxZoom:!0});var Gs=co.extend({initialize:function(y){this._map=y,this._container=y._container,this._pane=y._panes.overlayPane,this._resetStateTimeout=0,y.on("unload",this._destroy,this)},addHooks:function(){Bn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(y){if(!y.shiftKey||y.which!==1&&y.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qr(),wn(),this._startPoint=this._map.mouseEventToContainerPoint(y),Bn(document,{contextmenu:ro,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(y){this._moved||(this._moved=!0,this._box=Ct("div","leaflet-zoom-box",this._container),gr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(y);var B=new ee(this._point,this._startPoint),fe=B.getSize();_r(this._box,B.min),this._box.style.width=fe.x+"px",this._box.style.height=fe.y+"px"},_finish:function(){this._moved&&(Rt(this._box),$t(this._container,"leaflet-crosshair")),tn(),hn(),vi(document,{contextmenu:ro,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(y){if(!(y.which!==1&&y.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var B=new re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(B).fire("boxzoomend",{boxZoomBounds:B})}},_onKeyDown:function(y){y.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});di.addInitHook("addHandler","boxZoom",Gs),di.mergeOptions({doubleClickZoom:!0});var dc=co.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(y){var B=this._map,fe=B.getZoom(),Pe=B.options.zoomDelta,et=y.originalEvent.shiftKey?fe-Pe:fe+Pe;B.options.doubleClickZoom==="center"?B.setZoom(et):B.setZoomAround(y.containerPoint,et)}});di.addInitHook("addHandler","doubleClickZoom",dc),di.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zs=co.extend({addHooks:function(){if(!this._draggable){var y=this._map;this._draggable=new Ho(y._mapPane,y._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),y.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),y.on("zoomend",this._onZoomEnd,this),y.whenReady(this._onZoomEnd,this))}gr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$t(this._map._container,"leaflet-grab"),$t(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var y=this._map;if(y._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var B=de(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(B.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(B.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;y.fire("movestart").fire("dragstart"),y.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(y){if(this._map.options.inertia){var B=this._lastTime=+new Date,fe=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(fe),this._times.push(B),this._prunePositions(B)}this._map.fire("move",y).fire("drag",y)},_prunePositions:function(y){for(;this._positions.length>1&&y-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var y=this._map.getSize().divideBy(2),B=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=B.subtract(y).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(y,B){return y-(y-B)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var y=this._draggable._newPos.subtract(this._draggable._startPos),B=this._offsetLimit;y.x<B.min.x&&(y.x=this._viscousLimit(y.x,B.min.x)),y.y<B.min.y&&(y.y=this._viscousLimit(y.y,B.min.y)),y.x>B.max.x&&(y.x=this._viscousLimit(y.x,B.max.x)),y.y>B.max.y&&(y.y=this._viscousLimit(y.y,B.max.y)),this._draggable._newPos=this._draggable._startPos.add(y)}},_onPreDragWrap:function(){var y=this._worldWidth,B=Math.round(y/2),fe=this._initialWorldOffset,Pe=this._draggable._newPos.x,et=(Pe-B+fe)%y+B-fe,St=(Pe+B+fe)%y-B-fe,sr=Math.abs(et+fe)<Math.abs(St+fe)?et:St;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=sr},_onDragEnd:function(y){var B=this._map,fe=B.options,Pe=!fe.inertia||y.noInertia||this._times.length<2;if(B.fire("dragend",y),Pe)B.fire("moveend");else{this._prunePositions(+new Date);var et=this._lastPos.subtract(this._positions[0]),St=(this._lastTime-this._times[0])/1e3,sr=fe.easeLinearity,hr=et.multiplyBy(sr/St),Ar=hr.distanceTo([0,0]),dn=Math.min(fe.inertiaMaxSpeed,Ar),Zn=hr.multiplyBy(dn/Ar),ii=dn/(fe.inertiaDeceleration*sr),Qn=Zn.multiplyBy(-ii/2).round();!Qn.x&&!Qn.y?B.fire("moveend"):(Qn=B._limitOffset(Qn,B.options.maxBounds),U(function(){B.panBy(Qn,{duration:ii,easeLinearity:sr,noMoveStart:!0,animate:!0})}))}}});di.addInitHook("addHandler","dragging",Zs),di.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vu=co.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(y){this._map=y,this._setPanDelta(y.options.keyboardPanDelta),this._setZoomDelta(y.options.zoomDelta)},addHooks:function(){var y=this._map._container;y.tabIndex<=0&&(y.tabIndex="0"),Bn(y,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var y=document.body,B=document.documentElement,fe=y.scrollTop||B.scrollTop,Pe=y.scrollLeft||B.scrollLeft;this._map._container.focus(),window.scrollTo(Pe,fe)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(y){var B=this._panKeys={},fe=this.keyCodes,Pe,et;for(Pe=0,et=fe.left.length;Pe<et;Pe++)B[fe.left[Pe]]=[-1*y,0];for(Pe=0,et=fe.right.length;Pe<et;Pe++)B[fe.right[Pe]]=[y,0];for(Pe=0,et=fe.down.length;Pe<et;Pe++)B[fe.down[Pe]]=[0,y];for(Pe=0,et=fe.up.length;Pe<et;Pe++)B[fe.up[Pe]]=[0,-1*y]},_setZoomDelta:function(y){var B=this._zoomKeys={},fe=this.keyCodes,Pe,et;for(Pe=0,et=fe.zoomIn.length;Pe<et;Pe++)B[fe.zoomIn[Pe]]=y;for(Pe=0,et=fe.zoomOut.length;Pe<et;Pe++)B[fe.zoomOut[Pe]]=-y},_addHooks:function(){Bn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(y){if(!(y.altKey||y.ctrlKey||y.metaKey)){var B=y.keyCode,fe=this._map,Pe;if(B in this._panKeys)(!fe._panAnim||!fe._panAnim._inProgress)&&(Pe=this._panKeys[B],y.shiftKey&&(Pe=we(Pe).multiplyBy(3)),fe.panBy(Pe),fe.options.maxBounds&&fe.panInsideBounds(fe.options.maxBounds));else if(B in this._zoomKeys)fe.setZoom(fe.getZoom()+(y.shiftKey?3:1)*this._zoomKeys[B]);else if(B===27&&fe._popup&&fe._popup.options.closeOnEscapeKey)fe.closePopup();else return;ro(y)}}});di.addInitHook("addHandler","keyboard",vu),di.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ll=co.extend({addHooks:function(){Bn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(y){var B=za(y),fe=this._map.options.wheelDebounceTime;this._delta+=B,this._lastMousePos=this._map.mouseEventToContainerPoint(y),this._startTime||(this._startTime=+new Date);var Pe=Math.max(fe-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),Pe),ro(y)},_performZoom:function(){var y=this._map,B=y.getZoom(),fe=this._map.options.zoomSnap||0;y._stop();var Pe=this._delta/(this._map.options.wheelPxPerZoomLevel*4),et=4*Math.log(2/(1+Math.exp(-Math.abs(Pe))))/Math.LN2,St=fe?Math.ceil(et/fe)*fe:et,sr=y._limitZoom(B+(this._delta>0?St:-St))-B;this._delta=0,this._startTime=null,sr&&(y.options.scrollWheelZoom==="center"?y.setZoom(B+sr):y.setZoomAround(this._lastMousePos,B+sr))}});di.addInitHook("addHandler","scrollWheelZoom",Ll);var pc=600;di.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var Zo=co.extend({addHooks:function(){Bn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(y){if(clearTimeout(this._holdTimeout),y.touches.length===1){var B=y.touches[0];this._startPos=this._newPos=new ne(B.clientX,B.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(Bn(document,"touchend",Wi),Bn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",B))},this),pc),Bn(document,"touchend touchcancel contextmenu",this._cancel,this),Bn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function y(){vi(document,"touchend",Wi),vi(document,"touchend touchcancel",y)},_cancel:function(){clearTimeout(this._holdTimeout),vi(document,"touchend touchcancel contextmenu",this._cancel,this),vi(document,"touchmove",this._onMove,this)},_onMove:function(y){var B=y.touches[0];this._newPos=new ne(B.clientX,B.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(y,B){var fe=new MouseEvent(y,{bubbles:!0,cancelable:!0,view:window,screenX:B.screenX,screenY:B.screenY,clientX:B.clientX,clientY:B.clientY});fe._simulated=!0,B.target.dispatchEvent(fe)}});di.addInitHook("addHandler","tapHold",Zo),di.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var ba=co.extend({addHooks:function(){gr(this._map._container,"leaflet-touch-zoom"),Bn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$t(this._map._container,"leaflet-touch-zoom"),vi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(y){var B=this._map;if(!(!y.touches||y.touches.length!==2||B._animatingZoom||this._zooming)){var fe=B.mouseEventToContainerPoint(y.touches[0]),Pe=B.mouseEventToContainerPoint(y.touches[1]);this._centerPoint=B.getSize()._divideBy(2),this._startLatLng=B.containerPointToLatLng(this._centerPoint),B.options.touchZoom!=="center"&&(this._pinchStartLatLng=B.containerPointToLatLng(fe.add(Pe)._divideBy(2))),this._startDist=fe.distanceTo(Pe),this._startZoom=B.getZoom(),this._moved=!1,this._zooming=!0,B._stop(),Bn(document,"touchmove",this._onTouchMove,this),Bn(document,"touchend touchcancel",this._onTouchEnd,this),Wi(y)}},_onTouchMove:function(y){if(!(!y.touches||y.touches.length!==2||!this._zooming)){var B=this._map,fe=B.mouseEventToContainerPoint(y.touches[0]),Pe=B.mouseEventToContainerPoint(y.touches[1]),et=fe.distanceTo(Pe)/this._startDist;if(this._zoom=B.getScaleZoom(et,this._startZoom),!B.options.bounceAtZoomLimits&&(this._zoom<B.getMinZoom()&&et<1||this._zoom>B.getMaxZoom()&&et>1)&&(this._zoom=B._limitZoom(this._zoom)),B.options.touchZoom==="center"){if(this._center=this._startLatLng,et===1)return}else{var St=fe._add(Pe)._divideBy(2)._subtract(this._centerPoint);if(et===1&&St.x===0&&St.y===0)return;this._center=B.unproject(B.project(this._pinchStartLatLng,this._zoom).subtract(St),this._zoom)}this._moved||(B._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var sr=s(B._move,B,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(sr,this,!0),Wi(y)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),vi(document,"touchmove",this._onTouchMove,this),vi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});di.addInitHook("addHandler","touchZoom",ba),di.BoxZoom=Gs,di.DoubleClickZoom=dc,di.Drag=Zs,di.Keyboard=vu,di.ScrollWheelZoom=Ll,di.TapHold=Zo,di.TouchZoom=ba,e.Bounds=ee,e.Browser=Ue,e.CRS=He,e.Canvas=fc,e.Circle=hu,e.CircleMarker=cu,e.Class=j,e.Control=Ya,e.DivIcon=qo,e.DivOverlay=Ms,e.DomEvent=Jo,e.DomUtil=Zi,e.Draggable=Ho,e.Evented=J,e.FeatureGroup=sl,e.GeoJSON=Go,e.GridLayer=es,e.Handler=co,e.Icon=Tl,e.ImageOverlay=ps,e.LatLng=me,e.LatLngBounds=re,e.Layer=Lo,e.LayerGroup=Cs,e.LineUtil=Wc,e.Map=di,e.Marker=Hu,e.Mixin=zu,e.Path=Hs,e.Point=ne,e.PolyUtil=oc,e.Polygon=hs,e.Polyline=Po,e.Popup=Dl,e.PosAnimation=Ta,e.Projection=ol,e.Rectangle=Ku,e.Renderer=ms,e.SVG=Il,e.SVGOverlay=ju,e.TileLayer=Mn,e.Tooltip=ho,e.Transformation=$,e.Util=V,e.VideoOverlay=Ds,e.bind=s,e.bounds=X,e.canvas=hc,e.circle=Gu,e.circleMarker=fu,e.control=_a,e.divIcon=Ml,e.extend=o,e.featureGroup=sc,e.geoJSON=Ro,e.geoJson=Yc,e.gridLayer=uc,e.icon=Al,e.imageOverlay=Xc,e.latLng=xe,e.latLngBounds=de,e.layerGroup=Qo,e.map=zs,e.marker=Vu,e.point=we,e.polygon=lc,e.polyline=El,e.popup=mu,e.rectangle=wo,e.setOptions=b,e.stamp=l,e.svg=Xu,e.svgOverlay=Kc,e.tileLayer=Yl,e.tooltip=On,e.transformation=le,e.version=i,e.videoOverlay=pu;var Kl=window.L;e.noConflict=function(){return window.L=Kl,this},window.L=e})})(Wr,Wr.exports);var Gp=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,lf=document.documentElement.style.pointerEvents==="",ff={cors:Gp,pointerEvents:lf},$2={attributionWidthOffset:55},Dg=0;function Zp(r){var t="";r.f=r.f||"json";for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var i=r[e],o=Object.prototype.toString.call(i),a;t.length&&(t+="&"),o==="[object Array]"?a=Object.prototype.toString.call(i[0])==="[object Object]"?JSON.stringify(i):i.join(","):o==="[object Object]"?a=JSON.stringify(i):o==="[object Date]"?a=i.valueOf():a=i,t+=encodeURIComponent(e)+"="+encodeURIComponent(a)}return t}function Gv(r,t){var e=new window.XMLHttpRequest;return e.onerror=function(i){e.onreadystatechange=Wr.exports.Util.falseFn,r.call(t,{error:{code:500,message:"XMLHttpRequest error"}},null)},e.onreadystatechange=function(){var i,o;if(e.readyState===4){try{i=JSON.parse(e.responseText)}catch{i=null,o={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!o&&i.error&&(o=i.error,i=null),e.onerror=Wr.exports.Util.falseFn,r.call(t,o,i)}},e.ontimeout=function(){this.onerror()},e}function Q2(r,t,e,i){var o=Gv(e,i);return o.open("POST",r),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(o.timeout=i.options.timeout),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send(Zp(t)),o}function v_(r,t,e,i){var o=Gv(e,i);return o.open("GET",r+"?"+Zp(t),!0),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(o.timeout=i.options.timeout,i.options.withCredentials&&(o.withCredentials=!0)),o.send(null),o}function Sh(r,t,e,i){var o=Zp(t),a=Gv(e,i),s=(r+"?"+o).length;if(s<=2e3&&ff.cors?a.open("GET",r+"?"+o):s>2e3&&ff.cors&&(a.open("POST",r),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(a.timeout=i.options.timeout,i.options.withCredentials&&(a.withCredentials=!0)),s<=2e3&&ff.cors)a.send(null);else if(s>2e3&&ff.cors)a.send(o);else{if(s<=2e3&&!ff.cors)return Zv(r,t,e,i);mf("a request to "+r+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");return}return a}function Zv(r,t,e,i){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var o="c"+Dg;t.callback="window._EsriLeafletCallbacks."+o,window._EsriLeafletCallbacks[o]=function(s){if(window._EsriLeafletCallbacks[o]!==!0){var n,l=Object.prototype.toString.call(s);l==="[object Object]"||l==="[object Array]"||(n={error:{code:500,message:"Expected array or object as JSONP response"}},s=null),!n&&s.error&&(n=s,s=null),e.call(i,n,s),window._EsriLeafletCallbacks[o]=!0}};var a=Wr.exports.DomUtil.create("script",null,document.body);return a.type="text/javascript",a.src=r+"?"+Zp(t),a.id=o,a.onerror=function(s){if(s&&window._EsriLeafletCallbacks[o]!==!0){var n={error:{code:500,message:"An unknown error occurred"}};e.call(i,n),window._EsriLeafletCallbacks[o]=!0}},Wr.exports.DomUtil.addClass(a,"esri-leaflet-jsonp"),Dg++,{id:o,url:a.src,abort:function(){window._EsriLeafletCallbacks._callback[o]({code:0,message:"Request aborted."})}}}var Wv=ff.cors?v_:Zv;Wv.CORS=v_;Wv.JSONP=Zv;function mf(){console&&console.warn&&console.warn.apply(console,arguments)}var mp={request:Sh,get:Wv,post:Q2};/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var q2=function(t,e,i,o){var a=(o[0]-i[0])*(t[1]-i[1])-(o[1]-i[1])*(t[0]-i[0]),s=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),n=(o[1]-i[1])*(e[0]-t[0])-(o[0]-i[0])*(e[1]-t[1]);if(n!==0){var l=a/n,u=s/n;if(l>=0&&l<=1&&u>=0&&u<=1)return!0}return!1},ew=function(t,e){for(var i=!1,o=-1,a=t.length,s=a-1;++o<a;s=o)(t[o][1]<=e[1]&&e[1]<t[s][1]||t[s][1]<=e[1]&&e[1]<t[o][1])&&e[0]<(t[s][0]-t[o][0])*(e[1]-t[o][1])/(t[s][1]-t[o][1])+t[o][0]&&(i=!i);return i},tw=function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},g_=function(t,e){for(var i=0;i<t.length-1;i++)for(var o=0;o<e.length-1;o++)if(q2(t[i],t[i+1],e[o],e[o+1]))return!0;return!1},ov=function(t){return tw(t[0],t[t.length-1])||t.push(t[0]),t},sv=function(t){var e=0,i=0,o=t.length,a=t[i],s;for(i;i<o-1;i++)s=t[i+1],e+=(s[0]-a[0])*(s[1]+a[1]),a=s;return e>=0},y_=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},rw=function(t,e){var i=g_(t,e),o=ew(t,e[0]);return!!(!i&&o)},nw=function(t){for(var e=[],i=[],o,a,s,n=0;n<t.length;n++){var l=ov(t[n].slice(0));if(!(l.length<4))if(sv(l)){var u=[l.slice().reverse()];e.push(u)}else i.push(l.slice().reverse())}for(var h=[];i.length;){s=i.pop();var v=!1;for(o=e.length-1;o>=0;o--)if(a=e[o][0],rw(a,s)){e[o].push(s),v=!0;break}v||h.push(s)}for(;h.length;){s=h.pop();var d=!1;for(o=e.length-1;o>=0;o--)if(a=e[o][0],g_(a,s)){e[o].push(s),d=!0;break}d||e.push([s.reverse()])}return e.length===1?{type:"Polygon",coordinates:e[0]}:{type:"MultiPolygon",coordinates:e}},iw=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],o=0;o<i.length;o++){var a=i[o];if(a in t&&(typeof t[a]=="string"||typeof t[a]=="number"))return t[a]}throw Error("No valid id attribute found")},aw=function r(t,e){var i={};if(t.features){i.type="FeatureCollection",i.features=[];for(var o=0;o<t.features.length;o++)i.features.push(r(t.features[o],e))}if(typeof t.x=="number"&&typeof t.y=="number"&&(i.type="Point",i.coordinates=[t.x,t.y],typeof t.z=="number"&&i.coordinates.push(t.z)),t.points&&(i.type="MultiPoint",i.coordinates=t.points.slice(0)),t.paths&&(t.paths.length===1?(i.type="LineString",i.coordinates=t.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=t.paths.slice(0))),t.rings&&(i=nw(t.rings.slice(0))),typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"&&(i.type="Polygon",i.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.geometry||t.attributes)&&(i.type="Feature",i.geometry=t.geometry?r(t.geometry):null,i.properties=t.attributes?y_(t.attributes):null,t.attributes))try{i.id=iw(t.attributes,e)}catch{}return JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),t.spatialReference&&t.spatialReference.wkid&&t.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(t.spatialReference)),i},__=function(t){var e=[],i=t.slice(0),o=ov(i.shift().slice(0));if(o.length>=4){sv(o)||o.reverse(),e.push(o);for(var a=0;a<i.length;a++){var s=ov(i[a].slice(0));s.length>=4&&(sv(s)&&s.reverse(),e.push(s))}}return e},ow=function(t){for(var e=[],i=0;i<t.length;i++)for(var o=__(t[i]),a=o.length-1;a>=0;a--){var s=o[a].slice(0);e.push(s)}return e},sw=function r(t,e){e=e||"OBJECTID";var i={wkid:4326},o={},a;switch(t.type){case"Point":o.x=t.coordinates[0],o.y=t.coordinates[1],t.coordinates[2]!=null&&(o.z=t.coordinates[2]),o.spatialReference=i;break;case"MultiPoint":o.points=t.coordinates.slice(0),t.coordinates[0][2]!=null&&(o.hasZ=!0),o.spatialReference=i;break;case"LineString":o.paths=[t.coordinates.slice(0)],t.coordinates[0][2]!=null&&(o.hasZ=!0),o.spatialReference=i;break;case"MultiLineString":o.paths=t.coordinates.slice(0),t.coordinates[0][0][2]!=null&&(o.hasZ=!0),o.spatialReference=i;break;case"Polygon":o.rings=__(t.coordinates.slice(0)),t.coordinates[0][0][2]!=null&&(o.hasZ=!0),o.spatialReference=i;break;case"MultiPolygon":o.rings=ow(t.coordinates.slice(0)),t.coordinates[0][0][0][2]!=null&&(o.hasZ=!0),o.spatialReference=i;break;case"Feature":t.geometry&&(o.geometry=r(t.geometry,e)),o.attributes=t.properties?y_(t.properties):{},t.id&&(o.attributes[e]=t.id);break;case"FeatureCollection":for(o=[],a=0;a<t.features.length;a++)o.push(r(t.features[a],e));break;case"GeometryCollection":for(o=[],a=0;a<t.geometries.length;a++)o.push(r(t.geometries[a],e));break}return o},b_='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>',lw='Powered by <a href="https://www.esri.com">Esri</a>';function fd(r,t){return sw(r,t)}function x_(r,t){return aw(r,t)}function lv(r){if(r.xmin!=="NaN"&&r.ymin!=="NaN"&&r.xmax!=="NaN"&&r.ymax!=="NaN"){var t=Wr.exports.latLng(r.ymin,r.xmin),e=Wr.exports.latLng(r.ymax,r.xmax);return Wr.exports.latLngBounds(t,e)}else return null}function jv(r){return r=Wr.exports.latLngBounds(r),{xmin:r.getSouthWest().lng,ymin:r.getSouthWest().lat,xmax:r.getNorthEast().lng,ymax:r.getNorthEast().lat,spatialReference:{wkid:4326}}}var w_=/^(OBJECTID|FID|OID|ID)$/i;function T_(r){var t;if(r.objectIdFieldName)t=r.objectIdFieldName;else if(r.fields){for(var e=0;e<=r.fields.length-1;e++)if(r.fields[e].type==="esriFieldTypeOID"){t=r.fields[e].name;break}if(!t){for(e=0;e<=r.fields.length-1;e++)if(r.fields[e].name.match(w_)){t=r.fields[e].name;break}}}return t}function A_(r){for(var t in r.attributes)if(t.match(w_))return t}function vd(r,t){var e,i=r.features||r.results,o=i&&i.length;t?e=t:e=T_(r);var a={type:"FeatureCollection",features:[]};if(o)for(var s=i.length-1;s>=0;s--){var n=x_(i[s],e||A_(i[s]));a.features.push(n)}return a}function Wp(r){return r=Wr.exports.Util.trim(r),r[r.length-1]!=="/"&&(r+="/"),r}function gd(r){if(r.url.indexOf("?")!==-1){r.requestParams=r.requestParams||{};var t=r.url.substring(r.url.indexOf("?")+1);r.url=r.url.split("?")[0],r.requestParams=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return r.url=Wp(r.url.split("?")[0]),r}function S_(r){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(r)}function uv(r){var t;switch(r){case"Point":t="esriGeometryPoint";break;case"MultiPoint":t="esriGeometryMultipoint";break;case"LineString":t="esriGeometryPolyline";break;case"MultiLineString":t="esriGeometryPolyline";break;case"Polygon":t="esriGeometryPolygon";break;case"MultiPolygon":t="esriGeometryPolygon";break}return t}function vp(r){return r.getSize().x-$2.attributionWidthOffset+"px"}function yd(r){if(!!r.attributionControl){if(r.attributionControl._esriAttributionLayerCount||(r.attributionControl._esriAttributionLayerCount=0),r.attributionControl._esriAttributionLayerCount===0){if(!r.attributionControl._esriAttributionAddedOnce){var t=document.createElement("style");t.type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t);var e=document.createElement("style");e.type="text/css",e.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+vp(r)+";}",document.getElementsByTagName("head")[0].appendChild(e),r.on("resize",function(i){r.attributionControl&&(r.attributionControl._container.style.maxWidth=vp(i.target))}),r.attributionControl._esriAttributionAddedOnce=!0}r.attributionControl.setPrefix(b_+" | "+lw),Wr.exports.DomUtil.addClass(r.attributionControl._container,"esri-truncated-attribution:hover"),Wr.exports.DomUtil.addClass(r.attributionControl._container,"esri-truncated-attribution")}r.attributionControl._esriAttributionLayerCount=r.attributionControl._esriAttributionLayerCount+1}}function jp(r){!r.attributionControl||(r.attributionControl._esriAttributionLayerCount&&r.attributionControl._esriAttributionLayerCount===1&&(r.attributionControl.setPrefix(b_),Wr.exports.DomUtil.removeClass(r.attributionControl._container,"esri-truncated-attribution:hover"),Wr.exports.DomUtil.removeClass(r.attributionControl._container,"esri-truncated-attribution")),r.attributionControl._esriAttributionLayerCount=r.attributionControl._esriAttributionLayerCount-1)}function Yv(r){var t={geometry:null,geometryType:null};if(r instanceof Wr.exports.LatLngBounds)return t.geometry=jv(r),t.geometryType="esriGeometryEnvelope",t;if(r.getLatLng&&(r=r.getLatLng()),r instanceof Wr.exports.LatLng&&(r={type:"Point",coordinates:[r.lng,r.lat]}),r instanceof Wr.exports.GeoJSON&&(r=r.getLayers()[0].feature.geometry,t.geometry=fd(r),t.geometryType=uv(r.type)),r.toGeoJSON&&(r=r.toGeoJSON()),r.type==="Feature"&&(r=r.geometry),r.type==="Point"||r.type==="LineString"||r.type==="Polygon"||r.type==="MultiPolygon")return t.geometry=fd(r),t.geometryType=uv(r.type),t;mf("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function E_(r,t){ff.cors&&Sh(r,{},Wr.exports.Util.bind(function(e,i){if(!e){t._esriAttributions=[];for(var o=0;o<i.contributors.length;o++)for(var a=i.contributors[o],s=0;s<a.coverageAreas.length;s++){var n=a.coverageAreas[s],l=Wr.exports.latLng(n.bbox[0],n.bbox[1]),u=Wr.exports.latLng(n.bbox[2],n.bbox[3]);t._esriAttributions.push({attribution:a.attribution,score:n.score,bounds:Wr.exports.latLngBounds(l,u),minZoom:n.zoomMin,maxZoom:n.zoomMax})}t._esriAttributions.sort(function(v,d){return d.score-v.score});var h={target:t};gp(h)}},this))}function gp(r){var t=r.target,e=t._esriAttributions;if(!(!t||!t.attributionControl)){var i=t.attributionControl._container.querySelector(".esri-dynamic-attribution");if(i&&e){for(var o="",a=t.getBounds(),s=Wr.exports.latLngBounds(a.getSouthWest().wrap(),a.getNorthEast().wrap()),n=t.getZoom(),l=0;l<e.length;l++){var u=e[l],h=u.attribution;!o.match(h)&&u.bounds.intersects(s)&&n>=u.minZoom&&n<=u.maxZoom&&(o+=", "+h)}o=o.substr(2),i.innerHTML=o,i.style.maxWidth=vp(t),t.fire("attributionupdated",{attribution:o})}}}var ed={warn:mf,cleanUrl:Wp,getUrlParams:gd,isArcgisOnline:S_,geojsonTypeToArcGIS:uv,responseToFeatureCollection:vd,geojsonToArcGIS:fd,arcgisToGeoJSON:x_,boundsToExtent:jv,extentToBounds:lv,calcAttributionWidth:vp,setEsriAttribution:yd,_setGeometry:Yv,_getAttributionData:E_,_updateMapAttribution:gp,_findIdAttributeFromFeature:A_,_findIdAttributeFromResponse:T_},Xv=Wr.exports.Class.extend({options:{proxy:!1,useCors:Gp},generateSetter:function(r,t){return Wr.exports.Util.bind(function(e){return this.params[r]=e,this},t)},initialize:function(r){if(r.request&&r.options?(this._service=r,Wr.exports.Util.setOptions(this,r.options)):(Wr.exports.Util.setOptions(this,r),this.options.url=Wp(r.url)),this.params=Wr.exports.Util.extend({},this.params||{}),this.setters)for(var t in this.setters){var e=this.setters[t];this[t]=this.generateSetter(e,this)}},token:function(r){return this._service?this._service.authenticate(r):this.params.token=r,this},apikey:function(r){return this.token(r)},format:function(r){return this.params.returnUnformattedValues=!r,this},request:function(r,t){return this.options.requestParams&&Wr.exports.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,r,t):this._request("request",this.path,this.params,r,t)},_request:function(r,t,e,i,o){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(r==="get"||r==="request")&&!this.options.useCors?mp.get.JSONP(a,e,i,o):mp[r](a,e,i,o)}}),uw=Xv.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(r){return this._setGeometryParams(r),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(r,t){return r=Wr.exports.latLng(r),this.params.geometry=[r.lng,r.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=t,this.params.inSR=4326,this},where:function(r){return this.params.where=r,this},between:function(r,t){return this.params.time=[r.valueOf(),t.valueOf()],this},simplify:function(r,t){var e=Math.abs(r.getBounds().getWest()-r.getBounds().getEast());return this.params.maxAllowableOffset=e/r.getSize().y*t,this},orderBy:function(r,t){return t=t||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[r,t].join(" "),this},run:function(r,t){return this._cleanParams(),this.options.isModern||S_(this.options.url)&&this.options.isModern===void 0?(this.params.f="geojson",this.request(function(e,i){this._trapSQLerrors(e),r.call(t,e,i,i)},this)):this.request(function(e,i){this._trapSQLerrors(e),r.call(t,e,i&&vd(i),i)},this)},count:function(r,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(e,i){r.call(this,e,i&&i.count,i)},t)},ids:function(r,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(e,i){r.call(this,e,i&&i.objectIds,i)},t)},bounds:function(r,t){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(e,i){i&&i.extent&&lv(i.extent)?r.call(t,e,lv(i.extent),i):(e={message:"Invalid Bounds"},r.call(t,e,null,i))},t)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(r){var t=Wr.exports.point(r);return this.params.pixelSize=[t.x,t.y],this},layer:function(r){return this.path=r+"/query",this},_trapSQLerrors:function(r){r&&r.code==="400"&&mf("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(r){this.params.inSR=4326;var t=Yv(r);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function Kv(r){return new uw(r)}var cw=Xv.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(r,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[r,t].join(":"),this},simplify:function(r,t){var e=Math.abs(r.getBounds().getWest()-r.getBounds().getEast());return this.params.maxAllowableOffset=e/r.getSize().y*t,this},run:function(r,t){return this.request(function(e,i){r.call(t,e,i&&vd(i),i)},t)}});function fw(r){return new cw(r)}var C_=Xv.extend({path:"identify",between:function(r,t){return this.params.time=[r.valueOf(),t.valueOf()],this}}),hw=C_.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(r){var t=jv(r.getBounds()),e=r.getSize();return this.params.imageDisplay=[e.x,e.y,96],this.params.mapExtent=[t.xmin,t.ymin,t.xmax,t.ymax],this},at:function(r){return r.length===2&&(r=Wr.exports.latLng(r)),this._setGeometryParams(r),this},layerDef:function(r,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[r,t].join(":"),this},simplify:function(r,t){var e=Math.abs(r.getBounds().getWest()-r.getBounds().getEast());return this.params.maxAllowableOffset=e/r.getSize().y*t,this},run:function(r,t){return this.request(function(e,i){if(e)r.call(t,e,void 0,i);else{var o=vd(i);i.results=i.results.reverse();for(var a=0;a<o.features.length;a++){var s=o.features[a];s.layerId=i.results[a].layerId}r.call(t,void 0,o,i)}})},_setGeometryParams:function(r){var t=Yv(r);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function dw(r){return new hw(r)}var pw=C_.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(r){return r=Wr.exports.latLng(r),this.params.geometry=JSON.stringify({x:r.lng,y:r.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(r,t){return this.request(function(e,i){r.call(t,e,i&&this._responseToGeoJSON(i),i)},this)},_responseToGeoJSON:function(r){var t=r.location,e=r.catalogItems,i=r.catalogItemVisibilities,o={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},crs:{type:"EPSG",properties:{code:t.spatialReference.wkid}},properties:{OBJECTID:r.objectId,name:r.name,value:r.value},id:r.objectId}};if(r.properties&&r.properties.Values&&(o.pixel.properties.values=r.properties.Values),e&&e.features&&(o.catalogItems=vd(e),i&&i.length===o.catalogItems.features.length))for(var a=i.length-1;a>=0;a--)o.catalogItems.features[a].properties.catalogItemVisibility=i[a];return o}});function mw(r){return new pw(r)}var Jv=Wr.exports.Evented.extend({options:{proxy:!1,useCors:Gp,timeout:0},initialize:function(r){r=r||{},this._requestQueue=[],this._authenticating=!1,Wr.exports.Util.setOptions(this,r),this.options.url=Wp(this.options.url)},get:function(r,t,e,i){return this._request("get",r,t,e,i)},post:function(r,t,e,i){return this._request("post",r,t,e,i)},request:function(r,t,e,i){return this._request("request",r,t,e,i)},metadata:function(r,t){return this._request("get","",{},r,t)},authenticate:function(r){return this._authenticating=!1,this.options.token=r,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(r){this.options.timeout=r},_request:function(r,t,e,i,o){this.fire("requeststart",{url:this.options.url+t,params:e,method:r},!0);var a=this._createServiceCallback(r,t,e,i,o);if(this.options.token&&(e.token=this.options.token),this.options.requestParams&&Wr.exports.Util.extend(e,this.options.requestParams),this._authenticating)this._requestQueue.push([r,t,e,i,o]);else{var s=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(r==="get"||r==="request")&&!this.options.useCors?mp.get.JSONP(s,e,a,o):mp[r](s,e,a,o)}},_createServiceCallback:function(r,t,e,i,o){return Wr.exports.Util.bind(function(a,s){a&&(a.code===499||a.code===498)&&(this._authenticating=!0,this._requestQueue.push([r,t,e,i,o]),this.fire("authenticationrequired",{authenticate:Wr.exports.Util.bind(this.authenticate,this)},!0),a.authenticate=Wr.exports.Util.bind(this.authenticate,this)),i.call(o,a,s),a?this.fire("requesterror",{url:this.options.url+t,params:e,message:a.message,code:a.code,method:r},!0):this.fire("requestsuccess",{url:this.options.url+t,params:e,response:s,method:r},!0),this.fire("requestend",{url:this.options.url+t,params:e,method:r},!0)},this)},_runQueue:function(){for(var r=this._requestQueue.length-1;r>=0;r--){var t=this._requestQueue[r],e=t.shift();this[e].apply(this,t)}this._requestQueue=[]}}),vw=Jv.extend({identify:function(){return dw(this)},find:function(){return fw(this)},query:function(){return Kv(this)}});function D_(r){return new vw(r)}var gw=Jv.extend({query:function(){return Kv(this)},identify:function(){return mw(this)}});function yw(r){return new gw(r)}var _w=Jv.extend({options:{idAttribute:"OBJECTID"},query:function(){return Kv(this)},addFeature:function(r,t,e){this.addFeatures(r,t,e)},addFeatures:function(r,t,e){for(var i=r.features?r.features:[r],o=i.length-1;o>=0;o--)delete i[o].id;return r=fd(r),r=i.length>1?r:[r],this.post("addFeatures",{features:r},function(a,s){var n=s&&s.addResults?s.addResults.length>1?s.addResults:s.addResults[0]:void 0;t&&t.call(e,a||s.addResults[0].error,n)},e)},updateFeature:function(r,t,e){this.updateFeatures(r,t,e)},updateFeatures:function(r,t,e){var i=r.features?r.features:[r];return r=fd(r,this.options.idAttribute),r=i.length>1?r:[r],this.post("updateFeatures",{features:r},function(o,a){var s=a&&a.updateResults?a.updateResults.length>1?a.updateResults:a.updateResults[0]:void 0;t&&t.call(e,o||a.updateResults[0].error,s)},e)},deleteFeature:function(r,t,e){this.deleteFeatures(r,t,e)},deleteFeatures:function(r,t,e){return this.post("deleteFeatures",{objectIds:r},function(i,o){var a=o&&o.deleteResults?o.deleteResults.length>1?o.deleteResults:o.deleteResults[0]:void 0;t&&t.call(e,i||o.deleteResults[0].error,a)},e)}});function bw(r){return new _w(r)}var Bo=window.location.protocol!=="https:"?"http:":"https:",Mg=Wr.exports.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Bo+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Bo+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:lf?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:lf?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:lf?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:lf?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:lf?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:lf?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:lf?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Bo+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Bo+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Bo+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Bo+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(r,t){var e;if(typeof r=="object"&&r.urlTemplate&&r.options)e=r;else if(typeof r=="string"&&Mg.TILES[r])e=Mg.TILES[r];else throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');var i=Wr.exports.Util.extend(e.options,t);Wr.exports.Util.setOptions(this,i),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&e.urlTemplate.indexOf("token=")===-1&&(e.urlTemplate+="?token="+this.options.token),this.options.proxy&&(e.urlTemplate=this.options.proxy+"?"+e.urlTemplate),Wr.exports.TileLayer.prototype.initialize.call(this,e.urlTemplate,i)},onAdd:function(r){yd(r),this.options.pane==="esri-labels"&&this._initPane(),this.options.attributionUrl&&E_((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,r),r.on("moveend",gp),Wr.exports.TileLayer.prototype.onAdd.call(this,r)},onRemove:function(r){jp(r),r.off("moveend",gp),Wr.exports.TileLayer.prototype.onRemove.call(this,r)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var r=this._map.createPane(this.options.pane);r.style.pointerEvents="none",r.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var r='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return r}}),xw=Wr.exports.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(r){r=Wr.exports.Util.setOptions(this,r),r=gd(r),this.tileUrl=(r.proxy?r.proxy+"?":"")+r.url+"tile/{z}/{y}/{x}"+(r.requestParams&&Object.keys(r.requestParams).length>0?Wr.exports.Util.getParamString(r.requestParams):""),r.url.indexOf("{s}")!==-1&&r.subdomains&&(r.url=r.url.replace("{s}",r.subdomains[0])),this.service=D_(r),this.service.addEventParent(this);var t=new RegExp(/tiles.arcgis(online)?\.com/g);t.test(r.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),r.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),Wr.exports.TileLayer.prototype.initialize.call(this,this.tileUrl,r)},getTileUrl:function(r){var t=this._getZoomForUrl();return Wr.exports.Util.template(this.tileUrl,Wr.exports.Util.extend({s:this._getSubdomain(r),x:r.x,y:r.y,z:this._lodMap&&this._lodMap[t]?this._lodMap[t]:t},this.options))},createTile:function(r,t){var e=document.createElement("img");return Wr.exports.DomEvent.on(e,"load",Wr.exports.Util.bind(this._tileOnLoad,this,t,e)),Wr.exports.DomEvent.on(e,"error",Wr.exports.Util.bind(this._tileOnError,this,t,e)),this.options.crossOrigin&&(e.crossOrigin=""),e.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?e.src=this.getTileUrl(r):this.once("lodmap",function(){e.src=this.getTileUrl(r)},this),e},onAdd:function(r){yd(r),this._lodMap||this.metadata(function(t,e){if(!t&&e.spatialReference){var i=e.spatialReference.latestWkid||e.spatialReference.wkid;if(!this.options.attribution&&r.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,r.attributionControl.addAttribution(this.getAttribution())),r.options.crs===Wr.exports.CRS.EPSG3857&&(i===102100||i===3857)){this._lodMap={};for(var o=e.tileInfo.lods,a=xw.MercatorZoomLevels,s=0;s<o.length;s++){var n=o[s];for(var l in a){var u=a[l];if(this._withinPercentage(n.resolution,u,this.options.zoomOffsetAllowance)){this._lodMap[l]=n.level;break}}}this.fire("lodmap")}else r.options.crs&&r.options.crs.code&&r.options.crs.code.indexOf(i)>-1||mf("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/")}},this),Wr.exports.TileLayer.prototype.onAdd.call(this,r)},onRemove:function(r){jp(r),Wr.exports.TileLayer.prototype.onRemove.call(this,r)},metadata:function(r,t){return this.service.metadata(r,t),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(r){var t="?token="+r;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,t):this.tileUrl+t,this.options.token=r,this.service.authenticate(r),this},_withinPercentage:function(r,t,e){var i=Math.abs(r/t-1);return i<e}}),ww=Wr.exports.ImageOverlay.extend({onAdd:function(r){this._topLeft=r.getPixelBounds().min,Wr.exports.ImageOverlay.prototype.onAdd.call(this,r)},_reset:function(){this._map.options.crs===Wr.exports.CRS.EPSG3857?Wr.exports.ImageOverlay.prototype._reset.call(this):Wr.exports.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),M_=Wr.exports.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:Gp,attribution:null,interactive:!1,alt:""},onAdd:function(r){yd(r),this.options.zIndex&&(this.options.position=null),this._update=Wr.exports.Util.throttle(this._update,this.options.updateInterval,this),r.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?r.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,e){!t&&!this.options.attribution&&r.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,r.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(r){jp(r),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(r,t){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=Wr.exports.popup(t),this._popupFunction=r,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(r){return this.options.zIndex=r,this._currentImage&&this._currentImage.setZIndex(r),this},_setAutoZIndex:function(r){if(!!this._currentImage){for(var t=this._currentImage.getPane().children,e=-r(-1/0,1/0),i=0,o=t.length,a;i<o;i++)a=t[i].style.zIndex,t[i]!==this._currentImage._image&&a&&(e=r(e,+a));isFinite(e)&&(this.options.zIndex=e+r(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(r){return this.options.opacity=r,this._currentImage&&this._currentImage.setOpacity(r),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(r,t){return this.options.from=r,this.options.to=t,this._update(),this},metadata:function(r,t){return this.service.metadata(r,t),this},authenticate:function(r){return this.service.authenticate(r),this},redraw:function(){this._update()},_renderImage:function(r,t,e){if(this._map){if(e&&(r="data:"+e+";base64,"+r),!r)return;var i=new ww(r,t,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),o=function(){this._map.removeLayer(i),this.fire("error"),i.off("load",a,this)},a=function(s){if(i.off("error",o,this),this._map){var n=s.target,l=this._currentImage;n._bounds.equals(t)&&n._bounds.equals(this._map.getBounds())?(this._currentImage=n,this.options.position==="front"?this.bringToFront():this.options.position==="back"&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),l&&this._map&&this._map.removeLayer(l),l&&l._map&&l._map.removeLayer(l)):this._map.removeLayer(n)}this.fire("load",{bounds:t})};i.once("error",o,this),i.once("load",a,this)}},_update:function(){if(!!this._map){var r=this._map.getZoom(),t=this._map.getBounds();if(!this._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress)){if(r>this.options.maxZoom||r<this.options.minZoom){this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);return}var e=this._buildExportParams();Wr.exports.Util.extend(e,this.options.requestParams),e?(this._requestExport(e,t),this.fire("loading",{bounds:t})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(r,t,e,i){if(r=Wr.exports.latLng(r),this._shouldRenderPopup&&this._lastClick.equals(r)){var o=this._popupFunction(t,e,i);o&&this._popup.setLatLng(r).setContent(o).openOn(this._map)}},_resetPopupState:function(r){this._shouldRenderPopup=!1,this._lastClick=r.latlng},_calculateBbox:function(){var r=this._map.getPixelBounds(),t=this._map.unproject(r.getBottomLeft()),e=this._map.unproject(r.getTopRight()),i=this._map.options.crs.project(e),o=this._map.options.crs.project(t),a=Wr.exports.bounds(i,o);return[a.getBottomLeft().x,a.getBottomLeft().y,a.getTopRight().x,a.getTopRight().y].join(",")},_calculateImageSize:function(){var r=this._map.getPixelBounds(),t=this._map.getSize(),e=this._map.unproject(r.getBottomLeft()),i=this._map.unproject(r.getTopRight()),o=this._map.latLngToLayerPoint(i).y,a=this._map.latLngToLayerPoint(e).y;return(o>0||a<t.y)&&(t.y=a-o),t.x+","+t.y}});M_.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(r){r=gd(r),this.service=yw(r),this.service.addEventParent(this),Wr.exports.Util.setOptions(this,r)},setPixelType:function(r){return this.options.pixelType=r,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(r){return Wr.exports.Util.isArray(r)?this.options.bandIds=r.join(","):this.options.bandIds=r.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(r,t){return Wr.exports.Util.isArray(r)?this.options.noData=r.join(","):this.options.noData=r.toString(),t&&(this.options.noDataInterpretation=t),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(r){this.options.renderingRule=r,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(r){this.options.mosaicRule=r,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(r){var t=Wr.exports.Util.bind(function(i,o,a){i||setTimeout(Wr.exports.Util.bind(function(){this._renderPopup(r.latlng,i,o,a)},this),300)},this),e=this.identify().at(r.latlng);this.options.mosaicRule&&e.setMosaicRule(this.options.mosaicRule),e.run(t),this._shouldRenderPopup=!0,this._lastClick=r.latlng},_buildExportParams:function(){var r=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:r,imageSR:r};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),(this.options.noData===0||this.options.noData)&&(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(r,t){if(this.options.f==="json")this.service.request("exportImage",r,function(i,o){i||(this.options.token&&(o.href+="?token="+this.options.token),this.options.proxy&&(o.href=this.options.proxy+"?"+o.href),this._renderImage(o.href,t))},this);else{r.f="image";var e=this.options.url+"exportImage"+Wr.exports.Util.getParamString(r);this.options.proxy&&(e=this.options.proxy+"?"+e),this._renderImage(e,t)}}});M_.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(r){r=gd(r),this.service=D_(r),this.service.addEventParent(this),Wr.exports.Util.setOptions(this,r)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(r){return this.options.dynamicLayers=r,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(r){return this.options.layers=r,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(r){return this.options.layerDefs=r,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(r){return this.options.timeOptions=r,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(r){var t=Wr.exports.Util.bind(function(o,a,s){o||setTimeout(Wr.exports.Util.bind(function(){this._renderPopup(r.latlng,o,a,s)},this),300)},this),e;if(this.options.popup?e=this.options.popup.on(this._map).at(r.latlng):e=this.identify().on(this._map).at(r.latlng),e.params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&typeof this.options.layerDefs!="string"&&!e.params.layerDefs)for(var i in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,i)&&e.layerDef(i,this.options.layerDefs[i]);e.run(t),this._shouldRenderPopup=!0,this._lastClick=r.latlng},_buildExportParams:function(){var r=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:r,imageSR:r};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(this.options.layers.length===0)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs=typeof this.options.layerDefs=="string"?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(r,t){if(this.options.f==="json")this.service.request("export",r,function(i,o){i||(this.options.token&&o.href&&(o.href+="?token="+this.options.token),this.options.proxy&&o.href&&(o.href=this.options.proxy+"?"+o.href),o.href?this._renderImage(o.href,t):this._renderImage(o.imageData,t,o.contentType))},this);else{r.f="image";var e=this.options.url+"export"+Wr.exports.Util.getParamString(r);this.options.proxy&&(e=this.options.proxy+"?"+e),this._renderImage(e,t)}}});var Nd=Wr.exports.Layer.extend({options:{cellSize:512,updateWhenIdle:Wr.exports.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(r){Wr.exports.Util.setOptions(this,r)},onAdd:function(r){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(r){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Wr.exports.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),r},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var r=this.options.cellSize;return r instanceof Wr.exports.Point?r:new Wr.exports.Point(r,r)},_pruneCells:function(){if(!!this._map){var r,t;for(r in this._cells)t=this._cells[r],t.retain=t.current;for(r in this._cells)if(t=this._cells[r],t.current&&!t.active){var e=t.coords;this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2)}for(r in this._cells)this._cells[r].retain||this._removeCell(r)}},_removeAllCells:function(){for(var r in this._cells)this._removeCell(r)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(r,t,e,i){var o=Math.floor(r/2),a=Math.floor(t/2),s=e-1,n=new Wr.exports.Point(+o,+a);n.z=+s;var l=this._cellCoordsToKey(n),u=this._cells[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),s>i?this._retainParent(o,a,s,i):!1)},_retainChildren:function(r,t,e,i){for(var o=2*r;o<2*r+2;o++)for(var a=2*t;a<2*t+2;a++){var s=new Wr.exports.Point(o,a);s.z=e+1;var n=this._cellCoordsToKey(s),l=this._cells[n];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);e+1<i&&this._retainChildren(o,a,e+1,i)}},_resetView:function(r){var t=r&&(r.pinch||r.flyTo);t||this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_setView:function(r,t,e,i){var o=Math.round(t);i||(this._cellZoom=o,this._abortLoading&&this._abortLoading(),this._resetGrid(),o!==void 0&&this._update(r),e||this._pruneCells(),this._noPrune=!!e)},_resetGrid:function(){var r=this._map,t=r.options.crs,e=this._cellSize=this.getCellSize(),i=this._cellZoom,o=this._map.getPixelWorldBounds(this._cellZoom);o&&(this._globalCellRange=this._pxBoundsToCellRange(o)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,t.wrapLng[0]],i).x/e.x),Math.ceil(r.project([0,t.wrapLng[1]],i).x/e.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([t.wrapLat[0],0],i).y/e.x),Math.ceil(r.project([t.wrapLat[1],0],i).y/e.y)]},_onMoveEnd:function(r){var t=r&&(r.pinch||r.flyTo);t||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(r){var t=this._map,e=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(e,this._cellZoom),o=t.project(r,this._cellZoom).floor(),a=t.getSize().divideBy(i*2);return new Wr.exports.Bounds(o.subtract(a),o.add(a))},_update:function(r){var t=this._map;if(!!t){var e=Math.round(t.getZoom());r===void 0&&(r=t.getCenter());var i=this._getCelldPixelBounds(r),o=this._pxBoundsToCellRange(i),a=o.getCenter(),s=[],n=this.options.keepBuffer,l=new Wr.exports.Bounds(o.getBottomLeft().subtract([n,-n]),o.getTopRight().add([n,-n]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var u in this._cells){var h=this._cells[u].coords;(h.z!==this._cellZoom||!l.contains(new Wr.exports.Point(h.x,h.y)))&&(this._cells[u].current=!1)}if(Math.abs(e-this._cellZoom)>1){this._setView(r,e);return}for(var v=o.min.y;v<=o.max.y;v++)for(var d=o.min.x;d<=o.max.x;d++){var p=new Wr.exports.Point(d,v);if(p.z=this._cellZoom,!!this._isValidCell(p)){var _=this._cells[this._cellCoordsToKey(p)];_?_.current=!0:s.push(p)}}if(s.sort(function(E,A){return E.distanceTo(a)-A.distanceTo(a)}),s.length!==0)for(this._loading||(this._loading=!0),d=0;d<s.length;d++){var b=this._cellCoordsToKey(s[d]),x=this._keyToCellCoords(b);this._activeCells[x]?this._reuseCell(s[d]):this._createCell(s[d])}}},_isValidCell:function(r){var t=this._map.options.crs;if(!t.infinite){var e=this._globalCellRange;if(!t.wrapLng&&(r.x<e.min.x||r.x>e.max.x)||!t.wrapLat&&(r.y<e.min.y||r.y>e.max.y))return!1}if(!this.options.bounds)return!0;var i=this._cellCoordsToBounds(r);return Wr.exports.toLatLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(r){return this._cellCoordsToBounds(this._keyToCellCoords(r))},_cellCoordsToNwSe:function(r){var t=this._map,e=this.getCellSize(),i=r.scaleBy(e),o=i.add(e),a=t.unproject(i,r.z),s=t.unproject(o,r.z);return[a,s]},_cellCoordsToBounds:function(r){var t=this._cellCoordsToNwSe(r),e=new Wr.exports.LatLngBounds(t[0],t[1]);return this.options.noWrap||(e=this._map.wrapLatLngBounds(e)),e},_cellCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToCellCoords:function(r){var t=r.split(":"),e=new Wr.exports.Point(+t[0],+t[1]);return e.z=+t[2],e},_removeCell:function(r){var t=this._cells[r];if(!!t){var e=this._keyToCellCoords(r),i=this._wrapCoords(e),o=this._cellCoordsToBounds(this._wrapCoords(e));t.current=!1,delete this._cells[r],this._activeCells[r]=t,this.cellLeave(o,i,r),this.fire("cellleave",{key:r,coords:i,bounds:o})}},_reuseCell:function(r){var t=this._cellCoordsToKey(r);this._cells[t]=this._activeCells[t],this._cells[t].current=!0;var e=this._wrapCoords(r),i=this._cellCoordsToBounds(this._wrapCoords(r));this.cellEnter(i,e,t),this.fire("cellenter",{key:t,coords:e,bounds:i})},_createCell:function(r){var t=this._cellCoordsToKey(r),e=this._wrapCoords(r),i=this._cellCoordsToBounds(this._wrapCoords(r));this.createCell(i,e,t),this.fire("cellcreate",{key:t,coords:e,bounds:i}),this._cells[t]={coords:r,current:!0},Wr.exports.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(r,t,e){var i=this._cellCoordsToKey(r);e=this._cells[i],e&&(e.loaded=+new Date,e.active=!0)},_getCellPos:function(r){return r.scaleBy(this.getCellSize())},_wrapCoords:function(r){var t=new Wr.exports.Point(this._wrapX?Wr.exports.Util.wrapNum(r.x,this._wrapX):r.x,this._wrapY?Wr.exports.Util.wrapNum(r.y,this._wrapY):r.y);return t.z=r.z,t},_pxBoundsToCellRange:function(r){var t=this.getCellSize();return new Wr.exports.Bounds(r.min.unscaleBy(t).floor(),r.max.unscaleBy(t).ceil().subtract([1,1]))}});function Bc(r){this.values=[].concat(r||[])}Bc.prototype.query=function(r){var t=this.getIndex(r);return this.values[t]};Bc.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e=0,i=this.values.length-1,o,a;e<=i;)if(o=(e+i)/2|0,a=this.values[Math.round(o)],+a.value<+t)e=o+1;else if(+a.value>+t)i=o-1;else return o;return Math.abs(~i)};Bc.prototype.between=function(t,e){var i=this.getIndex(t),o=this.getIndex(e);if(i===0&&o===0)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[o+1]&&this.values[o+1].value===e;)o++;return this.values[o]&&this.values[o].value===e&&this.values[o+1]&&o++,this.values.slice(i,o)};Bc.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this};Bc.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this};Bc.prototype.sort=function(){return this.values.sort(function(t,e){return+e.value-+t.value}).reverse(),this.dirty=!1,this};var Fm=Nd.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(r){if(Nd.prototype.initialize.call(this,r),r=gd(r),r=Wr.exports.Util.setOptions(this,r),this.service=bw(r),this.service.addEventParent(this),this.options.fields[0]!=="*"){for(var t=!1,e=0;e<this.options.fields.length;e++)this.options.fields[e].match(/^(OBJECTID|FID|OID|ID)$/i)&&(t=!0);t===!1&&mf("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Bc,this._endTimeIndex=new Bc):this.options.timeField&&(this._timeIndex=new Bc),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(r){return yd(r),this.service.metadata(function(t,e){if(!t){var i=e.supportedQueryFormats,o=!1;(this.service.options.isModern===!1||this.options.fetchAllFeatures)&&(o=!0),!o&&i&&i.indexOf("geoJSON")!==-1&&(this.service.options.isModern=!0),e.objectIdField&&(this.service.options.idAttribute=e.objectIdField),!this.options.attribution&&r.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,r.attributionControl.addAttribution(this.getAttribution()))}},this),r.on("zoomend",this._handleZoomChange,this),Nd.prototype.onAdd.call(this,r)},onRemove:function(r){return jp(r),r.off("zoomend",this._handleZoomChange,this),Nd.prototype.onRemove.call(this,r)},getAttribution:function(){return this.options.attribution},createCell:function(r,t){this._visibleZoom()&&this._requestFeatures(r,t)},_requestFeatures:function(r,t,e,i){this._activeRequests++,i=i||0;var o=this.options.where;return this._activeRequests===1&&this.fire("loading",{bounds:r},!0),this._buildQuery(r,i).run(function(a,s,n){n&&n.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===o&&(!a&&s&&s.features.length&&Wr.exports.Util.requestAnimFrame(Wr.exports.Util.bind(function(){this._addFeatures(s.features,t),this._postProcessFeatures(r)},this)),!a&&s&&!s.features.length&&this._postProcessFeatures(r),a&&this._postProcessFeatures(r),e&&e.call(this,a,s),n&&(n.exceededTransferLimit||n.properties&&n.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(r,t,e,i+s.features.length))},this)},_postProcessFeatures:function(r){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:r})},_cacheKey:function(r){return r.z+":"+r.x+":"+r.y},_addFeatures:function(r,t){if(t){var e=this._cacheKey(t);this._cache[e]=this._cache[e]||[]}for(var i=r.length-1;i>=0;i--){var o=r[i].id;this._currentSnapshot.indexOf(o)===-1&&this._currentSnapshot.push(o),typeof e<"u"&&this._cache[e].indexOf(o)===-1&&this._cache[e].push(o)}this.options.timeField&&this._buildTimeIndexes(r),this.createLayers(r)},_buildQuery:function(r,t){var e=this.service.query().intersects(r).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(t))&&(e=e.offset(t)),e.params.resultType="tile",this.options.requestParams&&Wr.exports.Util.extend(e.params,this.options.requestParams),this.options.simplifyFactor&&e.simplify(this._map,this.options.simplifyFactor),this.options.timeFilterMode==="server"&&this.options.from&&this.options.to&&e.between(this.options.from,this.options.to),e},setWhere:function(r,t,e){this.options.where=r&&r.length?r:"1=1";for(var i=[],o=[],a=0,s=null,n=Wr.exports.Util.bind(function(d,p){if(d&&(s=d),p)for(var _=p.features.length-1;_>=0;_--)o.push(p.features[_].id);a--,a<=0&&this._visibleZoom()&&r===this.options.where&&(this._currentSnapshot=o,Wr.exports.Util.requestAnimFrame(Wr.exports.Util.bind(function(){this.removeLayers(i),this.addLayers(o),t&&t.call(e,s)},this)))},this),l=this._currentSnapshot.length-1;l>=0;l--)i.push(this._currentSnapshot[l]);this._cache={};for(var u in this._cells){a++;var h=this._keyToCellCoords(u),v=this._cellCoordsToBounds(h);this._requestFeatures(v,h,n)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(r,t,e,i){var o=this.options.from,a=this.options.to,s=0,n=null,l=Wr.exports.Util.bind(function(d){d&&(n=d),this._filterExistingFeatures(o,a,r,t),s--,e&&s<=0&&e.call(i,n)},this);if(this.options.from=r,this.options.to=t,this._filterExistingFeatures(o,a,r,t),this.options.timeFilterMode==="server")for(var u in this._cells){s++;var h=this._keyToCellCoords(u),v=this._cellCoordsToBounds(h);this._requestFeatures(v,h,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(r,t,e,i){var o=r&&t?this._getFeaturesInTimeRange(r,t):this._currentSnapshot,a=this._getFeaturesInTimeRange(e,i);if(a.indexOf)for(var s=0;s<a.length;s++){var n=o.indexOf(a[s]);n>=0&&o.splice(n,1)}Wr.exports.Util.requestAnimFrame(Wr.exports.Util.bind(function(){this.removeLayers(o),this.addLayers(a)},this))},_getFeaturesInTimeRange:function(r,t){var e=[],i;if(this.options.timeField.start&&this.options.timeField.end){var o=this._startTimeIndex.between(r,t),a=this._endTimeIndex.between(r,t);i=o.concat(a)}else if(this._timeIndex)i=this._timeIndex.between(r,t);else return mf("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];for(var s=i.length-1;s>=0;s--)e.push(i[s].id);return e},_buildTimeIndexes:function(r){var t,e;if(this.options.timeField.start&&this.options.timeField.end){var i=[],o=[];for(t=r.length-1;t>=0;t--)e=r[t],i.push({id:e.id,value:new Date(e.properties[this.options.timeField.start])}),o.push({id:e.id,value:new Date(e.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(o)}else{var a=[];for(t=r.length-1;t>=0;t--)e=r[t],a.push({id:e.id,value:new Date(e.properties[this.options.timeField])});this._timeIndex.bulkAdd(a)}},_featureWithinTimeRange:function(r){if(!this.options.from||!this.options.to)return!0;var t=+this.options.from.valueOf(),e=+this.options.to.valueOf();if(typeof this.options.timeField=="string"){var i=+r.properties[this.options.timeField];return i>=t&&i<=e}if(this.options.timeField.start&&this.options.timeField.end){var o=+r.properties[this.options.timeField.start],a=+r.properties[this.options.timeField.end];return o>=t&&o<=e||a>=t&&a<=e||o<=t&&a>=e}},_visibleZoom:function(){if(!this._map)return!1;var r=this._map.getZoom();return!(r>this.options.maxZoom||r<this.options.minZoom)},_handleZoomChange:function(){if(!this._visibleZoom())this.removeLayers(this._currentSnapshot),this._currentSnapshot=[];else for(var r in this._cells){var t=this._cells[r].coords,e=this._cacheKey(t);this._cache[e]&&this.addLayers(this._cache[e])}},authenticate:function(r){return this.service.authenticate(r),this},metadata:function(r,t){return this.service.metadata(r,t),this},query:function(){return this.service.query()},_getMetadata:function(r){if(this._metadata){var t;r(t,this._metadata)}else this.metadata(Wr.exports.Util.bind(function(e,i){this._metadata=i,r(e,this._metadata)},this))},addFeature:function(r,t,e){this.addFeatures(r,t,e)},addFeatures:function(r,t,e){this._getMetadata(Wr.exports.Util.bind(function(i,o){if(i){t&&t.call(this,i,null);return}var a=r.features?r.features:[r];this.service.addFeatures(r,Wr.exports.Util.bind(function(s,n){if(!s){for(var l=a.length-1;l>=0;l--)a[l].properties[o.objectIdField]=a.length>1?n[l].objectId:n.objectId,a[l].id=a.length>1?n[l].objectId:n.objectId;this._addFeatures(a)}t&&t.call(e,s,n)},this))},this))},updateFeature:function(r,t,e){this.updateFeatures(r,t,e)},updateFeatures:function(r,t,e){var i=r.features?r.features:[r];this.service.updateFeatures(r,function(o,a){if(!o){for(var s=i.length-1;s>=0;s--)this.removeLayers([i[s].id],!0);this._addFeatures(i)}t&&t.call(e,o,a)},this)},deleteFeature:function(r,t,e){this.deleteFeatures(r,t,e)},deleteFeatures:function(r,t,e){return this.service.deleteFeatures(r,function(i,o){var a=o.length?o:[o];if(!i&&a.length>0)for(var s=a.length-1;s>=0;s--)this.removeLayers([a[s].objectId],!0);t&&t.call(e,i,o)},this)}});Fm.extend({options:{cacheLayers:!0},initialize:function(r){r.apikey&&(r.token=r.apikey),Fm.prototype.initialize.call(this,r),this._originalStyle=this.options.style,this._layers={}},onRemove:function(r){for(var t in this._layers)r.removeLayer(this._layers[t]),this.fire("removefeature",{feature:this._layers[t].feature,permanent:!1},!0);return Fm.prototype.onRemove.call(this,r)},createNewLayer:function(r){var t=Wr.exports.GeoJSON.geometryToLayer(r,this.options);return t&&(t.defaultOptions=t.options),t},_updateLayer:function(r,t){var e=[],i=this.options.coordsToLatLng||Wr.exports.GeoJSON.coordsToLatLng;switch(t.properties&&(r.feature.properties=t.properties),t.geometry.type){case"Point":e=Wr.exports.GeoJSON.coordsToLatLng(t.geometry.coordinates),r.setLatLng(e);break;case"LineString":e=Wr.exports.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0,i),r.setLatLngs(e);break;case"MultiLineString":e=Wr.exports.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),r.setLatLngs(e);break;case"Polygon":e=Wr.exports.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),r.setLatLngs(e);break;case"MultiPolygon":e=Wr.exports.GeoJSON.coordsToLatLngs(t.geometry.coordinates,2,i),r.setLatLngs(e);break}this.redraw(r.feature.id)},createLayers:function(r){for(var t=r.length-1;t>=0;t--){var e=r[t],i=this._layers[e.id],o;this._visibleZoom()&&i&&!this._map.hasLayer(i)&&(!this.options.timeField||this._featureWithinTimeRange(e))&&(this._map.addLayer(i),this.fire("addfeature",{feature:i.feature},!0)),i&&(i.setLatLngs||i.setLatLng)&&this._updateLayer(i,e),i||(o=this.createNewLayer(e),o?(o.feature=e,o.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(o.feature,o),this._layers[o.feature.id]=o,this.setFeatureStyle(o.feature.id,this.options.style),this.fire("createfeature",{feature:o.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(e))&&this._map.addLayer(o)):mf("invalid GeoJSON encountered"))}},addLayers:function(r){for(var t=r.length-1;t>=0;t--){var e=this._layers[r[t]];e&&(!this.options.timeField||this._featureWithinTimeRange(e.feature))&&(this._map.addLayer(e),this.fire("addfeature",{feature:e.feature},!0))}},removeLayers:function(r,t){for(var e=r.length-1;e>=0;e--){var i=r[e],o=this._layers[i];o&&(this.fire("removefeature",{feature:o.feature,permanent:t},!0),this._map.removeLayer(o)),o&&t&&delete this._layers[i]}},cellEnter:function(r,t){this._visibleZoom()&&!this._zooming&&this._map&&Wr.exports.Util.requestAnimFrame(Wr.exports.Util.bind(function(){var e=this._cacheKey(t),i=this._cellCoordsToKey(t),o=this._cache[e];this._activeCells[i]&&o&&this.addLayers(o)},this))},cellLeave:function(r,t){this._zooming||Wr.exports.Util.requestAnimFrame(Wr.exports.Util.bind(function(){if(this._map){var e=this._cacheKey(t),i=this._cellCoordsToKey(t),o=this._cache[e],a=this._map.getBounds();if(!this._activeCells[i]&&o){for(var s=!0,n=0;n<o.length;n++){var l=this._layers[o[n]];l&&l.getBounds&&a.intersects(l.getBounds())&&(s=!1)}s&&this.removeLayers(o,!this.options.cacheLayers),!this.options.cacheLayers&&s&&(delete this._cache[e],delete this._cells[i],delete this._activeCells[i])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(r){this.resetFeatureStyle(r.feature.id)},this),this},setStyle:function(r){return this.options.style=r,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,r)},this),this},resetFeatureStyle:function(r){var t=this._layers[r],e=this._originalStyle||Wr.exports.Path.prototype.options;return t&&(Wr.exports.Util.extend(t.options,t.defaultOptions),this.setFeatureStyle(r,e)),this},setFeatureStyle:function(r,t){var e=this._layers[r];return typeof t=="function"&&(t=t(e.feature)),e.setStyle&&e.setStyle(t),this},eachActiveFeature:function(r,t){if(this._map){var e=this._map.getBounds();for(var i in this._layers)this._currentSnapshot.indexOf(this._layers[i].feature.id)!==-1&&(typeof this._layers[i].getLatLng=="function"&&e.contains(this._layers[i].getLatLng())?r.call(t,this._layers[i]):typeof this._layers[i].getBounds=="function"&&e.intersects(this._layers[i].getBounds())&&r.call(t,this._layers[i]))}return this},eachFeature:function(r,t){for(var e in this._layers)r.call(t,this._layers[e]);return this},getFeature:function(r){return this._layers[r]},bringToBack:function(){this.eachFeature(function(r){r.bringToBack&&r.bringToBack()})},bringToFront:function(){this.eachFeature(function(r){r.bringToFront&&r.bringToFront()})},redraw:function(r){return r&&this._redraw(r),this},_redraw:function(r){var t=this._layers[r],e=t.feature;if(t&&t.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var i=this.options.pointToLayer(e,Wr.exports.latLng(e.geometry.coordinates[1],e.geometry.coordinates[0])),o=i.options.icon;t.setIcon(o)}if(t&&t.setStyle&&this.options.pointToLayer){var a=this.options.pointToLayer(e,Wr.exports.latLng(e.geometry.coordinates[1],e.geometry.coordinates[0])),s=a.options;this.setFeatureStyle(e.id,s)}t&&t.setStyle&&this.options.style&&this.resetStyle(e.id)}});function Tw(r,t){var e="https://basemaps-api.arcgis.com/arcgis/rest/services/styles/"+r+"?type=style";return t&&(e=e+"&apiKey="+t),e}function Aw(r,t,e){var i=/^https?:\/\//,o=/\/VectorTileServer\/?$/;if(i.test(r)&&o.test(r)){var a=r;I_(a,t,e)}else{var s=r;Sw(s,t,e)}}function k_(r,t,e){var i=t.token?{token:t.token}:{};Sh(r,i,e)}function kg(r,t,e){var i=t.token?{token:t.token}:{},o=t.portalUrl+"/sharing/rest/content/items/"+r;Sh(o,i,e)}function Sw(r,t,e){var i=t.portalUrl+"/sharing/rest/content/items/"+r+"/resources/styles/root.json";L_(i,t,function(o,a){o?kg(r,t,function(s,n){s&&console.error(s),I_(n.url,t,e)}):kg(r,t,function(s,n){s&&console.error(s),k_(n.url,t,function(l,u){e(l,a,i,u,n.url)})})})}function I_(r,t,e){k_(r,t,function(i,o){i&&console.error(i);var a=r;r.charAt(r.length-1)==="/"&&(a=r.slice(0,r.length-1));var s;o.defaultStyles.charAt(0)==="/"?s=a+o.defaultStyles+"/root.json":s=a+"/"+o.defaultStyles+"/root.json",L_(s,t,function(n,l){n&&console.error(n),e(null,l,s,o,r)})})}function L_(r,t,e){var i=t.token?{token:t.token}:{};Sh(r,i,e)}function Ew(r,t,e,i){for(var o=Object.keys(r.sources),a=0;a<o.length;a++){var s=r.sources[o[a]];s.url.indexOf("http")===-1&&(s.url=t.replace("/resources/styles/root.json","")),s.url.charAt(s.url.length-1)==="/"&&(s.url=s.url.slice(0,s.url.length-1)),s.tiles||(e.tiles&&e.tiles[0].charAt(0)!=="/"&&(e.tiles[0]="/"+e.tiles[0]),s.tiles=[s.url+e.tiles[0]]),s.url+="?f=json",s.url+=i?"&token="+i:"",s.tiles[0]+=i?"?token="+i:"",s.minzoom=e.tileInfo.lods[0].level,s.maxzoom=e.tileInfo.lods[e.tileInfo.lods.length-1].level}var n=r.sources[o[o.length-1]];n.attribution=e.copyrightText||"",n.copyrightText=e.copyrightText||"";for(var l=0;l<r.layers.length;l++){var u=r.layers[l];u.layout&&u.layout["text-font"]&&u.layout["text-font"].length>1&&(u.layout["text-font"]=[u.layout["text-font"][0]])}return r.sprite&&r.sprite.indexOf("http")===-1&&(r.sprite=t.replace("styles/root.json",r.sprite.replace("../","")),r.sprite+=i?"?token="+i:""),r.glyphs&&r.glyphs.indexOf("http")===-1&&(r.glyphs=t.replace("styles/root.json",r.glyphs.replace("../","")),r.glyphs+=i?"?token="+i:""),r}function Cw(r,t){ff.cors&&Sh(r,{},function(e,i){if(!e){t._esriAttributions=t._esriAttributions||[];for(var o=0;o<i.contributors.length;o++)for(var a=i.contributors[o],s=0;s<a.coverageAreas.length;s++){var n=a.coverageAreas[s],l=Wr.exports.latLng(n.bbox[0],n.bbox[1]),u=Wr.exports.latLng(n.bbox[2],n.bbox[3]);t._esriAttributions.push({attribution:a.attribution,score:n.score,bounds:Wr.exports.latLngBounds(l,u),minZoom:n.zoomMin,maxZoom:n.zoomMax})}t._esriAttributions.sort(function(v,d){return d.score-v.score});var h={target:t};ed._updateMapAttribution(h)}})}const Dw=[3857,102100,102113];function Mw(r){return Dw.indexOf(r)>=0}var P_={exports:{}};(function(r,t){(function(e,i){r.exports=i()})(tc,function(){var e,i,o;function a(n,l){if(!e)e=l;else if(!i)i=l;else{var u="var sharedChunk = {}; ("+e+")(sharedChunk); ("+i+")(sharedChunk);",h={};e(h),o=l(h),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([u],{type:"text/javascript"})))}}a(["exports"],function(n){var l=u;function u(m,c,g,k){this.cx=3*m,this.bx=3*(g-m)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(k-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=m,this.p1y=c,this.p2x=g,this.p2y=k}function h(m,c,g,k){const Z=new l(m,c,g,k);return function(Q){return Z.solve(Q)}}u.prototype={sampleCurveX:function(m){return((this.ax*m+this.bx)*m+this.cx)*m},sampleCurveY:function(m){return((this.ay*m+this.by)*m+this.cy)*m},sampleCurveDerivativeX:function(m){return(3*this.ax*m+2*this.bx)*m+this.cx},solveCurveX:function(m,c){if(c===void 0&&(c=1e-6),m<0)return 0;if(m>1)return 1;for(var g=m,k=0;k<8;k++){var Z=this.sampleCurveX(g)-m;if(Math.abs(Z)<c)return g;var Q=this.sampleCurveDerivativeX(g);if(Math.abs(Q)<1e-6)break;g-=Z/Q}var ue=0,Se=1;for(g=m,k=0;k<20&&(Z=this.sampleCurveX(g),!(Math.abs(Z-m)<c));k++)m>Z?ue=g:Se=g,g=.5*(Se-ue)+ue;return g},solve:function(m,c){return this.sampleCurveY(this.solveCurveX(m,c))}};const v=h(.25,.1,.25,1);function d(m,c,g){return Math.min(g,Math.max(c,m))}function p(m,c,g){const k=g-c,Z=((m-c)%k+k)%k+c;return Z===c?g:Z}function _(m,...c){for(const g of c)for(const k in g)m[k]=g[k];return m}let b=1;function x(m,c){m.forEach(g=>{c[g]&&(c[g]=c[g].bind(c))})}function E(m,c,g){const k={};for(const Z in m)k[Z]=c.call(g||this,m[Z],Z,m);return k}function A(m,c,g){const k={};for(const Z in m)c.call(g||this,m[Z],Z,m)&&(k[Z]=m[Z]);return k}function P(m){return Array.isArray(m)?m.map(P):typeof m=="object"&&m?E(m,P):m}const D={};function R(m){D[m]||(typeof console<"u"&&console.warn(m),D[m]=!0)}function S(m,c,g){return(g.y-m.y)*(c.x-m.x)>(c.y-m.y)*(g.x-m.x)}function I(m){let c=0;for(let g,k,Z=0,Q=m.length,ue=Q-1;Z<Q;ue=Z++)g=m[Z],k=m[ue],c+=(k.x-g.x)*(g.y+k.y);return c}function T(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function M(m){const c={};if(m.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(g,k,Z,Q)=>{const ue=Z||Q;return c[k]=!ue||ue.toLowerCase(),""}),c["max-age"]){const g=parseInt(c["max-age"],10);isNaN(g)?delete c["max-age"]:c["max-age"]=g}return c}let z,U,F=null;function V(m){if(F==null){const c=m.navigator?m.navigator.userAgent:null;F=!!m.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return F}function j(m){return typeof ImageBitmap<"u"&&m instanceof ImageBitmap}const H={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(m){const c=requestAnimationFrame(m);return{cancel:()=>cancelAnimationFrame(c)}},getImageData(m,c=0){const g=window.document.createElement("canvas"),k=g.getContext("2d");if(!k)throw new Error("failed to create canvas 2d context");return g.width=m.width,g.height=m.height,k.drawImage(m,0,0,m.width,m.height),k.getImageData(-c,-c,m.width+2*c,m.height+2*c)},resolveURL:m=>(z||(z=document.createElement("a")),z.href=m,z.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(U==null&&(U=matchMedia("(prefers-reduced-motion: reduce)")),U.matches)}};var Y=J;function J(m,c){this.x=m,this.y=c}J.prototype={clone:function(){return new J(this.x,this.y)},add:function(m){return this.clone()._add(m)},sub:function(m){return this.clone()._sub(m)},multByPoint:function(m){return this.clone()._multByPoint(m)},divByPoint:function(m){return this.clone()._divByPoint(m)},mult:function(m){return this.clone()._mult(m)},div:function(m){return this.clone()._div(m)},rotate:function(m){return this.clone()._rotate(m)},rotateAround:function(m,c){return this.clone()._rotateAround(m,c)},matMult:function(m){return this.clone()._matMult(m)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(m){return this.x===m.x&&this.y===m.y},dist:function(m){return Math.sqrt(this.distSqr(m))},distSqr:function(m){var c=m.x-this.x,g=m.y-this.y;return c*c+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(m){return Math.atan2(this.y-m.y,this.x-m.x)},angleWith:function(m){return this.angleWithSep(m.x,m.y)},angleWithSep:function(m,c){return Math.atan2(this.x*c-this.y*m,this.x*m+this.y*c)},_matMult:function(m){var c=m[2]*this.x+m[3]*this.y;return this.x=m[0]*this.x+m[1]*this.y,this.y=c,this},_add:function(m){return this.x+=m.x,this.y+=m.y,this},_sub:function(m){return this.x-=m.x,this.y-=m.y,this},_mult:function(m){return this.x*=m,this.y*=m,this},_div:function(m){return this.x/=m,this.y/=m,this},_multByPoint:function(m){return this.x*=m.x,this.y*=m.y,this},_divByPoint:function(m){return this.x/=m.x,this.y/=m.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var m=this.y;return this.y=this.x,this.x=-m,this},_rotate:function(m){var c=Math.cos(m),g=Math.sin(m),k=g*this.x+c*this.y;return this.x=c*this.x-g*this.y,this.y=k,this},_rotateAround:function(m,c){var g=Math.cos(m),k=Math.sin(m),Z=c.y+k*(this.x-c.x)+g*(this.y-c.y);return this.x=c.x+g*(this.x-c.x)-k*(this.y-c.y),this.y=Z,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},J.convert=function(m){return m instanceof J?m:Array.isArray(m)?new J(m[0],m[1]):m};const ne={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},q="mapbox-tiles";let we,ee,X=500,re=50;function de(){typeof caches>"u"||we||(we=caches.open(q))}let me=1/0;const xe={supported:!1,testSupport:function(m){!Ee&&Re&&(ke?$(m):He=m)}};let He,Re,Ee=!1,ke=!1;function $(m){const c=m.createTexture();m.bindTexture(m.TEXTURE_2D,c);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,Re),m.isContextLost())return;xe.supported=!0}catch{}m.deleteTexture(c),Ee=!0}typeof document<"u"&&(Re=document.createElement("img"),Re.onload=function(){He&&$(He),He=null,ke=!0},Re.onerror=function(){Ee=!0,He=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const le={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(le);class K extends Error{constructor(c,g,k,Z){super(`AJAXError: ${g} (${c}): ${k}`),this.status=c,this.statusText=g,this.url=k,this.body=Z}}const te=T()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ie(m,c){const g=new AbortController,k=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,referrer:te(),signal:g.signal});let Z=!1,Q=!1;return m.type==="json"&&k.headers.set("Accept","application/json"),((ue,Se,ze)=>{if(Q)return;const Ye=Date.now();fetch(k).then(ot=>ot.ok?((ct,wt,Dt)=>{(m.type==="arrayBuffer"?ct.arrayBuffer():m.type==="json"?ct.json():ct.text()).then(It=>{Q||(wt&&Dt&&function(ar,qt,Fr){if(de(),!we)return;const jr={status:qt.status,statusText:qt.statusText,headers:new Headers};qt.headers.forEach((Hr,ln)=>jr.headers.set(ln,Hr));const Lr=M(qt.headers.get("Cache-Control")||"");Lr["no-store"]||(Lr["max-age"]&&jr.headers.set("Expires",new Date(Fr+1e3*Lr["max-age"]).toUTCString()),new Date(jr.headers.get("Expires")).getTime()-Fr<42e4||function(Hr,ln){if(ee===void 0)try{new Response(new ReadableStream),ee=!0}catch{ee=!1}ee?ln(Hr.body):Hr.blob().then(ln)}(qt,Hr=>{const ln=new Response(Hr,jr);de(),we&&we.then(an=>an.put(function(jn){const Jn=jn.indexOf("?");return Jn<0?jn:jn.slice(0,Jn)}(ar.url),ln)).catch(an=>R(an.message))}))}(k,wt,Dt),Z=!0,c(null,It,ct.headers.get("Cache-Control"),ct.headers.get("Expires")))}).catch(It=>{Q||c(new Error(It.message))})})(ot,null,Ye):ot.blob().then(ct=>c(new K(ot.status,ot.statusText,m.url,ct)))).catch(ot=>{ot.code!==20&&c(new Error(ot.message))})})(),{cancel:()=>{Q=!0,Z||g.abort()}}}const ce=function(m,c){if(/:\/\//.test(m.url)&&!/^https?:|^file:/.test(m.url)){if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",m,c);if(!T()){const k=m.url.substring(0,m.url.indexOf("://"));return(ne.REGISTERED_PROTOCOLS[k]||ie)(m,c)}}if(!(/^file:/.test(g=m.url)||/^file:/.test(te())&&!/^\w+:/.test(g))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ie(m,c);if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",m,c,void 0,!0)}var g;return function(k,Z){const Q=new XMLHttpRequest;Q.open(k.method||"GET",k.url,!0),k.type==="arrayBuffer"&&(Q.responseType="arraybuffer");for(const ue in k.headers)Q.setRequestHeader(ue,k.headers[ue]);return k.type==="json"&&(Q.responseType="text",Q.setRequestHeader("Accept","application/json")),Q.withCredentials=k.credentials==="include",Q.onerror=()=>{Z(new Error(Q.statusText))},Q.onload=()=>{if((Q.status>=200&&Q.status<300||Q.status===0)&&Q.response!==null){let ue=Q.response;if(k.type==="json")try{ue=JSON.parse(Q.response)}catch(Se){return Z(Se)}Z(null,ue,Q.getResponseHeader("Cache-Control"),Q.getResponseHeader("Expires"))}else{const ue=new Blob([Q.response],{type:Q.getResponseHeader("Content-Type")});Z(new K(Q.status,Q.statusText,k.url,ue))}},Q.send(k.body),{cancel:()=>Q.abort()}}(m,c)},ae=function(m,c){return ce(_(m,{type:"arrayBuffer"}),c)};function ve(m){const c=window.document.createElement("a");return c.href=m,c.protocol===window.document.location.protocol&&c.host===window.document.location.host}const pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let he,ye;he=[],ye=0;const _e=function(m,c){if(xe.supported&&(m.headers||(m.headers={}),m.headers.accept="image/webp,*/*"),ye>=ne.MAX_PARALLEL_IMAGE_REQUESTS){const Q={requestParameters:m,callback:c,cancelled:!1,cancel(){this.cancelled=!0}};return he.push(Q),Q}ye++;let g=!1;const k=()=>{if(!g)for(g=!0,ye--;he.length&&ye<ne.MAX_PARALLEL_IMAGE_REQUESTS;){const Q=he.shift(),{requestParameters:ue,callback:Se,cancelled:ze}=Q;ze||(Q.cancel=_e(ue,Se).cancel)}},Z=ae(m,(Q,ue,Se,ze)=>{k(),Q?c(Q):ue&&function(Ye,ot){typeof createImageBitmap=="function"?function(ct,wt){const Dt=new Blob([new Uint8Array(ct)],{type:"image/png"});createImageBitmap(Dt).then(It=>{wt(null,It)}).catch(It=>{wt(new Error(`Could not load image because of ${It.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(Ye,ot):function(ct,wt){const Dt=new Image;Dt.onload=()=>{wt(null,Dt),URL.revokeObjectURL(Dt.src),Dt.onload=null,window.requestAnimationFrame(()=>{Dt.src=pe})},Dt.onerror=()=>wt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const It=new Blob([new Uint8Array(ct)],{type:"image/png"});Dt.src=ct.byteLength?URL.createObjectURL(It):pe}(Ye,ot)}(ue,(Ye,ot)=>{Ye!=null?c(Ye):ot!=null&&c(null,ot,{cacheControl:Se,expires:ze})})});return{cancel:()=>{Z.cancel(),k()}}};function je(m,c,g){g[m]&&g[m].indexOf(c)!==-1||(g[m]=g[m]||[],g[m].push(c))}function Je(m,c,g){if(g&&g[m]){const k=g[m].indexOf(c);k!==-1&&g[m].splice(k,1)}}class nt{constructor(c,g={}){_(this,g),this.type=c}}class at extends nt{constructor(c,g={}){super("error",_({error:c},g))}}class Fe{on(c,g){return this._listeners=this._listeners||{},je(c,g,this._listeners),this}off(c,g){return Je(c,g,this._listeners),Je(c,g,this._oneTimeListeners),this}once(c,g){return this._oneTimeListeners=this._oneTimeListeners||{},je(c,g,this._oneTimeListeners),this}fire(c,g){typeof c=="string"&&(c=new nt(c,g||{}));const k=c.type;if(this.listens(k)){c.target=this;const Z=this._listeners&&this._listeners[k]?this._listeners[k].slice():[];for(const Se of Z)Se.call(this,c);const Q=this._oneTimeListeners&&this._oneTimeListeners[k]?this._oneTimeListeners[k].slice():[];for(const Se of Q)Je(k,Se,this._oneTimeListeners),Se.call(this,c);const ue=this._eventedParent;ue&&(_(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ue.fire(c))}else c instanceof at&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,g){return this._eventedParent=c,this._eventedParentData=g,this}}var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ke{constructor(c,g,k,Z){this.message=(c?`${c}: `:"")+k,Z&&(this.identifier=Z),g!=null&&g.__line__&&(this.line=g.__line__)}}function Qe(m){const c=m.value;return c?[new Ke(m.key,c,"constants have been deprecated as of v8")]:[]}function it(m,...c){for(const g of c)for(const k in g)m[k]=g[k];return m}function Ne(m){return m instanceof Number||m instanceof String||m instanceof Boolean?m.valueOf():m}function ht(m){if(Array.isArray(m))return m.map(ht);if(m instanceof Object&&!(m instanceof Number||m instanceof String||m instanceof Boolean)){const c={};for(const g in m)c[g]=ht(m[g]);return c}return Ne(m)}class Tt extends Error{constructor(c,g){super(g),this.message=g,this.key=c}}class Xt{constructor(c,g=[]){this.parent=c,this.bindings={};for(const[k,Z]of g)this.bindings[k]=Z}concat(c){return new Xt(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const Nt={kind:"null"},Mt={kind:"number"},Vt={kind:"string"},Yt={kind:"boolean"},cr={kind:"color"},Nr={kind:"object"},er={kind:"value"},Wt={kind:"collator"},dr={kind:"formatted"},zr={kind:"padding"},Dr={kind:"resolvedImage"};function $e(m,c){return{kind:"array",itemType:m,N:c}}function pt(m){if(m.kind==="array"){const c=pt(m.itemType);return typeof m.N=="number"?`array<${c}, ${m.N}>`:m.itemType.kind==="value"?"array":`array<${c}>`}return m.kind}const kt=[Nt,Mt,Vt,Yt,cr,dr,Nr,$e(er),zr,Dr];function Me(m,c){if(c.kind==="error")return null;if(m.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Me(m.itemType,c.itemType))&&(typeof m.N!="number"||m.N===c.N))return null}else{if(m.kind===c.kind)return null;if(m.kind==="value"){for(const g of kt)if(!Me(g,c))return null}}return`Expected ${pt(m)} but found ${pt(c)} instead.`}function rt(m,c){return c.some(g=>g.kind===m.kind)}function st(m,c){return c.some(g=>g==="null"?m===null:g==="array"?Array.isArray(m):g==="object"?m&&!Array.isArray(m)&&typeof m=="object":g===typeof m)}var ft,zt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ue(m){return(m=Math.round(m))<0?0:m>255?255:m}function Ae(m){return Ue(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function Oe(m){return(c=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:c>1?1:c;var c}function We(m,c,g){return g<0?g+=1:g>1&&(g-=1),6*g<1?m+(c-m)*g*6:2*g<1?c:3*g<2?m+(c-m)*(2/3-g)*6:m}try{ft={}.parseCSSColor=function(m){var c,g=m.replace(/ /g,"").toLowerCase();if(g in zt)return zt[g].slice();if(g[0]==="#")return g.length===4?(c=parseInt(g.substr(1),16))>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null:g.length===7&&(c=parseInt(g.substr(1),16))>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null;var k=g.indexOf("("),Z=g.indexOf(")");if(k!==-1&&Z+1===g.length){var Q=g.substr(0,k),ue=g.substr(k+1,Z-(k+1)).split(","),Se=1;switch(Q){case"rgba":if(ue.length!==4)return null;Se=Oe(ue.pop());case"rgb":return ue.length!==3?null:[Ae(ue[0]),Ae(ue[1]),Ae(ue[2]),Se];case"hsla":if(ue.length!==4)return null;Se=Oe(ue.pop());case"hsl":if(ue.length!==3)return null;var ze=(parseFloat(ue[0])%360+360)%360/360,Ye=Oe(ue[1]),ot=Oe(ue[2]),ct=ot<=.5?ot*(Ye+1):ot+Ye-ot*Ye,wt=2*ot-ct;return[Ue(255*We(wt,ct,ze+1/3)),Ue(255*We(wt,ct,ze)),Ue(255*We(wt,ct,ze-1/3)),Se];default:return null}}return null}}catch{}class Ve{constructor(c,g,k,Z=1){this.r=c,this.g=g,this.b=k,this.a=Z}static parse(c){if(!c)return;if(c instanceof Ve)return c;if(typeof c!="string")return;const g=ft(c);return g?new Ve(g[0]/255*g[3],g[1]/255*g[3],g[2]/255*g[3],g[3]):void 0}toString(){const[c,g,k,Z]=this.toArray();return`rgba(${Math.round(c)},${Math.round(g)},${Math.round(k)},${Z})`}toArray(){const{r:c,g,b:k,a:Z}=this;return Z===0?[0,0,0,0]:[255*c/Z,255*g/Z,255*k/Z,Z]}}Ve.black=new Ve(0,0,0,1),Ve.white=new Ve(1,1,1,1),Ve.transparent=new Ve(0,0,0,0),Ve.red=new Ve(1,0,0,1);class lt{constructor(c,g,k){this.sensitivity=c?g?"variant":"case":g?"accent":"base",this.locale=k,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,g){return this.collator.compare(c,g)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class mt{constructor(c,g,k,Z,Q){this.text=c,this.image=g,this.scale=k,this.fontStack=Z,this.textColor=Q}}class dt{constructor(c){this.sections=c}static fromString(c){return new dt([new mt(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof dt?c:dt.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class At{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof At)return c;if(typeof c=="number")return new At([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const g of c)if(typeof g!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new At(c)}}toString(){return JSON.stringify(this.values)}}class Bt{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new Bt({name:c,available:!1}):null}}function ir(m,c,g,k){return typeof m=="number"&&m>=0&&m<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof g=="number"&&g>=0&&g<=255?k===void 0||typeof k=="number"&&k>=0&&k<=1?null:`Invalid rgba value [${[m,c,g,k].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof k=="number"?[m,c,g,k]:[m,c,g]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tr(m){if(m===null||typeof m=="string"||typeof m=="boolean"||typeof m=="number"||m instanceof Ve||m instanceof lt||m instanceof dt||m instanceof At||m instanceof Bt)return!0;if(Array.isArray(m)){for(const c of m)if(!tr(c))return!1;return!0}if(typeof m=="object"){for(const c in m)if(!tr(m[c]))return!1;return!0}return!1}function vt(m){if(m===null)return Nt;if(typeof m=="string")return Vt;if(typeof m=="boolean")return Yt;if(typeof m=="number")return Mt;if(m instanceof Ve)return cr;if(m instanceof lt)return Wt;if(m instanceof dt)return dr;if(m instanceof At)return zr;if(m instanceof Bt)return Dr;if(Array.isArray(m)){const c=m.length;let g;for(const k of m){const Z=vt(k);if(g){if(g===Z)continue;g=er;break}g=Z}return $e(g||er,c)}return Nr}function pr(m){const c=typeof m;return m===null?"":c==="string"||c==="number"||c==="boolean"?String(m):m instanceof Ve||m instanceof dt||m instanceof At||m instanceof Bt?m.toString():JSON.stringify(m)}class Gt{constructor(c,g){this.type=c,this.value=g}static parse(c,g){if(c.length!==2)return g.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!tr(c[1]))return g.error("invalid value");const k=c[1];let Z=vt(k);const Q=g.expectedType;return Z.kind!=="array"||Z.N!==0||!Q||Q.kind!=="array"||typeof Q.N=="number"&&Q.N!==0||(Z=Q),new Gt(Z,k)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Mr{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const Rr={string:Vt,number:Mt,boolean:Yt,object:Nr};class Yr{constructor(c,g){this.type=c,this.args=g}static parse(c,g){if(c.length<2)return g.error("Expected at least one argument.");let k,Z=1;const Q=c[0];if(Q==="array"){let Se,ze;if(c.length>2){const Ye=c[1];if(typeof Ye!="string"||!(Ye in Rr)||Ye==="object")return g.error('The item type argument of "array" must be one of string, number, boolean',1);Se=Rr[Ye],Z++}else Se=er;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return g.error('The length argument to "array" must be a positive integer literal',2);ze=c[2],Z++}k=$e(Se,ze)}else{if(!Rr[Q])throw new Error(`Types doesn't contain name = ${Q}`);k=Rr[Q]}const ue=[];for(;Z<c.length;Z++){const Se=g.parse(c[Z],Z,er);if(!Se)return null;ue.push(Se)}return new Yr(k,ue)}evaluate(c){for(let g=0;g<this.args.length;g++){const k=this.args[g].evaluate(c);if(!Me(this.type,vt(k)))return k;if(g===this.args.length-1)throw new Mr(`Expected value to be of type ${pt(this.type)}, but found ${pt(vt(k))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Kr={"to-boolean":Yt,"to-color":cr,"to-number":Mt,"to-string":Vt};class vr{constructor(c,g){this.type=c,this.args=g}static parse(c,g){if(c.length<2)return g.error("Expected at least one argument.");const k=c[0];if(!Kr[k])throw new Error(`Can't parse ${k} as it is not part of the known types`);if((k==="to-boolean"||k==="to-string")&&c.length!==2)return g.error("Expected one argument.");const Z=Kr[k],Q=[];for(let ue=1;ue<c.length;ue++){const Se=g.parse(c[ue],ue,er);if(!Se)return null;Q.push(Se)}return new vr(Z,Q)}evaluate(c){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(c));if(this.type.kind==="color"){let g,k;for(const Z of this.args){if(g=Z.evaluate(c),k=null,g instanceof Ve)return g;if(typeof g=="string"){const Q=c.parseColor(g);if(Q)return Q}else if(Array.isArray(g)&&(k=g.length<3||g.length>4?`Invalid rbga value ${JSON.stringify(g)}: expected an array containing either three or four numeric values.`:ir(g[0],g[1],g[2],g[3]),!k))return new Ve(g[0]/255,g[1]/255,g[2]/255,g[3])}throw new Mr(k||`Could not parse color from value '${typeof g=="string"?g:JSON.stringify(g)}'`)}if(this.type.kind==="padding"){let g;for(const k of this.args){g=k.evaluate(c);const Z=At.parse(g);if(Z)return Z}throw new Mr(`Could not parse padding from value '${typeof g=="string"?g:JSON.stringify(g)}'`)}if(this.type.kind==="number"){let g=null;for(const k of this.args){if(g=k.evaluate(c),g===null)return 0;const Z=Number(g);if(!isNaN(Z))return Z}throw new Mr(`Could not convert ${JSON.stringify(g)} to number.`)}return this.type.kind==="formatted"?dt.fromString(pr(this.args[0].evaluate(c))):this.type.kind==="resolvedImage"?Bt.fromString(pr(this.args[0].evaluate(c))):pr(this.args[0].evaluate(c))}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Xr=["Unknown","Point","LineString","Polygon"];class $r{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let g=this._parseColorCache[c];return g||(g=this._parseColorCache[c]=Ve.parse(c)),g}}class Le{constructor(c,g,k,Z){this.name=c,this.type=g,this._evaluate=k,this.args=Z}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,g){const k=c[0],Z=Le.definitions[k];if(!Z)return g.error(`Unknown expression "${k}". If you wanted a literal array, use ["literal", [...]].`,0);const Q=Array.isArray(Z)?Z[0]:Z.type,ue=Array.isArray(Z)?[[Z[1],Z[2]]]:Z.overloads,Se=ue.filter(([Ye])=>!Array.isArray(Ye)||Ye.length===c.length-1);let ze=null;for(const[Ye,ot]of Se){ze=new Sn(g.registry,g.path,null,g.scope);const ct=[];let wt=!1;for(let Dt=1;Dt<c.length;Dt++){const It=c[Dt],ar=Array.isArray(Ye)?Ye[Dt-1]:Ye.type,qt=ze.parse(It,1+ct.length,ar);if(!qt){wt=!0;break}ct.push(qt)}if(!wt)if(Array.isArray(Ye)&&Ye.length!==ct.length)ze.error(`Expected ${Ye.length} arguments, but found ${ct.length} instead.`);else{for(let Dt=0;Dt<ct.length;Dt++){const It=Array.isArray(Ye)?Ye[Dt]:Ye.type,ar=ct[Dt];ze.concat(Dt+1).checkSubtype(It,ar.type)}if(ze.errors.length===0)return new Le(k,Q,ot,ct)}}if(Se.length===1)g.errors.push(...ze.errors);else{const Ye=(Se.length?Se:ue).map(([ct])=>{return wt=ct,Array.isArray(wt)?`(${wt.map(pt).join(", ")})`:`(${pt(wt.type)}...)`;var wt}).join(" | "),ot=[];for(let ct=1;ct<c.length;ct++){const wt=g.parse(c[ct],1+ot.length);if(!wt)return null;ot.push(pt(wt.type))}g.error(`Expected arguments of type ${Ye}, but found (${ot.join(", ")}) instead.`)}return null}static register(c,g){Le.definitions=g;for(const k in g)c[k]=Le}}class De{constructor(c,g,k){this.type=Wt,this.locale=k,this.caseSensitive=c,this.diacriticSensitive=g}static parse(c,g){if(c.length!==2)return g.error("Expected one argument.");const k=c[1];if(typeof k!="object"||Array.isArray(k))return g.error("Collator options argument must be an object.");const Z=g.parse(k["case-sensitive"]!==void 0&&k["case-sensitive"],1,Yt);if(!Z)return null;const Q=g.parse(k["diacritic-sensitive"]!==void 0&&k["diacritic-sensitive"],1,Yt);if(!Q)return null;let ue=null;return k.locale&&(ue=g.parse(k.locale,1,Vt),!ue)?null:new De(Z,Q,ue)}evaluate(c){return new lt(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}const bt=8192;function xt(m,c){m[0]=Math.min(m[0],c[0]),m[1]=Math.min(m[1],c[1]),m[2]=Math.max(m[2],c[0]),m[3]=Math.max(m[3],c[1])}function Ct(m,c){return!(m[0]<=c[0]||m[2]>=c[2]||m[1]<=c[1]||m[3]>=c[3])}function Rt(m,c){const g=(180+m[0])/360,k=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+m[1]*Math.PI/360)))/360,Z=Math.pow(2,c.z);return[Math.round(g*Z*bt),Math.round(k*Z*bt)]}function Lt(m,c,g){const k=m[0]-c[0],Z=m[1]-c[1],Q=m[0]-g[0],ue=m[1]-g[1];return k*ue-Q*Z==0&&k*Q<=0&&Z*ue<=0}function Pt(m,c){let g=!1;for(let ue=0,Se=c.length;ue<Se;ue++){const ze=c[ue];for(let Ye=0,ot=ze.length;Ye<ot-1;Ye++){if(Lt(m,ze[Ye],ze[Ye+1]))return!1;(Z=ze[Ye])[1]>(k=m)[1]!=(Q=ze[Ye+1])[1]>k[1]&&k[0]<(Q[0]-Z[0])*(k[1]-Z[1])/(Q[1]-Z[1])+Z[0]&&(g=!g)}}var k,Z,Q;return g}function nr(m,c){for(let g=0;g<c.length;g++)if(Pt(m,c[g]))return!0;return!1}function Tr(m,c,g,k){const Z=k[0]-g[0],Q=k[1]-g[1],ue=(m[0]-g[0])*Q-Z*(m[1]-g[1]),Se=(c[0]-g[0])*Q-Z*(c[1]-g[1]);return ue>0&&Se<0||ue<0&&Se>0}function gr(m,c,g){for(const Ye of g)for(let ot=0;ot<Ye.length-1;++ot)if((Se=[(ue=Ye[ot+1])[0]-(Q=Ye[ot])[0],ue[1]-Q[1]])[0]*(ze=[(Z=c)[0]-(k=m)[0],Z[1]-k[1]])[1]-Se[1]*ze[0]!=0&&Tr(k,Z,Q,ue)&&Tr(Q,ue,k,Z))return!0;var k,Z,Q,ue,Se,ze;return!1}function $t(m,c){for(let g=0;g<m.length;++g)if(!Pt(m[g],c))return!1;for(let g=0;g<m.length-1;++g)if(gr(m[g],m[g+1],c))return!1;return!0}function mr(m,c){for(let g=0;g<c.length;g++)if($t(m,c[g]))return!0;return!1}function Pr(m,c,g){const k=[];for(let Z=0;Z<m.length;Z++){const Q=[];for(let ue=0;ue<m[Z].length;ue++){const Se=Rt(m[Z][ue],g);xt(c,Se),Q.push(Se)}k.push(Q)}return k}function wr(m,c,g){const k=[];for(let Z=0;Z<m.length;Z++){const Q=Pr(m[Z],c,g);k.push(Q)}return k}function fr(m,c,g,k){if(m[0]<g[0]||m[0]>g[2]){const Z=.5*k;let Q=m[0]-g[0]>Z?-k:g[0]-m[0]>Z?k:0;Q===0&&(Q=m[0]-g[2]>Z?-k:g[2]-m[0]>Z?k:0),m[0]+=Q}xt(c,m)}function Ir(m,c,g,k){const Z=Math.pow(2,k.z)*bt,Q=[k.x*bt,k.y*bt],ue=[];for(const Se of m)for(const ze of Se){const Ye=[ze.x+Q[0],ze.y+Q[1]];fr(Ye,c,g,Z),ue.push(Ye)}return ue}function Vr(m,c,g,k){const Z=Math.pow(2,k.z)*bt,Q=[k.x*bt,k.y*bt],ue=[];for(const ze of m){const Ye=[];for(const ot of ze){const ct=[ot.x+Q[0],ot.y+Q[1]];xt(c,ct),Ye.push(ct)}ue.push(Ye)}if(c[2]-c[0]<=Z/2){(Se=c)[0]=Se[1]=1/0,Se[2]=Se[3]=-1/0;for(const ze of ue)for(const Ye of ze)fr(Ye,c,g,Z)}var Se;return ue}class _r{constructor(c,g){this.type=Yt,this.geojson=c,this.geometries=g}static parse(c,g){if(c.length!==2)return g.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(tr(c[1])){const k=c[1];if(k.type==="FeatureCollection")for(let Z=0;Z<k.features.length;++Z){const Q=k.features[Z].geometry.type;if(Q==="Polygon"||Q==="MultiPolygon")return new _r(k,k.features[Z].geometry)}else if(k.type==="Feature"){const Z=k.geometry.type;if(Z==="Polygon"||Z==="MultiPolygon")return new _r(k,k.geometry)}else if(k.type==="Polygon"||k.type==="MultiPolygon")return new _r(k,k)}return g.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(g,k){const Z=[1/0,1/0,-1/0,-1/0],Q=[1/0,1/0,-1/0,-1/0],ue=g.canonicalID();if(k.type==="Polygon"){const Se=Pr(k.coordinates,Q,ue),ze=Ir(g.geometry(),Z,Q,ue);if(!Ct(Z,Q))return!1;for(const Ye of ze)if(!Pt(Ye,Se))return!1}if(k.type==="MultiPolygon"){const Se=wr(k.coordinates,Q,ue),ze=Ir(g.geometry(),Z,Q,ue);if(!Ct(Z,Q))return!1;for(const Ye of ze)if(!nr(Ye,Se))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(g,k){const Z=[1/0,1/0,-1/0,-1/0],Q=[1/0,1/0,-1/0,-1/0],ue=g.canonicalID();if(k.type==="Polygon"){const Se=Pr(k.coordinates,Q,ue),ze=Vr(g.geometry(),Z,Q,ue);if(!Ct(Z,Q))return!1;for(const Ye of ze)if(!$t(Ye,Se))return!1}if(k.type==="MultiPolygon"){const Se=wr(k.coordinates,Q,ue),ze=Vr(g.geometry(),Z,Q,ue);if(!Ct(Z,Q))return!1;for(const Ye of ze)if(!mr(Ye,Se))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Gr(m){if(m instanceof Le&&(m.name==="get"&&m.args.length===1||m.name==="feature-state"||m.name==="has"&&m.args.length===1||m.name==="properties"||m.name==="geometry-type"||m.name==="id"||/^filter-/.test(m.name))||m instanceof _r)return!1;let c=!0;return m.eachChild(g=>{c&&!Gr(g)&&(c=!1)}),c}function qr(m){if(m instanceof Le&&m.name==="feature-state")return!1;let c=!0;return m.eachChild(g=>{c&&!qr(g)&&(c=!1)}),c}function tn(m,c){if(m instanceof Le&&c.indexOf(m.name)>=0)return!1;let g=!0;return m.eachChild(k=>{g&&!tn(k,c)&&(g=!1)}),g}class Ur{constructor(c,g){this.type=g.type,this.name=c,this.boundExpression=g}static parse(c,g){if(c.length!==2||typeof c[1]!="string")return g.error("'var' expression requires exactly one string literal argument.");const k=c[1];return g.scope.has(k)?new Ur(k,g.scope.get(k)):g.error(`Unknown variable "${k}". Make sure "${k}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class Sn{constructor(c,g=[],k,Z=new Xt,Q=[]){this.registry=c,this.path=g,this.key=g.map(ue=>`[${ue}]`).join(""),this.scope=Z,this.errors=Q,this.expectedType=k}parse(c,g,k,Z,Q={}){return g?this.concat(g,k,Z)._parse(c,Q):this._parse(c,Q)}_parse(c,g){function k(Z,Q,ue){return ue==="assert"?new Yr(Q,[Z]):ue==="coerce"?new vr(Q,[Z]):Z}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const Z=c[0];if(typeof Z!="string")return this.error(`Expression name must be a string, but found ${typeof Z} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Q=this.registry[Z];if(Q){let ue=Q.parse(c,this);if(!ue)return null;if(this.expectedType){const Se=this.expectedType,ze=ue.type;if(Se.kind!=="string"&&Se.kind!=="number"&&Se.kind!=="boolean"&&Se.kind!=="object"&&Se.kind!=="array"||ze.kind!=="value")if(Se.kind!=="color"&&Se.kind!=="formatted"&&Se.kind!=="resolvedImage"||ze.kind!=="value"&&ze.kind!=="string")if(Se.kind!=="padding"||ze.kind!=="value"&&ze.kind!=="number"&&ze.kind!=="array"){if(this.checkSubtype(Se,ze))return null}else ue=k(ue,Se,g.typeAnnotation||"coerce");else ue=k(ue,Se,g.typeAnnotation||"coerce");else ue=k(ue,Se,g.typeAnnotation||"assert")}if(!(ue instanceof Gt)&&ue.type.kind!=="resolvedImage"&&wn(ue)){const Se=new $r;try{ue=new Gt(ue.type,ue.evaluate(Se))}catch(ze){return this.error(ze.message),null}}return ue}return this.error(`Unknown expression "${Z}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,g,k){const Z=typeof c=="number"?this.path.concat(c):this.path,Q=k?this.scope.concat(k):this.scope;return new Sn(this.registry,Z,g||null,Q,this.errors)}error(c,...g){const k=`${this.key}${g.map(Z=>`[${Z}]`).join("")}`;this.errors.push(new Tt(k,c))}checkSubtype(c,g){const k=Me(c,g);return k&&this.error(k),k}}function wn(m){if(m instanceof Ur)return wn(m.boundExpression);if(m instanceof Le&&m.name==="error"||m instanceof De||m instanceof _r)return!1;const c=m instanceof vr||m instanceof Yr;let g=!0;return m.eachChild(k=>{g=c?g&&wn(k):g&&k instanceof Gt}),!!g&&Gr(m)&&tn(m,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function hn(m,c){const g=m.length-1;let k,Z,Q=0,ue=g,Se=0;for(;Q<=ue;)if(Se=Math.floor((Q+ue)/2),k=m[Se],Z=m[Se+1],k<=c){if(Se===g||c<Z)return Se;Q=Se+1}else{if(!(k>c))throw new Mr("Input is not a number.");ue=Se-1}return 0}class bn{constructor(c,g,k){this.type=c,this.input=g,this.labels=[],this.outputs=[];for(const[Z,Q]of k)this.labels.push(Z),this.outputs.push(Q)}static parse(c,g){if(c.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return g.error("Expected an even number of arguments.");const k=g.parse(c[1],1,Mt);if(!k)return null;const Z=[];let Q=null;g.expectedType&&g.expectedType.kind!=="value"&&(Q=g.expectedType);for(let ue=1;ue<c.length;ue+=2){const Se=ue===1?-1/0:c[ue],ze=c[ue+1],Ye=ue,ot=ue+1;if(typeof Se!="number")return g.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ye);if(Z.length&&Z[Z.length-1][0]>=Se)return g.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ye);const ct=g.parse(ze,ot,Q);if(!ct)return null;Q=Q||ct.type,Z.push([Se,ct])}return new bn(Q,k,Z)}evaluate(c){const g=this.labels,k=this.outputs;if(g.length===1)return k[0].evaluate(c);const Z=this.input.evaluate(c);if(Z<=g[0])return k[0].evaluate(c);const Q=g.length;return Z>=g[Q-1]?k[Q-1].evaluate(c):k[hn(g,Z)].evaluate(c)}eachChild(c){c(this.input);for(const g of this.outputs)c(g)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function mn(m,c,g){return m*(1-g)+c*g}var Dn=Object.freeze({__proto__:null,number:mn,color:function(m,c,g){return new Ve(mn(m.r,c.r,g),mn(m.g,c.g,g),mn(m.b,c.b,g),mn(m.a,c.a,g))},array:function(m,c,g){return m.map((k,Z)=>mn(k,c[Z],g))},padding:function(m,c,g){const k=m.values,Z=c.values;return new At([mn(k[0],Z[0],g),mn(k[1],Z[1],g),mn(k[2],Z[2],g),mn(k[3],Z[3],g)])}});const Yn=.95047,hi=1.08883,mi=4/29,Zi=6/29,Bn=3*Zi*Zi,Ai=Math.PI/180,vi=180/Math.PI;function Mo(m){return m>.008856451679035631?Math.pow(m,1/3):m/Bn+mi}function sa(m){return m>Zi?m*m*m:Bn*(m-mi)}function Ea(m){return 255*(m<=.0031308?12.92*m:1.055*Math.pow(m,1/2.4)-.055)}function Oa(m){return(m/=255)<=.04045?m/12.92:Math.pow((m+.055)/1.055,2.4)}function Kn(m){const c=Oa(m.r),g=Oa(m.g),k=Oa(m.b),Z=Mo((.4124564*c+.3575761*g+.1804375*k)/Yn),Q=Mo((.2126729*c+.7151522*g+.072175*k)/1);return{l:116*Q-16,a:500*(Z-Q),b:200*(Q-Mo((.0193339*c+.119192*g+.9503041*k)/hi)),alpha:m.a}}function ko(m){let c=(m.l+16)/116,g=isNaN(m.a)?c:c+m.a/500,k=isNaN(m.b)?c:c-m.b/200;return c=1*sa(c),g=Yn*sa(g),k=hi*sa(k),new Ve(Ea(3.2404542*g-1.5371385*c-.4985314*k),Ea(-.969266*g+1.8760108*c+.041556*k),Ea(.0556434*g-.2040259*c+1.0572252*k),m.alpha)}function to(m,c,g){const k=c-m;return m+g*(k>180||k<-180?k-360*Math.round(k/360):k)}const Wi={forward:Kn,reverse:ko,interpolate:function(m,c,g){return{l:mn(m.l,c.l,g),a:mn(m.a,c.a,g),b:mn(m.b,c.b,g),alpha:mn(m.alpha,c.alpha,g)}}},ro={forward:function(m){const{l:c,a:g,b:k}=Kn(m),Z=Math.atan2(k,g)*vi;return{h:Z<0?Z+360:Z,c:Math.sqrt(g*g+k*k),l:c,alpha:m.a}},reverse:function(m){const c=m.h*Ai,g=m.c;return ko({l:m.l,a:Math.cos(c)*g,b:Math.sin(c)*g,alpha:m.alpha})},interpolate:function(m,c,g){return{h:to(m.h,c.h,g),c:mn(m.c,c.c,g),l:mn(m.l,c.l,g),alpha:mn(m.alpha,c.alpha,g)}}};var Ts=Object.freeze({__proto__:null,lab:Wi,hcl:ro});class ya{constructor(c,g,k,Z,Q){this.type=c,this.operator=g,this.interpolation=k,this.input=Z,this.labels=[],this.outputs=[];for(const[ue,Se]of Q)this.labels.push(ue),this.outputs.push(Se)}static interpolationFactor(c,g,k,Z){let Q=0;if(c.name==="exponential")Q=Io(g,c.base,k,Z);else if(c.name==="linear")Q=Io(g,1,k,Z);else if(c.name==="cubic-bezier"){const ue=c.controlPoints;Q=new l(ue[0],ue[1],ue[2],ue[3]).solve(Io(g,1,k,Z))}return Q}static parse(c,g){let[k,Z,Q,...ue]=c;if(!Array.isArray(Z)||Z.length===0)return g.error("Expected an interpolation type expression.",1);if(Z[0]==="linear")Z={name:"linear"};else if(Z[0]==="exponential"){const Ye=Z[1];if(typeof Ye!="number")return g.error("Exponential interpolation requires a numeric base.",1,1);Z={name:"exponential",base:Ye}}else{if(Z[0]!=="cubic-bezier")return g.error(`Unknown interpolation type ${String(Z[0])}`,1,0);{const Ye=Z.slice(1);if(Ye.length!==4||Ye.some(ot=>typeof ot!="number"||ot<0||ot>1))return g.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Z={name:"cubic-bezier",controlPoints:Ye}}}if(c.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return g.error("Expected an even number of arguments.");if(Q=g.parse(Q,2,Mt),!Q)return null;const Se=[];let ze=null;k==="interpolate-hcl"||k==="interpolate-lab"?ze=cr:g.expectedType&&g.expectedType.kind!=="value"&&(ze=g.expectedType);for(let Ye=0;Ye<ue.length;Ye+=2){const ot=ue[Ye],ct=ue[Ye+1],wt=Ye+3,Dt=Ye+4;if(typeof ot!="number")return g.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',wt);if(Se.length&&Se[Se.length-1][0]>=ot)return g.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',wt);const It=g.parse(ct,Dt,ze);if(!It)return null;ze=ze||It.type,Se.push([ot,It])}return ze.kind==="number"||ze.kind==="color"||ze.kind==="padding"||ze.kind==="array"&&ze.itemType.kind==="number"&&typeof ze.N=="number"?new ya(ze,k,Z,Q,Se):g.error(`Type ${pt(ze)} is not interpolatable.`)}evaluate(c){const g=this.labels,k=this.outputs;if(g.length===1)return k[0].evaluate(c);const Z=this.input.evaluate(c);if(Z<=g[0])return k[0].evaluate(c);const Q=g.length;if(Z>=g[Q-1])return k[Q-1].evaluate(c);const ue=hn(g,Z),Se=ya.interpolationFactor(this.interpolation,Z,g[ue],g[ue+1]),ze=k[ue].evaluate(c),Ye=k[ue+1].evaluate(c);return this.operator==="interpolate"?Dn[this.type.kind.toLowerCase()](ze,Ye,Se):this.operator==="interpolate-hcl"?ro.reverse(ro.interpolate(ro.forward(ze),ro.forward(Ye),Se)):Wi.reverse(Wi.interpolate(Wi.forward(ze),Wi.forward(Ye),Se))}eachChild(c){c(this.input);for(const g of this.outputs)c(g)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Io(m,c,g,k){const Z=k-g,Q=m-g;return Z===0?0:c===1?Q/Z:(Math.pow(c,Q)-1)/(Math.pow(c,Z)-1)}class za{constructor(c,g){this.type=c,this.args=g}static parse(c,g){if(c.length<2)return g.error("Expectected at least one argument.");let k=null;const Z=g.expectedType;Z&&Z.kind!=="value"&&(k=Z);const Q=[];for(const Se of c.slice(1)){const ze=g.parse(Se,1+Q.length,k,void 0,{typeAnnotation:"omit"});if(!ze)return null;k=k||ze.type,Q.push(ze)}if(!k)throw new Error("No output type");const ue=Z&&Q.some(Se=>Me(Z,Se.type));return new za(ue?er:k,Q)}evaluate(c){let g,k=null,Z=0;for(const Q of this.args)if(Z++,k=Q.evaluate(c),k&&k instanceof Bt&&!k.available&&(g||(g=k.name),k=null,Z===this.args.length&&(k=g)),k!==null)break;return k}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}class us{constructor(c,g){this.type=g.type,this.bindings=[].concat(c),this.result=g}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const g of this.bindings)c(g[1]);c(this.result)}static parse(c,g){if(c.length<4)return g.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const k=[];for(let Q=1;Q<c.length-1;Q+=2){const ue=c[Q];if(typeof ue!="string")return g.error(`Expected string, but found ${typeof ue} instead.`,Q);if(/[^a-zA-Z0-9_]/.test(ue))return g.error("Variable names must contain only alphanumeric characters or '_'.",Q);const Se=g.parse(c[Q+1],Q+1);if(!Se)return null;k.push([ue,Se])}const Z=g.parse(c[c.length-1],c.length-1,g.expectedType,k);return Z?new us(k,Z):null}outputDefined(){return this.result.outputDefined()}}class Jo{constructor(c,g,k){this.type=c,this.index=g,this.input=k}static parse(c,g){if(c.length!==3)return g.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const k=g.parse(c[1],1,Mt),Z=g.parse(c[2],2,$e(g.expectedType||er));return k&&Z?new Jo(Z.type.itemType,k,Z):null}evaluate(c){const g=this.index.evaluate(c),k=this.input.evaluate(c);if(g<0)throw new Mr(`Array index out of bounds: ${g} < 0.`);if(g>=k.length)throw new Mr(`Array index out of bounds: ${g} > ${k.length-1}.`);if(g!==Math.floor(g))throw new Mr(`Array index must be an integer, but found ${g} instead.`);return k[g]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class Ta{constructor(c,g){this.type=Yt,this.needle=c,this.haystack=g}static parse(c,g){if(c.length!==3)return g.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const k=g.parse(c[1],1,er),Z=g.parse(c[2],2,er);return k&&Z?rt(k.type,[Yt,Vt,Mt,Nt,er])?new Ta(k,Z):g.error(`Expected first argument to be of type boolean, string, number or null, but found ${pt(k.type)} instead`):null}evaluate(c){const g=this.needle.evaluate(c),k=this.haystack.evaluate(c);if(!k)return!1;if(!st(g,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${pt(vt(g))} instead.`);if(!st(k,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${pt(vt(k))} instead.`);return k.indexOf(g)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class di{constructor(c,g,k){this.type=Mt,this.needle=c,this.haystack=g,this.fromIndex=k}static parse(c,g){if(c.length<=2||c.length>=5)return g.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const k=g.parse(c[1],1,er),Z=g.parse(c[2],2,er);if(!k||!Z)return null;if(!rt(k.type,[Yt,Vt,Mt,Nt,er]))return g.error(`Expected first argument to be of type boolean, string, number or null, but found ${pt(k.type)} instead`);if(c.length===4){const Q=g.parse(c[3],3,Mt);return Q?new di(k,Z,Q):null}return new di(k,Z)}evaluate(c){const g=this.needle.evaluate(c),k=this.haystack.evaluate(c);if(!st(g,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${pt(vt(g))} instead.`);if(!st(k,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${pt(vt(k))} instead.`);if(this.fromIndex){const Z=this.fromIndex.evaluate(c);return k.indexOf(g,Z)}return k.indexOf(g)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class zs{constructor(c,g,k,Z,Q,ue){this.inputType=c,this.type=g,this.input=k,this.cases=Z,this.outputs=Q,this.otherwise=ue}static parse(c,g){if(c.length<5)return g.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return g.error("Expected an even number of arguments.");let k,Z;g.expectedType&&g.expectedType.kind!=="value"&&(Z=g.expectedType);const Q={},ue=[];for(let Ye=2;Ye<c.length-1;Ye+=2){let ot=c[Ye];const ct=c[Ye+1];Array.isArray(ot)||(ot=[ot]);const wt=g.concat(Ye);if(ot.length===0)return wt.error("Expected at least one branch label.");for(const It of ot){if(typeof It!="number"&&typeof It!="string")return wt.error("Branch labels must be numbers or strings.");if(typeof It=="number"&&Math.abs(It)>Number.MAX_SAFE_INTEGER)return wt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof It=="number"&&Math.floor(It)!==It)return wt.error("Numeric branch labels must be integer values.");if(k){if(wt.checkSubtype(k,vt(It)))return null}else k=vt(It);if(Q[String(It)]!==void 0)return wt.error("Branch labels must be unique.");Q[String(It)]=ue.length}const Dt=g.parse(ct,Ye,Z);if(!Dt)return null;Z=Z||Dt.type,ue.push(Dt)}const Se=g.parse(c[1],1,er);if(!Se)return null;const ze=g.parse(c[c.length-1],c.length-1,Z);return ze?Se.type.kind!=="value"&&g.concat(1).checkSubtype(k,Se.type)?null:new zs(k,Z,Se,Q,ue,ze):null}evaluate(c){const g=this.input.evaluate(c);return(vt(g)===this.inputType&&this.outputs[this.cases[g]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Ya{constructor(c,g,k){this.type=c,this.branches=g,this.otherwise=k}static parse(c,g){if(c.length<4)return g.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return g.error("Expected an odd number of arguments.");let k;g.expectedType&&g.expectedType.kind!=="value"&&(k=g.expectedType);const Z=[];for(let ue=1;ue<c.length-1;ue+=2){const Se=g.parse(c[ue],ue,Yt);if(!Se)return null;const ze=g.parse(c[ue+1],ue+1,k);if(!ze)return null;Z.push([Se,ze]),k=k||ze.type}const Q=g.parse(c[c.length-1],c.length-1,k);if(!Q)return null;if(!k)throw new Error("Can't infer output type");return new Ya(k,Z,Q)}evaluate(c){for(const[g,k]of this.branches)if(g.evaluate(c))return k.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[g,k]of this.branches)c(g),c(k);c(this.otherwise)}outputDefined(){return this.branches.every(([c,g])=>g.outputDefined())&&this.otherwise.outputDefined()}}class _a{constructor(c,g,k,Z){this.type=c,this.input=g,this.beginIndex=k,this.endIndex=Z}static parse(c,g){if(c.length<=2||c.length>=5)return g.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const k=g.parse(c[1],1,er),Z=g.parse(c[2],2,Mt);if(!k||!Z)return null;if(!rt(k.type,[$e(er),Vt,er]))return g.error(`Expected first argument to be of type array or string, but found ${pt(k.type)} instead`);if(c.length===4){const Q=g.parse(c[3],3,Mt);return Q?new _a(k.type,k,Z,Q):null}return new _a(k.type,k,Z)}evaluate(c){const g=this.input.evaluate(c),k=this.beginIndex.evaluate(c);if(!st(g,["string","array"]))throw new Mr(`Expected first argument to be of type array or string, but found ${pt(vt(g))} instead.`);if(this.endIndex){const Z=this.endIndex.evaluate(c);return g.slice(k,Z)}return g.slice(k)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Ba(m,c){return m==="=="||m==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function cs(m,c,g,k){return k.compare(c,g)===0}function fs(m,c,g){const k=m!=="=="&&m!=="!=";return class R_{constructor(Q,ue,Se){this.type=Yt,this.lhs=Q,this.rhs=ue,this.collator=Se,this.hasUntypedArgument=Q.type.kind==="value"||ue.type.kind==="value"}static parse(Q,ue){if(Q.length!==3&&Q.length!==4)return ue.error("Expected two or three arguments.");const Se=Q[0];let ze=ue.parse(Q[1],1,er);if(!ze)return null;if(!Ba(Se,ze.type))return ue.concat(1).error(`"${Se}" comparisons are not supported for type '${pt(ze.type)}'.`);let Ye=ue.parse(Q[2],2,er);if(!Ye)return null;if(!Ba(Se,Ye.type))return ue.concat(2).error(`"${Se}" comparisons are not supported for type '${pt(Ye.type)}'.`);if(ze.type.kind!==Ye.type.kind&&ze.type.kind!=="value"&&Ye.type.kind!=="value")return ue.error(`Cannot compare types '${pt(ze.type)}' and '${pt(Ye.type)}'.`);k&&(ze.type.kind==="value"&&Ye.type.kind!=="value"?ze=new Yr(Ye.type,[ze]):ze.type.kind!=="value"&&Ye.type.kind==="value"&&(Ye=new Yr(ze.type,[Ye])));let ot=null;if(Q.length===4){if(ze.type.kind!=="string"&&Ye.type.kind!=="string"&&ze.type.kind!=="value"&&Ye.type.kind!=="value")return ue.error("Cannot use collator to compare non-string types.");if(ot=ue.parse(Q[3],3,Wt),!ot)return null}return new R_(ze,Ye,ot)}evaluate(Q){const ue=this.lhs.evaluate(Q),Se=this.rhs.evaluate(Q);if(k&&this.hasUntypedArgument){const ze=vt(ue),Ye=vt(Se);if(ze.kind!==Ye.kind||ze.kind!=="string"&&ze.kind!=="number")throw new Mr(`Expected arguments for "${m}" to be (string, string) or (number, number), but found (${ze.kind}, ${Ye.kind}) instead.`)}if(this.collator&&!k&&this.hasUntypedArgument){const ze=vt(ue),Ye=vt(Se);if(ze.kind!=="string"||Ye.kind!=="string")return c(Q,ue,Se)}return this.collator?g(Q,ue,Se,this.collator.evaluate(Q)):c(Q,ue,Se)}eachChild(Q){Q(this.lhs),Q(this.rhs),this.collator&&Q(this.collator)}outputDefined(){return!0}}}const $o=fs("==",function(m,c,g){return c===g},cs),As=fs("!=",function(m,c,g){return c!==g},function(m,c,g,k){return!cs(0,c,g,k)}),Fu=fs("<",function(m,c,g){return c<g},function(m,c,g,k){return k.compare(c,g)<0}),Ou=fs(">",function(m,c,g){return c>g},function(m,c,g,k){return k.compare(c,g)>0}),Vl=fs("<=",function(m,c,g){return c<=g},function(m,c,g,k){return k.compare(c,g)<=0}),Zc=fs(">=",function(m,c,g){return c>=g},function(m,c,g,k){return k.compare(c,g)>=0});class co{constructor(c,g,k,Z,Q){this.type=Vt,this.number=c,this.locale=g,this.currency=k,this.minFractionDigits=Z,this.maxFractionDigits=Q}static parse(c,g){if(c.length!==3)return g.error("Expected two arguments.");const k=g.parse(c[1],1,Mt);if(!k)return null;const Z=c[2];if(typeof Z!="object"||Array.isArray(Z))return g.error("NumberFormat options argument must be an object.");let Q=null;if(Z.locale&&(Q=g.parse(Z.locale,1,Vt),!Q))return null;let ue=null;if(Z.currency&&(ue=g.parse(Z.currency,1,Vt),!ue))return null;let Se=null;if(Z["min-fraction-digits"]&&(Se=g.parse(Z["min-fraction-digits"],1,Mt),!Se))return null;let ze=null;return Z["max-fraction-digits"]&&(ze=g.parse(Z["max-fraction-digits"],1,Mt),!ze)?null:new co(k,Q,ue,Se,ze)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class zu{constructor(c){this.type=dr,this.sections=c}static parse(c,g){if(c.length<2)return g.error("Expected at least one argument.");const k=c[1];if(!Array.isArray(k)&&typeof k=="object")return g.error("First argument must be an image or text section.");const Z=[];let Q=!1;for(let ue=1;ue<=c.length-1;++ue){const Se=c[ue];if(Q&&typeof Se=="object"&&!Array.isArray(Se)){Q=!1;let ze=null;if(Se["font-scale"]&&(ze=g.parse(Se["font-scale"],1,Mt),!ze))return null;let Ye=null;if(Se["text-font"]&&(Ye=g.parse(Se["text-font"],1,$e(Vt)),!Ye))return null;let ot=null;if(Se["text-color"]&&(ot=g.parse(Se["text-color"],1,cr),!ot))return null;const ct=Z[Z.length-1];ct.scale=ze,ct.font=Ye,ct.textColor=ot}else{const ze=g.parse(c[ue],1,er);if(!ze)return null;const Ye=ze.type.kind;if(Ye!=="string"&&Ye!=="value"&&Ye!=="null"&&Ye!=="resolvedImage")return g.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Q=!0,Z.push({content:ze,scale:null,font:null,textColor:null})}}return new zu(Z)}evaluate(c){return new dt(this.sections.map(g=>{const k=g.content.evaluate(c);return vt(k)===Dr?new mt("",k,null,null,null):new mt(pr(k),null,g.scale?g.scale.evaluate(c):null,g.font?g.font.evaluate(c).join(","):null,g.textColor?g.textColor.evaluate(c):null)}))}eachChild(c){for(const g of this.sections)c(g.content),g.scale&&c(g.scale),g.font&&c(g.font),g.textColor&&c(g.textColor)}outputDefined(){return!1}}class xl{constructor(c){this.type=Dr,this.input=c}static parse(c,g){if(c.length!==2)return g.error("Expected two arguments.");const k=g.parse(c[1],1,Vt);return k?new xl(k):g.error("No image name provided.")}evaluate(c){const g=this.input.evaluate(c),k=Bt.fromString(g);return k&&c.availableImages&&(k.available=c.availableImages.indexOf(g)>-1),k}eachChild(c){c(this.input)}outputDefined(){return!1}}class Ho{constructor(c){this.type=Mt,this.input=c}static parse(c,g){if(c.length!==2)return g.error(`Expected 1 argument, but found ${c.length-1} instead.`);const k=g.parse(c[1],1);return k?k.type.kind!=="array"&&k.type.kind!=="string"&&k.type.kind!=="value"?g.error(`Expected argument of type string or array, but found ${pt(k.type)} instead.`):new Ho(k):null}evaluate(c){const g=this.input.evaluate(c);if(typeof g=="string"||Array.isArray(g))return g.length;throw new Mr(`Expected value to be of type string or array, but found ${pt(vt(g))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Bs={"==":$o,"!=":As,">":Ou,"<":Fu,">=":Zc,"<=":Vl,array:Yr,at:Jo,boolean:Yr,case:Ya,coalesce:za,collator:De,format:zu,image:xl,in:Ta,"index-of":di,interpolate:ya,"interpolate-hcl":ya,"interpolate-lab":ya,length:Ho,let:us,literal:Gt,match:zs,number:Yr,"number-format":co,object:Yr,slice:_a,step:bn,string:Yr,"to-boolean":vr,"to-color":vr,"to-number":vr,"to-string":vr,var:Ur,within:_r};function Gl(m,[c,g,k,Z]){c=c.evaluate(m),g=g.evaluate(m),k=k.evaluate(m);const Q=Z?Z.evaluate(m):1,ue=ir(c,g,k,Q);if(ue)throw new Mr(ue);return new Ve(c/255*Q,g/255*Q,k/255*Q,Q)}function Zl(m,c){return m in c}function il(m,c){const g=c[m];return g===void 0?null:g}function Ss(m){return{type:m}}function Bu(m){return{result:"success",value:m}}function wl(m){return{result:"error",value:m}}function la(m){return m["property-type"]==="data-driven"||m["property-type"]==="cross-faded-data-driven"}function uu(m){return!!m.expression&&m.expression.parameters.indexOf("zoom")>-1}function gi(m){return!!m.expression&&m.expression.interpolated}function Ji(m){return m instanceof Number?"number":m instanceof String?"string":m instanceof Boolean?"boolean":Array.isArray(m)?"array":m===null?"null":typeof m}function $i(m){return typeof m=="object"&&m!==null&&!Array.isArray(m)}function Si(m){return m}function Wl(m,c){const g=c.type==="color",k=m.stops&&typeof m.stops[0][0]=="object",Z=k||!(k||m.property!==void 0),Q=m.type||(gi(c)?"exponential":"interval");if(g||c.type==="padding"){const Ye=g?Ve.parse:At.parse;(m=it({},m)).stops&&(m.stops=m.stops.map(ot=>[ot[0],Ye(ot[1])])),m.default=Ye(m.default?m.default:c.default)}if(m.colorSpace&&m.colorSpace!=="rgb"&&!Ts[m.colorSpace])throw new Error(`Unknown color space: ${m.colorSpace}`);let ue,Se,ze;if(Q==="exponential")ue=Nu;else if(Q==="interval")ue=Es;else if(Q==="categorical"){ue=Wc,Se=Object.create(null);for(const Ye of m.stops)Se[Ye[0]]=Ye[1];ze=typeof m.stops[0][0]}else{if(Q!=="identity")throw new Error(`Unknown function type "${Q}"`);ue=oc}if(k){const Ye={},ot=[];for(let Dt=0;Dt<m.stops.length;Dt++){const It=m.stops[Dt],ar=It[0].zoom;Ye[ar]===void 0&&(Ye[ar]={zoom:ar,type:m.type,property:m.property,default:m.default,stops:[]},ot.push(ar)),Ye[ar].stops.push([It[0].value,It[1]])}const ct=[];for(const Dt of ot)ct.push([Ye[Dt].zoom,Wl(Ye[Dt],c)]);const wt={name:"linear"};return{kind:"composite",interpolationType:wt,interpolationFactor:ya.interpolationFactor.bind(void 0,wt),zoomStops:ct.map(Dt=>Dt[0]),evaluate:({zoom:Dt},It)=>Nu({stops:ct,base:m.base},c,Dt).evaluate(Dt,It)}}if(Z){const Ye=Q==="exponential"?{name:"exponential",base:m.base!==void 0?m.base:1}:null;return{kind:"camera",interpolationType:Ye,interpolationFactor:ya.interpolationFactor.bind(void 0,Ye),zoomStops:m.stops.map(ot=>ot[0]),evaluate:({zoom:ot})=>ue(m,c,ot,Se,ze)}}return{kind:"source",evaluate(Ye,ot){const ct=ot&&ot.properties?ot.properties[m.property]:void 0;return ct===void 0?Ns(m.default,c.default):ue(m,c,ct,Se,ze)}}}function Ns(m,c,g){return m!==void 0?m:c!==void 0?c:g!==void 0?g:void 0}function Wc(m,c,g,k,Z){return Ns(typeof g===Z?k[g]:void 0,m.default,c.default)}function Es(m,c,g){if(Ji(g)!=="number")return Ns(m.default,c.default);const k=m.stops.length;if(k===1||g<=m.stops[0][0])return m.stops[0][1];if(g>=m.stops[k-1][0])return m.stops[k-1][1];const Z=hn(m.stops.map(Q=>Q[0]),g);return m.stops[Z][1]}function Nu(m,c,g){const k=m.base!==void 0?m.base:1;if(Ji(g)!=="number")return Ns(m.default,c.default);const Z=m.stops.length;if(Z===1||g<=m.stops[0][0])return m.stops[0][1];if(g>=m.stops[Z-1][0])return m.stops[Z-1][1];const Q=hn(m.stops.map(ot=>ot[0]),g),ue=function(ot,ct,wt,Dt){const It=Dt-wt,ar=ot-wt;return It===0?0:ct===1?ar/It:(Math.pow(ct,ar)-1)/(Math.pow(ct,It)-1)}(g,k,m.stops[Q][0],m.stops[Q+1][0]),Se=m.stops[Q][1],ze=m.stops[Q+1][1];let Ye=Dn[c.type]||Si;if(m.colorSpace&&m.colorSpace!=="rgb"){const ot=Ts[m.colorSpace];Ye=(ct,wt)=>ot.reverse(ot.interpolate(ot.forward(ct),ot.forward(wt),ue))}return typeof Se.evaluate=="function"?{evaluate(...ot){const ct=Se.evaluate.apply(void 0,ot),wt=ze.evaluate.apply(void 0,ot);if(ct!==void 0&&wt!==void 0)return Ye(ct,wt,ue)}}:Ye(Se,ze,ue)}function oc(m,c,g){switch(c.type){case"color":g=Ve.parse(g);break;case"formatted":g=dt.fromString(g.toString());break;case"resolvedImage":g=Bt.fromString(g.toString());break;case"padding":g=At.parse(g);break;default:Ji(g)===c.type||c.type==="enum"&&c.values[g]||(g=void 0)}return Ns(g,m.default,c.default)}Le.register(Bs,{error:[{kind:"error"},[Vt],(m,[c])=>{throw new Mr(c.evaluate(m))}],typeof:[Vt,[er],(m,[c])=>pt(vt(c.evaluate(m)))],"to-rgba":[$e(Mt,4),[cr],(m,[c])=>c.evaluate(m).toArray()],rgb:[cr,[Mt,Mt,Mt],Gl],rgba:[cr,[Mt,Mt,Mt,Mt],Gl],has:{type:Yt,overloads:[[[Vt],(m,[c])=>Zl(c.evaluate(m),m.properties())],[[Vt,Nr],(m,[c,g])=>Zl(c.evaluate(m),g.evaluate(m))]]},get:{type:er,overloads:[[[Vt],(m,[c])=>il(c.evaluate(m),m.properties())],[[Vt,Nr],(m,[c,g])=>il(c.evaluate(m),g.evaluate(m))]]},"feature-state":[er,[Vt],(m,[c])=>il(c.evaluate(m),m.featureState||{})],properties:[Nr,[],m=>m.properties()],"geometry-type":[Vt,[],m=>m.geometryType()],id:[er,[],m=>m.id()],zoom:[Mt,[],m=>m.globals.zoom],"heatmap-density":[Mt,[],m=>m.globals.heatmapDensity||0],"line-progress":[Mt,[],m=>m.globals.lineProgress||0],accumulated:[er,[],m=>m.globals.accumulated===void 0?null:m.globals.accumulated],"+":[Mt,Ss(Mt),(m,c)=>{let g=0;for(const k of c)g+=k.evaluate(m);return g}],"*":[Mt,Ss(Mt),(m,c)=>{let g=1;for(const k of c)g*=k.evaluate(m);return g}],"-":{type:Mt,overloads:[[[Mt,Mt],(m,[c,g])=>c.evaluate(m)-g.evaluate(m)],[[Mt],(m,[c])=>-c.evaluate(m)]]},"/":[Mt,[Mt,Mt],(m,[c,g])=>c.evaluate(m)/g.evaluate(m)],"%":[Mt,[Mt,Mt],(m,[c,g])=>c.evaluate(m)%g.evaluate(m)],ln2:[Mt,[],()=>Math.LN2],pi:[Mt,[],()=>Math.PI],e:[Mt,[],()=>Math.E],"^":[Mt,[Mt,Mt],(m,[c,g])=>Math.pow(c.evaluate(m),g.evaluate(m))],sqrt:[Mt,[Mt],(m,[c])=>Math.sqrt(c.evaluate(m))],log10:[Mt,[Mt],(m,[c])=>Math.log(c.evaluate(m))/Math.LN10],ln:[Mt,[Mt],(m,[c])=>Math.log(c.evaluate(m))],log2:[Mt,[Mt],(m,[c])=>Math.log(c.evaluate(m))/Math.LN2],sin:[Mt,[Mt],(m,[c])=>Math.sin(c.evaluate(m))],cos:[Mt,[Mt],(m,[c])=>Math.cos(c.evaluate(m))],tan:[Mt,[Mt],(m,[c])=>Math.tan(c.evaluate(m))],asin:[Mt,[Mt],(m,[c])=>Math.asin(c.evaluate(m))],acos:[Mt,[Mt],(m,[c])=>Math.acos(c.evaluate(m))],atan:[Mt,[Mt],(m,[c])=>Math.atan(c.evaluate(m))],min:[Mt,Ss(Mt),(m,c)=>Math.min(...c.map(g=>g.evaluate(m)))],max:[Mt,Ss(Mt),(m,c)=>Math.max(...c.map(g=>g.evaluate(m)))],abs:[Mt,[Mt],(m,[c])=>Math.abs(c.evaluate(m))],round:[Mt,[Mt],(m,[c])=>{const g=c.evaluate(m);return g<0?-Math.round(-g):Math.round(g)}],floor:[Mt,[Mt],(m,[c])=>Math.floor(c.evaluate(m))],ceil:[Mt,[Mt],(m,[c])=>Math.ceil(c.evaluate(m))],"filter-==":[Yt,[Vt,er],(m,[c,g])=>m.properties()[c.value]===g.value],"filter-id-==":[Yt,[er],(m,[c])=>m.id()===c.value],"filter-type-==":[Yt,[Vt],(m,[c])=>m.geometryType()===c.value],"filter-<":[Yt,[Vt,er],(m,[c,g])=>{const k=m.properties()[c.value],Z=g.value;return typeof k==typeof Z&&k<Z}],"filter-id-<":[Yt,[er],(m,[c])=>{const g=m.id(),k=c.value;return typeof g==typeof k&&g<k}],"filter->":[Yt,[Vt,er],(m,[c,g])=>{const k=m.properties()[c.value],Z=g.value;return typeof k==typeof Z&&k>Z}],"filter-id->":[Yt,[er],(m,[c])=>{const g=m.id(),k=c.value;return typeof g==typeof k&&g>k}],"filter-<=":[Yt,[Vt,er],(m,[c,g])=>{const k=m.properties()[c.value],Z=g.value;return typeof k==typeof Z&&k<=Z}],"filter-id-<=":[Yt,[er],(m,[c])=>{const g=m.id(),k=c.value;return typeof g==typeof k&&g<=k}],"filter->=":[Yt,[Vt,er],(m,[c,g])=>{const k=m.properties()[c.value],Z=g.value;return typeof k==typeof Z&&k>=Z}],"filter-id->=":[Yt,[er],(m,[c])=>{const g=m.id(),k=c.value;return typeof g==typeof k&&g>=k}],"filter-has":[Yt,[er],(m,[c])=>c.value in m.properties()],"filter-has-id":[Yt,[],m=>m.id()!==null&&m.id()!==void 0],"filter-type-in":[Yt,[$e(Vt)],(m,[c])=>c.value.indexOf(m.geometryType())>=0],"filter-id-in":[Yt,[$e(er)],(m,[c])=>c.value.indexOf(m.id())>=0],"filter-in-small":[Yt,[Vt,$e(er)],(m,[c,g])=>g.value.indexOf(m.properties()[c.value])>=0],"filter-in-large":[Yt,[Vt,$e(er)],(m,[c,g])=>function(k,Z,Q,ue){for(;Q<=ue;){const Se=Q+ue>>1;if(Z[Se]===k)return!0;Z[Se]>k?ue=Se-1:Q=Se+1}return!1}(m.properties()[c.value],g.value,0,g.value.length-1)],all:{type:Yt,overloads:[[[Yt,Yt],(m,[c,g])=>c.evaluate(m)&&g.evaluate(m)],[Ss(Yt),(m,c)=>{for(const g of c)if(!g.evaluate(m))return!1;return!0}]]},any:{type:Yt,overloads:[[[Yt,Yt],(m,[c,g])=>c.evaluate(m)||g.evaluate(m)],[Ss(Yt),(m,c)=>{for(const g of c)if(g.evaluate(m))return!0;return!1}]]},"!":[Yt,[Yt],(m,[c])=>!c.evaluate(m)],"is-supported-script":[Yt,[Vt],(m,[c])=>{const g=m.globals&&m.globals.isSupportedScript;return!g||g(c.evaluate(m))}],upcase:[Vt,[Vt],(m,[c])=>c.evaluate(m).toUpperCase()],downcase:[Vt,[Vt],(m,[c])=>c.evaluate(m).toLowerCase()],concat:[Vt,Ss(er),(m,c)=>c.map(g=>pr(g.evaluate(m))).join("")],"resolved-locale":[Vt,[Wt],(m,[c])=>c.evaluate(m).resolvedLocale()]});class al{constructor(c,g){this.expression=c,this._warningHistory={},this._evaluator=new $r,this._defaultValue=g?function(k){return k.type==="color"&&$i(k.default)?new Ve(0,0,0,0):k.type==="color"?Ve.parse(k.default)||null:k.type==="padding"?At.parse(k.default)||null:k.default===void 0?null:k.default}(g):null,this._enumValues=g&&g.type==="enum"?g.values:null}evaluateWithoutErrorHandling(c,g,k,Z,Q,ue){return this._evaluator.globals=c,this._evaluator.feature=g,this._evaluator.featureState=k,this._evaluator.canonical=Z,this._evaluator.availableImages=Q||null,this._evaluator.formattedSection=ue,this.expression.evaluate(this._evaluator)}evaluate(c,g,k,Z,Q,ue){this._evaluator.globals=c,this._evaluator.feature=g||null,this._evaluator.featureState=k||null,this._evaluator.canonical=Z,this._evaluator.availableImages=Q||null,this._evaluator.formattedSection=ue||null;try{const Se=this.expression.evaluate(this._evaluator);if(Se==null||typeof Se=="number"&&Se!=Se)return this._defaultValue;if(this._enumValues&&!(Se in this._enumValues))throw new Mr(`Expected value to be one of ${Object.keys(this._enumValues).map(ze=>JSON.stringify(ze)).join(", ")}, but found ${JSON.stringify(Se)} instead.`);return Se}catch(Se){return this._warningHistory[Se.message]||(this._warningHistory[Se.message]=!0,typeof console<"u"&&console.warn(Se.message)),this._defaultValue}}}function Vo(m){return Array.isArray(m)&&m.length>0&&typeof m[0]=="string"&&m[0]in Bs}function ol(m,c){const g=new Sn(Bs,[],c?function(Z){const Q={color:cr,string:Vt,number:Mt,enum:Vt,boolean:Yt,formatted:dr,padding:zr,resolvedImage:Dr};return Z.type==="array"?$e(Q[Z.value]||er,Z.length):Q[Z.type]}(c):void 0),k=g.parse(m,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return k?Bu(new al(k,c)):wl(g.errors)}class jl{constructor(c,g){this.kind=c,this._styleExpression=g,this.isStateDependent=c!=="constant"&&!qr(g.expression)}evaluateWithoutErrorHandling(c,g,k,Z,Q,ue){return this._styleExpression.evaluateWithoutErrorHandling(c,g,k,Z,Q,ue)}evaluate(c,g,k,Z,Q,ue){return this._styleExpression.evaluate(c,g,k,Z,Q,ue)}}class Uu{constructor(c,g,k,Z){this.kind=c,this.zoomStops=k,this._styleExpression=g,this.isStateDependent=c!=="camera"&&!qr(g.expression),this.interpolationType=Z}evaluateWithoutErrorHandling(c,g,k,Z,Q,ue){return this._styleExpression.evaluateWithoutErrorHandling(c,g,k,Z,Q,ue)}evaluate(c,g,k,Z,Q,ue){return this._styleExpression.evaluate(c,g,k,Z,Q,ue)}interpolationFactor(c,g,k){return this.interpolationType?ya.interpolationFactor(this.interpolationType,c,g,k):0}}function jc(m,c){const g=ol(m,c);if(g.result==="error")return g;const k=g.value.expression,Z=Gr(k);if(!Z&&!la(c))return wl([new Tt("","data expressions not supported")]);const Q=tn(k,["zoom"]);if(!Q&&!uu(c))return wl([new Tt("","zoom expressions not supported")]);const ue=Cs(k);return ue||Q?ue instanceof Tt?wl([ue]):ue instanceof ya&&!gi(c)?wl([new Tt("",'"interpolate" expressions cannot be used with this property')]):Bu(ue?new Uu(Z?"camera":"composite",g.value,ue.labels,ue instanceof ya?ue.interpolation:void 0):new jl(Z?"constant":"source",g.value)):wl([new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Lo{constructor(c,g){this._parameters=c,this._specification=g,it(this,Wl(this._parameters,this._specification))}static deserialize(c){return new Lo(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function Cs(m){let c=null;if(m instanceof us)c=Cs(m.result);else if(m instanceof za){for(const g of m.args)if(c=Cs(g),c)break}else(m instanceof bn||m instanceof ya)&&m.input instanceof Le&&m.input.name==="zoom"&&(c=m);return c instanceof Tt||m.eachChild(g=>{const k=Cs(g);k instanceof Tt?c=k:!c&&k?c=new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&k&&c!==k&&(c=new Tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function Qo(m){const c=m.key,g=m.value,k=m.valueSpec||{},Z=m.objectElementValidators||{},Q=m.style,ue=m.styleSpec;let Se=[];const ze=Ji(g);if(ze!=="object")return[new Ke(c,g,`object expected, ${ze} found`)];for(const Ye in g){const ot=Ye.split(".")[0],ct=k[ot]||k["*"];let wt;if(Z[ot])wt=Z[ot];else if(k[ot])wt=Ro;else if(Z["*"])wt=Z["*"];else{if(!k["*"]){Se.push(new Ke(c,g[Ye],`unknown property "${Ye}"`));continue}wt=Ro}Se=Se.concat(wt({key:(c&&`${c}.`)+Ye,value:g[Ye],valueSpec:ct,style:Q,styleSpec:ue,object:g,objectKey:Ye},g))}for(const Ye in k)Z[Ye]||k[Ye].required&&k[Ye].default===void 0&&g[Ye]===void 0&&Se.push(new Ke(c,g,`missing required property "${Ye}"`));return Se}function sl(m){const c=m.value,g=m.valueSpec,k=m.style,Z=m.styleSpec,Q=m.key,ue=m.arrayElementValidator||Ro;if(Ji(c)!=="array")return[new Ke(Q,c,`array expected, ${Ji(c)} found`)];if(g.length&&c.length!==g.length)return[new Ke(Q,c,`array length ${g.length} expected, length ${c.length} found`)];if(g["min-length"]&&c.length<g["min-length"])return[new Ke(Q,c,`array length at least ${g["min-length"]} expected, length ${c.length} found`)];let Se={type:g.value,values:g.values};Z.$version<7&&(Se.function=g.function),Ji(g.value)==="object"&&(Se=g.value);let ze=[];for(let Ye=0;Ye<c.length;Ye++)ze=ze.concat(ue({array:c,arrayIndex:Ye,value:c[Ye],valueSpec:Se,style:k,styleSpec:Z,key:`${Q}[${Ye}]`}));return ze}function sc(m){const c=m.key,g=m.value,k=m.valueSpec;let Z=Ji(g);return Z==="number"&&g!=g&&(Z="NaN"),Z!=="number"?[new Ke(c,g,`number expected, ${Z} found`)]:"minimum"in k&&g<k.minimum?[new Ke(c,g,`${g} is less than the minimum value ${k.minimum}`)]:"maximum"in k&&g>k.maximum?[new Ke(c,g,`${g} is greater than the maximum value ${k.maximum}`)]:[]}function Tl(m){const c=m.valueSpec,g=Ne(m.value.type);let k,Z,Q,ue={};const Se=g!=="categorical"&&m.value.property===void 0,ze=!Se,Ye=Ji(m.value.stops)==="array"&&Ji(m.value.stops[0])==="array"&&Ji(m.value.stops[0][0])==="object",ot=Qo({key:m.key,value:m.value,valueSpec:m.styleSpec.function,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{stops:function(Dt){if(g==="identity")return[new Ke(Dt.key,Dt.value,'identity function may not have a "stops" property')];let It=[];const ar=Dt.value;return It=It.concat(sl({key:Dt.key,value:ar,valueSpec:Dt.valueSpec,style:Dt.style,styleSpec:Dt.styleSpec,arrayElementValidator:ct})),Ji(ar)==="array"&&ar.length===0&&It.push(new Ke(Dt.key,ar,"array must have at least one stop")),It},default:function(Dt){return Ro({key:Dt.key,value:Dt.value,valueSpec:c,style:Dt.style,styleSpec:Dt.styleSpec})}}});return g==="identity"&&Se&&ot.push(new Ke(m.key,m.value,'missing required property "property"')),g==="identity"||m.value.stops||ot.push(new Ke(m.key,m.value,'missing required property "stops"')),g==="exponential"&&m.valueSpec.expression&&!gi(m.valueSpec)&&ot.push(new Ke(m.key,m.value,"exponential functions not supported")),m.styleSpec.$version>=8&&(ze&&!la(m.valueSpec)?ot.push(new Ke(m.key,m.value,"property functions not supported")):Se&&!uu(m.valueSpec)&&ot.push(new Ke(m.key,m.value,"zoom functions not supported"))),g!=="categorical"&&!Ye||m.value.property!==void 0||ot.push(new Ke(m.key,m.value,'"property" property is required')),ot;function ct(Dt){let It=[];const ar=Dt.value,qt=Dt.key;if(Ji(ar)!=="array")return[new Ke(qt,ar,`array expected, ${Ji(ar)} found`)];if(ar.length!==2)return[new Ke(qt,ar,`array length 2 expected, length ${ar.length} found`)];if(Ye){if(Ji(ar[0])!=="object")return[new Ke(qt,ar,`object expected, ${Ji(ar[0])} found`)];if(ar[0].zoom===void 0)return[new Ke(qt,ar,"object stop key must have zoom")];if(ar[0].value===void 0)return[new Ke(qt,ar,"object stop key must have value")];if(Q&&Q>Ne(ar[0].zoom))return[new Ke(qt,ar[0].zoom,"stop zoom values must appear in ascending order")];Ne(ar[0].zoom)!==Q&&(Q=Ne(ar[0].zoom),Z=void 0,ue={}),It=It.concat(Qo({key:`${qt}[0]`,value:ar[0],valueSpec:{zoom:{}},style:Dt.style,styleSpec:Dt.styleSpec,objectElementValidators:{zoom:sc,value:wt}}))}else It=It.concat(wt({key:`${qt}[0]`,value:ar[0],valueSpec:{},style:Dt.style,styleSpec:Dt.styleSpec},ar));return Vo(ht(ar[1]))?It.concat([new Ke(`${qt}[1]`,ar[1],"expressions are not allowed in function stops.")]):It.concat(Ro({key:`${qt}[1]`,value:ar[1],valueSpec:c,style:Dt.style,styleSpec:Dt.styleSpec}))}function wt(Dt,It){const ar=Ji(Dt.value),qt=Ne(Dt.value),Fr=Dt.value!==null?Dt.value:It;if(k){if(ar!==k)return[new Ke(Dt.key,Fr,`${ar} stop domain type must match previous stop domain type ${k}`)]}else k=ar;if(ar!=="number"&&ar!=="string"&&ar!=="boolean")return[new Ke(Dt.key,Fr,"stop domain value must be a number, string, or boolean")];if(ar!=="number"&&g!=="categorical"){let jr=`number expected, ${ar} found`;return la(c)&&g===void 0&&(jr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ke(Dt.key,Fr,jr)]}return g!=="categorical"||ar!=="number"||isFinite(qt)&&Math.floor(qt)===qt?g!=="categorical"&&ar==="number"&&Z!==void 0&&qt<Z?[new Ke(Dt.key,Fr,"stop domain values must appear in ascending order")]:(Z=qt,g==="categorical"&&qt in ue?[new Ke(Dt.key,Fr,"stop domain values must be unique")]:(ue[qt]=!0,[])):[new Ke(Dt.key,Fr,`integer expected, found ${qt}`)]}}function Al(m){const c=(m.expressionContext==="property"?jc:ol)(ht(m.value),m.valueSpec);if(c.result==="error")return c.value.map(k=>new Ke(`${m.key}${k.key}`,m.value,k.message));const g=c.value.expression||c.value._styleExpression.expression;if(m.expressionContext==="property"&&m.propertyKey==="text-font"&&!g.outputDefined())return[new Ke(m.key,m.value,`Invalid data expression for "${m.propertyKey}". Output values must be contained as literals within the expression.`)];if(m.expressionContext==="property"&&m.propertyType==="layout"&&!qr(g))return[new Ke(m.key,m.value,'"feature-state" data expressions are not supported with layout properties.')];if(m.expressionContext==="filter"&&!qr(g))return[new Ke(m.key,m.value,'"feature-state" data expressions are not supported with filters.')];if(m.expressionContext&&m.expressionContext.indexOf("cluster")===0){if(!tn(g,["zoom","feature-state"]))return[new Ke(m.key,m.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(m.expressionContext==="cluster-initial"&&!Gr(g))return[new Ke(m.key,m.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Us(m){const c=m.key,g=m.value,k=m.valueSpec,Z=[];return Array.isArray(k.values)?k.values.indexOf(Ne(g))===-1&&Z.push(new Ke(c,g,`expected one of [${k.values.join(", ")}], ${JSON.stringify(g)} found`)):Object.keys(k.values).indexOf(Ne(g))===-1&&Z.push(new Ke(c,g,`expected one of [${Object.keys(k.values).join(", ")}], ${JSON.stringify(g)} found`)),Z}function Sl(m){if(m===!0||m===!1)return!0;if(!Array.isArray(m)||m.length===0)return!1;switch(m[0]){case"has":return m.length>=2&&m[1]!=="$id"&&m[1]!=="$type";case"in":return m.length>=3&&(typeof m[1]!="string"||Array.isArray(m[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return m.length!==3||Array.isArray(m[1])||Array.isArray(m[2]);case"any":case"all":for(const c of m.slice(1))if(!Sl(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Hu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Vu(m){if(m==null)return{filter:()=>!0,needGeometry:!1};Sl(m)||(m=fu(m));const c=ol(m,Hu);if(c.result==="error")throw new Error(c.value.map(g=>`${g.key}: ${g.message}`).join(", "));return{filter:(g,k,Z)=>c.value.evaluate(g,k,{},Z),needGeometry:cu(m)}}function Hs(m,c){return m<c?-1:m>c?1:0}function cu(m){if(!Array.isArray(m))return!1;if(m[0]==="within")return!0;for(let c=1;c<m.length;c++)if(cu(m[c]))return!0;return!1}function fu(m){if(!m)return!0;const c=m[0];return m.length<=1?c!=="any":c==="=="?hu(m[1],m[2],"=="):c==="!="?El(hu(m[1],m[2],"==")):c==="<"||c===">"||c==="<="||c===">="?hu(m[1],m[2],c):c==="any"?(g=m.slice(1),["any"].concat(g.map(fu))):c==="all"?["all"].concat(m.slice(1).map(fu)):c==="none"?["all"].concat(m.slice(1).map(fu).map(El)):c==="in"?Gu(m[1],m.slice(2)):c==="!in"?El(Gu(m[1],m.slice(2))):c==="has"?Po(m[1]):c==="!has"?El(Po(m[1])):c!=="within"||m;var g}function hu(m,c,g){switch(m){case"$type":return[`filter-type-${g}`,c];case"$id":return[`filter-id-${g}`,c];default:return[`filter-${g}`,m,c]}}function Gu(m,c){if(c.length===0)return!1;switch(m){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(g=>typeof g!=typeof c[0])?["filter-in-large",m,["literal",c.sort(Hs)]]:["filter-in-small",m,["literal",c]]}}function Po(m){switch(m){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",m]}}function El(m){return["!",m]}function hs(m){return Sl(ht(m.value))?Al(it({},m,{expressionContext:"filter",valueSpec:{value:"boolean"}})):lc(m)}function lc(m){const c=m.value,g=m.key;if(Ji(c)!=="array")return[new Ke(g,c,`array expected, ${Ji(c)} found`)];const k=m.styleSpec;let Z,Q=[];if(c.length<1)return[new Ke(g,c,"filter array must have at least 1 element")];switch(Q=Q.concat(Us({key:`${g}[0]`,value:c[0],valueSpec:k.filter_operator,style:m.style,styleSpec:m.styleSpec})),Ne(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&Ne(c[1])==="$type"&&Q.push(new Ke(g,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&Q.push(new Ke(g,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(Z=Ji(c[1]),Z!=="string"&&Q.push(new Ke(`${g}[1]`,c[1],`string expected, ${Z} found`)));for(let ue=2;ue<c.length;ue++)Z=Ji(c[ue]),Ne(c[1])==="$type"?Q=Q.concat(Us({key:`${g}[${ue}]`,value:c[ue],valueSpec:k.geometry_type,style:m.style,styleSpec:m.styleSpec})):Z!=="string"&&Z!=="number"&&Z!=="boolean"&&Q.push(new Ke(`${g}[${ue}]`,c[ue],`string, number, or boolean expected, ${Z} found`));break;case"any":case"all":case"none":for(let ue=1;ue<c.length;ue++)Q=Q.concat(lc({key:`${g}[${ue}]`,value:c[ue],style:m.style,styleSpec:m.styleSpec}));break;case"has":case"!has":Z=Ji(c[1]),c.length!==2?Q.push(new Ke(g,c,`filter array for "${c[0]}" operator must have 2 elements`)):Z!=="string"&&Q.push(new Ke(`${g}[1]`,c[1],`string expected, ${Z} found`));break;case"within":Z=Ji(c[1]),c.length!==2?Q.push(new Ke(g,c,`filter array for "${c[0]}" operator must have 2 elements`)):Z!=="object"&&Q.push(new Ke(`${g}[1]`,c[1],`object expected, ${Z} found`))}return Q}function Go(m,c){const g=m.key,k=m.style,Z=m.styleSpec,Q=m.value,ue=m.objectKey,Se=Z[`${c}_${m.layerType}`];if(!Se)return[];const ze=ue.match(/^(.*)-transition$/);if(c==="paint"&&ze&&Se[ze[1]]&&Se[ze[1]].transition)return Ro({key:g,value:Q,valueSpec:Z.transition,style:k,styleSpec:Z});const Ye=m.valueSpec||Se[ue];if(!Ye)return[new Ke(g,Q,`unknown property "${ue}"`)];let ot;if(Ji(Q)==="string"&&la(Ye)&&!Ye.tokens&&(ot=/^{([^}]+)}$/.exec(Q)))return[new Ke(g,Q,`"${ue}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ot[1])} }\`.`)];const ct=[];return m.layerType==="symbol"&&(ue==="text-field"&&k&&!k.glyphs&&ct.push(new Ke(g,Q,'use of "text-field" requires a style "glyphs" property')),ue==="text-font"&&$i(ht(Q))&&Ne(Q.type)==="identity"&&ct.push(new Ke(g,Q,'"text-font" does not support identity functions'))),ct.concat(Ro({key:m.key,value:Q,valueSpec:Ye,style:k,styleSpec:Z,expressionContext:"property",propertyType:c,propertyKey:ue}))}function du(m){return Go(m,"paint")}function ll(m){return Go(m,"layout")}function Zu(m){let c=[];const g=m.value,k=m.key,Z=m.style,Q=m.styleSpec;g.type||g.ref||c.push(new Ke(k,g,'either "type" or "ref" is required'));let ue=Ne(g.type);const Se=Ne(g.ref);if(g.id){const ze=Ne(g.id);for(let Ye=0;Ye<m.arrayIndex;Ye++){const ot=Z.layers[Ye];Ne(ot.id)===ze&&c.push(new Ke(k,g.id,`duplicate layer id "${g.id}", previously used at line ${ot.id.__line__}`))}}if("ref"in g){let ze;["type","source","source-layer","filter","layout"].forEach(Ye=>{Ye in g&&c.push(new Ke(k,g[Ye],`"${Ye}" is prohibited for ref layers`))}),Z.layers.forEach(Ye=>{Ne(Ye.id)===Se&&(ze=Ye)}),ze?ze.ref?c.push(new Ke(k,g.ref,"ref cannot reference another ref layer")):ue=Ne(ze.type):c.push(new Ke(k,g.ref,`ref layer "${Se}" not found`))}else if(ue!=="background")if(g.source){const ze=Z.sources&&Z.sources[g.source],Ye=ze&&Ne(ze.type);ze?Ye==="vector"&&ue==="raster"?c.push(new Ke(k,g.source,`layer "${g.id}" requires a raster source`)):Ye==="raster"&&ue!=="raster"?c.push(new Ke(k,g.source,`layer "${g.id}" requires a vector source`)):Ye!=="vector"||g["source-layer"]?Ye==="raster-dem"&&ue!=="hillshade"?c.push(new Ke(k,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):ue!=="line"||!g.paint||!g.paint["line-gradient"]||Ye==="geojson"&&ze.lineMetrics||c.push(new Ke(k,g,`layer "${g.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new Ke(k,g,`layer "${g.id}" must specify a "source-layer"`)):c.push(new Ke(k,g.source,`source "${g.source}" not found`))}else c.push(new Ke(k,g,'missing required property "source"'));return c=c.concat(Qo({key:k,value:g,valueSpec:Q.layer,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ro({key:`${k}.type`,value:g.type,valueSpec:Q.layer.type,style:m.style,styleSpec:m.styleSpec,object:g,objectKey:"type"}),filter:hs,layout:ze=>Qo({layer:g,key:ze.key,value:ze.value,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{"*":Ye=>ll(it({layerType:ue},Ye))}}),paint:ze=>Qo({layer:g,key:ze.key,value:ze.value,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{"*":Ye=>du(it({layerType:ue},Ye))}})}})),c}function Vs(m){const c=m.value,g=m.key,k=Ji(c);return k!=="string"?[new Ke(g,c,`string expected, ${k} found`)]:[]}const Wu={promoteId:function({key:m,value:c}){if(Ji(c)==="string")return Vs({key:m,value:c});{const g=[];for(const k in c)g.push(...Vs({key:`${m}.${k}`,value:c[k]}));return g}}};function ul(m){const c=m.value,g=m.key,k=m.styleSpec,Z=m.style;if(!c.type)return[new Ke(g,c,'"type" is required')];const Q=Ne(c.type);let ue;switch(Q){case"vector":case"raster":case"raster-dem":return ue=Qo({key:g,value:c,valueSpec:k[`source_${Q.replace("-","_")}`],style:m.style,styleSpec:k,objectElementValidators:Wu}),ue;case"geojson":if(ue=Qo({key:g,value:c,valueSpec:k.source_geojson,style:Z,styleSpec:k,objectElementValidators:Wu}),c.cluster)for(const Se in c.clusterProperties){const[ze,Ye]=c.clusterProperties[Se],ot=typeof ze=="string"?[ze,["accumulated"],["get",Se]]:ze;ue.push(...Al({key:`${g}.${Se}.map`,value:Ye,expressionContext:"cluster-map"})),ue.push(...Al({key:`${g}.${Se}.reduce`,value:ot,expressionContext:"cluster-reduce"}))}return ue;case"video":return Qo({key:g,value:c,valueSpec:k.source_video,style:Z,styleSpec:k});case"image":return Qo({key:g,value:c,valueSpec:k.source_image,style:Z,styleSpec:k});case"canvas":return[new Ke(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Us({key:`${g}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Z,styleSpec:k})}}function ds(m){const c=m.value,g=m.styleSpec,k=g.light,Z=m.style;let Q=[];const ue=Ji(c);if(c===void 0)return Q;if(ue!=="object")return Q=Q.concat([new Ke("light",c,`object expected, ${ue} found`)]),Q;for(const Se in c){const ze=Se.match(/^(.*)-transition$/);Q=Q.concat(ze&&k[ze[1]]&&k[ze[1]].transition?Ro({key:Se,value:c[Se],valueSpec:g.transition,style:Z,styleSpec:g}):k[Se]?Ro({key:Se,value:c[Se],valueSpec:k[Se],style:Z,styleSpec:g}):[new Ke(Se,c[Se],`unknown property "${Se}"`)])}return Q}function fo(m){const c=m.value,g=m.styleSpec,k=g.terrain,Z=m.style;let Q=[];const ue=Ji(c);if(c===void 0)return Q;if(ue!=="object")return Q=Q.concat([new Ke("terrain",c,`object expected, ${ue} found`)]),Q;for(const Se in c)Q=Q.concat(k[Se]?Ro({key:Se,value:c[Se],valueSpec:k[Se],style:Z,styleSpec:g}):[new Ke(Se,c[Se],`unknown property "${Se}"`)]);return Q}const Cl={"*":()=>[],array:sl,boolean:function(m){const c=m.value,g=m.key,k=Ji(c);return k!=="boolean"?[new Ke(g,c,`boolean expected, ${k} found`)]:[]},number:sc,color:function(m){const c=m.key,g=m.value,k=Ji(g);return k!=="string"?[new Ke(c,g,`color expected, ${k} found`)]:ft(g)===null?[new Ke(c,g,`color expected, "${g}" found`)]:[]},constants:Qe,enum:Us,filter:hs,function:Tl,layer:Zu,object:Qo,source:ul,light:ds,terrain:fo,string:Vs,formatted:function(m){return Vs(m).length===0?[]:Al(m)},resolvedImage:function(m){return Vs(m).length===0?[]:Al(m)},padding:function(m){const c=m.key,g=m.value;if(Ji(g)==="array"){if(g.length<1||g.length>4)return[new Ke(c,g,`padding requires 1 to 4 values; ${g.length} values found`)];const k={type:"number"};let Z=[];for(let Q=0;Q<g.length;Q++)Z=Z.concat(Ro({key:`${c}[${Q}]`,value:g[Q],valueSpec:k}));return Z}return sc({key:c,value:g,valueSpec:{}})}};function Ro(m){const c=m.value,g=m.valueSpec,k=m.styleSpec;return g.expression&&$i(Ne(c))?Tl(m):g.expression&&Vo(ht(c))?Al(m):g.type&&Cl[g.type]?Cl[g.type](m):Qo(it({},m,{valueSpec:g.type?k[g.type]:g}))}function Yc(m){const c=m.value,g=m.key,k=Vs(m);return k.length||(c.indexOf("{fontstack}")===-1&&k.push(new Ke(g,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&k.push(new Ke(g,c,'"glyphs" url must include a "{range}" token'))),k}function ps(m,c=Ie){let g=[];return g=g.concat(Ro({key:"",value:m,valueSpec:c.$root,styleSpec:c,style:m,objectElementValidators:{glyphs:Yc,"*":()=>[]}})),m.constants&&(g=g.concat(Qe({key:"constants",value:m.constants,style:m,styleSpec:c}))),Xc(g)}function Xc(m){return[].concat(m).sort((c,g)=>c.line-g.line)}function Ds(m){return function(...c){return Xc(m.apply(this,c))}}ps.source=Ds(ul),ps.light=Ds(ds),ps.terrain=Ds(fo),ps.layer=Ds(Zu),ps.filter=Ds(hs),ps.paintProperty=Ds(du),ps.layoutProperty=Ds(ll);const pu=ps,ju=pu.light,Kc=pu.paintProperty,Ms=pu.layoutProperty;function Dl(m,c){let g=!1;if(c&&c.length)for(const k of c)m.fire(new at(new Error(k.message))),g=!0;return g}class mu{constructor(c,g,k){const Z=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const ue=new Int32Array(this.arrayBuffer);c=ue[0],this.d=(g=ue[1])+2*(k=ue[2]);for(let ze=0;ze<this.d*this.d;ze++){const Ye=ue[3+ze],ot=ue[3+ze+1];Z.push(Ye===ot?null:ue.subarray(Ye,ot))}const Se=ue[3+Z.length+1];this.keys=ue.subarray(ue[3+Z.length],Se),this.bboxes=ue.subarray(Se),this.insert=this._insertReadonly}else{this.d=g+2*k;for(let ue=0;ue<this.d*this.d;ue++)Z.push([]);this.keys=[],this.bboxes=[]}this.n=g,this.extent=c,this.padding=k,this.scale=g/c,this.uid=0;const Q=k/g*c;this.min=-Q,this.max=c+Q}insert(c,g,k,Z,Q){this._forEachCell(g,k,Z,Q,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(g),this.bboxes.push(k),this.bboxes.push(Z),this.bboxes.push(Q)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,g,k,Z,Q,ue){this.cells[Q].push(ue)}query(c,g,k,Z,Q){const ue=this.min,Se=this.max;if(c<=ue&&g<=ue&&Se<=k&&Se<=Z&&!Q)return Array.prototype.slice.call(this.keys);{const ze=[];return this._forEachCell(c,g,k,Z,this._queryCell,ze,{},Q),ze}}_queryCell(c,g,k,Z,Q,ue,Se,ze){const Ye=this.cells[Q];if(Ye!==null){const ot=this.keys,ct=this.bboxes;for(let wt=0;wt<Ye.length;wt++){const Dt=Ye[wt];if(Se[Dt]===void 0){const It=4*Dt;(ze?ze(ct[It+0],ct[It+1],ct[It+2],ct[It+3]):c<=ct[It+2]&&g<=ct[It+3]&&k>=ct[It+0]&&Z>=ct[It+1])?(Se[Dt]=!0,ue.push(ot[Dt])):Se[Dt]=!1}}}}_forEachCell(c,g,k,Z,Q,ue,Se,ze){const Ye=this._convertToCellCoord(c),ot=this._convertToCellCoord(g),ct=this._convertToCellCoord(k),wt=this._convertToCellCoord(Z);for(let Dt=Ye;Dt<=ct;Dt++)for(let It=ot;It<=wt;It++){const ar=this.d*It+Dt;if((!ze||ze(this._convertFromCellCoord(Dt),this._convertFromCellCoord(It),this._convertFromCellCoord(Dt+1),this._convertFromCellCoord(It+1)))&&Q.call(this,c,g,k,Z,ar,ue,Se,ze))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,g=3+this.cells.length+1+1;let k=0;for(let ue=0;ue<this.cells.length;ue++)k+=this.cells[ue].length;const Z=new Int32Array(g+k+this.keys.length+this.bboxes.length);Z[0]=this.extent,Z[1]=this.n,Z[2]=this.padding;let Q=g;for(let ue=0;ue<c.length;ue++){const Se=c[ue];Z[3+ue]=Q,Z.set(Se,Q),Q+=Se.length}return Z[3+c.length]=Q,Z.set(this.keys,Q),Q+=this.keys.length,Z[3+c.length+1]=Q,Z.set(this.bboxes,Q),Q+=this.bboxes.length,Z.buffer}static serialize(c,g){const k=c.toArrayBuffer();return g&&g.push(k),{buffer:k}}static deserialize(c){return new mu(c.buffer)}}const ho={};function On(m,c,g={}){if(ho[m])throw new Error(`${m} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:m,writeable:!1}),ho[m]={klass:c,omit:g.omit||[],shallow:g.shallow||[]}}On("Object",Object),On("TransferableGridIndex",mu),On("Color",Ve),On("Error",Error),On("AJAXError",K),On("ResolvedImage",Bt),On("StylePropertyFunction",Lo),On("StyleExpression",al,{omit:["_evaluator"]}),On("ZoomDependentExpression",Uu),On("ZoomConstantExpression",jl),On("CompoundExpression",Le,{omit:["_evaluate"]});for(const m in Bs)Bs[m]._classRegistryKey||On(`Expression_${m}`,Bs[m]);function qo(m){return m&&typeof ArrayBuffer<"u"&&(m instanceof ArrayBuffer||m.constructor&&m.constructor.name==="ArrayBuffer")}function Ml(m,c){if(m==null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||m instanceof Boolean||m instanceof Number||m instanceof String||m instanceof Date||m instanceof RegExp||m instanceof Blob)return m;if(qo(m)||j(m))return c&&c.push(m),m;if(ArrayBuffer.isView(m)){const g=m;return c&&c.push(g.buffer),g}if(m instanceof ImageData)return c&&c.push(m.data.buffer),m;if(Array.isArray(m)){const g=[];for(const k of m)g.push(Ml(k,c));return g}if(typeof m=="object"){const g=m.constructor,k=g._classRegistryKey;if(!k)throw new Error("can't serialize object of unregistered class");if(!ho[k])throw new Error(`${k} is not registered.`);const Z=g.serialize?g.serialize(m,c):{};if(g.serialize){if(c&&Z===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const Q in m){if(!m.hasOwnProperty(Q)||ho[k].omit.indexOf(Q)>=0)continue;const ue=m[Q];Z[Q]=ho[k].shallow.indexOf(Q)>=0?ue:Ml(ue,c)}m instanceof Error&&(Z.message=m.message)}if(Z.$name)throw new Error("$name property is reserved for worker serialization logic.");return k!=="Object"&&(Z.$name=k),Z}throw new Error("can't serialize object of type "+typeof m)}function es(m){if(m==null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||m instanceof Boolean||m instanceof Number||m instanceof String||m instanceof Date||m instanceof RegExp||m instanceof Blob||qo(m)||j(m)||ArrayBuffer.isView(m)||m instanceof ImageData)return m;if(Array.isArray(m))return m.map(es);if(typeof m=="object"){const c=m.$name||"Object";if(!ho[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:g}=ho[c];if(!g)throw new Error(`can't deserialize unregistered class ${c}`);if(g.deserialize)return g.deserialize(m);const k=Object.create(g.prototype);for(const Z of Object.keys(m)){if(Z==="$name")continue;const Q=m[Z];k[Z]=ho[c].shallow.indexOf(Z)>=0?Q:es(Q)}return k}throw new Error("can't deserialize object of type "+typeof m)}class uc{constructor(){this.first=!0}update(c,g){const k=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=k,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=k,!0):(this.lastFloorZoom>k?(this.lastIntegerZoom=k+1,this.lastIntegerZoomTime=g):this.lastFloorZoom<k&&(this.lastIntegerZoom=k,this.lastIntegerZoomTime=g),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=k,!0))}}const Mn={"Latin-1 Supplement":m=>m>=128&&m<=255,Arabic:m=>m>=1536&&m<=1791,"Arabic Supplement":m=>m>=1872&&m<=1919,"Arabic Extended-A":m=>m>=2208&&m<=2303,"Hangul Jamo":m=>m>=4352&&m<=4607,"Unified Canadian Aboriginal Syllabics":m=>m>=5120&&m<=5759,Khmer:m=>m>=6016&&m<=6143,"Unified Canadian Aboriginal Syllabics Extended":m=>m>=6320&&m<=6399,"General Punctuation":m=>m>=8192&&m<=8303,"Letterlike Symbols":m=>m>=8448&&m<=8527,"Number Forms":m=>m>=8528&&m<=8591,"Miscellaneous Technical":m=>m>=8960&&m<=9215,"Control Pictures":m=>m>=9216&&m<=9279,"Optical Character Recognition":m=>m>=9280&&m<=9311,"Enclosed Alphanumerics":m=>m>=9312&&m<=9471,"Geometric Shapes":m=>m>=9632&&m<=9727,"Miscellaneous Symbols":m=>m>=9728&&m<=9983,"Miscellaneous Symbols and Arrows":m=>m>=11008&&m<=11263,"CJK Radicals Supplement":m=>m>=11904&&m<=12031,"Kangxi Radicals":m=>m>=12032&&m<=12255,"Ideographic Description Characters":m=>m>=12272&&m<=12287,"CJK Symbols and Punctuation":m=>m>=12288&&m<=12351,Hiragana:m=>m>=12352&&m<=12447,Katakana:m=>m>=12448&&m<=12543,Bopomofo:m=>m>=12544&&m<=12591,"Hangul Compatibility Jamo":m=>m>=12592&&m<=12687,Kanbun:m=>m>=12688&&m<=12703,"Bopomofo Extended":m=>m>=12704&&m<=12735,"CJK Strokes":m=>m>=12736&&m<=12783,"Katakana Phonetic Extensions":m=>m>=12784&&m<=12799,"Enclosed CJK Letters and Months":m=>m>=12800&&m<=13055,"CJK Compatibility":m=>m>=13056&&m<=13311,"CJK Unified Ideographs Extension A":m=>m>=13312&&m<=19903,"Yijing Hexagram Symbols":m=>m>=19904&&m<=19967,"CJK Unified Ideographs":m=>m>=19968&&m<=40959,"Yi Syllables":m=>m>=40960&&m<=42127,"Yi Radicals":m=>m>=42128&&m<=42191,"Hangul Jamo Extended-A":m=>m>=43360&&m<=43391,"Hangul Syllables":m=>m>=44032&&m<=55215,"Hangul Jamo Extended-B":m=>m>=55216&&m<=55295,"Private Use Area":m=>m>=57344&&m<=63743,"CJK Compatibility Ideographs":m=>m>=63744&&m<=64255,"Arabic Presentation Forms-A":m=>m>=64336&&m<=65023,"Vertical Forms":m=>m>=65040&&m<=65055,"CJK Compatibility Forms":m=>m>=65072&&m<=65103,"Small Form Variants":m=>m>=65104&&m<=65135,"Arabic Presentation Forms-B":m=>m>=65136&&m<=65279,"Halfwidth and Fullwidth Forms":m=>m>=65280&&m<=65519};function Yl(m){for(const c of m)if(ms(c.charCodeAt(0)))return!0;return!1}function Jc(m){for(const c of m)if(!cc(c.charCodeAt(0)))return!1;return!0}function cc(m){return!(Mn.Arabic(m)||Mn["Arabic Supplement"](m)||Mn["Arabic Extended-A"](m)||Mn["Arabic Presentation Forms-A"](m)||Mn["Arabic Presentation Forms-B"](m))}function ms(m){return!(m!==746&&m!==747&&(m<4352||!(Mn["Bopomofo Extended"](m)||Mn.Bopomofo(m)||Mn["CJK Compatibility Forms"](m)&&!(m>=65097&&m<=65103)||Mn["CJK Compatibility Ideographs"](m)||Mn["CJK Compatibility"](m)||Mn["CJK Radicals Supplement"](m)||Mn["CJK Strokes"](m)||!(!Mn["CJK Symbols and Punctuation"](m)||m>=12296&&m<=12305||m>=12308&&m<=12319||m===12336)||Mn["CJK Unified Ideographs Extension A"](m)||Mn["CJK Unified Ideographs"](m)||Mn["Enclosed CJK Letters and Months"](m)||Mn["Hangul Compatibility Jamo"](m)||Mn["Hangul Jamo Extended-A"](m)||Mn["Hangul Jamo Extended-B"](m)||Mn["Hangul Jamo"](m)||Mn["Hangul Syllables"](m)||Mn.Hiragana(m)||Mn["Ideographic Description Characters"](m)||Mn.Kanbun(m)||Mn["Kangxi Radicals"](m)||Mn["Katakana Phonetic Extensions"](m)||Mn.Katakana(m)&&m!==12540||!(!Mn["Halfwidth and Fullwidth Forms"](m)||m===65288||m===65289||m===65293||m>=65306&&m<=65310||m===65339||m===65341||m===65343||m>=65371&&m<=65503||m===65507||m>=65512&&m<=65519)||!(!Mn["Small Form Variants"](m)||m>=65112&&m<=65118||m>=65123&&m<=65126)||Mn["Unified Canadian Aboriginal Syllabics"](m)||Mn["Unified Canadian Aboriginal Syllabics Extended"](m)||Mn["Vertical Forms"](m)||Mn["Yijing Hexagram Symbols"](m)||Mn["Yi Syllables"](m)||Mn["Yi Radicals"](m))))}function fc(m){return!(ms(m)||function(c){return!!(Mn["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||Mn["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||Mn["Letterlike Symbols"](c)||Mn["Number Forms"](c)||Mn["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||Mn["Control Pictures"](c)&&c!==9251||Mn["Optical Character Recognition"](c)||Mn["Enclosed Alphanumerics"](c)||Mn["Geometric Shapes"](c)||Mn["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Mn["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Mn["CJK Symbols and Punctuation"](c)||Mn.Katakana(c)||Mn["Private Use Area"](c)||Mn["CJK Compatibility Forms"](c)||Mn["Small Form Variants"](c)||Mn["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(m))}function hc(m){return m>=1424&&m<=2303||Mn["Arabic Presentation Forms-A"](m)||Mn["Arabic Presentation Forms-B"](m)}function kl(m,c){return!(!c&&hc(m)||m>=2304&&m<=3583||m>=3840&&m<=4255||Mn.Khmer(m))}function Yu(m){for(const c of m)if(hc(c.charCodeAt(0)))return!0;return!1}const Xl="deferred",Il="loading",Xu="loaded";let Ku=null,wo="unavailable",Gs=null;const dc=function(m){m&&typeof m=="string"&&m.indexOf("NetworkError")>-1&&(wo="error"),Ku&&Ku(m)};function Zs(){vu.fire(new nt("pluginStateChange",{pluginStatus:wo,pluginURL:Gs}))}const vu=new Fe,Ll=function(){return wo},pc=function(){if(wo!==Xl||!Gs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");wo=Il,Zs(),Gs&&ae({url:Gs},m=>{m?dc(m):(wo=Xu,Zs())})},Zo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>wo===Xu||Zo.applyArabicShaping!=null,isLoading:()=>wo===Il,setState(m){if(!T())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");wo=m.pluginStatus,Gs=m.pluginURL},isParsed(){if(!T())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Zo.applyArabicShaping!=null&&Zo.processBidirectionalText!=null&&Zo.processStyledBidirectionalText!=null},getPluginURL(){if(!T())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Gs}};class ba{constructor(c,g){this.zoom=c,g?(this.now=g.now,this.fadeDuration=g.fadeDuration,this.zoomHistory=g.zoomHistory,this.transition=g.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new uc,this.transition={})}isSupportedScript(c){return function(g,k){for(const Z of g)if(!kl(Z.charCodeAt(0),k))return!1;return!0}(c,Zo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,g=c-Math.floor(c),k=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:g+(1-g)*k}:{fromScale:.5,toScale:1,t:1-(1-k)*g}}}class Kl{constructor(c,g){this.property=c,this.value=g,this.expression=function(k,Z){if($i(k))return new Lo(k,Z);if(Vo(k)){const Q=jc(k,Z);if(Q.result==="error")throw new Error(Q.value.map(ue=>`${ue.key}: ${ue.message}`).join(", "));return Q.value}{let Q=k;return Z.type==="color"&&typeof k=="string"?Q=Ve.parse(k):Z.type!=="padding"||typeof k!="number"&&!Array.isArray(k)||(Q=At.parse(k)),{kind:"constant",evaluate:()=>Q}}}(g===void 0?c.specification.default:g,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,g,k){return this.property.possiblyEvaluate(this,c,g,k)}}class y{constructor(c){this.property=c,this.value=new Kl(c,void 0)}transitioned(c,g){return new fe(this.property,this.value,g,_({},c.transition,this.transition),c.now)}untransitioned(){return new fe(this.property,this.value,null,{},0)}}class B{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return P(this._values[c].value.value)}setValue(c,g){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new y(this._values[c].property)),this._values[c].value=new Kl(this._values[c].property,g===null?void 0:P(g))}getTransition(c){return P(this._values[c].transition)}setTransition(c,g){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new y(this._values[c].property)),this._values[c].transition=P(g)||void 0}serialize(){const c={};for(const g of Object.keys(this._values)){const k=this.getValue(g);k!==void 0&&(c[g]=k);const Z=this.getTransition(g);Z!==void 0&&(c[`${g}-transition`]=Z)}return c}transitioned(c,g){const k=new Pe(this._properties);for(const Z of Object.keys(this._values))k._values[Z]=this._values[Z].transitioned(c,g._values[Z]);return k}untransitioned(){const c=new Pe(this._properties);for(const g of Object.keys(this._values))c._values[g]=this._values[g].untransitioned();return c}}class fe{constructor(c,g,k,Z,Q){this.property=c,this.value=g,this.begin=Q+Z.delay||0,this.end=this.begin+Z.duration||0,c.specification.transition&&(Z.delay||Z.duration)&&(this.prior=k)}possiblyEvaluate(c,g,k){const Z=c.now||0,Q=this.value.possiblyEvaluate(c,g,k),ue=this.prior;if(ue){if(Z>this.end)return this.prior=null,Q;if(this.value.isDataDriven())return this.prior=null,Q;if(Z<this.begin)return ue.possiblyEvaluate(c,g,k);{const Se=(Z-this.begin)/(this.end-this.begin);return this.property.interpolate(ue.possiblyEvaluate(c,g,k),Q,function(ze){if(ze<=0)return 0;if(ze>=1)return 1;const Ye=ze*ze,ot=Ye*ze;return 4*(ze<.5?ot:3*(ze-Ye)+ot-.75)}(Se))}}return Q}}class Pe{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,g,k){const Z=new sr(this._properties);for(const Q of Object.keys(this._values))Z._values[Q]=this._values[Q].possiblyEvaluate(c,g,k);return Z}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class et{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}getValue(c){return P(this._values[c].value)}setValue(c,g){this._values[c]=new Kl(this._values[c].property,g===null?void 0:P(g))}serialize(){const c={};for(const g of Object.keys(this._values)){const k=this.getValue(g);k!==void 0&&(c[g]=k)}return c}possiblyEvaluate(c,g,k){const Z=new sr(this._properties);for(const Q of Object.keys(this._values))Z._values[Q]=this._values[Q].possiblyEvaluate(c,g,k);return Z}}class St{constructor(c,g,k){this.property=c,this.value=g,this.parameters=k}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,g,k,Z){return this.property.evaluate(this.value,this.parameters,c,g,k,Z)}}class sr{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class hr{constructor(c){this.specification=c}possiblyEvaluate(c,g){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(g)}interpolate(c,g,k){const Z=Dn[this.specification.type];return Z?Z(c,g,k):c}}class Ar{constructor(c,g){this.specification=c,this.overrides=g}possiblyEvaluate(c,g,k,Z){return new St(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(g,null,{},k,Z)}:c.expression,g)}interpolate(c,g,k){if(c.value.kind!=="constant"||g.value.kind!=="constant")return c;if(c.value.value===void 0||g.value.value===void 0)return new St(this,{kind:"constant",value:void 0},c.parameters);const Z=Dn[this.specification.type];return Z?new St(this,{kind:"constant",value:Z(c.value.value,g.value.value,k)},c.parameters):c}evaluate(c,g,k,Z,Q,ue){return c.kind==="constant"?c.value:c.evaluate(g,k,Z,Q,ue)}}class dn extends Ar{possiblyEvaluate(c,g,k,Z){if(c.value===void 0)return new St(this,{kind:"constant",value:void 0},g);if(c.expression.kind==="constant"){const Q=c.expression.evaluate(g,null,{},k,Z),ue=c.property.specification.type==="resolvedImage"&&typeof Q!="string"?Q.name:Q,Se=this._calculate(ue,ue,ue,g);return new St(this,{kind:"constant",value:Se},g)}if(c.expression.kind==="camera"){const Q=this._calculate(c.expression.evaluate({zoom:g.zoom-1}),c.expression.evaluate({zoom:g.zoom}),c.expression.evaluate({zoom:g.zoom+1}),g);return new St(this,{kind:"constant",value:Q},g)}return new St(this,c.expression,g)}evaluate(c,g,k,Z,Q,ue){if(c.kind==="source"){const Se=c.evaluate(g,k,Z,Q,ue);return this._calculate(Se,Se,Se,g)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(g.zoom)-1},k,Z),c.evaluate({zoom:Math.floor(g.zoom)},k,Z),c.evaluate({zoom:Math.floor(g.zoom)+1},k,Z),g):c.value}_calculate(c,g,k,Z){return Z.zoom>Z.zoomHistory.lastIntegerZoom?{from:c,to:g}:{from:k,to:g}}interpolate(c){return c}}class Zn{constructor(c){this.specification=c}possiblyEvaluate(c,g,k,Z){if(c.value!==void 0){if(c.expression.kind==="constant"){const Q=c.expression.evaluate(g,null,{},k,Z);return this._calculate(Q,Q,Q,g)}return this._calculate(c.expression.evaluate(new ba(Math.floor(g.zoom-1),g)),c.expression.evaluate(new ba(Math.floor(g.zoom),g)),c.expression.evaluate(new ba(Math.floor(g.zoom+1),g)),g)}}_calculate(c,g,k,Z){return Z.zoom>Z.zoomHistory.lastIntegerZoom?{from:c,to:g}:{from:k,to:g}}interpolate(c){return c}}class ii{constructor(c){this.specification=c}possiblyEvaluate(c,g,k,Z){return!!c.expression.evaluate(g,null,{},k,Z)}interpolate(){return!1}}class Qn{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const g in c){const k=c[g];k.specification.overridable&&this.overridableProperties.push(g);const Z=this.defaultPropertyValues[g]=new Kl(k,void 0),Q=this.defaultTransitionablePropertyValues[g]=new y(k);this.defaultTransitioningPropertyValues[g]=Q.untransitioned(),this.defaultPossiblyEvaluatedValues[g]=Z.possiblyEvaluate({})}}}On("DataDrivenProperty",Ar),On("DataConstantProperty",hr),On("CrossFadedDataDrivenProperty",dn),On("CrossFadedProperty",Zn),On("ColorRampProperty",ii);const Pa="-transition";class Xa extends Fe{constructor(c,g){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),g.layout&&(this._unevaluatedLayout=new et(g.layout)),g.paint)){this._transitionablePaint=new B(g.paint);for(const k in c.paint)this.setPaintProperty(k,c.paint[k],{validate:!1});for(const k in c.layout)this.setLayoutProperty(k,c.layout[k],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sr(g.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,g,k={}){g!=null&&this._validate(Ms,`layers.${this.id}.layout.${c}`,c,g,k)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,g):this.visibility=g)}getPaintProperty(c){return c.endsWith(Pa)?this._transitionablePaint.getTransition(c.slice(0,-Pa.length)):this._transitionablePaint.getValue(c)}setPaintProperty(c,g,k={}){if(g!=null&&this._validate(Kc,`layers.${this.id}.paint.${c}`,c,g,k))return!1;if(c.endsWith(Pa))return this._transitionablePaint.setTransition(c.slice(0,-Pa.length),g||void 0),!1;{const Z=this._transitionablePaint._values[c],Q=Z.property.specification["property-type"]==="cross-faded-data-driven",ue=Z.value.isDataDriven(),Se=Z.value;this._transitionablePaint.setValue(c,g),this._handleSpecialPaintPropertyUpdate(c);const ze=this._transitionablePaint._values[c].value;return ze.isDataDriven()||ue||Q||this._handleOverridablePaintPropertyUpdate(c,Se,ze)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,g,k){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,g){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,g)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,g)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),A(c,(g,k)=>!(g===void 0||k==="layout"&&!Object.keys(g).length||k==="paint"&&!Object.keys(g).length))}_validate(c,g,k,Z,Q={}){return(!Q||Q.validate!==!1)&&Dl(this,c.call(pu,{key:g,layerType:this.type,objectKey:k,value:Z,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const g=this.paint.get(c);if(g instanceof St&&la(g.property.specification)&&(g.value.kind==="source"||g.value.kind==="composite")&&g.value.isStateDependent)return!0}return!1}}const gu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class so{constructor(c,g){this._structArray=c,this._pos1=g*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Aa{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,g){return c._trim(),g&&(c.isTransferred=!0,g.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const g=Object.create(this.prototype);return g.arrayBuffer=c.arrayBuffer,g.length=c.length,g.capacity=c.arrayBuffer.byteLength/g.bytesPerElement,g._refreshViews(),g}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const g=this.uint8;this._refreshViews(),g&&this.uint8.set(g)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Za(m,c=1){let g=0,k=0;return{members:m.map(Z=>{const Q=gu[Z.type].BYTES_PER_ELEMENT,ue=g=mc(g,Math.max(c,Q)),Se=Z.components||1;return k=Math.max(k,Q),g+=Q*Se,{name:Z.name,type:Z.type,components:Se,offset:ue}}),size:mc(g,Math.max(k,c)),alignment:c}}function mc(m,c){return Math.ceil(m/c)*c}class cl extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,g){const k=this.length;return this.resize(k+1),this.emplace(k,c,g)}emplace(c,g,k){const Z=2*c;return this.int16[Z+0]=g,this.int16[Z+1]=k,c}}cl.prototype.bytesPerElement=4,On("StructArrayLayout2i4",cl);class N extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z){const Q=this.length;return this.resize(Q+1),this.emplace(Q,c,g,k,Z)}emplace(c,g,k,Z,Q){const ue=4*c;return this.int16[ue+0]=g,this.int16[ue+1]=k,this.int16[ue+2]=Z,this.int16[ue+3]=Q,c}}N.prototype.bytesPerElement=8,On("StructArrayLayout4i8",N);class f extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue){const Se=this.length;return this.resize(Se+1),this.emplace(Se,c,g,k,Z,Q,ue)}emplace(c,g,k,Z,Q,ue,Se){const ze=6*c;return this.int16[ze+0]=g,this.int16[ze+1]=k,this.int16[ze+2]=Z,this.int16[ze+3]=Q,this.int16[ze+4]=ue,this.int16[ze+5]=Se,c}}f.prototype.bytesPerElement=12,On("StructArrayLayout2i4i12",f);class w extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue){const Se=this.length;return this.resize(Se+1),this.emplace(Se,c,g,k,Z,Q,ue)}emplace(c,g,k,Z,Q,ue,Se){const ze=4*c,Ye=8*c;return this.int16[ze+0]=g,this.int16[ze+1]=k,this.uint8[Ye+4]=Z,this.uint8[Ye+5]=Q,this.uint8[Ye+6]=ue,this.uint8[Ye+7]=Se,c}}w.prototype.bytesPerElement=8,On("StructArrayLayout2i4ub8",w);class O extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,g){const k=this.length;return this.resize(k+1),this.emplace(k,c,g)}emplace(c,g,k){const Z=2*c;return this.float32[Z+0]=g,this.float32[Z+1]=k,c}}O.prototype.bytesPerElement=8,On("StructArrayLayout2f8",O);class G extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue,Se,ze,Ye,ot){const ct=this.length;return this.resize(ct+1),this.emplace(ct,c,g,k,Z,Q,ue,Se,ze,Ye,ot)}emplace(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct){const wt=10*c;return this.uint16[wt+0]=g,this.uint16[wt+1]=k,this.uint16[wt+2]=Z,this.uint16[wt+3]=Q,this.uint16[wt+4]=ue,this.uint16[wt+5]=Se,this.uint16[wt+6]=ze,this.uint16[wt+7]=Ye,this.uint16[wt+8]=ot,this.uint16[wt+9]=ct,c}}G.prototype.bytesPerElement=20,On("StructArrayLayout10ui20",G);class oe extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt)}emplace(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt){const It=12*c;return this.int16[It+0]=g,this.int16[It+1]=k,this.int16[It+2]=Z,this.int16[It+3]=Q,this.uint16[It+4]=ue,this.uint16[It+5]=Se,this.uint16[It+6]=ze,this.uint16[It+7]=Ye,this.int16[It+8]=ot,this.int16[It+9]=ct,this.int16[It+10]=wt,this.int16[It+11]=Dt,c}}oe.prototype.bytesPerElement=24,On("StructArrayLayout4i4ui4i24",oe);class Te extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,g,k){const Z=this.length;return this.resize(Z+1),this.emplace(Z,c,g,k)}emplace(c,g,k,Z){const Q=3*c;return this.float32[Q+0]=g,this.float32[Q+1]=k,this.float32[Q+2]=Z,c}}Te.prototype.bytesPerElement=12,On("StructArrayLayout3f12",Te);class Be extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const g=this.length;return this.resize(g+1),this.emplace(g,c)}emplace(c,g){return this.uint32[1*c+0]=g,c}}Be.prototype.bytesPerElement=4,On("StructArrayLayout1ul4",Be);class Ze extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue,Se,ze,Ye){const ot=this.length;return this.resize(ot+1),this.emplace(ot,c,g,k,Z,Q,ue,Se,ze,Ye)}emplace(c,g,k,Z,Q,ue,Se,ze,Ye,ot){const ct=10*c,wt=5*c;return this.int16[ct+0]=g,this.int16[ct+1]=k,this.int16[ct+2]=Z,this.int16[ct+3]=Q,this.int16[ct+4]=ue,this.int16[ct+5]=Se,this.uint32[wt+3]=ze,this.uint16[ct+8]=Ye,this.uint16[ct+9]=ot,c}}Ze.prototype.bytesPerElement=20,On("StructArrayLayout6i1ul2ui20",Ze);class qe extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue){const Se=this.length;return this.resize(Se+1),this.emplace(Se,c,g,k,Z,Q,ue)}emplace(c,g,k,Z,Q,ue,Se){const ze=6*c;return this.int16[ze+0]=g,this.int16[ze+1]=k,this.int16[ze+2]=Z,this.int16[ze+3]=Q,this.int16[ze+4]=ue,this.int16[ze+5]=Se,c}}qe.prototype.bytesPerElement=12,On("StructArrayLayout2i2i2i12",qe);class ut extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q){const ue=this.length;return this.resize(ue+1),this.emplace(ue,c,g,k,Z,Q)}emplace(c,g,k,Z,Q,ue){const Se=4*c,ze=8*c;return this.float32[Se+0]=g,this.float32[Se+1]=k,this.float32[Se+2]=Z,this.int16[ze+6]=Q,this.int16[ze+7]=ue,c}}ut.prototype.bytesPerElement=16,On("StructArrayLayout2f1f2i16",ut);class _t extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,g,k,Z){const Q=this.length;return this.resize(Q+1),this.emplace(Q,c,g,k,Z)}emplace(c,g,k,Z,Q){const ue=12*c,Se=3*c;return this.uint8[ue+0]=g,this.uint8[ue+1]=k,this.float32[Se+1]=Z,this.float32[Se+2]=Q,c}}_t.prototype.bytesPerElement=12,On("StructArrayLayout2ub2f12",_t);class Et extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,g,k){const Z=this.length;return this.resize(Z+1),this.emplace(Z,c,g,k)}emplace(c,g,k,Z){const Q=3*c;return this.uint16[Q+0]=g,this.uint16[Q+1]=k,this.uint16[Q+2]=Z,c}}Et.prototype.bytesPerElement=6,On("StructArrayLayout3ui6",Et);class jt extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar,qt,Fr){const jr=this.length;return this.resize(jr+1),this.emplace(jr,c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar,qt,Fr)}emplace(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar,qt,Fr,jr){const Lr=24*c,Hr=12*c,ln=48*c;return this.int16[Lr+0]=g,this.int16[Lr+1]=k,this.uint16[Lr+2]=Z,this.uint16[Lr+3]=Q,this.uint32[Hr+2]=ue,this.uint32[Hr+3]=Se,this.uint32[Hr+4]=ze,this.uint16[Lr+10]=Ye,this.uint16[Lr+11]=ot,this.uint16[Lr+12]=ct,this.float32[Hr+7]=wt,this.float32[Hr+8]=Dt,this.uint8[ln+36]=It,this.uint8[ln+37]=ar,this.uint8[ln+38]=qt,this.uint32[Hr+10]=Fr,this.int16[Lr+22]=jr,c}}jt.prototype.bytesPerElement=48,On("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jt);class Ht extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar,qt,Fr,jr,Lr,Hr,ln,an,jn,Jn,Un,Ln,kn,Hn){const Fn=this.length;return this.resize(Fn+1),this.emplace(Fn,c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar,qt,Fr,jr,Lr,Hr,ln,an,jn,Jn,Un,Ln,kn,Hn)}emplace(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar,qt,Fr,jr,Lr,Hr,ln,an,jn,Jn,Un,Ln,kn,Hn,Fn){const gn=34*c,ti=17*c;return this.int16[gn+0]=g,this.int16[gn+1]=k,this.int16[gn+2]=Z,this.int16[gn+3]=Q,this.int16[gn+4]=ue,this.int16[gn+5]=Se,this.int16[gn+6]=ze,this.int16[gn+7]=Ye,this.uint16[gn+8]=ot,this.uint16[gn+9]=ct,this.uint16[gn+10]=wt,this.uint16[gn+11]=Dt,this.uint16[gn+12]=It,this.uint16[gn+13]=ar,this.uint16[gn+14]=qt,this.uint16[gn+15]=Fr,this.uint16[gn+16]=jr,this.uint16[gn+17]=Lr,this.uint16[gn+18]=Hr,this.uint16[gn+19]=ln,this.uint16[gn+20]=an,this.uint16[gn+21]=jn,this.uint16[gn+22]=Jn,this.uint32[ti+12]=Un,this.float32[ti+13]=Ln,this.float32[ti+14]=kn,this.float32[ti+15]=Hn,this.float32[ti+16]=Fn,c}}Ht.prototype.bytesPerElement=68,On("StructArrayLayout8i15ui1ul4f68",Ht);class Zt extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const g=this.length;return this.resize(g+1),this.emplace(g,c)}emplace(c,g){return this.float32[1*c+0]=g,c}}Zt.prototype.bytesPerElement=4,On("StructArrayLayout1f4",Zt);class br extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,g,k){const Z=this.length;return this.resize(Z+1),this.emplace(Z,c,g,k)}emplace(c,g,k,Z){const Q=3*c;return this.int16[Q+0]=g,this.int16[Q+1]=k,this.int16[Q+2]=Z,c}}br.prototype.bytesPerElement=6,On("StructArrayLayout3i6",br);class kr extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,g,k){const Z=this.length;return this.resize(Z+1),this.emplace(Z,c,g,k)}emplace(c,g,k,Z){const Q=4*c;return this.uint32[2*c+0]=g,this.uint16[Q+2]=k,this.uint16[Q+3]=Z,c}}kr.prototype.bytesPerElement=8,On("StructArrayLayout1ul2ui8",kr);class Or extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,g){const k=this.length;return this.resize(k+1),this.emplace(k,c,g)}emplace(c,g,k){const Z=2*c;return this.uint16[Z+0]=g,this.uint16[Z+1]=k,c}}Or.prototype.bytesPerElement=4,On("StructArrayLayout2ui4",Or);class Qt extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const g=this.length;return this.resize(g+1),this.emplace(g,c)}emplace(c,g){return this.uint16[1*c+0]=g,c}}Qt.prototype.bytesPerElement=2,On("StructArrayLayout1ui2",Qt);class Zr extends Aa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,g,k,Z){const Q=this.length;return this.resize(Q+1),this.emplace(Q,c,g,k,Z)}emplace(c,g,k,Z,Q){const ue=4*c;return this.float32[ue+0]=g,this.float32[ue+1]=k,this.float32[ue+2]=Z,this.float32[ue+3]=Q,c}}Zr.prototype.bytesPerElement=16,On("StructArrayLayout4f16",Zr);class Br extends so{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Y(this.anchorPointX,this.anchorPointY)}}Br.prototype.size=20;class Qr extends Ze{get(c){return new Br(this,c)}}On("CollisionBoxArray",Qr);class en extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}en.prototype.size=48;class pn extends jt{get(c){return new en(this,c)}}On("PlacedSymbolArray",pn);class Jr extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Jr.prototype.size=68;class zn extends Ht{get(c){return new Jr(this,c)}}On("SymbolInstanceArray",zn);class In extends Zt{getoffsetX(c){return this.float32[1*c+0]}}On("GlyphOffsetArray",In);class Vn extends br{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}On("SymbolLineVertexArray",Vn);class ai extends so{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ai.prototype.size=8;class bi extends kr{get(c){return new ai(this,c)}}On("FeatureIndexArray",bi);class qn extends cl{}class ta extends cl{}class ra extends cl{}class Gi extends f{}class ji extends w{}class da extends O{}class Ka extends G{}class ks extends oe{}class Is extends Te{}class fl extends Be{}class Jl extends qe{}class Ls extends _t{}class ka extends Et{}class hl extends Or{}const vc=Za([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ca}=vc;class Ti{constructor(c=[]){this.segments=c}prepareSegment(c,g,k,Z){let Q=this.segments[this.segments.length-1];return c>Ti.MAX_VERTEX_ARRAY_LENGTH&&R(`Max vertices per segment is ${Ti.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!Q||Q.vertexLength+c>Ti.MAX_VERTEX_ARRAY_LENGTH||Q.sortKey!==Z)&&(Q={vertexOffset:g.length,primitiveOffset:k.length,vertexLength:0,primitiveLength:0},Z!==void 0&&(Q.sortKey=Z),this.segments.push(Q)),Q}get(){return this.segments}destroy(){for(const c of this.segments)for(const g in c.vaos)c.vaos[g].destroy()}static simpleSegment(c,g,k,Z){return new Ti([{vertexOffset:c,primitiveOffset:g,vertexLength:k,primitiveLength:Z,vaos:{},sortKey:0}])}}function Qi(m,c){return 256*(m=d(Math.floor(m),0,255))+d(Math.floor(c),0,255)}Ti.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,On("SegmentVector",Ti);const po=Za([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var mo={exports:{}},Ia={exports:{}};Ia.exports=function(m,c){var g,k,Z,Q,ue,Se,ze,Ye;for(k=m.length-(g=3&m.length),Z=c,ue=3432918353,Se=461845907,Ye=0;Ye<k;)ze=255&m.charCodeAt(Ye)|(255&m.charCodeAt(++Ye))<<8|(255&m.charCodeAt(++Ye))<<16|(255&m.charCodeAt(++Ye))<<24,++Ye,Z=27492+(65535&(Q=5*(65535&(Z=(Z^=ze=(65535&(ze=(ze=(65535&ze)*ue+(((ze>>>16)*ue&65535)<<16)&4294967295)<<15|ze>>>17))*Se+(((ze>>>16)*Se&65535)<<16)&4294967295)<<13|Z>>>19))+((5*(Z>>>16)&65535)<<16)&4294967295))+((58964+(Q>>>16)&65535)<<16);switch(ze=0,g){case 3:ze^=(255&m.charCodeAt(Ye+2))<<16;case 2:ze^=(255&m.charCodeAt(Ye+1))<<8;case 1:Z^=ze=(65535&(ze=(ze=(65535&(ze^=255&m.charCodeAt(Ye)))*ue+(((ze>>>16)*ue&65535)<<16)&4294967295)<<15|ze>>>17))*Se+(((ze>>>16)*Se&65535)<<16)&4294967295}return Z^=m.length,Z=2246822507*(65535&(Z^=Z>>>16))+((2246822507*(Z>>>16)&65535)<<16)&4294967295,Z=3266489909*(65535&(Z^=Z>>>13))+((3266489909*(Z>>>16)&65535)<<16)&4294967295,(Z^=Z>>>16)>>>0};var vs={exports:{}};vs.exports=function(m,c){for(var g,k=m.length,Z=c^k,Q=0;k>=4;)g=1540483477*(65535&(g=255&m.charCodeAt(Q)|(255&m.charCodeAt(++Q))<<8|(255&m.charCodeAt(++Q))<<16|(255&m.charCodeAt(++Q))<<24))+((1540483477*(g>>>16)&65535)<<16),Z=1540483477*(65535&Z)+((1540483477*(Z>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),k-=4,++Q;switch(k){case 3:Z^=(255&m.charCodeAt(Q+2))<<16;case 2:Z^=(255&m.charCodeAt(Q+1))<<8;case 1:Z=1540483477*(65535&(Z^=255&m.charCodeAt(Q)))+((1540483477*(Z>>>16)&65535)<<16)}return Z=1540483477*(65535&(Z^=Z>>>13))+((1540483477*(Z>>>16)&65535)<<16),(Z^=Z>>>15)>>>0};var $l=Ia.exports,$c=vs.exports;mo.exports=$l,mo.exports.murmur3=$l,mo.exports.murmur2=$c;class yu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,g,k,Z){this.ids.push(Hf(c)),this.positions.push(g,k,Z)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const g=Hf(c);let k=0,Z=this.ids.length-1;for(;k<Z;){const ue=k+Z>>1;this.ids[ue]>=g?Z=ue:k=ue+1}const Q=[];for(;this.ids[k]===g;)Q.push({index:this.positions[3*k],start:this.positions[3*k+1],end:this.positions[3*k+2]}),k++;return Q}static serialize(c,g){const k=new Float64Array(c.ids),Z=new Uint32Array(c.positions);return Qc(k,Z,0,k.length-1),g&&g.push(k.buffer,Z.buffer),{ids:k,positions:Z}}static deserialize(c){const g=new yu;return g.ids=c.ids,g.positions=c.positions,g.indexed=!0,g}}function Hf(m){const c=+m;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:mo.exports(String(m))}function Qc(m,c,g,k){for(;g<k;){const Z=m[g+k>>1];let Q=g-1,ue=k+1;for(;;){do Q++;while(m[Q]<Z);do ue--;while(m[ue]>Z);if(Q>=ue)break;Ql(m,Q,ue),Ql(c,3*Q,3*ue),Ql(c,3*Q+1,3*ue+1),Ql(c,3*Q+2,3*ue+2)}ue-g<k-ue?(Qc(m,c,g,ue),g=ue+1):(Qc(m,c,ue+1,k),k=ue)}}function Ql(m,c,g){const k=m[c];m[c]=m[g],m[g]=k}On("FeaturePositionMap",yu);class _u{constructor(c,g){this.gl=c.gl,this.location=g}}class bu extends _u{constructor(c,g){super(c,g),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class gc extends _u{constructor(c,g){super(c,g),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class kh extends _u{constructor(c,g){super(c,g),this.current=Ve.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const Vf=new Float32Array(16);function Gf(m){return[Qi(255*m.r,255*m.g),Qi(255*m.b,255*m.a)]}class Ju{constructor(c,g,k){this.value=c,this.uniformNames=g.map(Z=>`u_${Z}`),this.type=k}setUniform(c,g,k){c.set(k.constantOr(this.value))}getBinding(c,g,k){return this.type==="color"?new kh(c,g):new bu(c,g)}}class yc{constructor(c,g){this.uniformNames=g.map(k=>`u_${k}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,g){this.pixelRatioFrom=g.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=g.tlbr,this.patternTo=c.tlbr}setUniform(c,g,k,Z){const Q=Z==="u_pattern_to"?this.patternTo:Z==="u_pattern_from"?this.patternFrom:Z==="u_pixel_ratio_to"?this.pixelRatioTo:Z==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Q&&c.set(Q)}getBinding(c,g,k){return k.substr(0,9)==="u_pattern"?new gc(c,g):new bu(c,g)}}class Ws{constructor(c,g,k,Z){this.expression=c,this.type=k,this.maxValue=0,this.paintVertexAttributes=g.map(Q=>({name:`a_${Q}`,type:"Float32",components:k==="color"?2:1,offset:0})),this.paintVertexArray=new Z}populatePaintArray(c,g,k,Z,Q){const ue=this.paintVertexArray.length,Se=this.expression.evaluate(new ba(0),g,{},Z,[],Q);this.paintVertexArray.resize(c),this._setPaintValue(ue,c,Se)}updatePaintArray(c,g,k,Z){const Q=this.expression.evaluate({zoom:0},k,Z);this._setPaintValue(c,g,Q)}_setPaintValue(c,g,k){if(this.type==="color"){const Z=Gf(k);for(let Q=c;Q<g;Q++)this.paintVertexArray.emplace(Q,Z[0],Z[1])}else{for(let Z=c;Z<g;Z++)this.paintVertexArray.emplace(Z,k);this.maxValue=Math.max(this.maxValue,Math.abs(k))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class va{constructor(c,g,k,Z,Q,ue){this.expression=c,this.uniformNames=g.map(Se=>`u_${Se}_t`),this.type=k,this.useIntegerZoom=Z,this.zoom=Q,this.maxValue=0,this.paintVertexAttributes=g.map(Se=>({name:`a_${Se}`,type:"Float32",components:k==="color"?4:2,offset:0})),this.paintVertexArray=new ue}populatePaintArray(c,g,k,Z,Q){const ue=this.expression.evaluate(new ba(this.zoom),g,{},Z,[],Q),Se=this.expression.evaluate(new ba(this.zoom+1),g,{},Z,[],Q),ze=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(ze,c,ue,Se)}updatePaintArray(c,g,k,Z){const Q=this.expression.evaluate({zoom:this.zoom},k,Z),ue=this.expression.evaluate({zoom:this.zoom+1},k,Z);this._setPaintValue(c,g,Q,ue)}_setPaintValue(c,g,k,Z){if(this.type==="color"){const Q=Gf(k),ue=Gf(Z);for(let Se=c;Se<g;Se++)this.paintVertexArray.emplace(Se,Q[0],Q[1],ue[0],ue[1])}else{for(let Q=c;Q<g;Q++)this.paintVertexArray.emplace(Q,k,Z);this.maxValue=Math.max(this.maxValue,Math.abs(k),Math.abs(Z))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,g){const k=this.useIntegerZoom?Math.floor(g.zoom):g.zoom,Z=d(this.expression.interpolationFactor(k,this.zoom,this.zoom+1),0,1);c.set(Z)}getBinding(c,g,k){return new bu(c,g)}}class xu{constructor(c,g,k,Z,Q,ue){this.expression=c,this.type=g,this.useIntegerZoom=k,this.zoom=Z,this.layerId=ue,this.zoomInPaintVertexArray=new Q,this.zoomOutPaintVertexArray=new Q}populatePaintArray(c,g,k){const Z=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(Z,c,g.patterns&&g.patterns[this.layerId],k)}updatePaintArray(c,g,k,Z,Q){this._setPaintValues(c,g,k.patterns&&k.patterns[this.layerId],Q)}_setPaintValues(c,g,k,Z){if(!Z||!k)return;const{min:Q,mid:ue,max:Se}=k,ze=Z[Q],Ye=Z[ue],ot=Z[Se];if(ze&&Ye&&ot)for(let ct=c;ct<g;ct++)this.zoomInPaintVertexArray.emplace(ct,Ye.tl[0],Ye.tl[1],Ye.br[0],Ye.br[1],ze.tl[0],ze.tl[1],ze.br[0],ze.br[1],Ye.pixelRatio,ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(ct,Ye.tl[0],Ye.tl[1],Ye.br[0],Ye.br[1],ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],Ye.pixelRatio,ot.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,po.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,po.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $u{constructor(c,g,k){this.binders={},this._buffers=[];const Z=[];for(const Q in c.paint._values){if(!k(Q))continue;const ue=c.paint.get(Q);if(!(ue instanceof St&&la(ue.property.specification)))continue;const Se=Ih(Q,c.type),ze=ue.value,Ye=ue.property.specification.type,ot=ue.property.useIntegerZoom,ct=ue.property.specification["property-type"],wt=ct==="cross-faded"||ct==="cross-faded-data-driven";if(ze.kind==="constant")this.binders[Q]=wt?new yc(ze.value,Se):new Ju(ze.value,Se,Ye),Z.push(`/u_${Q}`);else if(ze.kind==="source"||wt){const Dt=Td(Q,Ye,"source");this.binders[Q]=wt?new xu(ze,Ye,ot,g,Dt,c.id):new Ws(ze,Se,Ye,Dt),Z.push(`/a_${Q}`)}else{const Dt=Td(Q,Ye,"composite");this.binders[Q]=new va(ze,Se,Ye,ot,g,Dt),Z.push(`/z_${Q}`)}}this.cacheKey=Z.sort().join("")}getMaxValue(c){const g=this.binders[c];return g instanceof Ws||g instanceof va?g.maxValue:0}populatePaintArrays(c,g,k,Z,Q){for(const ue in this.binders){const Se=this.binders[ue];(Se instanceof Ws||Se instanceof va||Se instanceof xu)&&Se.populatePaintArray(c,g,k,Z,Q)}}setConstantPatternPositions(c,g){for(const k in this.binders){const Z=this.binders[k];Z instanceof yc&&Z.setConstantPatternPositions(c,g)}}updatePaintArrays(c,g,k,Z,Q){let ue=!1;for(const Se in c){const ze=g.getPositions(Se);for(const Ye of ze){const ot=k.feature(Ye.index);for(const ct in this.binders){const wt=this.binders[ct];if((wt instanceof Ws||wt instanceof va||wt instanceof xu)&&wt.expression.isStateDependent===!0){const Dt=Z.paint.get(ct);wt.expression=Dt.value,wt.updatePaintArray(Ye.start,Ye.end,ot,c[Se],Q),ue=!0}}}}return ue}defines(){const c=[];for(const g in this.binders){const k=this.binders[g];(k instanceof Ju||k instanceof yc)&&c.push(...k.uniformNames.map(Z=>`#define HAS_UNIFORM_${Z}`))}return c}getBinderAttributes(){const c=[];for(const g in this.binders){const k=this.binders[g];if(k instanceof Ws||k instanceof va)for(let Z=0;Z<k.paintVertexAttributes.length;Z++)c.push(k.paintVertexAttributes[Z].name);else if(k instanceof xu)for(let Z=0;Z<po.members.length;Z++)c.push(po.members[Z].name)}return c}getBinderUniforms(){const c=[];for(const g in this.binders){const k=this.binders[g];if(k instanceof Ju||k instanceof yc||k instanceof va)for(const Z of k.uniformNames)c.push(Z)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,g){const k=[];for(const Z in this.binders){const Q=this.binders[Z];if(Q instanceof Ju||Q instanceof yc||Q instanceof va){for(const ue of Q.uniformNames)if(g[ue]){const Se=Q.getBinding(c,g[ue],ue);k.push({name:ue,property:Z,binding:Se})}}}return k}setUniforms(c,g,k,Z){for(const{name:Q,property:ue,binding:Se}of g)this.binders[ue].setUniform(Se,Z,k.get(ue),Q)}updatePaintBuffers(c){this._buffers=[];for(const g in this.binders){const k=this.binders[g];if(c&&k instanceof xu){const Z=c.fromScale===2?k.zoomInPaintVertexBuffer:k.zoomOutPaintVertexBuffer;Z&&this._buffers.push(Z)}else(k instanceof Ws||k instanceof va)&&k.paintVertexBuffer&&this._buffers.push(k.paintVertexBuffer)}}upload(c){for(const g in this.binders){const k=this.binders[g];(k instanceof Ws||k instanceof va||k instanceof xu)&&k.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const g=this.binders[c];(g instanceof Ws||g instanceof va||g instanceof xu)&&g.destroy()}}}class ql{constructor(c,g,k=()=>!0){this.programConfigurations={};for(const Z of c)this.programConfigurations[Z.id]=new $u(Z,g,k);this.needsUpload=!1,this._featureMap=new yu,this._bufferOffset=0}populatePaintArrays(c,g,k,Z,Q,ue){for(const Se in this.programConfigurations)this.programConfigurations[Se].populatePaintArrays(c,g,Z,Q,ue);g.id!==void 0&&this._featureMap.add(g.id,k,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,g,k,Z){for(const Q of k)this.needsUpload=this.programConfigurations[Q.id].updatePaintArrays(c,this._featureMap,g,Q,Z)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const g in this.programConfigurations)this.programConfigurations[g].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function Ih(m,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[m]||[m.replace(`${c}-`,"").replace(/-/g,"_")]}function Td(m,c,g){const k={color:{source:O,composite:Zr},number:{source:Zt,composite:O}},Z=function(Q){return{"line-pattern":{source:Ka,composite:Ka},"fill-pattern":{source:Ka,composite:Ka},"fill-extrusion-pattern":{source:Ka,composite:Ka}}[Q]}(m);return Z&&Z[g]||k[c][g]}On("ConstantBinder",Ju),On("CrossFadedConstantBinder",yc),On("SourceExpressionBinder",Ws),On("CrossFadedCompositeBinder",xu),On("CompositeExpressionBinder",va),On("ProgramConfiguration",$u,{omit:["_buffers"]}),On("ProgramConfigurationSet",ql);var Ja=8192;const qc=Math.pow(2,14)-1,Lh=-qc-1;function _c(m){const c=Ja/m.extent,g=m.loadGeometry();for(let k=0;k<g.length;k++){const Z=g[k];for(let Q=0;Q<Z.length;Q++){const ue=Z[Q],Se=Math.round(ue.x*c),ze=Math.round(ue.y*c);ue.x=d(Se,Lh,qc),ue.y=d(ze,Lh,qc),(Se<ue.x||Se>ue.x+1||ze<ue.y||ze>ue.y+1)&&R("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return g}function bc(m,c){return{type:m.type,id:m.id,properties:m.properties,geometry:c?_c(m):[]}}function Zf(m,c,g,k,Z){m.emplaceBack(2*c+(k+1)/2,2*g+(Z+1)/2)}class Ph{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(g=>g.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new ta,this.indexArray=new ka,this.segments=new Ti,this.programConfigurations=new ql(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(c,g,k){const Z=this.layers[0],Q=[];let ue=null,Se=!1;Z.type==="circle"&&(ue=Z.layout.get("circle-sort-key"),Se=!ue.isConstant());for(const{feature:ze,id:Ye,index:ot,sourceLayerIndex:ct}of c){const wt=this.layers[0]._featureFilter.needGeometry,Dt=bc(ze,wt);if(!this.layers[0]._featureFilter.filter(new ba(this.zoom),Dt,k))continue;const It=Se?ue.evaluate(Dt,{},k):void 0,ar={id:Ye,properties:ze.properties,type:ze.type,sourceLayerIndex:ct,index:ot,geometry:wt?Dt.geometry:_c(ze),patterns:{},sortKey:It};Q.push(ar)}Se&&Q.sort((ze,Ye)=>ze.sortKey-Ye.sortKey);for(const ze of Q){const{geometry:Ye,index:ot,sourceLayerIndex:ct}=ze,wt=c[ot].feature;this.addFeature(ze,Ye,ot,k),g.featureIndex.insert(wt,Ye,ot,ct,this.index)}}update(c,g,k){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,g,this.stateDependentLayers,k)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ca),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,g,k,Z){for(const Q of g)for(const ue of Q){const Se=ue.x,ze=ue.y;if(Se<0||Se>=Ja||ze<0||ze>=Ja)continue;const Ye=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),ot=Ye.vertexLength;Zf(this.layoutVertexArray,Se,ze,-1,-1),Zf(this.layoutVertexArray,Se,ze,1,-1),Zf(this.layoutVertexArray,Se,ze,1,1),Zf(this.layoutVertexArray,Se,ze,-1,1),this.indexArray.emplaceBack(ot,ot+1,ot+2),this.indexArray.emplaceBack(ot,ot+3,ot+2),Ye.vertexLength+=4,Ye.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,k,{},Z)}}function Wf(m,c){for(let g=0;g<m.length;g++)if(Xe(c,m[g]))return!0;for(let g=0;g<c.length;g++)if(Xe(m,c[g]))return!0;return!!W(m,c)}function rm(m,c,g){return!!Xe(m,c)||!!ge(c,m,g)}function Ad(m,c){if(m.length===1)return Ce(c,m[0]);for(let g=0;g<c.length;g++){const k=c[g];for(let Z=0;Z<k.length;Z++)if(Xe(m,k[Z]))return!0}for(let g=0;g<m.length;g++)if(Ce(c,m[g]))return!0;for(let g=0;g<c.length;g++)if(W(m,c[g]))return!0;return!1}function C(m,c,g){if(m.length>1){if(W(m,c))return!0;for(let k=0;k<c.length;k++)if(ge(c[k],m,g))return!0}for(let k=0;k<m.length;k++)if(ge(m[k],c,g))return!0;return!1}function W(m,c){if(m.length===0||c.length===0)return!1;for(let g=0;g<m.length-1;g++){const k=m[g],Z=m[g+1];for(let Q=0;Q<c.length-1;Q++)if(se(k,Z,c[Q],c[Q+1]))return!0}return!1}function se(m,c,g,k){return S(m,g,k)!==S(c,g,k)&&S(m,c,g)!==S(m,c,k)}function ge(m,c,g){const k=g*g;if(c.length===1)return m.distSqr(c[0])<k;for(let Z=1;Z<c.length;Z++)if(be(m,c[Z-1],c[Z])<k)return!0;return!1}function be(m,c,g){const k=c.distSqr(g);if(k===0)return m.distSqr(c);const Z=((m.x-c.x)*(g.x-c.x)+(m.y-c.y)*(g.y-c.y))/k;return m.distSqr(Z<0?c:Z>1?g:g.sub(c)._mult(Z)._add(c))}function Ce(m,c){let g,k,Z,Q=!1;for(let ue=0;ue<m.length;ue++){g=m[ue];for(let Se=0,ze=g.length-1;Se<g.length;ze=Se++)k=g[Se],Z=g[ze],k.y>c.y!=Z.y>c.y&&c.x<(Z.x-k.x)*(c.y-k.y)/(Z.y-k.y)+k.x&&(Q=!Q)}return Q}function Xe(m,c){let g=!1;for(let k=0,Z=m.length-1;k<m.length;Z=k++){const Q=m[k],ue=m[Z];Q.y>c.y!=ue.y>c.y&&c.x<(ue.x-Q.x)*(c.y-Q.y)/(ue.y-Q.y)+Q.x&&(g=!g)}return g}function Ge(m,c,g){const k=g[0],Z=g[2];if(m.x<k.x&&c.x<k.x||m.x>Z.x&&c.x>Z.x||m.y<k.y&&c.y<k.y||m.y>Z.y&&c.y>Z.y)return!1;const Q=S(m,c,g[0]);return Q!==S(m,c,g[1])||Q!==S(m,c,g[2])||Q!==S(m,c,g[3])}function tt(m,c,g){const k=c.paint.get(m).value;return k.kind==="constant"?k.value:g.programConfigurations.get(c.id).getMaxValue(m)}function gt(m){return Math.sqrt(m[0]*m[0]+m[1]*m[1])}function yt(m,c,g,k,Z){if(!c[0]&&!c[1])return m;const Q=Y.convert(c)._mult(Z);g==="viewport"&&Q._rotate(-k);const ue=[];for(let Se=0;Se<m.length;Se++)ue.push(m[Se].sub(Q));return ue}On("CircleBucket",Ph,{omit:["layers"]});const Ft=new Qn({"circle-sort-key":new Ar(Ie.layout_circle["circle-sort-key"])});var Ot={paint:new Qn({"circle-radius":new Ar(Ie.paint_circle["circle-radius"]),"circle-color":new Ar(Ie.paint_circle["circle-color"]),"circle-blur":new Ar(Ie.paint_circle["circle-blur"]),"circle-opacity":new Ar(Ie.paint_circle["circle-opacity"]),"circle-translate":new hr(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new hr(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new hr(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new hr(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ar(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ar(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ar(Ie.paint_circle["circle-stroke-opacity"])}),layout:Ft},rr=1e-6,yr=typeof Float32Array<"u"?Float32Array:Array;function Ut(){var m=new yr(9);return yr!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m}function Jt(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}function or(m,c,g){var k=c[0],Z=c[1],Q=c[2],ue=c[3],Se=c[4],ze=c[5],Ye=c[6],ot=c[7],ct=c[8],wt=c[9],Dt=c[10],It=c[11],ar=c[12],qt=c[13],Fr=c[14],jr=c[15],Lr=g[0],Hr=g[1],ln=g[2],an=g[3];return m[0]=Lr*k+Hr*Se+ln*ct+an*ar,m[1]=Lr*Z+Hr*ze+ln*wt+an*qt,m[2]=Lr*Q+Hr*Ye+ln*Dt+an*Fr,m[3]=Lr*ue+Hr*ot+ln*It+an*jr,m[4]=(Lr=g[4])*k+(Hr=g[5])*Se+(ln=g[6])*ct+(an=g[7])*ar,m[5]=Lr*Z+Hr*ze+ln*wt+an*qt,m[6]=Lr*Q+Hr*Ye+ln*Dt+an*Fr,m[7]=Lr*ue+Hr*ot+ln*It+an*jr,m[8]=(Lr=g[8])*k+(Hr=g[9])*Se+(ln=g[10])*ct+(an=g[11])*ar,m[9]=Lr*Z+Hr*ze+ln*wt+an*qt,m[10]=Lr*Q+Hr*Ye+ln*Dt+an*Fr,m[11]=Lr*ue+Hr*ot+ln*It+an*jr,m[12]=(Lr=g[12])*k+(Hr=g[13])*Se+(ln=g[14])*ct+(an=g[15])*ar,m[13]=Lr*Z+Hr*ze+ln*wt+an*qt,m[14]=Lr*Q+Hr*Ye+ln*Dt+an*Fr,m[15]=Lr*ue+Hr*ot+ln*It+an*jr,m}Math.hypot||(Math.hypot=function(){for(var m=0,c=arguments.length;c--;)m+=arguments[c]*arguments[c];return Math.sqrt(m)});var xr,Cr=or;function ur(){var m=new yr(3);return yr!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0),m}function rn(m,c,g){var k=new yr(3);return k[0]=m,k[1]=c,k[2]=g,k}function xn(m,c,g){var k=c[0],Z=c[1],Q=c[2],ue=c[3];return m[0]=g[0]*k+g[4]*Z+g[8]*Q+g[12]*ue,m[1]=g[1]*k+g[5]*Z+g[9]*Q+g[13]*ue,m[2]=g[2]*k+g[6]*Z+g[10]*Q+g[14]*ue,m[3]=g[3]*k+g[7]*Z+g[11]*Q+g[15]*ue,m}function Cn(){var m=new yr(4);return yr!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0),m[3]=1,m}function An(m,c){const g=xn([],[m.x,m.y,0,1],c);return new Y(g[0]/g[3],g[1]/g[3])}ur(),xr=new yr(4),yr!=Float32Array&&(xr[0]=0,xr[1]=0,xr[2]=0,xr[3]=0),ur(),rn(1,0,0),rn(0,1,0),Cn(),Cn(),Ut(),function(){var m;m=new yr(2),yr!=Float32Array&&(m[0]=0,m[1]=0)}();class Nn extends Ph{}On("HeatmapBucket",Nn,{omit:["layers"]});var Gn={paint:new Qn({"heatmap-radius":new Ar(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ar(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new hr(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ii(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new hr(Ie.paint_heatmap["heatmap-opacity"])})};function ui(m,{width:c,height:g},k,Z){if(Z){if(Z instanceof Uint8ClampedArray)Z=new Uint8Array(Z.buffer);else if(Z.length!==c*g*k)throw new RangeError(`mismatched image size. expected: ${Z.length} but got: ${c*g*k}`)}else Z=new Uint8Array(c*g*k);return m.width=c,m.height=g,m.data=Z,m}function Wn(m,{width:c,height:g},k){if(c===m.width&&g===m.height)return;const Z=ui({},{width:c,height:g},k);ni(m,Z,{x:0,y:0},{x:0,y:0},{width:Math.min(m.width,c),height:Math.min(m.height,g)},k),m.width=c,m.height=g,m.data=Z.data}function ni(m,c,g,k,Z,Q){if(Z.width===0||Z.height===0)return c;if(Z.width>m.width||Z.height>m.height||g.x>m.width-Z.width||g.y>m.height-Z.height)throw new RangeError("out of range source coordinates for image copy");if(Z.width>c.width||Z.height>c.height||k.x>c.width-Z.width||k.y>c.height-Z.height)throw new RangeError("out of range destination coordinates for image copy");const ue=m.data,Se=c.data;if(ue===Se)throw new Error("srcData equals dstData, so image is already copied");for(let ze=0;ze<Z.height;ze++){const Ye=((g.y+ze)*m.width+g.x)*Q,ot=((k.y+ze)*c.width+k.x)*Q;for(let ct=0;ct<Z.width*Q;ct++)Se[ot+ct]=ue[Ye+ct]}return c}class Li{constructor(c,g){ui(this,c,1,g)}resize(c){Wn(this,c,1)}clone(){return new Li({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,g,k,Z,Q){ni(c,g,k,Z,Q,1)}}class na{constructor(c,g){ui(this,c,4,g)}resize(c){Wn(this,c,4)}replace(c,g){g?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,g,k,Z,Q){ni(c,g,k,Z,Q,4)}}function ia(m){const c={},g=m.resolution||256,k=m.clips?m.clips.length:1,Z=m.image||new na({width:g,height:k});if(Math.log(g)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${g}`);const Q=(ue,Se,ze)=>{c[m.evaluationKey]=ze;const Ye=m.expression.evaluate(c);Z.data[ue+Se+0]=Math.floor(255*Ye.r/Ye.a),Z.data[ue+Se+1]=Math.floor(255*Ye.g/Ye.a),Z.data[ue+Se+2]=Math.floor(255*Ye.b/Ye.a),Z.data[ue+Se+3]=Math.floor(255*Ye.a)};if(m.clips)for(let ue=0,Se=0;ue<k;++ue,Se+=4*g)for(let ze=0,Ye=0;ze<g;ze++,Ye+=4){const ot=ze/(g-1),{start:ct,end:wt}=m.clips[ue];Q(Se,Ye,ct*(1-ot)+wt*ot)}else for(let ue=0,Se=0;ue<g;ue++,Se+=4)Q(0,Se,ue/(g-1));return Z}On("AlphaImage",Li),On("RGBAImage",na);var Tn={paint:new Qn({"hillshade-illumination-direction":new hr(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new hr(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new hr(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new hr(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new hr(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new hr(Ie.paint_hillshade["hillshade-accent-color"])})};const fi=Za([{name:"a_pos",components:2,type:"Int16"}],4),{members:pi}=fi;var Oi={exports:{}};function Da(m,c,g){g=g||2;var k,Z,Q,ue,Se,ze,Ye,ot=c&&c.length,ct=ot?c[0]*g:m.length,wt=no(m,0,ct,g,!0),Dt=[];if(!wt||wt.next===wt.prev)return Dt;if(ot&&(wt=function(ar,qt,Fr,jr){var Lr,Hr,ln,an=[];for(Lr=0,Hr=qt.length;Lr<Hr;Lr++)(ln=no(ar,qt[Lr]*jr,Lr<Hr-1?qt[Lr+1]*jr:ar.length,jr,!1))===ln.next&&(ln.steiner=!0),an.push(Fo(ln));for(an.sort(Rs),Lr=0;Lr<an.length;Lr++)Fr=xc(an[Lr],Fr);return Fr}(m,c,wt,g)),m.length>80*g){k=Q=m[0],Z=ue=m[1];for(var It=g;It<ct;It+=g)(Se=m[It])<k&&(k=Se),(ze=m[It+1])<Z&&(Z=ze),Se>Q&&(Q=Se),ze>ue&&(ue=ze);Ye=(Ye=Math.max(Q-k,ue-Z))!==0?32767/Ye:0}return vo(wt,Dt,g,k,Z,Ye,0),Dt}function no(m,c,g,k,Z){var Q,ue;if(Z===am(m,c,g,k)>0)for(Q=c;Q<g;Q+=k)ue=T0(Q,m[Q],m[Q+1],ue);else for(Q=g-k;Q>=c;Q-=k)ue=T0(Q,m[Q],m[Q+1],ue);return ue&&wu(ue,ue.next)&&(Rh(ue),ue=ue.next),ue}function Wa(m,c){if(!m)return m;c||(c=m);var g,k=m;do if(g=!1,k.steiner||!wu(k,k.next)&&ua(k.prev,k,k.next)!==0)k=k.next;else{if(Rh(k),(k=c=k.prev)===k.next)break;g=!0}while(g||k!==c);return c}function vo(m,c,g,k,Z,Q,ue){if(m){!ue&&Q&&function(ot,ct,wt,Dt){var It=ot;do It.z===0&&(It.z=js(It.x,It.y,ct,wt,Dt)),It.prevZ=It.prev,It.nextZ=It.next,It=It.next;while(It!==ot);It.prevZ.nextZ=null,It.prevZ=null,function(ar){var qt,Fr,jr,Lr,Hr,ln,an,jn,Jn=1;do{for(Fr=ar,ar=null,Hr=null,ln=0;Fr;){for(ln++,jr=Fr,an=0,qt=0;qt<Jn&&(an++,jr=jr.nextZ);qt++);for(jn=Jn;an>0||jn>0&&jr;)an!==0&&(jn===0||!jr||Fr.z<=jr.z)?(Lr=Fr,Fr=Fr.nextZ,an--):(Lr=jr,jr=jr.nextZ,jn--),Hr?Hr.nextZ=Lr:ar=Lr,Lr.prevZ=Hr,Hr=Lr;Fr=jr}Hr.nextZ=null,Jn*=2}while(ln>1)}(It)}(m,k,Z,Q);for(var Se,ze,Ye=m;m.prev!==m.next;)if(Se=m.prev,ze=m.next,Q?ts(m,k,Z,Q):gs(m))c.push(Se.i/g|0),c.push(m.i/g|0),c.push(ze.i/g|0),Rh(m),m=ze.next,Ye=ze.next;else if((m=ze)===Ye){ue?ue===1?vo(m=Ps(Wa(m),c,g),c,g,k,Z,Q,2):ue===2&&Wo(m,c,g,k,Z,Q):vo(Wa(m),c,g,k,Z,Q,1);break}}}function gs(m){var c=m.prev,g=m,k=m.next;if(ua(c,g,k)>=0)return!1;for(var Z=c.x,Q=g.x,ue=k.x,Se=c.y,ze=g.y,Ye=k.y,ot=Z<Q?Z<ue?Z:ue:Q<ue?Q:ue,ct=Se<ze?Se<Ye?Se:Ye:ze<Ye?ze:Ye,wt=Z>Q?Z>ue?Z:ue:Q>ue?Q:ue,Dt=Se>ze?Se>Ye?Se:Ye:ze>Ye?ze:Ye,It=k.next;It!==c;){if(It.x>=ot&&It.x<=wt&&It.y>=ct&&It.y<=Dt&&jo(Z,Se,Q,ze,ue,Ye,It.x,It.y)&&ua(It.prev,It,It.next)>=0)return!1;It=It.next}return!0}function ts(m,c,g,k){var Z=m.prev,Q=m,ue=m.next;if(ua(Z,Q,ue)>=0)return!1;for(var Se=Z.x,ze=Q.x,Ye=ue.x,ot=Z.y,ct=Q.y,wt=ue.y,Dt=Se<ze?Se<Ye?Se:Ye:ze<Ye?ze:Ye,It=ot<ct?ot<wt?ot:wt:ct<wt?ct:wt,ar=Se>ze?Se>Ye?Se:Ye:ze>Ye?ze:Ye,qt=ot>ct?ot>wt?ot:wt:ct>wt?ct:wt,Fr=js(Dt,It,c,g,k),jr=js(ar,qt,c,g,k),Lr=m.prevZ,Hr=m.nextZ;Lr&&Lr.z>=Fr&&Hr&&Hr.z<=jr;){if(Lr.x>=Dt&&Lr.x<=ar&&Lr.y>=It&&Lr.y<=qt&&Lr!==Z&&Lr!==ue&&jo(Se,ot,ze,ct,Ye,wt,Lr.x,Lr.y)&&ua(Lr.prev,Lr,Lr.next)>=0||(Lr=Lr.prevZ,Hr.x>=Dt&&Hr.x<=ar&&Hr.y>=It&&Hr.y<=qt&&Hr!==Z&&Hr!==ue&&jo(Se,ot,ze,ct,Ye,wt,Hr.x,Hr.y)&&ua(Hr.prev,Hr,Hr.next)>=0))return!1;Hr=Hr.nextZ}for(;Lr&&Lr.z>=Fr;){if(Lr.x>=Dt&&Lr.x<=ar&&Lr.y>=It&&Lr.y<=qt&&Lr!==Z&&Lr!==ue&&jo(Se,ot,ze,ct,Ye,wt,Lr.x,Lr.y)&&ua(Lr.prev,Lr,Lr.next)>=0)return!1;Lr=Lr.prevZ}for(;Hr&&Hr.z<=jr;){if(Hr.x>=Dt&&Hr.x<=ar&&Hr.y>=It&&Hr.y<=qt&&Hr!==Z&&Hr!==ue&&jo(Se,ot,ze,ct,Ye,wt,Hr.x,Hr.y)&&ua(Hr.prev,Hr,Hr.next)>=0)return!1;Hr=Hr.nextZ}return!0}function Ps(m,c,g){var k=m;do{var Z=k.prev,Q=k.next.next;!wu(Z,Q)&&Qu(Z,k,k.next,Q)&&ef(Z,Q)&&ef(Q,Z)&&(c.push(Z.i/g|0),c.push(k.i/g|0),c.push(Q.i/g|0),Rh(k),Rh(k.next),k=m=Q),k=k.next}while(k!==m);return Wa(k)}function Wo(m,c,g,k,Z,Q){var ue=m;do{for(var Se=ue.next.next;Se!==ue.prev;){if(ue.i!==Se.i&&eu(ue,Se)){var ze=w0(ue,Se);return ue=Wa(ue,ue.next),ze=Wa(ze,ze.next),vo(ue,c,g,k,Z,Q,0),void vo(ze,c,g,k,Z,Q,0)}Se=Se.next}ue=ue.next}while(ue!==m)}function Rs(m,c){return m.x-c.x}function xc(m,c){var g=function(Z,Q){var ue,Se=Q,ze=Z.x,Ye=Z.y,ot=-1/0;do{if(Ye<=Se.y&&Ye>=Se.next.y&&Se.next.y!==Se.y){var ct=Se.x+(Ye-Se.y)*(Se.next.x-Se.x)/(Se.next.y-Se.y);if(ct<=ze&&ct>ot&&(ot=ct,ue=Se.x<Se.next.x?Se:Se.next,ct===ze))return ue}Se=Se.next}while(Se!==Q);if(!ue)return null;var wt,Dt=ue,It=ue.x,ar=ue.y,qt=1/0;Se=ue;do ze>=Se.x&&Se.x>=It&&ze!==Se.x&&jo(Ye<ar?ze:ot,Ye,It,ar,Ye<ar?ot:ze,Ye,Se.x,Se.y)&&(wt=Math.abs(Ye-Se.y)/(ze-Se.x),ef(Se,Z)&&(wt<qt||wt===qt&&(Se.x>ue.x||Se.x===ue.x&&nm(ue,Se)))&&(ue=Se,qt=wt)),Se=Se.next;while(Se!==Dt);return ue}(m,c);if(!g)return c;var k=w0(g,m);return Wa(k,k.next),Wa(g,g.next)}function nm(m,c){return ua(m.prev,m,c.prev)<0&&ua(c.next,m,m.next)<0}function js(m,c,g,k,Z){return(m=1431655765&((m=858993459&((m=252645135&((m=16711935&((m=(m-g)*Z|0)|m<<8))|m<<4))|m<<2))|m<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-k)*Z|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function Fo(m){var c=m,g=m;do(c.x<g.x||c.x===g.x&&c.y<g.y)&&(g=c),c=c.next;while(c!==m);return g}function jo(m,c,g,k,Z,Q,ue,Se){return(Z-ue)*(c-Se)>=(m-ue)*(Q-Se)&&(m-ue)*(k-Se)>=(g-ue)*(c-Se)&&(g-ue)*(Q-Se)>=(Z-ue)*(k-Se)}function eu(m,c){return m.next.i!==c.i&&m.prev.i!==c.i&&!function(g,k){var Z=g;do{if(Z.i!==g.i&&Z.next.i!==g.i&&Z.i!==k.i&&Z.next.i!==k.i&&Qu(Z,Z.next,g,k))return!0;Z=Z.next}while(Z!==g);return!1}(m,c)&&(ef(m,c)&&ef(c,m)&&function(g,k){var Z=g,Q=!1,ue=(g.x+k.x)/2,Se=(g.y+k.y)/2;do Z.y>Se!=Z.next.y>Se&&Z.next.y!==Z.y&&ue<(Z.next.x-Z.x)*(Se-Z.y)/(Z.next.y-Z.y)+Z.x&&(Q=!Q),Z=Z.next;while(Z!==g);return Q}(m,c)&&(ua(m.prev,m,c.prev)||ua(m,c.prev,c))||wu(m,c)&&ua(m.prev,m,m.next)>0&&ua(c.prev,c,c.next)>0)}function ua(m,c,g){return(c.y-m.y)*(g.x-c.x)-(c.x-m.x)*(g.y-c.y)}function wu(m,c){return m.x===c.x&&m.y===c.y}function Qu(m,c,g,k){var Z=wc(ua(m,c,g)),Q=wc(ua(m,c,k)),ue=wc(ua(g,k,m)),Se=wc(ua(g,k,c));return Z!==Q&&ue!==Se||!(Z!==0||!Pl(m,g,c))||!(Q!==0||!Pl(m,k,c))||!(ue!==0||!Pl(g,m,k))||!(Se!==0||!Pl(g,c,k))}function Pl(m,c,g){return c.x<=Math.max(m.x,g.x)&&c.x>=Math.min(m.x,g.x)&&c.y<=Math.max(m.y,g.y)&&c.y>=Math.min(m.y,g.y)}function wc(m){return m>0?1:m<0?-1:0}function ef(m,c){return ua(m.prev,m,m.next)<0?ua(m,c,m.next)>=0&&ua(m,m.prev,c)>=0:ua(m,c,m.prev)<0||ua(m,m.next,c)<0}function w0(m,c){var g=new im(m.i,m.x,m.y),k=new im(c.i,c.x,c.y),Z=m.next,Q=c.prev;return m.next=c,c.prev=m,g.next=Z,Z.prev=g,k.next=g,g.prev=k,Q.next=k,k.prev=Q,k}function T0(m,c,g,k){var Z=new im(m,c,g);return k?(Z.next=k.next,Z.prev=k,k.next.prev=Z,k.next=Z):(Z.prev=Z,Z.next=Z),Z}function Rh(m){m.next.prev=m.prev,m.prev.next=m.next,m.prevZ&&(m.prevZ.nextZ=m.nextZ),m.nextZ&&(m.nextZ.prevZ=m.prevZ)}function im(m,c,g){this.i=m,this.x=c,this.y=g,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function am(m,c,g,k){for(var Z=0,Q=c,ue=g-k;Q<g;Q+=k)Z+=(m[ue]-m[Q])*(m[Q+1]+m[ue+1]),ue=Q;return Z}function lx(m,c,g,k,Z){A0(m,c,g||0,k||m.length-1,Z||ux)}function A0(m,c,g,k,Z){for(;k>g;){if(k-g>600){var Q=k-g+1,ue=c-g+1,Se=Math.log(Q),ze=.5*Math.exp(2*Se/3),Ye=.5*Math.sqrt(Se*ze*(Q-ze)/Q)*(ue-Q/2<0?-1:1);A0(m,c,Math.max(g,Math.floor(c-ue*ze/Q+Ye)),Math.min(k,Math.floor(c+(Q-ue)*ze/Q+Ye)),Z)}var ot=m[c],ct=g,wt=k;for(Fh(m,g,c),Z(m[k],ot)>0&&Fh(m,g,k);ct<wt;){for(Fh(m,ct,wt),ct++,wt--;Z(m[ct],ot)<0;)ct++;for(;Z(m[wt],ot)>0;)wt--}Z(m[g],ot)===0?Fh(m,g,wt):Fh(m,++wt,k),wt<=c&&(g=wt+1),c<=wt&&(k=wt-1)}}function Fh(m,c,g){var k=m[c];m[c]=m[g],m[g]=k}function ux(m,c){return m<c?-1:m>c?1:0}function om(m,c){const g=m.length;if(g<=1)return[m];const k=[];let Z,Q;for(let ue=0;ue<g;ue++){const Se=I(m[ue]);Se!==0&&(m[ue].area=Math.abs(Se),Q===void 0&&(Q=Se<0),Q===Se<0?(Z&&k.push(Z),Z=[m[ue]]):Z.push(m[ue]))}if(Z&&k.push(Z),c>1)for(let ue=0;ue<k.length;ue++)k[ue].length<=c||(lx(k[ue],c,1,k[ue].length-1,cx),k[ue]=k[ue].slice(0,c));return k}function cx(m,c){return c.area-m.area}function sm(m,c,g){const k=g.patternDependencies;let Z=!1;for(const Q of c){const ue=Q.paint.get(`${m}-pattern`);ue.isConstant()||(Z=!0);const Se=ue.constantOr(null);Se&&(Z=!0,k[Se.to]=!0,k[Se.from]=!0)}return Z}function lm(m,c,g,k,Z){const Q=Z.patternDependencies;for(const ue of c){const Se=ue.paint.get(`${m}-pattern`).value;if(Se.kind!=="constant"){let ze=Se.evaluate({zoom:k-1},g,{},Z.availableImages),Ye=Se.evaluate({zoom:k},g,{},Z.availableImages),ot=Se.evaluate({zoom:k+1},g,{},Z.availableImages);ze=ze&&ze.name?ze.name:ze,Ye=Ye&&Ye.name?Ye.name:Ye,ot=ot&&ot.name?ot.name:ot,Q[ze]=!0,Q[Ye]=!0,Q[ot]=!0,g.patterns[ue.id]={min:ze,mid:Ye,max:ot}}}return g}Oi.exports=Da,Oi.exports.default=Da,Da.deviation=function(m,c,g,k){var Z=c&&c.length,Q=Math.abs(am(m,0,Z?c[0]*g:m.length,g));if(Z)for(var ue=0,Se=c.length;ue<Se;ue++)Q-=Math.abs(am(m,c[ue]*g,ue<Se-1?c[ue+1]*g:m.length,g));var ze=0;for(ue=0;ue<k.length;ue+=3){var Ye=k[ue]*g,ot=k[ue+1]*g,ct=k[ue+2]*g;ze+=Math.abs((m[Ye]-m[ct])*(m[ot+1]-m[Ye+1])-(m[Ye]-m[ot])*(m[ct+1]-m[Ye+1]))}return Q===0&&ze===0?0:Math.abs((ze-Q)/Q)},Da.flatten=function(m){for(var c=m[0][0].length,g={vertices:[],holes:[],dimensions:c},k=0,Z=0;Z<m.length;Z++){for(var Q=0;Q<m[Z].length;Q++)for(var ue=0;ue<c;ue++)g.vertices.push(m[Z][Q][ue]);Z>0&&g.holes.push(k+=m[Z-1].length)}return g};class um{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(g=>g.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ra,this.indexArray=new ka,this.indexArray2=new hl,this.programConfigurations=new ql(c.layers,c.zoom),this.segments=new Ti,this.segments2=new Ti,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(c,g,k){this.hasPattern=sm("fill",this.layers,g);const Z=this.layers[0].layout.get("fill-sort-key"),Q=!Z.isConstant(),ue=[];for(const{feature:Se,id:ze,index:Ye,sourceLayerIndex:ot}of c){const ct=this.layers[0]._featureFilter.needGeometry,wt=bc(Se,ct);if(!this.layers[0]._featureFilter.filter(new ba(this.zoom),wt,k))continue;const Dt=Q?Z.evaluate(wt,{},k,g.availableImages):void 0,It={id:ze,properties:Se.properties,type:Se.type,sourceLayerIndex:ot,index:Ye,geometry:ct?wt.geometry:_c(Se),patterns:{},sortKey:Dt};ue.push(It)}Q&&ue.sort((Se,ze)=>Se.sortKey-ze.sortKey);for(const Se of ue){const{geometry:ze,index:Ye,sourceLayerIndex:ot}=Se;if(this.hasPattern){const ct=lm("fill",this.layers,Se,this.zoom,g);this.patternFeatures.push(ct)}else this.addFeature(Se,ze,Ye,k,{});g.featureIndex.insert(c[Ye].feature,ze,Ye,ot,this.index)}}update(c,g,k){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,g,this.stateDependentLayers,k)}addFeatures(c,g,k){for(const Z of this.patternFeatures)this.addFeature(Z,Z.geometry,Z.index,g,k)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,pi),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,g,k,Z,Q){for(const ue of om(g,500)){let Se=0;for(const Dt of ue)Se+=Dt.length;const ze=this.segments.prepareSegment(Se,this.layoutVertexArray,this.indexArray),Ye=ze.vertexLength,ot=[],ct=[];for(const Dt of ue){if(Dt.length===0)continue;Dt!==ue[0]&&ct.push(ot.length/2);const It=this.segments2.prepareSegment(Dt.length,this.layoutVertexArray,this.indexArray2),ar=It.vertexLength;this.layoutVertexArray.emplaceBack(Dt[0].x,Dt[0].y),this.indexArray2.emplaceBack(ar+Dt.length-1,ar),ot.push(Dt[0].x),ot.push(Dt[0].y);for(let qt=1;qt<Dt.length;qt++)this.layoutVertexArray.emplaceBack(Dt[qt].x,Dt[qt].y),this.indexArray2.emplaceBack(ar+qt-1,ar+qt),ot.push(Dt[qt].x),ot.push(Dt[qt].y);It.vertexLength+=Dt.length,It.primitiveLength+=Dt.length}const wt=Oi.exports(ot,ct);for(let Dt=0;Dt<wt.length;Dt+=3)this.indexArray.emplaceBack(Ye+wt[Dt],Ye+wt[Dt+1],Ye+wt[Dt+2]);ze.vertexLength+=Se,ze.primitiveLength+=wt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,k,Q,Z)}}On("FillBucket",um,{omit:["layers","patternFeatures"]});const fx=new Qn({"fill-sort-key":new Ar(Ie.layout_fill["fill-sort-key"])});var hx={paint:new Qn({"fill-antialias":new hr(Ie.paint_fill["fill-antialias"]),"fill-opacity":new Ar(Ie.paint_fill["fill-opacity"]),"fill-color":new Ar(Ie.paint_fill["fill-color"]),"fill-outline-color":new Ar(Ie.paint_fill["fill-outline-color"]),"fill-translate":new hr(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new hr(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new dn(Ie.paint_fill["fill-pattern"])}),layout:fx};const dx=Za([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),px=Za([{name:"a_centroid",components:2,type:"Int16"}],4),{members:mx}=dx;var tf={},vx=Y,S0=jf;function jf(m,c,g,k,Z){this.properties={},this.extent=g,this.type=0,this._pbf=m,this._geometry=-1,this._keys=k,this._values=Z,m.readFields(gx,this,c)}function gx(m,c,g){m==1?c.id=g.readVarint():m==2?function(k,Z){for(var Q=k.readVarint()+k.pos;k.pos<Q;){var ue=Z._keys[k.readVarint()],Se=Z._values[k.readVarint()];Z.properties[ue]=Se}}(g,c):m==3?c.type=g.readVarint():m==4&&(c._geometry=g.pos)}function yx(m){for(var c,g,k=0,Z=0,Q=m.length,ue=Q-1;Z<Q;ue=Z++)k+=((g=m[ue]).x-(c=m[Z]).x)*(c.y+g.y);return k}jf.types=["Unknown","Point","LineString","Polygon"],jf.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var c,g=m.readVarint()+m.pos,k=1,Z=0,Q=0,ue=0,Se=[];m.pos<g;){if(Z<=0){var ze=m.readVarint();k=7&ze,Z=ze>>3}if(Z--,k===1||k===2)Q+=m.readSVarint(),ue+=m.readSVarint(),k===1&&(c&&Se.push(c),c=[]),c.push(new vx(Q,ue));else{if(k!==7)throw new Error("unknown command "+k);c&&c.push(c[0].clone())}}return c&&Se.push(c),Se},jf.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var c=m.readVarint()+m.pos,g=1,k=0,Z=0,Q=0,ue=1/0,Se=-1/0,ze=1/0,Ye=-1/0;m.pos<c;){if(k<=0){var ot=m.readVarint();g=7&ot,k=ot>>3}if(k--,g===1||g===2)(Z+=m.readSVarint())<ue&&(ue=Z),Z>Se&&(Se=Z),(Q+=m.readSVarint())<ze&&(ze=Q),Q>Ye&&(Ye=Q);else if(g!==7)throw new Error("unknown command "+g)}return[ue,ze,Se,Ye]},jf.prototype.toGeoJSON=function(m,c,g){var k,Z,Q=this.extent*Math.pow(2,g),ue=this.extent*m,Se=this.extent*c,ze=this.loadGeometry(),Ye=jf.types[this.type];function ot(Dt){for(var It=0;It<Dt.length;It++){var ar=Dt[It];Dt[It]=[360*(ar.x+ue)/Q-180,360/Math.PI*Math.atan(Math.exp((180-360*(ar.y+Se)/Q)*Math.PI/180))-90]}}switch(this.type){case 1:var ct=[];for(k=0;k<ze.length;k++)ct[k]=ze[k][0];ot(ze=ct);break;case 2:for(k=0;k<ze.length;k++)ot(ze[k]);break;case 3:for(ze=function(Dt){var It=Dt.length;if(It<=1)return[Dt];for(var ar,qt,Fr=[],jr=0;jr<It;jr++){var Lr=yx(Dt[jr]);Lr!==0&&(qt===void 0&&(qt=Lr<0),qt===Lr<0?(ar&&Fr.push(ar),ar=[Dt[jr]]):ar.push(Dt[jr]))}return ar&&Fr.push(ar),Fr}(ze),k=0;k<ze.length;k++)for(Z=0;Z<ze[k].length;Z++)ot(ze[k][Z])}ze.length===1?ze=ze[0]:Ye="Multi"+Ye;var wt={type:"Feature",geometry:{type:Ye,coordinates:ze},properties:this.properties};return"id"in this&&(wt.id=this.id),wt};var _x=S0,E0=C0;function C0(m,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=m,this._keys=[],this._values=[],this._features=[],m.readFields(bx,this,c),this.length=this._features.length}function bx(m,c,g){m===15?c.version=g.readVarint():m===1?c.name=g.readString():m===5?c.extent=g.readVarint():m===2?c._features.push(g.pos):m===3?c._keys.push(g.readString()):m===4&&c._values.push(function(k){for(var Z=null,Q=k.readVarint()+k.pos;k.pos<Q;){var ue=k.readVarint()>>3;Z=ue===1?k.readString():ue===2?k.readFloat():ue===3?k.readDouble():ue===4?k.readVarint64():ue===5?k.readVarint():ue===6?k.readSVarint():ue===7?k.readBoolean():null}return Z}(g))}C0.prototype.feature=function(m){if(m<0||m>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[m];var c=this._pbf.readVarint()+this._pbf.pos;return new _x(this._pbf,c,this.extent,this._keys,this._values)};var xx=E0;function wx(m,c,g){if(m===3){var k=new xx(g,g.readVarint()+g.pos);k.length&&(c[k.name]=k)}}tf.VectorTile=function(m,c){this.layers=m.readFields(wx,{},c)},tf.VectorTileFeature=S0,tf.VectorTileLayer=E0;const Tx=tf.VectorTileFeature.types,cm=Math.pow(2,13);function Oh(m,c,g,k,Z,Q,ue,Se){m.emplaceBack(c,g,2*Math.floor(k*cm)+ue,Z*cm*2,Q*cm*2,Math.round(Se))}class fm{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(g=>g.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Gi,this.centroidVertexArray=new qn,this.indexArray=new ka,this.programConfigurations=new ql(c.layers,c.zoom),this.segments=new Ti,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(c,g,k){this.features=[],this.hasPattern=sm("fill-extrusion",this.layers,g);for(const{feature:Z,id:Q,index:ue,sourceLayerIndex:Se}of c){const ze=this.layers[0]._featureFilter.needGeometry,Ye=bc(Z,ze);if(!this.layers[0]._featureFilter.filter(new ba(this.zoom),Ye,k))continue;const ot={id:Q,sourceLayerIndex:Se,index:ue,geometry:ze?Ye.geometry:_c(Z),properties:Z.properties,type:Z.type,patterns:{}};this.hasPattern?this.features.push(lm("fill-extrusion",this.layers,ot,this.zoom,g)):this.addFeature(ot,ot.geometry,ue,k,{}),g.featureIndex.insert(Z,ot.geometry,ue,Se,this.index,!0)}}addFeatures(c,g,k){for(const Z of this.features){const{geometry:Q}=Z;this.addFeature(Z,Q,Z.index,g,k)}}update(c,g,k){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,g,this.stateDependentLayers,k)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,mx),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,px.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,g,k,Z,Q){const ue={x:0,y:0,vertexCount:0};for(const Se of om(g,500)){let ze=0;for(const It of Se)ze+=It.length;let Ye=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const It of Se){if(It.length===0||Sx(It))continue;let ar=0;for(let qt=0;qt<It.length;qt++){const Fr=It[qt];if(qt>=1){const jr=It[qt-1];if(!Ax(Fr,jr)){Ye.vertexLength+4>Ti.MAX_VERTEX_ARRAY_LENGTH&&(Ye=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Lr=Fr.sub(jr)._perp()._unit(),Hr=jr.dist(Fr);ar+Hr>32768&&(ar=0),Oh(this.layoutVertexArray,Fr.x,Fr.y,Lr.x,Lr.y,0,0,ar),Oh(this.layoutVertexArray,Fr.x,Fr.y,Lr.x,Lr.y,0,1,ar),ue.x+=2*Fr.x,ue.y+=2*Fr.y,ue.vertexCount+=2,ar+=Hr,Oh(this.layoutVertexArray,jr.x,jr.y,Lr.x,Lr.y,0,0,ar),Oh(this.layoutVertexArray,jr.x,jr.y,Lr.x,Lr.y,0,1,ar),ue.x+=2*jr.x,ue.y+=2*jr.y,ue.vertexCount+=2;const ln=Ye.vertexLength;this.indexArray.emplaceBack(ln,ln+2,ln+1),this.indexArray.emplaceBack(ln+1,ln+2,ln+3),Ye.vertexLength+=4,Ye.primitiveLength+=2}}}}if(Ye.vertexLength+ze>Ti.MAX_VERTEX_ARRAY_LENGTH&&(Ye=this.segments.prepareSegment(ze,this.layoutVertexArray,this.indexArray)),Tx[c.type]!=="Polygon")continue;const ot=[],ct=[],wt=Ye.vertexLength;for(const It of Se)if(It.length!==0){It!==Se[0]&&ct.push(ot.length/2);for(let ar=0;ar<It.length;ar++){const qt=It[ar];Oh(this.layoutVertexArray,qt.x,qt.y,0,0,1,1,0),ue.x+=qt.x,ue.y+=qt.y,ue.vertexCount+=1,ot.push(qt.x),ot.push(qt.y)}}const Dt=Oi.exports(ot,ct);for(let It=0;It<Dt.length;It+=3)this.indexArray.emplaceBack(wt+Dt[It],wt+Dt[It+2],wt+Dt[It+1]);Ye.primitiveLength+=Dt.length/3,Ye.vertexLength+=ze}for(let Se=0;Se<ue.vertexCount;Se++)this.centroidVertexArray.emplaceBack(Math.floor(ue.x/ue.vertexCount),Math.floor(ue.y/ue.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,k,Q,Z)}}function Ax(m,c){return m.x===c.x&&(m.x<0||m.x>Ja)||m.y===c.y&&(m.y<0||m.y>Ja)}function Sx(m){return m.every(c=>c.x<0)||m.every(c=>c.x>Ja)||m.every(c=>c.y<0)||m.every(c=>c.y>Ja)}On("FillExtrusionBucket",fm,{omit:["layers","features"]});var Ex={paint:new Qn({"fill-extrusion-opacity":new hr(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ar(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new hr(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new hr(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new dn(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ar(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ar(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new hr(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function zh(m,c){return m.x*c.x+m.y*c.y}function D0(m,c){if(m.length===1){let g=0;const k=c[g++];let Z;for(;!Z||k.equals(Z);)if(Z=c[g++],!Z)return 1/0;for(;g<c.length;g++){const Q=c[g],ue=m[0],Se=Z.sub(k),ze=Q.sub(k),Ye=ue.sub(k),ot=zh(Se,Se),ct=zh(Se,ze),wt=zh(ze,ze),Dt=zh(Ye,Se),It=zh(Ye,ze),ar=ot*wt-ct*ct,qt=(wt*Dt-ct*It)/ar,Fr=(ot*It-ct*Dt)/ar,jr=k.z*(1-qt-Fr)+Z.z*qt+Q.z*Fr;if(isFinite(jr))return jr}return 1/0}{let g=1/0;for(const k of c)g=Math.min(g,k.z);return g}}const Cx=Za([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Dx}=Cx,Mx=Za([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:kx}=Mx,Ix=tf.VectorTileFeature.types,Lx=Math.cos(Math.PI/180*37.5),M0=Math.pow(2,14)/.5;class hm{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(g=>g.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(g=>{this.gradients[g.id]={}}),this.layoutVertexArray=new ji,this.layoutVertexArray2=new da,this.indexArray=new ka,this.programConfigurations=new ql(c.layers,c.zoom),this.segments=new Ti,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(c,g,k){this.hasPattern=sm("line",this.layers,g);const Z=this.layers[0].layout.get("line-sort-key"),Q=!Z.isConstant(),ue=[];for(const{feature:Se,id:ze,index:Ye,sourceLayerIndex:ot}of c){const ct=this.layers[0]._featureFilter.needGeometry,wt=bc(Se,ct);if(!this.layers[0]._featureFilter.filter(new ba(this.zoom),wt,k))continue;const Dt=Q?Z.evaluate(wt,{},k):void 0,It={id:ze,properties:Se.properties,type:Se.type,sourceLayerIndex:ot,index:Ye,geometry:ct?wt.geometry:_c(Se),patterns:{},sortKey:Dt};ue.push(It)}Q&&ue.sort((Se,ze)=>Se.sortKey-ze.sortKey);for(const Se of ue){const{geometry:ze,index:Ye,sourceLayerIndex:ot}=Se;if(this.hasPattern){const ct=lm("line",this.layers,Se,this.zoom,g);this.patternFeatures.push(ct)}else this.addFeature(Se,ze,Ye,k,{});g.featureIndex.insert(c[Ye].feature,ze,Ye,ot,this.index)}}update(c,g,k){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,g,this.stateDependentLayers,k)}addFeatures(c,g,k){for(const Z of this.patternFeatures)this.addFeature(Z,Z.geometry,Z.index,g,k)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,kx)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Dx),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,g,k,Z,Q){const ue=this.layers[0].layout,Se=ue.get("line-join").evaluate(c,{}),ze=ue.get("line-cap"),Ye=ue.get("line-miter-limit"),ot=ue.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const ct of g)this.addLine(ct,c,Se,ze,Ye,ot);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,k,Q,Z)}addLine(c,g,k,Z,Q,ue){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Fr=0;Fr<c.length-1;Fr++)this.totalDistance+=c[Fr].dist(c[Fr+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Se=Ix[g.type]==="Polygon";let ze=c.length;for(;ze>=2&&c[ze-1].equals(c[ze-2]);)ze--;let Ye=0;for(;Ye<ze-1&&c[Ye].equals(c[Ye+1]);)Ye++;if(ze<(Se?3:2))return;k==="bevel"&&(Q=1.05);const ot=this.overscaling<=16?122880/(512*this.overscaling):0,ct=this.segments.prepareSegment(10*ze,this.layoutVertexArray,this.indexArray);let wt,Dt,It,ar,qt;this.e1=this.e2=-1,Se&&(wt=c[ze-2],qt=c[Ye].sub(wt)._unit()._perp());for(let Fr=Ye;Fr<ze;Fr++){if(It=Fr===ze-1?Se?c[Ye+1]:void 0:c[Fr+1],It&&c[Fr].equals(It))continue;qt&&(ar=qt),wt&&(Dt=wt),wt=c[Fr],qt=It?It.sub(wt)._unit()._perp():ar,ar=ar||qt;let jr=ar.add(qt);jr.x===0&&jr.y===0||jr._unit();const Lr=ar.x*qt.x+ar.y*qt.y,Hr=jr.x*qt.x+jr.y*qt.y,ln=Hr!==0?1/Hr:1/0,an=2*Math.sqrt(2-2*Hr),jn=Hr<Lx&&Dt&&It,Jn=ar.x*qt.y-ar.y*qt.x>0;if(jn&&Fr>Ye){const kn=wt.dist(Dt);if(kn>2*ot){const Hn=wt.sub(wt.sub(Dt)._mult(ot/kn)._round());this.updateDistance(Dt,Hn),this.addCurrentVertex(Hn,ar,0,0,ct),Dt=Hn}}const Un=Dt&&It;let Ln=Un?k:Se?"butt":Z;if(Un&&Ln==="round"&&(ln<ue?Ln="miter":ln<=2&&(Ln="fakeround")),Ln==="miter"&&ln>Q&&(Ln="bevel"),Ln==="bevel"&&(ln>2&&(Ln="flipbevel"),ln<Q&&(Ln="miter")),Dt&&this.updateDistance(Dt,wt),Ln==="miter")jr._mult(ln),this.addCurrentVertex(wt,jr,0,0,ct);else if(Ln==="flipbevel"){if(ln>100)jr=qt.mult(-1);else{const kn=ln*ar.add(qt).mag()/ar.sub(qt).mag();jr._perp()._mult(kn*(Jn?-1:1))}this.addCurrentVertex(wt,jr,0,0,ct),this.addCurrentVertex(wt,jr.mult(-1),0,0,ct)}else if(Ln==="bevel"||Ln==="fakeround"){const kn=-Math.sqrt(ln*ln-1),Hn=Jn?kn:0,Fn=Jn?0:kn;if(Dt&&this.addCurrentVertex(wt,ar,Hn,Fn,ct),Ln==="fakeround"){const gn=Math.round(180*an/Math.PI/20);for(let ti=1;ti<gn;ti++){let $n=ti/gn;if($n!==.5){const Ra=$n-.5;$n+=$n*Ra*($n-1)*((1.0904+Lr*(Lr*(3.55645-1.43519*Lr)-3.2452))*Ra*Ra+(.848013+Lr*(.215638*Lr-1.06021)))}const Ii=qt.sub(ar)._mult($n)._add(ar)._unit()._mult(Jn?-1:1);this.addHalfVertex(wt,Ii.x,Ii.y,!1,Jn,0,ct)}}It&&this.addCurrentVertex(wt,qt,-Hn,-Fn,ct)}else if(Ln==="butt")this.addCurrentVertex(wt,jr,0,0,ct);else if(Ln==="square"){const kn=Dt?1:-1;this.addCurrentVertex(wt,jr,kn,kn,ct)}else Ln==="round"&&(Dt&&(this.addCurrentVertex(wt,ar,0,0,ct),this.addCurrentVertex(wt,ar,1,1,ct,!0)),It&&(this.addCurrentVertex(wt,qt,-1,-1,ct,!0),this.addCurrentVertex(wt,qt,0,0,ct)));if(jn&&Fr<ze-1){const kn=wt.dist(It);if(kn>2*ot){const Hn=wt.add(It.sub(wt)._mult(ot/kn)._round());this.updateDistance(wt,Hn),this.addCurrentVertex(Hn,qt,0,0,ct),wt=Hn}}}}addCurrentVertex(c,g,k,Z,Q,ue=!1){const Se=g.y*Z-g.x,ze=-g.y-g.x*Z;this.addHalfVertex(c,g.x+g.y*k,g.y-g.x*k,ue,!1,k,Q),this.addHalfVertex(c,Se,ze,ue,!0,-Z,Q),this.distance>M0/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(c,g,k,Z,Q,ue))}addHalfVertex({x:c,y:g},k,Z,Q,ue,Se,ze){const Ye=.5*(this.lineClips?this.scaledDistance*(M0-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(Q?1:0),(g<<1)+(ue?1:0),Math.round(63*k)+128,Math.round(63*Z)+128,1+(Se===0?0:Se<0?-1:1)|(63&Ye)<<2,Ye>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ot=ze.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ot),ze.primitiveLength++),ue?this.e2=ot:this.e1=ot}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,g){this.distance+=c.dist(g),this.updateScaledDistance()}}On("LineBucket",hm,{omit:["layers","patternFeatures"]});const Px=new Qn({"line-cap":new hr(Ie.layout_line["line-cap"]),"line-join":new Ar(Ie.layout_line["line-join"]),"line-miter-limit":new hr(Ie.layout_line["line-miter-limit"]),"line-round-limit":new hr(Ie.layout_line["line-round-limit"]),"line-sort-key":new Ar(Ie.layout_line["line-sort-key"])});var k0={paint:new Qn({"line-opacity":new Ar(Ie.paint_line["line-opacity"]),"line-color":new Ar(Ie.paint_line["line-color"]),"line-translate":new hr(Ie.paint_line["line-translate"]),"line-translate-anchor":new hr(Ie.paint_line["line-translate-anchor"]),"line-width":new Ar(Ie.paint_line["line-width"]),"line-gap-width":new Ar(Ie.paint_line["line-gap-width"]),"line-offset":new Ar(Ie.paint_line["line-offset"]),"line-blur":new Ar(Ie.paint_line["line-blur"]),"line-dasharray":new Zn(Ie.paint_line["line-dasharray"]),"line-pattern":new dn(Ie.paint_line["line-pattern"]),"line-gradient":new ii(Ie.paint_line["line-gradient"])}),layout:Px};const I0=new class extends Ar{possiblyEvaluate(m,c){return c=new ba(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(m,c)}evaluate(m,c,g,k){return c=_({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(m,c,g,k)}}(k0.paint.properties["line-width"].specification);function L0(m,c){return c>0?c+2*m:m}I0.useIntegerZoom=!0;const Rx=Za([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fx=Za([{name:"a_projected_pos",components:3,type:"Float32"}],4);Za([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ox=Za([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Za([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const P0=Za([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zx=Za([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bx(m,c,g){return m.sections.forEach(k=>{k.text=function(Z,Q,ue){const Se=Q.layout.get("text-transform").evaluate(ue,{});return Se==="uppercase"?Z=Z.toLocaleUpperCase():Se==="lowercase"&&(Z=Z.toLocaleLowerCase()),Zo.applyArabicShaping&&(Z=Zo.applyArabicShaping(Z)),Z}(k.text,c,g)}),m}Za([{name:"triangle",components:3,type:"Uint16"}]),Za([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Za([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Za([{type:"Float32",name:"offsetX"}]),Za([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Bh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Yo=24,dm=Sa,R0=function(m,c,g,k,Z){var Q,ue,Se=8*Z-k-1,ze=(1<<Se)-1,Ye=ze>>1,ot=-7,ct=g?Z-1:0,wt=g?-1:1,Dt=m[c+ct];for(ct+=wt,Q=Dt&(1<<-ot)-1,Dt>>=-ot,ot+=Se;ot>0;Q=256*Q+m[c+ct],ct+=wt,ot-=8);for(ue=Q&(1<<-ot)-1,Q>>=-ot,ot+=k;ot>0;ue=256*ue+m[c+ct],ct+=wt,ot-=8);if(Q===0)Q=1-Ye;else{if(Q===ze)return ue?NaN:1/0*(Dt?-1:1);ue+=Math.pow(2,k),Q-=Ye}return(Dt?-1:1)*ue*Math.pow(2,Q-k)},F0=function(m,c,g,k,Z,Q){var ue,Se,ze,Ye=8*Q-Z-1,ot=(1<<Ye)-1,ct=ot>>1,wt=Z===23?Math.pow(2,-24)-Math.pow(2,-77):0,Dt=k?0:Q-1,It=k?1:-1,ar=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(Se=isNaN(c)?1:0,ue=ot):(ue=Math.floor(Math.log(c)/Math.LN2),c*(ze=Math.pow(2,-ue))<1&&(ue--,ze*=2),(c+=ue+ct>=1?wt/ze:wt*Math.pow(2,1-ct))*ze>=2&&(ue++,ze/=2),ue+ct>=ot?(Se=0,ue=ot):ue+ct>=1?(Se=(c*ze-1)*Math.pow(2,Z),ue+=ct):(Se=c*Math.pow(2,ct-1)*Math.pow(2,Z),ue=0));Z>=8;m[g+Dt]=255&Se,Dt+=It,Se/=256,Z-=8);for(ue=ue<<Z|Se,Ye+=Z;Ye>0;m[g+Dt]=255&ue,Dt+=It,ue/=256,Ye-=8);m[g+Dt-It]|=128*ar};function Sa(m){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(m)?m:new Uint8Array(m||0),this.pos=0,this.type=0,this.length=this.buf.length}Sa.Varint=0,Sa.Fixed64=1,Sa.Bytes=2,Sa.Fixed32=5;var rf,pm=4294967296,O0=1/pm,z0=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Tc(m){return m.type===Sa.Bytes?m.readVarint()+m.pos:m.pos+1}function Yf(m,c,g){return g?4294967296*c+(m>>>0):4294967296*(c>>>0)+(m>>>0)}function B0(m,c,g){var k=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));g.realloc(k);for(var Z=g.pos-1;Z>=m;Z--)g.buf[Z+k]=g.buf[Z]}function Nx(m,c){for(var g=0;g<m.length;g++)c.writeVarint(m[g])}function Ux(m,c){for(var g=0;g<m.length;g++)c.writeSVarint(m[g])}function Hx(m,c){for(var g=0;g<m.length;g++)c.writeFloat(m[g])}function Vx(m,c){for(var g=0;g<m.length;g++)c.writeDouble(m[g])}function Gx(m,c){for(var g=0;g<m.length;g++)c.writeBoolean(m[g])}function Zx(m,c){for(var g=0;g<m.length;g++)c.writeFixed32(m[g])}function Wx(m,c){for(var g=0;g<m.length;g++)c.writeSFixed32(m[g])}function jx(m,c){for(var g=0;g<m.length;g++)c.writeFixed64(m[g])}function Yx(m,c){for(var g=0;g<m.length;g++)c.writeSFixed64(m[g])}function Sd(m,c){return(m[c]|m[c+1]<<8|m[c+2]<<16)+16777216*m[c+3]}function Xf(m,c,g){m[g]=c,m[g+1]=c>>>8,m[g+2]=c>>>16,m[g+3]=c>>>24}function N0(m,c){return(m[c]|m[c+1]<<8|m[c+2]<<16)+(m[c+3]<<24)}function Xx(m,c,g){m===1&&g.readMessage(Kx,c)}function Kx(m,c,g){if(m===3){const{id:k,bitmap:Z,width:Q,height:ue,left:Se,top:ze,advance:Ye}=g.readMessage(Jx,{});c.push({id:k,bitmap:new Li({width:Q+6,height:ue+6},Z),metrics:{width:Q,height:ue,left:Se,top:ze,advance:Ye}})}}function Jx(m,c,g){m===1?c.id=g.readVarint():m===2?c.bitmap=g.readBytes():m===3?c.width=g.readVarint():m===4?c.height=g.readVarint():m===5?c.left=g.readSVarint():m===6?c.top=g.readSVarint():m===7&&(c.advance=g.readVarint())}function U0(m){let c=0,g=0;for(const ue of m)c+=ue.w*ue.h,g=Math.max(g,ue.w);m.sort((ue,Se)=>Se.h-ue.h);const k=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),g),h:1/0}];let Z=0,Q=0;for(const ue of m)for(let Se=k.length-1;Se>=0;Se--){const ze=k[Se];if(!(ue.w>ze.w||ue.h>ze.h)){if(ue.x=ze.x,ue.y=ze.y,Q=Math.max(Q,ue.y+ue.h),Z=Math.max(Z,ue.x+ue.w),ue.w===ze.w&&ue.h===ze.h){const Ye=k.pop();Se<k.length&&(k[Se]=Ye)}else ue.h===ze.h?(ze.x+=ue.w,ze.w-=ue.w):ue.w===ze.w?(ze.y+=ue.h,ze.h-=ue.h):(k.push({x:ze.x+ue.w,y:ze.y,w:ze.w-ue.w,h:ue.h}),ze.y+=ue.h,ze.h-=ue.h);break}}return{w:Z,h:Q,fill:c/(Z*Q)||0}}Sa.prototype={destroy:function(){this.buf=null},readFields:function(m,c,g){for(g=g||this.length;this.pos<g;){var k=this.readVarint(),Z=k>>3,Q=this.pos;this.type=7&k,m(Z,c,this),this.pos===Q&&this.skip(k)}return c},readMessage:function(m,c){return this.readFields(m,c,this.readVarint()+this.pos)},readFixed32:function(){var m=Sd(this.buf,this.pos);return this.pos+=4,m},readSFixed32:function(){var m=N0(this.buf,this.pos);return this.pos+=4,m},readFixed64:function(){var m=Sd(this.buf,this.pos)+Sd(this.buf,this.pos+4)*pm;return this.pos+=8,m},readSFixed64:function(){var m=Sd(this.buf,this.pos)+N0(this.buf,this.pos+4)*pm;return this.pos+=8,m},readFloat:function(){var m=R0(this.buf,this.pos,!0,23,4);return this.pos+=4,m},readDouble:function(){var m=R0(this.buf,this.pos,!0,52,8);return this.pos+=8,m},readVarint:function(m){var c,g,k=this.buf;return c=127&(g=k[this.pos++]),g<128?c:(c|=(127&(g=k[this.pos++]))<<7,g<128?c:(c|=(127&(g=k[this.pos++]))<<14,g<128?c:(c|=(127&(g=k[this.pos++]))<<21,g<128?c:function(Z,Q,ue){var Se,ze,Ye=ue.buf;if(Se=(112&(ze=Ye[ue.pos++]))>>4,ze<128||(Se|=(127&(ze=Ye[ue.pos++]))<<3,ze<128)||(Se|=(127&(ze=Ye[ue.pos++]))<<10,ze<128)||(Se|=(127&(ze=Ye[ue.pos++]))<<17,ze<128)||(Se|=(127&(ze=Ye[ue.pos++]))<<24,ze<128)||(Se|=(1&(ze=Ye[ue.pos++]))<<31,ze<128))return Yf(Z,Se,Q);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(g=k[this.pos]))<<28,m,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var m=this.readVarint();return m%2==1?(m+1)/-2:m/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var m=this.readVarint()+this.pos,c=this.pos;return this.pos=m,m-c>=12&&z0?function(g,k,Z){return z0.decode(g.subarray(k,Z))}(this.buf,c,m):function(g,k,Z){for(var Q="",ue=k;ue<Z;){var Se,ze,Ye,ot=g[ue],ct=null,wt=ot>239?4:ot>223?3:ot>191?2:1;if(ue+wt>Z)break;wt===1?ot<128&&(ct=ot):wt===2?(192&(Se=g[ue+1]))==128&&(ct=(31&ot)<<6|63&Se)<=127&&(ct=null):wt===3?(ze=g[ue+2],(192&(Se=g[ue+1]))==128&&(192&ze)==128&&((ct=(15&ot)<<12|(63&Se)<<6|63&ze)<=2047||ct>=55296&&ct<=57343)&&(ct=null)):wt===4&&(ze=g[ue+2],Ye=g[ue+3],(192&(Se=g[ue+1]))==128&&(192&ze)==128&&(192&Ye)==128&&((ct=(15&ot)<<18|(63&Se)<<12|(63&ze)<<6|63&Ye)<=65535||ct>=1114112)&&(ct=null)),ct===null?(ct=65533,wt=1):ct>65535&&(ct-=65536,Q+=String.fromCharCode(ct>>>10&1023|55296),ct=56320|1023&ct),Q+=String.fromCharCode(ct),ue+=wt}return Q}(this.buf,c,m)},readBytes:function(){var m=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,m);return this.pos=m,c},readPackedVarint:function(m,c){if(this.type!==Sa.Bytes)return m.push(this.readVarint(c));var g=Tc(this);for(m=m||[];this.pos<g;)m.push(this.readVarint(c));return m},readPackedSVarint:function(m){if(this.type!==Sa.Bytes)return m.push(this.readSVarint());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readSVarint());return m},readPackedBoolean:function(m){if(this.type!==Sa.Bytes)return m.push(this.readBoolean());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readBoolean());return m},readPackedFloat:function(m){if(this.type!==Sa.Bytes)return m.push(this.readFloat());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readFloat());return m},readPackedDouble:function(m){if(this.type!==Sa.Bytes)return m.push(this.readDouble());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readDouble());return m},readPackedFixed32:function(m){if(this.type!==Sa.Bytes)return m.push(this.readFixed32());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readFixed32());return m},readPackedSFixed32:function(m){if(this.type!==Sa.Bytes)return m.push(this.readSFixed32());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readSFixed32());return m},readPackedFixed64:function(m){if(this.type!==Sa.Bytes)return m.push(this.readFixed64());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readFixed64());return m},readPackedSFixed64:function(m){if(this.type!==Sa.Bytes)return m.push(this.readSFixed64());var c=Tc(this);for(m=m||[];this.pos<c;)m.push(this.readSFixed64());return m},skip:function(m){var c=7&m;if(c===Sa.Varint)for(;this.buf[this.pos++]>127;);else if(c===Sa.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Sa.Fixed32)this.pos+=4;else{if(c!==Sa.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(m,c){this.writeVarint(m<<3|c)},realloc:function(m){for(var c=this.length||16;c<this.pos+m;)c*=2;if(c!==this.length){var g=new Uint8Array(c);g.set(this.buf),this.buf=g,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(m){this.realloc(4),Xf(this.buf,m,this.pos),this.pos+=4},writeSFixed32:function(m){this.realloc(4),Xf(this.buf,m,this.pos),this.pos+=4},writeFixed64:function(m){this.realloc(8),Xf(this.buf,-1&m,this.pos),Xf(this.buf,Math.floor(m*O0),this.pos+4),this.pos+=8},writeSFixed64:function(m){this.realloc(8),Xf(this.buf,-1&m,this.pos),Xf(this.buf,Math.floor(m*O0),this.pos+4),this.pos+=8},writeVarint:function(m){(m=+m||0)>268435455||m<0?function(c,g){var k,Z;if(c>=0?(k=c%4294967296|0,Z=c/4294967296|0):(Z=~(-c/4294967296),4294967295^(k=~(-c%4294967296))?k=k+1|0:(k=0,Z=Z+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(Q,ue,Se){Se.buf[Se.pos++]=127&Q|128,Q>>>=7,Se.buf[Se.pos++]=127&Q|128,Q>>>=7,Se.buf[Se.pos++]=127&Q|128,Q>>>=7,Se.buf[Se.pos++]=127&Q|128,Se.buf[Se.pos]=127&(Q>>>=7)}(k,0,g),function(Q,ue){var Se=(7&Q)<<4;ue.buf[ue.pos++]|=Se|((Q>>>=3)?128:0),Q&&(ue.buf[ue.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(ue.buf[ue.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(ue.buf[ue.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(ue.buf[ue.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(ue.buf[ue.pos++]=127&Q)))))}(Z,g)}(m,this):(this.realloc(4),this.buf[this.pos++]=127&m|(m>127?128:0),m<=127||(this.buf[this.pos++]=127&(m>>>=7)|(m>127?128:0),m<=127||(this.buf[this.pos++]=127&(m>>>=7)|(m>127?128:0),m<=127||(this.buf[this.pos++]=m>>>7&127))))},writeSVarint:function(m){this.writeVarint(m<0?2*-m-1:2*m)},writeBoolean:function(m){this.writeVarint(Boolean(m))},writeString:function(m){m=String(m),this.realloc(4*m.length),this.pos++;var c=this.pos;this.pos=function(k,Z,Q){for(var ue,Se,ze=0;ze<Z.length;ze++){if((ue=Z.charCodeAt(ze))>55295&&ue<57344){if(!Se){ue>56319||ze+1===Z.length?(k[Q++]=239,k[Q++]=191,k[Q++]=189):Se=ue;continue}if(ue<56320){k[Q++]=239,k[Q++]=191,k[Q++]=189,Se=ue;continue}ue=Se-55296<<10|ue-56320|65536,Se=null}else Se&&(k[Q++]=239,k[Q++]=191,k[Q++]=189,Se=null);ue<128?k[Q++]=ue:(ue<2048?k[Q++]=ue>>6|192:(ue<65536?k[Q++]=ue>>12|224:(k[Q++]=ue>>18|240,k[Q++]=ue>>12&63|128),k[Q++]=ue>>6&63|128),k[Q++]=63&ue|128)}return Q}(this.buf,m,this.pos);var g=this.pos-c;g>=128&&B0(c,g,this),this.pos=c-1,this.writeVarint(g),this.pos+=g},writeFloat:function(m){this.realloc(4),F0(this.buf,m,this.pos,!0,23,4),this.pos+=4},writeDouble:function(m){this.realloc(8),F0(this.buf,m,this.pos,!0,52,8),this.pos+=8},writeBytes:function(m){var c=m.length;this.writeVarint(c),this.realloc(c);for(var g=0;g<c;g++)this.buf[this.pos++]=m[g]},writeRawMessage:function(m,c){this.pos++;var g=this.pos;m(c,this);var k=this.pos-g;k>=128&&B0(g,k,this),this.pos=g-1,this.writeVarint(k),this.pos+=k},writeMessage:function(m,c,g){this.writeTag(m,Sa.Bytes),this.writeRawMessage(c,g)},writePackedVarint:function(m,c){c.length&&this.writeMessage(m,Nx,c)},writePackedSVarint:function(m,c){c.length&&this.writeMessage(m,Ux,c)},writePackedBoolean:function(m,c){c.length&&this.writeMessage(m,Gx,c)},writePackedFloat:function(m,c){c.length&&this.writeMessage(m,Hx,c)},writePackedDouble:function(m,c){c.length&&this.writeMessage(m,Vx,c)},writePackedFixed32:function(m,c){c.length&&this.writeMessage(m,Zx,c)},writePackedSFixed32:function(m,c){c.length&&this.writeMessage(m,Wx,c)},writePackedFixed64:function(m,c){c.length&&this.writeMessage(m,jx,c)},writePackedSFixed64:function(m,c){c.length&&this.writeMessage(m,Yx,c)},writeBytesField:function(m,c){this.writeTag(m,Sa.Bytes),this.writeBytes(c)},writeFixed32Field:function(m,c){this.writeTag(m,Sa.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(m,c){this.writeTag(m,Sa.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(m,c){this.writeTag(m,Sa.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(m,c){this.writeTag(m,Sa.Fixed64),this.writeSFixed64(c)},writeVarintField:function(m,c){this.writeTag(m,Sa.Varint),this.writeVarint(c)},writeSVarintField:function(m,c){this.writeTag(m,Sa.Varint),this.writeSVarint(c)},writeStringField:function(m,c){this.writeTag(m,Sa.Bytes),this.writeString(c)},writeFloatField:function(m,c){this.writeTag(m,Sa.Fixed32),this.writeFloat(c)},writeDoubleField:function(m,c){this.writeTag(m,Sa.Fixed64),this.writeDouble(c)},writeBooleanField:function(m,c){this.writeVarintField(m,Boolean(c))}};class mm{constructor(c,{pixelRatio:g,version:k,stretchX:Z,stretchY:Q,content:ue}){this.paddedRect=c,this.pixelRatio=g,this.stretchX=Z,this.stretchY=Q,this.content=ue,this.version=k}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class H0{constructor(c,g){const k={},Z={};this.haveRenderCallbacks=[];const Q=[];this.addImages(c,k,Q),this.addImages(g,Z,Q);const{w:ue,h:Se}=U0(Q),ze=new na({width:ue||1,height:Se||1});for(const Ye in c){const ot=c[Ye],ct=k[Ye].paddedRect;na.copy(ot.data,ze,{x:0,y:0},{x:ct.x+1,y:ct.y+1},ot.data)}for(const Ye in g){const ot=g[Ye],ct=Z[Ye].paddedRect,wt=ct.x+1,Dt=ct.y+1,It=ot.data.width,ar=ot.data.height;na.copy(ot.data,ze,{x:0,y:0},{x:wt,y:Dt},ot.data),na.copy(ot.data,ze,{x:0,y:ar-1},{x:wt,y:Dt-1},{width:It,height:1}),na.copy(ot.data,ze,{x:0,y:0},{x:wt,y:Dt+ar},{width:It,height:1}),na.copy(ot.data,ze,{x:It-1,y:0},{x:wt-1,y:Dt},{width:1,height:ar}),na.copy(ot.data,ze,{x:0,y:0},{x:wt+It,y:Dt},{width:1,height:ar})}this.image=ze,this.iconPositions=k,this.patternPositions=Z}addImages(c,g,k){for(const Z in c){const Q=c[Z],ue={x:0,y:0,w:Q.data.width+2,h:Q.data.height+2};k.push(ue),g[Z]=new mm(ue,Q),Q.hasRenderCallback&&this.haveRenderCallbacks.push(Z)}}patchUpdatedImages(c,g){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const k in c.updatedImages)this.patchUpdatedImage(this.iconPositions[k],c.getImage(k),g),this.patchUpdatedImage(this.patternPositions[k],c.getImage(k),g)}patchUpdatedImage(c,g,k){if(!c||!g||c.version===g.version)return;c.version=g.version;const[Z,Q]=c.tl;k.update(g.data,void 0,{x:Z,y:Q})}}On("ImagePosition",mm),On("ImageAtlas",H0),n.WritingMode=void 0,(rf=n.WritingMode||(n.WritingMode={}))[rf.none=0]="none",rf[rf.horizontal=1]="horizontal",rf[rf.vertical=2]="vertical",rf[rf.horizontalOnly=3]="horizontalOnly";const Ed=-17;class Nh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,g){const k=new Nh;return k.scale=c||1,k.fontStack=g,k}static forImage(c){const g=new Nh;return g.imageName=c,g}}class Kf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,g){const k=new Kf;for(let Z=0;Z<c.sections.length;Z++){const Q=c.sections[Z];Q.image?k.addImageSection(Q):k.addTextSection(Q,g)}return k}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let g="";for(let k=0;k<c.length;k++){const Z=c.charCodeAt(k+1)||null,Q=c.charCodeAt(k-1)||null;g+=Z&&fc(Z)&&!Bh[c[k+1]]||Q&&fc(Q)&&!Bh[c[k-1]]||!Bh[c[k]]?c[k]:Bh[c[k]]}return g}(this.text)}trim(){let c=0;for(let k=0;k<this.text.length&&Dd[this.text.charCodeAt(k)];k++)c++;let g=this.text.length;for(let k=this.text.length-1;k>=0&&k>=c&&Dd[this.text.charCodeAt(k)];k--)g--;this.text=this.text.substring(c,g),this.sectionIndex=this.sectionIndex.slice(c,g)}substring(c,g){const k=new Kf;return k.text=this.text.substring(c,g),k.sectionIndex=this.sectionIndex.slice(c,g),k.sections=this.sections,k}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,g)=>Math.max(c,this.sections[g].scale),0)}addTextSection(c,g){this.text+=c.text,this.sections.push(Nh.forText(c.scale,c.fontStack||g));const k=this.sections.length-1;for(let Z=0;Z<c.text.length;++Z)this.sectionIndex.push(k)}addImageSection(c){const g=c.image?c.image.name:"";if(g.length===0)return void R("Can't add FormattedSection with an empty image.");const k=this.getNextImageSectionCharCode();k?(this.text+=String.fromCharCode(k),this.sections.push(Nh.forImage(g)),this.sectionIndex.push(this.sections.length-1)):R("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Cd(m,c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar){const qt=Kf.fromFeature(m,Z);let Fr;ct===n.WritingMode.vertical&&qt.verticalizePunctuation();const{processBidirectionalText:jr,processStyledBidirectionalText:Lr}=Zo;if(jr&&qt.sections.length===1){Fr=[];const an=jr(qt.toString(),vm(qt,Ye,Q,c,k,Dt,It));for(const jn of an){const Jn=new Kf;Jn.text=jn,Jn.sections=qt.sections;for(let Un=0;Un<jn.length;Un++)Jn.sectionIndex.push(0);Fr.push(Jn)}}else if(Lr){Fr=[];const an=Lr(qt.text,qt.sectionIndex,vm(qt,Ye,Q,c,k,Dt,It));for(const jn of an){const Jn=new Kf;Jn.text=jn[0],Jn.sectionIndex=jn[1],Jn.sections=qt.sections,Fr.push(Jn)}}else Fr=function(an,jn){const Jn=[],Un=an.text;let Ln=0;for(const kn of jn)Jn.push(an.substring(Ln,kn)),Ln=kn;return Ln<Un.length&&Jn.push(an.substring(Ln,Un.length)),Jn}(qt,vm(qt,Ye,Q,c,k,Dt,It));const Hr=[],ln={positionedLines:Hr,text:qt.toString(),top:ot[1],bottom:ot[1],left:ot[0],right:ot[0],writingMode:ct,iconsInText:!1,verticalizable:!1};return function(an,jn,Jn,Un,Ln,kn,Hn,Fn,gn,ti,$n,Ii){let Ra=0,Na=Ed,To=0,Fl=0;const rs=Fn==="right"?1:Fn==="left"?0:.5;let go=0;for(const yo of Ln){yo.trim();const is=yo.getMaxScale(),_s=(is-1)*Yo,Fs={positionedGlyphs:[],lineOffset:0};an.positionedLines[go]=Fs;const Xs=Fs.positionedGlyphs;let Ks=0;if(!yo.length()){Na+=kn,++go;continue}for(let zo=0;zo<yo.length();zo++){const zi=yo.getSection(zo),dl=yo.getSectionIndex(zo),as=yo.getCharCode(zo);let bs=0,tu=null,Tu=null,Au=null,Sc=Yo;const ru=!(gn===n.WritingMode.horizontal||!$n&&!ms(as)||$n&&(Dd[as]||(Oo=as,Mn.Arabic(Oo)||Mn["Arabic Supplement"](Oo)||Mn["Arabic Extended-A"](Oo)||Mn["Arabic Presentation Forms-A"](Oo)||Mn["Arabic Presentation Forms-B"](Oo))));if(zi.imageName){const Ol=Un[zi.imageName];if(!Ol)continue;Au=zi.imageName,an.iconsInText=an.iconsInText||!0,Tu=Ol.paddedRect;const Js=Ol.displaySize;zi.scale=zi.scale*Yo/Ii,tu={width:Js[0],height:Js[1],left:1,top:-3,advance:ru?Js[1]:Js[0]},bs=_s+(Yo-Js[1]*zi.scale),Sc=tu.advance;const Ec=ru?Js[0]*zi.scale-Yo*is:Js[1]*zi.scale-Yo*is;Ec>0&&Ec>Ks&&(Ks=Ec)}else{const Ol=Jn[zi.fontStack],Js=Ol&&Ol[as];if(Js&&Js.rect)Tu=Js.rect,tu=Js.metrics;else{const Ec=jn[zi.fontStack],Vh=Ec&&Ec[as];if(!Vh)continue;tu=Vh.metrics}bs=(is-zi.scale)*Yo}ru?(an.verticalizable=!0,Xs.push({glyph:as,imageName:Au,x:Ra,y:Na+bs,vertical:ru,scale:zi.scale,fontStack:zi.fontStack,sectionIndex:dl,metrics:tu,rect:Tu}),Ra+=Sc*zi.scale+ti):(Xs.push({glyph:as,imageName:Au,x:Ra,y:Na+bs,vertical:ru,scale:zi.scale,fontStack:zi.fontStack,sectionIndex:dl,metrics:tu,rect:Tu}),Ra+=tu.advance*zi.scale+ti)}Xs.length!==0&&(To=Math.max(Ra-ti,To),qx(Xs,0,Xs.length-1,rs,Ks)),Ra=0;const ja=kn*is+Ks;Fs.lineOffset=Math.max(Ks,_s),Na+=ja,Fl=Math.max(ja,Fl),++go}var Oo;const ns=Na-Ed,{horizontalAlign:ys,verticalAlign:Ys}=gm(Hn);(function(yo,is,_s,Fs,Xs,Ks,ja,zo,zi){const dl=(is-_s)*Xs;let as=0;as=Ks!==ja?-zo*Fs-Ed:(-Fs*zi+.5)*ja;for(const bs of yo)for(const tu of bs.positionedGlyphs)tu.x+=dl,tu.y+=as})(an.positionedLines,rs,ys,Ys,To,Fl,kn,ns,Ln.length),an.top+=-Ys*ns,an.bottom=an.top+ns,an.left+=-ys*To,an.right=an.left+To}(ln,c,g,k,Fr,ue,Se,ze,ct,Ye,wt,ar),!function(an){for(const jn of an)if(jn.positionedGlyphs.length!==0)return!1;return!0}(Hr)&&ln}const Dd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$x={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function V0(m,c,g,k,Z,Q){if(c.imageName){const ue=k[c.imageName];return ue?ue.displaySize[0]*c.scale*Yo/Q+Z:0}{const ue=g[c.fontStack],Se=ue&&ue[m];return Se?Se.metrics.advance*c.scale+Z:0}}function G0(m,c,g,k){const Z=Math.pow(m-c,2);return k?m<c?Z/2:2*Z:Z+Math.abs(g)*g}function Qx(m,c,g){let k=0;return m===10&&(k-=1e4),g&&(k+=150),m!==40&&m!==65288||(k+=50),c!==41&&c!==65289||(k+=50),k}function Z0(m,c,g,k,Z,Q){let ue=null,Se=G0(c,g,Z,Q);for(const ze of k){const Ye=G0(c-ze.x,g,Z,Q)+ze.badness;Ye<=Se&&(ue=ze,Se=Ye)}return{index:m,x:c,priorBreak:ue,badness:Se}}function W0(m){return m?W0(m.priorBreak).concat(m.index):[]}function vm(m,c,g,k,Z,Q,ue){if(Q!=="point")return[];if(!m)return[];const Se=[],ze=function(wt,Dt,It,ar,qt,Fr){let jr=0;for(let Lr=0;Lr<wt.length();Lr++){const Hr=wt.getSection(Lr);jr+=V0(wt.getCharCode(Lr),Hr,ar,qt,Dt,Fr)}return jr/Math.max(1,Math.ceil(jr/It))}(m,c,g,k,Z,ue),Ye=m.text.indexOf("\u200B")>=0;let ot=0;for(let wt=0;wt<m.length();wt++){const Dt=m.getSection(wt),It=m.getCharCode(wt);if(Dd[It]||(ot+=V0(It,Dt,k,Z,c,ue)),wt<m.length()-1){const ar=!((ct=It)<11904||!(Mn["Bopomofo Extended"](ct)||Mn.Bopomofo(ct)||Mn["CJK Compatibility Forms"](ct)||Mn["CJK Compatibility Ideographs"](ct)||Mn["CJK Compatibility"](ct)||Mn["CJK Radicals Supplement"](ct)||Mn["CJK Strokes"](ct)||Mn["CJK Symbols and Punctuation"](ct)||Mn["CJK Unified Ideographs Extension A"](ct)||Mn["CJK Unified Ideographs"](ct)||Mn["Enclosed CJK Letters and Months"](ct)||Mn["Halfwidth and Fullwidth Forms"](ct)||Mn.Hiragana(ct)||Mn["Ideographic Description Characters"](ct)||Mn["Kangxi Radicals"](ct)||Mn["Katakana Phonetic Extensions"](ct)||Mn.Katakana(ct)||Mn["Vertical Forms"](ct)||Mn["Yi Radicals"](ct)||Mn["Yi Syllables"](ct)));($x[It]||ar||Dt.imageName)&&Se.push(Z0(wt+1,ot,ze,Se,Qx(It,m.getCharCode(wt+1),ar&&Ye),!1))}}var ct;return W0(Z0(m.length(),ot,ze,Se,0,!0))}function gm(m){let c=.5,g=.5;switch(m){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(m){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:c,verticalAlign:g}}function qx(m,c,g,k,Z){if(!k&&!Z)return;const Q=m[g],ue=(m[g].x+Q.metrics.advance*Q.scale)*k;for(let Se=c;Se<=g;Se++)m[Se].x-=ue,m[Se].y+=Z}function e2(m,c,g){const{horizontalAlign:k,verticalAlign:Z}=gm(g),Q=c[0]-m.displaySize[0]*k,ue=c[1]-m.displaySize[1]*Z;return{image:m,top:ue,bottom:ue+m.displaySize[1],left:Q,right:Q+m.displaySize[0]}}function j0(m,c,g,k,Z,Q){const ue=m.image;let Se;if(ue.content){const qt=ue.content,Fr=ue.pixelRatio||1;Se=[qt[0]/Fr,qt[1]/Fr,ue.displaySize[0]-qt[2]/Fr,ue.displaySize[1]-qt[3]/Fr]}const ze=c.left*Q,Ye=c.right*Q;let ot,ct,wt,Dt;g==="width"||g==="both"?(Dt=Z[0]+ze-k[3],ct=Z[0]+Ye+k[1]):(Dt=Z[0]+(ze+Ye-ue.displaySize[0])/2,ct=Dt+ue.displaySize[0]);const It=c.top*Q,ar=c.bottom*Q;return g==="height"||g==="both"?(ot=Z[1]+It-k[0],wt=Z[1]+ar+k[2]):(ot=Z[1]+(It+ar-ue.displaySize[1])/2,wt=ot+ue.displaySize[1]),{image:ue,top:ot,right:ct,bottom:wt,left:Dt,collisionPadding:Se}}const Ac=128;function Y0(m,c){const{expression:g}=c;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new ba(m+1))};if(g.kind==="source")return{kind:"source"};{const{zoomStops:k,interpolationType:Z}=g;let Q=0;for(;Q<k.length&&k[Q]<=m;)Q++;Q=Math.max(0,Q-1);let ue=Q;for(;ue<k.length&&k[ue]<m+1;)ue++;ue=Math.min(k.length-1,ue);const Se=k[Q],ze=k[ue];return g.kind==="composite"?{kind:"composite",minZoom:Se,maxZoom:ze,interpolationType:Z}:{kind:"camera",minZoom:Se,maxZoom:ze,minSize:g.evaluate(new ba(Se)),maxSize:g.evaluate(new ba(ze)),interpolationType:Z}}}class nf extends Y{constructor(c,g,k,Z){super(c,g),this.angle=k,Z!==void 0&&(this.segment=Z)}clone(){return new nf(this.x,this.y,this.angle,this.segment)}}function X0(m,c,g,k,Z){if(c.segment===void 0)return!0;let Q=c,ue=c.segment+1,Se=0;for(;Se>-g/2;){if(ue--,ue<0)return!1;Se-=m[ue].dist(Q),Q=m[ue]}Se+=m[ue].dist(m[ue+1]),ue++;const ze=[];let Ye=0;for(;Se<g/2;){const ot=m[ue],ct=m[ue+1];if(!ct)return!1;let wt=m[ue-1].angleTo(ot)-ot.angleTo(ct);for(wt=Math.abs((wt+3*Math.PI)%(2*Math.PI)-Math.PI),ze.push({distance:Se,angleDelta:wt}),Ye+=wt;Se-ze[0].distance>k;)Ye-=ze.shift().angleDelta;if(Ye>Z)return!1;ue++,Se+=ot.dist(ct)}return!0}function K0(m){let c=0;for(let g=0;g<m.length-1;g++)c+=m[g].dist(m[g+1]);return c}function J0(m,c,g){return m?.6*c*g:0}function $0(m,c){return Math.max(m?m.right-m.left:0,c?c.right-c.left:0)}function t2(m,c,g,k,Z,Q){const ue=J0(g,Z,Q),Se=$0(g,k)*Q;let ze=0;const Ye=K0(m)/2;for(let ot=0;ot<m.length-1;ot++){const ct=m[ot],wt=m[ot+1],Dt=ct.dist(wt);if(ze+Dt>Ye){const It=(Ye-ze)/Dt,ar=mn(ct.x,wt.x,It),qt=mn(ct.y,wt.y,It),Fr=new nf(ar,qt,wt.angleTo(ct),ot);return Fr._round(),!ue||X0(m,Fr,Se,ue,c)?Fr:void 0}ze+=Dt}}function r2(m,c,g,k,Z,Q,ue,Se,ze){const Ye=J0(k,Q,ue),ot=$0(k,Z),ct=ot*ue,wt=m[0].x===0||m[0].x===ze||m[0].y===0||m[0].y===ze;return c-ct<c/4&&(c=ct+c/4),Q0(m,wt?c/2*Se%c:(ot/2+2*Q)*ue*Se%c,c,Ye,g,ct,wt,!1,ze)}function Q0(m,c,g,k,Z,Q,ue,Se,ze){const Ye=Q/2,ot=K0(m);let ct=0,wt=c-g,Dt=[];for(let It=0;It<m.length-1;It++){const ar=m[It],qt=m[It+1],Fr=ar.dist(qt),jr=qt.angleTo(ar);for(;wt+g<ct+Fr;){wt+=g;const Lr=(wt-ct)/Fr,Hr=mn(ar.x,qt.x,Lr),ln=mn(ar.y,qt.y,Lr);if(Hr>=0&&Hr<ze&&ln>=0&&ln<ze&&wt-Ye>=0&&wt+Ye<=ot){const an=new nf(Hr,ln,jr,It);an._round(),k&&!X0(m,an,Q,k,Z)||Dt.push(an)}}ct+=Fr}return Se||Dt.length||ue||(Dt=Q0(m,ct/2,g,k,Z,Q,ue,!0,ze)),Dt}function q0(m,c,g,k,Z){const Q=[];for(let ue=0;ue<m.length;ue++){const Se=m[ue];let ze;for(let Ye=0;Ye<Se.length-1;Ye++){let ot=Se[Ye],ct=Se[Ye+1];ot.x<c&&ct.x<c||(ot.x<c?ot=new Y(c,ot.y+(c-ot.x)/(ct.x-ot.x)*(ct.y-ot.y))._round():ct.x<c&&(ct=new Y(c,ot.y+(c-ot.x)/(ct.x-ot.x)*(ct.y-ot.y))._round()),ot.y<g&&ct.y<g||(ot.y<g?ot=new Y(ot.x+(g-ot.y)/(ct.y-ot.y)*(ct.x-ot.x),g)._round():ct.y<g&&(ct=new Y(ot.x+(g-ot.y)/(ct.y-ot.y)*(ct.x-ot.x),g)._round()),ot.x>=k&&ct.x>=k||(ot.x>=k?ot=new Y(k,ot.y+(k-ot.x)/(ct.x-ot.x)*(ct.y-ot.y))._round():ct.x>=k&&(ct=new Y(k,ot.y+(k-ot.x)/(ct.x-ot.x)*(ct.y-ot.y))._round()),ot.y>=Z&&ct.y>=Z||(ot.y>=Z?ot=new Y(ot.x+(Z-ot.y)/(ct.y-ot.y)*(ct.x-ot.x),Z)._round():ct.y>=Z&&(ct=new Y(ot.x+(Z-ot.y)/(ct.y-ot.y)*(ct.x-ot.x),Z)._round()),ze&&ot.equals(ze[ze.length-1])||(ze=[ot],Q.push(ze)),ze.push(ct)))))}}return Q}function eg(m,c,g,k){const Z=[],Q=m.image,ue=Q.pixelRatio,Se=Q.paddedRect.w-2,ze=Q.paddedRect.h-2,Ye=m.right-m.left,ot=m.bottom-m.top,ct=Q.stretchX||[[0,Se]],wt=Q.stretchY||[[0,ze]],Dt=(kn,Hn)=>kn+Hn[1]-Hn[0],It=ct.reduce(Dt,0),ar=wt.reduce(Dt,0),qt=Se-It,Fr=ze-ar;let jr=0,Lr=It,Hr=0,ln=ar,an=0,jn=qt,Jn=0,Un=Fr;if(Q.content&&k){const kn=Q.content;jr=Md(ct,0,kn[0]),Hr=Md(wt,0,kn[1]),Lr=Md(ct,kn[0],kn[2]),ln=Md(wt,kn[1],kn[3]),an=kn[0]-jr,Jn=kn[1]-Hr,jn=kn[2]-kn[0]-Lr,Un=kn[3]-kn[1]-ln}const Ln=(kn,Hn,Fn,gn)=>{const ti=kd(kn.stretch-jr,Lr,Ye,m.left),$n=Id(kn.fixed-an,jn,kn.stretch,It),Ii=kd(Hn.stretch-Hr,ln,ot,m.top),Ra=Id(Hn.fixed-Jn,Un,Hn.stretch,ar),Na=kd(Fn.stretch-jr,Lr,Ye,m.left),To=Id(Fn.fixed-an,jn,Fn.stretch,It),Fl=kd(gn.stretch-Hr,ln,ot,m.top),rs=Id(gn.fixed-Jn,Un,gn.stretch,ar),go=new Y(ti,Ii),Oo=new Y(Na,Ii),ns=new Y(Na,Fl),ys=new Y(ti,Fl),Ys=new Y($n/ue,Ra/ue),yo=new Y(To/ue,rs/ue),is=c*Math.PI/180;if(is){const Xs=Math.sin(is),Ks=Math.cos(is),ja=[Ks,-Xs,Xs,Ks];go._matMult(ja),Oo._matMult(ja),ys._matMult(ja),ns._matMult(ja)}const _s=kn.stretch+kn.fixed,Fs=Hn.stretch+Hn.fixed;return{tl:go,tr:Oo,bl:ys,br:ns,tex:{x:Q.paddedRect.x+1+_s,y:Q.paddedRect.y+1+Fs,w:Fn.stretch+Fn.fixed-_s,h:gn.stretch+gn.fixed-Fs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ys,pixelOffsetBR:yo,minFontScaleX:jn/ue/Ye,minFontScaleY:Un/ue/ot,isSDF:g}};if(k&&(Q.stretchX||Q.stretchY)){const kn=tg(ct,qt,It),Hn=tg(wt,Fr,ar);for(let Fn=0;Fn<kn.length-1;Fn++){const gn=kn[Fn],ti=kn[Fn+1];for(let $n=0;$n<Hn.length-1;$n++)Z.push(Ln(gn,Hn[$n],ti,Hn[$n+1]))}}else Z.push(Ln({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Se+1},{fixed:0,stretch:ze+1}));return Z}function Md(m,c,g){let k=0;for(const Z of m)k+=Math.max(c,Math.min(g,Z[1]))-Math.max(c,Math.min(g,Z[0]));return k}function tg(m,c,g){const k=[{fixed:-1,stretch:0}];for(const[Z,Q]of m){const ue=k[k.length-1];k.push({fixed:Z-ue.stretch,stretch:ue.stretch}),k.push({fixed:Z-ue.stretch,stretch:ue.stretch+(Q-Z)})}return k.push({fixed:c+1,stretch:g}),k}function kd(m,c,g,k){return m/c*g+k}function Id(m,c,g,k){return m-c*g/k}On("Anchor",nf);class Ld{constructor(c,g,k,Z,Q,ue,Se,ze,Ye,ot){if(this.boxStartIndex=c.length,Ye){let ct=ue.top,wt=ue.bottom;const Dt=ue.collisionPadding;Dt&&(ct-=Dt[1],wt+=Dt[3]);let It=wt-ct;It>0&&(It=Math.max(10,It),this.circleDiameter=It)}else{let ct=ue.top*Se-ze[0],wt=ue.bottom*Se+ze[2],Dt=ue.left*Se-ze[3],It=ue.right*Se+ze[1];const ar=ue.collisionPadding;if(ar&&(Dt-=ar[0]*Se,ct-=ar[1]*Se,It+=ar[2]*Se,wt+=ar[3]*Se),ot){const qt=new Y(Dt,ct),Fr=new Y(It,ct),jr=new Y(Dt,wt),Lr=new Y(It,wt),Hr=ot*Math.PI/180;qt._rotate(Hr),Fr._rotate(Hr),jr._rotate(Hr),Lr._rotate(Hr),Dt=Math.min(qt.x,Fr.x,jr.x,Lr.x),It=Math.max(qt.x,Fr.x,jr.x,Lr.x),ct=Math.min(qt.y,Fr.y,jr.y,Lr.y),wt=Math.max(qt.y,Fr.y,jr.y,Lr.y)}c.emplaceBack(g.x,g.y,Dt,ct,It,wt,k,Z,Q)}this.boxEndIndex=c.length}}class n2{constructor(c=[],g=i2){if(this.data=c,this.length=this.data.length,this.compare=g,this.length>0)for(let k=(this.length>>1)-1;k>=0;k--)this._down(k)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const c=this.data[0],g=this.data.pop();return this.length--,this.length>0&&(this.data[0]=g,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:g,compare:k}=this,Z=g[c];for(;c>0;){const Q=c-1>>1,ue=g[Q];if(k(Z,ue)>=0)break;g[c]=ue,c=Q}g[c]=Z}_down(c){const{data:g,compare:k}=this,Z=this.length>>1,Q=g[c];for(;c<Z;){let ue=1+(c<<1),Se=g[ue];const ze=ue+1;if(ze<this.length&&k(g[ze],Se)<0&&(ue=ze,Se=g[ze]),k(Se,Q)>=0)break;g[c]=Se,c=ue}g[c]=Q}}function i2(m,c){return m<c?-1:m>c?1:0}function a2(m,c=1,g=!1){let k=1/0,Z=1/0,Q=-1/0,ue=-1/0;const Se=m[0];for(let Dt=0;Dt<Se.length;Dt++){const It=Se[Dt];(!Dt||It.x<k)&&(k=It.x),(!Dt||It.y<Z)&&(Z=It.y),(!Dt||It.x>Q)&&(Q=It.x),(!Dt||It.y>ue)&&(ue=It.y)}const ze=Math.min(Q-k,ue-Z);let Ye=ze/2;const ot=new n2([],o2);if(ze===0)return new Y(k,Z);for(let Dt=k;Dt<Q;Dt+=ze)for(let It=Z;It<ue;It+=ze)ot.push(new Jf(Dt+Ye,It+Ye,Ye,m));let ct=function(Dt){let It=0,ar=0,qt=0;const Fr=Dt[0];for(let jr=0,Lr=Fr.length,Hr=Lr-1;jr<Lr;Hr=jr++){const ln=Fr[jr],an=Fr[Hr],jn=ln.x*an.y-an.x*ln.y;ar+=(ln.x+an.x)*jn,qt+=(ln.y+an.y)*jn,It+=3*jn}return new Jf(ar/It,qt/It,0,Dt)}(m),wt=ot.length;for(;ot.length;){const Dt=ot.pop();(Dt.d>ct.d||!ct.d)&&(ct=Dt,g&&console.log("found best %d after %d probes",Math.round(1e4*Dt.d)/1e4,wt)),Dt.max-ct.d<=c||(Ye=Dt.h/2,ot.push(new Jf(Dt.p.x-Ye,Dt.p.y-Ye,Ye,m)),ot.push(new Jf(Dt.p.x+Ye,Dt.p.y-Ye,Ye,m)),ot.push(new Jf(Dt.p.x-Ye,Dt.p.y+Ye,Ye,m)),ot.push(new Jf(Dt.p.x+Ye,Dt.p.y+Ye,Ye,m)),wt+=4)}return g&&(console.log(`num probes: ${wt}`),console.log(`best distance: ${ct.d}`)),ct.p}function o2(m,c){return c.max-m.max}function Jf(m,c,g,k){this.p=new Y(m,c),this.h=g,this.d=function(Z,Q){let ue=!1,Se=1/0;for(let ze=0;ze<Q.length;ze++){const Ye=Q[ze];for(let ot=0,ct=Ye.length,wt=ct-1;ot<ct;wt=ot++){const Dt=Ye[ot],It=Ye[wt];Dt.y>Z.y!=It.y>Z.y&&Z.x<(It.x-Dt.x)*(Z.y-Dt.y)/(It.y-Dt.y)+Dt.x&&(ue=!ue),Se=Math.min(Se,be(Z,Dt,It))}}return(ue?1:-1)*Math.sqrt(Se)}(this.p,k),this.max=this.d+this.h*Math.SQRT2}const ym=Number.POSITIVE_INFINITY;function rg(m,c){return c[1]!==ym?function(g,k,Z){let Q=0,ue=0;switch(k=Math.abs(k),Z=Math.abs(Z),g){case"top-right":case"top-left":case"top":ue=Z-7;break;case"bottom-right":case"bottom-left":case"bottom":ue=7-Z}switch(g){case"top-right":case"bottom-right":case"right":Q=-k;break;case"top-left":case"bottom-left":case"left":Q=k}return[Q,ue]}(m,c[0],c[1]):function(g,k){let Z=0,Q=0;k<0&&(k=0);const ue=k/Math.sqrt(2);switch(g){case"top-right":case"top-left":Q=ue-7;break;case"bottom-right":case"bottom-left":Q=7-ue;break;case"bottom":Q=7-k;break;case"top":Q=k-7}switch(g){case"top-right":case"bottom-right":Z=-ue;break;case"top-left":case"bottom-left":Z=ue;break;case"left":Z=k;break;case"right":Z=-k}return[Z,Q]}(m,c[0])}function _m(m){switch(m){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function s2(m,c,g,k,Z,Q,ue,Se,ze,Ye,ot){let ct=Q.textMaxSize.evaluate(c,{});ct===void 0&&(ct=ue);const wt=m.layers[0].layout,Dt=wt.get("icon-offset").evaluate(c,{},ot),It=ig(g.horizontal),ar=ue/24,qt=m.tilePixelRatio*ar,Fr=m.tilePixelRatio*ct/24,jr=m.tilePixelRatio*Se,Lr=m.tilePixelRatio*wt.get("symbol-spacing"),Hr=wt.get("text-padding")*m.tilePixelRatio,ln=function(gn,ti,$n,Ii=1){const Ra=gn.get("icon-padding").evaluate(ti,{},$n),Na=Ra&&Ra.values;return[Na[0]*Ii,Na[1]*Ii,Na[2]*Ii,Na[3]*Ii]}(wt,c,ot,m.tilePixelRatio),an=wt.get("text-max-angle")/180*Math.PI,jn=wt.get("text-rotation-alignment")!=="viewport"&&wt.get("symbol-placement")!=="point",Jn=wt.get("icon-rotation-alignment")==="map"&&wt.get("symbol-placement")!=="point",Un=wt.get("symbol-placement"),Ln=Lr/2,kn=wt.get("icon-text-fit");let Hn;k&&kn!=="none"&&(m.allowVerticalPlacement&&g.vertical&&(Hn=j0(k,g.vertical,kn,wt.get("icon-text-fit-padding"),Dt,ar)),It&&(k=j0(k,It,kn,wt.get("icon-text-fit-padding"),Dt,ar)));const Fn=(gn,ti)=>{ti.x<0||ti.x>=Ja||ti.y<0||ti.y>=Ja||function($n,Ii,Ra,Na,To,Fl,rs,go,Oo,ns,ys,Ys,yo,is,_s,Fs,Xs,Ks,ja,zo,zi,dl,as,bs,tu){const Tu=$n.addToLineVertexArray(Ii,Ra);let Au,Sc,ru,Ol,Js=0,Ec=0,Vh=0,bg=0,Mm=-1,km=-1;const Cc={};let xg=mo.exports(""),Im=0,Lm=0;if(go._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Im,Lm]=go.layout.get("text-offset").evaluate(zi,{},bs).map($s=>$s*Yo):(Im=go.layout.get("text-radial-offset").evaluate(zi,{},bs)*Yo,Lm=ym),$n.allowVerticalPlacement&&Na.vertical){const $s=go.layout.get("text-rotate").evaluate(zi,{},bs)+90;ru=new Ld(Oo,Ii,ns,ys,Ys,Na.vertical,yo,is,_s,$s),rs&&(Ol=new Ld(Oo,Ii,ns,ys,Ys,rs,Xs,Ks,_s,$s))}if(To){const $s=go.layout.get("icon-rotate").evaluate(zi,{}),qu=go.layout.get("icon-text-fit")!=="none",Gh=eg(To,$s,as,qu),Zh=rs?eg(rs,$s,as,qu):void 0;Sc=new Ld(Oo,Ii,ns,ys,Ys,To,Xs,Ks,!1,$s),Js=4*Gh.length;const Ag=$n.iconSizeData;let bf=null;Ag.kind==="source"?(bf=[Ac*go.layout.get("icon-size").evaluate(zi,{})],bf[0]>af&&R(`${$n.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Ag.kind==="composite"&&(bf=[Ac*dl.compositeIconSizes[0].evaluate(zi,{},bs),Ac*dl.compositeIconSizes[1].evaluate(zi,{},bs)],(bf[0]>af||bf[1]>af)&&R(`${$n.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),$n.addSymbols($n.icon,Gh,bf,zo,ja,zi,n.WritingMode.none,Ii,Tu.lineStartIndex,Tu.lineLength,-1,bs),Mm=$n.icon.placedSymbolArray.length-1,Zh&&(Ec=4*Zh.length,$n.addSymbols($n.icon,Zh,bf,zo,ja,zi,n.WritingMode.vertical,Ii,Tu.lineStartIndex,Tu.lineLength,-1,bs),km=$n.icon.placedSymbolArray.length-1)}const wg=Object.keys(Na.horizontal);for(const $s of wg){const qu=Na.horizontal[$s];if(!Au){xg=mo.exports(qu.text);const Zh=go.layout.get("text-rotate").evaluate(zi,{},bs);Au=new Ld(Oo,Ii,ns,ys,Ys,qu,yo,is,_s,Zh)}const Gh=qu.positionedLines.length===1;if(Vh+=ng($n,Ii,qu,Fl,go,_s,zi,Fs,Tu,Na.vertical?n.WritingMode.horizontal:n.WritingMode.horizontalOnly,Gh?wg:[$s],Cc,Mm,dl,bs),Gh)break}Na.vertical&&(bg+=ng($n,Ii,Na.vertical,Fl,go,_s,zi,Fs,Tu,n.WritingMode.vertical,["vertical"],Cc,km,dl,bs));const b2=Au?Au.boxStartIndex:$n.collisionBoxArray.length,x2=Au?Au.boxEndIndex:$n.collisionBoxArray.length,w2=ru?ru.boxStartIndex:$n.collisionBoxArray.length,T2=ru?ru.boxEndIndex:$n.collisionBoxArray.length,A2=Sc?Sc.boxStartIndex:$n.collisionBoxArray.length,S2=Sc?Sc.boxEndIndex:$n.collisionBoxArray.length,E2=Ol?Ol.boxStartIndex:$n.collisionBoxArray.length,C2=Ol?Ol.boxEndIndex:$n.collisionBoxArray.length;let Su=-1;const zd=($s,qu)=>$s&&$s.circleDiameter?Math.max($s.circleDiameter,qu):qu;Su=zd(Au,Su),Su=zd(ru,Su),Su=zd(Sc,Su),Su=zd(Ol,Su);const Tg=Su>-1?1:0;Tg&&(Su*=tu/Yo),$n.glyphOffsetArray.length>=$f.MAX_GLYPHS&&R("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zi.sortKey!==void 0&&$n.addToSortKeyRanges($n.symbolInstances.length,zi.sortKey),$n.symbolInstances.emplaceBack(Ii.x,Ii.y,Cc.right>=0?Cc.right:-1,Cc.center>=0?Cc.center:-1,Cc.left>=0?Cc.left:-1,Cc.vertical||-1,Mm,km,xg,b2,x2,w2,T2,A2,S2,E2,C2,ns,Vh,bg,Js,Ec,Tg,0,yo,Im,Lm,Su)}(m,ti,gn,g,k,Z,Hn,m.layers[0],m.collisionBoxArray,c.index,c.sourceLayerIndex,m.index,qt,[Hr,Hr,Hr,Hr],jn,ze,jr,ln,Jn,Dt,c,Q,Ye,ot,ue)};if(Un==="line")for(const gn of q0(c.geometry,0,0,Ja,Ja)){const ti=r2(gn,Lr,an,g.vertical||It,k,24,Fr,m.overscaling,Ja);for(const $n of ti){const Ii=It;Ii&&l2(m,Ii.text,Ln,$n)||Fn(gn,$n)}}else if(Un==="line-center"){for(const gn of c.geometry)if(gn.length>1){const ti=t2(gn,an,g.vertical||It,k,24,Fr);ti&&Fn(gn,ti)}}else if(c.type==="Polygon")for(const gn of om(c.geometry,0)){const ti=a2(gn,16);Fn(gn[0],new nf(ti.x,ti.y,0))}else if(c.type==="LineString")for(const gn of c.geometry)Fn(gn,new nf(gn[0].x,gn[0].y,0));else if(c.type==="Point")for(const gn of c.geometry)for(const ti of gn)Fn([ti],new nf(ti.x,ti.y,0))}const af=32640;function ng(m,c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It){const ar=function(jr,Lr,Hr,ln,an,jn,Jn,Un){const Ln=ln.layout.get("text-rotate").evaluate(jn,{})*Math.PI/180,kn=[];for(const Hn of Lr.positionedLines)for(const Fn of Hn.positionedGlyphs){if(!Fn.rect)continue;const gn=Fn.rect||{};let ti=4,$n=!0,Ii=1,Ra=0;const Na=(an||Un)&&Fn.vertical,To=Fn.metrics.advance*Fn.scale/2;if(Un&&Lr.verticalizable){const ja=(Fn.scale-1)*Yo,zo=(Yo-Fn.metrics.width*Fn.scale)/2;Ra=Hn.lineOffset/2-(Fn.imageName?-zo:ja)}if(Fn.imageName){const ja=Jn[Fn.imageName];$n=ja.sdf,Ii=ja.pixelRatio,ti=1/Ii}const Fl=an?[Fn.x+To,Fn.y]:[0,0];let rs=an?[0,0]:[Fn.x+To+Hr[0],Fn.y+Hr[1]-Ra],go=[0,0];Na&&(go=rs,rs=[0,0]);const Oo=(Fn.metrics.left-ti)*Fn.scale-To+rs[0],ns=(-Fn.metrics.top-ti)*Fn.scale+rs[1],ys=Oo+gn.w*Fn.scale/Ii,Ys=ns+gn.h*Fn.scale/Ii,yo=new Y(Oo,ns),is=new Y(ys,ns),_s=new Y(Oo,Ys),Fs=new Y(ys,Ys);if(Na){const ja=new Y(-To,To-Ed),zo=-Math.PI/2,zi=12-To,dl=new Y(22-zi,-(Fn.imageName?zi:0)),as=new Y(...go);yo._rotateAround(zo,ja)._add(dl)._add(as),is._rotateAround(zo,ja)._add(dl)._add(as),_s._rotateAround(zo,ja)._add(dl)._add(as),Fs._rotateAround(zo,ja)._add(dl)._add(as)}if(Ln){const ja=Math.sin(Ln),zo=Math.cos(Ln),zi=[zo,-ja,ja,zo];yo._matMult(zi),is._matMult(zi),_s._matMult(zi),Fs._matMult(zi)}const Xs=new Y(0,0),Ks=new Y(0,0);kn.push({tl:yo,tr:is,bl:_s,br:Fs,tex:gn,writingMode:Lr.writingMode,glyphOffset:Fl,sectionIndex:Fn.sectionIndex,isSDF:$n,pixelOffsetTL:Xs,pixelOffsetBR:Ks,minFontScaleX:0,minFontScaleY:0})}return kn}(0,g,Se,Z,Q,ue,k,m.allowVerticalPlacement),qt=m.textSizeData;let Fr=null;qt.kind==="source"?(Fr=[Ac*Z.layout.get("text-size").evaluate(ue,{})],Fr[0]>af&&R(`${m.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):qt.kind==="composite"&&(Fr=[Ac*Dt.compositeTextSizes[0].evaluate(ue,{},It),Ac*Dt.compositeTextSizes[1].evaluate(ue,{},It)],(Fr[0]>af||Fr[1]>af)&&R(`${m.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),m.addSymbols(m.text,ar,Fr,Se,Q,ue,Ye,c,ze.lineStartIndex,ze.lineLength,wt,It);for(const jr of ot)ct[jr]=m.text.placedSymbolArray.length-1;return 4*ar.length}function ig(m){for(const c in m)return m[c];return null}function l2(m,c,g,k){const Z=m.compareText;if(c in Z){const Q=Z[c];for(let ue=Q.length-1;ue>=0;ue--)if(k.dist(Q[ue])<g)return!0}else Z[c]=[];return Z[c].push(k),!1}const u2=tf.VectorTileFeature.types,c2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Pd(m,c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt){const Dt=Se?Math.min(af,Math.round(Se[0])):0,It=Se?Math.min(af,Math.round(Se[1])):0;m.emplaceBack(c,g,Math.round(32*k),Math.round(32*Z),Q,ue,(Dt<<1)+(ze?1:0),It,16*Ye,16*ot,256*ct,256*wt)}function bm(m,c,g){m.emplaceBack(c.x,c.y,g),m.emplaceBack(c.x,c.y,g),m.emplaceBack(c.x,c.y,g),m.emplaceBack(c.x,c.y,g)}function f2(m){for(const c of m.sections)if(Yu(c.text))return!0;return!1}class xm{constructor(c){this.layoutVertexArray=new ks,this.indexArray=new ka,this.programConfigurations=c,this.segments=new Ti,this.dynamicLayoutVertexArray=new Is,this.opacityVertexArray=new fl,this.placedSymbolArray=new pn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,g,k,Z){this.isEmpty()||(k&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Rx.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,g),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,Fx.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,c2,!0),this.opacityVertexBuffer.itemSize=1),(k||Z)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}On("SymbolBuffers",xm);class wm{constructor(c,g,k){this.layoutVertexArray=new c,this.layoutAttributes=g,this.indexArray=new k,this.segments=new Ti,this.collisionVertexArray=new Ls}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,Ox.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}On("CollisionBuffers",wm);class $f{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(ue=>ue.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Jt([]),this.placementViewportMatrix=Jt([]);const g=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Y0(this.zoom,g["text-size"]),this.iconSizeData=Y0(this.zoom,g["icon-size"]);const k=this.layers[0].layout,Z=k.get("symbol-sort-key"),Q=k.get("symbol-z-order");this.canOverlap=Am(k,"text-overlap","text-allow-overlap")!=="never"||Am(k,"icon-overlap","icon-allow-overlap")!=="never"||k.get("text-ignore-placement")||k.get("icon-ignore-placement"),this.sortFeaturesByKey=Q!=="viewport-y"&&!Z.isConstant(),this.sortFeaturesByY=(Q==="viewport-y"||Q==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,k.get("symbol-placement")==="point"&&(this.writingModes=k.get("text-writing-mode").map(ue=>n.WritingMode[ue])),this.stateDependentLayerIds=this.layers.filter(ue=>ue.isStateDependent()).map(ue=>ue.id),this.sourceID=c.sourceID}createArrays(){this.text=new xm(new ql(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new xm(new ql(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new In,this.lineVertexArray=new Vn,this.symbolInstances=new zn}calculateGlyphDependencies(c,g,k,Z,Q){for(let ue=0;ue<c.length;ue++)if(g[c.charCodeAt(ue)]=!0,(k||Z)&&Q){const Se=Bh[c.charAt(ue)];Se&&(g[Se.charCodeAt(0)]=!0)}}populate(c,g,k){const Z=this.layers[0],Q=Z.layout,ue=Q.get("text-font"),Se=Q.get("text-field"),ze=Q.get("icon-image"),Ye=(Se.value.kind!=="constant"||Se.value.value instanceof dt&&!Se.value.value.isEmpty()||Se.value.value.toString().length>0)&&(ue.value.kind!=="constant"||ue.value.value.length>0),ot=ze.value.kind!=="constant"||!!ze.value.value||Object.keys(ze.parameters).length>0,ct=Q.get("symbol-sort-key");if(this.features=[],!Ye&&!ot)return;const wt=g.iconDependencies,Dt=g.glyphDependencies,It=g.availableImages,ar=new ba(this.zoom);for(const{feature:qt,id:Fr,index:jr,sourceLayerIndex:Lr}of c){const Hr=Z._featureFilter.needGeometry,ln=bc(qt,Hr);if(!Z._featureFilter.filter(ar,ln,k))continue;let an,jn;if(Hr||(ln.geometry=_c(qt)),Ye){const Un=Z.getValueAndResolveTokens("text-field",ln,k,It),Ln=dt.factory(Un);f2(Ln)&&(this.hasRTLText=!0),(!this.hasRTLText||Ll()==="unavailable"||this.hasRTLText&&Zo.isParsed())&&(an=Bx(Ln,Z,ln))}if(ot){const Un=Z.getValueAndResolveTokens("icon-image",ln,k,It);jn=Un instanceof Bt?Un:Bt.fromString(Un)}if(!an&&!jn)continue;const Jn=this.sortFeaturesByKey?ct.evaluate(ln,{},k):void 0;if(this.features.push({id:Fr,text:an,icon:jn,index:jr,sourceLayerIndex:Lr,geometry:ln.geometry,properties:qt.properties,type:u2[qt.type],sortKey:Jn}),jn&&(wt[jn.name]=!0),an){const Un=ue.evaluate(ln,{},k).join(","),Ln=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(n.WritingMode.vertical)>=0;for(const kn of an.sections)if(kn.image)wt[kn.image.name]=!0;else{const Hn=Yl(an.toString()),Fn=kn.fontStack||Un,gn=Dt[Fn]=Dt[Fn]||{};this.calculateGlyphDependencies(kn.text,gn,Ln,this.allowVerticalPlacement,Hn)}}}Q.get("symbol-placement")==="line"&&(this.features=function(qt){const Fr={},jr={},Lr=[];let Hr=0;function ln(Un){Lr.push(qt[Un]),Hr++}function an(Un,Ln,kn){const Hn=jr[Un];return delete jr[Un],jr[Ln]=Hn,Lr[Hn].geometry[0].pop(),Lr[Hn].geometry[0]=Lr[Hn].geometry[0].concat(kn[0]),Hn}function jn(Un,Ln,kn){const Hn=Fr[Ln];return delete Fr[Ln],Fr[Un]=Hn,Lr[Hn].geometry[0].shift(),Lr[Hn].geometry[0]=kn[0].concat(Lr[Hn].geometry[0]),Hn}function Jn(Un,Ln,kn){const Hn=kn?Ln[0][Ln[0].length-1]:Ln[0][0];return`${Un}:${Hn.x}:${Hn.y}`}for(let Un=0;Un<qt.length;Un++){const Ln=qt[Un],kn=Ln.geometry,Hn=Ln.text?Ln.text.toString():null;if(!Hn){ln(Un);continue}const Fn=Jn(Hn,kn),gn=Jn(Hn,kn,!0);if(Fn in jr&&gn in Fr&&jr[Fn]!==Fr[gn]){const ti=jn(Fn,gn,kn),$n=an(Fn,gn,Lr[ti].geometry);delete Fr[Fn],delete jr[gn],jr[Jn(Hn,Lr[$n].geometry,!0)]=$n,Lr[ti].geometry=null}else Fn in jr?an(Fn,gn,kn):gn in Fr?jn(Fn,gn,kn):(ln(Un),Fr[Fn]=Hr-1,jr[gn]=Hr-1)}return Lr.filter(Un=>Un.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((qt,Fr)=>qt.sortKey-Fr.sortKey)}update(c,g,k){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,g,this.layers,k),this.icon.programConfigurations.updatePaintArrays(c,g,this.layers,k))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,g){const k=this.lineVertexArray.length;if(c.segment!==void 0){let Z=c.dist(g[c.segment+1]),Q=c.dist(g[c.segment]);const ue={};for(let Se=c.segment+1;Se<g.length;Se++)ue[Se]={x:g[Se].x,y:g[Se].y,tileUnitDistanceFromAnchor:Z},Se<g.length-1&&(Z+=g[Se+1].dist(g[Se]));for(let Se=c.segment||0;Se>=0;Se--)ue[Se]={x:g[Se].x,y:g[Se].y,tileUnitDistanceFromAnchor:Q},Se>0&&(Q+=g[Se-1].dist(g[Se]));for(let Se=0;Se<g.length;Se++){const ze=ue[Se];this.lineVertexArray.emplaceBack(ze.x,ze.y,ze.tileUnitDistanceFromAnchor)}}return{lineStartIndex:k,lineLength:this.lineVertexArray.length-k}}addSymbols(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct,wt){const Dt=c.indexArray,It=c.layoutVertexArray,ar=c.segments.prepareSegment(4*g.length,It,Dt,this.canOverlap?ue.sortKey:void 0),qt=this.glyphOffsetArray.length,Fr=ar.vertexLength,jr=this.allowVerticalPlacement&&Se===n.WritingMode.vertical?Math.PI/2:0,Lr=ue.text&&ue.text.sections;for(let Hr=0;Hr<g.length;Hr++){const{tl:ln,tr:an,bl:jn,br:Jn,tex:Un,pixelOffsetTL:Ln,pixelOffsetBR:kn,minFontScaleX:Hn,minFontScaleY:Fn,glyphOffset:gn,isSDF:ti,sectionIndex:$n}=g[Hr],Ii=ar.vertexLength,Ra=gn[1];Pd(It,ze.x,ze.y,ln.x,Ra+ln.y,Un.x,Un.y,k,ti,Ln.x,Ln.y,Hn,Fn),Pd(It,ze.x,ze.y,an.x,Ra+an.y,Un.x+Un.w,Un.y,k,ti,kn.x,Ln.y,Hn,Fn),Pd(It,ze.x,ze.y,jn.x,Ra+jn.y,Un.x,Un.y+Un.h,k,ti,Ln.x,kn.y,Hn,Fn),Pd(It,ze.x,ze.y,Jn.x,Ra+Jn.y,Un.x+Un.w,Un.y+Un.h,k,ti,kn.x,kn.y,Hn,Fn),bm(c.dynamicLayoutVertexArray,ze,jr),Dt.emplaceBack(Ii,Ii+1,Ii+2),Dt.emplaceBack(Ii+1,Ii+2,Ii+3),ar.vertexLength+=4,ar.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(gn[0]),Hr!==g.length-1&&$n===g[Hr+1].sectionIndex||c.programConfigurations.populatePaintArrays(It.length,ue,ue.index,{},wt,Lr&&Lr[$n])}c.placedSymbolArray.emplaceBack(ze.x,ze.y,qt,this.glyphOffsetArray.length-qt,Fr,Ye,ot,ze.segment,k?k[0]:0,k?k[1]:0,Z[0],Z[1],Se,0,!1,0,ct)}_addCollisionDebugVertex(c,g,k,Z,Q,ue){return g.emplaceBack(0,0),c.emplaceBack(k.x,k.y,Z,Q,Math.round(ue.x),Math.round(ue.y))}addCollisionDebugVertices(c,g,k,Z,Q,ue,Se){const ze=Q.segments.prepareSegment(4,Q.layoutVertexArray,Q.indexArray),Ye=ze.vertexLength,ot=Q.layoutVertexArray,ct=Q.collisionVertexArray,wt=Se.anchorX,Dt=Se.anchorY;this._addCollisionDebugVertex(ot,ct,ue,wt,Dt,new Y(c,g)),this._addCollisionDebugVertex(ot,ct,ue,wt,Dt,new Y(k,g)),this._addCollisionDebugVertex(ot,ct,ue,wt,Dt,new Y(k,Z)),this._addCollisionDebugVertex(ot,ct,ue,wt,Dt,new Y(c,Z)),ze.vertexLength+=4;const It=Q.indexArray;It.emplaceBack(Ye,Ye+1),It.emplaceBack(Ye+1,Ye+2),It.emplaceBack(Ye+2,Ye+3),It.emplaceBack(Ye+3,Ye),ze.primitiveLength+=4}addDebugCollisionBoxes(c,g,k,Z){for(let Q=c;Q<g;Q++){const ue=this.collisionBoxArray.get(Q);this.addCollisionDebugVertices(ue.x1,ue.y1,ue.x2,ue.y2,Z?this.textCollisionBox:this.iconCollisionBox,ue.anchorPoint,k)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wm(Jl,P0.members,hl),this.iconCollisionBox=new wm(Jl,P0.members,hl);for(let c=0;c<this.symbolInstances.length;c++){const g=this.symbolInstances.get(c);this.addDebugCollisionBoxes(g.textBoxStartIndex,g.textBoxEndIndex,g,!0),this.addDebugCollisionBoxes(g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g,!0),this.addDebugCollisionBoxes(g.iconBoxStartIndex,g.iconBoxEndIndex,g,!1),this.addDebugCollisionBoxes(g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g,!1)}}_deserializeCollisionBoxesForSymbol(c,g,k,Z,Q,ue,Se,ze,Ye){const ot={};for(let ct=g;ct<k;ct++){const wt=c.get(ct);ot.textBox={x1:wt.x1,y1:wt.y1,x2:wt.x2,y2:wt.y2,anchorPointX:wt.anchorPointX,anchorPointY:wt.anchorPointY},ot.textFeatureIndex=wt.featureIndex;break}for(let ct=Z;ct<Q;ct++){const wt=c.get(ct);ot.verticalTextBox={x1:wt.x1,y1:wt.y1,x2:wt.x2,y2:wt.y2,anchorPointX:wt.anchorPointX,anchorPointY:wt.anchorPointY},ot.verticalTextFeatureIndex=wt.featureIndex;break}for(let ct=ue;ct<Se;ct++){const wt=c.get(ct);ot.iconBox={x1:wt.x1,y1:wt.y1,x2:wt.x2,y2:wt.y2,anchorPointX:wt.anchorPointX,anchorPointY:wt.anchorPointY},ot.iconFeatureIndex=wt.featureIndex;break}for(let ct=ze;ct<Ye;ct++){const wt=c.get(ct);ot.verticalIconBox={x1:wt.x1,y1:wt.y1,x2:wt.x2,y2:wt.y2,anchorPointX:wt.anchorPointX,anchorPointY:wt.anchorPointY},ot.verticalIconFeatureIndex=wt.featureIndex;break}return ot}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let g=0;g<this.symbolInstances.length;g++){const k=this.symbolInstances.get(g);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,k.textBoxStartIndex,k.textBoxEndIndex,k.verticalTextBoxStartIndex,k.verticalTextBoxEndIndex,k.iconBoxStartIndex,k.iconBoxEndIndex,k.verticalIconBoxStartIndex,k.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,g){const k=c.placedSymbolArray.get(g),Z=k.vertexStartIndex+4*k.numGlyphs;for(let Q=k.vertexStartIndex;Q<Z;Q+=4)c.indexArray.emplaceBack(Q,Q+1,Q+2),c.indexArray.emplaceBack(Q+1,Q+2,Q+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const g=Math.sin(c),k=Math.cos(c),Z=[],Q=[],ue=[];for(let Se=0;Se<this.symbolInstances.length;++Se){ue.push(Se);const ze=this.symbolInstances.get(Se);Z.push(0|Math.round(g*ze.anchorX+k*ze.anchorY)),Q.push(ze.featureIndex)}return ue.sort((Se,ze)=>Z[Se]-Z[ze]||Q[ze]-Q[Se]),ue}addToSortKeyRanges(c,g){const k=this.sortKeyRanges[this.sortKeyRanges.length-1];k&&k.sortKey===g?k.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:g,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const g of this.symbolInstanceIndexes){const k=this.symbolInstances.get(g);this.featureSortOrder.push(k.featureIndex),[k.rightJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.leftJustifiedTextSymbolIndex].forEach((Z,Q,ue)=>{Z>=0&&ue.indexOf(Z)===Q&&this.addIndicesForPlacedSymbol(this.text,Z)}),k.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,k.verticalPlacedTextSymbolIndex),k.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.placedIconSymbolIndex),k.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}On("SymbolBucket",$f,{omit:["layers","collisionBoxArray","features","compareText"]}),$f.MAX_GLYPHS=65535,$f.addDynamicAttributes=bm;const h2=new Qn({"symbol-placement":new hr(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new hr(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new hr(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ar(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new hr(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new hr(Ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new hr(Ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new hr(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new hr(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new hr(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ar(Ie.layout_symbol["icon-size"]),"icon-text-fit":new hr(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new hr(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ar(Ie.layout_symbol["icon-image"]),"icon-rotate":new Ar(Ie.layout_symbol["icon-rotate"]),"icon-padding":new Ar(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new hr(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Ar(Ie.layout_symbol["icon-offset"]),"icon-anchor":new Ar(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new hr(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new hr(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new hr(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new Ar(Ie.layout_symbol["text-field"]),"text-font":new Ar(Ie.layout_symbol["text-font"]),"text-size":new Ar(Ie.layout_symbol["text-size"]),"text-max-width":new Ar(Ie.layout_symbol["text-max-width"]),"text-line-height":new hr(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Ar(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new Ar(Ie.layout_symbol["text-justify"]),"text-radial-offset":new Ar(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new hr(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new Ar(Ie.layout_symbol["text-anchor"]),"text-max-angle":new hr(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new hr(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new Ar(Ie.layout_symbol["text-rotate"]),"text-padding":new hr(Ie.layout_symbol["text-padding"]),"text-keep-upright":new hr(Ie.layout_symbol["text-keep-upright"]),"text-transform":new Ar(Ie.layout_symbol["text-transform"]),"text-offset":new Ar(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new hr(Ie.layout_symbol["text-allow-overlap"]),"text-overlap":new hr(Ie.layout_symbol["text-overlap"]),"text-ignore-placement":new hr(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new hr(Ie.layout_symbol["text-optional"])});var Tm={paint:new Qn({"icon-opacity":new Ar(Ie.paint_symbol["icon-opacity"]),"icon-color":new Ar(Ie.paint_symbol["icon-color"]),"icon-halo-color":new Ar(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ar(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ar(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new hr(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new hr(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ar(Ie.paint_symbol["text-opacity"]),"text-color":new Ar(Ie.paint_symbol["text-color"],{runtimeType:cr,getOverride:m=>m.textColor,hasOverride:m=>!!m.textColor}),"text-halo-color":new Ar(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new Ar(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Ar(Ie.paint_symbol["text-halo-blur"]),"text-translate":new hr(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new hr(Ie.paint_symbol["text-translate-anchor"])}),layout:h2};class ag{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:Nt,this.defaultValue=c}evaluate(c){if(c.formattedSection){const g=this.defaultValue.property.overrides;if(g&&g.hasOverride(c.formattedSection))return g.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}On("FormatSectionOverride",ag,{omit:["defaultValue"]});class Rd extends Xa{constructor(c){super(c,Tm)}recalculate(c,g){if(super.recalculate(c,g),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const k=this.layout.get("text-writing-mode");if(k){const Z=[];for(const Q of k)Z.indexOf(Q)<0&&Z.push(Q);this.layout._values["text-writing-mode"]=Z}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,g,k,Z){const Q=this.layout.get(c).evaluate(g,{},k,Z),ue=this._unevaluatedLayout._values[c];return ue.isDataDriven()||Vo(ue.value)||!Q?Q:function(Se,ze){return ze.replace(/{([^{}]+)}/g,(Ye,ot)=>ot in Se?String(Se[ot]):"")}(g.properties,Q)}createBucket(c){return new $f(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of Tm.paint.overridableProperties){if(!Rd.hasPaintOverride(this.layout,c))continue;const g=this.paint.get(c),k=new ag(g),Z=new al(k,g.property.specification);let Q=null;Q=g.value.kind==="constant"||g.value.kind==="source"?new jl("source",Z):new Uu("composite",Z,g.value.zoomStops),this.paint._values[c]=new St(g.property,Q,g.parameters)}}_handleOverridablePaintPropertyUpdate(c,g,k){return!(!this.layout||g.isDataDriven()||k.isDataDriven())&&Rd.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,g){const k=c.get("text-field"),Z=Tm.paint.properties[g];let Q=!1;const ue=Se=>{for(const ze of Se)if(Z.overrides&&Z.overrides.hasOverride(ze))return void(Q=!0)};if(k.value.kind==="constant"&&k.value.value instanceof dt)ue(k.value.value.sections);else if(k.value.kind==="source"){const Se=Ye=>{Q||(Ye instanceof Gt&&vt(Ye.value)===dr?ue(Ye.value.sections):Ye instanceof zu?ue(Ye.sections):Ye.eachChild(Se))},ze=k.value;ze._styleExpression&&Se(ze._styleExpression.expression)}return Q}}function Am(m,c,g){let k="never";const Z=m.get(c);return Z?k=Z:m.get(g)&&(k="always"),k}var d2={paint:new Qn({"background-color":new hr(Ie.paint_background["background-color"]),"background-pattern":new Zn(Ie.paint_background["background-pattern"]),"background-opacity":new hr(Ie.paint_background["background-opacity"])})},p2={paint:new Qn({"raster-opacity":new hr(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new hr(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new hr(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new hr(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new hr(Ie.paint_raster["raster-saturation"]),"raster-contrast":new hr(Ie.paint_raster["raster-contrast"]),"raster-resampling":new hr(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new hr(Ie.paint_raster["raster-fade-duration"])})};class m2 extends Xa{constructor(c){super(c,{}),this.onAdd=g=>{this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},this.onRemove=g=>{this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const v2={circle:class extends Xa{constructor(m){super(m,Ot)}createBucket(m){return new Ph(m)}queryRadius(m){const c=m;return tt("circle-radius",this,c)+tt("circle-stroke-width",this,c)+gt(this.paint.get("circle-translate"))}queryIntersectsFeature(m,c,g,k,Z,Q,ue,Se){const ze=yt(m,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Q.angle,ue),Ye=this.paint.get("circle-radius").evaluate(c,g)+this.paint.get("circle-stroke-width").evaluate(c,g),ot=this.paint.get("circle-pitch-alignment")==="map",ct=ot?ze:function(Dt,It){return Dt.map(ar=>An(ar,It))}(ze,Se),wt=ot?Ye*ue:Ye;for(const Dt of k)for(const It of Dt){const ar=ot?It:An(It,Se);let qt=wt;const Fr=xn([],[It.x,It.y,0,1],Se);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?qt*=Fr[3]/Q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(qt*=Q.cameraToCenterDistance/Fr[3]),rm(ct,ar,qt))return!0}return!1}},heatmap:class extends Xa{constructor(m){super(m,Gn),this._updateColorRamp()}createBucket(m){return new Nn(m)}_handleSpecialPaintPropertyUpdate(m){m==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ia({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Xa{constructor(m){super(m,Tn)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Xa{constructor(m){super(m,hx)}recalculate(m,c){super.recalculate(m,c);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(m){return new um(m)}queryRadius(){return gt(this.paint.get("fill-translate"))}queryIntersectsFeature(m,c,g,k,Z,Q,ue){return Ad(yt(m,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Q.angle,ue),k)}isTileClipped(){return!0}},"fill-extrusion":class extends Xa{constructor(m){super(m,Ex)}createBucket(m){return new fm(m)}queryRadius(){return gt(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(m,c,g,k,Z,Q,ue,Se){const ze=yt(m,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Q.angle,ue),Ye=this.paint.get("fill-extrusion-height").evaluate(c,g),ot=this.paint.get("fill-extrusion-base").evaluate(c,g),ct=function(Dt,It,ar,qt){const Fr=[];for(const jr of Dt){const Lr=[jr.x,jr.y,0,1];xn(Lr,Lr,It),Fr.push(new Y(Lr[0]/Lr[3],Lr[1]/Lr[3]))}return Fr}(ze,Se),wt=function(Dt,It,ar,qt){const Fr=[],jr=[],Lr=qt[8]*It,Hr=qt[9]*It,ln=qt[10]*It,an=qt[11]*It,jn=qt[8]*ar,Jn=qt[9]*ar,Un=qt[10]*ar,Ln=qt[11]*ar;for(const kn of Dt){const Hn=[],Fn=[];for(const gn of kn){const ti=gn.x,$n=gn.y,Ii=qt[0]*ti+qt[4]*$n+qt[12],Ra=qt[1]*ti+qt[5]*$n+qt[13],Na=qt[2]*ti+qt[6]*$n+qt[14],To=qt[3]*ti+qt[7]*$n+qt[15],Fl=Na+ln,rs=To+an,go=Ii+jn,Oo=Ra+Jn,ns=Na+Un,ys=To+Ln,Ys=new Y((Ii+Lr)/rs,(Ra+Hr)/rs);Ys.z=Fl/rs,Hn.push(Ys);const yo=new Y(go/ys,Oo/ys);yo.z=ns/ys,Fn.push(yo)}Fr.push(Hn),jr.push(Fn)}return[Fr,jr]}(k,ot,Ye,Se);return function(Dt,It,ar){let qt=1/0;Ad(ar,It)&&(qt=D0(ar,It[0]));for(let Fr=0;Fr<It.length;Fr++){const jr=It[Fr],Lr=Dt[Fr];for(let Hr=0;Hr<jr.length-1;Hr++){const ln=jr[Hr],an=[ln,jr[Hr+1],Lr[Hr+1],Lr[Hr],ln];Wf(ar,an)&&(qt=Math.min(qt,D0(ar,an)))}}return qt!==1/0&&qt}(wt[0],wt[1],ct)}},line:class extends Xa{constructor(m){super(m,k0),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(m){m==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof bn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(m,c){super.recalculate(m,c),this.paint._values["line-floorwidth"]=I0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,m)}createBucket(m){return new hm(m)}queryRadius(m){const c=m,g=L0(tt("line-width",this,c),tt("line-gap-width",this,c)),k=tt("line-offset",this,c);return g/2+Math.abs(k)+gt(this.paint.get("line-translate"))}queryIntersectsFeature(m,c,g,k,Z,Q,ue){const Se=yt(m,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Q.angle,ue),ze=ue/2*L0(this.paint.get("line-width").evaluate(c,g),this.paint.get("line-gap-width").evaluate(c,g)),Ye=this.paint.get("line-offset").evaluate(c,g);return Ye&&(k=function(ot,ct){const wt=[];for(let Dt=0;Dt<ot.length;Dt++){const It=ot[Dt],ar=[];for(let qt=0;qt<It.length;qt++){const Fr=It[qt-1],jr=It[qt],Lr=It[qt+1],Hr=qt===0?new Y(0,0):jr.sub(Fr)._unit()._perp(),ln=qt===It.length-1?new Y(0,0):Lr.sub(jr)._unit()._perp(),an=Hr._add(ln)._unit(),jn=an.x*ln.x+an.y*ln.y;jn!==0&&an._mult(1/jn),ar.push(an._mult(ct)._add(jr))}wt.push(ar)}return wt}(k,Ye*ue)),function(ot,ct,wt){for(let Dt=0;Dt<ct.length;Dt++){const It=ct[Dt];if(ot.length>=3){for(let ar=0;ar<It.length;ar++)if(Xe(ot,It[ar]))return!0}if(C(ot,It,wt))return!0}return!1}(Se,k,ze)}isTileClipped(){return!0}},symbol:Rd,background:class extends Xa{constructor(m){super(m,d2)}},raster:class extends Xa{constructor(m){super(m,p2)}}};class g2{constructor(c){this._callback=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const og=63710088e-1;class io{constructor(c,g){if(isNaN(c)||isNaN(g))throw new Error(`Invalid LngLat object: (${c}, ${g})`);if(this.lng=+c,this.lat=+g,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new io(p(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const g=Math.PI/180,k=this.lat*g,Z=c.lat*g,Q=Math.sin(k)*Math.sin(Z)+Math.cos(k)*Math.cos(Z)*Math.cos((c.lng-this.lng)*g);return og*Math.acos(Math.min(Q,1))}toBounds(c=0){const g=360*c/40075017,k=g/Math.cos(Math.PI/180*this.lat);return new _f(new io(this.lng-k,this.lat-g),new io(this.lng+k,this.lat+g))}static convert(c){if(c instanceof io)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new io(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new io(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class _f{constructor(c,g){c&&(g?this.setSouthWest(c).setNorthEast(g):c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1]))}setNorthEast(c){return this._ne=c instanceof io?new io(c.lng,c.lat):io.convert(c),this}setSouthWest(c){return this._sw=c instanceof io?new io(c.lng,c.lat):io.convert(c),this}extend(c){const g=this._sw,k=this._ne;let Z,Q;if(c instanceof io)Z=c,Q=c;else{if(!(c instanceof _f))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(_f.convert(c)):this.extend(io.convert(c)):this;if(Z=c._sw,Q=c._ne,!Z||!Q)return this}return g||k?(g.lng=Math.min(Z.lng,g.lng),g.lat=Math.min(Z.lat,g.lat),k.lng=Math.max(Q.lng,k.lng),k.lat=Math.max(Q.lat,k.lat)):(this._sw=new io(Z.lng,Z.lat),this._ne=new io(Q.lng,Q.lat)),this}getCenter(){return new io((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new io(this.getWest(),this.getNorth())}getSouthEast(){return new io(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:g,lat:k}=io.convert(c);let Z=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Z=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=k&&k<=this._ne.lat&&Z}static convert(c){return c instanceof _f?c:c&&new _f(c)}}const sg=2*Math.PI*og;function lg(m){return sg*Math.cos(m*Math.PI/180)}function ug(m){return(180+m)/360}function cg(m){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+m*Math.PI/360)))/360}function fg(m,c){return m/lg(c)}function Sm(m){return 360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90}class Fd{constructor(c,g,k=0){this.x=+c,this.y=+g,this.z=+k}static fromLngLat(c,g=0){const k=io.convert(c);return new Fd(ug(k.lng),cg(k.lat),fg(g,k.lat))}toLngLat(){return new io(360*this.x-180,Sm(this.y))}toAltitude(){return this.z*lg(Sm(this.y))}meterInMercatorCoordinateUnits(){return 1/sg*(c=Sm(this.y),1/Math.cos(c*Math.PI/180));var c}}function hg(m,c,g){var k=2*Math.PI*6378137/256/Math.pow(2,g);return[m*k-2*Math.PI*6378137/2,c*k-2*Math.PI*6378137/2]}class Em{constructor(c,g,k){if(c<0||c>25||k<0||k>=Math.pow(2,c)||g<0||g>=Math.pow(2,c))throw new Error(`x=${g}, y=${k}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=g,this.y=k,this.key=Uh(0,c,c,g,k)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,g,k){const Z=(ue=this.y,Se=this.z,ze=hg(256*(Q=this.x),256*(ue=Math.pow(2,Se)-ue-1),Se),Ye=hg(256*(Q+1),256*(ue+1),Se),ze[0]+","+ze[1]+","+Ye[0]+","+Ye[1]);var Q,ue,Se,ze,Ye;const ot=function(ct,wt,Dt){let It,ar="";for(let qt=ct;qt>0;qt--)It=1<<qt-1,ar+=(wt&It?1:0)+(Dt&It?2:0);return ar}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(k==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,g>1?"@2x":"").replace(/{quadkey}/g,ot).replace(/{bbox-epsg-3857}/g,Z)}isChildOf(c){const g=this.z-c.z;return g>0&&c.x===this.x>>g&&c.y===this.y>>g}getTilePoint(c){const g=Math.pow(2,this.z);return new Y((c.x*g-this.x)*Ja,(c.y*g-this.y)*Ja)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dg{constructor(c,g){this.wrap=c,this.canonical=g,this.key=Uh(c,g.z,g.z,g.x,g.y)}}class Rl{constructor(c,g,k,Z,Q){if(c<k)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${k}`);this.overscaledZ=c,this.wrap=g,this.canonical=new Em(k,+Z,+Q),this.key=Uh(g,c,k,Z,Q)}clone(){return new Rl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-c;return c>this.canonical.z?new Rl(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rl(c,this.wrap,c,this.canonical.x>>g,this.canonical.y>>g)}calculateScaledKey(c,g){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const k=this.canonical.z-c;return c>this.canonical.z?Uh(this.wrap*+g,c,this.canonical.z,this.canonical.x,this.canonical.y):Uh(this.wrap*+g,c,c,this.canonical.x>>k,this.canonical.y>>k)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const g=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>g&&c.canonical.y===this.canonical.y>>g}children(c){if(this.overscaledZ>=c)return[new Rl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const g=this.canonical.z+1,k=2*this.canonical.x,Z=2*this.canonical.y;return[new Rl(g,this.wrap,g,k,Z),new Rl(g,this.wrap,g,k+1,Z),new Rl(g,this.wrap,g,k,Z+1),new Rl(g,this.wrap,g,k+1,Z+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new Rl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new Rl(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new Fd(c.x-this.wrap,c.y))}}function Uh(m,c,g,k,Z){(m*=2)<0&&(m=-1*m-1);const Q=1<<g;return(Q*Q*m+Q*Z+k).toString(36)+g.toString(36)+c.toString(36)}On("CanonicalTileID",Em),On("OverscaledTileID",Rl,{omit:["posMatrix"]});class pg{constructor(c,g,k){if(this.uid=c,g.height!==g.width)throw new RangeError("DEM tiles must be square");if(k&&k!=="mapbox"&&k!=="terrarium")return void R(`"${k}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=g.height;const Z=this.dim=g.height-2;this.data=new Uint32Array(g.data.buffer),this.encoding=k||"mapbox";for(let Q=0;Q<Z;Q++)this.data[this._idx(-1,Q)]=this.data[this._idx(0,Q)],this.data[this._idx(Z,Q)]=this.data[this._idx(Z-1,Q)],this.data[this._idx(Q,-1)]=this.data[this._idx(Q,0)],this.data[this._idx(Q,Z)]=this.data[this._idx(Q,Z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z-1,0)],this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z-1)],this.data[this._idx(Z,Z)]=this.data[this._idx(Z-1,Z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Q=0;Q<Z;Q++)for(let ue=0;ue<Z;ue++){const Se=this.get(Q,ue);Se>this.max&&(this.max=Se),Se<this.min&&(this.min=Se)}}get(c,g){const k=new Uint8Array(this.data.buffer),Z=4*this._idx(c,g);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(k[Z],k[Z+1],k[Z+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(c,g){if(c<-1||c>=this.dim+1||g<-1||g>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(g+1)*this.stride+(c+1)}_unpackMapbox(c,g,k){return(256*c*256+256*g+k)/10-1e4}_unpackTerrarium(c,g,k){return 256*c+g+k/256-32768}getPixels(){return new na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,g,k){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let Z=g*this.dim,Q=g*this.dim+this.dim,ue=k*this.dim,Se=k*this.dim+this.dim;switch(g){case-1:Z=Q-1;break;case 1:Q=Z+1}switch(k){case-1:ue=Se-1;break;case 1:Se=ue+1}const ze=-g*this.dim,Ye=-k*this.dim;for(let ot=ue;ot<Se;ot++)for(let ct=Z;ct<Q;ct++)this.data[this._idx(ct,ot)]=c.data[this._idx(ct+ze,ot+Ye)]}}On("DEMData",pg);class mg{constructor(c){this._stringToNumber={},this._numberToString=[];for(let g=0;g<c.length;g++){const k=c[g];this._stringToNumber[k]=g,this._numberToString[g]=k}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class vg{constructor(c,g,k,Z,Q){this.type="Feature",this._vectorTileFeature=c,c._z=g,c._x=k,c._y=Z,this.properties=c.properties,this.id=Q}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const g in this)g!=="_geometry"&&g!=="_vectorTileFeature"&&(c[g]=this[g]);return c}}class gg{constructor(c,g){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new mu(Ja,16,0),this.grid3D=new mu(Ja,16,0),this.featureIndexArray=new bi,this.promoteId=g}insert(c,g,k,Z,Q,ue){const Se=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(k,Z,Q);const ze=ue?this.grid3D:this.grid;for(let Ye=0;Ye<g.length;Ye++){const ot=g[Ye],ct=[1/0,1/0,-1/0,-1/0];for(let wt=0;wt<ot.length;wt++){const Dt=ot[wt];ct[0]=Math.min(ct[0],Dt.x),ct[1]=Math.min(ct[1],Dt.y),ct[2]=Math.max(ct[2],Dt.x),ct[3]=Math.max(ct[3],Dt.y)}ct[0]<Ja&&ct[1]<Ja&&ct[2]>=0&&ct[3]>=0&&ze.insert(Se,ct[0],ct[1],ct[2],ct[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new tf.VectorTile(new dm(this.rawTileData)).layers,this.sourceLayerCoder=new mg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,g,k,Z){this.loadVTLayers();const Q=c.params||{},ue=Ja/c.tileSize/c.scale,Se=Vu(Q.filter),ze=c.queryGeometry,Ye=c.queryPadding*ue,ot=_g(ze),ct=this.grid.query(ot.minX-Ye,ot.minY-Ye,ot.maxX+Ye,ot.maxY+Ye),wt=_g(c.cameraQueryGeometry),Dt=this.grid3D.query(wt.minX-Ye,wt.minY-Ye,wt.maxX+Ye,wt.maxY+Ye,(qt,Fr,jr,Lr)=>function(Hr,ln,an,jn,Jn){for(const Ln of Hr)if(ln<=Ln.x&&an<=Ln.y&&jn>=Ln.x&&Jn>=Ln.y)return!0;const Un=[new Y(ln,an),new Y(ln,Jn),new Y(jn,Jn),new Y(jn,an)];if(Hr.length>2){for(const Ln of Un)if(Xe(Hr,Ln))return!0}for(let Ln=0;Ln<Hr.length-1;Ln++)if(Ge(Hr[Ln],Hr[Ln+1],Un))return!0;return!1}(c.cameraQueryGeometry,qt-Ye,Fr-Ye,jr+Ye,Lr+Ye));for(const qt of Dt)ct.push(qt);ct.sort(y2);const It={};let ar;for(let qt=0;qt<ct.length;qt++){const Fr=ct[qt];if(Fr===ar)continue;ar=Fr;const jr=this.featureIndexArray.get(Fr);let Lr=null;this.loadMatchingFeature(It,jr.bucketIndex,jr.sourceLayerIndex,jr.featureIndex,Se,Q.layers,Q.availableImages,g,k,Z,(Hr,ln,an)=>(Lr||(Lr=_c(Hr)),ln.queryIntersectsFeature(ze,Hr,an,Lr,this.z,c.transform,ue,c.pixelPosMatrix)))}return It}loadMatchingFeature(c,g,k,Z,Q,ue,Se,ze,Ye,ot,ct){const wt=this.bucketLayerIDs[g];if(ue&&!function(qt,Fr){for(let jr=0;jr<qt.length;jr++)if(Fr.indexOf(qt[jr])>=0)return!0;return!1}(ue,wt))return;const Dt=this.sourceLayerCoder.decode(k),It=this.vtLayers[Dt].feature(Z);if(Q.needGeometry){const qt=bc(It,!0);if(!Q.filter(new ba(this.tileID.overscaledZ),qt,this.tileID.canonical))return}else if(!Q.filter(new ba(this.tileID.overscaledZ),It))return;const ar=this.getId(It,Dt);for(let qt=0;qt<wt.length;qt++){const Fr=wt[qt];if(ue&&ue.indexOf(Fr)<0)continue;const jr=ze[Fr];if(!jr)continue;let Lr={};ar&&ot&&(Lr=ot.getState(jr.sourceLayer||"_geojsonTileLayer",ar));const Hr=_({},Ye[Fr]);Hr.paint=yg(Hr.paint,jr.paint,It,Lr,Se),Hr.layout=yg(Hr.layout,jr.layout,It,Lr,Se);const ln=!ct||ct(It,jr,Lr);if(!ln)continue;const an=new vg(It,this.z,this.x,this.y,ar);an.layer=Hr;let jn=c[Fr];jn===void 0&&(jn=c[Fr]=[]),jn.push({featureIndex:Z,feature:an,intersectionZ:ln})}}lookupSymbolFeatures(c,g,k,Z,Q,ue,Se,ze){const Ye={};this.loadVTLayers();const ot=Vu(Q);for(const ct of c)this.loadMatchingFeature(Ye,k,Z,ct,ot,ue,Se,ze,g);return Ye}hasLayer(c){for(const g of this.bucketLayerIDs)for(const k of g)if(c===k)return!0;return!1}getId(c,g){let k=c.id;return this.promoteId&&(k=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[g]],typeof k=="boolean"&&(k=Number(k))),k}}function yg(m,c,g,k,Z){return E(m,(Q,ue)=>{const Se=c instanceof sr?c.get(ue):null;return Se&&Se.evaluate?Se.evaluate(g,k,Z):Se})}function _g(m){let c=1/0,g=1/0,k=-1/0,Z=-1/0;for(const Q of m)c=Math.min(c,Q.x),g=Math.min(g,Q.y),k=Math.max(k,Q.x),Z=Math.max(Z,Q.y);return{minX:c,minY:g,maxX:k,maxY:Z}}function y2(m,c){return c-m}var Cm;On("FeatureIndex",gg,{omit:["rawTileData","sourceLayerCoder"]}),n.PerformanceMarkers=void 0,(Cm=n.PerformanceMarkers||(n.PerformanceMarkers={})).create="create",Cm.load="load",Cm.fullLoad="fullLoad";let Od=null,Hh=[];const Dm=1e3/30,_2={mark(m){performance.mark(m)},frame(m){const c=m;Od!=null&&Hh.push(c-Od),Od=c},clearMetrics(){Od=null,Hh=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const m in n.PerformanceMarkers)performance.clearMarks(n.PerformanceMarkers[m])},getPerformanceMetrics(){performance.measure("loadTime",n.PerformanceMarkers.create,n.PerformanceMarkers.load),performance.measure("fullLoadTime",n.PerformanceMarkers.create,n.PerformanceMarkers.fullLoad);const m=performance.getEntriesByName("loadTime")[0].duration,c=performance.getEntriesByName("fullLoadTime")[0].duration,g=Hh.length,k=1/(Hh.reduce((Q,ue)=>Q+ue,0)/g/1e3),Z=Hh.filter(Q=>Q>Dm).reduce((Q,ue)=>Q+(ue-Dm)/Dm,0);return{loadTime:m,fullLoadTime:c,fps:k,percentDroppedFrames:Z/(g+Z)*100}}};n.AJAXError=K,n.ARRAY_TYPE=yr,n.Actor=class{constructor(m,c,g){this.target=m,this.parent=c,this.mapId=g,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},x(["receive","process"],this),this.invoker=new g2(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=T()?m:window}send(m,c,g,k,Z=!1){const Q=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(this.callbacks[Q]=g);const ue=V(this.globalScope)?void 0:[];return this.target.postMessage({id:Q,type:m,hasCallback:!!g,targetMapId:k,mustQueue:Z,sourceMapId:this.mapId,data:Ml(c,ue)},ue),{cancel:()=>{g&&delete this.callbacks[Q],this.target.postMessage({id:Q,type:"<cancel>",targetMapId:k,sourceMapId:this.mapId})}}}receive(m){const c=m.data,g=c.id;if(g&&(!c.targetMapId||this.mapId===c.targetMapId))if(c.type==="<cancel>"){delete this.tasks[g];const k=this.cancelCallbacks[g];delete this.cancelCallbacks[g],k&&k()}else T()||c.mustQueue?(this.tasks[g]=c,this.taskQueue.push(g),this.invoker.trigger()):this.processTask(g,c)}process(){if(!this.taskQueue.length)return;const m=this.taskQueue.shift(),c=this.tasks[m];delete this.tasks[m],this.taskQueue.length&&this.invoker.trigger(),c&&this.processTask(m,c)}processTask(m,c){if(c.type==="<response>"){const g=this.callbacks[m];delete this.callbacks[m],g&&(c.error?g(es(c.error)):g(null,es(c.data)))}else{let g=!1;const k=V(this.globalScope)?void 0:[],Z=c.hasCallback?(Se,ze)=>{g=!0,delete this.cancelCallbacks[m],this.target.postMessage({id:m,type:"<response>",sourceMapId:this.mapId,error:Se?Ml(Se):null,data:Ml(ze,k)},k)}:Se=>{g=!0};let Q=null;const ue=es(c.data);if(this.parent[c.type])Q=this.parent[c.type](c.sourceMapId,ue,Z);else if(this.parent.getWorkerSource){const Se=c.type.split(".");Q=this.parent.getWorkerSource(c.sourceMapId,Se[0],ue.source)[Se[1]](ue,Z)}else Z(new Error(`Could not find function ${c.type}`));!g&&Q&&Q.cancel&&(this.cancelCallbacks[m]=Q.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},n.AlphaImage=Li,n.CanonicalTileID=Em,n.CollisionBoxArray=Qr,n.CollisionCircleLayoutArray=class extends ut{},n.Color=Ve,n.DEMData=pg,n.DataConstantProperty=hr,n.DictionaryCoder=mg,n.EXTENT=Ja,n.ErrorEvent=at,n.EvaluationParameters=ba,n.Event=nt,n.Evented=Fe,n.FeatureIndex=gg,n.FillBucket=um,n.FillExtrusionBucket=fm,n.GeoJSONFeature=vg,n.ImageAtlas=H0,n.ImagePosition=mm,n.LineBucket=hm,n.LineStripIndexArray=class extends Qt{},n.LngLat=io,n.LngLatBounds=_f,n.MercatorCoordinate=Fd,n.ONE_EM=Yo,n.OverscaledTileID=Rl,n.PerformanceUtils=_2,n.PosArray=qn,n.Properties=Qn,n.QuadTriangleArray=class extends Et{},n.RGBAImage=na,n.RasterBoundsArray=class extends N{},n.RequestPerformance=class{constructor(m){this._marks={start:[m.url,"start"].join("#"),end:[m.url,"end"].join("#"),measure:m.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let m=performance.getEntriesByName(this._marks.measure);return m.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),m=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),m}},n.ResourceType=le,n.SegmentVector=Ti,n.SymbolBucket=$f,n.Transitionable=B,n.TriangleIndexArray=ka,n.Uniform1f=bu,n.Uniform1i=class extends _u{constructor(m,c){super(m,c),this.current=0}set(m){this.current!==m&&(this.current=m,this.gl.uniform1i(this.location,m))}},n.Uniform2f=class extends _u{constructor(m,c){super(m,c),this.current=[0,0]}set(m){m[0]===this.current[0]&&m[1]===this.current[1]||(this.current=m,this.gl.uniform2f(this.location,m[0],m[1]))}},n.Uniform3f=class extends _u{constructor(m,c){super(m,c),this.current=[0,0,0]}set(m){m[0]===this.current[0]&&m[1]===this.current[1]&&m[2]===this.current[2]||(this.current=m,this.gl.uniform3f(this.location,m[0],m[1],m[2]))}},n.Uniform4f=gc,n.UniformColor=kh,n.UniformMatrix4f=class extends _u{constructor(m,c){super(m,c),this.current=Vf}set(m){if(m[12]!==this.current[12]||m[0]!==this.current[0])return this.current=m,void this.gl.uniformMatrix4fv(this.location,!1,m);for(let c=1;c<16;c++)if(m[c]!==this.current[c]){this.current=m,this.gl.uniformMatrix4fv(this.location,!1,m);break}}},n.UnwrappedTileID=dg,n.ValidationError=Ke,n.ZoomHistory=uc,n.add=function(m,c,g){return m[0]=c[0]+g[0],m[1]=c[1]+g[1],m[2]=c[2]+g[2],m},n.addDynamicAttributes=bm,n.asyncAll=function(m,c,g){if(!m.length)return g(null,[]);let k=m.length;const Z=new Array(m.length);let Q=null;m.forEach((ue,Se)=>{c(ue,(ze,Ye)=>{ze&&(Q=ze),Z[Se]=Ye,--k==0&&g(Q,Z)})})},n.bezier=h,n.bindAll=x,n.cacheEntryPossiblyAdded=function(m){me++,me>re&&(m.getActor().send("enforceCacheSizeLimit",X),me=0)},n.clamp=d,n.clearTileCache=function(m){const c=caches.delete(q);m&&c.catch(m).then(()=>m())},n.clipLine=q0,n.clone=function(m){var c=new yr(16);return c[0]=m[0],c[1]=m[1],c[2]=m[2],c[3]=m[3],c[4]=m[4],c[5]=m[5],c[6]=m[6],c[7]=m[7],c[8]=m[8],c[9]=m[9],c[10]=m[10],c[11]=m[11],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15],c},n.clone$1=P,n.clone$2=function(m){var c=new yr(3);return c[0]=m[0],c[1]=m[1],c[2]=m[2],c},n.collisionCircleLayout=zx,n.config=ne,n.copy=function(m,c){return m[0]=c[0],m[1]=c[1],m[2]=c[2],m[3]=c[3],m[4]=c[4],m[5]=c[5],m[6]=c[6],m[7]=c[7],m[8]=c[8],m[9]=c[9],m[10]=c[10],m[11]=c[11],m[12]=c[12],m[13]=c[13],m[14]=c[14],m[15]=c[15],m},n.create=function(){var m=new yr(16);return yr!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[11]=0,m[12]=0,m[13]=0,m[14]=0),m[0]=1,m[5]=1,m[10]=1,m[15]=1,m},n.create$1=Ut,n.createExpression=ol,n.createFilter=Vu,n.createLayout=Za,n.createStyleLayer=function(m){return m.type==="custom"?new m2(m):new v2[m.type](m)},n.cross=function(m,c,g){var k=c[0],Z=c[1],Q=c[2],ue=g[0],Se=g[1],ze=g[2];return m[0]=Z*ze-Q*Se,m[1]=Q*ue-k*ze,m[2]=k*Se-Z*ue,m},n.dot=function(m,c){return m[0]*c[0]+m[1]*c[1]+m[2]*c[2]},n.dot$1=function(m,c){return m[0]*c[0]+m[1]*c[1]+m[2]*c[2]+m[3]*c[3]},n.ease=v,n.emitValidationErrors=Dl,n.enforceCacheSizeLimit=function(m){de(),we&&we.then(c=>{c.keys().then(g=>{for(let k=0;k<g.length-m;k++)c.delete(g[k])})})},n.equals=function(m,c){var g=m[0],k=m[1],Z=m[2],Q=m[3],ue=m[4],Se=m[5],ze=m[6],Ye=m[7],ot=m[8],ct=m[9],wt=m[10],Dt=m[11],It=m[12],ar=m[13],qt=m[14],Fr=m[15],jr=c[0],Lr=c[1],Hr=c[2],ln=c[3],an=c[4],jn=c[5],Jn=c[6],Un=c[7],Ln=c[8],kn=c[9],Hn=c[10],Fn=c[11],gn=c[12],ti=c[13],$n=c[14],Ii=c[15];return Math.abs(g-jr)<=rr*Math.max(1,Math.abs(g),Math.abs(jr))&&Math.abs(k-Lr)<=rr*Math.max(1,Math.abs(k),Math.abs(Lr))&&Math.abs(Z-Hr)<=rr*Math.max(1,Math.abs(Z),Math.abs(Hr))&&Math.abs(Q-ln)<=rr*Math.max(1,Math.abs(Q),Math.abs(ln))&&Math.abs(ue-an)<=rr*Math.max(1,Math.abs(ue),Math.abs(an))&&Math.abs(Se-jn)<=rr*Math.max(1,Math.abs(Se),Math.abs(jn))&&Math.abs(ze-Jn)<=rr*Math.max(1,Math.abs(ze),Math.abs(Jn))&&Math.abs(Ye-Un)<=rr*Math.max(1,Math.abs(Ye),Math.abs(Un))&&Math.abs(ot-Ln)<=rr*Math.max(1,Math.abs(ot),Math.abs(Ln))&&Math.abs(ct-kn)<=rr*Math.max(1,Math.abs(ct),Math.abs(kn))&&Math.abs(wt-Hn)<=rr*Math.max(1,Math.abs(wt),Math.abs(Hn))&&Math.abs(Dt-Fn)<=rr*Math.max(1,Math.abs(Dt),Math.abs(Fn))&&Math.abs(It-gn)<=rr*Math.max(1,Math.abs(It),Math.abs(gn))&&Math.abs(ar-ti)<=rr*Math.max(1,Math.abs(ar),Math.abs(ti))&&Math.abs(qt-$n)<=rr*Math.max(1,Math.abs(qt),Math.abs($n))&&Math.abs(Fr-Ii)<=rr*Math.max(1,Math.abs(Fr),Math.abs(Ii))},n.evaluateSizeForFeature=function(m,{uSize:c,uSizeT:g},{lowerSize:k,upperSize:Z}){return m.kind==="source"?k/Ac:m.kind==="composite"?mn(k/Ac,Z/Ac,g):c},n.evaluateSizeForZoom=function(m,c){let g=0,k=0;if(m.kind==="constant")k=m.layoutSize;else if(m.kind!=="source"){const{interpolationType:Z,minZoom:Q,maxZoom:ue}=m,Se=Z?d(ya.interpolationFactor(Z,c,Q,ue),0,1):0;m.kind==="camera"?k=mn(m.minSize,m.maxSize,Se):g=Se}return{uSizeT:g,uSize:k}},n.evaluateVariableOffset=rg,n.evented=vu,n.exported=H,n.exported$1=xe,n.extend=_,n.filterObject=A,n.fromRotation=function(m,c){var g=Math.sin(c),k=Math.cos(c);return m[0]=k,m[1]=g,m[2]=0,m[3]=-g,m[4]=k,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},n.fromScaling=function(m,c){return m[0]=c[0],m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=c[1],m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=c[2],m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m},n.getAnchorAlignment=gm,n.getAnchorJustification=_m,n.getArrayBuffer=ae,n.getImage=_e,n.getJSON=function(m,c){return ce(_(m,{type:"json"}),c)},n.getOverlapMode=Am,n.getRTLTextPluginStatus=Ll,n.getReferrer=te,n.getVideo=function(m,c){const g=window.document.createElement("video");g.muted=!0,g.onloadstart=function(){c(null,g)};for(let k=0;k<m.length;k++){const Z=window.document.createElement("source");ve(m[k])||(g.crossOrigin="Anonymous"),Z.src=m[k],g.appendChild(Z)}return{cancel:()=>{}}},n.identity=Jt,n.invert=function(m,c){var g=c[0],k=c[1],Z=c[2],Q=c[3],ue=c[4],Se=c[5],ze=c[6],Ye=c[7],ot=c[8],ct=c[9],wt=c[10],Dt=c[11],It=c[12],ar=c[13],qt=c[14],Fr=c[15],jr=g*Se-k*ue,Lr=g*ze-Z*ue,Hr=g*Ye-Q*ue,ln=k*ze-Z*Se,an=k*Ye-Q*Se,jn=Z*Ye-Q*ze,Jn=ot*ar-ct*It,Un=ot*qt-wt*It,Ln=ot*Fr-Dt*It,kn=ct*qt-wt*ar,Hn=ct*Fr-Dt*ar,Fn=wt*Fr-Dt*qt,gn=jr*Fn-Lr*Hn+Hr*kn+ln*Ln-an*Un+jn*Jn;return gn?(m[0]=(Se*Fn-ze*Hn+Ye*kn)*(gn=1/gn),m[1]=(Z*Hn-k*Fn-Q*kn)*gn,m[2]=(ar*jn-qt*an+Fr*ln)*gn,m[3]=(wt*an-ct*jn-Dt*ln)*gn,m[4]=(ze*Ln-ue*Fn-Ye*Un)*gn,m[5]=(g*Fn-Z*Ln+Q*Un)*gn,m[6]=(qt*Hr-It*jn-Fr*Lr)*gn,m[7]=(ot*jn-wt*Hr+Dt*Lr)*gn,m[8]=(ue*Hn-Se*Ln+Ye*Jn)*gn,m[9]=(k*Ln-g*Hn-Q*Jn)*gn,m[10]=(It*an-ar*Hr+Fr*jr)*gn,m[11]=(ct*Hr-ot*an-Dt*jr)*gn,m[12]=(Se*Un-ue*kn-ze*Jn)*gn,m[13]=(g*kn-k*Un+Z*Jn)*gn,m[14]=(ar*Lr-It*ln-qt*jr)*gn,m[15]=(ot*ln-ct*Lr+wt*jr)*gn,m):null},n.isImageBitmap=j,n.isSafari=V,n.isWorker=T,n.keysDifference=function(m,c){const g=[];for(const k in m)k in c||g.push(k);return g},n.lazyLoadRTLTextPlugin=function(){Zo.isLoading()||Zo.isLoaded()||Ll()!=="deferred"||pc()},n.makeRequest=ce,n.mapObject=E,n.mercatorXfromLng=ug,n.mercatorYfromLat=cg,n.mercatorZfromAltitude=fg,n.mul=Cr,n.mul$1=function(m,c,g){return m[0]=c[0]*g[0],m[1]=c[1]*g[1],m[2]=c[2]*g[2],m[3]=c[3]*g[3],m},n.multiply=or,n.nextPowerOfTwo=function(m){return m<=1?1:Math.pow(2,Math.ceil(Math.log(m)/Math.LN2))},n.normalize=function(m,c){var g=c[0],k=c[1],Z=c[2],Q=g*g+k*k+Z*Z;return Q>0&&(Q=1/Math.sqrt(Q)),m[0]=c[0]*Q,m[1]=c[1]*Q,m[2]=c[2]*Q,m},n.number=mn,n.ortho=function(m,c,g,k,Z,Q,ue){var Se=1/(c-g),ze=1/(k-Z),Ye=1/(Q-ue);return m[0]=-2*Se,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=-2*ze,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=2*Ye,m[11]=0,m[12]=(c+g)*Se,m[13]=(Z+k)*ze,m[14]=(ue+Q)*Ye,m[15]=1,m},n.parseCacheControl=M,n.parseGlyphPbf=function(m){return new dm(m).readFields(Xx,[])},n.pbf=dm,n.performSymbolLayout=function(m){m.bucket.createArrays(),m.bucket.tilePixelRatio=Ja/(512*m.bucket.overscaling),m.bucket.compareText={},m.bucket.iconsNeedLinear=!1;const c=m.bucket.layers[0].layout,g=m.bucket.layers[0]._unevaluatedLayout._values,k={layoutIconSize:g["icon-size"].possiblyEvaluate(new ba(m.bucket.zoom+1),m.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new ba(m.bucket.zoom+1),m.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new ba(18))};if(m.bucket.textSizeData.kind==="composite"){const{minZoom:ze,maxZoom:Ye}=m.bucket.textSizeData;k.compositeTextSizes=[g["text-size"].possiblyEvaluate(new ba(ze),m.canonical),g["text-size"].possiblyEvaluate(new ba(Ye),m.canonical)]}if(m.bucket.iconSizeData.kind==="composite"){const{minZoom:ze,maxZoom:Ye}=m.bucket.iconSizeData;k.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new ba(ze),m.canonical),g["icon-size"].possiblyEvaluate(new ba(Ye),m.canonical)]}const Z=c.get("text-line-height")*Yo,Q=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",ue=c.get("text-keep-upright"),Se=c.get("text-size");for(const ze of m.bucket.features){const Ye=c.get("text-font").evaluate(ze,{},m.canonical).join(","),ot=Se.evaluate(ze,{},m.canonical),ct=k.layoutTextSize.evaluate(ze,{},m.canonical),wt=k.layoutIconSize.evaluate(ze,{},m.canonical),Dt={horizontal:{},vertical:void 0},It=ze.text;let ar,qt=[0,0];if(It){const Lr=It.toString(),Hr=c.get("text-letter-spacing").evaluate(ze,{},m.canonical)*Yo,ln=Jc(Lr)?Hr:0,an=c.get("text-anchor").evaluate(ze,{},m.canonical),jn=c.get("text-variable-anchor");if(!jn){const Hn=c.get("text-radial-offset").evaluate(ze,{},m.canonical);qt=Hn?rg(an,[Hn*Yo,ym]):c.get("text-offset").evaluate(ze,{},m.canonical).map(Fn=>Fn*Yo)}let Jn=Q?"center":c.get("text-justify").evaluate(ze,{},m.canonical);const Un=c.get("symbol-placement"),Ln=Un==="point"?c.get("text-max-width").evaluate(ze,{},m.canonical)*Yo:0,kn=()=>{m.bucket.allowVerticalPlacement&&Yl(Lr)&&(Dt.vertical=Cd(It,m.glyphMap,m.glyphPositions,m.imagePositions,Ye,Ln,Z,an,"left",ln,qt,n.WritingMode.vertical,!0,Un,ct,ot))};if(!Q&&jn){const Hn=Jn==="auto"?jn.map(gn=>_m(gn)):[Jn];let Fn=!1;for(let gn=0;gn<Hn.length;gn++){const ti=Hn[gn];if(!Dt.horizontal[ti])if(Fn)Dt.horizontal[ti]=Dt.horizontal[0];else{const $n=Cd(It,m.glyphMap,m.glyphPositions,m.imagePositions,Ye,Ln,Z,"center",ti,ln,qt,n.WritingMode.horizontal,!1,Un,ct,ot);$n&&(Dt.horizontal[ti]=$n,Fn=$n.positionedLines.length===1)}}kn()}else{Jn==="auto"&&(Jn=_m(an));const Hn=Cd(It,m.glyphMap,m.glyphPositions,m.imagePositions,Ye,Ln,Z,an,Jn,ln,qt,n.WritingMode.horizontal,!1,Un,ct,ot);Hn&&(Dt.horizontal[Jn]=Hn),kn(),Yl(Lr)&&Q&&ue&&(Dt.vertical=Cd(It,m.glyphMap,m.glyphPositions,m.imagePositions,Ye,Ln,Z,an,Jn,ln,qt,n.WritingMode.vertical,!1,Un,ct,ot))}}let Fr=!1;if(ze.icon&&ze.icon.name){const Lr=m.imageMap[ze.icon.name];Lr&&(ar=e2(m.imagePositions[ze.icon.name],c.get("icon-offset").evaluate(ze,{},m.canonical),c.get("icon-anchor").evaluate(ze,{},m.canonical)),Fr=!!Lr.sdf,m.bucket.sdfIcons===void 0?m.bucket.sdfIcons=Fr:m.bucket.sdfIcons!==Fr&&R("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Lr.pixelRatio!==m.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(m.bucket.iconsNeedLinear=!0))}const jr=ig(Dt.horizontal)||Dt.vertical;m.bucket.iconsInText=!!jr&&jr.iconsInText,(jr||ar)&&s2(m.bucket,ze,Dt,ar,m.imageMap,k,ct,wt,qt,Fr,m.canonical)}m.showCollisionBoxes&&m.bucket.generateCollisionDebugBuffers()},n.perspective=function(m,c,g,k,Z){var Q,ue=1/Math.tan(c/2);return m[0]=ue/g,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=ue,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[11]=-1,m[12]=0,m[13]=0,m[15]=0,Z!=null&&Z!==1/0?(m[10]=(Z+k)*(Q=1/(k-Z)),m[14]=2*Z*k*Q):(m[10]=-1,m[14]=-2*k),m},n.pick=function(m,c){const g={};for(let k=0;k<c.length;k++){const Z=c[k];Z in m&&(g[Z]=m[Z])}return g},n.plugin=Zo,n.pointGeometry=Y,n.polygonIntersectsPolygon=Wf,n.potpack=U0,n.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.register=On,n.registerForPluginStateChange=function(m){return m({pluginStatus:wo,pluginURL:Gs}),vu.on("pluginStateChange",m),m},n.renderColorRamp=ia,n.rotateX=function(m,c,g){var k=Math.sin(g),Z=Math.cos(g),Q=c[4],ue=c[5],Se=c[6],ze=c[7],Ye=c[8],ot=c[9],ct=c[10],wt=c[11];return c!==m&&(m[0]=c[0],m[1]=c[1],m[2]=c[2],m[3]=c[3],m[12]=c[12],m[13]=c[13],m[14]=c[14],m[15]=c[15]),m[4]=Q*Z+Ye*k,m[5]=ue*Z+ot*k,m[6]=Se*Z+ct*k,m[7]=ze*Z+wt*k,m[8]=Ye*Z-Q*k,m[9]=ot*Z-ue*k,m[10]=ct*Z-Se*k,m[11]=wt*Z-ze*k,m},n.rotateZ=function(m,c,g){var k=Math.sin(g),Z=Math.cos(g),Q=c[0],ue=c[1],Se=c[2],ze=c[3],Ye=c[4],ot=c[5],ct=c[6],wt=c[7];return c!==m&&(m[8]=c[8],m[9]=c[9],m[10]=c[10],m[11]=c[11],m[12]=c[12],m[13]=c[13],m[14]=c[14],m[15]=c[15]),m[0]=Q*Z+Ye*k,m[1]=ue*Z+ot*k,m[2]=Se*Z+ct*k,m[3]=ze*Z+wt*k,m[4]=Ye*Z-Q*k,m[5]=ot*Z-ue*k,m[6]=ct*Z-Se*k,m[7]=wt*Z-ze*k,m},n.scale=function(m,c,g){var k=g[0],Z=g[1],Q=g[2];return m[0]=c[0]*k,m[1]=c[1]*k,m[2]=c[2]*k,m[3]=c[3]*k,m[4]=c[4]*Z,m[5]=c[5]*Z,m[6]=c[6]*Z,m[7]=c[7]*Z,m[8]=c[8]*Q,m[9]=c[9]*Q,m[10]=c[10]*Q,m[11]=c[11]*Q,m[12]=c[12],m[13]=c[13],m[14]=c[14],m[15]=c[15],m},n.scale$1=function(m,c,g){return m[0]=c[0]*g,m[1]=c[1]*g,m[2]=c[2]*g,m},n.setCacheLimits=function(m,c){X=m,re=c},n.setRTLTextPlugin=function(m,c,g=!1){if(wo===Xl||wo===Il||wo===Xu)throw new Error("setRTLTextPlugin cannot be called multiple times.");Gs=H.resolveURL(m),wo=Xl,Ku=c,Zs(),g||pc()},n.spec=Ie,n.sphericalToCartesian=function([m,c,g]){return c+=90,c*=Math.PI/180,g*=Math.PI/180,{x:m*Math.cos(c)*Math.sin(g),y:m*Math.sin(c)*Math.sin(g),z:m*Math.cos(g)}},n.sqrLen=function(m){var c=m[0],g=m[1];return c*c+g*g},n.sub=function(m,c,g){return m[0]=c[0]-g[0],m[1]=c[1]-g[1],m[2]=c[2]-g[2],m},n.toEvaluationFeature=bc,n.transformMat3=function(m,c,g){var k=c[0],Z=c[1],Q=c[2];return m[0]=k*g[0]+Z*g[3]+Q*g[6],m[1]=k*g[1]+Z*g[4]+Q*g[7],m[2]=k*g[2]+Z*g[5]+Q*g[8],m},n.transformMat4=xn,n.transformMat4$1=function(m,c,g){var k=c[0],Z=c[1];return m[0]=g[0]*k+g[4]*Z+g[12],m[1]=g[1]*k+g[5]*Z+g[13],m},n.translate=function(m,c,g){var k,Z,Q,ue,Se,ze,Ye,ot,ct,wt,Dt,It,ar=g[0],qt=g[1],Fr=g[2];return c===m?(m[12]=c[0]*ar+c[4]*qt+c[8]*Fr+c[12],m[13]=c[1]*ar+c[5]*qt+c[9]*Fr+c[13],m[14]=c[2]*ar+c[6]*qt+c[10]*Fr+c[14],m[15]=c[3]*ar+c[7]*qt+c[11]*Fr+c[15]):(Z=c[1],Q=c[2],ue=c[3],Se=c[4],ze=c[5],Ye=c[6],ot=c[7],ct=c[8],wt=c[9],Dt=c[10],It=c[11],m[0]=k=c[0],m[1]=Z,m[2]=Q,m[3]=ue,m[4]=Se,m[5]=ze,m[6]=Ye,m[7]=ot,m[8]=ct,m[9]=wt,m[10]=Dt,m[11]=It,m[12]=k*ar+Se*qt+ct*Fr+c[12],m[13]=Z*ar+ze*qt+wt*Fr+c[13],m[14]=Q*ar+Ye*qt+Dt*Fr+c[14],m[15]=ue*ar+ot*qt+It*Fr+c[15]),m},n.triggerPluginCompletionEvent=dc,n.unicodeBlockLookup=Mn,n.uniqueId=function(){return b++},n.validateCustomStyleLayer=function(m){const c=[],g=m.id;return g===void 0&&c.push({message:`layers.${g}: missing required property "id"`}),m.render===void 0&&c.push({message:`layers.${g}: missing required method "render"`}),m.renderingMode&&m.renderingMode!=="2d"&&m.renderingMode!=="3d"&&c.push({message:`layers.${g}: property "renderingMode" must be either "2d" or "3d"`}),c},n.validateLight=ju,n.validateStyle=pu,n.vectorTile=tf,n.warnOnce=R,n.wrap=p}),a(["./shared"],function(n){function l(Ue){const Ae=typeof Ue;if(Ae==="number"||Ae==="boolean"||Ae==="string"||Ue==null)return JSON.stringify(Ue);if(Array.isArray(Ue)){let Ve="[";for(const lt of Ue)Ve+=`${l(lt)},`;return`${Ve}]`}const Oe=Object.keys(Ue).sort();let We="{";for(let Ve=0;Ve<Oe.length;Ve++)We+=`${JSON.stringify(Oe[Ve])}:${l(Ue[Oe[Ve]])},`;return`${We}}`}function u(Ue){let Ae="";for(const Oe of n.refProperties)Ae+=`/${l(Ue[Oe])}`;return Ae}class h{constructor(Ae){this.keyCache={},Ae&&this.replace(Ae)}replace(Ae){this._layerConfigs={},this._layers={},this.update(Ae,[])}update(Ae,Oe){for(const Ve of Ae){this._layerConfigs[Ve.id]=Ve;const lt=this._layers[Ve.id]=n.createStyleLayer(Ve);lt._featureFilter=n.createFilter(lt.filter),this.keyCache[Ve.id]&&delete this.keyCache[Ve.id]}for(const Ve of Oe)delete this.keyCache[Ve],delete this._layerConfigs[Ve],delete this._layers[Ve];this.familiesBySource={};const We=function(Ve,lt){const mt={};for(let At=0;At<Ve.length;At++){const Bt=lt&&lt[Ve[At].id]||u(Ve[At]);lt&&(lt[Ve[At].id]=Bt);let ir=mt[Bt];ir||(ir=mt[Bt]=[]),ir.push(Ve[At])}const dt=[];for(const At in mt)dt.push(mt[At]);return dt}(Object.values(this._layerConfigs),this.keyCache);for(const Ve of We){const lt=Ve.map(tr=>this._layers[tr.id]),mt=lt[0];if(mt.visibility==="none")continue;const dt=mt.source||"";let At=this.familiesBySource[dt];At||(At=this.familiesBySource[dt]={});const Bt=mt.sourceLayer||"_geojsonTileLayer";let ir=At[Bt];ir||(ir=At[Bt]=[]),ir.push(lt)}}}class v{constructor(Ae){const Oe={},We=[];for(const dt in Ae){const At=Ae[dt],Bt=Oe[dt]={};for(const ir in At){const tr=At[+ir];if(!tr||tr.bitmap.width===0||tr.bitmap.height===0)continue;const vt={x:0,y:0,w:tr.bitmap.width+2,h:tr.bitmap.height+2};We.push(vt),Bt[ir]={rect:vt,metrics:tr.metrics}}}const{w:Ve,h:lt}=n.potpack(We),mt=new n.AlphaImage({width:Ve||1,height:lt||1});for(const dt in Ae){const At=Ae[dt];for(const Bt in At){const ir=At[+Bt];if(!ir||ir.bitmap.width===0||ir.bitmap.height===0)continue;const tr=Oe[dt][Bt].rect;n.AlphaImage.copy(ir.bitmap,mt,{x:0,y:0},{x:tr.x+1,y:tr.y+1},ir.bitmap)}}this.image=mt,this.positions=Oe}}n.register("GlyphAtlas",v);class d{constructor(Ae){this.tileID=new n.OverscaledTileID(Ae.tileID.overscaledZ,Ae.tileID.wrap,Ae.tileID.canonical.z,Ae.tileID.canonical.x,Ae.tileID.canonical.y),this.uid=Ae.uid,this.zoom=Ae.zoom,this.pixelRatio=Ae.pixelRatio,this.tileSize=Ae.tileSize,this.source=Ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ae.showCollisionBoxes,this.collectResourceTiming=!!Ae.collectResourceTiming,this.returnDependencies=!!Ae.returnDependencies,this.promoteId=Ae.promoteId}parse(Ae,Oe,We,Ve,lt){this.status="parsing",this.data=Ae,this.collisionBoxArray=new n.CollisionBoxArray;const mt=new n.DictionaryCoder(Object.keys(Ae.layers).sort()),dt=new n.FeatureIndex(this.tileID,this.promoteId);dt.bucketLayerIDs=[];const At={},Bt={featureIndex:dt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:We},ir=Oe.familiesBySource[this.source];for(const vr in ir){const Xr=Ae.layers[vr];if(!Xr)continue;Xr.version===1&&n.warnOnce(`Vector tile source "${this.source}" layer "${vr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $r=mt.encode(vr),Le=[];for(let De=0;De<Xr.length;De++){const bt=Xr.feature(De),xt=dt.getId(bt,vr);Le.push({feature:bt,id:xt,index:De,sourceLayerIndex:$r})}for(const De of ir[vr]){const bt=De[0];bt.source!==this.source&&n.warnOnce(`layer.source = ${bt.source} does not equal this.source = ${this.source}`),bt.minzoom&&this.zoom<Math.floor(bt.minzoom)||bt.maxzoom&&this.zoom>=bt.maxzoom||bt.visibility!=="none"&&(p(De,this.zoom,We),(At[bt.id]=bt.createBucket({index:dt.bucketLayerIDs.length,layers:De,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$r,sourceID:this.source})).populate(Le,Bt,this.tileID.canonical),dt.bucketLayerIDs.push(De.map(xt=>xt.id)))}}let tr,vt,pr,Gt;const Mr=n.mapObject(Bt.glyphDependencies,vr=>Object.keys(vr).map(Number));Object.keys(Mr).length?Ve.send("getGlyphs",{uid:this.uid,stacks:Mr},(vr,Xr)=>{tr||(tr=vr,vt=Xr,Kr.call(this))}):vt={};const Rr=Object.keys(Bt.iconDependencies);Rr.length?Ve.send("getImages",{icons:Rr,source:this.source,tileID:this.tileID,type:"icons"},(vr,Xr)=>{tr||(tr=vr,pr=Xr,Kr.call(this))}):pr={};const Yr=Object.keys(Bt.patternDependencies);function Kr(){if(tr)return lt(tr);if(vt&&pr&&Gt){const vr=new v(vt),Xr=new n.ImageAtlas(pr,Gt);for(const $r in At){const Le=At[$r];Le instanceof n.SymbolBucket?(p(Le.layers,this.zoom,We),n.performSymbolLayout({bucket:Le,glyphMap:vt,glyphPositions:vr.positions,imageMap:pr,imagePositions:Xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Le.hasPattern&&(Le instanceof n.LineBucket||Le instanceof n.FillBucket||Le instanceof n.FillExtrusionBucket)&&(p(Le.layers,this.zoom,We),Le.addFeatures(Bt,this.tileID.canonical,Xr.patternPositions))}this.status="done",lt(null,{buckets:Object.values(At).filter($r=>!$r.isEmpty()),featureIndex:dt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vr.image,imageAtlas:Xr,glyphMap:this.returnDependencies?vt:null,iconMap:this.returnDependencies?pr:null,glyphPositions:this.returnDependencies?vr.positions:null})}}Yr.length?Ve.send("getImages",{icons:Yr,source:this.source,tileID:this.tileID,type:"patterns"},(vr,Xr)=>{tr||(tr=vr,Gt=Xr,Kr.call(this))}):Gt={},Kr.call(this)}}function p(Ue,Ae,Oe){const We=new n.EvaluationParameters(Ae);for(const Ve of Ue)Ve.recalculate(We,Oe)}function _(Ue,Ae){const Oe=n.getArrayBuffer(Ue.request,(We,Ve,lt,mt)=>{We?Ae(We):Ve&&Ae(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(Ve)),rawData:Ve,cacheControl:lt,expires:mt})});return()=>{Oe.cancel(),Ae()}}class b{constructor(Ae,Oe,We,Ve){this.actor=Ae,this.layerIndex=Oe,this.availableImages=We,this.loadVectorData=Ve||_,this.loading={},this.loaded={}}loadTile(Ae,Oe){const We=Ae.uid;this.loading||(this.loading={});const Ve=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new n.RequestPerformance(Ae.request),lt=this.loading[We]=new d(Ae);lt.abort=this.loadVectorData(Ae,(mt,dt)=>{if(delete this.loading[We],mt||!dt)return lt.status="done",this.loaded[We]=lt,Oe(mt);const At=dt.rawData,Bt={};dt.expires&&(Bt.expires=dt.expires),dt.cacheControl&&(Bt.cacheControl=dt.cacheControl);const ir={};if(Ve){const tr=Ve.finish();tr&&(ir.resourceTiming=JSON.parse(JSON.stringify(tr)))}lt.vectorTile=dt.vectorTile,lt.parse(dt.vectorTile,this.layerIndex,this.availableImages,this.actor,(tr,vt)=>{if(tr||!vt)return Oe(tr);Oe(null,n.extend({rawTileData:At.slice(0)},vt,Bt,ir))}),this.loaded=this.loaded||{},this.loaded[We]=lt})}reloadTile(Ae,Oe){const We=this.loaded,Ve=Ae.uid,lt=this;if(We&&We[Ve]){const mt=We[Ve];mt.showCollisionBoxes=Ae.showCollisionBoxes;const dt=(At,Bt)=>{const ir=mt.reloadCallback;ir&&(delete mt.reloadCallback,mt.parse(mt.vectorTile,lt.layerIndex,this.availableImages,lt.actor,ir)),Oe(At,Bt)};mt.status==="parsing"?mt.reloadCallback=dt:mt.status==="done"&&(mt.vectorTile?mt.parse(mt.vectorTile,this.layerIndex,this.availableImages,this.actor,dt):dt())}}abortTile(Ae,Oe){const We=this.loading,Ve=Ae.uid;We&&We[Ve]&&We[Ve].abort&&(We[Ve].abort(),delete We[Ve]),Oe()}removeTile(Ae,Oe){const We=this.loaded,Ve=Ae.uid;We&&We[Ve]&&delete We[Ve],Oe()}}class x{constructor(){this.loaded={}}loadTile(Ae,Oe){const{uid:We,encoding:Ve,rawImageData:lt}=Ae,mt=n.isImageBitmap(lt)?this.getImageData(lt):lt,dt=new n.DEMData(We,mt,Ve);this.loaded=this.loaded||{},this.loaded[We]=dt,Oe(null,dt)}getImageData(Ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ae.width,Ae.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ae.width,this.offscreenCanvas.height=Ae.height,this.offscreenCanvasContext.drawImage(Ae,0,0,Ae.width,Ae.height);const Oe=this.offscreenCanvasContext.getImageData(-1,-1,Ae.width+2,Ae.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:Oe.width,height:Oe.height},Oe.data)}removeTile(Ae){const Oe=this.loaded,We=Ae.uid;Oe&&Oe[We]&&delete Oe[We]}}var E=function Ue(Ae,Oe){var We,Ve=Ae&&Ae.type;if(Ve==="FeatureCollection")for(We=0;We<Ae.features.length;We++)Ue(Ae.features[We],Oe);else if(Ve==="GeometryCollection")for(We=0;We<Ae.geometries.length;We++)Ue(Ae.geometries[We],Oe);else if(Ve==="Feature")Ue(Ae.geometry,Oe);else if(Ve==="Polygon")A(Ae.coordinates,Oe);else if(Ve==="MultiPolygon")for(We=0;We<Ae.coordinates.length;We++)A(Ae.coordinates[We],Oe);return Ae};function A(Ue,Ae){if(Ue.length!==0){P(Ue[0],Ae);for(var Oe=1;Oe<Ue.length;Oe++)P(Ue[Oe],!Ae)}}function P(Ue,Ae){for(var Oe=0,We=0,Ve=0,lt=Ue.length,mt=lt-1;Ve<lt;mt=Ve++){var dt=(Ue[Ve][0]-Ue[mt][0])*(Ue[mt][1]+Ue[Ve][1]),At=Oe+dt;We+=Math.abs(Oe)>=Math.abs(dt)?Oe-At+dt:dt-At+Oe,Oe=At}Oe+We>=0!=!!Ae&&Ue.reverse()}const D=n.vectorTile.VectorTileFeature.prototype.toGeoJSON;class R{constructor(Ae){this._feature=Ae,this.extent=n.EXTENT,this.type=Ae.type,this.properties=Ae.tags,"id"in Ae&&!isNaN(Ae.id)&&(this.id=parseInt(Ae.id,10))}loadGeometry(){if(this._feature.type===1){const Ae=[];for(const Oe of this._feature.geometry)Ae.push([new n.pointGeometry(Oe[0],Oe[1])]);return Ae}{const Ae=[];for(const Oe of this._feature.geometry){const We=[];for(const Ve of Oe)We.push(new n.pointGeometry(Ve[0],Ve[1]));Ae.push(We)}return Ae}}toGeoJSON(Ae,Oe,We){return D.call(this,Ae,Oe,We)}}class S{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=Ae.length,this._features=Ae}feature(Ae){return new R(this._features[Ae])}}var I={exports:{}},T=n.pointGeometry,M=n.vectorTile.VectorTileFeature,z=U;function U(Ue,Ae){this.options=Ae||{},this.features=Ue,this.length=Ue.length}function F(Ue,Ae){this.id=typeof Ue.id=="number"?Ue.id:void 0,this.type=Ue.type,this.rawGeometry=Ue.type===1?[Ue.geometry]:Ue.geometry,this.properties=Ue.tags,this.extent=Ae||4096}U.prototype.feature=function(Ue){return new F(this.features[Ue],this.options.extent)},F.prototype.loadGeometry=function(){var Ue=this.rawGeometry;this.geometry=[];for(var Ae=0;Ae<Ue.length;Ae++){for(var Oe=Ue[Ae],We=[],Ve=0;Ve<Oe.length;Ve++)We.push(new T(Oe[Ve][0],Oe[Ve][1]));this.geometry.push(We)}return this.geometry},F.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ue=this.geometry,Ae=1/0,Oe=-1/0,We=1/0,Ve=-1/0,lt=0;lt<Ue.length;lt++)for(var mt=Ue[lt],dt=0;dt<mt.length;dt++){var At=mt[dt];Ae=Math.min(Ae,At.x),Oe=Math.max(Oe,At.x),We=Math.min(We,At.y),Ve=Math.max(Ve,At.y)}return[Ae,We,Oe,Ve]},F.prototype.toGeoJSON=M.prototype.toGeoJSON;var V=n.pbf,j=z;function H(Ue){var Ae=new V;return function(Oe,We){for(var Ve in Oe.layers)We.writeMessage(3,Y,Oe.layers[Ve])}(Ue,Ae),Ae.finish()}function Y(Ue,Ae){var Oe;Ae.writeVarintField(15,Ue.version||1),Ae.writeStringField(1,Ue.name||""),Ae.writeVarintField(5,Ue.extent||4096);var We={keys:[],values:[],keycache:{},valuecache:{}};for(Oe=0;Oe<Ue.length;Oe++)We.feature=Ue.feature(Oe),Ae.writeMessage(2,J,We);var Ve=We.keys;for(Oe=0;Oe<Ve.length;Oe++)Ae.writeStringField(3,Ve[Oe]);var lt=We.values;for(Oe=0;Oe<lt.length;Oe++)Ae.writeMessage(4,X,lt[Oe])}function J(Ue,Ae){var Oe=Ue.feature;Oe.id!==void 0&&Ae.writeVarintField(1,Oe.id),Ae.writeMessage(2,ne,Ue),Ae.writeVarintField(3,Oe.type),Ae.writeMessage(4,ee,Oe)}function ne(Ue,Ae){var Oe=Ue.feature,We=Ue.keys,Ve=Ue.values,lt=Ue.keycache,mt=Ue.valuecache;for(var dt in Oe.properties){var At=Oe.properties[dt],Bt=lt[dt];if(At!==null){Bt===void 0&&(We.push(dt),lt[dt]=Bt=We.length-1),Ae.writeVarint(Bt);var ir=typeof At;ir!=="string"&&ir!=="boolean"&&ir!=="number"&&(At=JSON.stringify(At));var tr=ir+":"+At,vt=mt[tr];vt===void 0&&(Ve.push(At),mt[tr]=vt=Ve.length-1),Ae.writeVarint(vt)}}}function q(Ue,Ae){return(Ae<<3)+(7&Ue)}function we(Ue){return Ue<<1^Ue>>31}function ee(Ue,Ae){for(var Oe=Ue.loadGeometry(),We=Ue.type,Ve=0,lt=0,mt=Oe.length,dt=0;dt<mt;dt++){var At=Oe[dt],Bt=1;We===1&&(Bt=At.length),Ae.writeVarint(q(1,Bt));for(var ir=We===3?At.length-1:At.length,tr=0;tr<ir;tr++){tr===1&&We!==1&&Ae.writeVarint(q(2,ir-1));var vt=At[tr].x-Ve,pr=At[tr].y-lt;Ae.writeVarint(we(vt)),Ae.writeVarint(we(pr)),Ve+=vt,lt+=pr}We===3&&Ae.writeVarint(q(7,1))}}function X(Ue,Ae){var Oe=typeof Ue;Oe==="string"?Ae.writeStringField(1,Ue):Oe==="boolean"?Ae.writeBooleanField(7,Ue):Oe==="number"&&(Ue%1!=0?Ae.writeDoubleField(3,Ue):Ue<0?Ae.writeSVarintField(6,Ue):Ae.writeVarintField(5,Ue))}function re(Ue,Ae,Oe,We,Ve,lt){if(Ve-We<=Oe)return;const mt=We+Ve>>1;de(Ue,Ae,mt,We,Ve,lt%2),re(Ue,Ae,Oe,We,mt-1,lt+1),re(Ue,Ae,Oe,mt+1,Ve,lt+1)}function de(Ue,Ae,Oe,We,Ve,lt){for(;Ve>We;){if(Ve-We>600){const Bt=Ve-We+1,ir=Oe-We+1,tr=Math.log(Bt),vt=.5*Math.exp(2*tr/3),pr=.5*Math.sqrt(tr*vt*(Bt-vt)/Bt)*(ir-Bt/2<0?-1:1);de(Ue,Ae,Oe,Math.max(We,Math.floor(Oe-ir*vt/Bt+pr)),Math.min(Ve,Math.floor(Oe+(Bt-ir)*vt/Bt+pr)),lt)}const mt=Ae[2*Oe+lt];let dt=We,At=Ve;for(me(Ue,Ae,We,Oe),Ae[2*Ve+lt]>mt&&me(Ue,Ae,We,Ve);dt<At;){for(me(Ue,Ae,dt,At),dt++,At--;Ae[2*dt+lt]<mt;)dt++;for(;Ae[2*At+lt]>mt;)At--}Ae[2*We+lt]===mt?me(Ue,Ae,We,At):(At++,me(Ue,Ae,At,Ve)),At<=Oe&&(We=At+1),Oe<=At&&(Ve=At-1)}}function me(Ue,Ae,Oe,We){xe(Ue,Oe,We),xe(Ae,2*Oe,2*We),xe(Ae,2*Oe+1,2*We+1)}function xe(Ue,Ae,Oe){const We=Ue[Ae];Ue[Ae]=Ue[Oe],Ue[Oe]=We}function He(Ue,Ae,Oe,We){const Ve=Ue-Oe,lt=Ae-We;return Ve*Ve+lt*lt}I.exports=H,I.exports.fromVectorTileJs=H,I.exports.fromGeojsonVt=function(Ue,Ae){Ae=Ae||{};var Oe={};for(var We in Ue)Oe[We]=new j(Ue[We].features,Ae),Oe[We].name=We,Oe[We].version=Ae.version,Oe[We].extent=Ae.extent;return H({layers:Oe})},I.exports.GeoJSONWrapper=j;const Re=Ue=>Ue[0],Ee=Ue=>Ue[1];class ke{constructor(Ae,Oe=Re,We=Ee,Ve=64,lt=Float64Array){this.nodeSize=Ve,this.points=Ae;const mt=Ae.length<65536?Uint16Array:Uint32Array,dt=this.ids=new mt(Ae.length),At=this.coords=new lt(2*Ae.length);for(let Bt=0;Bt<Ae.length;Bt++)dt[Bt]=Bt,At[2*Bt]=Oe(Ae[Bt]),At[2*Bt+1]=We(Ae[Bt]);re(dt,At,Ve,0,dt.length-1,0)}range(Ae,Oe,We,Ve){return function(lt,mt,dt,At,Bt,ir,tr){const vt=[0,lt.length-1,0],pr=[];let Gt,Mr;for(;vt.length;){const Rr=vt.pop(),Yr=vt.pop(),Kr=vt.pop();if(Yr-Kr<=tr){for(let $r=Kr;$r<=Yr;$r++)Gt=mt[2*$r],Mr=mt[2*$r+1],Gt>=dt&&Gt<=Bt&&Mr>=At&&Mr<=ir&&pr.push(lt[$r]);continue}const vr=Math.floor((Kr+Yr)/2);Gt=mt[2*vr],Mr=mt[2*vr+1],Gt>=dt&&Gt<=Bt&&Mr>=At&&Mr<=ir&&pr.push(lt[vr]);const Xr=(Rr+1)%2;(Rr===0?dt<=Gt:At<=Mr)&&(vt.push(Kr),vt.push(vr-1),vt.push(Xr)),(Rr===0?Bt>=Gt:ir>=Mr)&&(vt.push(vr+1),vt.push(Yr),vt.push(Xr))}return pr}(this.ids,this.coords,Ae,Oe,We,Ve,this.nodeSize)}within(Ae,Oe,We){return function(Ve,lt,mt,dt,At,Bt){const ir=[0,Ve.length-1,0],tr=[],vt=At*At;for(;ir.length;){const pr=ir.pop(),Gt=ir.pop(),Mr=ir.pop();if(Gt-Mr<=Bt){for(let Xr=Mr;Xr<=Gt;Xr++)He(lt[2*Xr],lt[2*Xr+1],mt,dt)<=vt&&tr.push(Ve[Xr]);continue}const Rr=Math.floor((Mr+Gt)/2),Yr=lt[2*Rr],Kr=lt[2*Rr+1];He(Yr,Kr,mt,dt)<=vt&&tr.push(Ve[Rr]);const vr=(pr+1)%2;(pr===0?mt-At<=Yr:dt-At<=Kr)&&(ir.push(Mr),ir.push(Rr-1),ir.push(vr)),(pr===0?mt+At>=Yr:dt+At>=Kr)&&(ir.push(Rr+1),ir.push(Gt),ir.push(vr))}return tr}(this.ids,this.coords,Ae,Oe,We,this.nodeSize)}}const $={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ue=>Ue},le=Math.fround||(K=new Float32Array(1),Ue=>(K[0]=+Ue,K[0]));var K;class te{constructor(Ae){this.options=_e(Object.create($),Ae),this.trees=new Array(this.options.maxZoom+1)}load(Ae){const{log:Oe,minZoom:We,maxZoom:Ve,nodeSize:lt}=this.options;Oe&&console.time("total time");const mt=`prepare ${Ae.length} points`;Oe&&console.time(mt),this.points=Ae;let dt=[];for(let At=0;At<Ae.length;At++)Ae[At].geometry&&dt.push(ce(Ae[At],At));this.trees[Ve+1]=new ke(dt,je,Je,lt,Float32Array),Oe&&console.timeEnd(mt);for(let At=Ve;At>=We;At--){const Bt=+Date.now();dt=this._cluster(dt,At),this.trees[At]=new ke(dt,je,Je,lt,Float32Array),Oe&&console.log("z%d: %d clusters in %dms",At,dt.length,+Date.now()-Bt)}return Oe&&console.timeEnd("total time"),this}getClusters(Ae,Oe){let We=((Ae[0]+180)%360+360)%360-180;const Ve=Math.max(-90,Math.min(90,Ae[1]));let lt=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180;const mt=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)We=-180,lt=180;else if(We>lt){const ir=this.getClusters([We,Ve,180,mt],Oe),tr=this.getClusters([-180,Ve,lt,mt],Oe);return ir.concat(tr)}const dt=this.trees[this._limitZoom(Oe)],At=dt.range(pe(We),he(mt),pe(lt),he(Ve)),Bt=[];for(const ir of At){const tr=dt.points[ir];Bt.push(tr.numPoints?ae(tr):this.points[tr.index])}return Bt}getChildren(Ae){const Oe=this._getOriginId(Ae),We=this._getOriginZoom(Ae),Ve="No cluster with the specified id.",lt=this.trees[We];if(!lt)throw new Error(Ve);const mt=lt.points[Oe];if(!mt)throw new Error(Ve);const dt=this.options.radius/(this.options.extent*Math.pow(2,We-1)),At=lt.within(mt.x,mt.y,dt),Bt=[];for(const ir of At){const tr=lt.points[ir];tr.parentId===Ae&&Bt.push(tr.numPoints?ae(tr):this.points[tr.index])}if(Bt.length===0)throw new Error(Ve);return Bt}getLeaves(Ae,Oe,We){const Ve=[];return this._appendLeaves(Ve,Ae,Oe=Oe||10,We=We||0,0),Ve}getTile(Ae,Oe,We){const Ve=this.trees[this._limitZoom(Ae)],lt=Math.pow(2,Ae),{extent:mt,radius:dt}=this.options,At=dt/mt,Bt=(We-At)/lt,ir=(We+1+At)/lt,tr={features:[]};return this._addTileFeatures(Ve.range((Oe-At)/lt,Bt,(Oe+1+At)/lt,ir),Ve.points,Oe,We,lt,tr),Oe===0&&this._addTileFeatures(Ve.range(1-At/lt,Bt,1,ir),Ve.points,lt,We,lt,tr),Oe===lt-1&&this._addTileFeatures(Ve.range(0,Bt,At/lt,ir),Ve.points,-1,We,lt,tr),tr.features.length?tr:null}getClusterExpansionZoom(Ae){let Oe=this._getOriginZoom(Ae)-1;for(;Oe<=this.options.maxZoom;){const We=this.getChildren(Ae);if(Oe++,We.length!==1)break;Ae=We[0].properties.cluster_id}return Oe}_appendLeaves(Ae,Oe,We,Ve,lt){const mt=this.getChildren(Oe);for(const dt of mt){const At=dt.properties;if(At&&At.cluster?lt+At.point_count<=Ve?lt+=At.point_count:lt=this._appendLeaves(Ae,At.cluster_id,We,Ve,lt):lt<Ve?lt++:Ae.push(dt),Ae.length===We)break}return lt}_addTileFeatures(Ae,Oe,We,Ve,lt,mt){for(const dt of Ae){const At=Oe[dt],Bt=At.numPoints;let ir,tr,vt;if(Bt)ir=ve(At),tr=At.x,vt=At.y;else{const Mr=this.points[At.index];ir=Mr.properties,tr=pe(Mr.geometry.coordinates[0]),vt=he(Mr.geometry.coordinates[1])}const pr={type:1,geometry:[[Math.round(this.options.extent*(tr*lt-We)),Math.round(this.options.extent*(vt*lt-Ve))]],tags:ir};let Gt;Bt?Gt=At.id:this.options.generateId?Gt=At.index:this.points[At.index].id&&(Gt=this.points[At.index].id),Gt!==void 0&&(pr.id=Gt),mt.features.push(pr)}}_limitZoom(Ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ae),this.options.maxZoom+1))}_cluster(Ae,Oe){const We=[],{radius:Ve,extent:lt,reduce:mt,minPoints:dt}=this.options,At=Ve/(lt*Math.pow(2,Oe));for(let Bt=0;Bt<Ae.length;Bt++){const ir=Ae[Bt];if(ir.zoom<=Oe)continue;ir.zoom=Oe;const tr=this.trees[Oe+1],vt=tr.within(ir.x,ir.y,At),pr=ir.numPoints||1;let Gt=pr;for(const Mr of vt){const Rr=tr.points[Mr];Rr.zoom>Oe&&(Gt+=Rr.numPoints||1)}if(Gt>pr&&Gt>=dt){let Mr=ir.x*pr,Rr=ir.y*pr,Yr=mt&&pr>1?this._map(ir,!0):null;const Kr=(Bt<<5)+(Oe+1)+this.points.length;for(const vr of vt){const Xr=tr.points[vr];if(Xr.zoom<=Oe)continue;Xr.zoom=Oe;const $r=Xr.numPoints||1;Mr+=Xr.x*$r,Rr+=Xr.y*$r,Xr.parentId=Kr,mt&&(Yr||(Yr=this._map(ir,!0)),mt(Yr,this._map(Xr)))}ir.parentId=Kr,We.push(ie(Mr/Gt,Rr/Gt,Kr,Gt,Yr))}else if(We.push(ir),Gt>1)for(const Mr of vt){const Rr=tr.points[Mr];Rr.zoom<=Oe||(Rr.zoom=Oe,We.push(Rr))}}return We}_getOriginId(Ae){return Ae-this.points.length>>5}_getOriginZoom(Ae){return(Ae-this.points.length)%32}_map(Ae,Oe){if(Ae.numPoints)return Oe?_e({},Ae.properties):Ae.properties;const We=this.points[Ae.index].properties,Ve=this.options.map(We);return Oe&&Ve===We?_e({},Ve):Ve}}function ie(Ue,Ae,Oe,We,Ve){return{x:le(Ue),y:le(Ae),zoom:1/0,id:Oe,parentId:-1,numPoints:We,properties:Ve}}function ce(Ue,Ae){const[Oe,We]=Ue.geometry.coordinates;return{x:le(pe(Oe)),y:le(he(We)),zoom:1/0,index:Ae,parentId:-1}}function ae(Ue){return{type:"Feature",id:Ue.id,properties:ve(Ue),geometry:{type:"Point",coordinates:[(Ae=Ue.x,360*(Ae-.5)),ye(Ue.y)]}};var Ae}function ve(Ue){const Ae=Ue.numPoints,Oe=Ae>=1e4?`${Math.round(Ae/1e3)}k`:Ae>=1e3?Math.round(Ae/100)/10+"k":Ae;return _e(_e({},Ue.properties),{cluster:!0,cluster_id:Ue.id,point_count:Ae,point_count_abbreviated:Oe})}function pe(Ue){return Ue/360+.5}function he(Ue){const Ae=Math.sin(Ue*Math.PI/180),Oe=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function ye(Ue){const Ae=(180-360*Ue)*Math.PI/180;return 360*Math.atan(Math.exp(Ae))/Math.PI-90}function _e(Ue,Ae){for(const Oe in Ae)Ue[Oe]=Ae[Oe];return Ue}function je(Ue){return Ue.x}function Je(Ue){return Ue.y}function nt(Ue,Ae,Oe,We){for(var Ve,lt=We,mt=Oe-Ae>>1,dt=Oe-Ae,At=Ue[Ae],Bt=Ue[Ae+1],ir=Ue[Oe],tr=Ue[Oe+1],vt=Ae+3;vt<Oe;vt+=3){var pr=at(Ue[vt],Ue[vt+1],At,Bt,ir,tr);if(pr>lt)Ve=vt,lt=pr;else if(pr===lt){var Gt=Math.abs(vt-mt);Gt<dt&&(Ve=vt,dt=Gt)}}lt>We&&(Ve-Ae>3&&nt(Ue,Ae,Ve,We),Ue[Ve+2]=lt,Oe-Ve>3&&nt(Ue,Ve,Oe,We))}function at(Ue,Ae,Oe,We,Ve,lt){var mt=Ve-Oe,dt=lt-We;if(mt!==0||dt!==0){var At=((Ue-Oe)*mt+(Ae-We)*dt)/(mt*mt+dt*dt);At>1?(Oe=Ve,We=lt):At>0&&(Oe+=mt*At,We+=dt*At)}return(mt=Ue-Oe)*mt+(dt=Ae-We)*dt}function Fe(Ue,Ae,Oe,We){var Ve={id:Ue===void 0?null:Ue,type:Ae,geometry:Oe,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(lt){var mt=lt.geometry,dt=lt.type;if(dt==="Point"||dt==="MultiPoint"||dt==="LineString")Ie(lt,mt);else if(dt==="Polygon"||dt==="MultiLineString")for(var At=0;At<mt.length;At++)Ie(lt,mt[At]);else if(dt==="MultiPolygon")for(At=0;At<mt.length;At++)for(var Bt=0;Bt<mt[At].length;Bt++)Ie(lt,mt[At][Bt])}(Ve),Ve}function Ie(Ue,Ae){for(var Oe=0;Oe<Ae.length;Oe+=3)Ue.minX=Math.min(Ue.minX,Ae[Oe]),Ue.minY=Math.min(Ue.minY,Ae[Oe+1]),Ue.maxX=Math.max(Ue.maxX,Ae[Oe]),Ue.maxY=Math.max(Ue.maxY,Ae[Oe+1])}function Ke(Ue,Ae,Oe,We){if(Ae.geometry){var Ve=Ae.geometry.coordinates,lt=Ae.geometry.type,mt=Math.pow(Oe.tolerance/((1<<Oe.maxZoom)*Oe.extent),2),dt=[],At=Ae.id;if(Oe.promoteId?At=Ae.properties[Oe.promoteId]:Oe.generateId&&(At=We||0),lt==="Point")Qe(Ve,dt);else if(lt==="MultiPoint")for(var Bt=0;Bt<Ve.length;Bt++)Qe(Ve[Bt],dt);else if(lt==="LineString")it(Ve,dt,mt,!1);else if(lt==="MultiLineString"){if(Oe.lineMetrics){for(Bt=0;Bt<Ve.length;Bt++)it(Ve[Bt],dt=[],mt,!1),Ue.push(Fe(At,"LineString",dt,Ae.properties));return}Ne(Ve,dt,mt,!1)}else if(lt==="Polygon")Ne(Ve,dt,mt,!0);else{if(lt!=="MultiPolygon"){if(lt==="GeometryCollection"){for(Bt=0;Bt<Ae.geometry.geometries.length;Bt++)Ke(Ue,{id:At,geometry:Ae.geometry.geometries[Bt],properties:Ae.properties},Oe,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Bt=0;Bt<Ve.length;Bt++){var ir=[];Ne(Ve[Bt],ir,mt,!0),dt.push(ir)}}Ue.push(Fe(At,lt,dt,Ae.properties))}}function Qe(Ue,Ae){Ae.push(ht(Ue[0])),Ae.push(Tt(Ue[1])),Ae.push(0)}function it(Ue,Ae,Oe,We){for(var Ve,lt,mt=0,dt=0;dt<Ue.length;dt++){var At=ht(Ue[dt][0]),Bt=Tt(Ue[dt][1]);Ae.push(At),Ae.push(Bt),Ae.push(0),dt>0&&(mt+=We?(Ve*Bt-At*lt)/2:Math.sqrt(Math.pow(At-Ve,2)+Math.pow(Bt-lt,2))),Ve=At,lt=Bt}var ir=Ae.length-3;Ae[2]=1,nt(Ae,0,ir,Oe),Ae[ir+2]=1,Ae.size=Math.abs(mt),Ae.start=0,Ae.end=Ae.size}function Ne(Ue,Ae,Oe,We){for(var Ve=0;Ve<Ue.length;Ve++){var lt=[];it(Ue[Ve],lt,Oe,We),Ae.push(lt)}}function ht(Ue){return Ue/360+.5}function Tt(Ue){var Ae=Math.sin(Ue*Math.PI/180),Oe=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function Xt(Ue,Ae,Oe,We,Ve,lt,mt,dt){if(We/=Ae,lt>=(Oe/=Ae)&&mt<We)return Ue;if(mt<Oe||lt>=We)return null;for(var At=[],Bt=0;Bt<Ue.length;Bt++){var ir=Ue[Bt],tr=ir.geometry,vt=ir.type,pr=Ve===0?ir.minX:ir.minY,Gt=Ve===0?ir.maxX:ir.maxY;if(pr>=Oe&&Gt<We)At.push(ir);else if(!(Gt<Oe||pr>=We)){var Mr=[];if(vt==="Point"||vt==="MultiPoint")Nt(tr,Mr,Oe,We,Ve);else if(vt==="LineString")Mt(tr,Mr,Oe,We,Ve,!1,dt.lineMetrics);else if(vt==="MultiLineString")Yt(tr,Mr,Oe,We,Ve,!1);else if(vt==="Polygon")Yt(tr,Mr,Oe,We,Ve,!0);else if(vt==="MultiPolygon")for(var Rr=0;Rr<tr.length;Rr++){var Yr=[];Yt(tr[Rr],Yr,Oe,We,Ve,!0),Yr.length&&Mr.push(Yr)}if(Mr.length){if(dt.lineMetrics&&vt==="LineString"){for(Rr=0;Rr<Mr.length;Rr++)At.push(Fe(ir.id,vt,Mr[Rr],ir.tags));continue}vt!=="LineString"&&vt!=="MultiLineString"||(Mr.length===1?(vt="LineString",Mr=Mr[0]):vt="MultiLineString"),vt!=="Point"&&vt!=="MultiPoint"||(vt=Mr.length===3?"Point":"MultiPoint"),At.push(Fe(ir.id,vt,Mr,ir.tags))}}}return At.length?At:null}function Nt(Ue,Ae,Oe,We,Ve){for(var lt=0;lt<Ue.length;lt+=3){var mt=Ue[lt+Ve];mt>=Oe&&mt<=We&&(Ae.push(Ue[lt]),Ae.push(Ue[lt+1]),Ae.push(Ue[lt+2]))}}function Mt(Ue,Ae,Oe,We,Ve,lt,mt){for(var dt,At,Bt=Vt(Ue),ir=Ve===0?Nr:er,tr=Ue.start,vt=0;vt<Ue.length-3;vt+=3){var pr=Ue[vt],Gt=Ue[vt+1],Mr=Ue[vt+2],Rr=Ue[vt+3],Yr=Ue[vt+4],Kr=Ve===0?pr:Gt,vr=Ve===0?Rr:Yr,Xr=!1;mt&&(dt=Math.sqrt(Math.pow(pr-Rr,2)+Math.pow(Gt-Yr,2))),Kr<Oe?vr>Oe&&(At=ir(Bt,pr,Gt,Rr,Yr,Oe),mt&&(Bt.start=tr+dt*At)):Kr>We?vr<We&&(At=ir(Bt,pr,Gt,Rr,Yr,We),mt&&(Bt.start=tr+dt*At)):cr(Bt,pr,Gt,Mr),vr<Oe&&Kr>=Oe&&(At=ir(Bt,pr,Gt,Rr,Yr,Oe),Xr=!0),vr>We&&Kr<=We&&(At=ir(Bt,pr,Gt,Rr,Yr,We),Xr=!0),!lt&&Xr&&(mt&&(Bt.end=tr+dt*At),Ae.push(Bt),Bt=Vt(Ue)),mt&&(tr+=dt)}var $r=Ue.length-3;pr=Ue[$r],Gt=Ue[$r+1],Mr=Ue[$r+2],(Kr=Ve===0?pr:Gt)>=Oe&&Kr<=We&&cr(Bt,pr,Gt,Mr),$r=Bt.length-3,lt&&$r>=3&&(Bt[$r]!==Bt[0]||Bt[$r+1]!==Bt[1])&&cr(Bt,Bt[0],Bt[1],Bt[2]),Bt.length&&Ae.push(Bt)}function Vt(Ue){var Ae=[];return Ae.size=Ue.size,Ae.start=Ue.start,Ae.end=Ue.end,Ae}function Yt(Ue,Ae,Oe,We,Ve,lt){for(var mt=0;mt<Ue.length;mt++)Mt(Ue[mt],Ae,Oe,We,Ve,lt,!1)}function cr(Ue,Ae,Oe,We){Ue.push(Ae),Ue.push(Oe),Ue.push(We)}function Nr(Ue,Ae,Oe,We,Ve,lt){var mt=(lt-Ae)/(We-Ae);return Ue.push(lt),Ue.push(Oe+(Ve-Oe)*mt),Ue.push(1),mt}function er(Ue,Ae,Oe,We,Ve,lt){var mt=(lt-Oe)/(Ve-Oe);return Ue.push(Ae+(We-Ae)*mt),Ue.push(lt),Ue.push(1),mt}function Wt(Ue,Ae){for(var Oe=[],We=0;We<Ue.length;We++){var Ve,lt=Ue[We],mt=lt.type;if(mt==="Point"||mt==="MultiPoint"||mt==="LineString")Ve=dr(lt.geometry,Ae);else if(mt==="MultiLineString"||mt==="Polygon"){Ve=[];for(var dt=0;dt<lt.geometry.length;dt++)Ve.push(dr(lt.geometry[dt],Ae))}else if(mt==="MultiPolygon")for(Ve=[],dt=0;dt<lt.geometry.length;dt++){for(var At=[],Bt=0;Bt<lt.geometry[dt].length;Bt++)At.push(dr(lt.geometry[dt][Bt],Ae));Ve.push(At)}Oe.push(Fe(lt.id,mt,Ve,lt.tags))}return Oe}function dr(Ue,Ae){var Oe=[];Oe.size=Ue.size,Ue.start!==void 0&&(Oe.start=Ue.start,Oe.end=Ue.end);for(var We=0;We<Ue.length;We+=3)Oe.push(Ue[We]+Ae,Ue[We+1],Ue[We+2]);return Oe}function zr(Ue,Ae){if(Ue.transformed)return Ue;var Oe,We,Ve,lt=1<<Ue.z,mt=Ue.x,dt=Ue.y;for(Oe=0;Oe<Ue.features.length;Oe++){var At=Ue.features[Oe],Bt=At.geometry,ir=At.type;if(At.geometry=[],ir===1)for(We=0;We<Bt.length;We+=2)At.geometry.push(Dr(Bt[We],Bt[We+1],Ae,lt,mt,dt));else for(We=0;We<Bt.length;We++){var tr=[];for(Ve=0;Ve<Bt[We].length;Ve+=2)tr.push(Dr(Bt[We][Ve],Bt[We][Ve+1],Ae,lt,mt,dt));At.geometry.push(tr)}}return Ue.transformed=!0,Ue}function Dr(Ue,Ae,Oe,We,Ve,lt){return[Math.round(Oe*(Ue*We-Ve)),Math.round(Oe*(Ae*We-lt))]}function $e(Ue,Ae,Oe,We,Ve){for(var lt=Ae===Ve.maxZoom?0:Ve.tolerance/((1<<Ae)*Ve.extent),mt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Oe,y:We,z:Ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},dt=0;dt<Ue.length;dt++){mt.numFeatures++,pt(mt,Ue[dt],lt,Ve);var At=Ue[dt].minX,Bt=Ue[dt].minY,ir=Ue[dt].maxX,tr=Ue[dt].maxY;At<mt.minX&&(mt.minX=At),Bt<mt.minY&&(mt.minY=Bt),ir>mt.maxX&&(mt.maxX=ir),tr>mt.maxY&&(mt.maxY=tr)}return mt}function pt(Ue,Ae,Oe,We){var Ve=Ae.geometry,lt=Ae.type,mt=[];if(lt==="Point"||lt==="MultiPoint")for(var dt=0;dt<Ve.length;dt+=3)mt.push(Ve[dt]),mt.push(Ve[dt+1]),Ue.numPoints++,Ue.numSimplified++;else if(lt==="LineString")kt(mt,Ve,Ue,Oe,!1,!1);else if(lt==="MultiLineString"||lt==="Polygon")for(dt=0;dt<Ve.length;dt++)kt(mt,Ve[dt],Ue,Oe,lt==="Polygon",dt===0);else if(lt==="MultiPolygon")for(var At=0;At<Ve.length;At++){var Bt=Ve[At];for(dt=0;dt<Bt.length;dt++)kt(mt,Bt[dt],Ue,Oe,!0,dt===0)}if(mt.length){var ir=Ae.tags||null;if(lt==="LineString"&&We.lineMetrics){for(var tr in ir={},Ae.tags)ir[tr]=Ae.tags[tr];ir.mapbox_clip_start=Ve.start/Ve.size,ir.mapbox_clip_end=Ve.end/Ve.size}var vt={geometry:mt,type:lt==="Polygon"||lt==="MultiPolygon"?3:lt==="LineString"||lt==="MultiLineString"?2:1,tags:ir};Ae.id!==null&&(vt.id=Ae.id),Ue.features.push(vt)}}function kt(Ue,Ae,Oe,We,Ve,lt){var mt=We*We;if(We>0&&Ae.size<(Ve?mt:We))Oe.numPoints+=Ae.length/3;else{for(var dt=[],At=0;At<Ae.length;At+=3)(We===0||Ae[At+2]>mt)&&(Oe.numSimplified++,dt.push(Ae[At]),dt.push(Ae[At+1])),Oe.numPoints++;Ve&&function(Bt,ir){for(var tr=0,vt=0,pr=Bt.length,Gt=pr-2;vt<pr;Gt=vt,vt+=2)tr+=(Bt[vt]-Bt[Gt])*(Bt[vt+1]+Bt[Gt+1]);if(tr>0===ir)for(vt=0,pr=Bt.length;vt<pr/2;vt+=2){var Mr=Bt[vt],Rr=Bt[vt+1];Bt[vt]=Bt[pr-2-vt],Bt[vt+1]=Bt[pr-1-vt],Bt[pr-2-vt]=Mr,Bt[pr-1-vt]=Rr}}(dt,lt),Ue.push(dt)}}function Me(Ue,Ae){var Oe=(Ae=this.options=function(Ve,lt){for(var mt in lt)Ve[mt]=lt[mt];return Ve}(Object.create(this.options),Ae)).debug;if(Oe&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");var We=function(Ve,lt){var mt=[];if(Ve.type==="FeatureCollection")for(var dt=0;dt<Ve.features.length;dt++)Ke(mt,Ve.features[dt],lt,dt);else Ke(mt,Ve.type==="Feature"?Ve:{geometry:Ve},lt);return mt}(Ue,Ae);this.tiles={},this.tileCoords=[],Oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),We=function(Ve,lt){var mt=lt.buffer/lt.extent,dt=Ve,At=Xt(Ve,1,-1-mt,mt,0,-1,2,lt),Bt=Xt(Ve,1,1-mt,2+mt,0,-1,2,lt);return(At||Bt)&&(dt=Xt(Ve,1,-mt,1+mt,0,-1,2,lt)||[],At&&(dt=Wt(At,1).concat(dt)),Bt&&(dt=dt.concat(Wt(Bt,-1)))),dt}(We,Ae),We.length&&this.splitTile(We,0,0,0),Oe&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function rt(Ue,Ae,Oe){return 32*((1<<Ue)*Oe+Ae)+Ue}function st(Ue,Ae){const Oe=Ue.tileID.canonical;if(!this._geoJSONIndex)return Ae(null,null);const We=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!We)return Ae(null,null);const Ve=new S(We.features);let lt=I.exports(Ve);lt.byteOffset===0&&lt.byteLength===lt.buffer.byteLength||(lt=new Uint8Array(lt)),Ae(null,{vectorTile:Ve,rawData:lt.buffer})}Me.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Me.prototype.splitTile=function(Ue,Ae,Oe,We,Ve,lt,mt){for(var dt=[Ue,Ae,Oe,We],At=this.options,Bt=At.debug;dt.length;){We=dt.pop(),Oe=dt.pop(),Ae=dt.pop(),Ue=dt.pop();var ir=1<<Ae,tr=rt(Ae,Oe,We),vt=this.tiles[tr];if(!vt&&(Bt>1&&console.time("creation"),vt=this.tiles[tr]=$e(Ue,Ae,Oe,We,At),this.tileCoords.push({z:Ae,x:Oe,y:We}),Bt)){Bt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,Oe,We,vt.numFeatures,vt.numPoints,vt.numSimplified),console.timeEnd("creation"));var pr="z"+Ae;this.stats[pr]=(this.stats[pr]||0)+1,this.total++}if(vt.source=Ue,Ve){if(Ae===At.maxZoom||Ae===Ve)continue;var Gt=1<<Ve-Ae;if(Oe!==Math.floor(lt/Gt)||We!==Math.floor(mt/Gt))continue}else if(Ae===At.indexMaxZoom||vt.numPoints<=At.indexMaxPoints)continue;if(vt.source=null,Ue.length!==0){Bt>1&&console.time("clipping");var Mr,Rr,Yr,Kr,vr,Xr,$r=.5*At.buffer/At.extent,Le=.5-$r,De=.5+$r,bt=1+$r;Mr=Rr=Yr=Kr=null,vr=Xt(Ue,ir,Oe-$r,Oe+De,0,vt.minX,vt.maxX,At),Xr=Xt(Ue,ir,Oe+Le,Oe+bt,0,vt.minX,vt.maxX,At),Ue=null,vr&&(Mr=Xt(vr,ir,We-$r,We+De,1,vt.minY,vt.maxY,At),Rr=Xt(vr,ir,We+Le,We+bt,1,vt.minY,vt.maxY,At),vr=null),Xr&&(Yr=Xt(Xr,ir,We-$r,We+De,1,vt.minY,vt.maxY,At),Kr=Xt(Xr,ir,We+Le,We+bt,1,vt.minY,vt.maxY,At),Xr=null),Bt>1&&console.timeEnd("clipping"),dt.push(Mr||[],Ae+1,2*Oe,2*We),dt.push(Rr||[],Ae+1,2*Oe,2*We+1),dt.push(Yr||[],Ae+1,2*Oe+1,2*We),dt.push(Kr||[],Ae+1,2*Oe+1,2*We+1)}}},Me.prototype.getTile=function(Ue,Ae,Oe){var We=this.options,Ve=We.extent,lt=We.debug;if(Ue<0||Ue>24)return null;var mt=1<<Ue,dt=rt(Ue,Ae=(Ae%mt+mt)%mt,Oe);if(this.tiles[dt])return zr(this.tiles[dt],Ve);lt>1&&console.log("drilling down to z%d-%d-%d",Ue,Ae,Oe);for(var At,Bt=Ue,ir=Ae,tr=Oe;!At&&Bt>0;)Bt--,ir=Math.floor(ir/2),tr=Math.floor(tr/2),At=this.tiles[rt(Bt,ir,tr)];return At&&At.source?(lt>1&&console.log("found parent tile z%d-%d-%d",Bt,ir,tr),lt>1&&console.time("drilling down"),this.splitTile(At.source,Bt,ir,tr,Ue,Ae,Oe),lt>1&&console.timeEnd("drilling down"),this.tiles[dt]?zr(this.tiles[dt],Ve):null):null};class ft extends b{constructor(Ae,Oe,We,Ve){super(Ae,Oe,We,st),Ve&&(this.loadGeoJSON=Ve)}loadData(Ae,Oe){var We;(We=this._pendingRequest)===null||We===void 0||We.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ve=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new n.RequestPerformance(Ae.request);this._pendingCallback=Oe,this._pendingRequest=this.loadGeoJSON(Ae,(lt,mt)=>{if(delete this._pendingCallback,delete this._pendingRequest,lt||!mt)return Oe(lt);if(typeof mt!="object")return Oe(new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`));{E(mt,!0);try{if(Ae.filter){const At=n.createExpression(Ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(At.result==="error")throw new Error(At.value.map(ir=>`${ir.key}: ${ir.message}`).join(", "));const Bt=mt.features.filter(ir=>At.value.evaluate({zoom:0},ir));mt={type:"FeatureCollection",features:Bt}}this._geoJSONIndex=Ae.cluster?new te(function({superclusterOptions:At,clusterProperties:Bt}){if(!Bt||!At)return At;const ir={},tr={},vt={accumulated:null,zoom:0},pr={properties:null},Gt=Object.keys(Bt);for(const Mr of Gt){const[Rr,Yr]=Bt[Mr],Kr=n.createExpression(Yr),vr=n.createExpression(typeof Rr=="string"?[Rr,["accumulated"],["get",Mr]]:Rr);ir[Mr]=Kr.value,tr[Mr]=vr.value}return At.map=Mr=>{pr.properties=Mr;const Rr={};for(const Yr of Gt)Rr[Yr]=ir[Yr].evaluate(vt,pr);return Rr},At.reduce=(Mr,Rr)=>{pr.properties=Rr;for(const Yr of Gt)vt.accumulated=Mr[Yr],Mr[Yr]=tr[Yr].evaluate(vt,pr)},At}(Ae)).load(mt.features):function(At,Bt){return new Me(At,Bt)}(mt,Ae.geojsonVtOptions)}catch(At){return Oe(At)}this.loaded={};const dt={};if(Ve){const At=Ve.finish();At&&(dt.resourceTiming={},dt.resourceTiming[Ae.source]=JSON.parse(JSON.stringify(At)))}Oe(null,dt)}})}reloadTile(Ae,Oe){const We=this.loaded;return We&&We[Ae.uid]?super.reloadTile(Ae,Oe):this.loadTile(Ae,Oe)}loadGeoJSON(Ae,Oe){if(Ae.request)return n.getJSON(Ae.request,Oe);if(typeof Ae.data=="string")try{Oe(null,JSON.parse(Ae.data))}catch{Oe(new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`))}else Oe(new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Ae,Oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Oe()}getClusterExpansionZoom(Ae,Oe){try{Oe(null,this._geoJSONIndex.getClusterExpansionZoom(Ae.clusterId))}catch(We){Oe(We)}}getClusterChildren(Ae,Oe){try{Oe(null,this._geoJSONIndex.getChildren(Ae.clusterId))}catch(We){Oe(We)}}getClusterLeaves(Ae,Oe){try{Oe(null,this._geoJSONIndex.getLeaves(Ae.clusterId,Ae.limit,Ae.offset))}catch(We){Oe(We)}}}class zt{constructor(Ae){this.self=Ae,this.actor=new n.Actor(Ae,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:b,geojson:ft},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Oe,We)=>{if(this.workerSourceTypes[Oe])throw new Error(`Worker source with name "${Oe}" already registered.`);this.workerSourceTypes[Oe]=We},this.self.registerRTLTextPlugin=Oe=>{if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=Oe.applyArabicShaping,n.plugin.processBidirectionalText=Oe.processBidirectionalText,n.plugin.processStyledBidirectionalText=Oe.processStyledBidirectionalText}}setReferrer(Ae,Oe){this.referrer=Oe}setImages(Ae,Oe,We){this.availableImages[Ae]=Oe;for(const Ve in this.workerSources[Ae]){const lt=this.workerSources[Ae][Ve];for(const mt in lt)lt[mt].availableImages=Oe}We()}setLayers(Ae,Oe,We){this.getLayerIndex(Ae).replace(Oe),We()}updateLayers(Ae,Oe,We){this.getLayerIndex(Ae).update(Oe.layers,Oe.removedIds),We()}loadTile(Ae,Oe,We){this.getWorkerSource(Ae,Oe.type,Oe.source).loadTile(Oe,We)}loadDEMTile(Ae,Oe,We){this.getDEMWorkerSource(Ae,Oe.source).loadTile(Oe,We)}reloadTile(Ae,Oe,We){this.getWorkerSource(Ae,Oe.type,Oe.source).reloadTile(Oe,We)}abortTile(Ae,Oe,We){this.getWorkerSource(Ae,Oe.type,Oe.source).abortTile(Oe,We)}removeTile(Ae,Oe,We){this.getWorkerSource(Ae,Oe.type,Oe.source).removeTile(Oe,We)}removeDEMTile(Ae,Oe){this.getDEMWorkerSource(Ae,Oe.source).removeTile(Oe)}removeSource(Ae,Oe,We){if(!this.workerSources[Ae]||!this.workerSources[Ae][Oe.type]||!this.workerSources[Ae][Oe.type][Oe.source])return;const Ve=this.workerSources[Ae][Oe.type][Oe.source];delete this.workerSources[Ae][Oe.type][Oe.source],Ve.removeSource!==void 0?Ve.removeSource(Oe,We):We()}loadWorkerSource(Ae,Oe,We){try{this.self.importScripts(Oe.url),We()}catch(Ve){We(Ve.toString())}}syncRTLPluginState(Ae,Oe,We){try{n.plugin.setState(Oe);const Ve=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&Ve!=null){this.self.importScripts(Ve);const lt=n.plugin.isParsed();We(lt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ve}`),lt)}}catch(Ve){We(Ve.toString())}}getAvailableImages(Ae){let Oe=this.availableImages[Ae];return Oe||(Oe=[]),Oe}getLayerIndex(Ae){let Oe=this.layerIndexes[Ae];return Oe||(Oe=this.layerIndexes[Ae]=new h),Oe}getWorkerSource(Ae,Oe,We){if(this.workerSources[Ae]||(this.workerSources[Ae]={}),this.workerSources[Ae][Oe]||(this.workerSources[Ae][Oe]={}),!this.workerSources[Ae][Oe][We]){const Ve={send:(lt,mt,dt)=>{this.actor.send(lt,mt,dt,Ae)}};this.workerSources[Ae][Oe][We]=new this.workerSourceTypes[Oe](Ve,this.getLayerIndex(Ae),this.getAvailableImages(Ae))}return this.workerSources[Ae][Oe][We]}getDEMWorkerSource(Ae,Oe){return this.demWorkerSources[Ae]||(this.demWorkerSources[Ae]={}),this.demWorkerSources[Ae][Oe]||(this.demWorkerSources[Ae][Oe]=new x),this.demWorkerSources[Ae][Oe]}enforceCacheSizeLimit(Ae,Oe){n.enforceCacheSizeLimit(Oe)}}return n.isWorker()&&(self.worker=new zt(self)),zt}),a(["./shared"],function(n){var l=u;function u(N){return!function(f){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,G,oe=new Blob([""],{type:"text/javascript"}),Te=URL.createObjectURL(oe);try{G=new Worker(Te),O=!0}catch{O=!1}return G&&G.terminate(),URL.revokeObjectURL(Te),O}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var O=document.createElement("canvas");O.width=O.height=1;var G=O.getContext("2d");if(!G)return!1;var oe=G.getImageData(0,0,1,1);return oe&&oe.width===O.width}()?(h[w=f&&f.failIfMajorPerformanceCaveat]===void 0&&(h[w]=function(O){var G,oe=function(Te){var Be=document.createElement("canvas"),Ze=Object.create(u.webGLContextAttributes);return Ze.failIfMajorPerformanceCaveat=Te,Be.getContext("webgl",Ze)||Be.getContext("experimental-webgl",Ze)}(O);if(!oe)return!1;try{G=oe.createShader(oe.VERTEX_SHADER)}catch{return!1}return!(!G||oe.isContextLost())&&(oe.shaderSource(G,"void main() {}"),oe.compileShader(G),oe.getShaderParameter(G,oe.COMPILE_STATUS)===!0)}(w)),h[w]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}(N)}var h={};function v(N,f){if(Array.isArray(N)){if(!Array.isArray(f)||N.length!==f.length)return!1;for(let w=0;w<N.length;w++)if(!v(N[w],f[w]))return!1;return!0}if(typeof N=="object"&&N!==null&&f!==null){if(typeof f!="object"||Object.keys(N).length!==Object.keys(f).length)return!1;for(const w in N)if(!v(N[w],f[w]))return!1;return!0}return N===f}u.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class d{static testProp(f){if(!d.docStyle)return f[0];for(let w=0;w<f.length;w++)if(f[w]in d.docStyle)return f[w];return f[0]}static create(f,w,O){const G=window.document.createElement(f);return w!==void 0&&(G.className=w),O&&O.appendChild(G),G}static createNS(f,w){return window.document.createElementNS(f,w)}static disableDrag(){d.docStyle&&d.selectProp&&(d.userSelect=d.docStyle[d.selectProp],d.docStyle[d.selectProp]="none")}static enableDrag(){d.docStyle&&d.selectProp&&(d.docStyle[d.selectProp]=d.userSelect)}static setTransform(f,w){f.style[d.transformProp]=w}static addEventListener(f,w,O,G={}){f.addEventListener(w,O,"passive"in G?G:G.capture)}static removeEventListener(f,w,O,G={}){f.removeEventListener(w,O,"passive"in G?G:G.capture)}static suppressClickInternal(f){f.preventDefault(),f.stopPropagation(),window.removeEventListener("click",d.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",d.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",d.suppressClickInternal,!0)},0)}static mousePos(f,w){const O=f.getBoundingClientRect();return new n.pointGeometry(w.clientX-O.left-f.clientLeft,w.clientY-O.top-f.clientTop)}static touchPos(f,w){const O=f.getBoundingClientRect(),G=[];for(let oe=0;oe<w.length;oe++)G.push(new n.pointGeometry(w[oe].clientX-O.left-f.clientLeft,w[oe].clientY-O.top-f.clientTop));return G}static mouseButton(f){return f.button}static remove(f){f.parentNode&&f.parentNode.removeChild(f)}}d.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,d.selectProp=d.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),d.transformProp=d.testProp(["transform","WebkitTransform"]);class p{constructor(f){this._transformRequestFn=f}transformRequest(f,w){return this._transformRequestFn&&this._transformRequestFn(f,w)||{url:f}}normalizeSpriteURL(f,w,O){const G=function(oe){const Te=oe.match(_);if(!Te)throw new Error(`Unable to parse URL "${oe}"`);return{protocol:Te[1],authority:Te[2],path:Te[3]||"/",params:Te[4]?Te[4].split("&"):[]}}(f);return G.path+=`${w}${O}`,function(oe){const Te=oe.params.length?`?${oe.params.join("&")}`:"";return`${oe.protocol}://${oe.authority}${oe.path}${Te}`}(G)}setTransformRequest(f){this._transformRequestFn=f}}const _=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class b{constructor(f,w,O,G){this.context=f,this.format=O,this.texture=f.gl.createTexture(),this.update(w,G)}update(f,w,O){const{width:G,height:oe}=f,Te=!(this.size&&this.size[0]===G&&this.size[1]===oe||O),{context:Be}=this,{gl:Ze}=Be;if(this.useMipmap=Boolean(w&&w.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),Be.pixelStoreUnpackFlipY.set(!1),Be.pixelStoreUnpack.set(1),Be.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!w||w.premultiply!==!1)),Te)this.size=[G,oe],f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement||f instanceof ImageData||n.isImageBitmap(f)?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,f):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,G,oe,0,this.format,Ze.UNSIGNED_BYTE,f.data);else{const{x:qe,y:ut}=O||{x:0,y:0};f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement||f instanceof ImageData||n.isImageBitmap(f)?Ze.texSubImage2D(Ze.TEXTURE_2D,0,qe,ut,Ze.RGBA,Ze.UNSIGNED_BYTE,f):Ze.texSubImage2D(Ze.TEXTURE_2D,0,qe,ut,G,oe,Ze.RGBA,Ze.UNSIGNED_BYTE,f.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)}bind(f,w,O){const{context:G}=this,{gl:oe}=G;oe.bindTexture(oe.TEXTURE_2D,this.texture),O!==oe.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(O=oe.LINEAR),f!==this.filter&&(oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,f),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,O||f),this.filter=f),w!==this.wrap&&(oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,w),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,w),this.wrap=w)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:f}=this.context;f.deleteTexture(this.texture),this.texture=null}}function x(N){const{userImage:f}=N;return!!(f&&f.render&&f.render())&&(N.data.replace(new Uint8Array(f.data.buffer)),!0)}class E extends n.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(f){if(this.loaded!==f&&(this.loaded=f,f)){for(const{ids:w,callback:O}of this.requestors)this._notify(w,O);this.requestors=[]}}getImage(f){return this.images[f]}addImage(f,w){if(this.images[f])throw new Error(`Image id ${f} already exist, use updateImage instead`);this._validate(f,w)&&(this.images[f]=w)}_validate(f,w){let O=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new n.ErrorEvent(new Error(`Image "${f}" has invalid "stretchX" value`))),O=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new n.ErrorEvent(new Error(`Image "${f}" has invalid "stretchY" value`))),O=!1),this._validateContent(w.content,w)||(this.fire(new n.ErrorEvent(new Error(`Image "${f}" has invalid "content" value`))),O=!1),O}_validateStretch(f,w){if(!f)return!0;let O=0;for(const G of f){if(G[0]<O||G[1]<G[0]||w<G[1])return!1;O=G[1]}return!0}_validateContent(f,w){return!(f&&(f.length!==4||f[0]<0||w.data.width<f[0]||f[1]<0||w.data.height<f[1]||f[2]<0||w.data.width<f[2]||f[3]<0||w.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))}updateImage(f,w){const O=this.images[f];if(O.data.width!==w.data.width||O.data.height!==w.data.height)throw new Error(`size mismatch between old image (${O.data.width}x${O.data.height}) and new image (${w.data.width}x${w.data.height}).`);w.version=O.version+1,this.images[f]=w,this.updatedImages[f]=!0}removeImage(f){const w=this.images[f];delete this.images[f],delete this.patterns[f],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(f,w){let O=!0;if(!this.isLoaded())for(const G of f)this.images[G]||(O=!1);this.isLoaded()||O?this._notify(f,w):this.requestors.push({ids:f,callback:w})}_notify(f,w){const O={};for(const G of f){this.images[G]||this.fire(new n.Event("styleimagemissing",{id:G}));const oe=this.images[G];oe?O[G]={data:oe.data.clone(),pixelRatio:oe.pixelRatio,sdf:oe.sdf,version:oe.version,stretchX:oe.stretchX,stretchY:oe.stretchY,content:oe.content,hasRenderCallback:Boolean(oe.userImage&&oe.userImage.render)}:n.warnOnce(`Image "${G}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}w(null,O)}getPixelSize(){const{width:f,height:w}=this.atlasImage;return{width:f,height:w}}getPattern(f){const w=this.patterns[f],O=this.getImage(f);if(!O)return null;if(w&&w.position.version===O.version)return w.position;if(w)w.position.version=O.version;else{const G={w:O.data.width+2,h:O.data.height+2,x:0,y:0},oe=new n.ImagePosition(G,O);this.patterns[f]={bin:G,position:oe}}return this._updatePatternAtlas(),this.patterns[f].position}bind(f){const w=f.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b(f,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)}_updatePatternAtlas(){const f=[];for(const oe in this.patterns)f.push(this.patterns[oe].bin);const{w,h:O}=n.potpack(f),G=this.atlasImage;G.resize({width:w||1,height:O||1});for(const oe in this.patterns){const{bin:Te}=this.patterns[oe],Be=Te.x+1,Ze=Te.y+1,qe=this.images[oe].data,ut=qe.width,_t=qe.height;n.RGBAImage.copy(qe,G,{x:0,y:0},{x:Be,y:Ze},{width:ut,height:_t}),n.RGBAImage.copy(qe,G,{x:0,y:_t-1},{x:Be,y:Ze-1},{width:ut,height:1}),n.RGBAImage.copy(qe,G,{x:0,y:0},{x:Be,y:Ze+_t},{width:ut,height:1}),n.RGBAImage.copy(qe,G,{x:ut-1,y:0},{x:Be-1,y:Ze},{width:1,height:_t}),n.RGBAImage.copy(qe,G,{x:0,y:0},{x:Be+ut,y:Ze},{width:1,height:_t})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(f){for(const w of f){if(this.callbackDispatchedThisFrame[w])continue;this.callbackDispatchedThisFrame[w]=!0;const O=this.images[w];O||n.warnOnce(`Image with ID: "${w}" was not found`),x(O)&&this.updateImage(w,O)}}}const A=1e20;function P(N,f,w,O,G,oe,Te,Be,Ze){for(let qe=f;qe<f+O;qe++)D(N,w*oe+qe,oe,G,Te,Be,Ze);for(let qe=w;qe<w+G;qe++)D(N,qe*oe+f,1,O,Te,Be,Ze)}function D(N,f,w,O,G,oe,Te){oe[0]=0,Te[0]=-A,Te[1]=A,G[0]=N[f];for(let Be=1,Ze=0,qe=0;Be<O;Be++){G[Be]=N[f+Be*w];const ut=Be*Be;do{const _t=oe[Ze];qe=(G[Be]-G[_t]+ut-_t*_t)/(Be-_t)/2}while(qe<=Te[Ze]&&--Ze>-1);Ze++,oe[Ze]=Be,Te[Ze]=qe,Te[Ze+1]=A}for(let Be=0,Ze=0;Be<O;Be++){for(;Te[Ze+1]<Be;)Ze++;const qe=oe[Ze],ut=Be-qe;N[f+Be*w]=G[qe]+ut*ut}}class R{constructor(f,w){this.requestManager=f,this.localIdeographFontFamily=w,this.entries={}}setURL(f){this.url=f}getGlyphs(f,w){const O=[];for(const G in f)for(const oe of f[G])O.push({stack:G,id:oe});n.asyncAll(O,({stack:G,id:oe},Te)=>{let Be=this.entries[G];Be||(Be=this.entries[G]={glyphs:{},requests:{},ranges:{}});let Ze=Be.glyphs[oe];if(Ze!==void 0)return void Te(null,{stack:G,id:oe,glyph:Ze});if(Ze=this._tinySDF(Be,G,oe),Ze)return Be.glyphs[oe]=Ze,void Te(null,{stack:G,id:oe,glyph:Ze});const qe=Math.floor(oe/256);if(256*qe>65535)return void Te(new Error("glyphs > 65535 not supported"));if(Be.ranges[qe])return void Te(null,{stack:G,id:oe,glyph:Ze});let ut=Be.requests[qe];ut||(ut=Be.requests[qe]=[],R.loadGlyphRange(G,qe,this.url,this.requestManager,(_t,Et)=>{if(Et){for(const jt in Et)this._doesCharSupportLocalGlyph(+jt)||(Be.glyphs[+jt]=Et[+jt]);Be.ranges[qe]=!0}for(const jt of ut)jt(_t,Et);delete Be.requests[qe]})),ut.push((_t,Et)=>{_t?Te(_t):Et&&Te(null,{stack:G,id:oe,glyph:Et[oe]||null})})},(G,oe)=>{if(G)w(G);else if(oe){const Te={};for(const{stack:Be,id:Ze,glyph:qe}of oe)(Te[Be]||(Te[Be]={}))[Ze]=qe&&{id:qe.id,bitmap:qe.bitmap.clone(),metrics:qe.metrics};w(null,Te)}})}_doesCharSupportLocalGlyph(f){return!!this.localIdeographFontFamily&&(n.unicodeBlockLookup["CJK Unified Ideographs"](f)||n.unicodeBlockLookup["Hangul Syllables"](f)||n.unicodeBlockLookup.Hiragana(f)||n.unicodeBlockLookup.Katakana(f))}_tinySDF(f,w,O){const G=this.localIdeographFontFamily;if(!G||!this._doesCharSupportLocalGlyph(O))return;let oe=f.tinySDF;if(!oe){let Be="400";/bold/i.test(w)?Be="900":/medium/i.test(w)?Be="500":/light/i.test(w)&&(Be="200"),oe=f.tinySDF=new R.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:G,fontWeight:Be})}const Te=oe.draw(String.fromCharCode(O));return{id:O,bitmap:new n.AlphaImage({width:Te.width||30,height:Te.height||30},Te.data),metrics:{width:Te.glyphWidth||24,height:Te.glyphHeight||24,left:Te.glyphLeft||0,top:Te.glyphTop-27||-8,advance:Te.glyphAdvance||24}}}}R.loadGlyphRange=function(N,f,w,O,G){const oe=256*f,Te=oe+255,Be=O.transformRequest(w.replace("{fontstack}",N).replace("{range}",`${oe}-${Te}`),n.ResourceType.Glyphs);n.getArrayBuffer(Be,(Ze,qe)=>{if(Ze)G(Ze);else if(qe){const ut={};for(const _t of n.parseGlyphPbf(qe))ut[_t.id]=_t;G(null,ut)}})},R.TinySDF=class{constructor({fontSize:N=24,buffer:f=3,radius:w=8,cutoff:O=.25,fontFamily:G="sans-serif",fontWeight:oe="normal",fontStyle:Te="normal"}={}){this.buffer=f,this.cutoff=O,this.radius=w;const Be=this.size=N+4*f,Ze=this._createCanvas(Be),qe=this.ctx=Ze.getContext("2d",{willReadFrequently:!0});qe.font=`${Te} ${oe} ${N}px ${G}`,qe.textBaseline="alphabetic",qe.textAlign="left",qe.fillStyle="black",this.gridOuter=new Float64Array(Be*Be),this.gridInner=new Float64Array(Be*Be),this.f=new Float64Array(Be),this.z=new Float64Array(Be+1),this.v=new Uint16Array(Be)}_createCanvas(N){const f=document.createElement("canvas");return f.width=f.height=N,f}draw(N){const{width:f,actualBoundingBoxAscent:w,actualBoundingBoxDescent:O,actualBoundingBoxLeft:G,actualBoundingBoxRight:oe}=this.ctx.measureText(N),Te=Math.ceil(w),Be=Math.min(this.size-this.buffer,Math.ceil(oe-G)),Ze=Math.min(this.size-this.buffer,Te+Math.ceil(O)),qe=Be+2*this.buffer,ut=Ze+2*this.buffer,_t=Math.max(qe*ut,0),Et=new Uint8ClampedArray(_t),jt={data:Et,width:qe,height:ut,glyphWidth:Be,glyphHeight:Ze,glyphTop:Te,glyphLeft:0,glyphAdvance:f};if(Be===0||Ze===0)return jt;const{ctx:Ht,buffer:Zt,gridInner:br,gridOuter:kr}=this;Ht.clearRect(Zt,Zt,Be,Ze),Ht.fillText(N,Zt,Zt+Te);const Or=Ht.getImageData(Zt,Zt,Be,Ze);kr.fill(A,0,_t),br.fill(0,0,_t);for(let Qt=0;Qt<Ze;Qt++)for(let Zr=0;Zr<Be;Zr++){const Br=Or.data[4*(Qt*Be+Zr)+3]/255;if(Br===0)continue;const Qr=(Qt+Zt)*qe+Zr+Zt;if(Br===1)kr[Qr]=0,br[Qr]=A;else{const en=.5-Br;kr[Qr]=en>0?en*en:0,br[Qr]=en<0?en*en:0}}P(kr,0,0,qe,ut,qe,this.f,this.v,this.z),P(br,Zt,Zt,Be,Ze,qe,this.f,this.v,this.z);for(let Qt=0;Qt<_t;Qt++){const Zr=Math.sqrt(kr[Qt])-Math.sqrt(br[Qt]);Et[Qt]=Math.round(255-255*(Zr/this.radius+this.cutoff))}return jt}};const S=new n.Properties({anchor:new n.DataConstantProperty(n.spec.light.anchor),position:new class{constructor(){this.specification=n.spec.light.position}possiblyEvaluate(N,f){return n.sphericalToCartesian(N.expression.evaluate(f))}interpolate(N,f,w){return{x:n.number(N.x,f.x,w),y:n.number(N.y,f.y,w),z:n.number(N.z,f.z,w)}}},color:new n.DataConstantProperty(n.spec.light.color),intensity:new n.DataConstantProperty(n.spec.light.intensity)}),I="-transition";class T extends n.Evented{constructor(f){super(),this._transitionable=new n.Transitionable(S),this.setLight(f),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(f,w={}){if(!this._validate(n.validateLight,f,w))for(const O in f){const G=f[O];O.endsWith(I)?this._transitionable.setTransition(O.slice(0,-I.length),G):this._transitionable.setValue(O,G)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,w,O){return(!O||O.validate!==!1)&&n.emitValidationErrors(this,f.call(n.validateStyle,n.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:n.spec})))}}class M{constructor(f,w){this.width=f,this.height=w,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(f,w){const O=f.join(",")+String(w);return this.dashEntry[O]||(this.dashEntry[O]=this.addDash(f,w)),this.dashEntry[O]}getDashRanges(f,w,O){const G=[];let oe=f.length%2==1?-f[f.length-1]*O:0,Te=f[0]*O,Be=!0;G.push({left:oe,right:Te,isDash:Be,zeroLength:f[0]===0});let Ze=f[0];for(let qe=1;qe<f.length;qe++){Be=!Be;const ut=f[qe];oe=Ze*O,Ze+=ut,Te=Ze*O,G.push({left:oe,right:Te,isDash:Be,zeroLength:ut===0})}return G}addRoundDash(f,w,O){const G=w/2;for(let oe=-O;oe<=O;oe++){const Te=this.width*(this.nextRow+O+oe);let Be=0,Ze=f[Be];for(let qe=0;qe<this.width;qe++){qe/Ze.right>1&&(Ze=f[++Be]);const ut=Math.abs(qe-Ze.left),_t=Math.abs(qe-Ze.right),Et=Math.min(ut,_t);let jt;const Ht=oe/O*(G+1);if(Ze.isDash){const Zt=G-Math.abs(Ht);jt=Math.sqrt(Et*Et+Zt*Zt)}else jt=G-Math.sqrt(Et*Et+Ht*Ht);this.data[Te+qe]=Math.max(0,Math.min(255,jt+128))}}}addRegularDash(f){for(let Be=f.length-1;Be>=0;--Be){const Ze=f[Be],qe=f[Be+1];Ze.zeroLength?f.splice(Be,1):qe&&qe.isDash===Ze.isDash&&(qe.left=Ze.left,f.splice(Be,1))}const w=f[0],O=f[f.length-1];w.isDash===O.isDash&&(w.left=O.left-this.width,O.right=w.right+this.width);const G=this.width*this.nextRow;let oe=0,Te=f[oe];for(let Be=0;Be<this.width;Be++){Be/Te.right>1&&(Te=f[++oe]);const Ze=Math.abs(Be-Te.left),qe=Math.abs(Be-Te.right),ut=Math.min(Ze,qe);this.data[G+Be]=Math.max(0,Math.min(255,(Te.isDash?ut:-ut)+128))}}addDash(f,w){const O=w?7:0,G=2*O+1;if(this.nextRow+G>this.height)return n.warnOnce("LineAtlas out of space"),null;let oe=0;for(let Be=0;Be<f.length;Be++)oe+=f[Be];if(oe!==0){const Be=this.width/oe,Ze=this.getDashRanges(f,this.width,Be);w?this.addRoundDash(Ze,Be,O):this.addRegularDash(Ze)}const Te={y:(this.nextRow+O+.5)/this.height,height:2*O/this.height,width:oe};return this.nextRow+=G,this.dirty=!0,Te}bind(f){const w=f.gl;this.texture?(w.bindTexture(w.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,w.texSubImage2D(w.TEXTURE_2D,0,0,0,this.width,this.height,w.ALPHA,w.UNSIGNED_BYTE,this.data))):(this.texture=w.createTexture(),w.bindTexture(w.TEXTURE_2D,this.texture),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.REPEAT),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.REPEAT),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR),w.texImage2D(w.TEXTURE_2D,0,w.ALPHA,this.width,this.height,0,w.ALPHA,w.UNSIGNED_BYTE,this.data))}}class z{constructor(f,w){this.workerPool=f,this.actors=[],this.currentActor=0,this.id=n.uniqueId();const O=this.workerPool.acquire(this.id);for(let G=0;G<O.length;G++){const oe=new z.Actor(O[G],w,this.id);oe.name=`Worker ${G}`,this.actors.push(oe)}if(!this.actors.length)throw new Error("No actors found")}broadcast(f,w,O){n.asyncAll(this.actors,(G,oe)=>{G.send(f,w,oe)},O=O||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(f=>{f.remove()}),this.actors=[],this.workerPool.release(this.id)}}function U(N,f,w){const O=function(G,oe){if(G)return w(G);if(oe){const Te=n.pick(n.extend(oe,N),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);oe.vector_layers&&(Te.vectorLayers=oe.vector_layers,Te.vectorLayerIds=Te.vectorLayers.map(Be=>Be.id)),w(null,Te)}};return N.url?n.getJSON(f.transformRequest(N.url,n.ResourceType.Source),O):n.exported.frame(()=>O(null,N))}z.Actor=n.Actor;class F{constructor(f,w,O){this.bounds=n.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=w||0,this.maxzoom=O||24}validateBounds(f){return Array.isArray(f)&&f.length===4?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]}contains(f){const w=Math.pow(2,f.z),O=Math.floor(n.mercatorXfromLng(this.bounds.getWest())*w),G=Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*w),oe=Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*w),Te=Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*w);return f.x>=O&&f.x<oe&&f.y>=G&&f.y<Te}}class V extends n.Evented{constructor(f,w,O,G){if(super(),this.id=f,this.dispatcher=O,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(w,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},w),this._collectResourceTiming=w.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(G)}load(){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,(f,w)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),f?this.fire(new n.ErrorEvent(f)):w&&(n.extend(this,w),w.bounds&&(this.tileBounds=new F(w.bounds,this.minzoom,this.maxzoom)),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}setSourceProperty(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f(),this.load()}setTiles(f){return this.setSourceProperty(()=>{this._options.tiles=f}),this}setUrl(f){return this.setSourceProperty(()=>{this.url=f,this._options.url=f}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return n.extend({},this._options)}loadTile(f,w){const O=f.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),G={request:this.map._requestManager.transformRequest(O,n.ResourceType.Tile),uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function oe(Te,Be){return delete f.request,f.aborted?w(null):Te&&Te.status!==404?w(Te):(Be&&Be.resourceTiming&&(f.resourceTiming=Be.resourceTiming),this.map._refreshExpiredTiles&&Be&&f.setExpiryData(Be),f.loadVectorData(Be,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),w(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}G.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired"?f.state==="loading"?f.reloadCallback=w:f.request=f.actor.send("reloadTile",G,oe.bind(this)):(f.actor=this.dispatcher.getActor(),f.request=f.actor.send("loadTile",G,oe.bind(this)))}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id},void 0)}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class j extends n.Evented{constructor(f,w,O,G){super(),this.id=f,this.dispatcher=O,this.setEventedParent(G),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},w),n.extend(this,n.pick(w,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,(f,w)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new n.ErrorEvent(f)):w&&(n.extend(this,w),w.bounds&&(this.tileBounds=new F(w.bounds,this.minzoom,this.maxzoom)),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(f){this.map=f,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return n.extend({},this._options)}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,w){const O=f.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);f.request=n.getImage(this.map._requestManager.transformRequest(O,n.ResourceType.Tile),(G,oe,Te)=>{if(delete f.request,f.aborted)f.state="unloaded",w(null);else if(G)f.state="errored",w(G);else if(oe){this.map._refreshExpiredTiles&&f.setExpiryData(Te);const Be=this.map.painter.context,Ze=Be.gl;f.texture=this.map.painter.getTileTexture(oe.width),f.texture?f.texture.update(oe,{useMipmap:!0}):(f.texture=new b(Be,oe,Ze.RGBA,{useMipmap:!0}),f.texture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE,Ze.LINEAR_MIPMAP_NEAREST),Be.extTextureFilterAnisotropic&&Ze.texParameterf(Ze.TEXTURE_2D,Be.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Be.extTextureFilterAnisotropicMax)),f.state="loaded",n.cacheEntryPossiblyAdded(this.dispatcher),w(null)}})}abortTile(f,w){f.request&&(f.request.cancel(),delete f.request),w()}unloadTile(f,w){f.texture&&this.map.painter.saveTileTexture(f.texture),w()}hasTransition(){return!1}}let H;class Y extends j{constructor(f,w,O,G){super(f,w,O,G),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},w),this.encoding=w.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(f,w){const O=f.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function G(oe,Te){oe&&(f.state="errored",w(oe)),Te&&(f.dem=Te,f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0,f.state="loaded",w(null))}f.request=n.getImage(this.map._requestManager.transformRequest(O,n.ResourceType.Tile),function(oe,Te){if(delete f.request,f.aborted)f.state="unloaded",w(null);else if(oe)f.state="errored",w(oe);else if(Te){this.map._refreshExpiredTiles&&f.setExpiryData(Te),delete Te.cacheControl,delete Te.expires;const Be=n.isImageBitmap(Te)&&(H==null&&(H=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H)?Te:n.exported.getImageData(Te,1),Ze={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:Be,encoding:this.encoding};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",Ze,G.bind(this)))}}.bind(this)),f.neighboringTiles=this._getNeighboringTiles(f.tileID)}_getNeighboringTiles(f){const w=f.canonical,O=Math.pow(2,w.z),G=(w.x-1+O)%O,oe=w.x===0?f.wrap-1:f.wrap,Te=(w.x+1+O)%O,Be=w.x+1===O?f.wrap+1:f.wrap,Ze={};return Ze[new n.OverscaledTileID(f.overscaledZ,oe,w.z,G,w.y).key]={backfilled:!1},Ze[new n.OverscaledTileID(f.overscaledZ,Be,w.z,Te,w.y).key]={backfilled:!1},w.y>0&&(Ze[new n.OverscaledTileID(f.overscaledZ,oe,w.z,G,w.y-1).key]={backfilled:!1},Ze[new n.OverscaledTileID(f.overscaledZ,f.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},Ze[new n.OverscaledTileID(f.overscaledZ,Be,w.z,Te,w.y-1).key]={backfilled:!1}),w.y+1<O&&(Ze[new n.OverscaledTileID(f.overscaledZ,oe,w.z,G,w.y+1).key]={backfilled:!1},Ze[new n.OverscaledTileID(f.overscaledZ,f.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},Ze[new n.OverscaledTileID(f.overscaledZ,Be,w.z,Te,w.y+1).key]={backfilled:!1}),Ze}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded",f.actor&&f.actor.send("removeDEMTile",{uid:f.uid,source:this.id})}}class J extends n.Evented{constructor(f,w,O,G){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=O.getActor(),this.setEventedParent(G),this._data=w.data,this._options=n.extend({},w),this._collectResourceTiming=w.collectResourceTiming,w.maxzoom!==void 0&&(this.maxzoom=w.maxzoom),w.type&&(this.type=w.type),w.attribution&&(this.attribution=w.attribution),this.promoteId=w.promoteId;const oe=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:w.cluster||!1,geojsonVtOptions:{buffer:(w.buffer!==void 0?w.buffer:128)*oe,tolerance:(w.tolerance!==void 0?w.tolerance:.375)*oe,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:w.lineMetrics||!1,generateId:w.generateId||!1},superclusterOptions:{maxZoom:w.clusterMaxZoom!==void 0?w.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,w.clusterMinPoints||2),extent:n.EXTENT,radius:(w.clusterRadius||50)*oe,log:!1,generateId:w.generateId||!1},clusterProperties:w.clusterProperties,filter:w.filter},w.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(f){this.map=f,this.load()}setData(f){return this._data=f,this._updateWorkerData("content"),this}getClusterExpansionZoom(f,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},w),this}getClusterChildren(f,w){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},w),this}getClusterLeaves(f,w,O,G){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:w,offset:O},G),this}_updateWorkerData(f){const w=n.extend({},this.workerOptions),O=this._data;typeof O=="string"?(w.request=this.map._requestManager.transformRequest(n.exported.resolveURL(O),n.ResourceType.Source),w.request.collectResourceTiming=this._collectResourceTiming):w.data=JSON.stringify(O),this._pendingLoads++,this.fire(new n.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,w,(G,oe)=>{if(this._pendingLoads--,this._removed||oe&&oe.abandoned)return void this.fire(new n.Event("dataabort",{dataType:"source",sourceDataType:f}));let Te=null;if(oe&&oe.resourceTiming&&oe.resourceTiming[this.id]&&(Te=oe.resourceTiming[this.id].slice(0)),G)return void this.fire(new n.ErrorEvent(G));const Be={dataType:"source",sourceDataType:f};this._collectResourceTiming&&Te&&Te.length>0&&n.extend(Be,{resourceTiming:Te}),this.fire(new n.Event("data",Be))})}loaded(){return this._pendingLoads===0}loadTile(f,w){const O=f.actor?"reloadTile":"loadTile";f.actor=this.actor;const G={type:this.type,uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request=this.actor.send(O,G,(oe,Te)=>(delete f.request,f.unloadVectorData(),f.aborted?w(null):oe?w(oe):(f.loadVectorData(Te,this.map.painter,O==="reloadTile"),w(null))))}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return n.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ne=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class q extends n.Evented{constructor(f,w,O,G){super(),this.id=f,this.dispatcher=O,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(G),this.options=w}load(f,w){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),(O,G)=>{this._loaded=!0,O?this.fire(new n.ErrorEvent(O)):G&&(this.image=G,f&&(this.coordinates=f),w&&w(),this._finishLoading())})}loaded(){return this._loaded}updateImage(f){return this.image&&f.url?(this.options.url=f.url,this.load(f.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(f){this.map=f,this.load()}setCoordinates(f){this.coordinates=f;const w=f.map(n.MercatorCoordinate.fromLngLat);this.tileID=function(G){let oe=1/0,Te=1/0,Be=-1/0,Ze=-1/0;for(const Et of G)oe=Math.min(oe,Et.x),Te=Math.min(Te,Et.y),Be=Math.max(Be,Et.x),Ze=Math.max(Ze,Et.y);const qe=Math.max(Be-oe,Ze-Te),ut=Math.max(0,Math.floor(-Math.log(qe)/Math.LN2)),_t=Math.pow(2,ut);return new n.CanonicalTileID(ut,Math.floor((oe+Be)/2*_t),Math.floor((Te+Ze)/2*_t))}(w),this.minzoom=this.maxzoom=this.tileID.z;const O=w.map(G=>this.tileID.getTilePoint(G)._round());return this._boundsArray=new n.RasterBoundsArray,this._boundsArray.emplaceBack(O[0].x,O[0].y,0,0),this._boundsArray.emplaceBack(O[1].x,O[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(O[3].x,O[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(O[2].x,O[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const f=this.map.painter.context,w=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b(f,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(const O in this.tiles){const G=this.tiles[O];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}loadTile(f,w){this.tileID&&this.tileID.equals(f.tileID.canonical)?(this.tiles[String(f.tileID.wrap)]=f,f.buckets={},w(null)):(f.state="errored",w(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class we extends q{constructor(f,w,O,G){super(f,w,O,G),this.roundZoom=!0,this.type="video",this.options=w}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const w of f.urls)this.urls.push(this.map._requestManager.transformRequest(w,n.ResourceType.Source).url);n.getVideo(this.urls,(w,O)=>{this._loaded=!0,w?this.fire(new n.ErrorEvent(w)):O&&(this.video=O,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const w=this.video.seekable;f<w.start(0)||f>w.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${w.start(0)} and ${w.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,w=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new b(f,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(const O in this.tiles){const G=this.tiles[O];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ee extends q{constructor(f,w,O,G){super(f,w,O,G),w.coordinates?Array.isArray(w.coordinates)&&w.coordinates.length===4&&!w.coordinates.some(oe=>!Array.isArray(oe)||oe.length!==2||oe.some(Te=>typeof Te!="number"))||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),w.animate&&typeof w.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),w.canvas?typeof w.canvas=="string"||w.canvas instanceof HTMLCanvasElement||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=w,this.animate=w.animate===void 0||w.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const w=this.map.painter.context,O=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b(w,this.canvas,O.RGBA,{premultiply:!0});for(const G in this.tiles){const oe=this.tiles[G];oe.state!=="loaded"&&(oe.state="loaded",oe.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}}const X={vector:V,raster:j,"raster-dem":Y,geojson:J,video:we,image:q,canvas:ee};function re(N,f){const w=n.create();return n.translate(w,w,[1,1,0]),n.scale(w,w,[.5*N.width,.5*N.height,1]),n.multiply(w,w,N.calculatePosMatrix(f.toUnwrapped()))}function de(N,f,w,O,G,oe){const Te=function(_t,Et,jt){if(_t)for(const Ht of _t){const Zt=Et[Ht];if(Zt&&Zt.source===jt&&Zt.type==="fill-extrusion")return!0}else for(const Ht in Et){const Zt=Et[Ht];if(Zt.source===jt&&Zt.type==="fill-extrusion")return!0}return!1}(G&&G.layers,f,N.id),Be=oe.maxPitchScaleFactor(),Ze=N.tilesIn(O,Be,Te);Ze.sort(me);const qe=[];for(const _t of Ze)qe.push({wrappedTileID:_t.tileID.wrapped().key,queryResults:_t.tile.queryRenderedFeatures(f,w,N._state,_t.queryGeometry,_t.cameraQueryGeometry,_t.scale,G,oe,Be,re(N.transform,_t.tileID))});const ut=function(_t){const Et={},jt={};for(const Ht of _t){const Zt=Ht.queryResults,br=Ht.wrappedTileID,kr=jt[br]=jt[br]||{};for(const Or in Zt){const Qt=Zt[Or],Zr=kr[Or]=kr[Or]||{},Br=Et[Or]=Et[Or]||[];for(const Qr of Qt)Zr[Qr.featureIndex]||(Zr[Qr.featureIndex]=!0,Br.push(Qr))}}return Et}(qe);for(const _t in ut)ut[_t].forEach(Et=>{const jt=Et.feature,Ht=N.getFeatureState(jt.layer["source-layer"],jt.id);jt.source=jt.layer.source,jt.layer["source-layer"]&&(jt.sourceLayer=jt.layer["source-layer"]),jt.state=Ht});return ut}function me(N,f){const w=N.tileID,O=f.tileID;return w.overscaledZ-O.overscaledZ||w.canonical.y-O.canonical.y||w.wrap-O.wrap||w.canonical.x-O.canonical.x}class xe{constructor(f,w){this.tileID=f,this.uid=n.uniqueId(),this.uses=0,this.tileSize=w,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(f){const w=f+this.timeAdded;w<n.exported.now()||this.fadeEndTime&&w<this.fadeEndTime||(this.fadeEndTime=w)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(f){this.demTexture&&f.saveTileTexture(this.demTexture),this.textures.forEach(w=>f.saveTileTexture(w)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(f,w,O){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",f){f.featureIndex&&(this.latestFeatureIndex=f.featureIndex,f.rawTileData?(this.latestRawTileData=f.rawTileData,this.latestFeatureIndex.rawTileData=f.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=f.collisionBoxArray,this.buckets=function(G,oe){const Te={};if(!oe)return Te;for(const Be of G){const Ze=Be.layerIds.map(qe=>oe.getLayer(qe)).filter(Boolean);if(Ze.length!==0){Be.layers=Ze,Be.stateDependentLayerIds&&(Be.stateDependentLayers=Be.stateDependentLayerIds.map(qe=>Ze.filter(ut=>ut.id===qe)[0]));for(const qe of Ze)Te[qe.id]=Be}}return Te}(f.buckets,w.style),this.hasSymbolBuckets=!1;for(const G in this.buckets){const oe=this.buckets[G];if(oe instanceof n.SymbolBucket){if(this.hasSymbolBuckets=!0,!O)break;oe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const G in this.buckets){const oe=this.buckets[G];if(oe instanceof n.SymbolBucket&&oe.hasRTLText){this.hasRTLText=!0,n.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const G in this.buckets){const oe=this.buckets[G];this.queryPadding=Math.max(this.queryPadding,w.style.getLayer(G).queryRadius(oe))}f.imageAtlas&&(this.imageAtlas=f.imageAtlas),f.glyphAtlasImage&&(this.glyphAtlasImage=f.glyphAtlasImage)}else this.collisionBoxArray=new n.CollisionBoxArray}unloadVectorData(){for(const f in this.buckets)this.buckets[f].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(f){return this.buckets[f.id]}upload(f){for(const O in this.buckets){const G=this.buckets[O];G.uploadPending()&&G.upload(f)}const w=f.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new b(f,this.imageAtlas.image,w.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new b(f,this.glyphAtlasImage,w.ALPHA),this.glyphAtlasImage=null)}prepare(f){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(f,this.imageAtlasTexture)}queryRenderedFeatures(f,w,O,G,oe,Te,Be,Ze,qe,ut){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:G,cameraQueryGeometry:oe,scale:Te,tileSize:this.tileSize,pixelPosMatrix:ut,transform:Ze,params:Be,queryPadding:this.queryPadding*qe},f,w,O):{}}querySourceFeatures(f,w){const O=this.latestFeatureIndex;if(!O||!O.rawTileData)return;const G=O.loadVTLayers(),oe=w?w.sourceLayer:"",Te=G._geojsonTileLayer||G[oe];if(!Te)return;const Be=n.createFilter(w&&w.filter),{z:Ze,x:qe,y:ut}=this.tileID.canonical,_t={z:Ze,x:qe,y:ut};for(let Et=0;Et<Te.length;Et++){const jt=Te.feature(Et);if(Be.needGeometry){const br=n.toEvaluationFeature(jt,!0);if(!Be.filter(new n.EvaluationParameters(this.tileID.overscaledZ),br,this.tileID.canonical))continue}else if(!Be.filter(new n.EvaluationParameters(this.tileID.overscaledZ),jt))continue;const Ht=O.getId(jt,oe),Zt=new n.GeoJSONFeature(jt,Ze,qe,ut,Ht);Zt.tile=_t,f.push(Zt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(f){const w=this.expirationTime;if(f.cacheControl){const O=n.parseCacheControl(f.cacheControl);O["max-age"]&&(this.expirationTime=Date.now()+1e3*O["max-age"])}else f.expires&&(this.expirationTime=new Date(f.expires).getTime());if(this.expirationTime){const O=Date.now();let G=!1;if(this.expirationTime>O)G=!1;else if(w)if(this.expirationTime<w)G=!0;else{const oe=this.expirationTime-w;oe?this.expirationTime=O+Math.max(oe,3e4):G=!0}else G=!0;G?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(f,w){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(f).length===0)return;const O=this.latestFeatureIndex.loadVTLayers();for(const G in this.buckets){if(!w.style.hasLayer(G))continue;const oe=this.buckets[G],Te=oe.layers[0].sourceLayer||"_geojsonTileLayer",Be=O[Te],Ze=f[Te];if(!Be||!Ze||Object.keys(Ze).length===0)continue;oe.update(Ze,Be,this.imageAtlas&&this.imageAtlas.patternPositions||{});const qe=w&&w.style&&w.style.getLayer(G);qe&&(this.queryPadding=Math.max(this.queryPadding,qe.queryRadius(oe)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(f){this.symbolFadeHoldUntil=n.exported.now()+f}setDependencies(f,w){const O={};for(const G of w)O[G]=!0;this.dependencies[f]=O}hasDependency(f,w){for(const O of f){const G=this.dependencies[O];if(G){for(const oe of w)if(G[oe])return!0}}return!1}}class He{constructor(f,w){this.max=f,this.onRemove=w,this.reset()}reset(){for(const f in this.data)for(const w of this.data[f])w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value);return this.data={},this.order=[],this}add(f,w,O){const G=f.wrapped().key;this.data[G]===void 0&&(this.data[G]=[]);const oe={value:w,timeout:void 0};if(O!==void 0&&(oe.timeout=setTimeout(()=>{this.remove(f,oe)},O)),this.data[G].push(oe),this.order.push(G),this.order.length>this.max){const Te=this._getAndRemoveByKey(this.order[0]);Te&&this.onRemove(Te)}return this}has(f){return f.wrapped().key in this.data}getAndRemove(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null}_getAndRemoveByKey(f){const w=this.data[f].shift();return w.timeout&&clearTimeout(w.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),w.value}getByKey(f){const w=this.data[f];return w?w[0].value:null}get(f){return this.has(f)?this.data[f.wrapped().key][0].value:null}remove(f,w){if(!this.has(f))return this;const O=f.wrapped().key,G=w===void 0?0:this.data[O].indexOf(w),oe=this.data[O][G];return this.data[O].splice(G,1),oe.timeout&&clearTimeout(oe.timeout),this.data[O].length===0&&delete this.data[O],this.onRemove(oe.value),this.order.splice(this.order.indexOf(O),1),this}setMaxSize(f){for(this.max=f;this.order.length>this.max;){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}filter(f){const w=[];for(const O in this.data)for(const G of this.data[O])f(G.value)||w.push(G);for(const O of w)this.remove(O.value.tileID,O)}}class Re{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(f,w,O){const G=String(w);if(this.stateChanges[f]=this.stateChanges[f]||{},this.stateChanges[f][G]=this.stateChanges[f][G]||{},n.extend(this.stateChanges[f][G],O),this.deletedStates[f]===null){this.deletedStates[f]={};for(const oe in this.state[f])oe!==G&&(this.deletedStates[f][oe]=null)}else if(this.deletedStates[f]&&this.deletedStates[f][G]===null){this.deletedStates[f][G]={};for(const oe in this.state[f][G])O[oe]||(this.deletedStates[f][G][oe]=null)}else for(const oe in O)this.deletedStates[f]&&this.deletedStates[f][G]&&this.deletedStates[f][G][oe]===null&&delete this.deletedStates[f][G][oe]}removeFeatureState(f,w,O){if(this.deletedStates[f]===null)return;const G=String(w);if(this.deletedStates[f]=this.deletedStates[f]||{},O&&w!==void 0)this.deletedStates[f][G]!==null&&(this.deletedStates[f][G]=this.deletedStates[f][G]||{},this.deletedStates[f][G][O]=null);else if(w!==void 0)if(this.stateChanges[f]&&this.stateChanges[f][G])for(O in this.deletedStates[f][G]={},this.stateChanges[f][G])this.deletedStates[f][G][O]=null;else this.deletedStates[f][G]=null;else this.deletedStates[f]=null}getState(f,w){const O=String(w),G=n.extend({},(this.state[f]||{})[O],(this.stateChanges[f]||{})[O]);if(this.deletedStates[f]===null)return{};if(this.deletedStates[f]){const oe=this.deletedStates[f][w];if(oe===null)return{};for(const Te in oe)delete G[Te]}return G}initializeTileState(f,w){f.setFeatureState(this.state,w)}coalesceChanges(f,w){const O={};for(const G in this.stateChanges){this.state[G]=this.state[G]||{};const oe={};for(const Te in this.stateChanges[G])this.state[G][Te]||(this.state[G][Te]={}),n.extend(this.state[G][Te],this.stateChanges[G][Te]),oe[Te]=this.state[G][Te];O[G]=oe}for(const G in this.deletedStates){this.state[G]=this.state[G]||{};const oe={};if(this.deletedStates[G]===null)for(const Te in this.state[G])oe[Te]={},this.state[G][Te]={};else for(const Te in this.deletedStates[G]){if(this.deletedStates[G][Te]===null)this.state[G][Te]={};else for(const Be of Object.keys(this.deletedStates[G][Te]))delete this.state[G][Te][Be];oe[Te]=this.state[G][Te]}O[G]=O[G]||{},n.extend(O[G],oe)}if(this.stateChanges={},this.deletedStates={},Object.keys(O).length!==0)for(const G in f)f[G].setFeatureState(O,w)}}class Ee extends n.Evented{constructor(f,w,O){super(),this.id=f,this.dispatcher=O,this.on("data",G=>{G.dataType==="source"&&G.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&G.dataType==="source"&&G.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(G,oe,Te,Be){const Ze=new X[oe.type](G,oe,Te,Be);if(Ze.id!==G)throw new Error(`Expected Source id to be ${G} instead of ${Ze.id}`);return n.bindAll(["load","abort","unload","serialize","prepare"],Ze),Ze}(f,w,O,this),this._tiles={},this._cache=new He(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Re}onAdd(f){this.map=f,this._maxTileCacheSize=f?f._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(f)}onRemove(f){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(f)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const f in this._tiles){const w=this._tiles[f];if(w.state!=="loaded"&&w.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const f=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,f&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(f,w){return this._source.loadTile(f,w)}_unloadTile(f){if(this._source.unloadTile)return this._source.unloadTile(f,()=>{})}_abortTile(f){this._source.abortTile&&this._source.abortTile(f,()=>{}),this._source.fire(new n.Event("dataabort",{tile:f,coord:f.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(f){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const w in this._tiles){const O=this._tiles[w];O.upload(f),O.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(f=>f.tileID).sort(ke).map(f=>f.key)}getRenderableIds(f){const w=[];for(const O in this._tiles)this._isIdRenderable(O,f)&&w.push(this._tiles[O]);return f?w.sort((O,G)=>{const oe=O.tileID,Te=G.tileID,Be=new n.pointGeometry(oe.canonical.x,oe.canonical.y)._rotate(this.transform.angle),Ze=new n.pointGeometry(Te.canonical.x,Te.canonical.y)._rotate(this.transform.angle);return oe.overscaledZ-Te.overscaledZ||Ze.y-Be.y||Ze.x-Be.x}).map(O=>O.tileID.key):w.map(O=>O.tileID).sort(ke).map(O=>O.key)}hasRenderableParent(f){const w=this.findLoadedParent(f,0);return!!w&&this._isIdRenderable(w.tileID.key)}_isIdRenderable(f,w){return this._tiles[f]&&this._tiles[f].hasData()&&!this._coveredTiles[f]&&(w||!this._tiles[f].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const f in this._tiles)this._tiles[f].state!=="errored"&&this._reloadTile(f,"reloading")}}_reloadTile(f,w){const O=this._tiles[f];O&&(O.state!=="loading"&&(O.state=w),this._loadTile(O,this._tileLoaded.bind(this,O,f,w)))}_tileLoaded(f,w,O,G){if(G)return f.state="errored",void(G.status!==404?this._source.fire(new n.ErrorEvent(G,{tile:f})):this.update(this.transform,this.terrain));f.timeAdded=n.exported.now(),O==="expired"&&(f.refreshedUponExpiration=!0),this._setTileReloadTimer(w,f),this.getSource().type==="raster-dem"&&f.dem&&this._backfillDEM(f),this._state.initializeTileState(f,this.map?this.map.painter:null),f.aborted||this._source.fire(new n.Event("data",{dataType:"source",tile:f,coord:f.tileID}))}_backfillDEM(f){const w=this.getRenderableIds();for(let G=0;G<w.length;G++){const oe=w[G];if(f.neighboringTiles&&f.neighboringTiles[oe]){const Te=this.getTileByID(oe);O(f,Te),O(Te,f)}}function O(G,oe){G.needsHillshadePrepare=!0,G.needsTerrainPrepare=!0;let Te=oe.tileID.canonical.x-G.tileID.canonical.x;const Be=oe.tileID.canonical.y-G.tileID.canonical.y,Ze=Math.pow(2,G.tileID.canonical.z),qe=oe.tileID.key;Te===0&&Be===0||Math.abs(Be)>1||(Math.abs(Te)>1&&(Math.abs(Te+Ze)===1?Te+=Ze:Math.abs(Te-Ze)===1&&(Te-=Ze)),oe.dem&&G.dem&&(G.dem.backfillBorder(oe.dem,Te,Be),G.neighboringTiles&&G.neighboringTiles[qe]&&(G.neighboringTiles[qe].backfilled=!0)))}}getTile(f){return this.getTileByID(f.key)}getTileByID(f){return this._tiles[f]}_retainLoadedChildren(f,w,O,G){for(const oe in this._tiles){let Te=this._tiles[oe];if(G[oe]||!Te.hasData()||Te.tileID.overscaledZ<=w||Te.tileID.overscaledZ>O)continue;let Be=Te.tileID;for(;Te&&Te.tileID.overscaledZ>w+1;){const qe=Te.tileID.scaledTo(Te.tileID.overscaledZ-1);Te=this._tiles[qe.key],Te&&Te.hasData()&&(Be=qe)}let Ze=Be;for(;Ze.overscaledZ>w;)if(Ze=Ze.scaledTo(Ze.overscaledZ-1),f[Ze.key]){G[Be.key]=Be;break}}}findLoadedParent(f,w){if(f.key in this._loadedParentTiles){const O=this._loadedParentTiles[f.key];return O&&O.tileID.overscaledZ>=w?O:null}for(let O=f.overscaledZ-1;O>=w;O--){const G=f.scaledTo(O),oe=this._getLoadedTile(G);if(oe)return oe}}_getLoadedTile(f){const w=this._tiles[f.key];return w&&w.hasData()?w:this._cache.getByKey(f.wrapped().key)}updateCacheSize(f){const w=Math.ceil(f.width/this._source.tileSize)+1,O=Math.ceil(f.height/this._source.tileSize)+1,G=Math.floor(w*O*5),oe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,G):G;this._cache.setMaxSize(oe)}handleWrapJump(f){const w=Math.round((f-(this._prevLng===void 0?f:this._prevLng))/360);if(this._prevLng=f,w){const O={};for(const G in this._tiles){const oe=this._tiles[G];oe.tileID=oe.tileID.unwrapTo(oe.tileID.wrap+w),O[oe.tileID.key]=oe}this._tiles=O;for(const G in this._timers)clearTimeout(this._timers[G]),delete this._timers[G];for(const G in this._tiles)this._setTileReloadTimer(G,this._tiles[G])}}update(f,w){if(this.transform=f,this.terrain=w,!this._sourceLoaded||this._paused)return;let O;this.updateCacheSize(f),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?O=f.getVisibleUnwrappedCoordinates(this._source.tileID).map(qe=>new n.OverscaledTileID(qe.canonical.z,qe.wrap,qe.canonical.z,qe.canonical.x,qe.canonical.y)):(O=f.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:w}),this._source.hasTile&&(O=O.filter(qe=>this._source.hasTile(qe)))):O=[];const G=f.coveringZoomLevel(this._source),oe=Math.max(G-Ee.maxOverzooming,this._source.minzoom),Te=Math.max(G+Ee.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const qe={};for(const ut of O)if(ut.canonical.z>this._source.minzoom){const _t=ut.scaledTo(ut.canonical.z-1);qe[_t.key]=_t;const Et=ut.scaledTo(Math.max(this._source.minzoom,Math.min(ut.canonical.z,5)));qe[Et.key]=Et}O=O.concat(Object.values(qe))}const Be=this._updateRetainedTiles(O,G);if($(this._source.type)){const qe={},ut={},_t=Object.keys(Be);for(const Et of _t){const jt=Be[Et],Ht=this._tiles[Et];if(!Ht||Ht.fadeEndTime&&Ht.fadeEndTime<=n.exported.now())continue;const Zt=this.findLoadedParent(jt,oe);Zt&&(this._addTile(Zt.tileID),qe[Zt.tileID.key]=Zt.tileID),ut[Et]=jt}this._retainLoadedChildren(ut,G,Te,Be);for(const Et in qe)Be[Et]||(this._coveredTiles[Et]=!0,Be[Et]=qe[Et]);if(w){const Et={},jt={};for(const Ht of O)this._tiles[Ht.key].hasData()?Et[Ht.key]=Ht:jt[Ht.key]=Ht;for(const Ht in jt){const Zt=jt[Ht].children(this._source.maxzoom);this._tiles[Zt[0].key]&&this._tiles[Zt[1].key]&&this._tiles[Zt[2].key]&&this._tiles[Zt[3].key]&&(Et[Zt[0].key]=Be[Zt[0].key]=Zt[0],Et[Zt[1].key]=Be[Zt[1].key]=Zt[1],Et[Zt[2].key]=Be[Zt[2].key]=Zt[2],Et[Zt[3].key]=Be[Zt[3].key]=Zt[3],delete jt[Ht])}for(const Ht in jt){const Zt=this.findLoadedParent(jt[Ht],this._source.minzoom);if(Zt){Et[Zt.tileID.key]=Be[Zt.tileID.key]=Zt.tileID;for(const br in Et)Et[br].isChildOf(Zt.tileID)&&delete Et[br]}}for(const Ht in this._tiles)Et[Ht]||(this._coveredTiles[Ht]=!0)}}for(const qe in Be)this._tiles[qe].clearFadeHold();const Ze=n.keysDifference(this._tiles,Be);for(const qe of Ze){const ut=this._tiles[qe];ut.hasSymbolBuckets&&!ut.holdingForFade()?ut.setHoldDuration(this.map._fadeDuration):ut.hasSymbolBuckets&&!ut.symbolFadeFinished()||this._removeTile(qe)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const f in this._tiles)this._tiles[f].holdingForFade()&&this._removeTile(f)}_updateRetainedTiles(f,w){const O={},G={},oe=Math.max(w-Ee.maxOverzooming,this._source.minzoom),Te=Math.max(w+Ee.maxUnderzooming,this._source.minzoom),Be={};for(const Ze of f){const qe=this._addTile(Ze);O[Ze.key]=Ze,qe.hasData()||w<this._source.maxzoom&&(Be[Ze.key]=Ze)}this._retainLoadedChildren(Be,w,Te,O);for(const Ze of f){let qe=this._tiles[Ze.key];if(qe.hasData())continue;if(w+1>this._source.maxzoom){const _t=Ze.children(this._source.maxzoom)[0],Et=this.getTile(_t);if(Et&&Et.hasData()){O[_t.key]=_t;continue}}else{const _t=Ze.children(this._source.maxzoom);if(O[_t[0].key]&&O[_t[1].key]&&O[_t[2].key]&&O[_t[3].key])continue}let ut=qe.wasRequested();for(let _t=Ze.overscaledZ-1;_t>=oe;--_t){const Et=Ze.scaledTo(_t);if(G[Et.key]||(G[Et.key]=!0,qe=this.getTile(Et),!qe&&ut&&(qe=this._addTile(Et)),qe&&(O[Et.key]=Et,ut=qe.wasRequested(),qe.hasData())))break}}return O}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const f in this._tiles){const w=[];let O,G=this._tiles[f].tileID;for(;G.overscaledZ>0;){if(G.key in this._loadedParentTiles){O=this._loadedParentTiles[G.key];break}w.push(G.key);const oe=G.scaledTo(G.overscaledZ-1);if(O=this._getLoadedTile(oe),O)break;G=oe}for(const oe of w)this._loadedParentTiles[oe]=O}}_addTile(f){let w=this._tiles[f.key];if(w)return w;w=this._cache.getAndRemove(f),w&&(this._setTileReloadTimer(f.key,w),w.tileID=f,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[f.key]&&(clearTimeout(this._cacheTimers[f.key]),delete this._cacheTimers[f.key],this._setTileReloadTimer(f.key,w)));const O=w;return w||(w=new xe(f,this._source.tileSize*f.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,f.key,w.state))),w.uses++,this._tiles[f.key]=w,O||this._source.fire(new n.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w}_setTileReloadTimer(f,w){f in this._timers&&(clearTimeout(this._timers[f]),delete this._timers[f]);const O=w.getExpiryTimeout();O&&(this._timers[f]=setTimeout(()=>{this._reloadTile(f,"expired"),delete this._timers[f]},O))}_removeTile(f){const w=this._tiles[f];w&&(w.uses--,delete this._tiles[f],this._timers[f]&&(clearTimeout(this._timers[f]),delete this._timers[f]),w.uses>0||(w.hasData()&&w.state!=="reloading"?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const f in this._tiles)this._removeTile(f);this._cache.reset()}tilesIn(f,w,O){const G=[],oe=this.transform;if(!oe)return G;const Te=O?oe.getCameraQueryGeometry(f):f,Be=f.map(Ht=>oe.pointCoordinate(Ht,this.terrain)),Ze=Te.map(Ht=>oe.pointCoordinate(Ht,this.terrain)),qe=this.getIds();let ut=1/0,_t=1/0,Et=-1/0,jt=-1/0;for(const Ht of Ze)ut=Math.min(ut,Ht.x),_t=Math.min(_t,Ht.y),Et=Math.max(Et,Ht.x),jt=Math.max(jt,Ht.y);for(let Ht=0;Ht<qe.length;Ht++){const Zt=this._tiles[qe[Ht]];if(Zt.holdingForFade())continue;const br=Zt.tileID,kr=Math.pow(2,oe.zoom-Zt.tileID.overscaledZ),Or=w*Zt.queryPadding*n.EXTENT/Zt.tileSize/kr,Qt=[br.getTilePoint(new n.MercatorCoordinate(ut,_t)),br.getTilePoint(new n.MercatorCoordinate(Et,jt))];if(Qt[0].x-Or<n.EXTENT&&Qt[0].y-Or<n.EXTENT&&Qt[1].x+Or>=0&&Qt[1].y+Or>=0){const Zr=Be.map(Qr=>br.getTilePoint(Qr)),Br=Ze.map(Qr=>br.getTilePoint(Qr));G.push({tile:Zt,tileID:br,queryGeometry:Zr,cameraQueryGeometry:Br,scale:kr})}}return G}getVisibleCoordinates(f){const w=this.getRenderableIds(f).map(O=>this._tiles[O].tileID);for(const O of w)O.posMatrix=this.transform.calculatePosMatrix(O.toUnwrapped());return w}hasTransition(){if(this._source.hasTransition())return!0;if($(this._source.type))for(const f in this._tiles){const w=this._tiles[f];if(w.fadeEndTime!==void 0&&w.fadeEndTime>=n.exported.now())return!0}return!1}setFeatureState(f,w,O){this._state.updateState(f=f||"_geojsonTileLayer",w,O)}removeFeatureState(f,w,O){this._state.removeFeatureState(f=f||"_geojsonTileLayer",w,O)}getFeatureState(f,w){return this._state.getState(f=f||"_geojsonTileLayer",w)}setDependencies(f,w,O){const G=this._tiles[f];G&&G.setDependencies(w,O)}reloadTilesForDependencies(f,w){for(const O in this._tiles)this._tiles[O].hasDependency(f,w)&&this._reloadTile(O,"reloading");this._cache.filter(O=>!O.hasDependency(f,w))}}function ke(N,f){const w=Math.abs(2*N.wrap)-+(N.wrap<0),O=Math.abs(2*f.wrap)-+(f.wrap<0);return N.overscaledZ-f.overscaledZ||O-w||f.canonical.y-N.canonical.y||f.canonical.x-N.canonical.x}function $(N){return N==="raster"||N==="image"||N==="video"}Ee.maxOverzooming=10,Ee.maxUnderzooming=3;const le="mapboxgl_preloaded_worker_pool";class K{constructor(){this.active={}}acquire(f){if(!this.workers)for(this.workers=[];this.workers.length<K.workerCount;)this.workers.push(new Worker(cl.workerUrl));return this.active[f]=!0,this.workers.slice()}release(f){delete this.active[f],this.numActive()===0&&(this.workers.forEach(w=>{w.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[le]}numActive(){return Object.keys(this.active).length}}const te=Math.floor(n.exported.hardwareConcurrency/2);let ie;function ce(){return ie||(ie=new K),ie}function ae(N,f){const w={};for(const O in N)O!=="ref"&&(w[O]=N[O]);return n.refProperties.forEach(O=>{O in f&&(w[O]=f[O])}),w}function ve(N){N=N.slice();const f=Object.create(null);for(let w=0;w<N.length;w++)f[N[w].id]=N[w];for(let w=0;w<N.length;w++)"ref"in N[w]&&(N[w]=ae(N[w],f[N[w].ref]));return N}K.workerCount=Math.max(Math.min(te,6),1);const pe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function he(N,f,w){w.push({command:pe.addSource,args:[N,f[N]]})}function ye(N,f,w){f.push({command:pe.removeSource,args:[N]}),w[N]=!0}function _e(N,f,w,O){ye(N,w,O),he(N,f,w)}function je(N,f,w){let O;for(O in N[w])if(Object.prototype.hasOwnProperty.call(N[w],O)&&O!=="data"&&!v(N[w][O],f[w][O]))return!1;for(O in f[w])if(Object.prototype.hasOwnProperty.call(f[w],O)&&O!=="data"&&!v(N[w][O],f[w][O]))return!1;return!0}function Je(N,f,w,O,G,oe){let Te;for(Te in f=f||{},N=N||{})Object.prototype.hasOwnProperty.call(N,Te)&&(v(N[Te],f[Te])||w.push({command:oe,args:[O,Te,f[Te],G]}));for(Te in f)Object.prototype.hasOwnProperty.call(f,Te)&&!Object.prototype.hasOwnProperty.call(N,Te)&&(v(N[Te],f[Te])||w.push({command:oe,args:[O,Te,f[Te],G]}))}function nt(N){return N.id}function at(N,f){return N[f.id]=f,N}class Fe{constructor(f,w){this.reset(f,w)}reset(f,w){this.points=f||[],this._distances=[0];for(let O=1;O<this.points.length;O++)this._distances[O]=this._distances[O-1]+this.points[O].dist(this.points[O-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(w||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(f){if(this.points.length===1)return this.points[0];f=n.clamp(f,0,1);let w=1,O=this._distances[w];const G=f*this.paddedLength+this.padding;for(;O<G&&w<this._distances.length;)O=this._distances[++w];const oe=w-1,Te=this._distances[oe],Be=O-Te,Ze=Be>0?(G-Te)/Be:0;return this.points[oe].mult(1-Ze).add(this.points[w].mult(Ze))}}function Ie(N,f){let w=!0;return N==="always"||N!=="never"&&f!=="never"||(w=!1),w}class Ke{constructor(f,w,O){const G=this.boxCells=[],oe=this.circleCells=[];this.xCellCount=Math.ceil(f/O),this.yCellCount=Math.ceil(w/O);for(let Te=0;Te<this.xCellCount*this.yCellCount;Te++)G.push([]),oe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=w,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(f,w,O,G,oe){this._forEachCell(w,O,G,oe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(w),this.bboxes.push(O),this.bboxes.push(G),this.bboxes.push(oe)}insertCircle(f,w,O,G){this._forEachCell(w-G,O-G,w+G,O+G,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(w),this.circles.push(O),this.circles.push(G)}_insertBoxCell(f,w,O,G,oe,Te){this.boxCells[oe].push(Te)}_insertCircleCell(f,w,O,G,oe,Te){this.circleCells[oe].push(Te)}_query(f,w,O,G,oe,Te,Be){if(O<0||f>this.width||G<0||w>this.height)return[];const Ze=[];if(f<=0&&w<=0&&this.width<=O&&this.height<=G){if(oe)return[{key:null,x1:f,y1:w,x2:O,y2:G}];for(let qe=0;qe<this.boxKeys.length;qe++)Ze.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(let qe=0;qe<this.circleKeys.length;qe++){const ut=this.circles[3*qe],_t=this.circles[3*qe+1],Et=this.circles[3*qe+2];Ze.push({key:this.circleKeys[qe],x1:ut-Et,y1:_t-Et,x2:ut+Et,y2:_t+Et})}}else this._forEachCell(f,w,O,G,this._queryCell,Ze,{hitTest:oe,overlapMode:Te,seenUids:{box:{},circle:{}}},Be);return Ze}query(f,w,O,G){return this._query(f,w,O,G,!1,null)}hitTest(f,w,O,G,oe,Te){return this._query(f,w,O,G,!0,oe,Te).length>0}hitTestCircle(f,w,O,G,oe){const Te=f-O,Be=f+O,Ze=w-O,qe=w+O;if(Be<0||Te>this.width||qe<0||Ze>this.height)return!1;const ut=[];return this._forEachCell(Te,Ze,Be,qe,this._queryCellCircle,ut,{hitTest:!0,overlapMode:G,circle:{x:f,y:w,radius:O},seenUids:{box:{},circle:{}}},oe),ut.length>0}_queryCell(f,w,O,G,oe,Te,Be,Ze){const{seenUids:qe,hitTest:ut,overlapMode:_t}=Be,Et=this.boxCells[oe];if(Et!==null){const Ht=this.bboxes;for(const Zt of Et)if(!qe.box[Zt]){qe.box[Zt]=!0;const br=4*Zt,kr=this.boxKeys[Zt];if(f<=Ht[br+2]&&w<=Ht[br+3]&&O>=Ht[br+0]&&G>=Ht[br+1]&&(!Ze||Ze(kr))&&(!ut||!Ie(_t,kr.overlapMode))&&(Te.push({key:kr,x1:Ht[br],y1:Ht[br+1],x2:Ht[br+2],y2:Ht[br+3]}),ut))return!0}}const jt=this.circleCells[oe];if(jt!==null){const Ht=this.circles;for(const Zt of jt)if(!qe.circle[Zt]){qe.circle[Zt]=!0;const br=3*Zt,kr=this.circleKeys[Zt];if(this._circleAndRectCollide(Ht[br],Ht[br+1],Ht[br+2],f,w,O,G)&&(!Ze||Ze(kr))&&(!ut||!Ie(_t,kr.overlapMode))){const Or=Ht[br],Qt=Ht[br+1],Zr=Ht[br+2];if(Te.push({key:kr,x1:Or-Zr,y1:Qt-Zr,x2:Or+Zr,y2:Qt+Zr}),ut)return!0}}}return!1}_queryCellCircle(f,w,O,G,oe,Te,Be,Ze){const{circle:qe,seenUids:ut,overlapMode:_t}=Be,Et=this.boxCells[oe];if(Et!==null){const Ht=this.bboxes;for(const Zt of Et)if(!ut.box[Zt]){ut.box[Zt]=!0;const br=4*Zt,kr=this.boxKeys[Zt];if(this._circleAndRectCollide(qe.x,qe.y,qe.radius,Ht[br+0],Ht[br+1],Ht[br+2],Ht[br+3])&&(!Ze||Ze(kr))&&!Ie(_t,kr.overlapMode))return Te.push(!0),!0}}const jt=this.circleCells[oe];if(jt!==null){const Ht=this.circles;for(const Zt of jt)if(!ut.circle[Zt]){ut.circle[Zt]=!0;const br=3*Zt,kr=this.circleKeys[Zt];if(this._circlesCollide(Ht[br],Ht[br+1],Ht[br+2],qe.x,qe.y,qe.radius)&&(!Ze||Ze(kr))&&!Ie(_t,kr.overlapMode))return Te.push(!0),!0}}}_forEachCell(f,w,O,G,oe,Te,Be,Ze){const qe=this._convertToXCellCoord(f),ut=this._convertToYCellCoord(w),_t=this._convertToXCellCoord(O),Et=this._convertToYCellCoord(G);for(let jt=qe;jt<=_t;jt++)for(let Ht=ut;Ht<=Et;Ht++)if(oe.call(this,f,w,O,G,this.xCellCount*Ht+jt,Te,Be,Ze))return}_convertToXCellCoord(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))}_convertToYCellCoord(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))}_circlesCollide(f,w,O,G,oe,Te){const Be=G-f,Ze=oe-w,qe=O+Te;return qe*qe>Be*Be+Ze*Ze}_circleAndRectCollide(f,w,O,G,oe,Te,Be){const Ze=(Te-G)/2,qe=Math.abs(f-(G+Ze));if(qe>Ze+O)return!1;const ut=(Be-oe)/2,_t=Math.abs(w-(oe+ut));if(_t>ut+O)return!1;if(qe<=Ze||_t<=ut)return!0;const Et=qe-Ze,jt=_t-ut;return Et*Et+jt*jt<=O*O}}function Qe(N,f,w,O,G){const oe=n.create();return f?(n.scale(oe,oe,[1/G,1/G,1]),w||n.rotateZ(oe,oe,O.angle)):n.multiply(oe,O.labelPlaneMatrix,N),oe}function it(N,f,w,O,G){if(f){const oe=n.clone(N);return n.scale(oe,oe,[G,G,1]),w||n.rotateZ(oe,oe,-O.angle),oe}return O.glCoordMatrix}function Ne(N,f,w){let O;w?(O=[N.x,N.y,w(N.x,N.y),1],n.transformMat4(O,O,f)):(O=[N.x,N.y,0,1],Wt(O,O,f));const G=O[3];return{point:new n.pointGeometry(O[0]/G,O[1]/G),signedDistanceFromCamera:G}}function ht(N,f){return .5+N/f*.5}function Tt(N,f){const w=N[0]/N[3],O=N[1]/N[3];return w>=-f[0]&&w<=f[0]&&O>=-f[1]&&O<=f[1]}function Xt(N,f,w,O,G,oe,Te,Be,Ze,qe){const ut=O?N.textSizeData:N.iconSizeData,_t=n.evaluateSizeForZoom(ut,w.transform.zoom),Et=[256/w.width*2+1,256/w.height*2+1],jt=O?N.text.dynamicLayoutVertexArray:N.icon.dynamicLayoutVertexArray;jt.clear();const Ht=N.lineVertexArray,Zt=O?N.text.placedSymbolArray:N.icon.placedSymbolArray,br=w.transform.width/w.transform.height;let kr=!1;for(let Or=0;Or<Zt.length;Or++){const Qt=Zt.get(Or);if(Qt.hidden||Qt.writingMode===n.WritingMode.vertical&&!kr){er(Qt.numGlyphs,jt);continue}let Zr;if(kr=!1,qe?(Zr=[Qt.anchorX,Qt.anchorY,qe(Qt.anchorX,Qt.anchorY),1],n.transformMat4(Zr,Zr,f)):(Zr=[Qt.anchorX,Qt.anchorY,0,1],Wt(Zr,Zr,f)),!Tt(Zr,Et)){er(Qt.numGlyphs,jt);continue}const Br=ht(w.transform.cameraToCenterDistance,Zr[3]),Qr=n.evaluateSizeForFeature(ut,_t,Qt),en=Te?Qr/Br:Qr*Br,pn=new n.pointGeometry(Qt.anchorX,Qt.anchorY),Jr=Ne(pn,G,qe).point,zn={},In=Vt(Qt,en,!1,Be,f,G,oe,N.glyphOffsetArray,Ht,jt,Jr,pn,zn,br,Ze,qe);kr=In.useVertical,(In.notEnoughRoom||kr||In.needsFlipping&&Vt(Qt,en,!0,Be,f,G,oe,N.glyphOffsetArray,Ht,jt,Jr,pn,zn,br,Ze,qe).notEnoughRoom)&&er(Qt.numGlyphs,jt)}O?N.text.dynamicLayoutVertexBuffer.updateData(jt):N.icon.dynamicLayoutVertexBuffer.updateData(jt)}function Nt(N,f,w,O,G,oe,Te,Be,Ze,qe,ut,_t,Et){const jt=Be.glyphStartIndex+Be.numGlyphs,Ht=Be.lineStartIndex,Zt=Be.lineStartIndex+Be.lineLength,br=f.getoffsetX(Be.glyphStartIndex),kr=f.getoffsetX(jt-1),Or=cr(N*br,w,O,G,oe,Te,Be.segment,Ht,Zt,Ze,qe,ut,_t,Et);if(!Or)return null;const Qt=cr(N*kr,w,O,G,oe,Te,Be.segment,Ht,Zt,Ze,qe,ut,_t,Et);return Qt?{first:Or,last:Qt}:null}function Mt(N,f,w,O){return N===n.WritingMode.horizontal&&Math.abs(w.y-f.y)>Math.abs(w.x-f.x)*O?{useVertical:!0}:(N===n.WritingMode.vertical?f.y<w.y:f.x>w.x)?{needsFlipping:!0}:null}function Vt(N,f,w,O,G,oe,Te,Be,Ze,qe,ut,_t,Et,jt,Ht,Zt){const br=f/24,kr=N.lineOffsetX*br,Or=N.lineOffsetY*br;let Qt;if(N.numGlyphs>1){const Zr=N.glyphStartIndex+N.numGlyphs,Br=N.lineStartIndex,Qr=N.lineStartIndex+N.lineLength,en=Nt(br,Be,kr,Or,w,ut,_t,N,Ze,oe,Et,Ht,Zt);if(!en)return{notEnoughRoom:!0};const pn=Ne(en.first.point,Te,Zt).point,Jr=Ne(en.last.point,Te,Zt).point;if(O&&!w){const zn=Mt(N.writingMode,pn,Jr,jt);if(zn)return zn}Qt=[en.first];for(let zn=N.glyphStartIndex+1;zn<Zr-1;zn++)Qt.push(cr(br*Be.getoffsetX(zn),kr,Or,w,ut,_t,N.segment,Br,Qr,Ze,oe,Et,Ht,Zt));Qt.push(en.last)}else{if(O&&!w){const Br=Ne(_t,G,Zt).point,Qr=N.lineStartIndex+N.segment+1,en=new n.pointGeometry(Ze.getx(Qr),Ze.gety(Qr)),pn=Ne(en,G,Zt),Jr=pn.signedDistanceFromCamera>0?pn.point:Yt(_t,en,Br,1,G,Zt),zn=Mt(N.writingMode,Br,Jr,jt);if(zn)return zn}const Zr=cr(br*Be.getoffsetX(N.glyphStartIndex),kr,Or,w,ut,_t,N.segment,N.lineStartIndex,N.lineStartIndex+N.lineLength,Ze,oe,Et,Ht,Zt);if(!Zr)return{notEnoughRoom:!0};Qt=[Zr]}for(const Zr of Qt)n.addDynamicAttributes(qe,Zr.point,Zr.angle);return{}}function Yt(N,f,w,O,G,oe){const Te=Ne(N.add(N.sub(f)._unit()),G,oe).point,Be=w.sub(Te);return w.add(Be._mult(O/Be.mag()))}function cr(N,f,w,O,G,oe,Te,Be,Ze,qe,ut,_t,Et,jt){const Ht=O?N-f:N+f;let Zt=Ht>0?1:-1,br=0;O&&(Zt*=-1,br=Math.PI),Zt<0&&(br+=Math.PI);let kr=Zt>0?Be+Te:Be+Te+1,Or=G,Qt=G,Zr=0,Br=0;const Qr=Math.abs(Ht),en=[];for(;Zr+Br<=Qr;){if(kr+=Zt,kr<Be||kr>=Ze)return null;if(Qt=Or,en.push(Or),Or=_t[kr],Or===void 0){const Vn=new n.pointGeometry(qe.getx(kr),qe.gety(kr)),ai=Ne(Vn,ut,jt);if(ai.signedDistanceFromCamera>0)Or=_t[kr]=ai.point;else{const bi=kr-Zt;Or=Yt(Zr===0?oe:new n.pointGeometry(qe.getx(bi),qe.gety(bi)),Vn,Qt,Qr-Zr+1,ut,jt)}}Zr+=Br,Br=Qt.dist(Or)}const pn=(Qr-Zr)/Br,Jr=Or.sub(Qt),zn=Jr.mult(pn)._add(Qt);zn._add(Jr._unit()._perp()._mult(w*Zt));const In=br+Math.atan2(Or.y-Qt.y,Or.x-Qt.x);return en.push(zn),{point:zn,angle:Et?In:0,path:en}}const Nr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function er(N,f){for(let w=0;w<N;w++){const O=f.length;f.resize(O+4),f.float32.set(Nr,3*O)}}function Wt(N,f,w){const O=f[0],G=f[1];return N[0]=w[0]*O+w[4]*G+w[12],N[1]=w[1]*O+w[5]*G+w[13],N[3]=w[3]*O+w[7]*G+w[15],N}const dr=100;class zr{constructor(f,w=new Ke(f.width+200,f.height+200,25),O=new Ke(f.width+200,f.height+200,25)){this.transform=f,this.grid=w,this.ignoredGrid=O,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+dr,this.screenBottomBoundary=f.height+dr,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(f,w,O,G,oe,Te){const Be=this.projectAndGetPerspectiveRatio(G,f.anchorPointX,f.anchorPointY,Te),Ze=O*Be.perspectiveRatio,qe=f.x1*Ze+Be.point.x,ut=f.y1*Ze+Be.point.y,_t=f.x2*Ze+Be.point.x,Et=f.y2*Ze+Be.point.y;return!this.isInsideGrid(qe,ut,_t,Et)||w!=="always"&&this.grid.hitTest(qe,ut,_t,Et,w,oe)||Be.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[qe,ut,_t,Et],offscreen:this.isOffscreen(qe,ut,_t,Et)}}placeCollisionCircles(f,w,O,G,oe,Te,Be,Ze,qe,ut,_t,Et,jt,Ht){const Zt=[],br=new n.pointGeometry(w.anchorX,w.anchorY),kr=Ne(br,Te,Ht),Or=ht(this.transform.cameraToCenterDistance,kr.signedDistanceFromCamera),Qt=(ut?oe/Or:oe*Or)/n.ONE_EM,Zr=Ne(br,Be,Ht).point,Br=Nt(Qt,G,w.lineOffsetX*Qt,w.lineOffsetY*Qt,!1,Zr,br,w,O,Be,{},!1,Ht);let Qr=!1,en=!1,pn=!0;if(Br){const Jr=.5*Et*Or+jt,zn=new n.pointGeometry(-100,-100),In=new n.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Vn=new Fe,ai=Br.first,bi=Br.last;let qn=[];for(let Gi=ai.path.length-1;Gi>=1;Gi--)qn.push(ai.path[Gi]);for(let Gi=1;Gi<bi.path.length;Gi++)qn.push(bi.path[Gi]);const ta=2.5*Jr;if(Ze){const Gi=qn.map(ji=>Ne(ji,Ze,Ht));qn=Gi.some(ji=>ji.signedDistanceFromCamera<=0)?[]:Gi.map(ji=>ji.point)}let ra=[];if(qn.length>0){const Gi=qn[0].clone(),ji=qn[0].clone();for(let da=1;da<qn.length;da++)Gi.x=Math.min(Gi.x,qn[da].x),Gi.y=Math.min(Gi.y,qn[da].y),ji.x=Math.max(ji.x,qn[da].x),ji.y=Math.max(ji.y,qn[da].y);ra=Gi.x>=zn.x&&ji.x<=In.x&&Gi.y>=zn.y&&ji.y<=In.y?[qn]:ji.x<zn.x||Gi.x>In.x||ji.y<zn.y||Gi.y>In.y?[]:n.clipLine([qn],zn.x,zn.y,In.x,In.y)}for(const Gi of ra){Vn.reset(Gi,.25*Jr);let ji=0;ji=Vn.length<=.5*Jr?1:Math.ceil(Vn.paddedLength/ta)+1;for(let da=0;da<ji;da++){const Ka=da/Math.max(ji-1,1),ks=Vn.lerp(Ka),Is=ks.x+dr,fl=ks.y+dr;Zt.push(Is,fl,Jr,0);const Jl=Is-Jr,Ls=fl-Jr,ka=Is+Jr,hl=fl+Jr;if(pn=pn&&this.isOffscreen(Jl,Ls,ka,hl),en=en||this.isInsideGrid(Jl,Ls,ka,hl),f!=="always"&&this.grid.hitTestCircle(Is,fl,Jr,f,_t)&&(Qr=!0,!qe))return{circles:[],offscreen:!1,collisionDetected:Qr}}}}return{circles:!qe&&Qr||!en||Or<this.perspectiveRatioCutoff?[]:Zt,offscreen:pn,collisionDetected:Qr}}queryRenderedSymbols(f){if(f.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const w=[];let O=1/0,G=1/0,oe=-1/0,Te=-1/0;for(const ut of f){const _t=new n.pointGeometry(ut.x+dr,ut.y+dr);O=Math.min(O,_t.x),G=Math.min(G,_t.y),oe=Math.max(oe,_t.x),Te=Math.max(Te,_t.y),w.push(_t)}const Be=this.grid.query(O,G,oe,Te).concat(this.ignoredGrid.query(O,G,oe,Te)),Ze={},qe={};for(const ut of Be){const _t=ut.key;if(Ze[_t.bucketInstanceId]===void 0&&(Ze[_t.bucketInstanceId]={}),Ze[_t.bucketInstanceId][_t.featureIndex])continue;const Et=[new n.pointGeometry(ut.x1,ut.y1),new n.pointGeometry(ut.x2,ut.y1),new n.pointGeometry(ut.x2,ut.y2),new n.pointGeometry(ut.x1,ut.y2)];n.polygonIntersectsPolygon(w,Et)&&(Ze[_t.bucketInstanceId][_t.featureIndex]=!0,qe[_t.bucketInstanceId]===void 0&&(qe[_t.bucketInstanceId]=[]),qe[_t.bucketInstanceId].push(_t.featureIndex))}return qe}insertCollisionBox(f,w,O,G,oe,Te){(O?this.ignoredGrid:this.grid).insert({bucketInstanceId:G,featureIndex:oe,collisionGroupID:Te,overlapMode:w},f[0],f[1],f[2],f[3])}insertCollisionCircles(f,w,O,G,oe,Te){const Be=O?this.ignoredGrid:this.grid,Ze={bucketInstanceId:G,featureIndex:oe,collisionGroupID:Te,overlapMode:w};for(let qe=0;qe<f.length;qe+=4)Be.insertCircle(Ze,f[qe],f[qe+1],f[qe+2])}projectAndGetPerspectiveRatio(f,w,O,G){let oe;return G?(oe=[w,O,G(w,O),1],n.transformMat4(oe,oe,f)):(oe=[w,O,0,1],Wt(oe,oe,f)),{point:new n.pointGeometry((oe[0]/oe[3]+1)/2*this.transform.width+dr,(-oe[1]/oe[3]+1)/2*this.transform.height+dr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/oe[3]*.5}}isOffscreen(f,w,O,G){return O<dr||f>=this.screenRightBoundary||G<dr||w>this.screenBottomBoundary}isInsideGrid(f,w,O,G){return O>=0&&f<this.gridRightBoundary&&G>=0&&w<this.gridBottomBoundary}getViewportMatrix(){const f=n.identity([]);return n.translate(f,f,[-100,-100,0]),f}}function Dr(N,f,w){return f*(n.EXTENT/(N.tileSize*Math.pow(2,w-N.tileID.overscaledZ)))}class $e{constructor(f,w,O,G){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?w:-w))):G&&O?1:0,this.placed=O}isHidden(){return this.opacity===0&&!this.placed}}class pt{constructor(f,w,O,G,oe){this.text=new $e(f?f.text:null,w,O,oe),this.icon=new $e(f?f.icon:null,w,G,oe)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class kt{constructor(f,w,O){this.text=f,this.icon=w,this.skipFade=O}}class Me{constructor(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]}}class rt{constructor(f,w,O,G,oe){this.bucketInstanceId=f,this.featureIndex=w,this.sourceLayerIndex=O,this.bucketIndex=G,this.tileID=oe}}class st{constructor(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}}get(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){const w=++this.maxGroupID;this.collisionGroups[f]={ID:w,predicate:O=>O.collisionGroupID===w}}return this.collisionGroups[f]}}function ft(N,f,w,O,G){const{horizontalAlign:oe,verticalAlign:Te}=n.getAnchorAlignment(N),Be=-(oe-.5)*f,Ze=-(Te-.5)*w,qe=n.evaluateVariableOffset(N,O);return new n.pointGeometry(Be+qe[0]*G,Ze+qe[1]*G)}function zt(N,f,w,O,G,oe){const{x1:Te,x2:Be,y1:Ze,y2:qe,anchorPointX:ut,anchorPointY:_t}=N,Et=new n.pointGeometry(f,w);return O&&Et._rotate(G?oe:-oe),{x1:Te+Et.x,y1:Ze+Et.y,x2:Be+Et.x,y2:qe+Et.y,anchorPointX:ut,anchorPointY:_t}}class Ue{constructor(f,w,O,G,oe){this.transform=f.clone(),this.terrain=w,this.collisionIndex=new zr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=O,this.retainedQueryData={},this.collisionGroups=new st(G),this.collisionCircleArrays={},this.prevPlacement=oe,oe&&(oe.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(f,w,O,G){const oe=O.getBucket(w),Te=O.latestFeatureIndex;if(!oe||!Te||w.id!==oe.layerIds[0])return;const Be=O.collisionBoxArray,Ze=oe.layers[0].layout,qe=Math.pow(2,this.transform.zoom-O.tileID.overscaledZ),ut=O.tileSize/n.EXTENT,_t=this.transform.calculatePosMatrix(O.tileID.toUnwrapped()),Et=Ze.get("text-pitch-alignment")==="map",jt=Ze.get("text-rotation-alignment")==="map",Ht=Dr(O,1,this.transform.zoom),Zt=Qe(_t,Et,jt,this.transform,Ht);let br=null;if(Et){const Or=it(_t,Et,jt,this.transform,Ht);br=n.multiply([],this.transform.labelPlaneMatrix,Or)}this.retainedQueryData[oe.bucketInstanceId]=new rt(oe.bucketInstanceId,Te,oe.sourceLayerIndex,oe.index,O.tileID);const kr={bucket:oe,layout:Ze,posMatrix:_t,textLabelPlaneMatrix:Zt,labelToScreenMatrix:br,scale:qe,textPixelRatio:ut,holdingForFade:O.holdingForFade(),collisionBoxArray:Be,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(oe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(oe.sourceID)};if(G)for(const Or of oe.sortKeyRanges){const{sortKey:Qt,symbolInstanceStart:Zr,symbolInstanceEnd:Br}=Or;f.push({sortKey:Qt,symbolInstanceStart:Zr,symbolInstanceEnd:Br,parameters:kr})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:oe.symbolInstances.length,parameters:kr})}attemptAnchorPlacement(f,w,O,G,oe,Te,Be,Ze,qe,ut,_t,Et,jt,Ht,Zt,br){const kr=[Et.textOffset0,Et.textOffset1],Or=ft(f,O,G,kr,oe),Qt=this.collisionIndex.placeCollisionBox(zt(w,Or.x,Or.y,Te,Be,this.transform.angle),_t,Ze,qe,ut.predicate,br);if((!Zt||this.collisionIndex.placeCollisionBox(zt(Zt,Or.x,Or.y,Te,Be,this.transform.angle),_t,Ze,qe,ut.predicate,br).box.length!==0)&&Qt.box.length>0){let Zr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Et.crossTileID]&&this.prevPlacement.placements[Et.crossTileID]&&this.prevPlacement.placements[Et.crossTileID].text&&(Zr=this.prevPlacement.variableOffsets[Et.crossTileID].anchor),Et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Et.crossTileID]={textOffset:kr,width:O,height:G,anchor:f,textBoxScale:oe,prevAnchor:Zr},this.markUsedJustification(jt,f,Et,Ht),jt.allowVerticalPlacement&&(this.markUsedOrientation(jt,Ht,Et),this.placedOrientations[Et.crossTileID]=Ht),{shift:Or,placedGlyphBoxes:Qt}}}placeLayerBucketPart(f,w,O){const{bucket:G,layout:oe,posMatrix:Te,textLabelPlaneMatrix:Be,labelToScreenMatrix:Ze,textPixelRatio:qe,holdingForFade:ut,collisionBoxArray:_t,partiallyEvaluatedTextSize:Et,collisionGroup:jt}=f.parameters,Ht=oe.get("text-optional"),Zt=oe.get("icon-optional"),br=n.getOverlapMode(oe,"text-overlap","text-allow-overlap"),kr=br==="always",Or=n.getOverlapMode(oe,"icon-overlap","icon-allow-overlap"),Qt=Or==="always",Zr=oe.get("text-rotation-alignment")==="map",Br=oe.get("text-pitch-alignment")==="map",Qr=oe.get("icon-text-fit")!=="none",en=oe.get("symbol-z-order")==="viewport-y",pn=kr&&(Qt||!G.hasIconData()||Zt),Jr=Qt&&(kr||!G.hasTextData()||Ht);!G.collisionArrays&&_t&&G.deserializeCollisionBoxes(_t);const zn=(In,Vn)=>{if(w[In.crossTileID])return;if(ut)return void(this.placements[In.crossTileID]=new kt(!1,!1,!1));let ai=!1,bi=!1,qn=!0,ta=null,ra={box:null,offscreen:null},Gi={box:null,offscreen:null},ji=null,da=null,Ka=null,ks=0,Is=0,fl=0;Vn.textFeatureIndex?ks=Vn.textFeatureIndex:In.useRuntimeCollisionCircles&&(ks=In.featureIndex),Vn.verticalTextFeatureIndex&&(Is=Vn.verticalTextFeatureIndex);const Jl=this.retainedQueryData[G.bucketInstanceId].tileID,Ls=this.terrain?(Ca,Ti)=>this.terrain.getElevation(Jl,Ca,Ti):null;for(const Ca of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Ti=Vn[Ca];Ti&&(Ti.elevation=Ls?Ls(Ti.anchorPointX,Ti.anchorPointY):0)}const ka=Vn.textBox;if(ka){const Ca=Qi=>{let po=n.WritingMode.horizontal;if(G.allowVerticalPlacement&&!Qi&&this.prevPlacement){const mo=this.prevPlacement.placedOrientations[In.crossTileID];mo&&(this.placedOrientations[In.crossTileID]=mo,po=mo,this.markUsedOrientation(G,po,In))}return po},Ti=(Qi,po)=>{if(G.allowVerticalPlacement&&In.numVerticalGlyphVertices>0&&Vn.verticalTextBox){for(const mo of G.writingModes)if(mo===n.WritingMode.vertical?(ra=po(),Gi=ra):ra=Qi(),ra&&ra.box&&ra.box.length)break}else ra=Qi()};if(oe.get("text-variable-anchor")){let Qi=oe.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[In.crossTileID]){const Ia=this.prevPlacement.variableOffsets[In.crossTileID];Qi.indexOf(Ia.anchor)>0&&(Qi=Qi.filter(vs=>vs!==Ia.anchor),Qi.unshift(Ia.anchor))}const po=(Ia,vs,$l)=>{const $c=Ia.x2-Ia.x1,yu=Ia.y2-Ia.y1,Hf=In.textBoxScale,Qc=Qr&&Or==="never"?vs:null;let Ql={box:[],offscreen:!1};const _u=br!=="never"?2*Qi.length:Qi.length;for(let bu=0;bu<_u;++bu){const gc=this.attemptAnchorPlacement(Qi[bu%Qi.length],Ia,$c,yu,Hf,Zr,Br,qe,Te,jt,bu>=Qi.length?br:"never",In,G,$l,Qc,Ls);if(gc&&(Ql=gc.placedGlyphBoxes,Ql&&Ql.box&&Ql.box.length)){ai=!0,ta=gc.shift;break}}return Ql};Ti(()=>po(ka,Vn.iconBox,n.WritingMode.horizontal),()=>{const Ia=Vn.verticalTextBox;return G.allowVerticalPlacement&&!(ra&&ra.box&&ra.box.length)&&In.numVerticalGlyphVertices>0&&Ia?po(Ia,Vn.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}}),ra&&(ai=ra.box,qn=ra.offscreen);const mo=Ca(ra&&ra.box);if(!ai&&this.prevPlacement){const Ia=this.prevPlacement.variableOffsets[In.crossTileID];Ia&&(this.variableOffsets[In.crossTileID]=Ia,this.markUsedJustification(G,Ia.anchor,In,mo))}}else{const Qi=(po,mo)=>{const Ia=this.collisionIndex.placeCollisionBox(po,br,qe,Te,jt.predicate,Ls);return Ia&&Ia.box&&Ia.box.length&&(this.markUsedOrientation(G,mo,In),this.placedOrientations[In.crossTileID]=mo),Ia};Ti(()=>Qi(ka,n.WritingMode.horizontal),()=>{const po=Vn.verticalTextBox;return G.allowVerticalPlacement&&In.numVerticalGlyphVertices>0&&po?Qi(po,n.WritingMode.vertical):{box:null,offscreen:null}}),Ca(ra&&ra.box&&ra.box.length)}}if(ji=ra,ai=ji&&ji.box&&ji.box.length>0,qn=ji&&ji.offscreen,In.useRuntimeCollisionCircles){const Ca=G.text.placedSymbolArray.get(In.centerJustifiedTextSymbolIndex),Ti=n.evaluateSizeForFeature(G.textSizeData,Et,Ca),Qi=oe.get("text-padding");da=this.collisionIndex.placeCollisionCircles(br,Ca,G.lineVertexArray,G.glyphOffsetArray,Ti,Te,Be,Ze,O,Br,jt.predicate,In.collisionCircleDiameter,Qi,Ls),da.circles.length&&da.collisionDetected&&!O&&n.warnOnce("Collisions detected, but collision boxes are not shown"),ai=kr||da.circles.length>0&&!da.collisionDetected,qn=qn&&da.offscreen}if(Vn.iconFeatureIndex&&(fl=Vn.iconFeatureIndex),Vn.iconBox){const Ca=Ti=>{const Qi=Qr&&ta?zt(Ti,ta.x,ta.y,Zr,Br,this.transform.angle):Ti;return this.collisionIndex.placeCollisionBox(Qi,Or,qe,Te,jt.predicate,Ls)};Gi&&Gi.box&&Gi.box.length&&Vn.verticalIconBox?(Ka=Ca(Vn.verticalIconBox),bi=Ka.box.length>0):(Ka=Ca(Vn.iconBox),bi=Ka.box.length>0),qn=qn&&Ka.offscreen}const hl=Ht||In.numHorizontalGlyphVertices===0&&In.numVerticalGlyphVertices===0,vc=Zt||In.numIconVertices===0;if(hl||vc?vc?hl||(bi=bi&&ai):ai=bi&&ai:bi=ai=bi&&ai,ai&&ji&&ji.box&&this.collisionIndex.insertCollisionBox(ji.box,br,oe.get("text-ignore-placement"),G.bucketInstanceId,Gi&&Gi.box&&Is?Is:ks,jt.ID),bi&&Ka&&this.collisionIndex.insertCollisionBox(Ka.box,Or,oe.get("icon-ignore-placement"),G.bucketInstanceId,fl,jt.ID),da&&(ai&&this.collisionIndex.insertCollisionCircles(da.circles,br,oe.get("text-ignore-placement"),G.bucketInstanceId,ks,jt.ID),O)){const Ca=G.bucketInstanceId;let Ti=this.collisionCircleArrays[Ca];Ti===void 0&&(Ti=this.collisionCircleArrays[Ca]=new Me);for(let Qi=0;Qi<da.circles.length;Qi+=4)Ti.circles.push(da.circles[Qi+0]),Ti.circles.push(da.circles[Qi+1]),Ti.circles.push(da.circles[Qi+2]),Ti.circles.push(da.collisionDetected?1:0)}if(In.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(G.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[In.crossTileID]=new kt(ai||pn,bi||Jr,qn||G.justReloaded),w[In.crossTileID]=!0};if(en){if(f.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const In=G.getSortedSymbolIndexes(this.transform.angle);for(let Vn=In.length-1;Vn>=0;--Vn){const ai=In[Vn];zn(G.symbolInstances.get(ai),G.collisionArrays[ai])}}else for(let In=f.symbolInstanceStart;In<f.symbolInstanceEnd;In++)zn(G.symbolInstances.get(In),G.collisionArrays[In]);if(O&&G.bucketInstanceId in this.collisionCircleArrays){const In=this.collisionCircleArrays[G.bucketInstanceId];n.invert(In.invProjMatrix,Te),In.viewportMatrix=this.collisionIndex.getViewportMatrix()}G.justReloaded=!1}markUsedJustification(f,w,O,G){let oe;oe=G===n.WritingMode.vertical?O.verticalPlacedTextSymbolIndex:{left:O.leftJustifiedTextSymbolIndex,center:O.centerJustifiedTextSymbolIndex,right:O.rightJustifiedTextSymbolIndex}[n.getAnchorJustification(w)];const Te=[O.leftJustifiedTextSymbolIndex,O.centerJustifiedTextSymbolIndex,O.rightJustifiedTextSymbolIndex,O.verticalPlacedTextSymbolIndex];for(const Be of Te)Be>=0&&(f.text.placedSymbolArray.get(Be).crossTileID=oe>=0&&Be!==oe?0:O.crossTileID)}markUsedOrientation(f,w,O){const G=w===n.WritingMode.horizontal||w===n.WritingMode.horizontalOnly?w:0,oe=w===n.WritingMode.vertical?w:0,Te=[O.leftJustifiedTextSymbolIndex,O.centerJustifiedTextSymbolIndex,O.rightJustifiedTextSymbolIndex];for(const Be of Te)f.text.placedSymbolArray.get(Be).placedOrientation=G;O.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(O.verticalPlacedTextSymbolIndex).placedOrientation=oe)}commit(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;const w=this.prevPlacement;let O=!1;this.prevZoomAdjustment=w?w.zoomAdjustment(this.transform.zoom):0;const G=w?w.symbolFadeChange(f):1,oe=w?w.opacities:{},Te=w?w.variableOffsets:{},Be=w?w.placedOrientations:{};for(const Ze in this.placements){const qe=this.placements[Ze],ut=oe[Ze];ut?(this.opacities[Ze]=new pt(ut,G,qe.text,qe.icon),O=O||qe.text!==ut.text.placed||qe.icon!==ut.icon.placed):(this.opacities[Ze]=new pt(null,G,qe.text,qe.icon,qe.skipFade),O=O||qe.text||qe.icon)}for(const Ze in oe){const qe=oe[Ze];if(!this.opacities[Ze]){const ut=new pt(qe,G,!1,!1);ut.isHidden()||(this.opacities[Ze]=ut,O=O||qe.text.placed||qe.icon.placed)}}for(const Ze in Te)this.variableOffsets[Ze]||!this.opacities[Ze]||this.opacities[Ze].isHidden()||(this.variableOffsets[Ze]=Te[Ze]);for(const Ze in Be)this.placedOrientations[Ze]||!this.opacities[Ze]||this.opacities[Ze].isHidden()||(this.placedOrientations[Ze]=Be[Ze]);if(w&&w.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");O?this.lastPlacementChangeTime=f:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=w?w.lastPlacementChangeTime:f)}updateLayerOpacities(f,w){const O={};for(const G of w){const oe=G.getBucket(f);oe&&G.latestFeatureIndex&&f.id===oe.layerIds[0]&&this.updateBucketOpacities(oe,O,G.collisionBoxArray)}}updateBucketOpacities(f,w,O){f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();const G=f.layers[0].layout,oe=new pt(null,0,!1,!1,!0),Te=G.get("text-allow-overlap"),Be=G.get("icon-allow-overlap"),Ze=G.get("text-variable-anchor"),qe=G.get("text-rotation-alignment")==="map",ut=G.get("text-pitch-alignment")==="map",_t=G.get("icon-text-fit")!=="none",Et=new pt(null,0,Te&&(Be||!f.hasIconData()||G.get("icon-optional")),Be&&(Te||!f.hasTextData()||G.get("text-optional")),!0);!f.collisionArrays&&O&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(O);const jt=(Ht,Zt,br)=>{for(let kr=0;kr<Zt/4;kr++)Ht.opacityVertexArray.emplaceBack(br)};for(let Ht=0;Ht<f.symbolInstances.length;Ht++){const Zt=f.symbolInstances.get(Ht),{numHorizontalGlyphVertices:br,numVerticalGlyphVertices:kr,crossTileID:Or}=Zt;let Qt=this.opacities[Or];w[Or]?Qt=oe:Qt||(Qt=Et,this.opacities[Or]=Qt),w[Or]=!0;const Zr=Zt.numIconVertices>0,Br=this.placedOrientations[Zt.crossTileID],Qr=Br===n.WritingMode.vertical,en=Br===n.WritingMode.horizontal||Br===n.WritingMode.horizontalOnly;if(br>0||kr>0){const pn=Bt(Qt.text);jt(f.text,br,Qr?ir:pn),jt(f.text,kr,en?ir:pn);const Jr=Qt.text.isHidden();[Zt.rightJustifiedTextSymbolIndex,Zt.centerJustifiedTextSymbolIndex,Zt.leftJustifiedTextSymbolIndex].forEach(Vn=>{Vn>=0&&(f.text.placedSymbolArray.get(Vn).hidden=Jr||Qr?1:0)}),Zt.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(Zt.verticalPlacedTextSymbolIndex).hidden=Jr||en?1:0);const zn=this.variableOffsets[Zt.crossTileID];zn&&this.markUsedJustification(f,zn.anchor,Zt,Br);const In=this.placedOrientations[Zt.crossTileID];In&&(this.markUsedJustification(f,"left",Zt,In),this.markUsedOrientation(f,In,Zt))}if(Zr){const pn=Bt(Qt.icon),Jr=!(_t&&Zt.verticalPlacedIconSymbolIndex&&Qr);Zt.placedIconSymbolIndex>=0&&(jt(f.icon,Zt.numIconVertices,Jr?pn:ir),f.icon.placedSymbolArray.get(Zt.placedIconSymbolIndex).hidden=Qt.icon.isHidden()),Zt.verticalPlacedIconSymbolIndex>=0&&(jt(f.icon,Zt.numVerticalIconVertices,Jr?ir:pn),f.icon.placedSymbolArray.get(Zt.verticalPlacedIconSymbolIndex).hidden=Qt.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){const pn=f.collisionArrays[Ht];if(pn){let Jr=new n.pointGeometry(0,0);if(pn.textBox||pn.verticalTextBox){let In=!0;if(Ze){const Vn=this.variableOffsets[Or];Vn?(Jr=ft(Vn.anchor,Vn.width,Vn.height,Vn.textOffset,Vn.textBoxScale),qe&&Jr._rotate(ut?this.transform.angle:-this.transform.angle)):In=!1}pn.textBox&&Ae(f.textCollisionBox.collisionVertexArray,Qt.text.placed,!In||Qr,Jr.x,Jr.y),pn.verticalTextBox&&Ae(f.textCollisionBox.collisionVertexArray,Qt.text.placed,!In||en,Jr.x,Jr.y)}const zn=Boolean(!en&&pn.verticalIconBox);pn.iconBox&&Ae(f.iconCollisionBox.collisionVertexArray,Qt.icon.placed,zn,_t?Jr.x:0,_t?Jr.y:0),pn.verticalIconBox&&Ae(f.iconCollisionBox.collisionVertexArray,Qt.icon.placed,!zn,_t?Jr.x:0,_t?Jr.y:0)}}}if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.text.opacityVertexArray.length!==f.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${f.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${f.text.layoutVertexArray.length}) / 4`);if(f.icon.opacityVertexArray.length!==f.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${f.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${f.icon.layoutVertexArray.length}) / 4`);if(f.bucketInstanceId in this.collisionCircleArrays){const Ht=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=Ht.invProjMatrix,f.placementViewportMatrix=Ht.viewportMatrix,f.collisionCircleArray=Ht.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}}symbolFadeChange(f){return this.fadeDuration===0?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(f){return Math.max(0,(this.transform.zoom-f)/1.5)}hasTransitions(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(f,w){const O=this.zoomAtLastRecencyCheck===w?1-this.zoomAdjustment(w):1;return this.zoomAtLastRecencyCheck=w,this.commitTime+this.fadeDuration*O>f}setStale(){this.stale=!0}}function Ae(N,f,w,O,G){N.emplaceBack(f?1:0,w?1:0,O||0,G||0),N.emplaceBack(f?1:0,w?1:0,O||0,G||0),N.emplaceBack(f?1:0,w?1:0,O||0,G||0),N.emplaceBack(f?1:0,w?1:0,O||0,G||0)}const Oe=Math.pow(2,25),We=Math.pow(2,24),Ve=Math.pow(2,17),lt=Math.pow(2,16),mt=Math.pow(2,9),dt=Math.pow(2,8),At=Math.pow(2,1);function Bt(N){if(N.opacity===0&&!N.placed)return 0;if(N.opacity===1&&N.placed)return 4294967295;const f=N.placed?1:0,w=Math.floor(127*N.opacity);return w*Oe+f*We+w*Ve+f*lt+w*mt+f*dt+w*At+f}const ir=0;class tr{constructor(f){this._sortAcrossTiles=f.layout.get("symbol-z-order")!=="viewport-y"&&!f.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(f,w,O,G,oe){const Te=this._bucketParts;for(;this._currentTileIndex<f.length;)if(w.getBucketParts(Te,G,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,oe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Te.sort((Be,Ze)=>Be.sortKey-Ze.sortKey));this._currentPartIndex<Te.length;)if(w.placeLayerBucketPart(Te[this._currentPartIndex],this._seenCrossTileIDs,O),this._currentPartIndex++,oe())return!0;return!1}}class vt{constructor(f,w,O,G,oe,Te,Be,Ze){this.placement=new Ue(f,w,Te,Be,Ze),this._currentPlacementIndex=O.length-1,this._forceFullPlacement=G,this._showCollisionBoxes=oe,this._done=!1}isDone(){return this._done}continuePlacement(f,w,O){const G=n.exported.now(),oe=()=>{const Te=n.exported.now()-G;return!this._forceFullPlacement&&Te>2};for(;this._currentPlacementIndex>=0;){const Te=w[f[this._currentPlacementIndex]],Be=this.placement.collisionIndex.transform.zoom;if(Te.type==="symbol"&&(!Te.minzoom||Te.minzoom<=Be)&&(!Te.maxzoom||Te.maxzoom>Be)){if(this._inProgressLayer||(this._inProgressLayer=new tr(Te)),this._inProgressLayer.continuePlacement(O[Te.source],this.placement,this._showCollisionBoxes,Te,oe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(f){return this.placement.commit(f),this.placement}}const pr=512/n.EXTENT/2;class Gt{constructor(f,w,O){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=O;for(let G=0;G<w.length;G++){const oe=w.get(G),Te=oe.key;this.indexedSymbolInstances[Te]||(this.indexedSymbolInstances[Te]=[]),this.indexedSymbolInstances[Te].push({crossTileID:oe.crossTileID,coord:this.getScaledCoordinates(oe,f)})}}getScaledCoordinates(f,w){const O=pr/Math.pow(2,w.canonical.z-this.tileID.canonical.z);return{x:Math.floor((w.canonical.x*n.EXTENT+f.anchorX)*O),y:Math.floor((w.canonical.y*n.EXTENT+f.anchorY)*O)}}findMatches(f,w,O){const G=this.tileID.canonical.z<w.canonical.z?1:Math.pow(2,this.tileID.canonical.z-w.canonical.z);for(let oe=0;oe<f.length;oe++){const Te=f.get(oe);if(Te.crossTileID)continue;const Be=this.indexedSymbolInstances[Te.key];if(!Be)continue;const Ze=this.getScaledCoordinates(Te,w);for(const qe of Be)if(Math.abs(qe.coord.x-Ze.x)<=G&&Math.abs(qe.coord.y-Ze.y)<=G&&!O[qe.crossTileID]){O[qe.crossTileID]=!0,Te.crossTileID=qe.crossTileID;break}}}}class Mr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(f){const w=Math.round((f-this.lng)/360);if(w!==0)for(const O in this.indexes){const G=this.indexes[O],oe={};for(const Te in G){const Be=G[Te];Be.tileID=Be.tileID.unwrapTo(Be.tileID.wrap+w),oe[Be.tileID.key]=Be}this.indexes[O]=oe}this.lng=f}addBucket(f,w,O){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===w.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(let oe=0;oe<w.symbolInstances.length;oe++)w.symbolInstances.get(oe).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});const G=this.usedCrossTileIDs[f.overscaledZ];for(const oe in this.indexes){const Te=this.indexes[oe];if(Number(oe)>f.overscaledZ)for(const Be in Te){const Ze=Te[Be];Ze.tileID.isChildOf(f)&&Ze.findMatches(w.symbolInstances,f,G)}else{const Be=Te[f.scaledTo(Number(oe)).key];Be&&Be.findMatches(w.symbolInstances,f,G)}}for(let oe=0;oe<w.symbolInstances.length;oe++){const Te=w.symbolInstances.get(oe);Te.crossTileID||(Te.crossTileID=O.generate(),G[Te.crossTileID]=!0)}return this.indexes[f.overscaledZ]===void 0&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new Gt(f,w.symbolInstances,w.bucketInstanceId),!0}removeBucketCrossTileIDs(f,w){for(const O in w.indexedSymbolInstances)for(const G of w.indexedSymbolInstances[O])delete this.usedCrossTileIDs[f][G.crossTileID]}removeStaleBuckets(f){let w=!1;for(const O in this.indexes){const G=this.indexes[O];for(const oe in G)f[G[oe].bucketInstanceId]||(this.removeBucketCrossTileIDs(O,G[oe]),delete G[oe],w=!0)}return w}}class Yr{constructor(){this.layerIndexes={},this.crossTileIDs=new Mr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(f,w,O){let G=this.layerIndexes[f.id];G===void 0&&(G=this.layerIndexes[f.id]=new Rr);let oe=!1;const Te={};G.handleWrapJump(O);for(const Be of w){const Ze=Be.getBucket(f);Ze&&f.id===Ze.layerIds[0]&&(Ze.bucketInstanceId||(Ze.bucketInstanceId=++this.maxBucketInstanceId),G.addBucket(Be.tileID,Ze,this.crossTileIDs)&&(oe=!0),Te[Ze.bucketInstanceId]=!0)}return G.removeStaleBuckets(Te)&&(oe=!0),oe}pruneUnusedLayers(f){const w={};f.forEach(O=>{w[O]=!0});for(const O in this.layerIndexes)w[O]||delete this.layerIndexes[O]}}var Kr=n.createLayout([{name:"a_pos",type:"Int16",components:2}]);class vr extends n.Evented{constructor(f){super(),this.sourceCache=f,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=f._cache.max,f.usedForTerrain=!0,f.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const f in this._tiles){const w=this._tiles[f];w.textures.forEach(O=>O.destroy()),w.textures=[]}}update(f,w){this.sourceCache.update(f,w),this._renderableTilesKeys=[];for(const O of f.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:w}))this._renderableTilesKeys.push(O.key),this._tiles[O.key]||(O.posMatrix=new Float64Array(16),n.ortho(O.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),this._tiles[O.key]=new xe(O,this.tileSize))}removeOutdated(f){const w={};this.renderHistory=this.renderHistory.filter((O,G)=>this.renderHistory.indexOf(O)===G).slice(0,this.renderHistorySize);for(const O of this._renderableTilesKeys)w[O]=!0;for(const O of this.renderHistory)w[O]=!0;for(const O in this._tiles)w[O]||(this._tiles[O].clearTextures(f),delete this._tiles[O])}getRenderableTiles(){return this._renderableTilesKeys.map(f=>this.getTileByID(f))}getTileByID(f){return this._tiles[f]}getTerrainCoords(f){const w={};for(const O of this._renderableTilesKeys){const G=this._tiles[O].tileID;if(G.canonical.equals(f.canonical)){const oe=f.clone();oe.posMatrix=new Float64Array(16),n.ortho(oe.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),w[O]=oe}else if(G.canonical.isChildOf(f.canonical)){const oe=f.clone();oe.posMatrix=new Float64Array(16);const Te=G.canonical.z-f.canonical.z,Be=G.canonical.x-(G.canonical.x>>Te<<Te),Ze=G.canonical.y-(G.canonical.y>>Te<<Te),qe=n.EXTENT>>Te;n.ortho(oe.posMatrix,0,qe,0,qe,0,1),n.translate(oe.posMatrix,oe.posMatrix,[-Be*qe,-Ze*qe,0]),w[O]=oe}else if(f.canonical.isChildOf(G.canonical)){const oe=f.clone();oe.posMatrix=new Float64Array(16);const Te=f.canonical.z-G.canonical.z,Be=f.canonical.x-(f.canonical.x>>Te<<Te),Ze=f.canonical.y-(f.canonical.y>>Te<<Te),qe=n.EXTENT>>Te;n.ortho(oe.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),n.translate(oe.posMatrix,oe.posMatrix,[Be*qe,Ze*qe,0]),n.scale(oe.posMatrix,oe.posMatrix,[1/2**Te,1/2**Te,0]),w[O]=oe}}return w}getSourceTile(f,w){const O=this.sourceCache._source;let G=f.overscaledZ-this.deltaZoom;if(G>O.maxzoom&&(G=O.maxzoom),G<O.minzoom)return null;this._sourceTileCache[f.key]||(this._sourceTileCache[f.key]=f.scaledTo(G).key);let oe=this.sourceCache.getTileByID(this._sourceTileCache[f.key]);if((!oe||!oe.dem)&&w)for(;G>=O.minzoom&&(!oe||!oe.dem);)oe=this.sourceCache.getTileByID(f.scaledTo(G--).key);return oe}tilesAfterTime(f=Date.now()){return Object.values(this._tiles).filter(w=>w.timeLoaded>=f)}}class Xr{constructor(f,w,O){this.style=f,this.sourceCache=new vr(w),this.options=O,this.exaggeration=typeof O.exaggeration=="number"?O.exaggeration:1,this.elevationOffset=typeof O.elevationOffset=="number"?O.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(f,w,O,G=n.EXTENT){if(!(w>=0&&w<G&&O>=0&&O<G))return this.elevationOffset;let oe=0;const Te=this.getTerrainData(f);if(Te.tile&&Te.tile.dem){const Be=n.transformMat4$1([],[w/G*n.EXTENT,O/G*n.EXTENT],Te.u_terrain_matrix),Ze=[Be[0]*Te.tile.dem.dim,Be[1]*Te.tile.dem.dim],qe=[Math.floor(Ze[0]),Math.floor(Ze[1])],ut=Te.tile.dem.get(qe[0],qe[1]),_t=Te.tile.dem.get(qe[0],qe[1]+1),Et=Te.tile.dem.get(qe[0]+1,qe[1]),jt=Te.tile.dem.get(qe[0]+1,qe[1]+1);oe=n.number(n.number(ut,_t,Ze[0]-qe[0]),n.number(Et,jt,Ze[0]-qe[0]),Ze[1]-qe[1])}return oe}rememberForRerender(f,w){for(const O in this.sourceCache._tiles){const G=this.sourceCache._tiles[O];(G.tileID.equals(w)||G.tileID.isChildOf(w))&&(f===this.sourceCache.sourceCache.id&&(G.timeLoaded=Date.now()),this._rerender[f]=this._rerender[f]||{},this._rerender[f][G.tileID.key]=!0)}}needsRerender(f,w){return this._rerender[f]&&this._rerender[f][w.key]}clearRerenderCache(){this._rerender={}}getElevation(f,w,O,G=n.EXTENT){return(this.getDEMElevation(f,w,O,G)+this.elevationOffset)*this.exaggeration}getTerrainData(f){if(!this._emptyDemTexture){const G=this.style.map.painter.context,oe=new n.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new b(G,oe,G.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new b(G,new n.RGBAImage({width:1,height:1}),G.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(G.gl.NEAREST,G.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=n.identity([])}const w=this.sourceCache.getSourceTile(f,!0);if(w&&w.dem&&(!w.demTexture||w.needsTerrainPrepare)){const G=this.style.map.painter.context;w.demTexture=this.style.map.painter.getTileTexture(w.dem.stride),w.demTexture?w.demTexture.update(w.dem.getPixels(),{premultiply:!1}):w.demTexture=new b(G,w.dem.getPixels(),G.gl.RGBA,{premultiply:!1}),w.demTexture.bind(G.gl.NEAREST,G.gl.CLAMP_TO_EDGE),w.needsTerrainPrepare=!1}const O=w&&w+w.tileID.key+f.key;if(O&&!this._demMatrixCache[O]){const G=this.sourceCache.sourceCache._source.maxzoom;let oe=f.canonical.z-w.tileID.canonical.z;f.overscaledZ>f.canonical.z&&(f.canonical.z>=G?oe=f.canonical.z-G:n.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const Te=f.canonical.x-(f.canonical.x>>oe<<oe),Be=f.canonical.y-(f.canonical.y>>oe<<oe),Ze=n.fromScaling(new Float64Array(16),[1/(n.EXTENT<<oe),1/(n.EXTENT<<oe),0]);n.translate(Ze,Ze,[Te*n.EXTENT,Be*n.EXTENT,0]),this._demMatrixCache[f.key]={matrix:Ze,coord:f}}return{u_depth:2,u_terrain:3,u_terrain_dim:w&&w.dem&&w.dem.dim||1,u_terrain_matrix:O?this._demMatrixCache[f.key].matrix:this._emptyDemMatrix,u_terrain_unpack:w&&w.dem&&w.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(w&&w.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:w}}getRTTFramebuffer(){const f=this.style.map.painter;if(!this._rttFramebuffer){const w=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=f.context.createFramebuffer(w,w,!0),this._rttFramebuffer.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,w,w))}return this._rttFramebuffer}getFramebuffer(f){const w=this.style.map.painter,O=w.width/devicePixelRatio,G=w.height/devicePixelRatio;return!this._fbo||this._fbo.width===O&&this._fbo.height===G||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new b(w.context,{width:O,height:G,data:null},w.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(w.context.gl.NEAREST,w.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new b(w.context,{width:O,height:G,data:null},w.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(w.context.gl.NEAREST,w.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=w.context.createFramebuffer(O,G,!0),this._fbo.depthAttachment.set(w.context.createRenderbuffer(w.context.gl.DEPTH_COMPONENT16,O,G))),this._fbo.colorAttachment.set(f==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const f=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const w=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let oe=0,Te=0;oe<this._coordsTextureSize;oe++)for(let Be=0;Be<this._coordsTextureSize;Be++,Te+=4)w[Te+0]=255&Be,w[Te+1]=255&oe,w[Te+2]=Be>>8<<4|oe>>8,w[Te+3]=0;const O=new n.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(w.buffer)),G=new b(f,O,f.gl.RGBA,{premultiply:!1});return G.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._coordsTexture=G,G}pointCoordinate(f){const w=new Uint8Array(4),O=this.style.map.painter,G=O.context,oe=G.gl;G.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),oe.readPixels(f.x,O.height/devicePixelRatio-f.y-1,1,1,oe.RGBA,oe.UNSIGNED_BYTE,w),G.bindFramebuffer.set(null);const Te=w[0]+(w[2]>>4<<8),Be=w[1]+((15&w[2])<<8),Ze=this.coordsIndex[255-w[3]],qe=Ze&&this.sourceCache.getTileByID(Ze);if(!qe)return null;const ut=this._coordsTextureSize,_t=(1<<qe.tileID.canonical.z)*ut;return new n.MercatorCoordinate((qe.tileID.canonical.x*ut+Te)/_t,(qe.tileID.canonical.y*ut+Be)/_t,this.getElevation(qe.tileID,Te,Be,ut))}getTerrainMesh(){if(this._mesh)return this._mesh;const f=this.style.map.painter.context,w=new n.PosArray,O=new n.TriangleIndexArray,G=this.meshSize,oe=n.EXTENT/G,Te=G*G;for(let Be=0;Be<=G;Be++)for(let Ze=0;Ze<=G;Ze++)w.emplaceBack(Ze*oe,Be*oe);for(let Be=0;Be<Te;Be+=G+1)for(let Ze=0;Ze<G;Ze++)O.emplaceBack(Ze+Be,G+Ze+Be+1,G+Ze+Be+2),O.emplaceBack(Ze+Be,G+Ze+Be+2,Ze+Be+1);return this._mesh={indexBuffer:f.createIndexBuffer(O),vertexBuffer:f.createVertexBuffer(w,Kr.members),segments:n.SegmentVector.simpleSegment(0,0,w.length,O.length)},this._mesh}getMinMaxElevation(f){const w=this.getTerrainData(f).tile,O={minElevation:null,maxElevation:null};return w&&w.dem&&(O.minElevation=(w.dem.min+this.elevationOffset)*this.exaggeration,O.maxElevation=(w.dem.max+this.elevationOffset)*this.exaggeration),O}}const $r=(N,f)=>n.emitValidationErrors(N,f&&f.filter(w=>w.identifier!=="source.canvas")),Le=n.pick(pe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),De=n.pick(pe,["setCenter","setZoom","setBearing","setPitch"]),bt=function(){const N={},f=n.spec.$version;for(const w in n.spec.$root){const O=n.spec.$root[w];if(O.required){let G=null;G=w==="version"?f:O.type==="array"?[]:{},G!=null&&(N[w]=G)}}return N}();class xt extends n.Evented{constructor(f,w={}){super(),this.map=f,this.dispatcher=new z(ce(),this),this.imageManager=new E,this.imageManager.setEventedParent(this),this.glyphManager=new R(f._requestManager,w.localIdeographFontFamily),this.lineAtlas=new M(256,512),this.crossTileSymbolIndex=new Yr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());const O=this;this._rtlTextPluginCallback=xt.registerForPluginStateChange(G=>{O.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:G.pluginStatus,pluginURL:G.pluginURL},(oe,Te)=>{if(n.triggerPluginCompletionEvent(oe),Te&&Te.every(Be=>Be))for(const Be in O.sourceCaches)O.sourceCaches[Be].reload()})}),this.on("data",G=>{if(G.dataType!=="source"||G.sourceDataType!=="metadata")return;const oe=this.sourceCaches[G.sourceId];if(!oe)return;const Te=oe.getSource();if(Te&&Te.vectorLayerIds)for(const Be in this._layers){const Ze=this._layers[Be];Ze.source===Te.id&&this._validateLayer(Ze)}})}loadURL(f,w={}){this.fire(new n.Event("dataloading",{dataType:"style"}));const O=typeof w.validate!="boolean"||w.validate,G=this.map._requestManager.transformRequest(f,n.ResourceType.Style);this._request=n.getJSON(G,(oe,Te)=>{this._request=null,oe?this.fire(new n.ErrorEvent(oe)):Te&&this._load(Te,O)})}loadJSON(f,w={}){this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.exported.frame(()=>{this._request=null,this._load(f,w.validate!==!1)})}loadEmpty(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(bt,!1)}_load(f,w){if(w&&$r(this,n.validateStyle(f)))return;this._loaded=!0,this.stylesheet=f;for(const G in f.sources)this.addSource(G,f.sources[G],{validate:!1});f.sprite?this._loadSprite(f.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(f.glyphs);const O=ve(this.stylesheet.layers);this._order=O.map(G=>G.id),this._layers={},this._serializedLayers={};for(let G of O)G=n.createStyleLayer(G),G.setEventedParent(this,{layer:{id:G.id}}),this._layers[G.id]=G,this._serializedLayers[G.id]=G.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new T(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}_loadSprite(f){this._spriteRequest=function(w,O,G,oe){let Te,Be,Ze;const qe=G>1?"@2x":"";let ut=n.getJSON(O.transformRequest(O.normalizeSpriteURL(w,qe,".json"),n.ResourceType.SpriteJSON),(jt,Ht)=>{ut=null,Ze||(Ze=jt,Te=Ht,Et())}),_t=n.getImage(O.transformRequest(O.normalizeSpriteURL(w,qe,".png"),n.ResourceType.SpriteImage),(jt,Ht)=>{_t=null,Ze||(Ze=jt,Be=Ht,Et())});function Et(){if(Ze)oe(Ze);else if(Te&&Be){const jt=n.exported.getImageData(Be),Ht={};for(const Zt in Te){const{width:br,height:kr,x:Or,y:Qt,sdf:Zr,pixelRatio:Br,stretchX:Qr,stretchY:en,content:pn}=Te[Zt],Jr=new n.RGBAImage({width:br,height:kr});n.RGBAImage.copy(jt,Jr,{x:Or,y:Qt},{x:0,y:0},{width:br,height:kr}),Ht[Zt]={data:Jr,pixelRatio:Br,sdf:Zr,stretchX:Qr,stretchY:en,content:pn}}oe(null,Ht)}}return{cancel(){ut&&(ut.cancel(),ut=null),_t&&(_t.cancel(),_t=null)}}}(f,this.map._requestManager,this.map.getPixelRatio(),(w,O)=>{if(this._spriteRequest=null,w)this.fire(new n.ErrorEvent(w));else if(O)for(const G in O)this.imageManager.addImage(G,O[G]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))})}_validateLayer(f){const w=this.sourceCaches[f.source];if(!w)return;const O=f.sourceLayer;if(!O)return;const G=w.getSource();(G.type==="geojson"||G.vectorLayerIds&&G.vectorLayerIds.indexOf(O)===-1)&&this.fire(new n.ErrorEvent(new Error(`Source layer "${O}" does not exist on source "${G.id}" as specified by style layer "${f.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const f in this.sourceCaches)if(!this.sourceCaches[f].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(f){const w=[];for(const O of f){const G=this._layers[O];G.type!=="custom"&&w.push(G.serialize())}return w}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const f in this.sourceCaches)if(this.sourceCaches[f].hasTransition())return!0;for(const f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(f){if(!this._loaded)return;const w=this._changed;if(this._changed){const G=Object.keys(this._updatedLayers),oe=Object.keys(this._removedLayers);(G.length||oe.length)&&this._updateWorkerLayers(G,oe);for(const Te in this._updatedSources){const Be=this._updatedSources[Te];if(Be==="reload")this._reloadSource(Te);else{if(Be!=="clear")throw new Error(`Invalid action ${Be}`);this._clearSource(Te)}}this._updateTilesForChangedImages();for(const Te in this._updatedPaintProps)this._layers[Te].updateTransitions(f);this.light.updateTransitions(f),this._resetUpdates()}const O={};for(const G in this.sourceCaches){const oe=this.sourceCaches[G];O[G]=oe.used,oe.used=!1}for(const G of this._order){const oe=this._layers[G];oe.recalculate(f,this._availableImages),!oe.isHidden(f.zoom)&&oe.source&&(this.sourceCaches[oe.source].used=!0)}for(const G in O){const oe=this.sourceCaches[G];O[G]!==oe.used&&oe.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:G}))}this.light.recalculate(f),this.z=f.zoom,w&&this.fire(new n.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const f=Object.keys(this._changedImages);if(f.length){for(const w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],f);this._changedImages={}}}_updateWorkerLayers(f,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(f),removedIds:w})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(f){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),f){const w=this.sourceCaches[f.source];if(!w)throw new Error(`cannot load terrain, because there exists no source with ID: ${f.source}`);this.terrain=new Xr(this,w,f),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=O=>{O.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=O=>{O.tile&&(O.sourceId===f.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(O.sourceId,O.tile.tileID)):O.source.type==="geojson"&&this.terrain.rememberForRerender(O.sourceId,O.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new n.Event("terrain",{terrain:f}))}setState(f){if(this._checkLoaded(),$r(this,n.validateStyle(f)))return!1;(f=n.clone$1(f)).layers=ve(f.layers);const w=function(G,oe){if(!G)return[{command:pe.setStyle,args:[oe]}];let Te=[];try{if(!v(G.version,oe.version))return[{command:pe.setStyle,args:[oe]}];v(G.center,oe.center)||Te.push({command:pe.setCenter,args:[oe.center]}),v(G.zoom,oe.zoom)||Te.push({command:pe.setZoom,args:[oe.zoom]}),v(G.bearing,oe.bearing)||Te.push({command:pe.setBearing,args:[oe.bearing]}),v(G.pitch,oe.pitch)||Te.push({command:pe.setPitch,args:[oe.pitch]}),v(G.sprite,oe.sprite)||Te.push({command:pe.setSprite,args:[oe.sprite]}),v(G.glyphs,oe.glyphs)||Te.push({command:pe.setGlyphs,args:[oe.glyphs]}),v(G.transition,oe.transition)||Te.push({command:pe.setTransition,args:[oe.transition]}),v(G.light,oe.light)||Te.push({command:pe.setLight,args:[oe.light]});const Be={},Ze=[];(function(ut,_t,Et,jt){let Ht;for(Ht in _t=_t||{},ut=ut||{})Object.prototype.hasOwnProperty.call(ut,Ht)&&(Object.prototype.hasOwnProperty.call(_t,Ht)||ye(Ht,Et,jt));for(Ht in _t)Object.prototype.hasOwnProperty.call(_t,Ht)&&(Object.prototype.hasOwnProperty.call(ut,Ht)?v(ut[Ht],_t[Ht])||(ut[Ht].type==="geojson"&&_t[Ht].type==="geojson"&&je(ut,_t,Ht)?Et.push({command:pe.setGeoJSONSourceData,args:[Ht,_t[Ht].data]}):_e(Ht,_t,Et,jt)):he(Ht,_t,Et))})(G.sources,oe.sources,Ze,Be);const qe=[];G.layers&&G.layers.forEach(ut=>{Be[ut.source]?Te.push({command:pe.removeLayer,args:[ut.id]}):qe.push(ut)}),Te=Te.concat(Ze),function(ut,_t,Et){_t=_t||[];const jt=(ut=ut||[]).map(nt),Ht=_t.map(nt),Zt=ut.reduce(at,{}),br=_t.reduce(at,{}),kr=jt.slice(),Or=Object.create(null);let Qt,Zr,Br,Qr,en,pn,Jr;for(Qt=0,Zr=0;Qt<jt.length;Qt++)Br=jt[Qt],Object.prototype.hasOwnProperty.call(br,Br)?Zr++:(Et.push({command:pe.removeLayer,args:[Br]}),kr.splice(kr.indexOf(Br,Zr),1));for(Qt=0,Zr=0;Qt<Ht.length;Qt++)Br=Ht[Ht.length-1-Qt],kr[kr.length-1-Qt]!==Br&&(Object.prototype.hasOwnProperty.call(Zt,Br)?(Et.push({command:pe.removeLayer,args:[Br]}),kr.splice(kr.lastIndexOf(Br,kr.length-Zr),1)):Zr++,pn=kr[kr.length-Qt],Et.push({command:pe.addLayer,args:[br[Br],pn]}),kr.splice(kr.length-Qt,0,Br),Or[Br]=!0);for(Qt=0;Qt<Ht.length;Qt++)if(Br=Ht[Qt],Qr=Zt[Br],en=br[Br],!Or[Br]&&!v(Qr,en))if(v(Qr.source,en.source)&&v(Qr["source-layer"],en["source-layer"])&&v(Qr.type,en.type)){for(Jr in Je(Qr.layout,en.layout,Et,Br,null,pe.setLayoutProperty),Je(Qr.paint,en.paint,Et,Br,null,pe.setPaintProperty),v(Qr.filter,en.filter)||Et.push({command:pe.setFilter,args:[Br,en.filter]}),v(Qr.minzoom,en.minzoom)&&v(Qr.maxzoom,en.maxzoom)||Et.push({command:pe.setLayerZoomRange,args:[Br,en.minzoom,en.maxzoom]}),Qr)Object.prototype.hasOwnProperty.call(Qr,Jr)&&Jr!=="layout"&&Jr!=="paint"&&Jr!=="filter"&&Jr!=="metadata"&&Jr!=="minzoom"&&Jr!=="maxzoom"&&(Jr.indexOf("paint.")===0?Je(Qr[Jr],en[Jr],Et,Br,Jr.slice(6),pe.setPaintProperty):v(Qr[Jr],en[Jr])||Et.push({command:pe.setLayerProperty,args:[Br,Jr,en[Jr]]}));for(Jr in en)Object.prototype.hasOwnProperty.call(en,Jr)&&!Object.prototype.hasOwnProperty.call(Qr,Jr)&&Jr!=="layout"&&Jr!=="paint"&&Jr!=="filter"&&Jr!=="metadata"&&Jr!=="minzoom"&&Jr!=="maxzoom"&&(Jr.indexOf("paint.")===0?Je(Qr[Jr],en[Jr],Et,Br,Jr.slice(6),pe.setPaintProperty):v(Qr[Jr],en[Jr])||Et.push({command:pe.setLayerProperty,args:[Br,Jr,en[Jr]]}))}else Et.push({command:pe.removeLayer,args:[Br]}),pn=kr[kr.lastIndexOf(Br)+1],Et.push({command:pe.addLayer,args:[en,pn]})}(qe,oe.layers,Te)}catch(Be){console.warn("Unable to compute style diff:",Be),Te=[{command:pe.setStyle,args:[oe]}]}return Te}(this.serialize(),f).filter(G=>!(G.command in De));if(w.length===0)return!1;const O=w.filter(G=>!(G.command in Le));if(O.length>0)throw new Error(`Unimplemented: ${O.map(G=>G.command).join(", ")}.`);return w.forEach(G=>{G.command!=="setTransition"&&this[G.command].apply(this,G.args)}),this.stylesheet=f,!0}addImage(f,w){if(this.getImage(f))return this.fire(new n.ErrorEvent(new Error(`An image named "${f}" already exists.`)));this.imageManager.addImage(f,w),this._afterImageUpdated(f)}updateImage(f,w){this.imageManager.updateImage(f,w)}getImage(f){return this.imageManager.getImage(f)}removeImage(f){if(!this.getImage(f))return this.fire(new n.ErrorEvent(new Error(`An image named "${f}" does not exist.`)));this.imageManager.removeImage(f),this._afterImageUpdated(f)}_afterImageUpdated(f){this._availableImages=this.imageManager.listImages(),this._changedImages[f]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(f,w,O={}){if(this._checkLoaded(),this.sourceCaches[f]!==void 0)throw new Error(`Source "${f}" already exists.`);if(!w.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(w).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(n.validateStyle.source,`sources.${f}`,w,null,O))return;this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);const G=this.sourceCaches[f]=new Ee(f,w,this.dispatcher);G.style=this,G.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:G.serialize(),sourceId:f})),G.onAdd(this.map),this._changed=!0}removeSource(f){if(this._checkLoaded(),this.sourceCaches[f]===void 0)throw new Error("There is no source with this ID");for(const O in this._layers)if(this._layers[O].source===f)return this.fire(new n.ErrorEvent(new Error(`Source "${f}" cannot be removed while layer "${O}" is using it.`)));const w=this.sourceCaches[f];delete this.sourceCaches[f],delete this._updatedSources[f],w.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:f})),w.setEventedParent(null),w.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(f,w){if(this._checkLoaded(),this.sourceCaches[f]===void 0)throw new Error(`There is no source with this ID=${f}`);const O=this.sourceCaches[f].getSource();if(O.type!=="geojson")throw new Error(`geojsonSource.type is ${O.type}, which is !== 'geojson`);O.setData(w),this._changed=!0}getSource(f){return this.sourceCaches[f]&&this.sourceCaches[f].getSource()}addLayer(f,w,O={}){this._checkLoaded();const G=f.id;if(this.getLayer(G))return void this.fire(new n.ErrorEvent(new Error(`Layer "${G}" already exists on this map.`)));let oe;if(f.type==="custom"){if($r(this,n.validateCustomStyleLayer(f)))return;oe=n.createStyleLayer(f)}else{if(typeof f.source=="object"&&(this.addSource(G,f.source),f=n.clone$1(f),f=n.extend(f,{source:G})),this._validate(n.validateStyle.layer,`layers.${G}`,f,{arrayIndex:-1},O))return;oe=n.createStyleLayer(f),this._validateLayer(oe),oe.setEventedParent(this,{layer:{id:G}}),this._serializedLayers[oe.id]=oe.serialize()}const Te=w?this._order.indexOf(w):this._order.length;if(w&&Te===-1)this.fire(new n.ErrorEvent(new Error(`Cannot add layer "${G}" before non-existing layer "${w}".`)));else{if(this._order.splice(Te,0,G),this._layerOrderChanged=!0,this._layers[G]=oe,this._removedLayers[G]&&oe.source&&oe.type!=="custom"){const Be=this._removedLayers[G];delete this._removedLayers[G],Be.type!==oe.type?this._updatedSources[oe.source]="clear":(this._updatedSources[oe.source]="reload",this.sourceCaches[oe.source].pause())}this._updateLayer(oe),oe.onAdd&&oe.onAdd(this.map)}}moveLayer(f,w){if(this._checkLoaded(),this._changed=!0,!this._layers[f])return void this.fire(new n.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be moved.`)));if(f===w)return;const O=this._order.indexOf(f);this._order.splice(O,1);const G=w?this._order.indexOf(w):this._order.length;w&&G===-1?this.fire(new n.ErrorEvent(new Error(`Cannot move layer "${f}" before non-existing layer "${w}".`))):(this._order.splice(G,0,f),this._layerOrderChanged=!0)}removeLayer(f){this._checkLoaded();const w=this._layers[f];if(!w)return void this.fire(new n.ErrorEvent(new Error(`Cannot remove non-existing layer "${f}".`)));w.setEventedParent(null);const O=this._order.indexOf(f);this._order.splice(O,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[f]=w,delete this._layers[f],delete this._serializedLayers[f],delete this._updatedLayers[f],delete this._updatedPaintProps[f],w.onRemove&&w.onRemove(this.map)}getLayer(f){return this._layers[f]}hasLayer(f){return f in this._layers}setLayerZoomRange(f,w,O){this._checkLoaded();const G=this.getLayer(f);G?G.minzoom===w&&G.maxzoom===O||(w!=null&&(G.minzoom=w),O!=null&&(G.maxzoom=O),this._updateLayer(G)):this.fire(new n.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${f}".`)))}setFilter(f,w,O={}){this._checkLoaded();const G=this.getLayer(f);if(G){if(!v(G.filter,w))return w==null?(G.filter=void 0,void this._updateLayer(G)):void(this._validate(n.validateStyle.filter,`layers.${G.id}.filter`,w,null,O)||(G.filter=n.clone$1(w),this._updateLayer(G)))}else this.fire(new n.ErrorEvent(new Error(`Cannot filter non-existing layer "${f}".`)))}getFilter(f){return n.clone$1(this.getLayer(f).filter)}setLayoutProperty(f,w,O,G={}){this._checkLoaded();const oe=this.getLayer(f);oe?v(oe.getLayoutProperty(w),O)||(oe.setLayoutProperty(w,O,G),this._updateLayer(oe)):this.fire(new n.ErrorEvent(new Error(`Cannot style non-existing layer "${f}".`)))}getLayoutProperty(f,w){const O=this.getLayer(f);if(O)return O.getLayoutProperty(w);this.fire(new n.ErrorEvent(new Error(`Cannot get style of non-existing layer "${f}".`)))}setPaintProperty(f,w,O,G={}){this._checkLoaded();const oe=this.getLayer(f);oe?v(oe.getPaintProperty(w),O)||(oe.setPaintProperty(w,O,G)&&this._updateLayer(oe),this._changed=!0,this._updatedPaintProps[f]=!0):this.fire(new n.ErrorEvent(new Error(`Cannot style non-existing layer "${f}".`)))}getPaintProperty(f,w){return this.getLayer(f).getPaintProperty(w)}setFeatureState(f,w){this._checkLoaded();const O=f.source,G=f.sourceLayer,oe=this.sourceCaches[O];if(oe===void 0)return void this.fire(new n.ErrorEvent(new Error(`The source '${O}' does not exist in the map's style.`)));const Te=oe.getSource().type;Te==="geojson"&&G?this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Te!=="vector"||G?(f.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),oe.setFeatureState(G,f.id,w)):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(f,w){this._checkLoaded();const O=f.source,G=this.sourceCaches[O];if(G===void 0)return void this.fire(new n.ErrorEvent(new Error(`The source '${O}' does not exist in the map's style.`)));const oe=G.getSource().type,Te=oe==="vector"?f.sourceLayer:void 0;oe!=="vector"||Te?w&&typeof f.id!="string"&&typeof f.id!="number"?this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):G.removeFeatureState(Te,f.id,w):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(f){this._checkLoaded();const w=f.source,O=f.sourceLayer,G=this.sourceCaches[w];if(G!==void 0)return G.getSource().type!=="vector"||O?(f.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),G.getFeatureState(O,f.id)):void this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new n.ErrorEvent(new Error(`The source '${w}' does not exist in the map's style.`)))}getTransition(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,f=>f.serialize()),layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(f){this._updatedLayers[f.id]=!0,f.source&&!this._updatedSources[f.source]&&this.sourceCaches[f.source].getSource().type!=="raster"&&(this._updatedSources[f.source]="reload",this.sourceCaches[f.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(f){const w=Te=>this._layers[Te].type==="fill-extrusion",O={},G=[];for(let Te=this._order.length-1;Te>=0;Te--){const Be=this._order[Te];if(w(Be)){O[Be]=Te;for(const Ze of f){const qe=Ze[Be];if(qe)for(const ut of qe)G.push(ut)}}}G.sort((Te,Be)=>Be.intersectionZ-Te.intersectionZ);const oe=[];for(let Te=this._order.length-1;Te>=0;Te--){const Be=this._order[Te];if(w(Be))for(let Ze=G.length-1;Ze>=0;Ze--){const qe=G[Ze].feature;if(O[qe.layer.id]<Te)break;oe.push(qe),G.pop()}else for(const Ze of f){const qe=Ze[Be];if(qe)for(const ut of qe)oe.push(ut.feature)}}return oe}queryRenderedFeatures(f,w,O){w&&w.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);const G={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const Te of w.layers){const Be=this._layers[Te];if(!Be)return this.fire(new n.ErrorEvent(new Error(`The layer '${Te}' does not exist in the map's style and cannot be queried for features.`))),[];G[Be.source]=!0}}const oe=[];w.availableImages=this._availableImages;for(const Te in this.sourceCaches)w.layers&&!G[Te]||oe.push(de(this.sourceCaches[Te],this._layers,this._serializedLayers,f,w,O));return this.placement&&oe.push(function(Te,Be,Ze,qe,ut,_t,Et){const jt={},Ht=_t.queryRenderedSymbols(qe),Zt=[];for(const br of Object.keys(Ht).map(Number))Zt.push(Et[br]);Zt.sort(me);for(const br of Zt){const kr=br.featureIndex.lookupSymbolFeatures(Ht[br.bucketInstanceId],Be,br.bucketIndex,br.sourceLayerIndex,ut.filter,ut.layers,ut.availableImages,Te);for(const Or in kr){const Qt=jt[Or]=jt[Or]||[],Zr=kr[Or];Zr.sort((Br,Qr)=>{const en=br.featureSortOrder;if(en){const pn=en.indexOf(Br.featureIndex);return en.indexOf(Qr.featureIndex)-pn}return Qr.featureIndex-Br.featureIndex});for(const Br of Zr)Qt.push(Br)}}for(const br in jt)jt[br].forEach(kr=>{const Or=kr.feature,Qt=Ze[Te[br].source].getFeatureState(Or.layer["source-layer"],Or.id);Or.source=Or.layer.source,Or.layer["source-layer"]&&(Or.sourceLayer=Or.layer["source-layer"]),Or.state=Qt});return jt}(this._layers,this._serializedLayers,this.sourceCaches,f,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(oe)}querySourceFeatures(f,w){w&&w.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);const O=this.sourceCaches[f];return O?function(G,oe){const Te=G.getRenderableIds().map(qe=>G.getTileByID(qe)),Be=[],Ze={};for(let qe=0;qe<Te.length;qe++){const ut=Te[qe],_t=ut.tileID.canonical.key;Ze[_t]||(Ze[_t]=!0,ut.querySourceFeatures(Be,oe))}return Be}(O,w):[]}addSourceType(f,w,O){return xt.getSourceType(f)?O(new Error(`A source type called "${f}" already exists.`)):(xt.setSourceType(f,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:w.workerSourceURL},O):O(null,null))}getLight(){return this.light.getLight()}setLight(f,w={}){this._checkLoaded();const O=this.light.getLight();let G=!1;for(const Te in f)if(!v(f[Te],O[Te])){G=!0;break}if(!G)return;const oe={now:n.exported.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(f,w),this.light.updateTransitions(oe)}_validate(f,w,O,G,oe={}){return(!oe||oe.validate!==!1)&&$r(this,f.call(n.validateStyle,n.extend({key:w,style:this.serialize(),value:O,styleSpec:n.spec},G)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const w=this.sourceCaches[f];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(f){this.sourceCaches[f].clearTiles()}_reloadSource(f){this.sourceCaches[f].resume(),this.sourceCaches[f].reload()}_updateSources(f){for(const w in this.sourceCaches)this.sourceCaches[w].update(f,this.terrain)}_generateCollisionBoxes(){for(const f in this.sourceCaches)this._reloadSource(f)}_updatePlacement(f,w,O,G,oe=!1){let Te=!1,Be=!1;const Ze={};for(const qe of this._order){const ut=this._layers[qe];if(ut.type!=="symbol")continue;if(!Ze[ut.source]){const Et=this.sourceCaches[ut.source];Ze[ut.source]=Et.getRenderableIds(!0).map(jt=>Et.getTileByID(jt)).sort((jt,Ht)=>Ht.tileID.overscaledZ-jt.tileID.overscaledZ||(jt.tileID.isLessThan(Ht.tileID)?-1:1))}const _t=this.crossTileSymbolIndex.addLayer(ut,Ze[ut.source],f.center.lng);Te=Te||_t}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((oe=oe||this._layerOrderChanged||O===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.exported.now(),f.zoom))&&(this.pauseablePlacement=new vt(f,this.terrain,this._order,oe,w,O,G,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ze),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.exported.now()),Be=!0),Te&&this.pauseablePlacement.placement.setStale()),Be||Te)for(const qe of this._order){const ut=this._layers[qe];ut.type==="symbol"&&this.placement.updateLayerOpacities(ut,Ze[ut.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.exported.now())}_releaseSymbolFadeTiles(){for(const f in this.sourceCaches)this.sourceCaches[f].releaseSymbolFadeTiles()}getImages(f,w,O){this.imageManager.getImages(w.icons,O),this._updateTilesForChangedImages();const G=this.sourceCaches[w.source];G&&G.setDependencies(w.tileID.key,w.type,w.icons)}getGlyphs(f,w,O){this.glyphManager.getGlyphs(w.stacks,O)}getResource(f,w,O){return n.makeRequest(w,O)}}xt.getSourceType=function(N){return X[N]},xt.setSourceType=function(N,f){X[N]=f},xt.registerForPluginStateChange=n.registerForPluginStateChange;var Ct="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Rt={prelude:Lt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Lt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Lt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Lt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Lt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Lt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Lt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Lt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Lt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Lt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Lt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Lt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Lt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ct),terrainDepth:Lt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ct),terrainCoords:Lt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ct)};function Lt(N,f){const w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,O=f.match(/attribute ([\w]+) ([\w]+)/g),G=N.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),oe=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Te=oe?oe.concat(G):G,Be={};return{fragmentSource:N=N.replace(w,(Ze,qe,ut,_t,Et)=>(Be[Et]=!0,qe==="define"?`
#ifndef HAS_UNIFORM_u_${Et}
varying ${ut} ${_t} ${Et};
#else
uniform ${ut} ${_t} u_${Et};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Et}
    ${ut} ${_t} ${Et} = u_${Et};
#endif
`)),vertexSource:f=f.replace(w,(Ze,qe,ut,_t,Et)=>{const jt=_t==="float"?"vec2":"vec4",Ht=Et.match(/color/)?"color":jt;return Be[Et]?qe==="define"?`
#ifndef HAS_UNIFORM_u_${Et}
uniform lowp float u_${Et}_t;
attribute ${ut} ${jt} a_${Et};
varying ${ut} ${_t} ${Et};
#else
uniform ${ut} ${_t} u_${Et};
#endif
`:Ht==="vec4"?`
#ifndef HAS_UNIFORM_u_${Et}
    ${Et} = a_${Et};
#else
    ${ut} ${_t} ${Et} = u_${Et};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Et}
    ${Et} = unpack_mix_${Ht}(a_${Et}, u_${Et}_t);
#else
    ${ut} ${_t} ${Et} = u_${Et};
#endif
`:qe==="define"?`
#ifndef HAS_UNIFORM_u_${Et}
uniform lowp float u_${Et}_t;
attribute ${ut} ${jt} a_${Et};
#else
uniform ${ut} ${_t} u_${Et};
#endif
`:Ht==="vec4"?`
#ifndef HAS_UNIFORM_u_${Et}
    ${ut} ${_t} ${Et} = a_${Et};
#else
    ${ut} ${_t} ${Et} = u_${Et};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Et}
    ${ut} ${_t} ${Et} = unpack_mix_${Ht}(a_${Et}, u_${Et}_t);
#else
    ${ut} ${_t} ${Et} = u_${Et};
#endif
`}),staticAttributes:O,staticUniforms:Te}}class Pt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(f,w,O,G,oe,Te,Be,Ze,qe){this.context=f;let ut=this.boundPaintVertexBuffers.length!==G.length;for(let _t=0;!ut&&_t<G.length;_t++)this.boundPaintVertexBuffers[_t]!==G[_t]&&(ut=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===w&&this.boundLayoutVertexBuffer===O&&!ut&&this.boundIndexBuffer===oe&&this.boundVertexOffset===Te&&this.boundDynamicVertexBuffer===Be&&this.boundDynamicVertexBuffer2===Ze&&this.boundDynamicVertexBuffer3===qe?(f.bindVertexArrayOES.set(this.vao),Be&&Be.bind(),oe&&oe.dynamicDraw&&oe.bind(),Ze&&Ze.bind(),qe&&qe.bind()):this.freshBind(w,O,G,oe,Te,Be,Ze,qe)}freshBind(f,w,O,G,oe,Te,Be,Ze){let qe;const ut=f.numAttributes,_t=this.context,Et=_t.gl;if(_t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=_t.extVertexArrayObject.createVertexArrayOES(),_t.bindVertexArrayOES.set(this.vao),qe=0,this.boundProgram=f,this.boundLayoutVertexBuffer=w,this.boundPaintVertexBuffers=O,this.boundIndexBuffer=G,this.boundVertexOffset=oe,this.boundDynamicVertexBuffer=Te,this.boundDynamicVertexBuffer2=Be,this.boundDynamicVertexBuffer3=Ze;else{qe=_t.currentNumAttributes||0;for(let jt=ut;jt<qe;jt++)Et.disableVertexAttribArray(jt)}w.enableAttributes(Et,f);for(const jt of O)jt.enableAttributes(Et,f);Te&&Te.enableAttributes(Et,f),Be&&Be.enableAttributes(Et,f),Ze&&Ze.enableAttributes(Et,f),w.bind(),w.setVertexAttribPointers(Et,f,oe);for(const jt of O)jt.bind(),jt.setVertexAttribPointers(Et,f,oe);Te&&(Te.bind(),Te.setVertexAttribPointers(Et,f,oe)),G&&G.bind(),Be&&(Be.bind(),Be.setVertexAttribPointers(Et,f,oe)),Ze&&(Ze.bind(),Ze.setVertexAttribPointers(Et,f,oe)),_t.currentNumAttributes=ut}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function nr(N){const f=[];for(let w=0;w<N.length;w++){if(N[w]===null)continue;const O=N[w].split(" ");f.push(O.pop())}return f}class Tr{constructor(f,w,O,G,oe,Te,Be){const Ze=f.gl;this.program=Ze.createProgram();const qe=nr(O.staticAttributes),ut=G?G.getBinderAttributes():[],_t=qe.concat(ut),Et=Rt.prelude.staticUniforms?nr(Rt.prelude.staticUniforms):[],jt=O.staticUniforms?nr(O.staticUniforms):[],Ht=G?G.getBinderUniforms():[],Zt=Et.concat(jt).concat(Ht),br=[];for(const en of Zt)br.indexOf(en)<0&&br.push(en);const kr=G?G.defines():[];Te&&kr.push("#define OVERDRAW_INSPECTOR;"),Be&&kr.push("#define TERRAIN3D;");const Or=kr.concat(Rt.prelude.fragmentSource,O.fragmentSource).join(`
`),Qt=kr.concat(Rt.prelude.vertexSource,O.vertexSource).join(`
`),Zr=Ze.createShader(Ze.FRAGMENT_SHADER);if(Ze.isContextLost())return void(this.failedToCreate=!0);Ze.shaderSource(Zr,Or),Ze.compileShader(Zr),Ze.attachShader(this.program,Zr);const Br=Ze.createShader(Ze.VERTEX_SHADER);if(Ze.isContextLost())return void(this.failedToCreate=!0);Ze.shaderSource(Br,Qt),Ze.compileShader(Br),Ze.attachShader(this.program,Br),this.attributes={};const Qr={};this.numAttributes=_t.length;for(let en=0;en<this.numAttributes;en++)_t[en]&&(Ze.bindAttribLocation(this.program,en,_t[en]),this.attributes[_t[en]]=en);Ze.linkProgram(this.program),Ze.deleteShader(Br),Ze.deleteShader(Zr);for(let en=0;en<br.length;en++){const pn=br[en];if(pn&&!Qr[pn]){const Jr=Ze.getUniformLocation(this.program,pn);Jr&&(Qr[pn]=Jr)}}this.fixedUniforms=oe(f,Qr),this.terrainUniforms=((en,pn)=>({u_depth:new n.Uniform1i(en,pn.u_depth),u_terrain:new n.Uniform1i(en,pn.u_terrain),u_terrain_dim:new n.Uniform1f(en,pn.u_terrain_dim),u_terrain_matrix:new n.UniformMatrix4f(en,pn.u_terrain_matrix),u_terrain_unpack:new n.Uniform4f(en,pn.u_terrain_unpack),u_terrain_offset:new n.Uniform1f(en,pn.u_terrain_offset),u_terrain_exaggeration:new n.Uniform1f(en,pn.u_terrain_exaggeration)}))(f,Qr),this.binderUniforms=G?G.getUniforms(f,Qr):[]}draw(f,w,O,G,oe,Te,Be,Ze,qe,ut,_t,Et,jt,Ht,Zt,br,kr,Or){const Qt=f.gl;if(this.failedToCreate)return;if(f.program.set(this.program),f.setDepthMode(O),f.setStencilMode(G),f.setColorMode(oe),f.setCullFace(Te),Ze){f.activeTexture.set(Qt.TEXTURE2),Qt.bindTexture(Qt.TEXTURE_2D,Ze.depthTexture),f.activeTexture.set(Qt.TEXTURE3),Qt.bindTexture(Qt.TEXTURE_2D,Ze.texture);for(const Br in this.terrainUniforms)this.terrainUniforms[Br].set(Ze[Br])}for(const Br in this.fixedUniforms)this.fixedUniforms[Br].set(Be[Br]);Zt&&Zt.setUniforms(f,this.binderUniforms,jt,{zoom:Ht});let Zr=0;switch(w){case Qt.LINES:Zr=2;break;case Qt.TRIANGLES:Zr=3;break;case Qt.LINE_STRIP:Zr=1}for(const Br of Et.get()){const Qr=Br.vaos||(Br.vaos={});(Qr[qe]||(Qr[qe]=new Pt)).bind(f,this,ut,Zt?Zt.getPaintVertexBuffers():[],_t,Br.vertexOffset,br,kr,Or),Qt.drawElements(w,Br.primitiveLength*Zr,Qt.UNSIGNED_SHORT,Br.primitiveOffset*Zr*2)}}}function gr(N,f,w){const O=1/Dr(w,1,f.transform.tileZoom),G=Math.pow(2,w.tileID.overscaledZ),oe=w.tileSize*Math.pow(2,f.transform.tileZoom)/G,Te=oe*(w.tileID.canonical.x+w.tileID.wrap*G),Be=oe*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[O,N.fromScale,N.toScale],u_fade:N.t,u_pixel_coord_upper:[Te>>16,Be>>16],u_pixel_coord_lower:[65535&Te,65535&Be]}}const $t=(N,f,w,O)=>{const G=f.style.light,oe=G.properties.get("position"),Te=[oe.x,oe.y,oe.z],Be=n.create$1();G.properties.get("anchor")==="viewport"&&n.fromRotation(Be,-f.transform.angle),n.transformMat3(Te,Te,Be);const Ze=G.properties.get("color");return{u_matrix:N,u_lightpos:Te,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[Ze.r,Ze.g,Ze.b],u_vertical_gradient:+w,u_opacity:O}},mr=(N,f,w,O,G,oe,Te)=>n.extend($t(N,f,w,O),gr(oe,f,Te),{u_height_factor:-Math.pow(2,G.overscaledZ)/Te.tileSize/8}),Pr=N=>({u_matrix:N}),wr=(N,f,w,O)=>n.extend(Pr(N),gr(w,f,O)),fr=(N,f)=>({u_matrix:N,u_world:f}),Ir=(N,f,w,O,G)=>n.extend(wr(N,f,w,O),{u_world:G}),Vr=(N,f,w,O)=>{const G=N.transform;let oe,Te;if(O.paint.get("circle-pitch-alignment")==="map"){const Be=Dr(w,1,G.zoom);oe=!0,Te=[Be,Be]}else oe=!1,Te=G.pixelsToGLUnits;return{u_camera_to_center_distance:G.cameraToCenterDistance,u_scale_with_map:+(O.paint.get("circle-pitch-scale")==="map"),u_matrix:N.translatePosMatrix(f.posMatrix,w,O.paint.get("circle-translate"),O.paint.get("circle-translate-anchor")),u_pitch_with_map:+oe,u_device_pixel_ratio:N.pixelRatio,u_extrude_scale:Te}},_r=(N,f,w)=>{const O=Dr(w,1,f.zoom),G=Math.pow(2,f.zoom-w.tileID.overscaledZ),oe=w.tileID.overscaleFactor();return{u_matrix:N,u_camera_to_center_distance:f.cameraToCenterDistance,u_pixels_to_tile_units:O,u_extrude_scale:[f.pixelsToGLUnits[0]/(O*G),f.pixelsToGLUnits[1]/(O*G)],u_overscale_factor:oe}},Gr=(N,f,w=1)=>({u_matrix:N,u_color:f,u_overlay:0,u_overlay_scale:w}),qr=N=>({u_matrix:N}),tn=(N,f,w,O)=>({u_matrix:N,u_extrude_scale:Dr(f,1,w),u_intensity:O});function Ur(N,f){const w=Math.pow(2,f.canonical.z),O=f.canonical.y;return[new n.MercatorCoordinate(0,O/w).toLngLat().lat,new n.MercatorCoordinate(0,(O+1)/w).toLngLat().lat]}const Sn=(N,f,w,O)=>{const G=N.transform;return{u_matrix:Dn(N,f,w,O),u_ratio:1/Dr(f,1,G.zoom),u_device_pixel_ratio:N.pixelRatio,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},wn=(N,f,w,O,G)=>n.extend(Sn(N,f,w,G),{u_image:0,u_image_height:O}),hn=(N,f,w,O,G)=>{const oe=N.transform,Te=mn(f,oe);return{u_matrix:Dn(N,f,w,G),u_texsize:f.imageAtlasTexture.size,u_ratio:1/Dr(f,1,oe.zoom),u_device_pixel_ratio:N.pixelRatio,u_image:0,u_scale:[Te,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/oe.pixelsToGLUnits[0],1/oe.pixelsToGLUnits[1]]}},bn=(N,f,w,O,G,oe)=>{const Te=N.lineAtlas,Be=mn(f,N.transform),Ze=w.layout.get("line-cap")==="round",qe=Te.getDash(O.from,Ze),ut=Te.getDash(O.to,Ze),_t=qe.width*G.fromScale,Et=ut.width*G.toScale;return n.extend(Sn(N,f,w,oe),{u_patternscale_a:[Be/_t,-qe.height/2],u_patternscale_b:[Be/Et,-ut.height/2],u_sdfgamma:Te.width/(256*Math.min(_t,Et)*N.pixelRatio)/2,u_image:0,u_tex_y_a:qe.y,u_tex_y_b:ut.y,u_mix:G.t})};function mn(N,f){return 1/Dr(N,1,f.tileZoom)}function Dn(N,f,w,O){return N.translatePosMatrix(O?O.posMatrix:f.tileID.posMatrix,f,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}const Yn=(N,f,w,O,G)=>{return{u_matrix:N,u_tl_parent:f,u_scale_parent:w,u_buffer_scale:1,u_fade_t:O.mix,u_opacity:O.opacity*G.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:G.paint.get("raster-brightness-min"),u_brightness_high:G.paint.get("raster-brightness-max"),u_saturation_factor:(Te=G.paint.get("raster-saturation"),Te>0?1-1/(1.001-Te):-Te),u_contrast_factor:(oe=G.paint.get("raster-contrast"),oe>0?1/(1-oe):1+oe),u_spin_weights:hi(G.paint.get("raster-hue-rotate"))};var oe,Te};function hi(N){N*=Math.PI/180;const f=Math.sin(N),w=Math.cos(N);return[(2*w+1)/3,(-Math.sqrt(3)*f-w+1)/3,(Math.sqrt(3)*f-w+1)/3]}const mi=(N,f,w,O,G,oe,Te,Be,Ze,qe)=>{const ut=G.transform;return{u_is_size_zoom_constant:+(N==="constant"||N==="source"),u_is_size_feature_constant:+(N==="constant"||N==="camera"),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:ut.cameraToCenterDistance,u_pitch:ut.pitch/360*2*Math.PI,u_rotate_symbol:+w,u_aspect_ratio:ut.width/ut.height,u_fade_change:G.options.fadeDuration?G.symbolFadeChange:1,u_matrix:oe,u_label_plane_matrix:Te,u_coord_matrix:Be,u_is_text:+Ze,u_pitch_with_map:+O,u_texsize:qe,u_texture:0}},Zi=(N,f,w,O,G,oe,Te,Be,Ze,qe,ut)=>{const _t=G.transform;return n.extend(mi(N,f,w,O,G,oe,Te,Be,Ze,qe),{u_gamma_scale:O?Math.cos(_t._pitch)*_t.cameraToCenterDistance:1,u_device_pixel_ratio:G.pixelRatio,u_is_halo:+ut})},Bn=(N,f,w,O,G,oe,Te,Be,Ze,qe)=>n.extend(Zi(N,f,w,O,G,oe,Te,Be,!0,Ze,!0),{u_texsize_icon:qe,u_texture_icon:1}),Ai=(N,f,w)=>({u_matrix:N,u_opacity:f,u_color:w}),vi=(N,f,w,O,G,oe)=>n.extend(function(Te,Be,Ze,qe){const ut=Ze.imageManager.getPattern(Te.from.toString()),_t=Ze.imageManager.getPattern(Te.to.toString()),{width:Et,height:jt}=Ze.imageManager.getPixelSize(),Ht=Math.pow(2,qe.tileID.overscaledZ),Zt=qe.tileSize*Math.pow(2,Ze.transform.tileZoom)/Ht,br=Zt*(qe.tileID.canonical.x+qe.tileID.wrap*Ht),kr=Zt*qe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ut.tl,u_pattern_br_a:ut.br,u_pattern_tl_b:_t.tl,u_pattern_br_b:_t.br,u_texsize:[Et,jt],u_mix:Be.t,u_pattern_size_a:ut.displaySize,u_pattern_size_b:_t.displaySize,u_scale_a:Be.fromScale,u_scale_b:Be.toScale,u_tile_units_to_pixels:1/Dr(qe,1,Ze.transform.tileZoom),u_pixel_coord_upper:[br>>16,kr>>16],u_pixel_coord_lower:[65535&br,65535&kr]}}(O,oe,w,G),{u_matrix:N,u_opacity:f}),Mo={fillExtrusion:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_lightpos:new n.Uniform3f(N,f.u_lightpos),u_lightintensity:new n.Uniform1f(N,f.u_lightintensity),u_lightcolor:new n.Uniform3f(N,f.u_lightcolor),u_vertical_gradient:new n.Uniform1f(N,f.u_vertical_gradient),u_opacity:new n.Uniform1f(N,f.u_opacity)}),fillExtrusionPattern:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_lightpos:new n.Uniform3f(N,f.u_lightpos),u_lightintensity:new n.Uniform1f(N,f.u_lightintensity),u_lightcolor:new n.Uniform3f(N,f.u_lightcolor),u_vertical_gradient:new n.Uniform1f(N,f.u_vertical_gradient),u_height_factor:new n.Uniform1f(N,f.u_height_factor),u_image:new n.Uniform1i(N,f.u_image),u_texsize:new n.Uniform2f(N,f.u_texsize),u_pixel_coord_upper:new n.Uniform2f(N,f.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(N,f.u_pixel_coord_lower),u_scale:new n.Uniform3f(N,f.u_scale),u_fade:new n.Uniform1f(N,f.u_fade),u_opacity:new n.Uniform1f(N,f.u_opacity)}),fill:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix)}),fillPattern:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_image:new n.Uniform1i(N,f.u_image),u_texsize:new n.Uniform2f(N,f.u_texsize),u_pixel_coord_upper:new n.Uniform2f(N,f.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(N,f.u_pixel_coord_lower),u_scale:new n.Uniform3f(N,f.u_scale),u_fade:new n.Uniform1f(N,f.u_fade)}),fillOutline:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_world:new n.Uniform2f(N,f.u_world)}),fillOutlinePattern:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_world:new n.Uniform2f(N,f.u_world),u_image:new n.Uniform1i(N,f.u_image),u_texsize:new n.Uniform2f(N,f.u_texsize),u_pixel_coord_upper:new n.Uniform2f(N,f.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(N,f.u_pixel_coord_lower),u_scale:new n.Uniform3f(N,f.u_scale),u_fade:new n.Uniform1f(N,f.u_fade)}),circle:(N,f)=>({u_camera_to_center_distance:new n.Uniform1f(N,f.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(N,f.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(N,f.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(N,f.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(N,f.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(N,f.u_matrix)}),collisionBox:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_camera_to_center_distance:new n.Uniform1f(N,f.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(N,f.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(N,f.u_extrude_scale),u_overscale_factor:new n.Uniform1f(N,f.u_overscale_factor)}),collisionCircle:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_inv_matrix:new n.UniformMatrix4f(N,f.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(N,f.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(N,f.u_viewport_size)}),debug:(N,f)=>({u_color:new n.UniformColor(N,f.u_color),u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_overlay:new n.Uniform1i(N,f.u_overlay),u_overlay_scale:new n.Uniform1f(N,f.u_overlay_scale)}),clippingMask:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix)}),heatmap:(N,f)=>({u_extrude_scale:new n.Uniform1f(N,f.u_extrude_scale),u_intensity:new n.Uniform1f(N,f.u_intensity),u_matrix:new n.UniformMatrix4f(N,f.u_matrix)}),heatmapTexture:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_world:new n.Uniform2f(N,f.u_world),u_image:new n.Uniform1i(N,f.u_image),u_color_ramp:new n.Uniform1i(N,f.u_color_ramp),u_opacity:new n.Uniform1f(N,f.u_opacity)}),hillshade:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_image:new n.Uniform1i(N,f.u_image),u_latrange:new n.Uniform2f(N,f.u_latrange),u_light:new n.Uniform2f(N,f.u_light),u_shadow:new n.UniformColor(N,f.u_shadow),u_highlight:new n.UniformColor(N,f.u_highlight),u_accent:new n.UniformColor(N,f.u_accent)}),hillshadePrepare:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_image:new n.Uniform1i(N,f.u_image),u_dimension:new n.Uniform2f(N,f.u_dimension),u_zoom:new n.Uniform1f(N,f.u_zoom),u_unpack:new n.Uniform4f(N,f.u_unpack)}),line:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_ratio:new n.Uniform1f(N,f.u_ratio),u_device_pixel_ratio:new n.Uniform1f(N,f.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(N,f.u_units_to_pixels)}),lineGradient:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_ratio:new n.Uniform1f(N,f.u_ratio),u_device_pixel_ratio:new n.Uniform1f(N,f.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(N,f.u_units_to_pixels),u_image:new n.Uniform1i(N,f.u_image),u_image_height:new n.Uniform1f(N,f.u_image_height)}),linePattern:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_texsize:new n.Uniform2f(N,f.u_texsize),u_ratio:new n.Uniform1f(N,f.u_ratio),u_device_pixel_ratio:new n.Uniform1f(N,f.u_device_pixel_ratio),u_image:new n.Uniform1i(N,f.u_image),u_units_to_pixels:new n.Uniform2f(N,f.u_units_to_pixels),u_scale:new n.Uniform3f(N,f.u_scale),u_fade:new n.Uniform1f(N,f.u_fade)}),lineSDF:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_ratio:new n.Uniform1f(N,f.u_ratio),u_device_pixel_ratio:new n.Uniform1f(N,f.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(N,f.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(N,f.u_patternscale_a),u_patternscale_b:new n.Uniform2f(N,f.u_patternscale_b),u_sdfgamma:new n.Uniform1f(N,f.u_sdfgamma),u_image:new n.Uniform1i(N,f.u_image),u_tex_y_a:new n.Uniform1f(N,f.u_tex_y_a),u_tex_y_b:new n.Uniform1f(N,f.u_tex_y_b),u_mix:new n.Uniform1f(N,f.u_mix)}),raster:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_tl_parent:new n.Uniform2f(N,f.u_tl_parent),u_scale_parent:new n.Uniform1f(N,f.u_scale_parent),u_buffer_scale:new n.Uniform1f(N,f.u_buffer_scale),u_fade_t:new n.Uniform1f(N,f.u_fade_t),u_opacity:new n.Uniform1f(N,f.u_opacity),u_image0:new n.Uniform1i(N,f.u_image0),u_image1:new n.Uniform1i(N,f.u_image1),u_brightness_low:new n.Uniform1f(N,f.u_brightness_low),u_brightness_high:new n.Uniform1f(N,f.u_brightness_high),u_saturation_factor:new n.Uniform1f(N,f.u_saturation_factor),u_contrast_factor:new n.Uniform1f(N,f.u_contrast_factor),u_spin_weights:new n.Uniform3f(N,f.u_spin_weights)}),symbolIcon:(N,f)=>({u_is_size_zoom_constant:new n.Uniform1i(N,f.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(N,f.u_is_size_feature_constant),u_size_t:new n.Uniform1f(N,f.u_size_t),u_size:new n.Uniform1f(N,f.u_size),u_camera_to_center_distance:new n.Uniform1f(N,f.u_camera_to_center_distance),u_pitch:new n.Uniform1f(N,f.u_pitch),u_rotate_symbol:new n.Uniform1i(N,f.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(N,f.u_aspect_ratio),u_fade_change:new n.Uniform1f(N,f.u_fade_change),u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(N,f.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(N,f.u_coord_matrix),u_is_text:new n.Uniform1i(N,f.u_is_text),u_pitch_with_map:new n.Uniform1i(N,f.u_pitch_with_map),u_texsize:new n.Uniform2f(N,f.u_texsize),u_texture:new n.Uniform1i(N,f.u_texture)}),symbolSDF:(N,f)=>({u_is_size_zoom_constant:new n.Uniform1i(N,f.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(N,f.u_is_size_feature_constant),u_size_t:new n.Uniform1f(N,f.u_size_t),u_size:new n.Uniform1f(N,f.u_size),u_camera_to_center_distance:new n.Uniform1f(N,f.u_camera_to_center_distance),u_pitch:new n.Uniform1f(N,f.u_pitch),u_rotate_symbol:new n.Uniform1i(N,f.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(N,f.u_aspect_ratio),u_fade_change:new n.Uniform1f(N,f.u_fade_change),u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(N,f.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(N,f.u_coord_matrix),u_is_text:new n.Uniform1i(N,f.u_is_text),u_pitch_with_map:new n.Uniform1i(N,f.u_pitch_with_map),u_texsize:new n.Uniform2f(N,f.u_texsize),u_texture:new n.Uniform1i(N,f.u_texture),u_gamma_scale:new n.Uniform1f(N,f.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(N,f.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(N,f.u_is_halo)}),symbolTextAndIcon:(N,f)=>({u_is_size_zoom_constant:new n.Uniform1i(N,f.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(N,f.u_is_size_feature_constant),u_size_t:new n.Uniform1f(N,f.u_size_t),u_size:new n.Uniform1f(N,f.u_size),u_camera_to_center_distance:new n.Uniform1f(N,f.u_camera_to_center_distance),u_pitch:new n.Uniform1f(N,f.u_pitch),u_rotate_symbol:new n.Uniform1i(N,f.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(N,f.u_aspect_ratio),u_fade_change:new n.Uniform1f(N,f.u_fade_change),u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(N,f.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(N,f.u_coord_matrix),u_is_text:new n.Uniform1i(N,f.u_is_text),u_pitch_with_map:new n.Uniform1i(N,f.u_pitch_with_map),u_texsize:new n.Uniform2f(N,f.u_texsize),u_texsize_icon:new n.Uniform2f(N,f.u_texsize_icon),u_texture:new n.Uniform1i(N,f.u_texture),u_texture_icon:new n.Uniform1i(N,f.u_texture_icon),u_gamma_scale:new n.Uniform1f(N,f.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(N,f.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(N,f.u_is_halo)}),background:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_opacity:new n.Uniform1f(N,f.u_opacity),u_color:new n.UniformColor(N,f.u_color)}),backgroundPattern:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_opacity:new n.Uniform1f(N,f.u_opacity),u_image:new n.Uniform1i(N,f.u_image),u_pattern_tl_a:new n.Uniform2f(N,f.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(N,f.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(N,f.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(N,f.u_pattern_br_b),u_texsize:new n.Uniform2f(N,f.u_texsize),u_mix:new n.Uniform1f(N,f.u_mix),u_pattern_size_a:new n.Uniform2f(N,f.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(N,f.u_pattern_size_b),u_scale_a:new n.Uniform1f(N,f.u_scale_a),u_scale_b:new n.Uniform1f(N,f.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(N,f.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(N,f.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(N,f.u_tile_units_to_pixels)}),terrain:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_texture:new n.Uniform1i(N,f.u_texture)}),terrainDepth:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix)}),terrainCoords:(N,f)=>({u_matrix:new n.UniformMatrix4f(N,f.u_matrix),u_texture:new n.Uniform1i(N,f.u_texture),u_terrain_coords_id:new n.Uniform1f(N,f.u_terrain_coords_id)})};class sa{constructor(f,w,O){this.context=f;const G=f.gl;this.buffer=G.createBuffer(),this.dynamicDraw=Boolean(O),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),G.bufferData(G.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(f){const w=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),w.bufferSubData(w.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ea={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Oa{constructor(f,w,O,G){this.length=w.length,this.attributes=O,this.itemSize=w.bytesPerElement,this.dynamicDraw=G,this.context=f;const oe=f.gl;this.buffer=oe.createBuffer(),f.bindVertexBuffer.set(this.buffer),oe.bufferData(oe.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?oe.DYNAMIC_DRAW:oe.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(f){if(f.length!==this.length)throw new Error(`Length of new data is ${f.length}, which doesn't match current length of ${this.length}`);const w=this.context.gl;this.bind(),w.bufferSubData(w.ARRAY_BUFFER,0,f.arrayBuffer)}enableAttributes(f,w){for(let O=0;O<this.attributes.length;O++){const G=w.attributes[this.attributes[O].name];G!==void 0&&f.enableVertexAttribArray(G)}}setVertexAttribPointers(f,w,O){for(let G=0;G<this.attributes.length;G++){const oe=this.attributes[G],Te=w.attributes[oe.name];Te!==void 0&&f.vertexAttribPointer(Te,oe.components,f[Ea[oe.type]],!1,this.itemSize,oe.offset+this.itemSize*(O||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Kn{constructor(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(f){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ko extends Kn{getDefault(){return n.Color.transparent}set(f){const w=this.current;(f.r!==w.r||f.g!==w.g||f.b!==w.b||f.a!==w.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class to extends Kn{getDefault(){return 1}set(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)}}class Wi extends Kn{getDefault(){return 0}set(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)}}class ro extends Kn{getDefault(){return[!0,!0,!0,!0]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||f[3]!==w[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Ts extends Kn{getDefault(){return!0}set(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)}}class ya extends Kn{getDefault(){return 255}set(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)}}class Io extends Kn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(f){const w=this.current;(f.func!==w.func||f.ref!==w.ref||f.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)}}class za extends Kn{getDefault(){const f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)}}class us extends Kn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=f,this.dirty=!1}}class Jo extends Kn{getDefault(){return[0,1]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)}}class Ta extends Kn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=f,this.dirty=!1}}class di extends Kn{getDefault(){return this.gl.LESS}set(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)}}class zs extends Kn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.BLEND):w.disable(w.BLEND),this.current=f,this.dirty=!1}}class Ya extends Kn{getDefault(){const f=this.gl;return[f.ONE,f.ZERO]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(f[0],f[1]),this.current=f,this.dirty=!1)}}class _a extends Kn{getDefault(){return n.Color.transparent}set(f){const w=this.current;(f.r!==w.r||f.g!==w.g||f.b!==w.b||f.a!==w.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class Ba extends Kn{getDefault(){return this.gl.FUNC_ADD}set(f){(f!==this.current||this.dirty)&&(this.gl.blendEquation(f),this.current=f,this.dirty=!1)}}class cs extends Kn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=f,this.dirty=!1}}class fs extends Kn{getDefault(){return this.gl.BACK}set(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)}}class $o extends Kn{getDefault(){return this.gl.CCW}set(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)}}class As extends Kn{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}}class Fu extends Kn{getDefault(){return this.gl.TEXTURE0}set(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)}}class Ou extends Kn{getDefault(){const f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||f[3]!==w[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Vl extends Kn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,f),this.current=f,this.dirty=!1}}class Zc extends Kn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class co extends Kn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindTexture(w.TEXTURE_2D,f),this.current=f,this.dirty=!1}}class zu extends Kn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class xl extends Kn{getDefault(){return null}set(f){const w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class Ho extends Kn{constructor(f){super(f),this.vao=f.extVertexArrayObject}getDefault(){return null}set(f){this.vao&&(f!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(f),this.current=f,this.dirty=!1)}}class Bs extends Kn{getDefault(){return 4}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}}class Gl extends Kn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}}class Zl extends Kn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}}class il extends Kn{constructor(f,w){super(f),this.context=f,this.parent=w}getDefault(){return null}}class Ss extends il{setDirty(){this.dirty=!0}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class Bu extends il{set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class wl{constructor(f,w,O,G){this.context=f,this.width=w,this.height=O;const oe=f.gl,Te=this.framebuffer=oe.createFramebuffer();if(this.colorAttachment=new Ss(f,Te),G&&(this.depthAttachment=new Bu(f,Te)),oe.checkFramebufferStatus(oe.FRAMEBUFFER)!==oe.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const f=this.context.gl,w=this.colorAttachment.get();if(w&&f.deleteTexture(w),this.depthAttachment){const O=this.depthAttachment.get();O&&f.deleteRenderbuffer(O)}f.deleteFramebuffer(this.framebuffer)}}class la{constructor(f,w,O){this.blendFunction=f,this.blendColor=w,this.mask=O}}la.Replace=[1,0],la.disabled=new la(la.Replace,n.Color.transparent,[!1,!1,!1,!1]),la.unblended=new la(la.Replace,n.Color.transparent,[!0,!0,!0,!0]),la.alphaBlended=new la([1,771],n.Color.transparent,[!0,!0,!0,!0]);class uu{constructor(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ko(this),this.clearDepth=new to(this),this.clearStencil=new Wi(this),this.colorMask=new ro(this),this.depthMask=new Ts(this),this.stencilMask=new ya(this),this.stencilFunc=new Io(this),this.stencilOp=new za(this),this.stencilTest=new us(this),this.depthRange=new Jo(this),this.depthTest=new Ta(this),this.depthFunc=new di(this),this.blend=new zs(this),this.blendFunc=new Ya(this),this.blendColor=new _a(this),this.blendEquation=new Ba(this),this.cullFace=new cs(this),this.cullFaceSide=new fs(this),this.frontFace=new $o(this),this.program=new As(this),this.activeTexture=new Fu(this),this.viewport=new Ou(this),this.bindFramebuffer=new Vl(this),this.bindRenderbuffer=new Zc(this),this.bindTexture=new co(this),this.bindVertexBuffer=new zu(this),this.bindElementBuffer=new xl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ho(this),this.pixelStoreUnpack=new Bs(this),this.pixelStoreUnpackPremultiplyAlpha=new Gl(this),this.pixelStoreUnpackFlipY=new Zl(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(f,w){return new sa(this,f,w)}createVertexBuffer(f,w,O){return new Oa(this,f,w,O)}createRenderbuffer(f,w,O){const G=this.gl,oe=G.createRenderbuffer();return this.bindRenderbuffer.set(oe),G.renderbufferStorage(G.RENDERBUFFER,f,w,O),this.bindRenderbuffer.set(null),oe}createFramebuffer(f,w,O){return new wl(this,f,w,O)}clear({color:f,depth:w}){const O=this.gl;let G=0;f&&(G|=O.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(G|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),O.clear(G)}setCullFace(f){f.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))}setDepthMode(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)}setStencilMode(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)}setColorMode(f){v(f.blendFunction,la.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class gi{constructor(f,w,O){this.func=f,this.mask=w,this.range=O}}gi.ReadOnly=!1,gi.ReadWrite=!0,gi.disabled=new gi(519,gi.ReadOnly,[0,1]);const Ji=7680;class $i{constructor(f,w,O,G,oe,Te){this.test=f,this.ref=w,this.mask=O,this.fail=G,this.depthFail=oe,this.pass=Te}}$i.disabled=new $i({func:519,mask:0},0,0,Ji,Ji,Ji);class Si{constructor(f,w,O){this.enable=f,this.mode=w,this.frontFace=O}}let Wl;function Ns(N,f,w,O,G,oe,Te){const Be=N.context,Ze=Be.gl,qe=N.useProgram("collisionBox"),ut=[];let _t=0,Et=0;for(let Qt=0;Qt<O.length;Qt++){const Zr=O[Qt],Br=f.getTile(Zr),Qr=Br.getBucket(w);if(!Qr)continue;let en=Zr.posMatrix;G[0]===0&&G[1]===0||(en=N.translatePosMatrix(Zr.posMatrix,Br,G,oe));const pn=Te?Qr.textCollisionBox:Qr.iconCollisionBox,Jr=Qr.collisionCircleArray;if(Jr.length>0){const zn=n.create(),In=en;n.mul(zn,Qr.placementInvProjMatrix,N.transform.glCoordMatrix),n.mul(zn,zn,Qr.placementViewportMatrix),ut.push({circleArray:Jr,circleOffset:Et,transform:In,invTransform:zn,coord:Zr}),_t+=Jr.length/4,Et=_t}pn&&qe.draw(Be,Ze.LINES,gi.disabled,$i.disabled,N.colorModeForRenderPass(),Si.disabled,_r(en,N.transform,Br),N.style.terrain&&N.style.terrain.getTerrainData(Zr),w.id,pn.layoutVertexBuffer,pn.indexBuffer,pn.segments,null,N.transform.zoom,null,null,pn.collisionVertexBuffer)}if(!Te||!ut.length)return;const jt=N.useProgram("collisionCircle"),Ht=new n.CollisionCircleLayoutArray;Ht.resize(4*_t),Ht._trim();let Zt=0;for(const Qt of ut)for(let Zr=0;Zr<Qt.circleArray.length/4;Zr++){const Br=4*Zr,Qr=Qt.circleArray[Br+0],en=Qt.circleArray[Br+1],pn=Qt.circleArray[Br+2],Jr=Qt.circleArray[Br+3];Ht.emplace(Zt++,Qr,en,pn,Jr,0),Ht.emplace(Zt++,Qr,en,pn,Jr,1),Ht.emplace(Zt++,Qr,en,pn,Jr,2),Ht.emplace(Zt++,Qr,en,pn,Jr,3)}(!Wl||Wl.length<2*_t)&&(Wl=function(Qt){const Zr=2*Qt,Br=new n.QuadTriangleArray;Br.resize(Zr),Br._trim();for(let Qr=0;Qr<Zr;Qr++){const en=6*Qr;Br.uint16[en+0]=4*Qr+0,Br.uint16[en+1]=4*Qr+1,Br.uint16[en+2]=4*Qr+2,Br.uint16[en+3]=4*Qr+2,Br.uint16[en+4]=4*Qr+3,Br.uint16[en+5]=4*Qr+0}return Br}(_t));const br=Be.createIndexBuffer(Wl,!0),kr=Be.createVertexBuffer(Ht,n.collisionCircleLayout.members,!0);for(const Qt of ut){const Zr={u_matrix:Qt.transform,u_inv_matrix:Qt.invTransform,u_camera_to_center_distance:(Or=N.transform).cameraToCenterDistance,u_viewport_size:[Or.width,Or.height]};jt.draw(Be,Ze.TRIANGLES,gi.disabled,$i.disabled,N.colorModeForRenderPass(),Si.disabled,Zr,N.style.terrain&&N.style.terrain.getTerrainData(Qt.coord),w.id,kr,br,n.SegmentVector.simpleSegment(0,2*Qt.circleOffset,Qt.circleArray.length,Qt.circleArray.length/2),null,N.transform.zoom,null,null,null)}var Or;kr.destroy(),br.destroy()}Si.disabled=new Si(!1,1029,2305),Si.backCCW=new Si(!0,1029,2305);const Wc=n.identity(new Float32Array(16));function Es(N,f,w,O,G,oe){const{horizontalAlign:Te,verticalAlign:Be}=n.getAnchorAlignment(N),Ze=-(Te-.5)*f,qe=-(Be-.5)*w,ut=n.evaluateVariableOffset(N,O);return new n.pointGeometry((Ze/G+ut[0])*oe,(qe/G+ut[1])*oe)}function Nu(N,f,w,O,G,oe,Te,Be,Ze,qe,ut){const _t=N.text.placedSymbolArray,Et=N.text.dynamicLayoutVertexArray,jt=N.icon.dynamicLayoutVertexArray,Ht={};Et.clear();for(let Zt=0;Zt<_t.length;Zt++){const br=_t.get(Zt),kr=N.allowVerticalPlacement&&!br.placedOrientation,Or=br.hidden||!br.crossTileID||kr?null:O[br.crossTileID];if(Or){const Qt=new n.pointGeometry(br.anchorX,br.anchorY),Zr=Ne(Qt,w?Te:oe,ut),Br=ht(G.cameraToCenterDistance,Zr.signedDistanceFromCamera);let Qr=n.evaluateSizeForFeature(N.textSizeData,Ze,br)*Br/n.ONE_EM;w&&(Qr*=N.tilePixelRatio/Be);const{width:en,height:pn,anchor:Jr,textOffset:zn,textBoxScale:In}=Or,Vn=Es(Jr,en,pn,zn,In,Qr),ai=w?Ne(Qt.add(Vn),oe,ut).point:Zr.point.add(f?Vn.rotate(-G.angle):Vn),bi=N.allowVerticalPlacement&&br.placedOrientation===n.WritingMode.vertical?Math.PI/2:0;for(let qn=0;qn<br.numGlyphs;qn++)n.addDynamicAttributes(Et,ai,bi);qe&&br.associatedIconIndex>=0&&(Ht[br.associatedIconIndex]={shiftedAnchor:ai,angle:bi})}else er(br.numGlyphs,Et)}if(qe){jt.clear();const Zt=N.icon.placedSymbolArray;for(let br=0;br<Zt.length;br++){const kr=Zt.get(br);if(kr.hidden)er(kr.numGlyphs,jt);else{const Or=Ht[br];if(Or)for(let Qt=0;Qt<kr.numGlyphs;Qt++)n.addDynamicAttributes(jt,Or.shiftedAnchor,Or.angle);else er(kr.numGlyphs,jt)}}N.icon.dynamicLayoutVertexBuffer.updateData(jt)}N.text.dynamicLayoutVertexBuffer.updateData(Et)}function oc(N,f,w){return w.iconsInText&&f?"symbolTextAndIcon":N?"symbolSDF":"symbolIcon"}function al(N,f,w,O,G,oe,Te,Be,Ze,qe,ut,_t){const Et=N.context,jt=Et.gl,Ht=N.transform,Zt=Be==="map",br=Ze==="map",kr=Be!=="viewport"&&w.layout.get("symbol-placement")!=="point",Or=Zt&&!br&&!kr,Qt=!w.layout.get("symbol-sort-key").isConstant();let Zr=!1;const Br=N.depthModeForSublayer(0,gi.ReadOnly),Qr=w.layout.get("text-variable-anchor"),en=[];for(const pn of O){const Jr=f.getTile(pn),zn=Jr.getBucket(w);if(!zn)continue;const In=G?zn.text:zn.icon;if(!In||!In.segments.get().length)continue;const Vn=In.programConfigurations.get(w.id),ai=G||zn.sdfIcons,bi=G?zn.textSizeData:zn.iconSizeData,qn=br||Ht.pitch!==0,ta=N.useProgram(oc(ai,G,zn),Vn),ra=n.evaluateSizeForZoom(bi,Ht.zoom),Gi=N.style.terrain&&N.style.terrain.getTerrainData(pn);let ji,da,Ka,ks,Is=[0,0],fl=null;if(G){if(da=Jr.glyphAtlasTexture,Ka=jt.LINEAR,ji=Jr.glyphAtlasTexture.size,zn.iconsInText){Is=Jr.imageAtlasTexture.size,fl=Jr.imageAtlasTexture;const vs=bi.kind==="composite"||bi.kind==="camera";ks=qn||N.options.rotating||N.options.zooming||vs?jt.LINEAR:jt.NEAREST}}else{const vs=w.layout.get("icon-size").constantOr(0)!==1||zn.iconsNeedLinear;da=Jr.imageAtlasTexture,Ka=ai||N.options.rotating||N.options.zooming||vs||qn?jt.LINEAR:jt.NEAREST,ji=Jr.imageAtlasTexture.size}const Jl=Dr(Jr,1,N.transform.zoom),Ls=Qe(pn.posMatrix,br,Zt,N.transform,Jl),ka=it(pn.posMatrix,br,Zt,N.transform,Jl),hl=Qr&&zn.hasTextData(),vc=w.layout.get("icon-text-fit")!=="none"&&hl&&zn.hasIconData();if(kr){const vs=N.style.terrain?($c,yu)=>N.style.terrain.getElevation(pn,$c,yu):null,$l=w.layout.get("text-rotation-alignment")==="map";Xt(zn,pn.posMatrix,N,G,Ls,ka,br,qe,$l,vs)}const Ca=N.translatePosMatrix(pn.posMatrix,Jr,oe,Te),Ti=kr||G&&Qr||vc?Wc:Ls,Qi=N.translatePosMatrix(ka,Jr,oe,Te,!0),po=ai&&w.paint.get(G?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let mo;mo=ai?zn.iconsInText?Bn(bi.kind,ra,Or,br,N,Ca,Ti,Qi,ji,Is):Zi(bi.kind,ra,Or,br,N,Ca,Ti,Qi,G,ji,!0):mi(bi.kind,ra,Or,br,N,Ca,Ti,Qi,G,ji);const Ia={program:ta,buffers:In,uniformValues:mo,atlasTexture:da,atlasTextureIcon:fl,atlasInterpolation:Ka,atlasInterpolationIcon:ks,isSDF:ai,hasHalo:po};if(Qt&&zn.canOverlap){Zr=!0;const vs=In.segments.get();for(const $l of vs)en.push({segments:new n.SegmentVector([$l]),sortKey:$l.sortKey,state:Ia,terrainData:Gi})}else en.push({segments:In.segments,sortKey:0,state:Ia,terrainData:Gi})}Zr&&en.sort((pn,Jr)=>pn.sortKey-Jr.sortKey);for(const pn of en){const Jr=pn.state;if(Et.activeTexture.set(jt.TEXTURE0),Jr.atlasTexture.bind(Jr.atlasInterpolation,jt.CLAMP_TO_EDGE),Jr.atlasTextureIcon&&(Et.activeTexture.set(jt.TEXTURE1),Jr.atlasTextureIcon&&Jr.atlasTextureIcon.bind(Jr.atlasInterpolationIcon,jt.CLAMP_TO_EDGE)),Jr.isSDF){const zn=Jr.uniformValues;Jr.hasHalo&&(zn.u_is_halo=1,Vo(Jr.buffers,pn.segments,w,N,Jr.program,Br,ut,_t,zn,pn.terrainData)),zn.u_is_halo=0}Vo(Jr.buffers,pn.segments,w,N,Jr.program,Br,ut,_t,Jr.uniformValues,pn.terrainData)}}function Vo(N,f,w,O,G,oe,Te,Be,Ze,qe){const ut=O.context;G.draw(ut,ut.gl.TRIANGLES,oe,Te,Be,Si.disabled,Ze,qe,w.id,N.layoutVertexBuffer,N.indexBuffer,f,w.paint,O.transform.zoom,N.programConfigurations.get(w.id),N.dynamicLayoutVertexBuffer,N.opacityVertexBuffer)}function ol(N,f,w,O,G,oe,Te){const Be=N.context.gl,Ze=w.paint.get("fill-pattern"),qe=Ze&&Ze.constantOr(1),ut=w.getCrossfadeParameters();let _t,Et,jt,Ht,Zt;Te?(Et=qe&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_t=Be.LINES):(Et=qe?"fillPattern":"fill",_t=Be.TRIANGLES);for(const br of O){const kr=f.getTile(br);if(qe&&!kr.patternsLoaded())continue;const Or=kr.getBucket(w);if(!Or)continue;const Qt=Or.programConfigurations.get(w.id),Zr=N.useProgram(Et,Qt),Br=N.style.terrain&&N.style.terrain.getTerrainData(br);qe&&(N.context.activeTexture.set(Be.TEXTURE0),kr.imageAtlasTexture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Qt.updatePaintBuffers(ut));const Qr=Ze.constantOr(null);if(Qr&&kr.imageAtlas){const Jr=kr.imageAtlas,zn=Jr.patternPositions[Qr.to.toString()],In=Jr.patternPositions[Qr.from.toString()];zn&&In&&Qt.setConstantPatternPositions(zn,In)}const en=Br?br:null,pn=N.translatePosMatrix(en?en.posMatrix:br.posMatrix,kr,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(Te){Ht=Or.indexBuffer2,Zt=Or.segments2;const Jr=[Be.drawingBufferWidth,Be.drawingBufferHeight];jt=Et==="fillOutlinePattern"&&qe?Ir(pn,N,ut,kr,Jr):fr(pn,Jr)}else Ht=Or.indexBuffer,Zt=Or.segments,jt=qe?wr(pn,N,ut,kr):Pr(pn);Zr.draw(N.context,_t,G,N.stencilModeForClipping(br),oe,Si.disabled,jt,Br,w.id,Or.layoutVertexBuffer,Ht,Zt,w.paint,N.transform.zoom,Qt)}}function jl(N,f,w,O,G,oe,Te){const Be=N.context,Ze=Be.gl,qe=w.paint.get("fill-extrusion-pattern"),ut=qe.constantOr(1),_t=w.getCrossfadeParameters(),Et=w.paint.get("fill-extrusion-opacity");for(const jt of O){const Ht=f.getTile(jt),Zt=Ht.getBucket(w);if(!Zt)continue;const br=N.style.terrain&&N.style.terrain.getTerrainData(jt),kr=Zt.programConfigurations.get(w.id),Or=N.useProgram(ut?"fillExtrusionPattern":"fillExtrusion",kr);ut&&(N.context.activeTexture.set(Ze.TEXTURE0),Ht.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),kr.updatePaintBuffers(_t));const Qt=qe.constantOr(null);if(Qt&&Ht.imageAtlas){const en=Ht.imageAtlas,pn=en.patternPositions[Qt.to.toString()],Jr=en.patternPositions[Qt.from.toString()];pn&&Jr&&kr.setConstantPatternPositions(pn,Jr)}const Zr=N.translatePosMatrix(jt.posMatrix,Ht,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),Br=w.paint.get("fill-extrusion-vertical-gradient"),Qr=ut?mr(Zr,N,Br,Et,jt,_t,Ht):$t(Zr,N,Br,Et);Or.draw(Be,Be.gl.TRIANGLES,G,oe,Te,Si.backCCW,Qr,br,w.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,w.paint,N.transform.zoom,kr,N.style.terrain&&Zt.centroidVertexBuffer)}}function Uu(N,f,w,O,G,oe,Te){const Be=N.context,Ze=Be.gl,qe=w.fbo;if(!qe)return;const ut=N.useProgram("hillshade"),_t=N.style.terrain&&N.style.terrain.getTerrainData(f);Be.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,qe.colorAttachment.get()),ut.draw(Be,Ze.TRIANGLES,G,oe,Te,Si.disabled,((Et,jt,Ht,Zt)=>{const br=Ht.paint.get("hillshade-shadow-color"),kr=Ht.paint.get("hillshade-highlight-color"),Or=Ht.paint.get("hillshade-accent-color");let Qt=Ht.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ht.paint.get("hillshade-illumination-anchor")==="viewport"&&(Qt-=Et.transform.angle);const Zr=!Et.options.moving;return{u_matrix:Zt?Zt.posMatrix:Et.transform.calculatePosMatrix(jt.tileID.toUnwrapped(),Zr),u_image:0,u_latrange:Ur(0,jt.tileID),u_light:[Ht.paint.get("hillshade-exaggeration"),Qt],u_shadow:br,u_highlight:kr,u_accent:Or}})(N,w,O,_t?f:null),_t,O.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}function jc(N,f,w,O,G,oe){const Te=N.context,Be=Te.gl,Ze=f.dem;if(Ze&&Ze.data){const qe=Ze.dim,ut=Ze.stride,_t=Ze.getPixels();if(Te.activeTexture.set(Be.TEXTURE1),Te.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||N.getTileTexture(ut),f.demTexture){const jt=f.demTexture;jt.update(_t,{premultiply:!1}),jt.bind(Be.NEAREST,Be.CLAMP_TO_EDGE)}else f.demTexture=new b(Te,_t,Be.RGBA,{premultiply:!1}),f.demTexture.bind(Be.NEAREST,Be.CLAMP_TO_EDGE);Te.activeTexture.set(Be.TEXTURE0);let Et=f.fbo;if(!Et){const jt=new b(Te,{width:qe,height:qe,data:null},Be.RGBA);jt.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Et=f.fbo=Te.createFramebuffer(qe,qe,!0),Et.colorAttachment.set(jt.texture)}Te.bindFramebuffer.set(Et.framebuffer),Te.viewport.set([0,0,qe,qe]),N.useProgram("hillshadePrepare").draw(Te,Be.TRIANGLES,O,G,oe,Si.disabled,((jt,Ht)=>{const Zt=Ht.stride,br=n.create();return n.ortho(br,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(br,br,[0,-n.EXTENT,0]),{u_matrix:br,u_image:1,u_dimension:[Zt,Zt],u_zoom:jt.overscaledZ,u_unpack:Ht.getUnpackVector()}})(f.tileID,Ze),null,w.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments),f.needsHillshadePrepare=!1}}function Lo(N,f,w,O,G,oe){const Te=O.paint.get("raster-fade-duration");if(!oe&&Te>0){const Be=n.exported.now(),Ze=(Be-N.timeAdded)/Te,qe=f?(Be-f.timeAdded)/Te:-1,ut=w.getSource(),_t=G.coveringZoomLevel({tileSize:ut.tileSize,roundZoom:ut.roundZoom}),Et=!f||Math.abs(f.tileID.overscaledZ-_t)>Math.abs(N.tileID.overscaledZ-_t),jt=Et&&N.refreshedUponExpiration?1:n.clamp(Et?Ze:1-qe,0,1);return N.refreshedUponExpiration&&Ze>=1&&(N.refreshedUponExpiration=!1),f?{opacity:1,mix:1-jt}:{opacity:jt,mix:0}}return{opacity:1,mix:0}}const Cs=new n.Color(1,0,0,1),Qo=new n.Color(0,1,0,1),sl=new n.Color(0,0,1,1),sc=new n.Color(1,0,1,1),Tl=new n.Color(0,1,1,1);function Al(N,f,w,O){Sl(N,0,f+w/2,N.transform.width,w,O)}function Us(N,f,w,O){Sl(N,f-w/2,0,w,N.transform.height,O)}function Sl(N,f,w,O,G,oe){const Te=N.context,Be=Te.gl;Be.enable(Be.SCISSOR_TEST),Be.scissor(f*N.pixelRatio,w*N.pixelRatio,O*N.pixelRatio,G*N.pixelRatio),Te.clear({color:oe}),Be.disable(Be.SCISSOR_TEST)}function Hu(N,f,w){const O=N.context,G=O.gl,oe=w.posMatrix,Te=N.useProgram("debug"),Be=gi.disabled,Ze=$i.disabled,qe=N.colorModeForRenderPass(),ut="$debug",_t=N.style.terrain&&N.style.terrain.getTerrainData(w);O.activeTexture.set(G.TEXTURE0),N.emptyTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE);const Et=f.getTileByID(w.key).latestRawTileData,jt=Math.floor((Et&&Et.byteLength||0)/1024),Ht=f.getTile(w).tileSize,Zt=512/Math.min(Ht,512)*(w.overscaledZ/N.transform.zoom)*.5;let br=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(br+=` => ${w.overscaledZ}`),function(kr,Or){kr.initDebugOverlayCanvas();const Qt=kr.debugOverlayCanvas,Zr=kr.context.gl,Br=kr.debugOverlayCanvas.getContext("2d");Br.clearRect(0,0,Qt.width,Qt.height),Br.shadowColor="white",Br.shadowBlur=2,Br.lineWidth=1.5,Br.strokeStyle="white",Br.textBaseline="top",Br.font="bold 36px Open Sans, sans-serif",Br.fillText(Or,5,5),Br.strokeText(Or,5,5),kr.debugOverlayTexture.update(Qt),kr.debugOverlayTexture.bind(Zr.LINEAR,Zr.CLAMP_TO_EDGE)}(N,`${br} ${jt}kB`),Te.draw(O,G.TRIANGLES,Be,Ze,la.alphaBlended,Si.disabled,Gr(oe,n.Color.transparent,Zt),null,ut,N.debugBuffer,N.quadTriangleIndexBuffer,N.debugSegments),Te.draw(O,G.LINE_STRIP,Be,Ze,qe,Si.disabled,Gr(oe,n.Color.red),_t,ut,N.debugBuffer,N.tileBorderIndexBuffer,N.debugSegments)}function Vu(N,f,w){const O=N.context,G=O.gl,oe=N.colorModeForRenderPass(),Te=new gi(G.LEQUAL,gi.ReadWrite,N.depthRangeFor3D),Be=N.useProgram("terrain"),Ze=f.getTerrainMesh(),qe=f.getTerrainData(w.tileID);O.bindFramebuffer.set(null),O.viewport.set([0,0,N.width,N.height]),O.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,f.getRTTFramebuffer().colorAttachment.get());const ut=N.transform.calculatePosMatrix(w.tileID.toUnwrapped());Be.draw(O,G.TRIANGLES,Te,$i.disabled,oe,Si.backCCW,{u_matrix:ut,u_texture:0},qe,"terrain",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}function Hs(N,f,w,O){const G=N.context,oe=w.tileSize*f.qualityFactor;w.textures[O]||(w.textures[O]=N.getTileTexture(oe)||new b(G,{width:oe,height:oe,data:null},G.gl.RGBA),w.textures[O].bind(G.gl.LINEAR,G.gl.CLAMP_TO_EDGE),O===0&&f.sourceCache.renderHistory.unshift(w.tileID.key));const Te=f.getRTTFramebuffer();Te.colorAttachment.set(w.textures[O].texture),G.bindFramebuffer.set(Te.framebuffer),G.viewport.set([0,0,oe,oe])}class cu{constructor(f){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=f,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=f.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const f=this.painter.style,w=f.terrain;for(const O in f.sourceCaches){this._coordsDescendingInv[O]={};const G=f.sourceCaches[O].getVisibleCoordinates();for(const oe of G){const Te=w.sourceCache.getTerrainCoords(oe);for(const Be in Te)this._coordsDescendingInv[O][Be]||(this._coordsDescendingInv[O][Be]=[]),this._coordsDescendingInv[O][Be].push(Te[Be])}}for(const O of f._order){const G=f._layers[O],oe=G.source;if(this._renderToTexture[G.type]&&!this._coordsDescendingInvStr[oe]){this._coordsDescendingInvStr[oe]={};for(const Te in this._coordsDescendingInv[oe])this._coordsDescendingInvStr[oe][Te]=this._coordsDescendingInv[oe][Te].map(Be=>Be.key).sort().join()}}return this._renderableTiles.forEach(O=>{for(const G in this._coordsDescendingInvStr){const oe=this._coordsDescendingInvStr[G][O.tileID.key];oe&&oe!==O.textureCoords[G]&&O.clearTextures(this.painter),w.needsRerender(G,O.tileID)&&O.clearTextures(this.painter)}this._rerender[O.tileID.key]=!O.textures.length}),w.clearRerenderCache(),w.sourceCache.removeOutdated(this.painter),this}renderLayer(f){const w=f.type,O=this.painter,G=O.style._order,oe=O.currentLayer,Te=oe+1===G.length;if(this._renderToTexture[w]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(G[oe]),!Te))return!0;if(this._renderToTexture[this._prevType]||w==="hillshade"||this._renderToTexture[w]&&Te){this._prevType=w;const Be=this._stacks.length-1,Ze=this._stacks[Be]||[];for(const qe of this._renderableTiles){if(Hs(O,O.style.terrain,qe,Be),this._rerender[qe.tileID.key]){O.context.clear({color:n.Color.transparent});for(let ut=0;ut<Ze.length;ut++){const _t=O.style._layers[Ze[ut]],Et=_t.source?this._coordsDescendingInv[_t.source][qe.tileID.key]:[qe.tileID];O._renderTileClippingMasks(_t,Et),O.renderLayer(O,O.style.sourceCaches[_t.source],_t,Et),_t.source&&(qe.textureCoords[_t.source]=this._coordsDescendingInvStr[_t.source][qe.tileID.key])}}Vu(O,O.style.terrain,qe)}if(w==="hillshade"){this._stacks.push([G[oe]]);for(const qe of this._renderableTiles){const ut=this._coordsDescendingInv[f.source][qe.tileID.key];Hs(O,O.style.terrain,qe,this._stacks.length-1),O.context.clear({color:n.Color.transparent}),O._renderTileClippingMasks(f,ut),O.renderLayer(O,O.style.sourceCaches[f.source],f,ut),Vu(O,O.style.terrain,qe)}return!0}return this._renderToTexture[w]}return!1}}const fu={symbol:function(N,f,w,O,G){if(N.renderPass!=="translucent")return;const oe=$i.disabled,Te=N.colorModeForRenderPass();w.layout.get("text-variable-anchor")&&function(Be,Ze,qe,ut,_t,Et,jt){const Ht=Ze.transform,Zt=_t==="map",br=Et==="map";for(const kr of Be){const Or=ut.getTile(kr),Qt=Or.getBucket(qe);if(!Qt||!Qt.text||!Qt.text.segments.get().length)continue;const Zr=n.evaluateSizeForZoom(Qt.textSizeData,Ht.zoom),Br=Dr(Or,1,Ze.transform.zoom),Qr=Qe(kr.posMatrix,br,Zt,Ze.transform,Br),en=qe.layout.get("icon-text-fit")!=="none"&&Qt.hasIconData();if(Zr){const pn=Math.pow(2,Ht.zoom-Or.tileID.overscaledZ);Nu(Qt,Zt,br,jt,Ht,Qr,kr.posMatrix,pn,Zr,en,Ze.style.terrain?(Jr,zn)=>Ze.style.terrain.getElevation(kr,Jr,zn):null)}}}(O,N,w,f,w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),G),w.paint.get("icon-opacity").constantOr(1)!==0&&al(N,f,w,O,!1,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),w.layout.get("icon-rotation-alignment"),w.layout.get("icon-pitch-alignment"),w.layout.get("icon-keep-upright"),oe,Te),w.paint.get("text-opacity").constantOr(1)!==0&&al(N,f,w,O,!0,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.layout.get("text-keep-upright"),oe,Te),f.map.showCollisionBoxes&&(Ns(N,f,w,O,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),!0),Ns(N,f,w,O,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),!1))},circle:function(N,f,w,O){if(N.renderPass!=="translucent")return;const G=w.paint.get("circle-opacity"),oe=w.paint.get("circle-stroke-width"),Te=w.paint.get("circle-stroke-opacity"),Be=!w.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(oe.constantOr(1)===0||Te.constantOr(1)===0))return;const Ze=N.context,qe=Ze.gl,ut=N.depthModeForSublayer(0,gi.ReadOnly),_t=$i.disabled,Et=N.colorModeForRenderPass(),jt=[];for(let Ht=0;Ht<O.length;Ht++){const Zt=O[Ht],br=f.getTile(Zt),kr=br.getBucket(w);if(!kr)continue;const Or=kr.programConfigurations.get(w.id),Qt=N.useProgram("circle",Or),Zr=kr.layoutVertexBuffer,Br=kr.indexBuffer,Qr=N.style.terrain&&N.style.terrain.getTerrainData(Zt),en={programConfiguration:Or,program:Qt,layoutVertexBuffer:Zr,indexBuffer:Br,uniformValues:Vr(N,Zt,br,w),terrainData:Qr};if(Be){const pn=kr.segments.get();for(const Jr of pn)jt.push({segments:new n.SegmentVector([Jr]),sortKey:Jr.sortKey,state:en})}else jt.push({segments:kr.segments,sortKey:0,state:en})}Be&&jt.sort((Ht,Zt)=>Ht.sortKey-Zt.sortKey);for(const Ht of jt){const{programConfiguration:Zt,program:br,layoutVertexBuffer:kr,indexBuffer:Or,uniformValues:Qt,terrainData:Zr}=Ht.state;br.draw(Ze,qe.TRIANGLES,ut,_t,Et,Si.disabled,Qt,Zr,w.id,kr,Or,Ht.segments,w.paint,N.transform.zoom,Zt)}},heatmap:function(N,f,w,O){if(w.paint.get("heatmap-opacity")!==0)if(N.renderPass==="offscreen"){const G=N.context,oe=G.gl,Te=$i.disabled,Be=new la([oe.ONE,oe.ONE],n.Color.transparent,[!0,!0,!0,!0]);(function(Ze,qe,ut){const _t=Ze.gl;Ze.activeTexture.set(_t.TEXTURE1),Ze.viewport.set([0,0,qe.width/4,qe.height/4]);let Et=ut.heatmapFbo;if(Et)_t.bindTexture(_t.TEXTURE_2D,Et.colorAttachment.get()),Ze.bindFramebuffer.set(Et.framebuffer);else{const jt=_t.createTexture();_t.bindTexture(_t.TEXTURE_2D,jt),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_S,_t.CLAMP_TO_EDGE),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_T,_t.CLAMP_TO_EDGE),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MIN_FILTER,_t.LINEAR),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MAG_FILTER,_t.LINEAR),Et=ut.heatmapFbo=Ze.createFramebuffer(qe.width/4,qe.height/4,!1),function(Ht,Zt,br,kr){const Or=Ht.gl;Or.texImage2D(Or.TEXTURE_2D,0,Or.RGBA,Zt.width/4,Zt.height/4,0,Or.RGBA,Ht.extRenderToTextureHalfFloat?Ht.extTextureHalfFloat.HALF_FLOAT_OES:Or.UNSIGNED_BYTE,null),kr.colorAttachment.set(br)}(Ze,qe,jt,Et)}})(G,N,w),G.clear({color:n.Color.transparent});for(let Ze=0;Ze<O.length;Ze++){const qe=O[Ze];if(f.hasRenderableParent(qe))continue;const ut=f.getTile(qe),_t=ut.getBucket(w);if(!_t)continue;const Et=_t.programConfigurations.get(w.id),jt=N.useProgram("heatmap",Et),{zoom:Ht}=N.transform;jt.draw(G,oe.TRIANGLES,gi.disabled,Te,Be,Si.disabled,tn(qe.posMatrix,ut,Ht,w.paint.get("heatmap-intensity")),null,w.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,w.paint,N.transform.zoom,Et)}G.viewport.set([0,0,N.width,N.height])}else N.renderPass==="translucent"&&(N.context.setColorMode(N.colorModeForRenderPass()),function(G,oe){const Te=G.context,Be=Te.gl,Ze=oe.heatmapFbo;if(!Ze)return;Te.activeTexture.set(Be.TEXTURE0),Be.bindTexture(Be.TEXTURE_2D,Ze.colorAttachment.get()),Te.activeTexture.set(Be.TEXTURE1);let qe=oe.colorRampTexture;qe||(qe=oe.colorRampTexture=new b(Te,oe.colorRamp,Be.RGBA)),qe.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),G.useProgram("heatmapTexture").draw(Te,Be.TRIANGLES,gi.disabled,$i.disabled,G.colorModeForRenderPass(),Si.disabled,((ut,_t,Et,jt)=>{const Ht=n.create();n.ortho(Ht,0,ut.width,ut.height,0,0,1);const Zt=ut.context.gl;return{u_matrix:Ht,u_world:[Zt.drawingBufferWidth,Zt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:_t.paint.get("heatmap-opacity")}})(G,oe),null,oe.id,G.viewportBuffer,G.quadTriangleIndexBuffer,G.viewportSegments,oe.paint,G.transform.zoom)}(N,w))},line:function(N,f,w,O){if(N.renderPass!=="translucent")return;const G=w.paint.get("line-opacity"),oe=w.paint.get("line-width");if(G.constantOr(1)===0||oe.constantOr(1)===0)return;const Te=N.depthModeForSublayer(0,gi.ReadOnly),Be=N.colorModeForRenderPass(),Ze=w.paint.get("line-dasharray"),qe=w.paint.get("line-pattern"),ut=qe.constantOr(1),_t=w.paint.get("line-gradient"),Et=w.getCrossfadeParameters(),jt=ut?"linePattern":Ze?"lineSDF":_t?"lineGradient":"line",Ht=N.context,Zt=Ht.gl;let br=!0;for(const kr of O){const Or=f.getTile(kr);if(ut&&!Or.patternsLoaded())continue;const Qt=Or.getBucket(w);if(!Qt)continue;const Zr=Qt.programConfigurations.get(w.id),Br=N.context.program.get(),Qr=N.useProgram(jt,Zr),en=br||Qr.program!==Br,pn=N.style.terrain&&N.style.terrain.getTerrainData(kr),Jr=qe.constantOr(null);if(Jr&&Or.imageAtlas){const Vn=Or.imageAtlas,ai=Vn.patternPositions[Jr.to.toString()],bi=Vn.patternPositions[Jr.from.toString()];ai&&bi&&Zr.setConstantPatternPositions(ai,bi)}const zn=pn?kr:null,In=ut?hn(N,Or,w,Et,zn):Ze?bn(N,Or,w,Ze,Et,zn):_t?wn(N,Or,w,Qt.lineClipsArray.length,zn):Sn(N,Or,w,zn);if(ut)Ht.activeTexture.set(Zt.TEXTURE0),Or.imageAtlasTexture.bind(Zt.LINEAR,Zt.CLAMP_TO_EDGE),Zr.updatePaintBuffers(Et);else if(Ze&&(en||N.lineAtlas.dirty))Ht.activeTexture.set(Zt.TEXTURE0),N.lineAtlas.bind(Ht);else if(_t){const Vn=Qt.gradients[w.id];let ai=Vn.texture;if(w.gradientVersion!==Vn.version){let bi=256;if(w.stepInterpolant){const qn=f.getSource().maxzoom,ta=kr.canonical.z===qn?Math.ceil(1<<N.transform.maxZoom-kr.canonical.z):1;bi=n.clamp(n.nextPowerOfTwo(Qt.maxLineLength/n.EXTENT*1024*ta),256,Ht.maxTextureSize)}Vn.gradient=n.renderColorRamp({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:bi,image:Vn.gradient||void 0,clips:Qt.lineClipsArray}),Vn.texture?Vn.texture.update(Vn.gradient):Vn.texture=new b(Ht,Vn.gradient,Zt.RGBA),Vn.version=w.gradientVersion,ai=Vn.texture}Ht.activeTexture.set(Zt.TEXTURE0),ai.bind(w.stepInterpolant?Zt.NEAREST:Zt.LINEAR,Zt.CLAMP_TO_EDGE)}Qr.draw(Ht,Zt.TRIANGLES,Te,N.stencilModeForClipping(kr),Be,Si.disabled,In,pn,w.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,w.paint,N.transform.zoom,Zr,Qt.layoutVertexBuffer2),br=!1}},fill:function(N,f,w,O){const G=w.paint.get("fill-color"),oe=w.paint.get("fill-opacity");if(oe.constantOr(1)===0)return;const Te=N.colorModeForRenderPass(),Be=w.paint.get("fill-pattern"),Ze=N.opaquePassEnabledForLayer()&&!Be.constantOr(1)&&G.constantOr(n.Color.transparent).a===1&&oe.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===Ze){const qe=N.depthModeForSublayer(1,N.renderPass==="opaque"?gi.ReadWrite:gi.ReadOnly);ol(N,f,w,O,qe,Te,!1)}if(N.renderPass==="translucent"&&w.paint.get("fill-antialias")){const qe=N.depthModeForSublayer(w.getPaintProperty("fill-outline-color")?2:0,gi.ReadOnly);ol(N,f,w,O,qe,Te,!0)}},"fill-extrusion":function(N,f,w,O){const G=w.paint.get("fill-extrusion-opacity");if(G!==0&&N.renderPass==="translucent"){const oe=new gi(N.context.gl.LEQUAL,gi.ReadWrite,N.depthRangeFor3D);if(G!==1||w.paint.get("fill-extrusion-pattern").constantOr(1))jl(N,f,w,O,oe,$i.disabled,la.disabled),jl(N,f,w,O,oe,N.stencilModeFor3D(),N.colorModeForRenderPass());else{const Te=N.colorModeForRenderPass();jl(N,f,w,O,oe,$i.disabled,Te)}}},hillshade:function(N,f,w,O){if(N.renderPass!=="offscreen"&&N.renderPass!=="translucent")return;const G=N.context,oe=N.depthModeForSublayer(0,gi.ReadOnly),Te=N.colorModeForRenderPass(),[Be,Ze]=N.renderPass==="translucent"?N.stencilConfigForOverlap(O):[{},O];for(const qe of Ze){const ut=f.getTile(qe);ut.needsHillshadePrepare!==void 0&&ut.needsHillshadePrepare&&N.renderPass==="offscreen"?jc(N,ut,w,oe,$i.disabled,Te):N.renderPass==="translucent"&&Uu(N,qe,ut,w,oe,Be[qe.overscaledZ],Te)}G.viewport.set([0,0,N.width,N.height])},raster:function(N,f,w,O){if(N.renderPass!=="translucent"||w.paint.get("raster-opacity")===0||!O.length)return;const G=N.context,oe=G.gl,Te=f.getSource(),Be=N.useProgram("raster"),Ze=N.colorModeForRenderPass(),[qe,ut]=Te instanceof q?[{},O]:N.stencilConfigForOverlap(O),_t=ut[ut.length-1].overscaledZ,Et=!N.options.moving;for(const jt of ut){const Ht=N.depthModeForSublayer(jt.overscaledZ-_t,w.paint.get("raster-opacity")===1?gi.ReadWrite:gi.ReadOnly,oe.LESS),Zt=f.getTile(jt);Zt.registerFadeDuration(w.paint.get("raster-fade-duration"));const br=f.findLoadedParent(jt,0),kr=Lo(Zt,br,f,w,N.transform,N.style.terrain);let Or,Qt;const Zr=w.paint.get("raster-resampling")==="nearest"?oe.NEAREST:oe.LINEAR;G.activeTexture.set(oe.TEXTURE0),Zt.texture.bind(Zr,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(oe.TEXTURE1),br?(br.texture.bind(Zr,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),Or=Math.pow(2,br.tileID.overscaledZ-Zt.tileID.overscaledZ),Qt=[Zt.tileID.canonical.x*Or%1,Zt.tileID.canonical.y*Or%1]):Zt.texture.bind(Zr,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST);const Br=N.style.terrain&&N.style.terrain.getTerrainData(jt),Qr=Br?jt:null,en=Qr?Qr.posMatrix:N.transform.calculatePosMatrix(jt.toUnwrapped(),Et),pn=Yn(en,Qt||[0,0],Or||1,kr,w);Te instanceof q?Be.draw(G,oe.TRIANGLES,Ht,$i.disabled,Ze,Si.disabled,pn,Br,w.id,Te.boundsBuffer,N.quadTriangleIndexBuffer,Te.boundsSegments):Be.draw(G,oe.TRIANGLES,Ht,qe[jt.overscaledZ],Ze,Si.disabled,pn,Br,w.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}},background:function(N,f,w,O){const G=w.paint.get("background-color"),oe=w.paint.get("background-opacity");if(oe===0)return;const Te=N.context,Be=Te.gl,Ze=N.transform,qe=Ze.tileSize,ut=w.paint.get("background-pattern");if(N.isPatternMissing(ut))return;const _t=!ut&&G.a===1&&oe===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass!==_t)return;const Et=$i.disabled,jt=N.depthModeForSublayer(0,_t==="opaque"?gi.ReadWrite:gi.ReadOnly),Ht=N.colorModeForRenderPass(),Zt=N.useProgram(ut?"backgroundPattern":"background"),br=O||Ze.coveringTiles({tileSize:qe,terrain:N.style.terrain});ut&&(Te.activeTexture.set(Be.TEXTURE0),N.imageManager.bind(N.context));const kr=w.getCrossfadeParameters();for(const Or of br){const Qt=O?Or.posMatrix:N.transform.calculatePosMatrix(Or.toUnwrapped()),Zr=ut?vi(Qt,oe,N,ut,{tileID:Or,tileSize:qe},kr):Ai(Qt,oe,G),Br=N.style.terrain&&N.style.terrain.getTerrainData(Or);Zt.draw(Te,Be.TRIANGLES,jt,Et,Ht,Si.disabled,Zr,Br,w.id,N.tileExtentBuffer,N.quadTriangleIndexBuffer,N.tileExtentSegments)}},debug:function(N,f,w){for(let O=0;O<w.length;O++)Hu(N,f,w[O])},custom:function(N,f,w){const O=N.context,G=w.implementation;if(N.renderPass==="offscreen"){const oe=G.prerender;oe&&(N.setCustomLayerDefaults(),O.setColorMode(N.colorModeForRenderPass()),oe.call(G,O.gl,N.transform.customLayerMatrix()),O.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),O.setColorMode(N.colorModeForRenderPass()),O.setStencilMode($i.disabled);const oe=G.renderingMode==="3d"?new gi(N.context.gl.LEQUAL,gi.ReadWrite,N.depthRangeFor3D):N.depthModeForSublayer(0,gi.ReadOnly);O.setDepthMode(oe),G.render(O.gl,N.transform.customLayerMatrix()),O.setDirty(),N.setBaseState(),O.bindFramebuffer.set(null)}}};class hu{constructor(f,w){this.context=new uu(f),this.transform=w,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:n.create(),renderTime:0},this.setup(),this.numSublayers=Ee.maxUnderzooming+Ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yr,this.gpuTimers={}}resize(f,w,O){if(this.width=f*O,this.height=w*O,this.pixelRatio=O,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const G of this.style._order)this.style._layers[G].resize()}setup(){const f=this.context,w=new n.PosArray;w.emplaceBack(0,0),w.emplaceBack(n.EXTENT,0),w.emplaceBack(0,n.EXTENT),w.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(w,Kr.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);const O=new n.PosArray;O.emplaceBack(0,0),O.emplaceBack(n.EXTENT,0),O.emplaceBack(0,n.EXTENT),O.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=f.createVertexBuffer(O,Kr.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);const G=new n.RasterBoundsArray;G.emplaceBack(0,0,0,0),G.emplaceBack(n.EXTENT,0,n.EXTENT,0),G.emplaceBack(0,n.EXTENT,0,n.EXTENT),G.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(G,ne.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);const oe=new n.PosArray;oe.emplaceBack(0,0),oe.emplaceBack(1,0),oe.emplaceBack(0,1),oe.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(oe,Kr.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);const Te=new n.LineStripIndexArray;Te.emplaceBack(0),Te.emplaceBack(1),Te.emplaceBack(3),Te.emplaceBack(2),Te.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(Te);const Be=new n.TriangleIndexArray;Be.emplaceBack(0,1,2),Be.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(Be),this.emptyTexture=new b(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA);const Ze=this.context.gl;this.stencilClearMode=new $i({func:Ze.ALWAYS,mask:0},0,255,Ze.ZERO,Ze.ZERO,Ze.ZERO)}clearStencil(){const f=this.context,w=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const O=n.create();n.ortho(O,0,this.width,this.height,0,0,1),n.scale(O,O,[w.drawingBufferWidth,w.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(f,w.TRIANGLES,gi.disabled,this.stencilClearMode,la.disabled,Si.disabled,qr(O),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(f,w){if(this.currentStencilSource===f.source||!f.isTileClipped()||!w||!w.length)return;this.currentStencilSource=f.source;const O=this.context,G=O.gl;this.nextStencilID+w.length>256&&this.clearStencil(),O.setColorMode(la.disabled),O.setDepthMode(gi.disabled);const oe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Te of w){const Be=this._tileClippingMaskIDs[Te.key]=this.nextStencilID++,Ze=this.style.terrain&&this.style.terrain.getTerrainData(Te);oe.draw(O,G.TRIANGLES,gi.disabled,new $i({func:G.ALWAYS,mask:0},Be,255,G.KEEP,G.KEEP,G.REPLACE),la.disabled,Si.disabled,qr(Te.posMatrix),Ze,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const f=this.nextStencilID++,w=this.context.gl;return new $i({func:w.NOTEQUAL,mask:255},f,255,w.KEEP,w.KEEP,w.REPLACE)}stencilModeForClipping(f){const w=this.context.gl;return new $i({func:w.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,w.KEEP,w.KEEP,w.REPLACE)}stencilConfigForOverlap(f){const w=this.context.gl,O=f.sort((Te,Be)=>Be.overscaledZ-Te.overscaledZ),G=O[O.length-1].overscaledZ,oe=O[0].overscaledZ-G+1;if(oe>1){this.currentStencilSource=void 0,this.nextStencilID+oe>256&&this.clearStencil();const Te={};for(let Be=0;Be<oe;Be++)Te[Be+G]=new $i({func:w.GEQUAL,mask:255},Be+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=oe,[Te,O]}return[{[G]:$i.disabled},O]}colorModeForRenderPass(){const f=this.context.gl;return this._showOverdrawInspector?new la([f.CONSTANT_COLOR,f.ONE],new n.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?la.unblended:la.alphaBlended}depthModeForSublayer(f,w,O){if(!this.opaquePassEnabledForLayer())return gi.disabled;const G=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new gi(O||this.context.gl.LEQUAL,w,[G,G])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(f,w){this.style=f,this.options=w,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(n.exported.now()),this.imageManager.beginFrame();const O=this.style._order,G=this.style.sourceCaches,oe=this.style.terrain&&new cu(this);for(const qe in G){const ut=G[qe];ut.used&&ut.prepare(this.context)}const Te={},Be={},Ze={};for(const qe in G){const ut=G[qe];Te[qe]=ut.getVisibleCoordinates(),Be[qe]=Te[qe].slice().reverse(),Ze[qe]=ut.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let qe=0;qe<O.length;qe++)if(this.style._layers[O[qe]].is3D()){this.opaquePassCutoff=qe;break}if(oe){this.opaquePassCutoff=0;const qe=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!n.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||qe.length)&&(n.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ut,_t){const Et=ut.context,jt=Et.gl,Ht=la.unblended,Zt=new gi(jt.LEQUAL,gi.ReadWrite,[0,1]),br=_t.getTerrainMesh(),kr=_t.sourceCache.getRenderableTiles(),Or=ut.useProgram("terrainDepth");Et.bindFramebuffer.set(_t.getFramebuffer("depth").framebuffer),Et.viewport.set([0,0,ut.width/devicePixelRatio,ut.height/devicePixelRatio]),Et.clear({color:n.Color.transparent,depth:1});for(const Qt of kr){const Zr=_t.getTerrainData(Qt.tileID),Br=ut.transform.calculatePosMatrix(Qt.tileID.toUnwrapped());Or.draw(Et,jt.TRIANGLES,Zt,$i.disabled,Ht,Si.backCCW,{u_matrix:Br},Zr,"terrain",br.vertexBuffer,br.indexBuffer,br.segments)}Et.bindFramebuffer.set(null),Et.viewport.set([0,0,ut.width,ut.height])}(this,this.style.terrain),function(ut,_t){const Et=ut.context,jt=Et.gl,Ht=la.unblended,Zt=new gi(jt.LEQUAL,gi.ReadWrite,[0,1]),br=_t.getTerrainMesh(),kr=_t.getCoordsTexture(),Or=_t.sourceCache.getRenderableTiles(),Qt=ut.useProgram("terrainCoords");Et.bindFramebuffer.set(_t.getFramebuffer("coords").framebuffer),Et.viewport.set([0,0,ut.width/devicePixelRatio,ut.height/devicePixelRatio]),Et.clear({color:n.Color.transparent,depth:1}),_t.coordsIndex=[];for(const Zr of Or){const Br=_t.getTerrainData(Zr.tileID);Et.activeTexture.set(jt.TEXTURE0),jt.bindTexture(jt.TEXTURE_2D,kr.texture);const Qr=ut.transform.calculatePosMatrix(Zr.tileID.toUnwrapped());Qt.draw(Et,jt.TRIANGLES,Zt,$i.disabled,Ht,Si.backCCW,{u_matrix:Qr,u_terrain_coords_id:(255-_t.coordsIndex.length)/255,u_texture:0},Br,"terrain",br.vertexBuffer,br.indexBuffer,br.segments),_t.coordsIndex.push(Zr.tileID.key)}Et.bindFramebuffer.set(null),Et.viewport.set([0,0,ut.width,ut.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const qe of O){const ut=this.style._layers[qe];if(!ut.hasOffscreenPass()||ut.isHidden(this.transform.zoom))continue;const _t=Be[ut.source];(ut.type==="custom"||_t.length)&&this.renderLayer(this,G[ut.source],ut,_t)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:w.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=w.showOverdrawInspector,this.depthRangeFor3D=[0,1-(f._order.length+2)*this.numSublayers*this.depthEpsilon],!oe)for(this.renderPass="opaque",this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){const qe=this.style._layers[O[this.currentLayer]],ut=G[qe.source],_t=Te[qe.source];this._renderTileClippingMasks(qe,_t),this.renderLayer(this,ut,qe,_t)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const qe=this.style._layers[O[this.currentLayer]],ut=G[qe.source];if(oe&&oe.renderLayer(qe))continue;const _t=(qe.type==="symbol"?Ze:Be)[qe.source];this._renderTileClippingMasks(qe,Te[qe.source]),this.renderLayer(this,ut,qe,_t)}if(this.options.showTileBoundaries){let qe,ut;Object.values(this.style._layers).forEach(_t=>{_t.source&&!_t.isHidden(this.transform.zoom)&&(_t.source!==(ut&&ut.id)&&(ut=this.style.sourceCaches[_t.source]),(!qe||qe.getSource().maxzoom<ut.getSource().maxzoom)&&(qe=ut))}),qe&&fu.debug(this,qe,qe.getVisibleCoordinates())}this.options.showPadding&&function(qe){const ut=qe.transform.padding;Al(qe,qe.transform.height-(ut.top||0),3,Cs),Al(qe,ut.bottom||0,3,Qo),Us(qe,ut.left||0,3,sl),Us(qe,qe.transform.width-(ut.right||0),3,sc);const _t=qe.transform.centerPoint;(function(Et,jt,Ht,Zt){Sl(Et,jt-1,Ht-10,2,20,Zt),Sl(Et,jt-10,Ht-1,20,2,Zt)})(qe,_t.x,qe.transform.height-_t.y,Tl)}(this),this.context.setDefault()}renderLayer(f,w,O,G){O.isHidden(this.transform.zoom)||(O.type==="background"||O.type==="custom"||(G||[]).length)&&(this.id=O.id,this.gpuTimingStart(O),fu[O.type](f,w,O,G,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(f){if(!this.options.gpuTiming)return;const w=this.context.extTimerQuery;let O=this.gpuTimers[f.id];O||(O=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:w.createQueryEXT()}),O.calls++,w.beginQueryEXT(w.TIME_ELAPSED_EXT,O.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}collectGpuTimers(){const f=this.gpuTimers;return this.gpuTimers={},f}queryGpuTimers(f){const w={};for(const O in f){const G=f[O],oe=this.context.extTimerQuery,Te=oe.getQueryObjectEXT(G.query,oe.QUERY_RESULT_EXT)/1e6;oe.deleteQueryEXT(G.query),w[O]=Te}return w}translatePosMatrix(f,w,O,G,oe){if(!O[0]&&!O[1])return f;const Te=oe?G==="map"?this.transform.angle:0:G==="viewport"?-this.transform.angle:0;if(Te){const qe=Math.sin(Te),ut=Math.cos(Te);O=[O[0]*ut-O[1]*qe,O[0]*qe+O[1]*ut]}const Be=[oe?O[0]:Dr(w,O[0],this.transform.zoom),oe?O[1]:Dr(w,O[1],this.transform.zoom),0],Ze=new Float32Array(16);return n.translate(Ze,f,Be),Ze}saveTileTexture(f){const w=this._tileTextures[f.size[0]];w?w.push(f):this._tileTextures[f.size[0]]=[f]}getTileTexture(f){const w=this._tileTextures[f];return w&&w.length>0?w.pop():null}isPatternMissing(f){if(!f)return!1;if(!f.from||!f.to)return!0;const w=this.imageManager.getPattern(f.from.toString()),O=this.imageManager.getPattern(f.to.toString());return!w||!O}useProgram(f,w){this.cache=this.cache||{};const O=f+(w?w.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[O]||(this.cache[O]=new Tr(this.context,f,Rt[f],w,Mo[f],this._showOverdrawInspector,this.style.terrain)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new b(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Gu{constructor(f,w){this.points=f,this.planes=w}static fromInvProjectionMatrix(f,w,O){const G=Math.pow(2,O),oe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Be=>{const Ze=1/(Be=n.transformMat4([],Be,f))[3]/w*G;return n.mul$1(Be,Be,[Ze,Ze,1/Be[3],Ze])}),Te=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Be=>{const Ze=n.sub([],oe[Be[0]],oe[Be[1]]),qe=n.sub([],oe[Be[2]],oe[Be[1]]),ut=n.normalize([],n.cross([],Ze,qe)),_t=-n.dot(ut,oe[Be[1]]);return ut.concat(_t)});return new Gu(oe,Te)}}class Po{constructor(f,w){this.min=f,this.max=w,this.center=n.scale$1([],n.add([],this.min,this.max),.5)}quadrant(f){const w=[f%2==0,f<2],O=n.clone$2(this.min),G=n.clone$2(this.max);for(let oe=0;oe<w.length;oe++)O[oe]=w[oe]?this.min[oe]:this.center[oe],G[oe]=w[oe]?this.center[oe]:this.max[oe];return G[2]=this.max[2],new Po(O,G)}distanceX(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]}distanceY(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]}intersects(f){const w=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let O=!0;for(let G=0;G<f.planes.length;G++){const oe=f.planes[G];let Te=0;for(let Be=0;Be<w.length;Be++)n.dot$1(oe,w[Be])>=0&&Te++;if(Te===0)return 0;Te!==w.length&&(O=!1)}if(O)return 2;for(let G=0;G<3;G++){let oe=Number.MAX_VALUE,Te=-Number.MAX_VALUE;for(let Be=0;Be<f.points.length;Be++){const Ze=f.points[Be][G]-this.min[G];oe=Math.min(oe,Ze),Te=Math.max(Te,Ze)}if(Te<0||oe>this.max[G]-this.min[G])return 0}return 1}}class El{constructor(f=0,w=0,O=0,G=0){if(isNaN(f)||f<0||isNaN(w)||w<0||isNaN(O)||O<0||isNaN(G)||G<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=w,this.left=O,this.right=G}interpolate(f,w,O){return w.top!=null&&f.top!=null&&(this.top=n.number(f.top,w.top,O)),w.bottom!=null&&f.bottom!=null&&(this.bottom=n.number(f.bottom,w.bottom,O)),w.left!=null&&f.left!=null&&(this.left=n.number(f.left,w.left,O)),w.right!=null&&f.right!=null&&(this.right=n.number(f.right,w.right,O)),this}getCenter(f,w){const O=n.clamp((this.left+f-this.right)/2,0,f),G=n.clamp((this.top+w-this.bottom)/2,0,w);return new n.pointGeometry(O,G)}equals(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right}clone(){return new El(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class hs{constructor(f,w,O,G,oe){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=oe===void 0||!!oe,this._minZoom=f||0,this._maxZoom=w||22,this._minPitch=O==null?0:O,this._maxPitch=G==null?60:G,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new El,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const f=new hs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f._center=this._center,f._elevation=this._elevation,f.zoom=this.zoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))}get maxZoom(){return this._maxZoom}set maxZoom(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))}get minPitch(){return this._minPitch}set minPitch(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))}get maxPitch(){return this._maxPitch}set maxPitch(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(f){f===void 0?f=!0:f===null&&(f=!1),this._renderWorldCopies=f}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(f){const w=-n.wrap(f,-180,180)*Math.PI/180;var O;this.angle!==w&&(this._unmodified=!1,this.angle=w,this._calcMatrices(),this.rotationMatrix=(O=new n.ARRAY_TYPE(4),n.ARRAY_TYPE!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O),function(G,oe,Te){var Be=oe[0],Ze=oe[1],qe=oe[2],ut=oe[3],_t=Math.sin(Te),Et=Math.cos(Te);G[0]=Be*Et+qe*_t,G[1]=Ze*Et+ut*_t,G[2]=Be*-_t+qe*Et,G[3]=Ze*-_t+ut*Et}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(f){const w=n.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==w&&(this._unmodified=!1,this._pitch=w,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(f){const w=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==w&&(this._unmodified=!1,this._zoom=w,this.scale=this.zoomScale(w),this.tileZoom=Math.floor(w),this.zoomFraction=w-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(f){f!==this._elevation&&(this._elevation=f,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(f){return this._edgeInsets.equals(f)}interpolatePadding(f,w,O){this._unmodified=!1,this._edgeInsets.interpolate(f,w,O),this._constrain(),this._calcMatrices()}coveringZoomLevel(f){const w=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,w)}getVisibleUnwrappedCoordinates(f){const w=[new n.UnwrappedTileID(0,f)];if(this._renderWorldCopies){const O=this.pointCoordinate(new n.pointGeometry(0,0)),G=this.pointCoordinate(new n.pointGeometry(this.width,0)),oe=this.pointCoordinate(new n.pointGeometry(this.width,this.height)),Te=this.pointCoordinate(new n.pointGeometry(0,this.height)),Be=Math.floor(Math.min(O.x,G.x,oe.x,Te.x)),Ze=Math.floor(Math.max(O.x,G.x,oe.x,Te.x)),qe=1;for(let ut=Be-qe;ut<=Ze+qe;ut++)ut!==0&&w.push(new n.UnwrappedTileID(ut,f))}return w}coveringTiles(f){var w,O;let G=this.coveringZoomLevel(f);const oe=G;if(f.minzoom!==void 0&&G<f.minzoom)return[];f.maxzoom!==void 0&&G>f.maxzoom&&(G=f.maxzoom);const Te=this.pointCoordinate(this.getCameraPoint()),Be=n.MercatorCoordinate.fromLngLat(this.center),Ze=Math.pow(2,G),qe=[Ze*Te.x,Ze*Te.y,0],ut=[Ze*Be.x,Ze*Be.y,0],_t=Gu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G);let Et=f.minzoom||0;!f.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Et=G);const jt=f.terrain?2/Math.min(this.tileSize,f.tileSize)*this.tileSize:3,Ht=Qt=>({aabb:new Po([Qt*Ze,0,0],[(Qt+1)*Ze,Ze,0]),zoom:0,x:0,y:0,wrap:Qt,fullyVisible:!1}),Zt=[],br=[],kr=G,Or=f.reparseOverscaled?oe:G;if(this._renderWorldCopies)for(let Qt=1;Qt<=3;Qt++)Zt.push(Ht(-Qt)),Zt.push(Ht(Qt));for(Zt.push(Ht(0));Zt.length>0;){const Qt=Zt.pop(),Zr=Qt.x,Br=Qt.y;let Qr=Qt.fullyVisible;if(!Qr){const Vn=Qt.aabb.intersects(_t);if(Vn===0)continue;Qr=Vn===2}const en=f.terrain?qe:ut,pn=Qt.aabb.distanceX(en),Jr=Qt.aabb.distanceY(en),zn=Math.max(Math.abs(pn),Math.abs(Jr)),In=jt+(1<<kr-Qt.zoom)-2;if(Qt.zoom===kr||zn>In&&Qt.zoom>=Et){const Vn=kr-Qt.zoom,ai=qe[0]-.5-(Zr<<Vn),bi=qe[1]-.5-(Br<<Vn);br.push({tileID:new n.OverscaledTileID(Qt.zoom===kr?Or:Qt.zoom,Qt.wrap,Qt.zoom,Zr,Br),distanceSq:n.sqrLen([ut[0]-.5-Zr,ut[1]-.5-Br]),tileDistanceToCamera:Math.sqrt(ai*ai+bi*bi)})}else for(let Vn=0;Vn<4;Vn++){const ai=(Zr<<1)+Vn%2,bi=(Br<<1)+(Vn>>1),qn=Qt.zoom+1;let ta=Qt.aabb.quadrant(Vn);if(f.terrain){const ra=new n.OverscaledTileID(qn,Qt.wrap,qn,ai,bi),Gi=f.terrain.getMinMaxElevation(ra),ji=(w=Gi.minElevation)!==null&&w!==void 0?w:this.elevation,da=(O=Gi.maxElevation)!==null&&O!==void 0?O:this.elevation;ta=new Po([ta.min[0],ta.min[1],ji],[ta.max[0],ta.max[1],da])}Zt.push({aabb:ta,zoom:qn,x:ai,y:bi,wrap:Qt.wrap,fullyVisible:Qr})}}return br.sort((Qt,Zr)=>Qt.distanceSq-Zr.distanceSq).map(Qt=>Qt.tileID)}resize(f,w){this.width=f,this.height=w,this.pixelsToGLUnits=[2/f,-2/w],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(f){return Math.pow(2,f)}scaleZoom(f){return Math.log(f)/Math.LN2}project(f){const w=n.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.pointGeometry(n.mercatorXfromLng(f.lng)*this.worldSize,n.mercatorYfromLat(w)*this.worldSize)}unproject(f){return new n.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(f){this.freezeElevation||(this.elevation=f?this.getElevation(this._center,f):0)}getElevation(f,w){const O=n.MercatorCoordinate.fromLngLat(f),G=(1<<this.tileZoom)*n.EXTENT,oe=O.x*G,Te=O.y*G,Be=Math.floor(oe/n.EXTENT),Ze=Math.floor(Te/n.EXTENT),qe=new n.OverscaledTileID(this.tileZoom,0,this.tileZoom,Be,Ze);return w.getElevation(qe,oe%n.EXTENT,Te%n.EXTENT,n.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(f){const w=this.pointLocation(this.centerPoint,f),O=this.getElevation(w,f);if(!(this.elevation-O))return;const G=this.getCameraPosition(),oe=n.MercatorCoordinate.fromLngLat(G.lngLat,G.altitude),Te=n.MercatorCoordinate.fromLngLat(w,O),Be=oe.x-Te.x,Ze=oe.y-Te.y,qe=oe.z-Te.z,ut=Math.sqrt(Be*Be+Ze*Ze+qe*qe),_t=this.scaleZoom(this.cameraToCenterDistance/ut/this.tileSize);this._elevation=O,this._center=w,this.zoom=_t}setLocationAtPoint(f,w){const O=this.pointCoordinate(w),G=this.pointCoordinate(this.centerPoint),oe=this.locationCoordinate(f),Te=new n.MercatorCoordinate(oe.x-(O.x-G.x),oe.y-(O.y-G.y));this.center=this.coordinateLocation(Te),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(f,w){return w?this.coordinatePoint(this.locationCoordinate(f),this.getElevation(f,w),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(f))}pointLocation(f,w){return this.coordinateLocation(this.pointCoordinate(f,w))}locationCoordinate(f){return n.MercatorCoordinate.fromLngLat(f)}coordinateLocation(f){return f&&f.toLngLat()}pointCoordinate(f,w){if(w){const Et=w.pointCoordinate(f);if(Et!=null)return Et}const O=[f.x,f.y,0,1],G=[f.x,f.y,1,1];n.transformMat4(O,O,this.pixelMatrixInverse),n.transformMat4(G,G,this.pixelMatrixInverse);const oe=O[3],Te=G[3],Be=O[1]/oe,Ze=G[1]/Te,qe=O[2]/oe,ut=G[2]/Te,_t=qe===ut?0:(0-qe)/(ut-qe);return new n.MercatorCoordinate(n.number(O[0]/oe,G[0]/Te,_t)/this.worldSize,n.number(Be,Ze,_t)/this.worldSize)}coordinatePoint(f,w=0,O=this.pixelMatrix){const G=[f.x*this.worldSize,f.y*this.worldSize,w,1];return n.transformMat4(G,G,O),new n.pointGeometry(G[0]/G[3],G[1]/G[3])}getBounds(){const f=Math.max(0,this.height/2-this.getHorizon());return new n.LngLatBounds().extend(this.pointLocation(new n.pointGeometry(0,f))).extend(this.pointLocation(new n.pointGeometry(this.width,f))).extend(this.pointLocation(new n.pointGeometry(this.width,this.height))).extend(this.pointLocation(new n.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(f,w=!1){const O=f.key,G=w?this._alignedPosMatrixCache:this._posMatrixCache;if(G[O])return G[O];const oe=f.canonical,Te=this.worldSize/this.zoomScale(oe.z),Be=oe.x+Math.pow(2,oe.z)*f.wrap,Ze=n.identity(new Float64Array(16));return n.translate(Ze,Ze,[Be*Te,oe.y*Te,0]),n.scale(Ze,Ze,[Te/n.EXTENT,Te/n.EXTENT,1]),n.multiply(Ze,w?this.alignedProjMatrix:this.projMatrix,Ze),G[O]=new Float32Array(Ze),G[O]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let f,w,O,G,oe=-90,Te=90,Be=-180,Ze=180;const qe=this.size,ut=this._unmodified;if(this.latRange){const jt=this.latRange;oe=n.mercatorYfromLat(jt[1])*this.worldSize,Te=n.mercatorYfromLat(jt[0])*this.worldSize,f=Te-oe<qe.y?qe.y/(Te-oe):0}if(this.lngRange){const jt=this.lngRange;Be=n.wrap(n.mercatorXfromLng(jt[0])*this.worldSize,0,this.worldSize),Ze=n.wrap(n.mercatorXfromLng(jt[1])*this.worldSize,0,this.worldSize),Ze<Be&&(Ze+=this.worldSize),w=Ze-Be<qe.x?qe.x/(Ze-Be):0}const _t=this.point,Et=Math.max(w||0,f||0);if(Et)return this.center=this.unproject(new n.pointGeometry(w?(Ze+Be)/2:_t.x,f?(Te+oe)/2:_t.y)),this.zoom+=this.scaleZoom(Et),this._unmodified=ut,void(this._constraining=!1);if(this.latRange){const jt=_t.y,Ht=qe.y/2;jt-Ht<oe&&(G=oe+Ht),jt+Ht>Te&&(G=Te-Ht)}if(this.lngRange){const jt=(Be+Ze)/2,Ht=n.wrap(_t.x,jt-this.worldSize/2,jt+this.worldSize/2),Zt=qe.x/2;Ht-Zt<Be&&(O=Be+Zt),Ht+Zt>Ze&&(O=Ze-Zt)}O===void 0&&G===void 0||(this.center=this.unproject(new n.pointGeometry(O!==void 0?O:_t.x,G!==void 0?G:_t.y)).wrap()),this._unmodified=ut,this._constraining=!1}_calcMatrices(){if(!this.height)return;const f=this.centerOffset,w=this.point.x,O=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let G=n.identity(new Float64Array(16));n.scale(G,G,[this.width/2,-this.height/2,1]),n.translate(G,G,[1,-1,0]),this.labelPlaneMatrix=G,G=n.identity(new Float64Array(16)),n.scale(G,G,[1,-1,1]),n.translate(G,G,[-1,-1,0]),n.scale(G,G,[2/this.width,2/this.height,1]),this.glCoordMatrix=G,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const oe=Math.PI/2+this._pitch,Te=this._fov*(.5+f.y/this.height),Be=Math.sin(Te)*this.cameraToSeaLevelDistance/Math.sin(n.clamp(Math.PI-oe-Te,.01,Math.PI-.01)),Ze=this.getHorizon(),qe=2*Math.atan(Ze/this.cameraToCenterDistance)*(.5+f.y/(2*Ze)),ut=Math.sin(qe)*this.cameraToSeaLevelDistance/Math.sin(n.clamp(Math.PI-oe-qe,.01,Math.PI-.01)),_t=Math.cos(Math.PI/2-this._pitch)*Be+this.cameraToSeaLevelDistance,Et=Math.cos(Math.PI/2-this._pitch)*ut+this.cameraToSeaLevelDistance,jt=1.01*Math.min(_t,Et),Ht=this.height/50;G=new Float64Array(16),n.perspective(G,this._fov,this.width/this.height,Ht,jt),G[8]=2*-f.x/this.width,G[9]=2*f.y/this.height,n.scale(G,G,[1,-1,1]),n.translate(G,G,[0,0,-this.cameraToCenterDistance]),n.rotateX(G,G,this._pitch),n.rotateZ(G,G,this.angle),n.translate(G,G,[-w,-O,0]),this.mercatorMatrix=n.scale([],G,[this.worldSize,this.worldSize,this.worldSize]),n.scale(G,G,[1,1,this._pixelPerMeter]),this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,G),n.translate(G,G,[0,0,-this.elevation]),this.projMatrix=G,this.invProjMatrix=n.invert([],G),this.pixelMatrix3D=n.multiply(new Float64Array(16),this.labelPlaneMatrix,G);const Zt=this.width%2/2,br=this.height%2/2,kr=Math.cos(this.angle),Or=Math.sin(this.angle),Qt=w-Math.round(w)+kr*Zt+Or*br,Zr=O-Math.round(O)+kr*br+Or*Zt,Br=new Float64Array(G);if(n.translate(Br,Br,[Qt>.5?Qt-1:Qt,Zr>.5?Zr-1:Zr,0]),this.alignedProjMatrix=Br,G=n.invert(new Float64Array(16),this.pixelMatrix),!G)throw new Error("failed to invert matrix");this.pixelMatrixInverse=G,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const f=this.pointCoordinate(new n.pointGeometry(0,0)),w=[f.x*this.worldSize,f.y*this.worldSize,0,1];return n.transformMat4(w,w,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.pointGeometry(0,f))}getCameraQueryGeometry(f){const w=this.getCameraPoint();if(f.length===1)return[f[0],w];{let O=w.x,G=w.y,oe=w.x,Te=w.y;for(const Be of f)O=Math.min(O,Be.x),G=Math.min(G,Be.y),oe=Math.max(oe,Be.x),Te=Math.max(Te,Be.y);return[new n.pointGeometry(O,G),new n.pointGeometry(oe,G),new n.pointGeometry(oe,Te),new n.pointGeometry(O,Te),new n.pointGeometry(O,G)]}}}class lc{constructor(f){this._hashName=f&&encodeURIComponent(f),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(w,O){let G=!1,oe=null;const Te=()=>{oe=null,G&&(w(),oe=setTimeout(Te,300),G=!1)};return()=>(G=!0,oe||Te(),oe)}(this._updateHashUnthrottled.bind(this))}addTo(f){return this._map=f,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(f){const w=this._map.getCenter(),O=Math.round(100*this._map.getZoom())/100,G=Math.ceil((O*Math.LN2+Math.log(512/360/.5))/Math.LN10),oe=Math.pow(10,G),Te=Math.round(w.lng*oe)/oe,Be=Math.round(w.lat*oe)/oe,Ze=this._map.getBearing(),qe=this._map.getPitch();let ut="";if(ut+=f?`/${Te}/${Be}/${O}`:`${O}/${Be}/${Te}`,(Ze||qe)&&(ut+="/"+Math.round(10*Ze)/10),qe&&(ut+=`/${Math.round(qe)}`),this._hashName){const _t=this._hashName;let Et=!1;const jt=window.location.hash.slice(1).split("&").map(Ht=>{const Zt=Ht.split("=")[0];return Zt===_t?(Et=!0,`${Zt}=${ut}`):Ht}).filter(Ht=>Ht);return Et||jt.push(`${_t}=${ut}`),`#${jt.join("&")}`}return`#${ut}`}_getCurrentHash(){const f=window.location.hash.replace("#","");if(this._hashName){let w;return f.split("&").map(O=>O.split("=")).forEach(O=>{O[0]===this._hashName&&(w=O)}),(w&&w[1]||"").split("/")}return f.split("/")}_onHashChange(){const f=this._getCurrentHash();if(f.length>=3&&!f.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:w,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const f=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,f)}catch{}}}const Go={linearity:.3,easing:n.bezier(0,0,.3,1)},du=n.extend({deceleration:2500,maxSpeed:1400},Go),ll=n.extend({deceleration:20,maxSpeed:1400},Go),Zu=n.extend({deceleration:1e3,maxSpeed:360},Go),Vs=n.extend({deceleration:1e3,maxSpeed:90},Go);class Wu{constructor(f){this._map=f,this.clear()}clear(){this._inertiaBuffer=[]}record(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.exported.now(),settings:f})}_drainInertiaBuffer(){const f=this._inertiaBuffer,w=n.exported.now();for(;f.length>0&&w-f[0].time>160;)f.shift()}_onMoveEnd(f){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const w={zoom:0,bearing:0,pitch:0,pan:new n.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:oe}of this._inertiaBuffer)w.zoom+=oe.zoomDelta||0,w.bearing+=oe.bearingDelta||0,w.pitch+=oe.pitchDelta||0,oe.panDelta&&w.pan._add(oe.panDelta),oe.around&&(w.around=oe.around),oe.pinchAround&&(w.pinchAround=oe.pinchAround);const O=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,G={};if(w.pan.mag()){const oe=ds(w.pan.mag(),O,n.extend({},du,f||{}));G.offset=w.pan.mult(oe.amount/w.pan.mag()),G.center=this._map.transform.center,ul(G,oe)}if(w.zoom){const oe=ds(w.zoom,O,ll);G.zoom=this._map.transform.zoom+oe.amount,ul(G,oe)}if(w.bearing){const oe=ds(w.bearing,O,Zu);G.bearing=this._map.transform.bearing+n.clamp(oe.amount,-179,179),ul(G,oe)}if(w.pitch){const oe=ds(w.pitch,O,Vs);G.pitch=this._map.transform.pitch+oe.amount,ul(G,oe)}if(G.zoom||G.bearing){const oe=w.pinchAround===void 0?w.around:w.pinchAround;G.around=oe?this._map.unproject(oe):this._map.getCenter()}return this.clear(),n.extend(G,{noMoveStart:!0})}}function ul(N,f){(!N.duration||N.duration<f.duration)&&(N.duration=f.duration,N.easing=f.easing)}function ds(N,f,w){const{maxSpeed:O,linearity:G,deceleration:oe}=w,Te=n.clamp(N*G/(f/1e3),-O,O),Be=Math.abs(Te)/(oe*G);return{easing:w.easing,duration:1e3*Be,amount:Te*(Be/2)}}class fo extends n.Event{constructor(f,w,O,G={}){const oe=d.mousePos(w.getCanvasContainer(),O),Te=w.unproject(oe);super(f,n.extend({point:oe,lngLat:Te,originalEvent:O},G)),this._defaultPrevented=!1,this.target=w}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Cl extends n.Event{constructor(f,w,O){const G=f==="touchend"?O.changedTouches:O.touches,oe=d.touchPos(w.getCanvasContainer(),G),Te=oe.map(Ze=>w.unproject(Ze)),Be=oe.reduce((Ze,qe,ut,_t)=>Ze.add(qe.div(_t.length)),new n.pointGeometry(0,0));super(f,{points:oe,point:Be,lngLats:Te,lngLat:w.unproject(Be),originalEvent:O}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ro extends n.Event{constructor(f,w,O){super(f,{originalEvent:O}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Yc{constructor(f,w){this._map=f,this._clickTolerance=w.clickTolerance}reset(){delete this._mousedownPos}wheel(f){return this._firePreventable(new Ro(f.type,this._map,f))}mousedown(f,w){return this._mousedownPos=w,this._firePreventable(new fo(f.type,this._map,f))}mouseup(f){this._map.fire(new fo(f.type,this._map,f))}click(f,w){this._mousedownPos&&this._mousedownPos.dist(w)>=this._clickTolerance||this._map.fire(new fo(f.type,this._map,f))}dblclick(f){return this._firePreventable(new fo(f.type,this._map,f))}mouseover(f){this._map.fire(new fo(f.type,this._map,f))}mouseout(f){this._map.fire(new fo(f.type,this._map,f))}touchstart(f){return this._firePreventable(new Cl(f.type,this._map,f))}touchmove(f){this._map.fire(new Cl(f.type,this._map,f))}touchend(f){this._map.fire(new Cl(f.type,this._map,f))}touchcancel(f){this._map.fire(new Cl(f.type,this._map,f))}_firePreventable(f){if(this._map.fire(f),f.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ps{constructor(f){this._map=f}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(f){this._map.fire(new fo(f.type,this._map,f))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(f){this._delayContextMenu?this._contextMenuEvent=f:this._ignoreContextMenu||this._map.fire(new fo(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xc{constructor(f,w){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=w.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(f,w){this.isEnabled()&&f.shiftKey&&f.button===0&&(d.disableDrag(),this._startPos=this._lastPos=w,this._active=!0)}mousemoveWindow(f,w){if(!this._active)return;const O=w;if(this._lastPos.equals(O)||!this._box&&O.dist(this._startPos)<this._clickTolerance)return;const G=this._startPos;this._lastPos=O,this._box||(this._box=d.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));const oe=Math.min(G.x,O.x),Te=Math.max(G.x,O.x),Be=Math.min(G.y,O.y),Ze=Math.max(G.y,O.y);d.setTransform(this._box,`translate(${oe}px,${Be}px)`),this._box.style.width=Te-oe+"px",this._box.style.height=Ze-Be+"px"}mouseupWindow(f,w){if(!this._active||f.button!==0)return;const O=this._startPos,G=w;if(this.reset(),d.suppressClick(),O.x!==G.x||O.y!==G.y)return this._map.fire(new n.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:oe=>oe.fitScreenCoordinates(O,G,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",f)}keydown(f){this._active&&f.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",f))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(d.remove(this._box),this._box=null),d.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(f,w){return this._map.fire(new n.Event(f,{originalEvent:w}))}}function Ds(N,f){if(N.length!==f.length)throw new Error(`The number of touches and points are not equal - touches ${N.length}, points ${f.length}`);const w={};for(let O=0;O<N.length;O++)w[N[O].identifier]=f[O];return w}class pu{constructor(f){this.reset(),this.numTouches=f.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(f,w,O){(this.centroid||O.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=f.timeStamp),O.length===this.numTouches&&(this.centroid=function(G){const oe=new n.pointGeometry(0,0);for(const Te of G)oe._add(Te);return oe.div(G.length)}(w),this.touches=Ds(O,w)))}touchmove(f,w,O){if(this.aborted||!this.centroid)return;const G=Ds(O,w);for(const oe in this.touches){const Te=this.touches[oe],Be=G[oe];(!Be||Be.dist(Te)>30)&&(this.aborted=!0)}}touchend(f,w,O){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),O.length===0){const G=!this.aborted&&this.centroid;if(this.reset(),G)return G}}}class ju{constructor(f){this.singleTap=new pu(f),this.numTaps=f.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(f,w,O){this.singleTap.touchstart(f,w,O)}touchmove(f,w,O){this.singleTap.touchmove(f,w,O)}touchend(f,w,O){const G=this.singleTap.touchend(f,w,O);if(G){const oe=f.timeStamp-this.lastTime<500,Te=!this.lastTap||this.lastTap.dist(G)<30;if(oe&&Te||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=G,this.count===this.numTaps)return this.reset(),G}}}class Kc{constructor(){this._zoomIn=new ju({numTouches:1,numTaps:2}),this._zoomOut=new ju({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(f,w,O){this._zoomIn.touchstart(f,w,O),this._zoomOut.touchstart(f,w,O)}touchmove(f,w,O){this._zoomIn.touchmove(f,w,O),this._zoomOut.touchmove(f,w,O)}touchend(f,w,O){const G=this._zoomIn.touchend(f,w,O),oe=this._zoomOut.touchend(f,w,O);return G?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Te=>Te.easeTo({duration:300,zoom:Te.getZoom()+1,around:Te.unproject(G)},{originalEvent:f})}):oe?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Te=>Te.easeTo({duration:300,zoom:Te.getZoom()-1,around:Te.unproject(oe)},{originalEvent:f})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ms={0:1,2:2};class Dl{constructor(f){this.reset(),this._clickTolerance=f.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(f,w){return!1}_move(f,w){return{}}mousedown(f,w){if(this._lastPoint)return;const O=d.mouseButton(f);this._correctButton(f,O)&&(this._lastPoint=w,this._eventButton=O)}mousemoveWindow(f,w){const O=this._lastPoint;if(O){if(f.preventDefault(),function(G,oe){const Te=Ms[oe];return G.buttons===void 0||(G.buttons&Te)!==Te}(f,this._eventButton))this.reset();else if(this._moved||!(w.dist(O)<this._clickTolerance))return this._moved=!0,this._lastPoint=w,this._move(O,w)}}mouseupWindow(f){this._lastPoint&&d.mouseButton(f)===this._eventButton&&(this._moved&&d.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mu extends Dl{mousedown(f,w){super.mousedown(f,w),this._lastPoint&&(this._active=!0)}_correctButton(f,w){return w===0&&!f.ctrlKey}_move(f,w){return{around:w,panDelta:w.sub(f)}}}class ho extends Dl{_correctButton(f,w){return w===0&&f.ctrlKey||w===2}_move(f,w){const O=.8*(w.x-f.x);if(O)return this._active=!0,{bearingDelta:O}}contextmenu(f){f.preventDefault()}}class On extends Dl{_correctButton(f,w){return w===0&&f.ctrlKey||w===2}_move(f,w){const O=-.5*(w.y-f.y);if(O)return this._active=!0,{pitchDelta:O}}contextmenu(f){f.preventDefault()}}class qo{constructor(f,w){this._minTouches=f.cooperativeGestures?2:1,this._clickTolerance=f.clickTolerance||1,this._map=w,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new n.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(f,w,O){return this._calculateTransform(f,w,O)}touchmove(f,w,O){if(this._map._cooperativeGestures&&(this._minTouches===2&&O.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(f,!1,O.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(O.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,w,O)}touchend(f,w,O){this._calculateTransform(f,w,O),this._active&&O.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(f,w,O){O.length>0&&(this._active=!0);const G=Ds(O,w),oe=new n.pointGeometry(0,0),Te=new n.pointGeometry(0,0);let Be=0;for(const qe in G){const ut=G[qe],_t=this._touches[qe];_t&&(oe._add(ut),Te._add(ut.sub(_t)),Be++,G[qe]=ut)}if(this._touches=G,Be<this._minTouches||!Te.mag())return;const Ze=Te.div(Be);return this._sum._add(Ze),this._sum.mag()<this._clickTolerance?void 0:{around:oe.div(Be),panDelta:Ze}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ml{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(f){}_move(f,w,O){return{}}touchstart(f,w,O){this._firstTwoTouches||O.length<2||(this._firstTwoTouches=[O[0].identifier,O[1].identifier],this._start([w[0],w[1]]))}touchmove(f,w,O){if(!this._firstTwoTouches)return;f.preventDefault();const[G,oe]=this._firstTwoTouches,Te=es(O,w,G),Be=es(O,w,oe);if(!Te||!Be)return;const Ze=this._aroundCenter?null:Te.add(Be).div(2);return this._move([Te,Be],Ze,f)}touchend(f,w,O){if(!this._firstTwoTouches)return;const[G,oe]=this._firstTwoTouches,Te=es(O,w,G),Be=es(O,w,oe);Te&&Be||(this._active&&d.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(f){this._enabled=!0,this._aroundCenter=!!f&&f.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function es(N,f,w){for(let O=0;O<N.length;O++)if(N[O].identifier===w)return f[O]}function uc(N,f){return Math.log(N/f)/Math.LN2}class Mn extends Ml{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(f){this._startDistance=this._distance=f[0].dist(f[1])}_move(f,w){const O=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(uc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:uc(this._distance,O),pinchAround:w}}}function Yl(N,f){return 180*N.angleWith(f)/Math.PI}class Jc extends Ml{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])}_move(f,w){const O=this._vector;if(this._vector=f[0].sub(f[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Yl(this._vector,O),pinchAround:w}}_isBelowThreshold(f){this._minDiameter=Math.min(this._minDiameter,f.mag());const w=25/(Math.PI*this._minDiameter)*360,O=Yl(f,this._startVector);return Math.abs(O)<w}}function cc(N){return Math.abs(N.y)>Math.abs(N.x)}class ms extends Ml{constructor(f){super(),this._map=f}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(f,w,O){super.touchstart(f,w,O),this._currentTouchCount=O.length}_start(f){this._lastPoints=f,cc(f[0].sub(f[1]))&&(this._valid=!1)}_move(f,w,O){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const G=f[0].sub(this._lastPoints[0]),oe=f[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(G,oe,O.timeStamp),this._valid?(this._lastPoints=f,this._active=!0,{pitchDelta:(G.y+oe.y)/2*-.5}):void 0}gestureBeginsVertically(f,w,O){if(this._valid!==void 0)return this._valid;const G=f.mag()>=2,oe=w.mag()>=2;if(!G&&!oe)return;if(!G||!oe)return this._firstMove===void 0&&(this._firstMove=O),O-this._firstMove<100&&void 0;const Te=f.y>0==w.y>0;return cc(f)&&cc(w)&&Te}}const fc={panStep:100,bearingStep:15,pitchStep:10};class hc{constructor(){const f=fc;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(f){if(f.altKey||f.ctrlKey||f.metaKey)return;let w=0,O=0,G=0,oe=0,Te=0;switch(f.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:f.shiftKey?O=-1:(f.preventDefault(),oe=-1);break;case 39:f.shiftKey?O=1:(f.preventDefault(),oe=1);break;case 38:f.shiftKey?G=1:(f.preventDefault(),Te=-1);break;case 40:f.shiftKey?G=-1:(f.preventDefault(),Te=1);break;default:return}return this._rotationDisabled&&(O=0,G=0),{cameraAnimation:Be=>{const Ze=Be.getZoom();Be.easeTo({duration:300,easeId:"keyboardHandler",easing:kl,zoom:w?Math.round(Ze)+w*(f.shiftKey?2:1):Ze,bearing:Be.getBearing()+O*this._bearingStep,pitch:Be.getPitch()+G*this._pitchStep,offset:[-oe*this._panStep,-Te*this._panStep],center:Be.getCenter()},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function kl(N){return N*(2-N)}const Yu=4.000244140625;class Xl{constructor(f,w){this._map=f,this._el=f.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,n.bindAll(["_onTimeout"],this)}setZoomRate(f){this._defaultZoomRate=f}setWheelZoomRate(f){this._wheelZoomRate=f}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&f.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(f){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;f.preventDefault()}let w=f.deltaMode===WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY;const O=n.exported.now(),G=O-(this._lastWheelEventTime||0);this._lastWheelEventTime=O,w!==0&&w%Yu==0?this._type="wheel":w!==0&&Math.abs(w)<4?this._type="trackpad":G>400?(this._type=null,this._lastValue=w,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(G*w)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,w+=this._lastValue)),f.shiftKey&&w&&(w/=4),this._type&&(this._lastWheelEvent=f,this._delta-=w,this._active||this._start(f)),f.preventDefault()}_onTimeout(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)}_start(f){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const w=d.mousePos(this._el,f);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(w)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const f=this._map.transform;if(this._delta!==0){const Be=this._type==="wheel"&&Math.abs(this._delta)>Yu?this._wheelZoomRate:this._defaultZoomRate;let Ze=2/(1+Math.exp(-Math.abs(this._delta*Be)));this._delta<0&&Ze!==0&&(Ze=1/Ze);const qe=typeof this._targetZoom=="number"?f.zoomScale(this._targetZoom):f.scale;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(qe*Ze))),this._type==="wheel"&&(this._startZoom=f.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const w=typeof this._targetZoom=="number"?this._targetZoom:f.zoom,O=this._startZoom,G=this._easing;let oe,Te=!1;if(this._type==="wheel"&&O&&G){const Be=Math.min((n.exported.now()-this._lastWheelEventTime)/200,1),Ze=G(Be);oe=n.number(O,w,Ze),Be<1?this._frameId||(this._frameId=!0):Te=!0}else oe=w,Te=!0;return this._active=!0,Te&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Te,zoomDelta:oe-f.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(f){let w=n.ease;if(this._prevEase){const O=this._prevEase,G=(n.exported.now()-O.start)/O.duration,oe=O.easing(G+.01)-O.easing(G),Te=.27/Math.sqrt(oe*oe+1e-4)*.01,Be=Math.sqrt(.0729-Te*Te);w=n.bezier(Te,Be,.25,1)}return this._prevEase={start:n.exported.now(),duration:f,easing:w},w}reset(){this._active=!1}}class Il{constructor(f,w){this._clickZoom=f,this._tapZoom=w}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xu{constructor(){this.reset()}reset(){this._active=!1}dblclick(f,w){return f.preventDefault(),{cameraAnimation:O=>{O.easeTo({duration:300,zoom:O.getZoom()+(f.shiftKey?-1:1),around:O.unproject(w)},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ku{constructor(){this._tap=new ju({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(f,w,O){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?O.length>0&&(this._swipePoint=w[0],this._swipeTouch=O[0].identifier):this._tap.touchstart(f,w,O))}touchmove(f,w,O){if(this._tapTime){if(this._swipePoint){if(O[0].identifier!==this._swipeTouch)return;const G=w[0],oe=G.y-this._swipePoint.y;return this._swipePoint=G,f.preventDefault(),this._active=!0,{zoomDelta:oe/128}}}else this._tap.touchmove(f,w,O)}touchend(f,w,O){this._tapTime?this._swipePoint&&O.length===0&&this.reset():this._tap.touchend(f,w,O)&&(this._tapTime=f.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wo{constructor(f,w,O){this._el=f,this._mousePan=w,this._touchPan=O}enable(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Gs{constructor(f,w,O){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=w,this._mousePitch=O}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class dc{constructor(f,w,O,G){this._el=f,this._touchZoom=w,this._touchRotate=O,this._tapDragZoom=G,this._rotationDisabled=!1,this._enabled=!0}enable(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Zs=N=>N.zoom||N.drag||N.pitch||N.rotate;class vu extends n.Event{}function Ll(N){return N.panDelta&&N.panDelta.mag()||N.zoomDelta||N.bearingDelta||N.pitchDelta}class pc{constructor(f,w){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Wu(f),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(w),n.bindAll(["handleEvent","handleWindowEvent"],this);const O=this._el;this._listeners=[[O,"touchstart",{passive:!0}],[O,"touchmove",{passive:!1}],[O,"touchend",void 0],[O,"touchcancel",void 0],[O,"mousedown",void 0],[O,"mousemove",void 0],[O,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[O,"mouseover",void 0],[O,"mouseout",void 0],[O,"dblclick",void 0],[O,"click",void 0],[O,"keydown",{capture:!1}],[O,"keyup",void 0],[O,"wheel",{passive:!1}],[O,"contextmenu",void 0],[window,"blur",void 0]];for(const[G,oe,Te]of this._listeners)d.addEventListener(G,oe,G===document?this.handleWindowEvent:this.handleEvent,Te)}destroy(){for(const[f,w,O]of this._listeners)d.removeEventListener(f,w,f===document?this.handleWindowEvent:this.handleEvent,O)}_addDefaultHandlers(f){const w=this._map,O=w.getCanvasContainer();this._add("mapEvent",new Yc(w,f));const G=w.boxZoom=new Xc(w,f);this._add("boxZoom",G);const oe=new Kc,Te=new Xu;w.doubleClickZoom=new Il(Te,oe),this._add("tapZoom",oe),this._add("clickZoom",Te);const Be=new Ku;this._add("tapDragZoom",Be);const Ze=w.touchPitch=new ms(w);this._add("touchPitch",Ze);const qe=new ho(f),ut=new On(f);w.dragRotate=new Gs(f,qe,ut),this._add("mouseRotate",qe,["mousePitch"]),this._add("mousePitch",ut,["mouseRotate"]);const _t=new mu(f),Et=new qo(f,w);w.dragPan=new wo(O,_t,Et),this._add("mousePan",_t),this._add("touchPan",Et,["touchZoom","touchRotate"]);const jt=new Jc,Ht=new Mn;w.touchZoomRotate=new dc(O,Ht,jt,Be),this._add("touchRotate",jt,["touchPan","touchZoom"]),this._add("touchZoom",Ht,["touchPan","touchRotate"]);const Zt=w.scrollZoom=new Xl(w,this);this._add("scrollZoom",Zt,["mousePan"]);const br=w.keyboard=new hc;this._add("keyboard",br),this._add("blockableMapEvent",new ps(w));for(const kr of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])f.interactive&&f[kr]&&w[kr].enable(f[kr])}_add(f,w,O){this._handlers.push({handlerName:f,handler:w,allowed:O}),this._handlersById[f]=w}stop(f){if(!this._updatingCamera){for(const{handler:w}of this._handlers)w.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}}isActive(){for(const{handler:f}of this._handlers)if(f.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Zs(this._eventsInProgress))||this.isZooming()}_blockedByActive(f,w,O){for(const G in f)if(G!==O&&(!w||w.indexOf(G)<0))return!0;return!1}handleWindowEvent(f){this.handleEvent(f,`${f.type}Window`)}_getMapTouches(f){const w=[];for(const O of f)this._el.contains(O.target)&&w.push(O);return w}handleEvent(f,w){if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const O=f.type==="renderFrame"?void 0:f,G={needsRenderFrame:!1},oe={},Te={},Be=f.touches,Ze=Be?this._getMapTouches(Be):void 0,qe=Ze?d.touchPos(this._el,Ze):d.mousePos(this._el,f);for(const{handlerName:Et,handler:jt,allowed:Ht}of this._handlers){if(!jt.isEnabled())continue;let Zt;this._blockedByActive(Te,Ht,Et)?jt.reset():jt[w||f.type]&&(Zt=jt[w||f.type](f,qe,Ze),this.mergeHandlerResult(G,oe,Zt,Et,O),Zt&&Zt.needsRenderFrame&&this._triggerRenderFrame()),(Zt||jt.isActive())&&(Te[Et]=jt)}const ut={};for(const Et in this._previousActiveHandlers)Te[Et]||(ut[Et]=O);this._previousActiveHandlers=Te,(Object.keys(ut).length||Ll(G))&&(this._changes.push([G,oe,ut]),this._triggerRenderFrame()),(Object.keys(Te).length||Ll(G))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:_t}=G;_t&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_t(this._map))}mergeHandlerResult(f,w,O,G,oe){if(!O)return;n.extend(f,O);const Te={handlerName:G,originalEvent:O.originalEvent||oe};O.zoomDelta!==void 0&&(w.zoom=Te),O.panDelta!==void 0&&(w.drag=Te),O.pitchDelta!==void 0&&(w.pitch=Te),O.bearingDelta!==void 0&&(w.rotate=Te)}_applyChanges(){const f={},w={},O={};for(const[G,oe,Te]of this._changes)G.panDelta&&(f.panDelta=(f.panDelta||new n.pointGeometry(0,0))._add(G.panDelta)),G.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+G.zoomDelta),G.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+G.bearingDelta),G.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+G.pitchDelta),G.around!==void 0&&(f.around=G.around),G.pinchAround!==void 0&&(f.pinchAround=G.pinchAround),G.noInertia&&(f.noInertia=G.noInertia),n.extend(w,oe),n.extend(O,Te);this._updateMapTransform(f,w,O),this._changes=[]}_updateMapTransform(f,w,O){const G=this._map,oe=G.transform,Te=G.style&&G.style.terrain;if(!(Ll(f)||Te&&this._drag))return this._fireEvents(w,O,!0);let{panDelta:Be,zoomDelta:Ze,bearingDelta:qe,pitchDelta:ut,around:_t,pinchAround:Et}=f;Et!==void 0&&(_t=Et),G._stop(!0),_t=_t||G.transform.centerPoint;const jt=oe.pointLocation(Be?_t.sub(Be):_t);qe&&(oe.bearing+=qe),ut&&(oe.pitch+=ut),Ze&&(oe.zoom+=Ze),Te?w.drag&&!this._drag?(this._drag={center:oe.centerPoint,lngLat:oe.pointLocation(_t),point:_t,handlerName:w.drag.handlerName},G.fire(new n.Event("freezeElevation",{freeze:!0}))):this._drag&&O[this._drag.handlerName]?(G.fire(new n.Event("freezeElevation",{freeze:!1})),this._drag=null):w.drag&&this._drag&&(oe.center=oe.pointLocation(oe.centerPoint.sub(Be))):oe.setLocationAtPoint(jt,_t),this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(w,O,!0)}_fireEvents(f,w,O){const G=Zs(this._eventsInProgress),oe=Zs(f),Te={};for(const ut in f){const{originalEvent:_t}=f[ut];this._eventsInProgress[ut]||(Te[`${ut}start`]=_t),this._eventsInProgress[ut]=f[ut]}!G&&oe&&this._fireEvent("movestart",oe.originalEvent);for(const ut in Te)this._fireEvent(ut,Te[ut]);oe&&this._fireEvent("move",oe.originalEvent);for(const ut in f){const{originalEvent:_t}=f[ut];this._fireEvent(ut,_t)}const Be={};let Ze;for(const ut in this._eventsInProgress){const{handlerName:_t,originalEvent:Et}=this._eventsInProgress[ut];this._handlersById[_t].isActive()||(delete this._eventsInProgress[ut],Ze=w[_t]||Et,Be[`${ut}end`]=Ze)}for(const ut in Be)this._fireEvent(ut,Be[ut]);const qe=Zs(this._eventsInProgress);if(O&&(G||oe)&&!qe){this._updatingCamera=!0;const ut=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_t=Et=>Et!==0&&-this._bearingSnap<Et&&Et<this._bearingSnap;ut?(_t(ut.bearing||this._map.getBearing())&&(ut.bearing=0),this._map.easeTo(ut,{originalEvent:Ze})):(this._map.fire(new n.Event("moveend",{originalEvent:Ze})),_t(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(f,w){this._map.fire(new n.Event(f,w?{originalEvent:w}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(f=>{delete this._frameId,this.handleEvent(new vu("renderFrame",{timeStamp:f})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Zo={extend:(N,...f)=>n.extend(N,...f),run(N){N()},logToElement(N,f=!1,w="log"){const O=window.document.getElementById(w);O&&(f&&(O.innerHTML=""),O.innerHTML+=`<br>${N}`)}};class ba extends n.Evented{constructor(f,w){super(),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=w.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}getCenter(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(f,w){return this.jumpTo({center:f},w)}panBy(f,w,O){return f=n.pointGeometry.convert(f).mult(-1),this.panTo(this.transform.center,n.extend({offset:f},w),O)}panTo(f,w,O){return this.easeTo(n.extend({center:f},w),O)}getZoom(){return this.transform.zoom}setZoom(f,w){return this.jumpTo({zoom:f},w),this}zoomTo(f,w,O){return this.easeTo(n.extend({zoom:f},w),O)}zoomIn(f,w){return this.zoomTo(this.getZoom()+1,f,w),this}zoomOut(f,w){return this.zoomTo(this.getZoom()-1,f,w),this}getBearing(){return this.transform.bearing}setBearing(f,w){return this.jumpTo({bearing:f},w),this}getPadding(){return this.transform.padding}setPadding(f,w){return this.jumpTo({padding:f},w),this}rotateTo(f,w,O){return this.easeTo(n.extend({bearing:f},w),O)}resetNorth(f,w){return this.rotateTo(0,n.extend({duration:1e3},f),w),this}resetNorthPitch(f,w){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},f),w),this}snapToNorth(f,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,w):this}getPitch(){return this.transform.pitch}setPitch(f,w){return this.jumpTo({pitch:f},w),this}cameraForBounds(f,w){f=n.LngLatBounds.convert(f);const O=w&&w.bearing||0;return this._cameraForBoxAndBearing(f.getNorthWest(),f.getSouthEast(),O,w)}_cameraForBoxAndBearing(f,w,O,G){const oe={top:0,bottom:0,right:0,left:0};if(typeof(G=n.extend({padding:oe,offset:[0,0],maxZoom:this.transform.maxZoom},G)).padding=="number"){const Br=G.padding;G.padding={top:Br,bottom:Br,right:Br,left:Br}}G.padding=n.extend(oe,G.padding);const Te=this.transform,Be=Te.padding,Ze=Te.project(n.LngLat.convert(f)),qe=Te.project(n.LngLat.convert(w)),ut=Ze.rotate(-O*Math.PI/180),_t=qe.rotate(-O*Math.PI/180),Et=new n.pointGeometry(Math.max(ut.x,_t.x),Math.max(ut.y,_t.y)),jt=new n.pointGeometry(Math.min(ut.x,_t.x),Math.min(ut.y,_t.y)),Ht=Et.sub(jt),Zt=(Te.width-(Be.left+Be.right+G.padding.left+G.padding.right))/Ht.x,br=(Te.height-(Be.top+Be.bottom+G.padding.top+G.padding.bottom))/Ht.y;if(br<0||Zt<0)return void n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const kr=Math.min(Te.scaleZoom(Te.scale*Math.min(Zt,br)),G.maxZoom),Or=n.pointGeometry.convert(G.offset),Qt=new n.pointGeometry((G.padding.left-G.padding.right)/2,(G.padding.top-G.padding.bottom)/2).rotate(O*Math.PI/180),Zr=Or.add(Qt).mult(Te.scale/Te.zoomScale(kr));return{center:Te.unproject(Ze.add(qe).div(2).sub(Zr)),zoom:kr,bearing:O}}fitBounds(f,w,O){return this._fitInternal(this.cameraForBounds(f,w),w,O)}fitScreenCoordinates(f,w,O,G,oe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.pointGeometry.convert(f)),this.transform.pointLocation(n.pointGeometry.convert(w)),O,G),G,oe)}_fitInternal(f,w,O){return f?(delete(w=n.extend(f,w)).padding,w.linear?this.easeTo(w,O):this.flyTo(w,O)):this}jumpTo(f,w){this.stop();const O=this.transform;let G=!1,oe=!1,Te=!1;return"zoom"in f&&O.zoom!==+f.zoom&&(G=!0,O.zoom=+f.zoom),f.center!==void 0&&(O.center=n.LngLat.convert(f.center)),"bearing"in f&&O.bearing!==+f.bearing&&(oe=!0,O.bearing=+f.bearing),"pitch"in f&&O.pitch!==+f.pitch&&(Te=!0,O.pitch=+f.pitch),f.padding==null||O.isPaddingEqual(f.padding)||(O.padding=f.padding),this.fire(new n.Event("movestart",w)).fire(new n.Event("move",w)),G&&this.fire(new n.Event("zoomstart",w)).fire(new n.Event("zoom",w)).fire(new n.Event("zoomend",w)),oe&&this.fire(new n.Event("rotatestart",w)).fire(new n.Event("rotate",w)).fire(new n.Event("rotateend",w)),Te&&this.fire(new n.Event("pitchstart",w)).fire(new n.Event("pitch",w)).fire(new n.Event("pitchend",w)),this.fire(new n.Event("moveend",w))}calculateCameraOptionsFromTo(f,w,O,G=0){const oe=n.MercatorCoordinate.fromLngLat(f,w),Te=n.MercatorCoordinate.fromLngLat(O,G),Be=Te.x-oe.x,Ze=Te.y-oe.y,qe=Te.z-oe.z,ut=Math.hypot(Be,Ze,qe);if(ut===0)throw new Error("Can't calculate camera options with same From and To");const _t=Math.hypot(Be,Ze),Et=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ut/this.transform.tileSize),jt=180*Math.atan2(Be,-Ze)/Math.PI;let Ht=180*Math.acos(_t/ut)/Math.PI;return Ht=qe<0?90-Ht:90+Ht,{center:Te.toLngLat(),zoom:Et,pitch:Ht,bearing:jt}}easeTo(f,w){this._stop(!1,f.easeId),((f=n.extend({offset:[0,0],duration:500,easing:n.ease},f)).animate===!1||!f.essential&&n.exported.prefersReducedMotion)&&(f.duration=0);const O=this.transform,G=this.getZoom(),oe=this.getBearing(),Te=this.getPitch(),Be=this.getPadding(),Ze="zoom"in f?+f.zoom:G,qe="bearing"in f?this._normalizeBearing(f.bearing,oe):oe,ut="pitch"in f?+f.pitch:Te,_t="padding"in f?f.padding:O.padding,Et=n.pointGeometry.convert(f.offset);let jt=O.centerPoint.add(Et);const Ht=O.pointLocation(jt),Zt=n.LngLat.convert(f.center||Ht);this._normalizeCenter(Zt);const br=O.project(Ht),kr=O.project(Zt).sub(br),Or=O.zoomScale(Ze-G);let Qt,Zr;f.around&&(Qt=n.LngLat.convert(f.around),Zr=O.locationPoint(Qt));const Br={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ze!==G,this._rotating=this._rotating||oe!==qe,this._pitching=this._pitching||ut!==Te,this._padding=!O.isPaddingEqual(_t),this._easeId=f.easeId,this._prepareEase(w,f.noMoveStart,Br),this._ease(Qr=>{if(this._zooming&&(O.zoom=n.number(G,Ze,Qr)),this._rotating&&(O.bearing=n.number(oe,qe,Qr)),this._pitching&&(O.pitch=n.number(Te,ut,Qr)),this._padding&&(O.interpolatePadding(Be,_t,Qr),jt=O.centerPoint.add(Et)),Qt)O.setLocationAtPoint(Qt,Zr);else{const en=O.zoomScale(O.zoom-G),pn=Ze>G?Math.min(2,Or):Math.max(.5,Or),Jr=Math.pow(pn,1-Qr),zn=O.unproject(br.add(kr.mult(Qr*Jr)).mult(en));O.setLocationAtPoint(O.renderWorldCopies?zn.wrap():zn,jt)}this._fireMoveEvents(w)},Qr=>{this._afterEase(w,Qr)},f),this}_prepareEase(f,w,O={}){this._moving=!0,this.fire(new n.Event("freezeElevation",{freeze:!0})),w||O.moving||this.fire(new n.Event("movestart",f)),this._zooming&&!O.zooming&&this.fire(new n.Event("zoomstart",f)),this._rotating&&!O.rotating&&this.fire(new n.Event("rotatestart",f)),this._pitching&&!O.pitching&&this.fire(new n.Event("pitchstart",f))}_fireMoveEvents(f){this.fire(new n.Event("move",f)),this._zooming&&this.fire(new n.Event("zoom",f)),this._rotating&&this.fire(new n.Event("rotate",f)),this._pitching&&this.fire(new n.Event("pitch",f))}_afterEase(f,w){if(this._easeId&&w&&this._easeId===w)return;delete this._easeId,this.fire(new n.Event("freezeElevation",{freeze:!1}));const O=this._zooming,G=this._rotating,oe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,O&&this.fire(new n.Event("zoomend",f)),G&&this.fire(new n.Event("rotateend",f)),oe&&this.fire(new n.Event("pitchend",f)),this.fire(new n.Event("moveend",f))}flyTo(f,w){if(!f.essential&&n.exported.prefersReducedMotion){const qn=n.pick(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(qn,w)}this.stop(),f=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},f);const O=this.transform,G=this.getZoom(),oe=this.getBearing(),Te=this.getPitch(),Be=this.getPadding(),Ze="zoom"in f?n.clamp(+f.zoom,O.minZoom,O.maxZoom):G,qe="bearing"in f?this._normalizeBearing(f.bearing,oe):oe,ut="pitch"in f?+f.pitch:Te,_t="padding"in f?f.padding:O.padding,Et=O.zoomScale(Ze-G),jt=n.pointGeometry.convert(f.offset);let Ht=O.centerPoint.add(jt);const Zt=O.pointLocation(Ht),br=n.LngLat.convert(f.center||Zt);this._normalizeCenter(br);const kr=O.project(Zt),Or=O.project(br).sub(kr);let Qt=f.curve;const Zr=Math.max(O.width,O.height),Br=Zr/Et,Qr=Or.mag();if("minZoom"in f){const qn=n.clamp(Math.min(f.minZoom,G,Ze),O.minZoom,O.maxZoom),ta=Zr/O.zoomScale(qn-G);Qt=Math.sqrt(ta/Qr*2)}const en=Qt*Qt;function pn(qn){const ta=(Br*Br-Zr*Zr+(qn?-1:1)*en*en*Qr*Qr)/(2*(qn?Br:Zr)*en*Qr);return Math.log(Math.sqrt(ta*ta+1)-ta)}function Jr(qn){return(Math.exp(qn)-Math.exp(-qn))/2}function zn(qn){return(Math.exp(qn)+Math.exp(-qn))/2}const In=pn(0);let Vn=function(qn){return zn(In)/zn(In+Qt*qn)},ai=function(qn){return Zr*((zn(In)*(Jr(ta=In+Qt*qn)/zn(ta))-Jr(In))/en)/Qr;var ta},bi=(pn(1)-In)/Qt;if(Math.abs(Qr)<1e-6||!isFinite(bi)){if(Math.abs(Zr-Br)<1e-6)return this.easeTo(f,w);const qn=Br<Zr?-1:1;bi=Math.abs(Math.log(Br/Zr))/Qt,ai=function(){return 0},Vn=function(ta){return Math.exp(qn*Qt*ta)}}return f.duration="duration"in f?+f.duration:1e3*bi/("screenSpeed"in f?+f.screenSpeed/Qt:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0),this._zooming=!0,this._rotating=oe!==qe,this._pitching=ut!==Te,this._padding=!O.isPaddingEqual(_t),this._prepareEase(w,!1),this._ease(qn=>{const ta=qn*bi,ra=1/Vn(ta);O.zoom=qn===1?Ze:G+O.scaleZoom(ra),this._rotating&&(O.bearing=n.number(oe,qe,qn)),this._pitching&&(O.pitch=n.number(Te,ut,qn)),this._padding&&(O.interpolatePadding(Be,_t,qn),Ht=O.centerPoint.add(jt));const Gi=qn===1?br:O.unproject(kr.add(Or.mult(ai(ta))).mult(ra));O.setLocationAtPoint(O.renderWorldCopies?Gi.wrap():Gi,Ht),this._fireMoveEvents(w)},()=>this._afterEase(w),f),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(f,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const O=this._onEaseEnd;delete this._onEaseEnd,O.call(this,w)}if(!f){const O=this.handlers;O&&O.stop(!1)}return this}_ease(f,w,O){O.animate===!1||O.duration===0?(f(1),w()):(this._easeStart=n.exported.now(),this._easeOptions=O,this._onEaseFrame=f,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const f=Math.min((n.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(f,w){f=n.wrap(f,-180,180);const O=Math.abs(f-w);return Math.abs(f-360-w)<O&&(f-=360),Math.abs(f+360-w)<O&&(f+=360),f}_normalizeCenter(f){const w=this.transform;if(!w.renderWorldCopies||w.lngRange)return;const O=f.lng-w.center.lng;f.lng+=O>180?-360:O<-180?360:0}}class Kl{constructor(f={}){this.options=f,n.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(f){return this._map=f,this._compact=this.options&&this.options.compact,this._container=d.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=d.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=d.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){d.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(f,w){const O=this._map._getUIString(`AttributionControl.${w}`);f.title=O,f.setAttribute("aria-label",O)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(f){!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(G=>typeof G!="string"?"":G)):typeof this.options.customAttribution=="string"&&f.push(this.options.customAttribution)),this._map.style.stylesheet){const G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}const w=this._map.style.sourceCaches;for(const G in w){const oe=w[G];if(oe.used||oe.usedForTerrain){const Te=oe.getSource();Te.attribution&&f.indexOf(Te.attribution)<0&&f.push(Te.attribution)}}f=f.filter(G=>String(G).trim()),f.sort((G,oe)=>G.length-oe.length),f=f.filter((G,oe)=>{for(let Te=oe+1;Te<f.length;Te++)if(f[Te].indexOf(G)>=0)return!1;return!0});const O=f.join(" | ");O!==this._attribHTML&&(this._attribHTML=O,f.length?(this._innerContainer.innerHTML=O,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class y{constructor(f={}){this.options=f,n.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(f){this._map=f,this._compact=this.options&&this.options.compact,this._container=d.create("div","maplibregl-ctrl mapboxgl-ctrl");const w=d.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return w.target="_blank",w.rel="noopener nofollow",w.href="https://maplibre.org/",w.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),w.setAttribute("rel","noopener nofollow"),this._container.appendChild(w),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){d.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const f=this._container.children;if(f.length){const w=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact","mapboxgl-compact"):w.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class B{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(f){const w=++this._id;return this._queue.push({callback:f,id:w,cancelled:!1}),w}remove(f){const w=this._currentlyRunning,O=w?this._queue.concat(w):this._queue;for(const G of O)if(G.id===f)return void(G.cancelled=!0)}run(f=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const w=this._currentlyRunning=this._queue;this._queue=[];for(const O of w)if(!O.cancelled&&(O.callback(f),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const fe={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Pe={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},et={showCompass:!0,showZoom:!0,visualizePitch:!1};class St{constructor(f,w,O=!1){this._clickTolerance=10,this.element=w,this.mouseRotate=new ho({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,O&&(this.mousePitch=new On({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener(w,"mousedown",this.mousedown),d.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),d.addEventListener(w,"touchmove",this.touchmove),d.addEventListener(w,"touchend",this.touchend),d.addEventListener(w,"touchcancel",this.reset)}down(f,w){this.mouseRotate.mousedown(f,w),this.mousePitch&&this.mousePitch.mousedown(f,w),d.disableDrag()}move(f,w){const O=this.map,G=this.mouseRotate.mousemoveWindow(f,w);if(G&&G.bearingDelta&&O.setBearing(O.getBearing()+G.bearingDelta),this.mousePitch){const oe=this.mousePitch.mousemoveWindow(f,w);oe&&oe.pitchDelta&&O.setPitch(O.getPitch()+oe.pitchDelta)}}off(){const f=this.element;d.removeEventListener(f,"mousedown",this.mousedown),d.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),d.removeEventListener(f,"touchmove",this.touchmove),d.removeEventListener(f,"touchend",this.touchend),d.removeEventListener(f,"touchcancel",this.reset),this.offTemp()}offTemp(){d.enableDrag(),d.removeEventListener(window,"mousemove",this.mousemove),d.removeEventListener(window,"mouseup",this.mouseup)}mousedown(f){this.down(n.extend({},f,{ctrlKey:!0,preventDefault:()=>f.preventDefault()}),d.mousePos(this.element,f)),d.addEventListener(window,"mousemove",this.mousemove),d.addEventListener(window,"mouseup",this.mouseup)}mousemove(f){this.move(f,d.mousePos(this.element,f))}mouseup(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()}touchstart(f){f.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=d.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>f.preventDefault()},this._startPos))}touchmove(f){f.targetTouches.length!==1?this.reset():(this._lastPos=d.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:()=>f.preventDefault()},this._lastPos))}touchend(f){f.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function sr(N,f,w){if(N=new n.LngLat(N.lng,N.lat),f){const O=new n.LngLat(N.lng-360,N.lat),G=new n.LngLat(N.lng+360,N.lat),oe=w.locationPoint(N).distSqr(f);w.locationPoint(O).distSqr(f)<oe?N=O:w.locationPoint(G).distSqr(f)<oe&&(N=G)}for(;Math.abs(N.lng-w.center.lng)>180;){const O=w.locationPoint(N);if(O.x>=0&&O.y>=0&&O.x<=w.width&&O.y<=w.height)break;N.lng>w.center.lng?N.lng-=360:N.lng+=360}return N}const hr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ar(N,f,w){const O=N.classList;for(const G in hr)O.remove(`maplibregl-${w}-anchor-${G}`,`mapboxgl-${w}-anchor-${G}`);O.add(`maplibregl-${w}-anchor-${f}`,`mapboxgl-${w}-anchor-${f}`)}class dn extends n.Evented{constructor(f,w){if(super(),(f instanceof HTMLElement||w)&&(f=n.extend({element:f},w)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&f.pitchAlignment!=="auto"?f.pitchAlignment:this._rotationAlignment,f&&f.element)this._element=f.element,this._offset=n.pointGeometry.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=d.create("div"),this._element.setAttribute("aria-label","Map marker");const O=d.createNS("http://www.w3.org/2000/svg","svg"),G=41,oe=27;O.setAttributeNS(null,"display","block"),O.setAttributeNS(null,"height",`${G}px`),O.setAttributeNS(null,"width",`${oe}px`),O.setAttributeNS(null,"viewBox",`0 0 ${oe} ${G}`);const Te=d.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"stroke","none"),Te.setAttributeNS(null,"stroke-width","1"),Te.setAttributeNS(null,"fill","none"),Te.setAttributeNS(null,"fill-rule","evenodd");const Be=d.createNS("http://www.w3.org/2000/svg","g");Be.setAttributeNS(null,"fill-rule","nonzero");const Ze=d.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ze.setAttributeNS(null,"fill","#000000");const qe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Or of qe){const Qt=d.createNS("http://www.w3.org/2000/svg","ellipse");Qt.setAttributeNS(null,"opacity","0.04"),Qt.setAttributeNS(null,"cx","10.5"),Qt.setAttributeNS(null,"cy","5.80029008"),Qt.setAttributeNS(null,"rx",Or.rx),Qt.setAttributeNS(null,"ry",Or.ry),Ze.appendChild(Qt)}const ut=d.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"fill",this._color);const _t=d.createNS("http://www.w3.org/2000/svg","path");_t.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ut.appendChild(_t);const Et=d.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"opacity","0.25"),Et.setAttributeNS(null,"fill","#000000");const jt=d.createNS("http://www.w3.org/2000/svg","path");jt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Et.appendChild(jt);const Ht=d.createNS("http://www.w3.org/2000/svg","g");Ht.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ht.setAttributeNS(null,"fill","#FFFFFF");const Zt=d.createNS("http://www.w3.org/2000/svg","g");Zt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const br=d.createNS("http://www.w3.org/2000/svg","circle");br.setAttributeNS(null,"fill","#000000"),br.setAttributeNS(null,"opacity","0.25"),br.setAttributeNS(null,"cx","5.5"),br.setAttributeNS(null,"cy","5.5"),br.setAttributeNS(null,"r","5.4999962");const kr=d.createNS("http://www.w3.org/2000/svg","circle");kr.setAttributeNS(null,"fill","#FFFFFF"),kr.setAttributeNS(null,"cx","5.5"),kr.setAttributeNS(null,"cy","5.5"),kr.setAttributeNS(null,"r","5.4999962"),Zt.appendChild(br),Zt.appendChild(kr),Be.appendChild(Ze),Be.appendChild(ut),Be.appendChild(Et),Be.appendChild(Ht),Be.appendChild(Zt),O.appendChild(Be),O.setAttributeNS(null,"height",G*this._scale+"px"),O.setAttributeNS(null,"width",oe*this._scale+"px"),this._element.appendChild(O),this._offset=n.pointGeometry.convert(f&&f.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",O=>{O.preventDefault()}),this._element.addEventListener("mousedown",O=>{O.preventDefault()}),Ar(this._element,this._anchor,"marker"),this._popup=null}addTo(f){return this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._update),f.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),d.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=n.LngLat.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){const G=Math.sqrt(Math.pow(13.5,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[G,-1*(38.1-13.5+G)],"bottom-right":[-G,-1*(38.1-13.5+G)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=f,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(f){const w=f.code,O=f.charCode||f.keyCode;w!=="Space"&&w!=="Enter"&&O!==32&&O!==13||this.togglePopup()}_onMapClick(f){const w=f.originalEvent.target,O=this._element;this._popup&&(w===O||O.contains(w))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const f=this._popup;return f?(f.isOpen()?f.remove():f.addTo(this._map),this):this}_update(f){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=sr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let O="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?O="rotateX(0deg)":this._pitchAlignment==="map"&&(O=`rotateX(${this._map.getPitch()}deg)`),f&&f.type!=="moveend"||(this._pos=this._pos.round()),d.setTransform(this._element,`${hr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${O} ${w}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const G=this._map.unproject(this._pos),oe=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=G.distanceTo(this._lngLat)>20*oe?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(f){return this._offset=n.pointGeometry.convert(f),this._update(),this}_onMove(f){if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"}_addDragHandler(f){this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(f){return this._draggable=!!f,this._map&&(f?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(f){return this._rotation=f||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(f){return this._rotationAlignment=f||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(f){return this._pitchAlignment=f&&f!=="auto"?f:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Zn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ii,Qn=0,Pa=!1;const Xa={maxWidth:100,unit:"metric"};function gu(N,f,w){const O=w&&w.maxWidth||100,G=N._container.clientHeight/2,oe=N.unproject([0,G]),Te=N.unproject([O,G]),Be=oe.distanceTo(Te);if(w&&w.unit==="imperial"){const Ze=3.2808*Be;Ze>5280?so(f,O,Ze/5280,N._getUIString("ScaleControl.Miles")):so(f,O,Ze,N._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?so(f,O,Be/1852,N._getUIString("ScaleControl.NauticalMiles")):Be>=1e3?so(f,O,Be/1e3,N._getUIString("ScaleControl.Kilometers")):so(f,O,Be,N._getUIString("ScaleControl.Meters"))}function so(N,f,w,O){const G=function(oe){const Te=Math.pow(10,`${Math.floor(oe)}`.length-1);let Be=oe/Te;return Be=Be>=10?10:Be>=5?5:Be>=3?3:Be>=2?2:Be>=1?1:function(Ze){const qe=Math.pow(10,Math.ceil(-Math.log(Ze)/Math.LN10));return Math.round(Ze*qe)/qe}(Be),Te*Be}(w);N.style.width=f*(G/w)+"px",N.innerHTML=`${G}&nbsp;${O}`}const Aa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Za=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function mc(N){if(N){if(typeof N=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(N,2)));return{center:new n.pointGeometry(0,0),top:new n.pointGeometry(0,N),"top-left":new n.pointGeometry(f,f),"top-right":new n.pointGeometry(-f,f),bottom:new n.pointGeometry(0,-N),"bottom-left":new n.pointGeometry(f,-f),"bottom-right":new n.pointGeometry(-f,-f),left:new n.pointGeometry(N,0),right:new n.pointGeometry(-N,0)}}if(N instanceof n.pointGeometry||Array.isArray(N)){const f=n.pointGeometry.convert(N);return{center:f,top:f,"top-left":f,"top-right":f,bottom:f,"bottom-left":f,"bottom-right":f,left:f,right:f}}return{center:n.pointGeometry.convert(N.center||[0,0]),top:n.pointGeometry.convert(N.top||[0,0]),"top-left":n.pointGeometry.convert(N["top-left"]||[0,0]),"top-right":n.pointGeometry.convert(N["top-right"]||[0,0]),bottom:n.pointGeometry.convert(N.bottom||[0,0]),"bottom-left":n.pointGeometry.convert(N["bottom-left"]||[0,0]),"bottom-right":n.pointGeometry.convert(N["bottom-right"]||[0,0]),left:n.pointGeometry.convert(N.left||[0,0]),right:n.pointGeometry.convert(N.right||[0,0])}}return mc(new n.pointGeometry(0,0))}const cl={supported:l,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:class extends ba{constructor(N){var f;if(n.PerformanceUtils.mark(n.PerformanceMarkers.create),(N=n.extend({},Pe,N)).minZoom!=null&&N.maxZoom!=null&&N.minZoom>N.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(N.minPitch!=null&&N.maxPitch!=null&&N.minPitch>N.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(N.minPitch!=null&&N.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(N.maxPitch!=null&&N.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new hs(N.minZoom,N.maxZoom,N.minPitch,N.maxPitch,N.renderWorldCopies),{bearingSnap:N.bearingSnap}),this._interactive=N.interactive,this._cooperativeGestures=N.cooperativeGestures,this._maxTileCacheSize=N.maxTileCacheSize,this._failIfMajorPerformanceCaveat=N.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=N.preserveDrawingBuffer,this._antialias=N.antialias,this._trackResize=N.trackResize,this._bearingSnap=N.bearingSnap,this._refreshExpiredTiles=N.refreshExpiredTiles,this._fadeDuration=N.fadeDuration,this._crossSourceCollisions=N.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=N.collectResourceTiming,this._renderTaskQueue=new B,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},fe,N.locale),this._clickTolerance=N.clickTolerance,this._pixelRatio=(f=N.pixelRatio)!==null&&f!==void 0?f:devicePixelRatio,this._requestManager=new p(N.transformRequest),typeof N.container=="string"){if(this._container=document.getElementById(N.container),!this._container)throw new Error(`Container '${N.container}' not found.`)}else{if(!(N.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=N.container}if(N.maxBounds&&this.setMaxBounds(N.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new pc(this,N),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=N.hash&&new lc(typeof N.hash=="string"&&N.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:N.center,zoom:N.zoom,bearing:N.bearing,pitch:N.pitch}),N.bounds&&(this.resize(),this.fitBounds(N.bounds,n.extend({},N.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=N.localIdeographFontFamily,N.style&&this.setStyle(N.style,{localIdeographFontFamily:N.localIdeographFontFamily}),N.attributionControl&&this.addControl(new Kl({customAttribution:N.customAttribution})),N.maplibreLogo&&this.addControl(new y,N.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",w=>{this._update(w.dataType==="style"),this.fire(new n.Event(`${w.dataType}data`,w))}),this.on("dataloading",w=>{this.fire(new n.Event(`${w.dataType}dataloading`,w))}),this.on("dataabort",w=>{this.fire(new n.Event("sourcedataabort",w))})}_getMapId(){return this._mapId}addControl(N,f){if(f===void 0&&(f=N.getDefaultPosition?N.getDefaultPosition():"top-right"),!N||!N.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const w=N.onAdd(this);this._controls.push(N);const O=this._controlPositions[f];return f.indexOf("bottom")!==-1?O.insertBefore(w,O.firstChild):O.appendChild(w),this}removeControl(N){if(!N||!N.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const f=this._controls.indexOf(N);return f>-1&&this._controls.splice(f,1),N.onRemove(this),this}hasControl(N){return this._controls.indexOf(N)>-1}calculateCameraOptionsFromTo(N,f,w,O){return O==null&&this.style.terrain&&(O=this.transform.getElevation(w,this.style.terrain)),super.calculateCameraOptionsFromTo(N,f,w,O)}resize(N){const f=this._containerDimensions(),w=f[0],O=f[1];this._resizeCanvas(w,O,this.getPixelRatio()),this.transform.resize(w,O),this.painter.resize(w,O,this.getPixelRatio());const G=!this._moving;return G&&(this.stop(),this.fire(new n.Event("movestart",N)).fire(new n.Event("move",N))),this.fire(new n.Event("resize",N)),G&&this.fire(new n.Event("moveend",N)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(N){const[f,w]=this._containerDimensions();this._pixelRatio=N,this._resizeCanvas(f,w,N),this.painter.resize(f,w,N)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(N){return this.transform.setMaxBounds(n.LngLatBounds.convert(N)),this._update()}setMinZoom(N){if((N=N==null?-2:N)>=-2&&N<=this.transform.maxZoom)return this.transform.minZoom=N,this._update(),this.getZoom()<N&&this.setZoom(N),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(N){if((N=N==null?22:N)>=this.transform.minZoom)return this.transform.maxZoom=N,this._update(),this.getZoom()>N&&this.setZoom(N),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(N){if((N=N==null?0:N)<0)throw new Error("minPitch must be greater than or equal to 0");if(N>=0&&N<=this.transform.maxPitch)return this.transform.minPitch=N,this._update(),this.getPitch()<N&&this.setPitch(N),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(N){if((N=N==null?60:N)>85)throw new Error("maxPitch must be less than or equal to 85");if(N>=this.transform.minPitch)return this.transform.maxPitch=N,this._update(),this.getPitch()>N&&this.setPitch(N),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(N){return this.transform.renderWorldCopies=N,this._update()}project(N){return this.transform.locationPoint(n.LngLat.convert(N),this.style&&this.style.terrain)}unproject(N){return this.transform.pointLocation(n.pointGeometry.convert(N),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(N,f,w){if(N==="mouseenter"||N==="mouseover"){let O=!1;return{layer:f,listener:w,delegates:{mousemove:oe=>{const Te=this.getLayer(f)?this.queryRenderedFeatures(oe.point,{layers:[f]}):[];Te.length?O||(O=!0,w.call(this,new fo(N,this,oe.originalEvent,{features:Te}))):O=!1},mouseout:()=>{O=!1}}}}if(N==="mouseleave"||N==="mouseout"){let O=!1;return{layer:f,listener:w,delegates:{mousemove:Te=>{(this.getLayer(f)?this.queryRenderedFeatures(Te.point,{layers:[f]}):[]).length?O=!0:O&&(O=!1,w.call(this,new fo(N,this,Te.originalEvent)))},mouseout:Te=>{O&&(O=!1,w.call(this,new fo(N,this,Te.originalEvent)))}}}}{const O=G=>{const oe=this.getLayer(f)?this.queryRenderedFeatures(G.point,{layers:[f]}):[];oe.length&&(G.features=oe,w.call(this,G),delete G.features)};return{layer:f,listener:w,delegates:{[N]:O}}}}on(N,f,w){if(w===void 0)return super.on(N,f);const O=this._createDelegatedListener(N,f,w);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[N]=this._delegatedListeners[N]||[],this._delegatedListeners[N].push(O);for(const G in O.delegates)this.on(G,O.delegates[G]);return this}once(N,f,w){if(w===void 0)return super.once(N,f);const O=this._createDelegatedListener(N,f,w);for(const G in O.delegates)this.once(G,O.delegates[G]);return this}off(N,f,w){return w===void 0?super.off(N,f):(this._delegatedListeners&&this._delegatedListeners[N]&&(O=>{const G=this._delegatedListeners[N];for(let oe=0;oe<G.length;oe++){const Te=G[oe];if(Te.layer===f&&Te.listener===w){for(const Be in Te.delegates)this.off(Be,Te.delegates[Be]);return G.splice(oe,1),this}}})(),this)}queryRenderedFeatures(N,f){if(!this.style)return[];let w;if(f!==void 0||N===void 0||N instanceof n.pointGeometry||Array.isArray(N)||(f=N,N=void 0),f=f||{},(N=N||[[0,0],[this.transform.width,this.transform.height]])instanceof n.pointGeometry||typeof N[0]=="number")w=[n.pointGeometry.convert(N)];else{const O=n.pointGeometry.convert(N[0]),G=n.pointGeometry.convert(N[1]);w=[O,new n.pointGeometry(G.x,O.y),G,new n.pointGeometry(O.x,G.y),O]}return this.style.queryRenderedFeatures(w,f,this.transform)}querySourceFeatures(N,f){return this.style.querySourceFeatures(N,f)}setStyle(N,f){return(f=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},f)).diff!==!1&&f.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&N?(this._diffStyle(N,f),this):(this._localIdeographFontFamily=f.localIdeographFontFamily,this._updateStyle(N,f))}setTransformRequest(N){return this._requestManager.setTransformRequest(N),this}_getUIString(N){const f=this._locale[N];if(f==null)throw new Error(`Missing UI string '${N}'`);return f}_updateStyle(N,f){return this.style&&(this.style.setEventedParent(null),this.style._remove()),N?(this.style=new xt(this,f||{}),this.style.setEventedParent(this,{style:this.style}),typeof N=="string"?this.style.loadURL(N):this.style.loadJSON(N),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(N,f){if(typeof N=="string"){const w=this._requestManager.transformRequest(N,n.ResourceType.Style);n.getJSON(w,(O,G)=>{O?this.fire(new n.ErrorEvent(O)):G&&this._updateDiff(G,f)})}else typeof N=="object"&&this._updateDiff(N,f)}_updateDiff(N,f){try{this.style.setState(N)&&this._update(!0)}catch(w){n.warnOnce(`Unable to perform style diff: ${w.message||w.error||w}.  Rebuilding the style from scratch.`),this._updateStyle(N,f)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")}addSource(N,f){return this._lazyInitEmptyStyle(),this.style.addSource(N,f),this._update(!0)}isSourceLoaded(N){const f=this.style&&this.style.sourceCaches[N];if(f!==void 0)return f.loaded();this.fire(new n.ErrorEvent(new Error(`There is no source with ID '${N}'`)))}setTerrain(N){return this.style.setTerrain(N),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const N=this.style&&this.style.sourceCaches;for(const f in N){const w=N[f]._tiles;for(const O in w){const G=w[O];if(G.state!=="loaded"&&G.state!=="errored")return!1}}return!0}addSourceType(N,f,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(N,f,w)}removeSource(N){return this.style.removeSource(N),this._update(!0)}getSource(N){return this.style.getSource(N)}addImage(N,f,{pixelRatio:w=1,sdf:O=!1,stretchX:G,stretchY:oe,content:Te}={}){if(this._lazyInitEmptyStyle(),f instanceof HTMLImageElement||n.isImageBitmap(f)){const{width:Be,height:Ze,data:qe}=n.exported.getImageData(f);this.style.addImage(N,{data:new n.RGBAImage({width:Be,height:Ze},qe),pixelRatio:w,stretchX:G,stretchY:oe,content:Te,sdf:O,version:0})}else{if(f.width===void 0||f.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Be,height:Ze,data:qe}=f,ut=f;this.style.addImage(N,{data:new n.RGBAImage({width:Be,height:Ze},new Uint8Array(qe)),pixelRatio:w,stretchX:G,stretchY:oe,content:Te,sdf:O,version:0,userImage:ut}),ut.onAdd&&ut.onAdd(this,N)}}}updateImage(N,f){const w=this.style.getImage(N);if(!w)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const O=f instanceof HTMLImageElement||n.isImageBitmap(f)?n.exported.getImageData(f):f,{width:G,height:oe,data:Te}=O;if(G===void 0||oe===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(G!==w.data.width||oe!==w.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Be=!(f instanceof HTMLImageElement||n.isImageBitmap(f));w.data.replace(Te,Be),this.style.updateImage(N,w)}hasImage(N){return N?!!this.style.getImage(N):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(N){this.style.removeImage(N)}loadImage(N,f){n.getImage(this._requestManager.transformRequest(N,n.ResourceType.Image),f)}listImages(){return this.style.listImages()}addLayer(N,f){return this._lazyInitEmptyStyle(),this.style.addLayer(N,f),this._update(!0)}moveLayer(N,f){return this.style.moveLayer(N,f),this._update(!0)}removeLayer(N){return this.style.removeLayer(N),this._update(!0)}getLayer(N){return this.style.getLayer(N)}setLayerZoomRange(N,f,w){return this.style.setLayerZoomRange(N,f,w),this._update(!0)}setFilter(N,f,w={}){return this.style.setFilter(N,f,w),this._update(!0)}getFilter(N){return this.style.getFilter(N)}setPaintProperty(N,f,w,O={}){return this.style.setPaintProperty(N,f,w,O),this._update(!0)}getPaintProperty(N,f){return this.style.getPaintProperty(N,f)}setLayoutProperty(N,f,w,O={}){return this.style.setLayoutProperty(N,f,w,O),this._update(!0)}getLayoutProperty(N,f){return this.style.getLayoutProperty(N,f)}setLight(N,f={}){return this._lazyInitEmptyStyle(),this.style.setLight(N,f),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(N,f){return this.style.setFeatureState(N,f),this._update()}removeFeatureState(N,f){return this.style.removeFeatureState(N,f),this._update()}getFeatureState(N){return this.style.getFeatureState(N)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let N=0,f=0;return this._container&&(N=this._container.clientWidth||400,f=this._container.clientHeight||300),[N,f]}_setupContainer(){const N=this._container;N.classList.add("maplibregl-map","mapboxgl-map");const f=this._canvasContainer=d.create("div","maplibregl-canvas-container mapboxgl-canvas-container",N);this._interactive&&f.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=d.create("canvas","maplibregl-canvas mapboxgl-canvas",f),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const w=this._containerDimensions();this._resizeCanvas(w[0],w[1],this.getPixelRatio());const O=this._controlContainer=d.create("div","maplibregl-control-container mapboxgl-control-container",N),G=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(oe=>{G[oe]=d.create("div",`maplibregl-ctrl-${oe} mapboxgl-ctrl-${oe}`,O)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const N=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=d.create("div","maplibregl-cooperative-gesture-screen",N);let f="Control",w=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(w=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",f="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${w}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",O=>{O.key===f&&(this._metaPress=!0)}),document.addEventListener("keyup",O=>{O.key===f&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",O=>{this._onCooperativeGesture(O,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(N,f,w){this._canvas.width=w*N,this._canvas.height=w*f,this._canvas.style.width=`${N}px`,this._canvas.style.height=`${f}px`}_setupPainter(){const N=n.extend({},l.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),f=this._canvas.getContext("webgl",N)||this._canvas.getContext("experimental-webgl",N);f?(this.painter=new hu(f,this.transform),n.exported$1.testSupport(f)):this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(N){N.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:N}))}_contextRestored(N){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:N}))}_onMapScroll(N){if(N.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(N,f,w){return!f&&w<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(N){return this.style?(this._styleDirty=this._styleDirty||N,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(N){return this._update(),this._renderTaskQueue.add(N)}_cancelRenderFrame(N){this._renderTaskQueue.remove(N)}_render(N){let f,w=0;const O=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(f=O.createQueryEXT(),O.beginQueryEXT(O.TIME_ELAPSED_EXT,f),w=n.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(N),this._removed)return;let G=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Te=this.transform.zoom,Be=n.exported.now();this.style.zoomHistory.update(Te,Be);const Ze=new n.EvaluationParameters(Te,{now:Be,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qe=Ze.crossFadingFactor();qe===1&&qe===this._crossFadingFactor||(G=!0,this._crossFadingFactor=qe),this.style.update(Ze)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,n.PerformanceUtils.mark(n.PerformanceMarkers.load),this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||G)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const Te=n.exported.now()-w;O.endQueryEXT(O.TIME_ELAPSED_EXT,f),setTimeout(()=>{const Be=O.getQueryObjectEXT(f,O.QUERY_RESULT_EXT)/1e6;O.deleteQueryEXT(f),this.fire(new n.Event("gpu-timing-frame",{cpuTime:Te,gpuTime:Be}))},50)}if(this.listens("gpu-timing-layer")){const Te=this.painter.collectGpuTimers();setTimeout(()=>{const Be=this.painter.queryGpuTimers(Te);this.fire(new n.Event("gpu-timing-layer",{layerTimes:Be}))},50)}const oe=this._sourcesDirty||this._styleDirty||this._placementDirty;return oe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),!this._loaded||this._fullyLoaded||oe||(this._fullyLoaded=!0,n.PerformanceUtils.mark(n.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const N=this.painter.context.gl.getExtension("WEBGL_lose_context");N&&N.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),d.remove(this._canvasContainer),d.remove(this._controlContainer),this._cooperativeGestures&&d.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),n.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new n.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=n.exported.frame(N=>{n.PerformanceUtils.frame(N),this._frame=null,this._render(N)}))}_onWindowOnline(){this._update()}_onWindowResize(N){this._trackResize&&this.resize({originalEvent:N})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(N){this._showTileBoundaries!==N&&(this._showTileBoundaries=N,this._update())}get showPadding(){return!!this._showPadding}set showPadding(N){this._showPadding!==N&&(this._showPadding=N,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(N){this._showCollisionBoxes!==N&&(this._showCollisionBoxes=N,N?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(N){this._showOverdrawInspector!==N&&(this._showOverdrawInspector=N,this._update())}get repaint(){return!!this._repaint}set repaint(N){this._repaint!==N&&(this._repaint=N,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(N){this._vertices=N,this._update()}_setCacheLimits(N,f){n.setCacheLimits(N,f)}get version(){return"2.4.0"}},NavigationControl:class{constructor(N){this.options=n.extend({},et,N),this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",f=>f.preventDefault()),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",f=>this._map.zoomIn({},{originalEvent:f})),d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",f=>this._map.zoomOut({},{originalEvent:f})),d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",f=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:f}):this._map.resetNorth({},{originalEvent:f})}),this._compassIcon=d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const N=this._map.getZoom(),f=N===this._map.getMaxZoom(),w=N===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())}_rotateCompassArrow(){const N=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=N}onAdd(N){return this._map=N,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new St(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){d.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(N,f){const w=d.create("button",N,this._container);return w.type="button",w.addEventListener("click",f),w}_setButtonTitle(N,f){const w=this._map._getUIString(`NavigationControl.${f}`);N.title=w,N.setAttribute("aria-label",w)}},GeolocateControl:class extends n.Evented{constructor(N){super(),this.options=n.extend({},Zn,N),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(N){var f;return this._map=N,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),f=this._setupUI,ii!==void 0?f(ii):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(w=>{ii=w.state!=="denied",f(ii)}):(ii=!!window.navigator.geolocation,f(ii)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),d.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qn=0,Pa=!1}_isOutOfMapMaxBounds(N){const f=this._map.getMaxBounds(),w=N.coords;return f&&(w.longitude<f.getWest()||w.longitude>f.getEast()||w.latitude<f.getSouth()||w.latitude>f.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(N){if(this._map){if(this._isOutOfMapMaxBounds(N))return this._setErrorState(),this.fire(new n.Event("outofmaxbounds",N)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=N,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(N),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(N),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",N)),this._finish()}}_updateCamera(N){const f=new n.LngLat(N.coords.longitude,N.coords.latitude),w=N.coords.accuracy,O=this._map.getBearing(),G=n.extend({bearing:O},this.options.fitBoundsOptions);this._map.fitBounds(f.toBounds(w),G,{geolocateSource:!0})}_updateMarker(N){if(N){const f=new n.LngLat(N.coords.longitude,N.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=N.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const N=this._map._container.clientHeight/2,f=this._map.unproject([0,N]),w=this._map.unproject([1,N]),O=f.distanceTo(w),G=Math.ceil(2*this._accuracy/O);this._circleElement.style.width=`${G}px`,this._circleElement.style.height=`${G}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(N){if(this._map){if(this.options.trackUserLocation)if(N.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(N.code===3&&Pa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",N)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(N){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=d.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",N===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=d.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new dn(this._dotElement),this._circleElement=d.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new dn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f.originalEvent&&f.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new n.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qn--,Pa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let N;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qn++,Qn>1?(N={maximumAge:6e5,timeout:0},Pa=!0):(N=this.options.positionOptions,Pa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,N)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Kl,LogoControl:y,ScaleControl:class{constructor(N){this.options=n.extend({},Xa,N),n.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){gu(this._map,this._container,this.options)}onAdd(N){return this._map=N,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",N.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){d.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(N){this.options.unit=N,gu(this._map,this._container,this.options)}},FullscreenControl:class{constructor(N){this._fullscreen=!1,N&&N.container&&(N.container instanceof HTMLElement?this._container=N.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(N){return this._map=N,this._container||(this._container=this._map.getContainer()),this._controlContainer=d.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){d.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const N=this._fullscreenButton=d.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",N).setAttribute("aria-hidden","true"),N.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const N=this._getTitle();this._fullscreenButton.setAttribute("aria-label",N),this._fullscreenButton.title=N}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(N){this.options=N,n.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(N){return this._map=N,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=d.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),d.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){d.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends n.Evented{constructor(N){super(),this.options=n.extend(Object.create(Aa),N),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(N){return this._map&&this.remove(),this._map=N,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&d.remove(this._content),this._container&&(d.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(N){return this._lngLat=n.LngLat.convert(N),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(N){return this.setDOMContent(document.createTextNode(N))}setHTML(N){const f=document.createDocumentFragment(),w=document.createElement("body");let O;for(w.innerHTML=N;O=w.firstChild,O;)f.appendChild(O);return this.setDOMContent(f)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(N){return this.options.maxWidth=N,this._update(),this}setDOMContent(N){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=d.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(N),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(N){this._container&&this._container.classList.add(N)}removeClassName(N){this._container&&this._container.classList.remove(N)}setOffset(N){return this.options.offset=N,this._update(),this}toggleClassName(N){if(this._container)return this._container.classList.toggle(N)}_createCloseButton(){this.options.closeButton&&(this._closeButton=d.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(N){this._update(N.point)}_onMouseMove(N){this._update(N.point)}_onDrag(N){this._update(N.point)}_update(N){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=d.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=d.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(oe=>this._container.classList.add(oe)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sr(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!N))return;const f=this._pos=this._trackPointer&&N?N:this._map.project(this._lngLat);let w=this.options.anchor;const O=mc(this.options.offset);if(!w){const oe=this._container.offsetWidth,Te=this._container.offsetHeight;let Be;Be=f.y+O.bottom.y<Te?["top"]:f.y>this._map.transform.height-Te?["bottom"]:[],f.x<oe/2?Be.push("left"):f.x>this._map.transform.width-oe/2&&Be.push("right"),w=Be.length===0?"bottom":Be.join("-")}const G=f.add(O[w]).round();d.setTransform(this._container,`${hr[w]} translate(${G.x}px,${G.y}px)`),Ar(this._container,w,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const N=this._container.querySelector(Za);N&&N.focus()}_onClose(){this.remove()}},Marker:dn,Style:xt,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.pointGeometry,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,AJAXError:n.AJAXError,config:n.config,CanvasSource:ee,GeoJSONSource:J,ImageSource:q,RasterDEMTileSource:Y,RasterTileSource:j,VectorTileSource:V,VideoSource:we,prewarm:function(){ce().acquire(le)},clearPrewarmedResources:function(){const N=ie;N&&(N.isPreloaded()&&N.numActive()===1?(N.release(le),ie=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return K.workerCount},set workerCount(N){K.workerCount=N},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(N){n.config.MAX_PARALLEL_IMAGE_REQUESTS=N},clearStorage(N){n.clearTileCache(N)},workerUrl:"",addProtocol(N,f){n.config.REGISTERED_PROTOCOLS[N]=f},removeProtocol(N){delete n.config.REGISTERED_PROTOCOLS[N]}};return Zo.extend(cl,{isSafari:n.isSafari,getPerformanceMetrics:n.PerformanceUtils.getPerformanceMetrics}),cl});var s=o;return s})})(P_);const Ig=P_.exports;var kw=Wr.exports.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(r){Wr.exports.setOptions(this,r),this._throttledUpdate=Wr.exports.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(r){this._container||this._initContainer();var t=this.getPaneName();r.getPane(t).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),r.options.zoomAnimation&&Wr.exports.DomEvent.on(r._proxy,Wr.exports.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(r){this._map._proxy&&this._map.options.zoomAnimation&&Wr.exports.DomEvent.off(this._map._proxy,Wr.exports.DomUtil.TRANSITION_END,this._transitionEnd,this);var t=this.getPaneName();r.getPane(t).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getOpacity:function(){return this.options.opacity},setOpacity:function(r){this.options.opacity=r,this._container.style.opacity=r},getBounds:function(){var r=this.getSize().multiplyBy(.5),t=this._map.latLngToContainerPoint(this._map.getCenter());return Wr.exports.latLngBounds(this._map.containerPointToLatLng(t.subtract(r)),this._map.containerPointToLatLng(t.add(r)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_initContainer:function(){var r=this._container=Wr.exports.DomUtil.create("div","leaflet-gl-layer"),t=this.getSize(),e=this._map.getSize().multiplyBy(this.options.padding);r.style.width=t.x+"px",r.style.height=t.y+"px";var i=this._map.containerPointToLayerPoint([0,0]).subtract(e);Wr.exports.DomUtil.setPosition(r,i)},_initGL:function(){var r=this._map.getCenter(),t=Wr.exports.extend({},this.options,{container:this._container,center:[r.lng,r.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new Ig.Map(t),this._glMap.once("styledata",function(i){this.fire("styleLoaded")}.bind(this)),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var e=this._glMap._actualCanvas;Wr.exports.DomUtil.addClass(e,"leaflet-image-layer"),Wr.exports.DomUtil.addClass(e,"leaflet-zoom-animated"),this.options.interactive&&Wr.exports.DomUtil.addClass(e,"leaflet-interactive"),this.options.className&&Wr.exports.DomUtil.addClass(e,this.options.className)},_update:function(r){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var t=this.getSize(),e=this._container,i=this._glMap,o=this._map.getSize().multiplyBy(this.options.padding),a=this._map.containerPointToLayerPoint([0,0]).subtract(o);Wr.exports.DomUtil.setPosition(e,a),this._transformGL(i),i.transform.width!==t.x||i.transform.height!==t.y?(e.style.width=t.x+"px",e.style.height=t.y+"px",i._resize!==null&&i._resize!==void 0?i._resize():i.resize()):i._update!==null&&i._update!==void 0?i._update():i.update()}},_transformGL:function(r){var t=this._map.getCenter(),e=r.transform;e.center=Ig.LngLat.convert([t.lng,t.lat]),e.zoom=this._map.getZoom()-1},_pinchZoom:function(r){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(r){var t=this._map.getZoomScale(r.zoom),e=this._map.getSize().multiplyBy(this.options.padding*t),i=this.getSize()._divideBy(2),o=this._map.project(r.center,r.zoom)._subtract(i)._add(this._map._getMapPanePos().add(e))._round(),a=this._map.project(this._map.getBounds().getNorthWest(),r.zoom)._subtract(o);Wr.exports.DomUtil.setTransform(this._glMap._actualCanvas,a.subtract(this._offset),t)},_zoomStart:function(r){this._zooming=!0},_zoomEnd:function(){var r=this._map.getZoomScale(this._map.getZoom());Wr.exports.DomUtil.setTransform(this._glMap._actualCanvas,null,r),this._zooming=!1,this._update()},_transitionEnd:function(r){Wr.exports.Util.requestAnimFrame(function(){var t=this._map.getZoom(),e=this._map.getCenter(),i=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());Wr.exports.DomUtil.setTransform(this._glMap._actualCanvas,i,1),this._glMap.once("moveend",Wr.exports.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:e,zoom:t-1})},this)}});function F_(r){return new kw(r)}var Iw=Wr.exports.Layer.extend({options:{key:"ArcGIS:Streets"},initialize:function(r,t){if(t&&Wr.exports.setOptions(this,t),this.options.apiKey&&(this.options.apikey=this.options.apiKey),this.options.token&&(this.options.apikey=this.options.token),!(this.options.apikey||this.options.token))throw new Error("API Key or token is required for vectorBasemapLayer.");r&&(this.options.key=r),this._createLayer()},_createLayer:function(){var r=Tw(this.options.key,this.options.apikey);this._maplibreGL=F_({style:r,pane:this.options.pane,opacity:this.options.opacity}),this._ready=!0,this.fire("ready",{},!0),this._maplibreGL.on("styleLoaded",function(t){this._setupAttribution()}.bind(this))},_setupAttribution:function(){var r=this._map;if(ed.setEsriAttribution(r),this.options.key.length===32){var t=this._maplibreGL.getMaplibreMap().style.stylesheet.sources,e=[];Object.keys(t).forEach(function(i){e.push(t[i].attribution),t[i].copyrightText&&t[i].copyrightText&&t[i].copyrightText!==""&&t[i].attribution!==t[i].copyrightText&&e.push(t[i].copyrightText)}),r.attributionControl.addAttribution('<span class="">'+e.join(", ")+"</span>")}else if(this.options.attributionUrls||(this.options.attributionUrls=this._getAttributionUrls(this.options.key)),this._map&&this.options.attributionUrls){if(this._map.attributionControl){for(let i=0;i<this.options.attributionUrls.length;i++){const o=this.options.attributionUrls[i];Cw(o,r)}r.attributionControl.addAttribution('<span class="esri-dynamic-attribution"></span>')}ed._updateMapAttribution({target:this._map})}},_getAttributionUrls:function(r){return r.indexOf("OSM:")===0?["https://static.arcgis.com/attribution/Vector/OpenStreetMap_v2"]:r.indexOf("ArcGIS:Imagery")===0?["https://static.arcgis.com/attribution/World_Imagery","https://static.arcgis.com/attribution/Vector/World_Basemap_v2"]:["https://static.arcgis.com/attribution/Vector/World_Basemap_v2"]},onAdd:function(r){this._map=r,this._initPane(),this._ready?this._asyncAdd():this.once("ready",function(){this._asyncAdd()},this)},_initPane:function(){if(this.options.pane||(this.options.key.indexOf(":Labels")>-1?this.options.pane="esri-labels":this.options.pane="tilePane"),!this._map.getPane(this.options.pane)){var r=this._map.createPane(this.options.pane);r.style.pointerEvents="none",r.style.zIndex=this.options.pane==="esri-labels"?550:500}},onRemove:function(r){if(r.off("moveend",ed._updateMapAttribution),r.removeLayer(this._maplibreGL),r.attributionControl){var t=document.getElementsByClassName("esri-dynamic-attribution");if(t&&t.length>0){var e=t[0].outerHTML;r.attributionControl.removeAttribution(e)}}},_asyncAdd:function(){var r=this._map;r.on("moveend",ed._updateMapAttribution),this._maplibreGL.addTo(r,this)}});function Lg(r,t){return new Iw(r,t)}Wr.exports.Layer.extend({options:{pane:"overlayPane",portalUrl:"https://www.arcgis.com"},initialize:function(r,t){if(t&&Wr.exports.setOptions(this,t),this.options.apiKey&&(this.options.apikey=this.options.apiKey),this.options.apikey&&(this.options.token=this.options.apikey),!r)throw new Error("An ITEM ID or SERVICE URL is required for vectorTileLayer.");r&&(this.options.key=r),this._createLayer()},_createLayer:function(){Aw(this.options.key,this.options,function(r,t,e,i){if(r)throw new Error(r);if(Mw(i.tileInfo.spatialReference.wkid)||console.warn('This layer is not guaranteed to display properly because its service does not use the Web Mercator projection. The "tileInfo.spatialReference" property is:',i.tileInfo.spatialReference,`
More information is available at https://github.com/maplibre/maplibre-gl-js/issues/168 and https://github.com/Esri/esri-leaflet-vector/issues/94.`),t=Ew(t,e,i,this.options.token),!this.getAttribution()){var o=Object.keys(t.sources);this.options.attribution=t.sources[o[o.length-1]].attribution,this._map&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution())}this.options.style&&typeof this.options.style=="function"&&(t=this.options.style(t)),this._maplibreGL=F_({style:t,pane:this.options.pane,opacity:this.options.opacity}),this._ready=!0,this.fire("ready",{},!0)}.bind(this))},onAdd:function(r){this._map=r,this._ready?this._asyncAdd():this.once("ready",function(){this._asyncAdd()},this)},onRemove:function(r){r.removeLayer(this._maplibreGL)},_asyncAdd:function(){var r=this._map;this._maplibreGL.addTo(r,this)}});const Qf=[];function _o(r,t=qi){let e;const i=new Set;function o(n){if(_i(r,n)&&(r=n,e)){const l=!Qf.length;for(const u of i)u[1](),Qf.push(u,r);if(l){for(let u=0;u<Qf.length;u+=2)Qf[u][0](Qf[u+1]);Qf.length=0}}}function a(n){o(n(r))}function s(n,l=qi){const u=[n,l];return i.add(u),i.size===1&&(e=t(o)||qi),n(r),()=>{i.delete(u),i.size===0&&(e(),e=null)}}return{set:o,update:a,subscribe:s}}const Ff=_o(new Set([]));function Lw(r){return Bv(Ff).has(r)}function Pg(r){console.log("toggle selection",r),Lw(r)?Ff.update(t=>(t.delete(r),t)):Ff.update(t=>t.add(r))}function Pw(){Ff.set(new Set)}const $v=_o({});function rc(r){return Bv($v)[r]}function Rg(r){$v.update(t=>(t[r.id]=r,t))}const Qv=_o(window.innerWidth),qv=_o(window.innerHeight);window.addEventListener("resize",()=>{Qv.set(window.innerWidth),qv.set(window.innerHeight)});const Df=_o(!0),zc=_o(!0),td=_o(!0),mh=_o("datainfo"),cv=_o(new Set),yp=_o("datainfo"),fv=_o(new Set),_p=_o("datainfo"),O_=_o();function op(r,t){return r==null||t==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function Rw(r,t){return r==null||t==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function z_(r){let t,e,i;r.length!==2?(t=op,e=(n,l)=>op(r(n),l),i=(n,l)=>r(n)-l):(t=r===op||r===Rw?r:Fw,e=r,i=r);function o(n,l,u=0,h=n.length){if(u<h){if(t(l,l)!==0)return h;do{const v=u+h>>>1;e(n[v],l)<0?u=v+1:h=v}while(u<h)}return u}function a(n,l,u=0,h=n.length){if(u<h){if(t(l,l)!==0)return h;do{const v=u+h>>>1;e(n[v],l)<=0?u=v+1:h=v}while(u<h)}return u}function s(n,l,u=0,h=n.length){const v=o(n,l,u,h-1);return v>u&&i(n[v-1],l)>-i(n[v],l)?v-1:v}return{left:o,center:s,right:a}}function Fw(){return 0}function Ow(r){return r===null?NaN:+r}const zw=z_(op),Bw=zw.right;z_(Ow).center;const Nw=Bw;var hv=Math.sqrt(50),dv=Math.sqrt(10),pv=Math.sqrt(2);function Uw(r,t,e){var i,o=-1,a,s,n;if(t=+t,r=+r,e=+e,r===t&&e>0)return[r];if((i=t<r)&&(a=r,r=t,t=a),(n=B_(r,t,e))===0||!isFinite(n))return[];if(n>0){let l=Math.round(r/n),u=Math.round(t/n);for(l*n<r&&++l,u*n>t&&--u,s=new Array(a=u-l+1);++o<a;)s[o]=(l+o)*n}else{n=-n;let l=Math.round(r*n),u=Math.round(t*n);for(l/n<r&&++l,u/n>t&&--u,s=new Array(a=u-l+1);++o<a;)s[o]=(l+o)/n}return i&&s.reverse(),s}function B_(r,t,e){var i=(t-r)/Math.max(0,e),o=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,o);return o>=0?(a>=hv?10:a>=dv?5:a>=pv?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=hv?10:a>=dv?5:a>=pv?2:1)}function Hw(r,t,e){var i=Math.abs(t-r)/Math.max(0,e),o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/o;return a>=hv?o*=10:a>=dv?o*=5:a>=pv&&(o*=2),t<r?-o:o}var Vw={value:()=>{}};function N_(){for(var r=0,t=arguments.length,e={},i;r<t;++r){if(!(i=arguments[r]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new sp(e)}function sp(r){this._=r}function Gw(r,t){return r.trim().split(/^|\s+/).map(function(e){var i="",o=e.indexOf(".");if(o>=0&&(i=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}sp.prototype=N_.prototype={constructor:sp,on:function(r,t){var e=this._,i=Gw(r+"",e),o,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((o=(r=i[a]).type)&&(o=Zw(e[o],r.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(o=(r=i[a]).type)e[o]=Fg(e[o],r.name,t);else if(t==null)for(o in e)e[o]=Fg(e[o],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new sp(r)},call:function(r,t){if((o=arguments.length-2)>0)for(var e=new Array(o),i=0,o,a;i<o;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],i=0,o=a.length;i<o;++i)a[i].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var i=this._[r],o=0,a=i.length;o<a;++o)i[o].value.apply(t,e)}};function Zw(r,t){for(var e=0,i=r.length,o;e<i;++e)if((o=r[e]).name===t)return o.value}function Fg(r,t,e){for(var i=0,o=r.length;i<o;++i)if(r[i].name===t){r[i]=Vw,r=r.slice(0,i).concat(r.slice(i+1));break}return e!=null&&r.push({name:t,value:e}),r}var mv="http://www.w3.org/1999/xhtml";const Og={svg:"http://www.w3.org/2000/svg",xhtml:mv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yp(r){var t=r+="",e=t.indexOf(":");return e>=0&&(t=r.slice(0,e))!=="xmlns"&&(r=r.slice(e+1)),Og.hasOwnProperty(t)?{space:Og[t],local:r}:r}function Ww(r){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===mv&&t.documentElement.namespaceURI===mv?t.createElement(r):t.createElementNS(e,r)}}function jw(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function e0(r){var t=Yp(r);return(t.local?jw:Ww)(t)}function Yw(){}function t0(r){return r==null?Yw:function(){return this.querySelector(r)}}function Xw(r){typeof r!="function"&&(r=t0(r));for(var t=this._groups,e=t.length,i=new Array(e),o=0;o<e;++o)for(var a=t[o],s=a.length,n=i[o]=new Array(s),l,u,h=0;h<s;++h)(l=a[h])&&(u=r.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),n[h]=u);return new Nl(i,this._parents)}function Kw(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function Jw(){return[]}function U_(r){return r==null?Jw:function(){return this.querySelectorAll(r)}}function $w(r){return function(){return Kw(r.apply(this,arguments))}}function Qw(r){typeof r=="function"?r=$w(r):r=U_(r);for(var t=this._groups,e=t.length,i=[],o=[],a=0;a<e;++a)for(var s=t[a],n=s.length,l,u=0;u<n;++u)(l=s[u])&&(i.push(r.call(l,l.__data__,u,s)),o.push(l));return new Nl(i,o)}function H_(r){return function(){return this.matches(r)}}function V_(r){return function(t){return t.matches(r)}}var qw=Array.prototype.find;function e3(r){return function(){return qw.call(this.children,r)}}function t3(){return this.firstElementChild}function r3(r){return this.select(r==null?t3:e3(typeof r=="function"?r:V_(r)))}var n3=Array.prototype.filter;function i3(){return Array.from(this.children)}function a3(r){return function(){return n3.call(this.children,r)}}function o3(r){return this.selectAll(r==null?i3:a3(typeof r=="function"?r:V_(r)))}function s3(r){typeof r!="function"&&(r=H_(r));for(var t=this._groups,e=t.length,i=new Array(e),o=0;o<e;++o)for(var a=t[o],s=a.length,n=i[o]=[],l,u=0;u<s;++u)(l=a[u])&&r.call(l,l.__data__,u,a)&&n.push(l);return new Nl(i,this._parents)}function G_(r){return new Array(r.length)}function l3(){return new Nl(this._enter||this._groups.map(G_),this._parents)}function bp(r,t){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=t}bp.prototype={constructor:bp,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,t){return this._parent.insertBefore(r,t)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function u3(r){return function(){return r}}function c3(r,t,e,i,o,a){for(var s=0,n,l=t.length,u=a.length;s<u;++s)(n=t[s])?(n.__data__=a[s],i[s]=n):e[s]=new bp(r,a[s]);for(;s<l;++s)(n=t[s])&&(o[s]=n)}function f3(r,t,e,i,o,a,s){var n,l,u=new Map,h=t.length,v=a.length,d=new Array(h),p;for(n=0;n<h;++n)(l=t[n])&&(d[n]=p=s.call(l,l.__data__,n,t)+"",u.has(p)?o[n]=l:u.set(p,l));for(n=0;n<v;++n)p=s.call(r,a[n],n,a)+"",(l=u.get(p))?(i[n]=l,l.__data__=a[n],u.delete(p)):e[n]=new bp(r,a[n]);for(n=0;n<h;++n)(l=t[n])&&u.get(d[n])===l&&(o[n]=l)}function h3(r){return r.__data__}function d3(r,t){if(!arguments.length)return Array.from(this,h3);var e=t?f3:c3,i=this._parents,o=this._groups;typeof r!="function"&&(r=u3(r));for(var a=o.length,s=new Array(a),n=new Array(a),l=new Array(a),u=0;u<a;++u){var h=i[u],v=o[u],d=v.length,p=p3(r.call(h,h&&h.__data__,u,i)),_=p.length,b=n[u]=new Array(_),x=s[u]=new Array(_),E=l[u]=new Array(d);e(h,v,b,x,E,p,t);for(var A=0,P=0,D,R;A<_;++A)if(D=b[A]){for(A>=P&&(P=A+1);!(R=x[P])&&++P<_;);D._next=R||null}}return s=new Nl(s,i),s._enter=n,s._exit=l,s}function p3(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function m3(){return new Nl(this._exit||this._groups.map(G_),this._parents)}function v3(r,t,e){var i=this.enter(),o=this,a=this.exit();return typeof r=="function"?(i=r(i),i&&(i=i.selection())):i=i.append(r+""),t!=null&&(o=t(o),o&&(o=o.selection())),e==null?a.remove():e(a),i&&o?i.merge(o).order():o}function g3(r){for(var t=r.selection?r.selection():r,e=this._groups,i=t._groups,o=e.length,a=i.length,s=Math.min(o,a),n=new Array(o),l=0;l<s;++l)for(var u=e[l],h=i[l],v=u.length,d=n[l]=new Array(v),p,_=0;_<v;++_)(p=u[_]||h[_])&&(d[_]=p);for(;l<o;++l)n[l]=e[l];return new Nl(n,this._parents)}function y3(){for(var r=this._groups,t=-1,e=r.length;++t<e;)for(var i=r[t],o=i.length-1,a=i[o],s;--o>=0;)(s=i[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function _3(r){r||(r=b3);function t(v,d){return v&&d?r(v.__data__,d.__data__):!v-!d}for(var e=this._groups,i=e.length,o=new Array(i),a=0;a<i;++a){for(var s=e[a],n=s.length,l=o[a]=new Array(n),u,h=0;h<n;++h)(u=s[h])&&(l[h]=u);l.sort(t)}return new Nl(o,this._parents).order()}function b3(r,t){return r<t?-1:r>t?1:r>=t?0:NaN}function x3(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function w3(){return Array.from(this)}function T3(){for(var r=this._groups,t=0,e=r.length;t<e;++t)for(var i=r[t],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null}function A3(){let r=0;for(const t of this)++r;return r}function S3(){return!this.node()}function E3(r){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var o=t[e],a=0,s=o.length,n;a<s;++a)(n=o[a])&&r.call(n,n.__data__,a,o);return this}function C3(r){return function(){this.removeAttribute(r)}}function D3(r){return function(){this.removeAttributeNS(r.space,r.local)}}function M3(r,t){return function(){this.setAttribute(r,t)}}function k3(r,t){return function(){this.setAttributeNS(r.space,r.local,t)}}function I3(r,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(r):this.setAttribute(r,e)}}function L3(r,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,e)}}function P3(r,t){var e=Yp(r);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?D3:C3:typeof t=="function"?e.local?L3:I3:e.local?k3:M3)(e,t))}function Z_(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function R3(r){return function(){this.style.removeProperty(r)}}function F3(r,t,e){return function(){this.style.setProperty(r,t,e)}}function O3(r,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(r):this.style.setProperty(r,i,e)}}function z3(r,t,e){return arguments.length>1?this.each((t==null?R3:typeof t=="function"?O3:F3)(r,t,e==null?"":e)):vh(this.node(),r)}function vh(r,t){return r.style.getPropertyValue(t)||Z_(r).getComputedStyle(r,null).getPropertyValue(t)}function B3(r){return function(){delete this[r]}}function N3(r,t){return function(){this[r]=t}}function U3(r,t){return function(){var e=t.apply(this,arguments);e==null?delete this[r]:this[r]=e}}function H3(r,t){return arguments.length>1?this.each((t==null?B3:typeof t=="function"?U3:N3)(r,t)):this.node()[r]}function W_(r){return r.trim().split(/^|\s+/)}function r0(r){return r.classList||new j_(r)}function j_(r){this._node=r,this._names=W_(r.getAttribute("class")||"")}j_.prototype={add:function(r){var t=this._names.indexOf(r);t<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var t=this._names.indexOf(r);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function Y_(r,t){for(var e=r0(r),i=-1,o=t.length;++i<o;)e.add(t[i])}function X_(r,t){for(var e=r0(r),i=-1,o=t.length;++i<o;)e.remove(t[i])}function V3(r){return function(){Y_(this,r)}}function G3(r){return function(){X_(this,r)}}function Z3(r,t){return function(){(t.apply(this,arguments)?Y_:X_)(this,r)}}function W3(r,t){var e=W_(r+"");if(arguments.length<2){for(var i=r0(this.node()),o=-1,a=e.length;++o<a;)if(!i.contains(e[o]))return!1;return!0}return this.each((typeof t=="function"?Z3:t?V3:G3)(e,t))}function j3(){this.textContent=""}function Y3(r){return function(){this.textContent=r}}function X3(r){return function(){var t=r.apply(this,arguments);this.textContent=t==null?"":t}}function K3(r){return arguments.length?this.each(r==null?j3:(typeof r=="function"?X3:Y3)(r)):this.node().textContent}function J3(){this.innerHTML=""}function $3(r){return function(){this.innerHTML=r}}function Q3(r){return function(){var t=r.apply(this,arguments);this.innerHTML=t==null?"":t}}function q3(r){return arguments.length?this.each(r==null?J3:(typeof r=="function"?Q3:$3)(r)):this.node().innerHTML}function eT(){this.nextSibling&&this.parentNode.appendChild(this)}function tT(){return this.each(eT)}function rT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nT(){return this.each(rT)}function iT(r){var t=typeof r=="function"?r:e0(r);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function aT(){return null}function oT(r,t){var e=typeof r=="function"?r:e0(r),i=t==null?aT:typeof t=="function"?t:t0(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function sT(){var r=this.parentNode;r&&r.removeChild(this)}function lT(){return this.each(sT)}function uT(){var r=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(r,this.nextSibling):r}function cT(){var r=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(r,this.nextSibling):r}function fT(r){return this.select(r?cT:uT)}function hT(r){return arguments.length?this.property("__data__",r):this.node().__data__}function dT(r){return function(t){r.call(this,t,this.__data__)}}function pT(r){return r.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function mT(r){return function(){var t=this.__on;if(!!t){for(var e=0,i=-1,o=t.length,a;e<o;++e)a=t[e],(!r.type||a.type===r.type)&&a.name===r.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function vT(r,t,e){return function(){var i=this.__on,o,a=dT(t);if(i){for(var s=0,n=i.length;s<n;++s)if((o=i[s]).type===r.type&&o.name===r.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=e),o.value=t;return}}this.addEventListener(r.type,a,e),o={type:r.type,name:r.name,value:t,listener:a,options:e},i?i.push(o):this.__on=[o]}}function gT(r,t,e){var i=pT(r+""),o,a=i.length,s;if(arguments.length<2){var n=this.node().__on;if(n){for(var l=0,u=n.length,h;l<u;++l)for(o=0,h=n[l];o<a;++o)if((s=i[o]).type===h.type&&s.name===h.name)return h.value}return}for(n=t?vT:mT,o=0;o<a;++o)this.each(n(i[o],t,e));return this}function K_(r,t,e){var i=Z_(r),o=i.CustomEvent;typeof o=="function"?o=new o(t,e):(o=i.document.createEvent("Event"),e?(o.initEvent(t,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(t,!1,!1)),r.dispatchEvent(o)}function yT(r,t){return function(){return K_(this,r,t)}}function _T(r,t){return function(){return K_(this,r,t.apply(this,arguments))}}function bT(r,t){return this.each((typeof t=="function"?_T:yT)(r,t))}function*xT(){for(var r=this._groups,t=0,e=r.length;t<e;++t)for(var i=r[t],o=0,a=i.length,s;o<a;++o)(s=i[o])&&(yield s)}var J_=[null];function Nl(r,t){this._groups=r,this._parents=t}function _d(){return new Nl([[document.documentElement]],J_)}function wT(){return this}Nl.prototype=_d.prototype={constructor:Nl,select:Xw,selectAll:Qw,selectChild:r3,selectChildren:o3,filter:s3,data:d3,enter:l3,exit:m3,join:v3,merge:g3,selection:wT,order:y3,sort:_3,call:x3,nodes:w3,node:T3,size:A3,empty:S3,each:E3,attr:P3,style:z3,property:H3,classed:W3,text:K3,html:q3,raise:tT,lower:nT,append:iT,insert:oT,remove:lT,clone:fT,datum:hT,on:gT,dispatch:bT,[Symbol.iterator]:xT};function TT(r){return typeof r=="string"?new Nl([[document.querySelector(r)]],[document.documentElement]):new Nl([[r]],J_)}function $_(r){return TT(e0(r).call(document.documentElement))}function n0(r,t,e){r.prototype=t.prototype=e,e.constructor=r}function Q_(r,t){var e=Object.create(r.prototype);for(var i in t)e[i]=t[i];return e}function bd(){}var hd=.7,xp=1/hd,lh="\\s*([+-]?\\d+)\\s*",dd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AT=/^#([0-9a-f]{3,8})$/,ST=new RegExp(`^rgb\\(${lh},${lh},${lh}\\)$`),ET=new RegExp(`^rgb\\(${nc},${nc},${nc}\\)$`),CT=new RegExp(`^rgba\\(${lh},${lh},${lh},${dd}\\)$`),DT=new RegExp(`^rgba\\(${nc},${nc},${nc},${dd}\\)$`),MT=new RegExp(`^hsl\\(${dd},${nc},${nc}\\)$`),kT=new RegExp(`^hsla\\(${dd},${nc},${nc},${dd}\\)$`),zg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n0(bd,vf,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Bg,formatHex:Bg,formatHex8:IT,formatHsl:LT,formatRgb:Ng,toString:Ng});function Bg(){return this.rgb().formatHex()}function IT(){return this.rgb().formatHex8()}function LT(){return q_(this).formatHsl()}function Ng(){return this.rgb().formatRgb()}function vf(r){var t,e;return r=(r+"").trim().toLowerCase(),(t=AT.exec(r))?(e=t[1].length,t=parseInt(t[1],16),e===6?Ug(t):e===3?new _l(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Ud(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Ud(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ST.exec(r))?new _l(t[1],t[2],t[3],1):(t=ET.exec(r))?new _l(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=CT.exec(r))?Ud(t[1],t[2],t[3],t[4]):(t=DT.exec(r))?Ud(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MT.exec(r))?Gg(t[1],t[2]/100,t[3]/100,1):(t=kT.exec(r))?Gg(t[1],t[2]/100,t[3]/100,t[4]):zg.hasOwnProperty(r)?Ug(zg[r]):r==="transparent"?new _l(NaN,NaN,NaN,0):null}function Ug(r){return new _l(r>>16&255,r>>8&255,r&255,1)}function Ud(r,t,e,i){return i<=0&&(r=t=e=NaN),new _l(r,t,e,i)}function PT(r){return r instanceof bd||(r=vf(r)),r?(r=r.rgb(),new _l(r.r,r.g,r.b,r.opacity)):new _l}function wp(r,t,e,i){return arguments.length===1?PT(r):new _l(r,t,e,i==null?1:i)}function _l(r,t,e,i){this.r=+r,this.g=+t,this.b=+e,this.opacity=+i}n0(_l,wp,Q_(bd,{brighter(r){return r=r==null?xp:Math.pow(xp,r),new _l(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?hd:Math.pow(hd,r),new _l(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new _l(If(this.r),If(this.g),If(this.b),Tp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hg,formatHex:Hg,formatHex8:RT,formatRgb:Vg,toString:Vg}));function Hg(){return`#${Mf(this.r)}${Mf(this.g)}${Mf(this.b)}`}function RT(){return`#${Mf(this.r)}${Mf(this.g)}${Mf(this.b)}${Mf((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vg(){const r=Tp(this.opacity);return`${r===1?"rgb(":"rgba("}${If(this.r)}, ${If(this.g)}, ${If(this.b)}${r===1?")":`, ${r})`}`}function Tp(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function If(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Mf(r){return r=If(r),(r<16?"0":"")+r.toString(16)}function Gg(r,t,e,i){return i<=0?r=t=e=NaN:e<=0||e>=1?r=t=NaN:t<=0&&(r=NaN),new Mu(r,t,e,i)}function q_(r){if(r instanceof Mu)return new Mu(r.h,r.s,r.l,r.opacity);if(r instanceof bd||(r=vf(r)),!r)return new Mu;if(r instanceof Mu)return r;r=r.rgb();var t=r.r/255,e=r.g/255,i=r.b/255,o=Math.min(t,e,i),a=Math.max(t,e,i),s=NaN,n=a-o,l=(a+o)/2;return n?(t===a?s=(e-i)/n+(e<i)*6:e===a?s=(i-t)/n+2:s=(t-e)/n+4,n/=l<.5?a+o:2-a-o,s*=60):n=l>0&&l<1?0:s,new Mu(s,n,l,r.opacity)}function FT(r,t,e,i){return arguments.length===1?q_(r):new Mu(r,t,e,i==null?1:i)}function Mu(r,t,e,i){this.h=+r,this.s=+t,this.l=+e,this.opacity=+i}n0(Mu,FT,Q_(bd,{brighter(r){return r=r==null?xp:Math.pow(xp,r),new Mu(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?hd:Math.pow(hd,r),new Mu(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,t=isNaN(r)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,o=2*e-i;return new _l(Om(r>=240?r-240:r+120,o,i),Om(r,o,i),Om(r<120?r+240:r-120,o,i),this.opacity)},clamp(){return new Mu(Zg(this.h),Hd(this.s),Hd(this.l),Tp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Tp(this.opacity);return`${r===1?"hsl(":"hsla("}${Zg(this.h)}, ${Hd(this.s)*100}%, ${Hd(this.l)*100}%${r===1?")":`, ${r})`}`}}));function Zg(r){return r=(r||0)%360,r<0?r+360:r}function Hd(r){return Math.max(0,Math.min(1,r||0))}function Om(r,t,e){return(r<60?t+(e-t)*r/60:r<180?e:r<240?t+(e-t)*(240-r)/60:t)*255}function OT(r,t,e,i,o){var a=r*r,s=a*r;return((1-3*r+3*a-s)*t+(4-6*a+3*s)*e+(1+3*r+3*a-3*s)*i+s*o)/6}function zT(r){var t=r.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),o=r[i],a=r[i+1],s=i>0?r[i-1]:2*o-a,n=i<t-1?r[i+2]:2*a-o;return OT((e-i/t)*t,s,o,a,n)}}const i0=r=>()=>r;function BT(r,t){return function(e){return r+e*t}}function NT(r,t,e){return r=Math.pow(r,e),t=Math.pow(t,e)-r,e=1/e,function(i){return Math.pow(r+i*t,e)}}function UT(r){return(r=+r)==1?eb:function(t,e){return e-t?NT(t,e,r):i0(isNaN(t)?e:t)}}function eb(r,t){var e=t-r;return e?BT(r,e):i0(isNaN(r)?t:r)}const Ap=function r(t){var e=UT(t);function i(o,a){var s=e((o=wp(o)).r,(a=wp(a)).r),n=e(o.g,a.g),l=e(o.b,a.b),u=eb(o.opacity,a.opacity);return function(h){return o.r=s(h),o.g=n(h),o.b=l(h),o.opacity=u(h),o+""}}return i.gamma=r,i}(1);function HT(r){return function(t){var e=t.length,i=new Array(e),o=new Array(e),a=new Array(e),s,n;for(s=0;s<e;++s)n=wp(t[s]),i[s]=n.r||0,o[s]=n.g||0,a[s]=n.b||0;return i=r(i),o=r(o),a=r(a),n.opacity=1,function(l){return n.r=i(l),n.g=o(l),n.b=a(l),n+""}}}var VT=HT(zT);function GT(r,t){t||(t=[]);var e=r?Math.min(t.length,r.length):0,i=t.slice(),o;return function(a){for(o=0;o<e;++o)i[o]=r[o]*(1-a)+t[o]*a;return i}}function ZT(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function WT(r,t){var e=t?t.length:0,i=r?Math.min(e,r.length):0,o=new Array(i),a=new Array(e),s;for(s=0;s<i;++s)o[s]=Xp(r[s],t[s]);for(;s<e;++s)a[s]=t[s];return function(n){for(s=0;s<i;++s)a[s]=o[s](n);return a}}function jT(r,t){var e=new Date;return r=+r,t=+t,function(i){return e.setTime(r*(1-i)+t*i),e}}function Du(r,t){return r=+r,t=+t,function(e){return r*(1-e)+t*e}}function YT(r,t){var e={},i={},o;(r===null||typeof r!="object")&&(r={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in r?e[o]=Xp(r[o],t[o]):i[o]=t[o];return function(a){for(o in e)i[o]=e[o](a);return i}}var vv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zm=new RegExp(vv.source,"g");function XT(r){return function(){return r}}function KT(r){return function(t){return r(t)+""}}function tb(r,t){var e=vv.lastIndex=zm.lastIndex=0,i,o,a,s=-1,n=[],l=[];for(r=r+"",t=t+"";(i=vv.exec(r))&&(o=zm.exec(t));)(a=o.index)>e&&(a=t.slice(e,a),n[s]?n[s]+=a:n[++s]=a),(i=i[0])===(o=o[0])?n[s]?n[s]+=o:n[++s]=o:(n[++s]=null,l.push({i:s,x:Du(i,o)})),e=zm.lastIndex;return e<t.length&&(a=t.slice(e),n[s]?n[s]+=a:n[++s]=a),n.length<2?l[0]?KT(l[0].x):XT(t):(t=l.length,function(u){for(var h=0,v;h<t;++h)n[(v=l[h]).i]=v.x(u);return n.join("")})}function Xp(r,t){var e=typeof t,i;return t==null||e==="boolean"?i0(t):(e==="number"?Du:e==="string"?(i=vf(t))?(t=i,Ap):tb:t instanceof vf?Ap:t instanceof Date?jT:ZT(t)?GT:Array.isArray(t)?WT:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YT:Du)(r,t)}function rb(r,t){return r=+r,t=+t,function(e){return Math.round(r*(1-e)+t*e)}}var Wg=180/Math.PI,gv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nb(r,t,e,i,o,a){var s,n,l;return(s=Math.sqrt(r*r+t*t))&&(r/=s,t/=s),(l=r*e+t*i)&&(e-=r*l,i-=t*l),(n=Math.sqrt(e*e+i*i))&&(e/=n,i/=n,l/=n),r*i<t*e&&(r=-r,t=-t,l=-l,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(t,r)*Wg,skewX:Math.atan(l)*Wg,scaleX:s,scaleY:n}}var Vd;function JT(r){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return t.isIdentity?gv:nb(t.a,t.b,t.c,t.d,t.e,t.f)}function $T(r){return r==null||(Vd||(Vd=document.createElementNS("http://www.w3.org/2000/svg","g")),Vd.setAttribute("transform",r),!(r=Vd.transform.baseVal.consolidate()))?gv:(r=r.matrix,nb(r.a,r.b,r.c,r.d,r.e,r.f))}function ib(r,t,e,i){function o(u){return u.length?u.pop()+" ":""}function a(u,h,v,d,p,_){if(u!==v||h!==d){var b=p.push("translate(",null,t,null,e);_.push({i:b-4,x:Du(u,v)},{i:b-2,x:Du(h,d)})}else(v||d)&&p.push("translate("+v+t+d+e)}function s(u,h,v,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:v.push(o(v)+"rotate(",null,i)-2,x:Du(u,h)})):h&&v.push(o(v)+"rotate("+h+i)}function n(u,h,v,d){u!==h?d.push({i:v.push(o(v)+"skewX(",null,i)-2,x:Du(u,h)}):h&&v.push(o(v)+"skewX("+h+i)}function l(u,h,v,d,p,_){if(u!==v||h!==d){var b=p.push(o(p)+"scale(",null,",",null,")");_.push({i:b-4,x:Du(u,v)},{i:b-2,x:Du(h,d)})}else(v!==1||d!==1)&&p.push(o(p)+"scale("+v+","+d+")")}return function(u,h){var v=[],d=[];return u=r(u),h=r(h),a(u.translateX,u.translateY,h.translateX,h.translateY,v,d),s(u.rotate,h.rotate,v,d),n(u.skewX,h.skewX,v,d),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,v,d),u=h=null,function(p){for(var _=-1,b=d.length,x;++_<b;)v[(x=d[_]).i]=x.x(p);return v.join("")}}}var QT=ib(JT,"px, ","px)","deg)"),qT=ib($T,", ",")",")"),gh=0,rd=0,jh=0,ab=1e3,Sp,nd,Ep=0,Of=0,Kp=0,pd=typeof performance=="object"&&performance.now?performance:Date,ob=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function a0(){return Of||(ob(eA),Of=pd.now()+Kp)}function eA(){Of=0}function Cp(){this._call=this._time=this._next=null}Cp.prototype=sb.prototype={constructor:Cp,restart:function(r,t,e){if(typeof r!="function")throw new TypeError("callback is not a function");e=(e==null?a0():+e)+(t==null?0:+t),!this._next&&nd!==this&&(nd?nd._next=this:Sp=this,nd=this),this._call=r,this._time=e,yv()},stop:function(){this._call&&(this._call=null,this._time=1/0,yv())}};function sb(r,t,e){var i=new Cp;return i.restart(r,t,e),i}function tA(){a0(),++gh;for(var r=Sp,t;r;)(t=Of-r._time)>=0&&r._call.call(void 0,t),r=r._next;--gh}function jg(){Of=(Ep=pd.now())+Kp,gh=rd=0;try{tA()}finally{gh=0,nA(),Of=0}}function rA(){var r=pd.now(),t=r-Ep;t>ab&&(Kp-=t,Ep=r)}function nA(){for(var r,t=Sp,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:Sp=e);nd=r,yv(i)}function yv(r){if(!gh){rd&&(rd=clearTimeout(rd));var t=r-Of;t>24?(r<1/0&&(rd=setTimeout(jg,r-pd.now()-Kp)),jh&&(jh=clearInterval(jh))):(jh||(Ep=pd.now(),jh=setInterval(rA,ab)),gh=1,ob(jg))}}function Yg(r,t,e){var i=new Cp;return t=t==null?0:+t,i.restart(o=>{i.stop(),r(o+t)},t,e),i}var iA=N_("start","end","cancel","interrupt"),aA=[],lb=0,Xg=1,_v=2,lp=3,Kg=4,bv=5,up=6;function Jp(r,t,e,i,o,a){var s=r.__transition;if(!s)r.__transition={};else if(e in s)return;oA(r,e,{name:t,index:i,group:o,on:iA,tween:aA,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:lb})}function o0(r,t){var e=Ru(r,t);if(e.state>lb)throw new Error("too late; already scheduled");return e}function ac(r,t){var e=Ru(r,t);if(e.state>lp)throw new Error("too late; already running");return e}function Ru(r,t){var e=r.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function oA(r,t,e){var i=r.__transition,o;i[t]=e,e.timer=sb(a,0,e.time);function a(u){e.state=Xg,e.timer.restart(s,e.delay,e.time),e.delay<=u&&s(u-e.delay)}function s(u){var h,v,d,p;if(e.state!==Xg)return l();for(h in i)if(p=i[h],p.name===e.name){if(p.state===lp)return Yg(s);p.state===Kg?(p.state=up,p.timer.stop(),p.on.call("interrupt",r,r.__data__,p.index,p.group),delete i[h]):+h<t&&(p.state=up,p.timer.stop(),p.on.call("cancel",r,r.__data__,p.index,p.group),delete i[h])}if(Yg(function(){e.state===lp&&(e.state=Kg,e.timer.restart(n,e.delay,e.time),n(u))}),e.state=_v,e.on.call("start",r,r.__data__,e.index,e.group),e.state===_v){for(e.state=lp,o=new Array(d=e.tween.length),h=0,v=-1;h<d;++h)(p=e.tween[h].value.call(r,r.__data__,e.index,e.group))&&(o[++v]=p);o.length=v+1}}function n(u){for(var h=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(l),e.state=bv,1),v=-1,d=o.length;++v<d;)o[v].call(r,h);e.state===bv&&(e.on.call("end",r,r.__data__,e.index,e.group),l())}function l(){e.state=up,e.timer.stop(),delete i[t];for(var u in i)return;delete r.__transition}}function sA(r,t){var e=r.__transition,i,o,a=!0,s;if(!!e){t=t==null?null:t+"";for(s in e){if((i=e[s]).name!==t){a=!1;continue}o=i.state>_v&&i.state<bv,i.state=up,i.timer.stop(),i.on.call(o?"interrupt":"cancel",r,r.__data__,i.index,i.group),delete e[s]}a&&delete r.__transition}}function lA(r){return this.each(function(){sA(this,r)})}function uA(r,t){var e,i;return function(){var o=ac(this,r),a=o.tween;if(a!==e){i=e=a;for(var s=0,n=i.length;s<n;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function cA(r,t,e){var i,o;if(typeof e!="function")throw new Error;return function(){var a=ac(this,r),s=a.tween;if(s!==i){o=(i=s).slice();for(var n={name:t,value:e},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=n;break}l===u&&o.push(n)}a.tween=o}}function fA(r,t){var e=this._id;if(r+="",arguments.length<2){for(var i=Ru(this.node(),e).tween,o=0,a=i.length,s;o<a;++o)if((s=i[o]).name===r)return s.value;return null}return this.each((t==null?uA:cA)(e,r,t))}function s0(r,t,e){var i=r._id;return r.each(function(){var o=ac(this,i);(o.value||(o.value={}))[t]=e.apply(this,arguments)}),function(o){return Ru(o,i).value[t]}}function ub(r,t){var e;return(typeof t=="number"?Du:t instanceof vf?Ap:(e=vf(t))?(t=e,Ap):tb)(r,t)}function hA(r){return function(){this.removeAttribute(r)}}function dA(r){return function(){this.removeAttributeNS(r.space,r.local)}}function pA(r,t,e){var i,o=e+"",a;return function(){var s=this.getAttribute(r);return s===o?null:s===i?a:a=t(i=s,e)}}function mA(r,t,e){var i,o=e+"",a;return function(){var s=this.getAttributeNS(r.space,r.local);return s===o?null:s===i?a:a=t(i=s,e)}}function vA(r,t,e){var i,o,a;return function(){var s,n=e(this),l;return n==null?void this.removeAttribute(r):(s=this.getAttribute(r),l=n+"",s===l?null:s===i&&l===o?a:(o=l,a=t(i=s,n)))}}function gA(r,t,e){var i,o,a;return function(){var s,n=e(this),l;return n==null?void this.removeAttributeNS(r.space,r.local):(s=this.getAttributeNS(r.space,r.local),l=n+"",s===l?null:s===i&&l===o?a:(o=l,a=t(i=s,n)))}}function yA(r,t){var e=Yp(r),i=e==="transform"?qT:ub;return this.attrTween(r,typeof t=="function"?(e.local?gA:vA)(e,i,s0(this,"attr."+r,t)):t==null?(e.local?dA:hA)(e):(e.local?mA:pA)(e,i,t))}function _A(r,t){return function(e){this.setAttribute(r,t.call(this,e))}}function bA(r,t){return function(e){this.setAttributeNS(r.space,r.local,t.call(this,e))}}function xA(r,t){var e,i;function o(){var a=t.apply(this,arguments);return a!==i&&(e=(i=a)&&bA(r,a)),e}return o._value=t,o}function wA(r,t){var e,i;function o(){var a=t.apply(this,arguments);return a!==i&&(e=(i=a)&&_A(r,a)),e}return o._value=t,o}function TA(r,t){var e="attr."+r;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=Yp(r);return this.tween(e,(i.local?xA:wA)(i,t))}function AA(r,t){return function(){o0(this,r).delay=+t.apply(this,arguments)}}function SA(r,t){return t=+t,function(){o0(this,r).delay=t}}function EA(r){var t=this._id;return arguments.length?this.each((typeof r=="function"?AA:SA)(t,r)):Ru(this.node(),t).delay}function CA(r,t){return function(){ac(this,r).duration=+t.apply(this,arguments)}}function DA(r,t){return t=+t,function(){ac(this,r).duration=t}}function MA(r){var t=this._id;return arguments.length?this.each((typeof r=="function"?CA:DA)(t,r)):Ru(this.node(),t).duration}function kA(r,t){if(typeof t!="function")throw new Error;return function(){ac(this,r).ease=t}}function IA(r){var t=this._id;return arguments.length?this.each(kA(t,r)):Ru(this.node(),t).ease}function LA(r,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;ac(this,r).ease=e}}function PA(r){if(typeof r!="function")throw new Error;return this.each(LA(this._id,r))}function RA(r){typeof r!="function"&&(r=H_(r));for(var t=this._groups,e=t.length,i=new Array(e),o=0;o<e;++o)for(var a=t[o],s=a.length,n=i[o]=[],l,u=0;u<s;++u)(l=a[u])&&r.call(l,l.__data__,u,a)&&n.push(l);return new Uc(i,this._parents,this._name,this._id)}function FA(r){if(r._id!==this._id)throw new Error;for(var t=this._groups,e=r._groups,i=t.length,o=e.length,a=Math.min(i,o),s=new Array(i),n=0;n<a;++n)for(var l=t[n],u=e[n],h=l.length,v=s[n]=new Array(h),d,p=0;p<h;++p)(d=l[p]||u[p])&&(v[p]=d);for(;n<i;++n)s[n]=t[n];return new Uc(s,this._parents,this._name,this._id)}function OA(r){return(r+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function zA(r,t,e){var i,o,a=OA(t)?o0:ac;return function(){var s=a(this,r),n=s.on;n!==i&&(o=(i=n).copy()).on(t,e),s.on=o}}function BA(r,t){var e=this._id;return arguments.length<2?Ru(this.node(),e).on.on(r):this.each(zA(e,r,t))}function NA(r){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==r)return;t&&t.removeChild(this)}}function UA(){return this.on("end.remove",NA(this._id))}function HA(r){var t=this._name,e=this._id;typeof r!="function"&&(r=t0(r));for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s)for(var n=i[s],l=n.length,u=a[s]=new Array(l),h,v,d=0;d<l;++d)(h=n[d])&&(v=r.call(h,h.__data__,d,n))&&("__data__"in h&&(v.__data__=h.__data__),u[d]=v,Jp(u[d],t,e,d,u,Ru(h,e)));return new Uc(a,this._parents,t,e)}function VA(r){var t=this._name,e=this._id;typeof r!="function"&&(r=U_(r));for(var i=this._groups,o=i.length,a=[],s=[],n=0;n<o;++n)for(var l=i[n],u=l.length,h,v=0;v<u;++v)if(h=l[v]){for(var d=r.call(h,h.__data__,v,l),p,_=Ru(h,e),b=0,x=d.length;b<x;++b)(p=d[b])&&Jp(p,t,e,b,d,_);a.push(d),s.push(h)}return new Uc(a,s,t,e)}var GA=_d.prototype.constructor;function ZA(){return new GA(this._groups,this._parents)}function WA(r,t){var e,i,o;return function(){var a=vh(this,r),s=(this.style.removeProperty(r),vh(this,r));return a===s?null:a===e&&s===i?o:o=t(e=a,i=s)}}function cb(r){return function(){this.style.removeProperty(r)}}function jA(r,t,e){var i,o=e+"",a;return function(){var s=vh(this,r);return s===o?null:s===i?a:a=t(i=s,e)}}function YA(r,t,e){var i,o,a;return function(){var s=vh(this,r),n=e(this),l=n+"";return n==null&&(l=n=(this.style.removeProperty(r),vh(this,r))),s===l?null:s===i&&l===o?a:(o=l,a=t(i=s,n))}}function XA(r,t){var e,i,o,a="style."+t,s="end."+a,n;return function(){var l=ac(this,r),u=l.on,h=l.value[a]==null?n||(n=cb(t)):void 0;(u!==e||o!==h)&&(i=(e=u).copy()).on(s,o=h),l.on=i}}function KA(r,t,e){var i=(r+="")=="transform"?QT:ub;return t==null?this.styleTween(r,WA(r,i)).on("end.style."+r,cb(r)):typeof t=="function"?this.styleTween(r,YA(r,i,s0(this,"style."+r,t))).each(XA(this._id,r)):this.styleTween(r,jA(r,i,t),e).on("end.style."+r,null)}function JA(r,t,e){return function(i){this.style.setProperty(r,t.call(this,i),e)}}function $A(r,t,e){var i,o;function a(){var s=t.apply(this,arguments);return s!==o&&(i=(o=s)&&JA(r,s,e)),i}return a._value=t,a}function QA(r,t,e){var i="style."+(r+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,$A(r,t,e==null?"":e))}function qA(r){return function(){this.textContent=r}}function eS(r){return function(){var t=r(this);this.textContent=t==null?"":t}}function tS(r){return this.tween("text",typeof r=="function"?eS(s0(this,"text",r)):qA(r==null?"":r+""))}function rS(r){return function(t){this.textContent=r.call(this,t)}}function nS(r){var t,e;function i(){var o=r.apply(this,arguments);return o!==e&&(t=(e=o)&&rS(o)),t}return i._value=r,i}function iS(r){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(r==null)return this.tween(t,null);if(typeof r!="function")throw new Error;return this.tween(t,nS(r))}function aS(){for(var r=this._name,t=this._id,e=fb(),i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],n=s.length,l,u=0;u<n;++u)if(l=s[u]){var h=Ru(l,t);Jp(l,r,e,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Uc(i,this._parents,r,e)}function oS(){var r,t,e=this,i=e._id,o=e.size();return new Promise(function(a,s){var n={value:s},l={value:function(){--o===0&&a()}};e.each(function(){var u=ac(this,i),h=u.on;h!==r&&(t=(r=h).copy(),t._.cancel.push(n),t._.interrupt.push(n),t._.end.push(l)),u.on=t}),o===0&&a()})}var sS=0;function Uc(r,t,e,i){this._groups=r,this._parents=t,this._name=e,this._id=i}function fb(){return++sS}var Dc=_d.prototype;Uc.prototype={constructor:Uc,select:HA,selectAll:VA,selectChild:Dc.selectChild,selectChildren:Dc.selectChildren,filter:RA,merge:FA,selection:ZA,transition:aS,call:Dc.call,nodes:Dc.nodes,node:Dc.node,size:Dc.size,empty:Dc.empty,each:Dc.each,on:BA,attr:yA,attrTween:TA,style:KA,styleTween:QA,text:tS,textTween:iS,remove:UA,tween:fA,delay:EA,duration:MA,ease:IA,easeVarying:PA,end:oS,[Symbol.iterator]:Dc[Symbol.iterator]};function lS(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var uS={time:null,delay:0,duration:250,ease:lS};function cS(r,t){for(var e;!(e=r.__transition)||!(e=e[t]);)if(!(r=r.parentNode))throw new Error(`transition ${t} not found`);return e}function fS(r){var t,e;r instanceof Uc?(t=r._id,r=r._name):(t=fb(),(e=uS).time=a0(),r=r==null?null:r+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],n=s.length,l,u=0;u<n;++u)(l=s[u])&&Jp(l,r,t,u,s,e||cS(l,t));return new Uc(i,this._parents,r,t)}_d.prototype.interrupt=lA;_d.prototype.transition=fS;function hS(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Dp(r,t){if((e=(r=t?r.toExponential(t-1):r.toExponential()).indexOf("e"))<0)return null;var e,i=r.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+r.slice(e+1)]}function yh(r){return r=Dp(Math.abs(r)),r?r[1]:NaN}function dS(r,t){return function(e,i){for(var o=e.length,a=[],s=0,n=r[0],l=0;o>0&&n>0&&(l+n+1>i&&(n=Math.max(1,i-l)),a.push(e.substring(o-=n,o+n)),!((l+=n+1)>i));)n=r[s=(s+1)%r.length];return a.reverse().join(t)}}function pS(r){return function(t){return t.replace(/[0-9]/g,function(e){return r[+e]})}}var mS=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mp(r){if(!(t=mS.exec(r)))throw new Error("invalid format: "+r);var t;return new l0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Mp.prototype=l0.prototype;function l0(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}l0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vS(r){e:for(var t=r.length,e=1,i=-1,o;e<t;++e)switch(r[e]){case".":i=o=e;break;case"0":i===0&&(i=e),o=e;break;default:if(!+r[e])break e;i>0&&(i=0);break}return i>0?r.slice(0,i)+r.slice(o+1):r}var hb;function gS(r,t){var e=Dp(r,t);if(!e)return r+"";var i=e[0],o=e[1],a=o-(hb=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Dp(r,Math.max(0,t+a-1))[0]}function Jg(r,t){var e=Dp(r,t);if(!e)return r+"";var i=e[0],o=e[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}const $g={"%":(r,t)=>(r*100).toFixed(t),b:r=>Math.round(r).toString(2),c:r=>r+"",d:hS,e:(r,t)=>r.toExponential(t),f:(r,t)=>r.toFixed(t),g:(r,t)=>r.toPrecision(t),o:r=>Math.round(r).toString(8),p:(r,t)=>Jg(r*100,t),r:Jg,s:gS,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function Qg(r){return r}var qg=Array.prototype.map,ey=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function yS(r){var t=r.grouping===void 0||r.thousands===void 0?Qg:dS(qg.call(r.grouping,Number),r.thousands+""),e=r.currency===void 0?"":r.currency[0]+"",i=r.currency===void 0?"":r.currency[1]+"",o=r.decimal===void 0?".":r.decimal+"",a=r.numerals===void 0?Qg:pS(qg.call(r.numerals,String)),s=r.percent===void 0?"%":r.percent+"",n=r.minus===void 0?"\u2212":r.minus+"",l=r.nan===void 0?"NaN":r.nan+"";function u(v){v=Mp(v);var d=v.fill,p=v.align,_=v.sign,b=v.symbol,x=v.zero,E=v.width,A=v.comma,P=v.precision,D=v.trim,R=v.type;R==="n"?(A=!0,R="g"):$g[R]||(P===void 0&&(P=12),D=!0,R="g"),(x||d==="0"&&p==="=")&&(x=!0,d="0",p="=");var S=b==="$"?e:b==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",I=b==="$"?i:/[%p]/.test(R)?s:"",T=$g[R],M=/[defgprs%]/.test(R);P=P===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function z(U){var F=S,V=I,j,H,Y;if(R==="c")V=T(U)+V,U="";else{U=+U;var J=U<0||1/U<0;if(U=isNaN(U)?l:T(Math.abs(U),P),D&&(U=vS(U)),J&&+U==0&&_!=="+"&&(J=!1),F=(J?_==="("?_:n:_==="-"||_==="("?"":_)+F,V=(R==="s"?ey[8+hb/3]:"")+V+(J&&_==="("?")":""),M){for(j=-1,H=U.length;++j<H;)if(Y=U.charCodeAt(j),48>Y||Y>57){V=(Y===46?o+U.slice(j+1):U.slice(j))+V,U=U.slice(0,j);break}}}A&&!x&&(U=t(U,1/0));var ne=F.length+U.length+V.length,q=ne<E?new Array(E-ne+1).join(d):"";switch(A&&x&&(U=t(q+U,q.length?E-V.length:1/0),q=""),p){case"<":U=F+U+V+q;break;case"=":U=F+q+U+V;break;case"^":U=q.slice(0,ne=q.length>>1)+F+U+V+q.slice(ne);break;default:U=q+F+U+V;break}return a(U)}return z.toString=function(){return v+""},z}function h(v,d){var p=u((v=Mp(v),v.type="f",v)),_=Math.max(-8,Math.min(8,Math.floor(yh(d)/3)))*3,b=Math.pow(10,-_),x=ey[8+_/3];return function(E){return p(b*E)+x}}return{format:u,formatPrefix:h}}var Gd,db,pb;_S({thousands:",",grouping:[3],currency:["$",""]});function _S(r){return Gd=yS(r),db=Gd.format,pb=Gd.formatPrefix,Gd}function bS(r){return Math.max(0,-yh(Math.abs(r)))}function xS(r,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yh(t)/3)))*3-yh(Math.abs(r)))}function wS(r,t){return r=Math.abs(r),t=Math.abs(t)-r,Math.max(0,yh(t)-yh(r))+1}function TS(r,t){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(t).domain(r);break}return this}function AS(r,t){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}function SS(r){return function(){return r}}function ES(r){return+r}var ty=[0,1];function hf(r){return r}function xv(r,t){return(t-=r=+r)?function(e){return(e-r)/t}:SS(isNaN(t)?NaN:.5)}function CS(r,t){var e;return r>t&&(e=r,r=t,t=e),function(i){return Math.max(r,Math.min(t,i))}}function DS(r,t,e){var i=r[0],o=r[1],a=t[0],s=t[1];return o<i?(i=xv(o,i),a=e(s,a)):(i=xv(i,o),a=e(a,s)),function(n){return a(i(n))}}function MS(r,t,e){var i=Math.min(r.length,t.length)-1,o=new Array(i),a=new Array(i),s=-1;for(r[i]<r[0]&&(r=r.slice().reverse(),t=t.slice().reverse());++s<i;)o[s]=xv(r[s],r[s+1]),a[s]=e(t[s],t[s+1]);return function(n){var l=Nw(r,n,1,i)-1;return a[l](o[l](n))}}function kS(r,t){return t.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function IS(){var r=ty,t=ty,e=Xp,i,o,a,s=hf,n,l,u;function h(){var d=Math.min(r.length,t.length);return s!==hf&&(s=CS(r[0],r[d-1])),n=d>2?MS:DS,l=u=null,v}function v(d){return d==null||isNaN(d=+d)?a:(l||(l=n(r.map(i),t,e)))(i(s(d)))}return v.invert=function(d){return s(o((u||(u=n(t,r.map(i),Du)))(d)))},v.domain=function(d){return arguments.length?(r=Array.from(d,ES),h()):r.slice()},v.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},v.rangeRound=function(d){return t=Array.from(d),e=rb,h()},v.clamp=function(d){return arguments.length?(s=d?!0:hf,h()):s!==hf},v.interpolate=function(d){return arguments.length?(e=d,h()):e},v.unknown=function(d){return arguments.length?(a=d,v):a},function(d,p){return i=d,o=p,h()}}function LS(){return IS()(hf,hf)}function PS(r,t,e,i){var o=Hw(r,t,e),a;switch(i=Mp(i==null?",f":i),i.type){case"s":{var s=Math.max(Math.abs(r),Math.abs(t));return i.precision==null&&!isNaN(a=xS(o,s))&&(i.precision=a),pb(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=wS(o,Math.max(Math.abs(r),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=bS(o))&&(i.precision=a-(i.type==="%")*2);break}}return db(i)}function mb(r){var t=r.domain;return r.ticks=function(e){var i=t();return Uw(i[0],i[i.length-1],e==null?10:e)},r.tickFormat=function(e,i){var o=t();return PS(o[0],o[o.length-1],e==null?10:e,i)},r.nice=function(e){e==null&&(e=10);var i=t(),o=0,a=i.length-1,s=i[o],n=i[a],l,u,h=10;for(n<s&&(u=s,s=n,n=u,u=o,o=a,a=u);h-- >0;){if(u=B_(s,n,e),u===l)return i[o]=s,i[a]=n,t(i);if(u>0)s=Math.floor(s/u)*u,n=Math.ceil(n/u)*u;else if(u<0)s=Math.ceil(s*u)/u,n=Math.floor(n*u)/u;else break;l=u}return r},r}function xd(){var r=LS();return r.copy=function(){return kS(r,xd())},TS.apply(r,arguments),mb(r)}function RS(){var r=0,t=1,e,i,o,a,s=hf,n=!1,l;function u(v){return v==null||isNaN(v=+v)?l:s(o===0?.5:(v=(a(v)-e)*o,n?Math.max(0,Math.min(1,v)):v))}u.domain=function(v){return arguments.length?([r,t]=v,e=a(r=+r),i=a(t=+t),o=e===i?0:1/(i-e),u):[r,t]},u.clamp=function(v){return arguments.length?(n=!!v,u):n},u.interpolator=function(v){return arguments.length?(s=v,u):s};function h(v){return function(d){var p,_;return arguments.length?([p,_]=d,s=v(p,_),u):[s(0),s(1)]}}return u.range=h(Xp),u.rangeRound=h(rb),u.unknown=function(v){return arguments.length?(l=v,u):l},function(v){return a=v,e=v(r),i=v(t),o=e===i?0:1/(i-e),u}}function FS(r,t){return t.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function ao(){var r=mb(RS()(hf));return r.copy=function(){return FS(r,ao())},AS.apply(r,arguments)}function Hl(r){for(var t=r.length/6|0,e=new Array(t),i=0;i<t;)e[i]="#"+r.slice(i*6,++i*6);return e}const Gc=r=>VT(r[r.length-1]);var OS=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Hl);const id=Gc(OS);var zS=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Hl);const BS=Gc(zS);var NS=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Hl);const US=Gc(NS);var HS=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Hl);const VS=Gc(HS);var GS=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Hl);const ZS=Gc(GS);var WS=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Hl);const ry=Gc(WS);var jS=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Hl);const Zd=Gc(jS);var YS=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Hl);const XS=Gc(YS);var KS=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Hl);const JS=Gc(KS);function $S(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+r*(1172.33-r*(10793.56-r*(33300.12-r*(38394.49-r*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+r*(557.33+r*(1225.33-r*(3574.96-r*(1073.77+r*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+r*(3211.1-r*(15327.97-r*(27814-r*(22569.18-r*6838.66)))))))+")"}function $p(r){var t=r.length;return function(e){return r[Math.max(0,Math.min(t-1,Math.floor(e*t)))]}}$p(Hl("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var QS=$p(Hl("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Wd=$p(Hl("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));$p(Hl("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function th(r,t,e){this.k=r,this.x=t,this.y=e}th.prototype={constructor:th,scale:function(r){return r===1?this:new th(this.k*r,this.x,this.y)},translate:function(r,t){return r===0&t===0?this:new th(this.k,this.x+this.k*r,this.y+this.k*t)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new th(1,0,0);th.prototype;var vb={exports:{}};(function(){vb.exports=function(r,t,e){var i,o,a,s,n,l;if(r/=255,t/=255,e/=255,s=Math.max(r,t,e),n=Math.min(r,t,e),o=0,l=0,a=(s+n)/2,s===n)o=l=0;else{switch(i=s-n,l=a>.5?i/(2-s-n):i/(s+n),s){case r:o=(t-e)/i+(t<e?6:0);break;case t:o=(e-r)/i+2;break;case e:o=(r-t)/i+4}o/=6}return o=Math.ceil(o*360),l=Math.ceil(l*100)+"%",a=Math.ceil(a*100)+"%",[o,l,a]}}).call(tc);var qS=function(t){t.charAt&&t.charAt(0)==="#"&&(t=eE(t)),t.length===3&&(t=tE(t));var e=parseInt(t,16),i=e>>16&255,o=e>>8&255,a=e&255;return[i,o,a]};function eE(r){var t=r.split("");return t.shift(),t.join("")}function tE(r){return r.split("").reduce(function(t,e){return t.concat([e,e])},[]).join("")}var ny=vb.exports,rE=qS,nE=function(r){var t=ny.apply(ny,rE(r));return[t[0],parseInt(t[1],10),parseInt(t[2],10)]},jd={exports:{}},Bm={exports:{}},iy;function iE(){return iy||(iy=1,function(r){var t=function(){function e(l,u,h,v){typeof u=="object"&&(h=u.depth,v=u.prototype,u.filter,u=u.circular);var d=[],p=[],_=typeof Buffer<"u";typeof u>"u"&&(u=!0),typeof h>"u"&&(h=1/0);function b(x,E){if(x===null)return null;if(E==0)return x;var A,P;if(typeof x!="object")return x;if(e.__isArray(x))A=[];else if(e.__isRegExp(x))A=new RegExp(x.source,n(x)),x.lastIndex&&(A.lastIndex=x.lastIndex);else if(e.__isDate(x))A=new Date(x.getTime());else{if(_&&Buffer.isBuffer(x))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(x.length):A=new Buffer(x.length),x.copy(A),A;typeof v>"u"?(P=Object.getPrototypeOf(x),A=Object.create(P)):(A=Object.create(v),P=v)}if(u){var D=d.indexOf(x);if(D!=-1)return p[D];d.push(x),p.push(A)}for(var R in x){var S;P&&(S=Object.getOwnPropertyDescriptor(P,R)),!(S&&S.set==null)&&(A[R]=b(x[R],E-1))}return A}return b(l,h)}e.clonePrototype=function(u){if(u===null)return null;var h=function(){};return h.prototype=u,new h};function i(l){return Object.prototype.toString.call(l)}e.__objToStr=i;function o(l){return typeof l=="object"&&i(l)==="[object Date]"}e.__isDate=o;function a(l){return typeof l=="object"&&i(l)==="[object Array]"}e.__isArray=a;function s(l){return typeof l=="object"&&i(l)==="[object RegExp]"}e.__isRegExp=s;function n(l){var u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),u}return e.__getRegExpFlags=n,e}();r.exports&&(r.exports=t)}(Bm)),Bm.exports}var Nm,ay;function aE(){if(ay)return Nm;ay=1;var r=iE();return Nm=function(t,e){return t=t||{},Object.keys(e).forEach(function(i){typeof t[i]>"u"&&(t[i]=r(e[i]))}),t},Nm}var Um,oy;function oE(){return oy||(oy=1,Um=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]]),Um}var sy;function sE(){if(sy)return jd.exports;sy=1;var r=aE(),t=oE(),e={nul:0,control:0};jd.exports=function(n){return i(n,e)},jd.exports.config=function(s){return s=r(s||{},e),function(l){return i(l,s)}};function i(s,n){if(typeof s!="string")return o(s,n);for(var l=0,u=0;u<s.length;u++){var h=o(s.charCodeAt(u),n);if(h<0)return-1;l+=h}return l}function o(s,n){return s===0?n.nul:s<32||s>=127&&s<160?n.control:a(s)?0:1+(s>=4352&&(s<=4447||s==9001||s==9002||s>=11904&&s<=42191&&s!=12351||s>=44032&&s<=55203||s>=63744&&s<=64255||s>=65040&&s<=65049||s>=65072&&s<=65135||s>=65280&&s<=65376||s>=65504&&s<=65510||s>=131072&&s<=196605||s>=196608&&s<=262141))}function a(s){var n=0,l=t.length-1,u;if(s<t[0][0]||s>t[l][1])return!1;for(;l>=n;)if(u=Math.floor((n+l)/2),s>t[u][1])n=u+1;else if(s<t[u][0])l=u-1;else return!0;return!1}return jd.exports}var wv;try{wv=sE()}catch{}var gb=La;function La(){this.rows=[],this.row={__printers:{}}}La.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this};La.prototype.cell=function(r,t,e){return this.row[r]=t,this.row.__printers[r]=e||wd,this};La.prototype.separator="  ";function wd(r){return r===void 0?"":""+r}function u0(r){var t=r.replace(/\u001b\[\d+m/g,"");return wv==null?t.length:wv(t)}La.string=wd;La.leftPadder=c0;function c0(r){return function(t,e){var i=wd(t),o=u0(i),a=e>o?Array(e-o+1).join(r):"";return a+i}}var f0=La.padLeft=c0(" ");La.rightPadder=yb;function yb(r){return function(e,i){var o=wd(e),a=u0(o),s=i>a?Array(i-a+1).join(r):"";return o+s}}var lE=yb(" ");La.number=function(r){return function(t,e){if(t==null)return"";if(typeof t!="number")throw new Error(""+t+" is not a number");var i=r==null?t+"":t.toFixed(r);return f0(i,e)}};function _b(r,t){for(var e in r)e!="__printers"&&t(e,r[e])}La.prototype.columns=function(){for(var r={},t=0;t<2;t++)this.rows.forEach(function(e){var i=0;_b(e,function(o){i=Math.max(i,r[o]||0),r[o]=i,i++})});return Object.keys(r).sort(function(e,i){return r[e]-r[i]})};La.prototype.print=function(){var r=this.columns(),t=this.separator,e={},i="";return this.rows.forEach(function(o){_b(o,function(a,s){var n=o.__printers[a].call(o,s);e[a]=Math.max(u0(n),e[a]||0)})}),this.rows.forEach(function(o){var a="";r.forEach(function(s){var n=e[s],l=o.hasOwnProperty(s)?""+o.__printers[s].call(o,o[s],n):"";a+=lE(l,n)+t}),a=a.slice(0,-t.length),i+=a+`
`}),i};La.prototype.toString=function(){var r=this.columns(),t=new La;return t.separator=this.separator,r.forEach(function(e){t.cell(e,e)}),t.newRow(),t.pushDelimeter(r),t.rows=t.rows.concat(this.rows),this.totals&&this.rows.length&&(t.pushDelimeter(r),this.forEachTotal(t.cell.bind(t)),t.newRow()),t.print()};La.prototype.pushDelimeter=function(r){return r=r||this.columns(),r.forEach(function(t){this.cell(t,void 0,c0("-"))},this),this.newRow()};La.prototype.forEachTotal=function(r){for(var t in this.totals){var e=this.totals[t],i=e.init,o=this.rows.length;this.rows.forEach(function(a,s){i=e.reduce.call(a,i,a[t],s,o)}),r(t,i,e.printer)}};La.prototype.printTransposed=function(r){r=r||{};var t=new La;return t.separator=r.separator||this.separator,this.columns().forEach(function(e){t.cell(0,e,r.namePrinter),this.rows.forEach(function(i,o){t.cell(o+1,i[e],i.__printers[e])}),t.newRow()},this),t.print()};La.prototype.sort=function(r){if(typeof r=="function")return this.rows.sort(r),this;var t=Array.isArray(r)?r:this.columns(),e=t.map(function(i){var o="asc",a=/(.*)\|\s*(asc|des)\s*$/.exec(i);return a&&(i=a[1],o=a[2]),function(s,n){return o=="asc"?Tv(s[i],n[i]):Tv(n[i],s[i])}});return this.sort(function(i,o){for(var a=0;a<e.length;a++){var s=e[a](i,o);if(s!=0)return s}return 0})};function Tv(r,t){return r===t?0:r===void 0?1:t===void 0?-1:r===null?1:t===null?-1:r>t?1:r<t?-1:Tv(String(r),String(t))}La.prototype.total=function(r,t){return t=t||{},this.totals=this.totals||{},this.totals[r]={reduce:t.reduce||La.aggr.sum,printer:t.printer||f0,init:t.init==null?0:t.init},this};La.aggr={};La.aggr.printer=function(r,t){return t=t||wd,function(e,i){return f0(r+t(e),i)}};La.aggr.sum=function(r,t){return r+t};La.aggr.avg=function(r,t,e,i){return r=r+t,e+1==i?r/i:r};La.print=function(r,t,e){var i=t||{};t=typeof t=="function"?t:function(s,n){for(var l in s)if(!!s.hasOwnProperty(l)){var u=i[l]||{};n(u.name||l,s[l],u.printer)}};var o=new La,a=o.cell.bind(o);return Array.isArray(r)?(e=e||function(s){return s.toString()},r.forEach(function(s){t(s,a),o.newRow()})):(e=e||function(s){return s.printTransposed({separator:" : "})},t(r,a),o.newRow()),e(o)};La.log=function(r,t,e){console.log(La.print(r,t,e))};La.prototype.log=function(){console.log(this.toString())};var bb=60,xb=bb*60,wb=xb*24,uE=wb*7,_h=1e3,Hm=bb*_h,ly=xb*_h,cE=wb*_h,fE=uE*_h,h0="millisecond",rh="second",nh="minute",ih="hour",uf="day",cp="week",Cu="month",Tb="quarter",cf="year",ah="date",hE="YYYY-MM-DDTHH:mm:ssZ",uy="Invalid Date",dE=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,pE=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;const mE={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")};var Av=function(t,e,i){var o=String(t);return!o||o.length>=e?t:""+Array(e+1-o.length).join(i)+t},vE=function(t){var e=-t.utcOffset(),i=Math.abs(e),o=Math.floor(i/60),a=i%60;return(e<=0?"+":"-")+Av(o,2,"0")+":"+Av(a,2,"0")},gE=function r(t,e){if(t.date()<e.date())return-r(e,t);var i=(e.year()-t.year())*12+(e.month()-t.month()),o=t.clone().add(i,Cu),a=e-o<0,s=t.clone().add(i+(a?-1:1),Cu);return+(-(i+(e-o)/(a?o-s:s-o))||0)},yE=function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},_E=function(t){var e={M:Cu,y:cf,w:cp,d:uf,D:ah,h:ih,m:nh,s:rh,ms:h0,Q:Tb};return e[t]||String(t||"").toLowerCase().replace(/s$/,"")},bE=function(t){return t===void 0};const xE={s:Av,z:vE,m:gE,a:yE,p:_E,u:bE};var od="en",Lf={};Lf[od]=mE;var d0=function(t){return t instanceof Qp},kp=function r(t,e,i){var o;if(!t)return od;if(typeof t=="string"){var a=t.toLowerCase();Lf[a]&&(o=a),e&&(Lf[a]=e,o=a);var s=t.split("-");if(!o&&s.length>1)return r(s[0])}else{var n=t.name;Lf[n]=t,o=n}return!i&&o&&(od=o),o||!i&&od},Ga=function(t,e){if(d0(t))return t.clone();var i=typeof e=="object"?e:{};return i.date=t,i.args=arguments,new Qp(i)},wE=function(t,e){return Ga(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},Ua=xE;Ua.l=kp;Ua.i=d0;Ua.w=wE;var TE=function(t){var e=t.date,i=t.utc;if(e===null)return new Date(NaN);if(Ua.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var o=e.match(dE);if(o){var a=o[2]-1||0,s=(o[7]||"0").substring(0,3);return i?new Date(Date.UTC(o[1],a,o[3]||1,o[4]||0,o[5]||0,o[6]||0,s)):new Date(o[1],a,o[3]||1,o[4]||0,o[5]||0,o[6]||0,s)}}return new Date(e)},Qp=function(){function r(e){this.$L=kp(e.locale,null,!0),this.parse(e)}var t=r.prototype;return t.parse=function(i){this.$d=TE(i),this.$x=i.x||{},this.init()},t.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},t.$utils=function(){return Ua},t.isValid=function(){return this.$d.toString()!==uy},t.isSame=function(i,o){var a=Ga(i);return this.startOf(o)<=a&&a<=this.endOf(o)},t.isAfter=function(i,o){return Ga(i)<this.startOf(o)},t.isBefore=function(i,o){return this.endOf(o)<Ga(i)},t.$g=function(i,o,a){return Ua.u(i)?this[o]:this.set(a,i)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(i,o){var a=this,s=Ua.u(o)?!0:o,n=Ua.p(i),l=function(E,A){var P=Ua.w(a.$u?Date.UTC(a.$y,A,E):new Date(a.$y,A,E),a);return s?P:P.endOf(uf)},u=function(E,A){var P=[0,0,0,0],D=[23,59,59,999];return Ua.w(a.toDate()[E].apply(a.toDate("s"),(s?P:D).slice(A)),a)},h=this.$W,v=this.$M,d=this.$D,p="set"+(this.$u?"UTC":"");switch(n){case cf:return s?l(1,0):l(31,11);case Cu:return s?l(1,v):l(0,v+1);case cp:{var _=this.$locale().weekStart||0,b=(h<_?h+7:h)-_;return l(s?d-b:d+(6-b),v)}case uf:case ah:return u(p+"Hours",0);case ih:return u(p+"Minutes",1);case nh:return u(p+"Seconds",2);case rh:return u(p+"Milliseconds",3);default:return this.clone()}},t.endOf=function(i){return this.startOf(i,!1)},t.$set=function(i,o){var a,s=Ua.p(i),n="set"+(this.$u?"UTC":""),l=(a={},a[uf]=n+"Date",a[ah]=n+"Date",a[Cu]=n+"Month",a[cf]=n+"FullYear",a[ih]=n+"Hours",a[nh]=n+"Minutes",a[rh]=n+"Seconds",a[h0]=n+"Milliseconds",a)[s],u=s===uf?this.$D+(o-this.$W):o;if(s===Cu||s===cf){var h=this.clone().set(ah,1);h.$d[l](u),h.init(),this.$d=h.set(ah,Math.min(this.$D,h.daysInMonth())).$d}else l&&this.$d[l](u);return this.init(),this},t.set=function(i,o){return this.clone().$set(i,o)},t.get=function(i){return this[Ua.p(i)]()},t.add=function(i,o){var a=this,s;i=Number(i);var n=Ua.p(o),l=function(d){var p=Ga(a);return Ua.w(p.date(p.date()+Math.round(d*i)),a)};if(n===Cu)return this.set(Cu,this.$M+i);if(n===cf)return this.set(cf,this.$y+i);if(n===uf)return l(1);if(n===cp)return l(7);var u=(s={},s[nh]=Hm,s[ih]=ly,s[rh]=_h,s)[n]||1,h=this.$d.getTime()+i*u;return Ua.w(h,this)},t.subtract=function(i,o){return this.add(i*-1,o)},t.format=function(i){var o=this,a=this.$locale();if(!this.isValid())return a.invalidDate||uy;var s=i||hE,n=Ua.z(this),l=this.$H,u=this.$m,h=this.$M,v=a.weekdays,d=a.months,p=a.meridiem,_=function(P,D,R,S){return P&&(P[D]||P(o,s))||R[D].slice(0,S)},b=function(P){return Ua.s(l%12||12,P,"0")},x=p||function(A,P,D){var R=A<12?"AM":"PM";return D?R.toLowerCase():R},E={YY:String(this.$y).slice(-2),YYYY:this.$y,M:h+1,MM:Ua.s(h+1,2,"0"),MMM:_(a.monthsShort,h,d,3),MMMM:_(d,h),D:this.$D,DD:Ua.s(this.$D,2,"0"),d:String(this.$W),dd:_(a.weekdaysMin,this.$W,v,2),ddd:_(a.weekdaysShort,this.$W,v,3),dddd:v[this.$W],H:String(l),HH:Ua.s(l,2,"0"),h:b(1),hh:b(2),a:x(l,u,!0),A:x(l,u,!1),m:String(u),mm:Ua.s(u,2,"0"),s:String(this.$s),ss:Ua.s(this.$s,2,"0"),SSS:Ua.s(this.$ms,3,"0"),Z:n};return s.replace(pE,function(A,P){return P||E[A]||n.replace(":","")})},t.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},t.diff=function(i,o,a){var s,n=Ua.p(o),l=Ga(i),u=(l.utcOffset()-this.utcOffset())*Hm,h=this-l,v=Ua.m(this,l);return v=(s={},s[cf]=v/12,s[Cu]=v,s[Tb]=v/3,s[cp]=(h-u)/fE,s[uf]=(h-u)/cE,s[ih]=h/ly,s[nh]=h/Hm,s[rh]=h/_h,s)[n]||h,a?v:Ua.a(v)},t.daysInMonth=function(){return this.endOf(Cu).$D},t.$locale=function(){return Lf[this.$L]},t.locale=function(i,o){if(!i)return this.$L;var a=this.clone(),s=kp(i,o,!0);return s&&(a.$L=s),a},t.clone=function(){return Ua.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},r}(),Ab=Qp.prototype;Ga.prototype=Ab;[["$ms",h0],["$s",rh],["$m",nh],["$H",ih],["$W",uf],["$M",Cu],["$y",cf],["$D",ah]].forEach(function(r){Ab[r[1]]=function(t){return this.$g(t,r[0],r[1])}});Ga.extend=function(r,t){return r.$i||(r(t,Qp,Ga),r.$i=!0),Ga};Ga.locale=kp;Ga.isDayjs=d0;Ga.unix=function(r){return Ga(r*1e3)};Ga.en=Lf[od];Ga.Ls=Lf;Ga.p={};var Sb={},Sv={exports:{}},Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},AE=function(r,t){if(t===void 0||typeof t=="string"){if(typeof r<"u"&&typeof t=="string"){var e=/[.\[\]'"]/g,i=t.split(e).filter(function(o){return o!==""});r=i.reduce(function(o,a){return o&&o[a]!=="undefined"?o[a]:void 0},r)}return r}},Ip=function(r){if(Object.prototype.toString.call(r)==="[object Array]")r.forEach(function(t){return Ip(t)});else if(Object.prototype.toString.call(r)==="[object Object]")Object.keys(r).forEach(function(t){return Ip(r[t])});else return typeof r>"u"?"undefined":Ev(r);return r},Lp=function(r,t){var e=!1;if(Object.prototype.toString.call(r)==="[object Array]")if(t.length)for(var i=0;i<r.length;i+=1){if(!Lp(r[i],t[i])){e=!1;break}e=!0}else return!0;else if(Object.prototype.toString.call(r)==="[object Object]")for(var o in r){if(!Lp(r[o],t[o])){e=!1;break}e=!0}else return(typeof t>"u"?"undefined":Ev(t))===(typeof r>"u"?"undefined":Ev(r));return e},SE=function(r,t){var e=Ip(t);return Lp(r,e)?r:-1},EE={getNestedObject:AE,buildSchema:Ip,getSchemaMatch:Lp,convertSchemaAndGetMatch:SE};(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i=function(){function n(l,u){for(var h,v=0;v<u.length;v++)h=u[v],h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}return function(l,u,h){return u&&n(l.prototype,u),h&&n(l,h),l}}(),o=EE;function a(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function n(){var l=this;a(this,n),this.t=function(u,h){if(l.input=u,l.schemaCheck=null,h)if(typeof h=="string")l.input=(0,o.getNestedObject)(l.input,h);else{var v=(0,o.convertSchemaAndGetMatch)(l.input,h);v===-1?(l.schemaCheck=!1,l.input=u):(l.schemaCheck=!0,l.input=v)}return l}}return i(n,[{key:"isValid",get:function(){return this.schemaCheck!==null&&this.schemaCheck===!0&&this.input!==null&&this.input!==void 0}},{key:"isDefined",get:function(){return typeof this.input<"u"}},{key:"isUndefined",get:function(){return typeof this.input>"u"}},{key:"isNull",get:function(){return this.input===null&&e(this.input)==="object"}},{key:"isNullOrUndefined",get:function(){return!!(this.isNull||this.isUndefined)}},{key:"isBoolean",get:function(){return e(this.input)===e(!0)}},{key:"isTrue",get:function(){return this.input===!0}},{key:"isFalse",get:function(){return this.input===!1}},{key:"isTruthy",get:function(){return!!this.input}},{key:"isFalsy",get:function(){return!this.input}},{key:"isObject",get:function(){return e(this.input)==="object"&&this.input===Object(this.input)&&Object.prototype.toString.call(this.input)!=="[object Array]"&&Object.prototype.toString.call(this.input)!=="[object Date]"}},{key:"isEmptyObject",get:function(){return!!(this.isObject&&Object.keys(this.input).length===0)}},{key:"isString",get:function(){return typeof this.input=="string"}},{key:"isEmptyString",get:function(){return!!(this.isString&&this.input.length===0)}},{key:"isNumber",get:function(){return!!Number.isFinite(this.input)}},{key:"isArray",get:function(){return!!Array.isArray(this.input)}},{key:"isEmptyArray",get:function(){return!!(this.isArray&&this.input.length===0)}},{key:"isFunction",get:function(){return typeof this.input=="function"}},{key:"isDate",get:function(){return this.input instanceof Date||Object.prototype.toString.call(this.input)==="[object Date]"}},{key:"isSymbol",get:function(){return e(this.input)==="symbol"||e(this.input)==="object"&&Object.prototype.toString.call(this.input)==="[object Symbol]"}},{key:"safeObject",get:function(){return this.input}},{key:"safeObjectOrEmpty",get:function(){return this.input?this.input:{}}},{key:"safeString",get:function(){return this.isString?this.input:""}},{key:"safeNumber",get:function(){return this.isNumber?this.input:0}},{key:"safeBoolean",get:function(){return!!this.isBoolean&&this.input}},{key:"safeFunction",get:function(){return this.isFunction?this.input:function(){}}},{key:"safeArray",get:function(){return this.isArray?this.input:this.isNullOrUndefined?[]:[this.input]}}]),n}();s.Schema={Number:1,String:"typy",Boolean:!0,Null:null,Undefined:void 0,Array:[],Function:function(){},Date:new Date,Symbol:Symbol("")},t.default=s,r.exports=t.default})(Sv,Sv.exports);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.addCustomTypes=r.Schema=r.t=void 0;var t=Sv.exports,e=i(t);function i(n){return n&&n.__esModule?n:{default:n}}var o=function(n,l){return new e.default().t(n,l)},a=e.default.Schema,s=function(n){if(o(n).isObject)Object.keys(n).forEach(function(l){if(o(n[l]).isFunction)e.default.prototype.__defineGetter__(l,function(){return n[l](this.input)});else throw new Error("validator "+l+" is not a function")});else throw new Error("validators must be key value pairs")};r.default=o,r.t=o,r.Schema=a,r.addCustomTypes=s})(Sb);const Eh=m_(Sb);var CE=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,DE=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ME=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Vm={Space_Separator:CE,ID_Start:DE,ID_Continue:ME},Eo={isSpaceSeparator(r){return typeof r=="string"&&Vm.Space_Separator.test(r)},isIdStartChar(r){return typeof r=="string"&&(r>="a"&&r<="z"||r>="A"&&r<="Z"||r==="$"||r==="_"||Vm.ID_Start.test(r))},isIdContinueChar(r){return typeof r=="string"&&(r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9"||r==="$"||r==="_"||r==="\u200C"||r==="\u200D"||Vm.ID_Continue.test(r))},isDigit(r){return typeof r=="string"&&/[0-9]/.test(r)},isHexDigit(r){return typeof r=="string"&&/[0-9A-Fa-f]/.test(r)}};let Cv,el,Rc,Pp,gf,Iu,os,p0,sd;var kE=function(t,e){Cv=String(t),el="start",Rc=[],Pp=0,gf=1,Iu=0,os=void 0,p0=void 0,sd=void 0;do os=IE(),RE[el]();while(os.type!=="eof");return typeof e=="function"?Eb({"":sd},"",e):sd};function Eb(r,t,e){const i=r[t];if(i!=null&&typeof i=="object")for(const o in i){const a=Eb(i,o,e);a===void 0?delete i[o]:i[o]=a}return e.call(r,t,i)}let Yi,Pi,ad,Ic,ca;function IE(){for(Yi="default",Pi="",ad=!1,Ic=1;;){ca=Nc();const r=Cb[Yi]();if(r)return r}}function Nc(){if(Cv[Pp])return String.fromCodePoint(Cv.codePointAt(Pp))}function vn(){const r=Nc();return r===`
`?(gf++,Iu=0):r?Iu+=r.length:Iu++,r&&(Pp+=r.length),r}const Cb={default(){switch(ca){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":vn();return;case"/":vn(),Yi="comment";return;case void 0:return vn(),$a("eof")}if(Eo.isSpaceSeparator(ca)){vn();return}return Cb[el]()},comment(){switch(ca){case"*":vn(),Yi="multiLineComment";return;case"/":vn(),Yi="singleLineComment";return}throw Qa(vn())},multiLineComment(){switch(ca){case"*":vn(),Yi="multiLineCommentAsterisk";return;case void 0:throw Qa(vn())}vn()},multiLineCommentAsterisk(){switch(ca){case"*":vn();return;case"/":vn(),Yi="default";return;case void 0:throw Qa(vn())}vn(),Yi="multiLineComment"},singleLineComment(){switch(ca){case`
`:case"\r":case"\u2028":case"\u2029":vn(),Yi="default";return;case void 0:return vn(),$a("eof")}vn()},value(){switch(ca){case"{":case"[":return $a("punctuator",vn());case"n":return vn(),xf("ull"),$a("null",null);case"t":return vn(),xf("rue"),$a("boolean",!0);case"f":return vn(),xf("alse"),$a("boolean",!1);case"-":case"+":vn()==="-"&&(Ic=-1),Yi="sign";return;case".":Pi=vn(),Yi="decimalPointLeading";return;case"0":Pi=vn(),Yi="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Pi=vn(),Yi="decimalInteger";return;case"I":return vn(),xf("nfinity"),$a("numeric",1/0);case"N":return vn(),xf("aN"),$a("numeric",NaN);case'"':case"'":ad=vn()==='"',Pi="",Yi="string";return}throw Qa(vn())},identifierNameStartEscape(){if(ca!=="u")throw Qa(vn());vn();const r=Dv();switch(r){case"$":case"_":break;default:if(!Eo.isIdStartChar(r))throw cy();break}Pi+=r,Yi="identifierName"},identifierName(){switch(ca){case"$":case"_":case"\u200C":case"\u200D":Pi+=vn();return;case"\\":vn(),Yi="identifierNameEscape";return}if(Eo.isIdContinueChar(ca)){Pi+=vn();return}return $a("identifier",Pi)},identifierNameEscape(){if(ca!=="u")throw Qa(vn());vn();const r=Dv();switch(r){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Eo.isIdContinueChar(r))throw cy();break}Pi+=r,Yi="identifierName"},sign(){switch(ca){case".":Pi=vn(),Yi="decimalPointLeading";return;case"0":Pi=vn(),Yi="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Pi=vn(),Yi="decimalInteger";return;case"I":return vn(),xf("nfinity"),$a("numeric",Ic*(1/0));case"N":return vn(),xf("aN"),$a("numeric",NaN)}throw Qa(vn())},zero(){switch(ca){case".":Pi+=vn(),Yi="decimalPoint";return;case"e":case"E":Pi+=vn(),Yi="decimalExponent";return;case"x":case"X":Pi+=vn(),Yi="hexadecimal";return}return $a("numeric",Ic*0)},decimalInteger(){switch(ca){case".":Pi+=vn(),Yi="decimalPoint";return;case"e":case"E":Pi+=vn(),Yi="decimalExponent";return}if(Eo.isDigit(ca)){Pi+=vn();return}return $a("numeric",Ic*Number(Pi))},decimalPointLeading(){if(Eo.isDigit(ca)){Pi+=vn(),Yi="decimalFraction";return}throw Qa(vn())},decimalPoint(){switch(ca){case"e":case"E":Pi+=vn(),Yi="decimalExponent";return}if(Eo.isDigit(ca)){Pi+=vn(),Yi="decimalFraction";return}return $a("numeric",Ic*Number(Pi))},decimalFraction(){switch(ca){case"e":case"E":Pi+=vn(),Yi="decimalExponent";return}if(Eo.isDigit(ca)){Pi+=vn();return}return $a("numeric",Ic*Number(Pi))},decimalExponent(){switch(ca){case"+":case"-":Pi+=vn(),Yi="decimalExponentSign";return}if(Eo.isDigit(ca)){Pi+=vn(),Yi="decimalExponentInteger";return}throw Qa(vn())},decimalExponentSign(){if(Eo.isDigit(ca)){Pi+=vn(),Yi="decimalExponentInteger";return}throw Qa(vn())},decimalExponentInteger(){if(Eo.isDigit(ca)){Pi+=vn();return}return $a("numeric",Ic*Number(Pi))},hexadecimal(){if(Eo.isHexDigit(ca)){Pi+=vn(),Yi="hexadecimalInteger";return}throw Qa(vn())},hexadecimalInteger(){if(Eo.isHexDigit(ca)){Pi+=vn();return}return $a("numeric",Ic*Number(Pi))},string(){switch(ca){case"\\":vn(),Pi+=LE();return;case'"':if(ad)return vn(),$a("string",Pi);Pi+=vn();return;case"'":if(!ad)return vn(),$a("string",Pi);Pi+=vn();return;case`
`:case"\r":throw Qa(vn());case"\u2028":case"\u2029":FE(ca);break;case void 0:throw Qa(vn())}Pi+=vn()},start(){switch(ca){case"{":case"[":return $a("punctuator",vn())}Yi="value"},beforePropertyName(){switch(ca){case"$":case"_":Pi=vn(),Yi="identifierName";return;case"\\":vn(),Yi="identifierNameStartEscape";return;case"}":return $a("punctuator",vn());case'"':case"'":ad=vn()==='"',Yi="string";return}if(Eo.isIdStartChar(ca)){Pi+=vn(),Yi="identifierName";return}throw Qa(vn())},afterPropertyName(){if(ca===":")return $a("punctuator",vn());throw Qa(vn())},beforePropertyValue(){Yi="value"},afterPropertyValue(){switch(ca){case",":case"}":return $a("punctuator",vn())}throw Qa(vn())},beforeArrayValue(){if(ca==="]")return $a("punctuator",vn());Yi="value"},afterArrayValue(){switch(ca){case",":case"]":return $a("punctuator",vn())}throw Qa(vn())},end(){throw Qa(vn())}};function $a(r,t){return{type:r,value:t,line:gf,column:Iu}}function xf(r){for(const t of r){if(Nc()!==t)throw Qa(vn());vn()}}function LE(){switch(Nc()){case"b":return vn(),"\b";case"f":return vn(),"\f";case"n":return vn(),`
`;case"r":return vn(),"\r";case"t":return vn(),"	";case"v":return vn(),"\v";case"0":if(vn(),Eo.isDigit(Nc()))throw Qa(vn());return"\0";case"x":return vn(),PE();case"u":return vn(),Dv();case`
`:case"\u2028":case"\u2029":return vn(),"";case"\r":return vn(),Nc()===`
`&&vn(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Qa(vn());case void 0:throw Qa(vn())}return vn()}function PE(){let r="",t=Nc();if(!Eo.isHexDigit(t)||(r+=vn(),t=Nc(),!Eo.isHexDigit(t)))throw Qa(vn());return r+=vn(),String.fromCodePoint(parseInt(r,16))}function Dv(){let r="",t=4;for(;t-- >0;){const e=Nc();if(!Eo.isHexDigit(e))throw Qa(vn());r+=vn()}return String.fromCodePoint(parseInt(r,16))}const RE={start(){if(os.type==="eof")throw wf();Gm()},beforePropertyName(){switch(os.type){case"identifier":case"string":p0=os.value,el="afterPropertyName";return;case"punctuator":Yd();return;case"eof":throw wf()}},afterPropertyName(){if(os.type==="eof")throw wf();el="beforePropertyValue"},beforePropertyValue(){if(os.type==="eof")throw wf();Gm()},beforeArrayValue(){if(os.type==="eof")throw wf();if(os.type==="punctuator"&&os.value==="]"){Yd();return}Gm()},afterPropertyValue(){if(os.type==="eof")throw wf();switch(os.value){case",":el="beforePropertyName";return;case"}":Yd()}},afterArrayValue(){if(os.type==="eof")throw wf();switch(os.value){case",":el="beforeArrayValue";return;case"]":Yd()}},end(){}};function Gm(){let r;switch(os.type){case"punctuator":switch(os.value){case"{":r={};break;case"[":r=[];break}break;case"null":case"boolean":case"numeric":case"string":r=os.value;break}if(sd===void 0)sd=r;else{const t=Rc[Rc.length-1];Array.isArray(t)?t.push(r):t[p0]=r}if(r!==null&&typeof r=="object")Rc.push(r),Array.isArray(r)?el="beforeArrayValue":el="beforePropertyName";else{const t=Rc[Rc.length-1];t==null?el="end":Array.isArray(t)?el="afterArrayValue":el="afterPropertyValue"}}function Yd(){Rc.pop();const r=Rc[Rc.length-1];r==null?el="end":Array.isArray(r)?el="afterArrayValue":el="afterPropertyValue"}function Qa(r){return Rp(r===void 0?`JSON5: invalid end of input at ${gf}:${Iu}`:`JSON5: invalid character '${Db(r)}' at ${gf}:${Iu}`)}function wf(){return Rp(`JSON5: invalid end of input at ${gf}:${Iu}`)}function cy(){return Iu-=5,Rp(`JSON5: invalid identifier character at ${gf}:${Iu}`)}function FE(r){console.warn(`JSON5: '${Db(r)}' in strings is not valid ECMAScript; consider escaping`)}function Db(r){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[r])return t[r];if(r<" "){const e=r.charCodeAt(0).toString(16);return"\\x"+("00"+e).substring(e.length)}return r}function Rp(r){const t=new SyntaxError(r);return t.lineNumber=gf,t.columnNumber=Iu,t}var OE=function(t,e,i){const o=[];let a="",s,n,l="",u;if(e!=null&&typeof e=="object"&&!Array.isArray(e)&&(i=e.space,u=e.quote,e=e.replacer),typeof e=="function")n=e;else if(Array.isArray(e)){s=[];for(const b of e){let x;typeof b=="string"?x=b:(typeof b=="number"||b instanceof String||b instanceof Number)&&(x=String(b)),x!==void 0&&s.indexOf(x)<0&&s.push(x)}}return i instanceof Number?i=Number(i):i instanceof String&&(i=String(i)),typeof i=="number"?i>0&&(i=Math.min(10,Math.floor(i)),l="          ".substr(0,i)):typeof i=="string"&&(l=i.substr(0,10)),h("",{"":t});function h(b,x){let E=x[b];switch(E!=null&&(typeof E.toJSON5=="function"?E=E.toJSON5(b):typeof E.toJSON=="function"&&(E=E.toJSON(b))),n&&(E=n.call(x,b,E)),E instanceof Number?E=Number(E):E instanceof String?E=String(E):E instanceof Boolean&&(E=E.valueOf()),E){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof E=="string")return v(E);if(typeof E=="number")return String(E);if(typeof E=="object")return Array.isArray(E)?_(E):d(E)}function v(b){const x={"'":.1,'"':.2},E={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let A="";for(let D=0;D<b.length;D++){const R=b[D];switch(R){case"'":case'"':x[R]++,A+=R;continue;case"\0":if(Eo.isDigit(b[D+1])){A+="\\x00";continue}}if(E[R]){A+=E[R];continue}if(R<" "){let S=R.charCodeAt(0).toString(16);A+="\\x"+("00"+S).substring(S.length);continue}A+=R}const P=u||Object.keys(x).reduce((D,R)=>x[D]<x[R]?D:R);return A=A.replace(new RegExp(P,"g"),E[P]),P+A+P}function d(b){if(o.indexOf(b)>=0)throw TypeError("Converting circular structure to JSON5");o.push(b);let x=a;a=a+l;let E=s||Object.keys(b),A=[];for(const D of E){const R=h(D,b);if(R!==void 0){let S=p(D)+":";l!==""&&(S+=" "),S+=R,A.push(S)}}let P;if(A.length===0)P="{}";else{let D;if(l==="")D=A.join(","),P="{"+D+"}";else{let R=`,
`+a;D=A.join(R),P=`{
`+a+D+`,
`+x+"}"}}return o.pop(),a=x,P}function p(b){if(b.length===0)return v(b);const x=String.fromCodePoint(b.codePointAt(0));if(!Eo.isIdStartChar(x))return v(b);for(let E=x.length;E<b.length;E++)if(!Eo.isIdContinueChar(String.fromCodePoint(b.codePointAt(E))))return v(b);return b}function _(b){if(o.indexOf(b)>=0)throw TypeError("Converting circular structure to JSON5");o.push(b);let x=a;a=a+l;let E=[];for(let P=0;P<b.length;P++){const D=h(String(P),b);E.push(D!==void 0?D:"null")}let A;if(E.length===0)A="[]";else if(l===""){let P=E.join(",");A="["+P+"]"}else{let P=`,
`+a,D=E.join(P);A=`[
`+a+D+`,
`+x+"]"}return o.pop(),a=x,A}};const zE={parse:kE,stringify:OE};var BE=zE,Mb={exports:{}};/* @license
Papa Parse
v5.2.0
https://github.com/mholt/PapaParse
License: MIT
*/(function(r,t){(function(e,i){r.exports=i()})(tc,function e(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o=!i.document&&!!i.postMessage,a=o&&/blob:/i.test((i.location||{}).protocol),s={},n=0,l={parse:function(T,M){var z=(M=M||{}).dynamicTyping||!1;if(I(z)&&(M.dynamicTypingFunction=z,z={}),M.dynamicTyping=z,M.transform=!!I(M.transform)&&M.transform,M.worker&&l.WORKERS_SUPPORTED){var U=function(){if(!l.WORKERS_SUPPORTED)return!1;var V=(H=i.URL||i.webkitURL||null,Y=e.toString(),l.BLOB_URL||(l.BLOB_URL=H.createObjectURL(new Blob(["(",Y,")();"],{type:"text/javascript"})))),j=new i.Worker(V),H,Y;return j.onmessage=A,j.id=n++,s[j.id]=j}();return U.userStep=M.step,U.userChunk=M.chunk,U.userComplete=M.complete,U.userError=M.error,M.step=I(M.step),M.chunk=I(M.chunk),M.complete=I(M.complete),M.error=I(M.error),delete M.worker,void U.postMessage({input:T,config:M,workerId:U.id})}var F=null;return l.NODE_STREAM_INPUT,typeof T=="string"?F=M.download?new v(M):new p(M):T.readable===!0&&I(T.read)&&I(T.on)?F=new _(M):(i.File&&T instanceof File||T instanceof Object)&&(F=new d(M)),F.stream(T)},unparse:function(T,M){var z=!1,U=!0,F=",",V=`\r
`,j='"',H=j+j,Y=!1,J=null;(function(){if(typeof M=="object"){if(typeof M.delimiter!="string"||l.BAD_DELIMITERS.filter(function(X){return M.delimiter.indexOf(X)!==-1}).length||(F=M.delimiter),(typeof M.quotes=="boolean"||typeof M.quotes=="function"||Array.isArray(M.quotes))&&(z=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(Y=M.skipEmptyLines),typeof M.newline=="string"&&(V=M.newline),typeof M.quoteChar=="string"&&(j=M.quoteChar),typeof M.header=="boolean"&&(U=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");J=M.columns}M.escapeChar!==void 0&&(H=M.escapeChar+j)}})();var ne=new RegExp(x(j),"g");if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return we(null,T,Y);if(typeof T[0]=="object")return we(J||q(T[0]),T,Y)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:q(T.data[0])),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),we(T.fields||[],T.data||[],Y);throw new Error("Unable to serialize unrecognized input");function q(X){if(typeof X!="object")return[];var re=[];for(var de in X)re.push(de);return re}function we(X,re,de){var me="";typeof X=="string"&&(X=JSON.parse(X)),typeof re=="string"&&(re=JSON.parse(re));var xe=Array.isArray(X)&&0<X.length,He=!Array.isArray(re[0]);if(xe&&U){for(var Re=0;Re<X.length;Re++)0<Re&&(me+=F),me+=ee(X[Re],Re);0<re.length&&(me+=V)}for(var Ee=0;Ee<re.length;Ee++){var ke=xe?X.length:re[Ee].length,$=!1,le=xe?Object.keys(re[Ee]).length===0:re[Ee].length===0;if(de&&!xe&&($=de==="greedy"?re[Ee].join("").trim()==="":re[Ee].length===1&&re[Ee][0].length===0),de==="greedy"&&xe){for(var K=[],te=0;te<ke;te++){var ie=He?X[te]:te;K.push(re[Ee][ie])}$=K.join("").trim()===""}if(!$){for(var ce=0;ce<ke;ce++){0<ce&&!le&&(me+=F);var ae=xe&&He?X[ce]:ce;me+=ee(re[Ee][ae],ce)}Ee<re.length-1&&(!de||0<ke&&!le)&&(me+=V)}}return me}function ee(X,re){if(X==null)return"";if(X.constructor===Date)return JSON.stringify(X).slice(1,25);var de=X.toString().replace(ne,H),me=typeof z=="boolean"&&z||typeof z=="function"&&z(X,re)||Array.isArray(z)&&z[re]||function(xe,He){for(var Re=0;Re<He.length;Re++)if(-1<xe.indexOf(He[Re]))return!0;return!1}(de,l.BAD_DELIMITERS)||-1<de.indexOf(F)||de.charAt(0)===" "||de.charAt(de.length-1)===" ";return me?j+de+j:de}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!o&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=E,l.ParserHandle=b,l.NetworkStreamer=v,l.FileStreamer=d,l.StringStreamer=p,l.ReadableStreamStreamer=_,i.jQuery){var u=i.jQuery;u.fn.parse=function(T){var M=T.config||{},z=[];return this.each(function(V){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)z.push({file:this.files[j],inputElem:this,instanceConfig:u.extend({},M)})}),U(),this;function U(){if(z.length!==0){var V,j,H,Y,J=z[0];if(I(T.before)){var ne=T.before(J.file,J.inputElem);if(typeof ne=="object"){if(ne.action==="abort")return V="AbortError",j=J.file,H=J.inputElem,Y=ne.reason,void(I(T.error)&&T.error({name:V},j,H,Y));if(ne.action==="skip")return void F();typeof ne.config=="object"&&(J.instanceConfig=u.extend(J.instanceConfig,ne.config))}else if(ne==="skip")return void F()}var q=J.instanceConfig.complete;J.instanceConfig.complete=function(we){I(q)&&q(we,J.file,J.inputElem),F()},l.parse(J.file,J.instanceConfig)}else I(T.complete)&&T.complete()}function F(){z.splice(0,1),U()}}}function h(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(M){var z=R(M);z.chunkSize=parseInt(z.chunkSize),M.step||M.chunk||(z.chunkSize=null),this._handle=new b(z),(this._handle.streamer=this)._config=z}.call(this,T),this.parseChunk=function(M,z){if(this.isFirstChunk&&I(this._config.beforeFirstChunk)){var U=this._config.beforeFirstChunk(M);U!==void 0&&(M=U)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+M;this._partialLine="";var V=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var j=V.meta.cursor;this._finished||(this._partialLine=F.substring(j-this._baseIndex),this._baseIndex=j),V&&V.data&&(this._rowCount+=V.data.length);var H=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)i.postMessage({results:V,workerId:l.WORKER_ID,finished:H});else if(I(this._config.chunk)&&!z){if(this._config.chunk(V,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);V=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(V.data),this._completeResults.errors=this._completeResults.errors.concat(V.errors),this._completeResults.meta=V.meta),this._completed||!H||!I(this._config.complete)||V&&V.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||V&&V.meta.paused||this._nextChunk(),V}this._halted=!0},this._sendError=function(M){I(this._config.error)?this._config.error(M):a&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:M,finished:!1})}}function v(T){var M;(T=T||{}).chunkSize||(T.chunkSize=l.RemoteChunkSize),h.call(this,T),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),o||(M.onload=S(this._chunkLoaded,this),M.onerror=S(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var z=this._config.downloadRequestHeaders;for(var U in z)M.setRequestHeader(U,z[U])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;M.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{M.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}o&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:M.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(z){var U=z.getResponseHeader("Content-Range");return U===null?-1:parseInt(U.substring(U.lastIndexOf("/")+1))}(M),this.parseChunk(M.responseText)))},this._chunkError=function(z){var U=M.statusText||z;this._sendError(new Error(U))}}function d(T){var M,z;(T=T||{}).chunkSize||(T.chunkSize=l.LocalChunkSize),h.call(this,T);var U=typeof FileReader<"u";this.stream=function(F){this._input=F,z=F.slice||F.webkitSlice||F.mozSlice,U?((M=new FileReader).onload=S(this._chunkLoaded,this),M.onerror=S(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var V=Math.min(this._start+this._config.chunkSize,this._input.size);F=z.call(F,this._start,V)}var j=M.readAsText(F,this._config.encoding);U||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(M.error)}}function p(T){var M;h.call(this,T=T||{}),this.stream=function(z){return M=z,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var z,U=this._config.chunkSize;return U?(z=M.substring(0,U),M=M.substring(U)):(z=M,M=""),this._finished=!M,this.parseChunk(z)}}}function _(T){h.call(this,T=T||{});var M=[],z=!0,U=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){U&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):z=!0},this._streamData=S(function(F){try{M.push(typeof F=="string"?F:F.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(V){this._streamError(V)}},this),this._streamError=S(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=S(function(){this._streamCleanUp(),U=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function b(T){var M,z,U,F=Math.pow(2,53),V=-F,j=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,H=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,Y=this,J=0,ne=0,q=!1,we=!1,ee=[],X={data:[],errors:[],meta:{}};if(I(T.step)){var re=T.step;T.step=function(Ee){if(X=Ee,xe())me();else{if(me(),X.data.length===0)return;J+=Ee.data.length,T.preview&&J>T.preview?z.abort():(X.data=X.data[0],re(X,Y))}}}function de(Ee){return T.skipEmptyLines==="greedy"?Ee.join("").trim()==="":Ee.length===1&&Ee[0].length===0}function me(){if(X&&U&&(Re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),U=!1),T.skipEmptyLines)for(var Ee=0;Ee<X.data.length;Ee++)de(X.data[Ee])&&X.data.splice(Ee--,1);return xe()&&function(){if(!X)return;function ke(le){I(T.transformHeader)&&(le=T.transformHeader(le)),ee.push(le)}if(Array.isArray(X.data[0])){for(var $=0;xe()&&$<X.data.length;$++)X.data[$].forEach(ke);X.data.splice(0,1)}else X.data.forEach(ke)}(),function(){if(!X||!T.header&&!T.dynamicTyping&&!T.transform)return X;function ke(le,K){var te,ie=T.header?{}:[];for(te=0;te<le.length;te++){var ce=te,ae=le[te];T.header&&(ce=te>=ee.length?"__parsed_extra":ee[te]),T.transform&&(ae=T.transform(ae,ce)),ae=He(ce,ae),ce==="__parsed_extra"?(ie[ce]=ie[ce]||[],ie[ce].push(ae)):ie[ce]=ae}return T.header&&(te>ee.length?Re("FieldMismatch","TooManyFields","Too many fields: expected "+ee.length+" fields but parsed "+te,ne+K):te<ee.length&&Re("FieldMismatch","TooFewFields","Too few fields: expected "+ee.length+" fields but parsed "+te,ne+K)),ie}var $=1;return!X.data.length||Array.isArray(X.data[0])?(X.data=X.data.map(ke),$=X.data.length):X.data=ke(X.data,0),T.header&&X.meta&&(X.meta.fields=ee),ne+=$,X}()}function xe(){return T.header&&ee.length===0}function He(Ee,ke){return $=Ee,T.dynamicTypingFunction&&T.dynamicTyping[$]===void 0&&(T.dynamicTyping[$]=T.dynamicTypingFunction($)),(T.dynamicTyping[$]||T.dynamicTyping)===!0?ke==="true"||ke==="TRUE"||ke!=="false"&&ke!=="FALSE"&&(function(le){if(j.test(le)){var K=parseFloat(le);if(V<K&&K<F)return!0}return!1}(ke)?parseFloat(ke):H.test(ke)?new Date(ke):ke===""?null:ke):ke;var $}function Re(Ee,ke,$,le){var K={type:Ee,code:ke,message:$};le!==void 0&&(K.row=le),X.errors.push(K)}this.parse=function(Ee,ke,$){var le=T.quoteChar||'"';if(T.newline||(T.newline=function(ie,ce){ie=ie.substring(0,1048576);var ae=new RegExp(x(ce)+"([^]*?)"+x(ce),"gm"),ve=(ie=ie.replace(ae,"")).split("\r"),pe=ie.split(`
`),he=1<pe.length&&pe[0].length<ve[0].length;if(ve.length===1||he)return`
`;for(var ye=0,_e=0;_e<ve.length;_e++)ve[_e][0]===`
`&&ye++;return ye>=ve.length/2?`\r
`:"\r"}(Ee,le)),U=!1,T.delimiter)I(T.delimiter)&&(T.delimiter=T.delimiter(Ee),X.meta.delimiter=T.delimiter);else{var K=function(ie,ce,ae,ve,pe){var he,ye,_e,je;pe=pe||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Je=0;Je<pe.length;Je++){var nt=pe[Je],at=0,Fe=0,Ie=0;_e=void 0;for(var Ke=new E({comments:ve,delimiter:nt,newline:ce,preview:10}).parse(ie),Qe=0;Qe<Ke.data.length;Qe++)if(ae&&de(Ke.data[Qe]))Ie++;else{var it=Ke.data[Qe].length;Fe+=it,_e!==void 0?0<it&&(at+=Math.abs(it-_e),_e=it):_e=it}0<Ke.data.length&&(Fe/=Ke.data.length-Ie),(ye===void 0||at<=ye)&&(je===void 0||je<Fe)&&1.99<Fe&&(ye=at,he=nt,je=Fe)}return{successful:!!(T.delimiter=he),bestDelimiter:he}}(Ee,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess);K.successful?T.delimiter=K.bestDelimiter:(U=!0,T.delimiter=l.DefaultDelimiter),X.meta.delimiter=T.delimiter}var te=R(T);return T.preview&&T.header&&te.preview++,M=Ee,z=new E(te),X=z.parse(M,ke,$),me(),q?{meta:{paused:!0}}:X||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,z.abort(),M=I(T.chunk)?"":M.substring(z.getCharIndex())},this.resume=function(){Y.streamer._halted?(q=!1,Y.streamer.parseChunk(M,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return we},this.abort=function(){we=!0,z.abort(),X.meta.aborted=!0,I(T.complete)&&T.complete(X),M=""}}function x(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(T){var M,z=(T=T||{}).delimiter,U=T.newline,F=T.comments,V=T.step,j=T.preview,H=T.fastMode,Y=M=T.quoteChar===void 0?'"':T.quoteChar;if(T.escapeChar!==void 0&&(Y=T.escapeChar),(typeof z!="string"||-1<l.BAD_DELIMITERS.indexOf(z))&&(z=","),F===z)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<l.BAD_DELIMITERS.indexOf(F))&&(F=!1),U!==`
`&&U!=="\r"&&U!==`\r
`&&(U=`
`);var J=0,ne=!1;this.parse=function(q,we,ee){if(typeof q!="string")throw new Error("Input must be a string");var X=q.length,re=z.length,de=U.length,me=F.length,xe=I(V),He=[],Re=[],Ee=[],ke=J=0;if(!q)return Je();if(H||H!==!1&&q.indexOf(M)===-1){for(var $=q.split(U),le=0;le<$.length;le++){if(Ee=$[le],J+=Ee.length,le!==$.length-1)J+=U.length;else if(ee)return Je();if(!F||Ee.substring(0,me)!==F){if(xe){if(He=[],he(Ee.split(z)),nt(),ne)return Je()}else he(Ee.split(z));if(j&&j<=le)return He=He.slice(0,j),Je(!0)}}return Je()}for(var K=q.indexOf(z,J),te=q.indexOf(U,J),ie=new RegExp(x(Y)+x(M),"g"),ce=q.indexOf(M,J);;)if(q[J]!==M)if(F&&Ee.length===0&&q.substring(J,J+me)===F){if(te===-1)return Je();J=te+de,te=q.indexOf(U,J),K=q.indexOf(z,J)}else{if(K!==-1&&(K<te||te===-1)){if(!(K<ce)){Ee.push(q.substring(J,K)),J=K+re,K=q.indexOf(z,J);continue}var ae=at(K,ce,te);if(ae&&ae.nextDelim!==void 0){K=ae.nextDelim,ce=ae.quoteSearch,Ee.push(q.substring(J,K)),J=K+re,K=q.indexOf(z,J);continue}}if(te===-1)break;if(Ee.push(q.substring(J,te)),je(te+de),xe&&(nt(),ne))return Je();if(j&&He.length>=j)return Je(!0)}else for(ce=J,J++;;){if((ce=q.indexOf(M,ce+1))===-1)return ee||Re.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:He.length,index:J}),_e();if(ce===X-1)return _e(q.substring(J,ce).replace(ie,M));if(M!==Y||q[ce+1]!==Y){if(M===Y||ce===0||q[ce-1]!==Y){K!==-1&&K<ce+1&&(K=q.indexOf(z,ce+1)),te!==-1&&te<ce+1&&(te=q.indexOf(U,ce+1));var ve=ye(te===-1?K:Math.min(K,te));if(q[ce+1+ve]===z){Ee.push(q.substring(J,ce).replace(ie,M)),q[J=ce+1+ve+re]!==M&&(ce=q.indexOf(M,J)),K=q.indexOf(z,J),te=q.indexOf(U,J);break}var pe=ye(te);if(q.substring(ce+1+pe,ce+1+pe+de)===U){if(Ee.push(q.substring(J,ce).replace(ie,M)),je(ce+1+pe+de),K=q.indexOf(z,J),ce=q.indexOf(M,J),xe&&(nt(),ne))return Je();if(j&&He.length>=j)return Je(!0);break}Re.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:He.length,index:J}),ce++}}else ce++}return _e();function he(Fe){He.push(Fe),ke=J}function ye(Fe){var Ie=0;if(Fe!==-1){var Ke=q.substring(ce+1,Fe);Ke&&Ke.trim()===""&&(Ie=Ke.length)}return Ie}function _e(Fe){return ee||(Fe===void 0&&(Fe=q.substring(J)),Ee.push(Fe),J=X,he(Ee),xe&&nt()),Je()}function je(Fe){J=Fe,he(Ee),Ee=[],te=q.indexOf(U,J)}function Je(Fe){return{data:He,errors:Re,meta:{delimiter:z,linebreak:U,aborted:ne,truncated:!!Fe,cursor:ke+(we||0)}}}function nt(){V(Je()),He=[],Re=[]}function at(Fe,Ie,Ke){var Qe={nextDelim:void 0,quoteSearch:void 0},it=q.indexOf(M,Ie+1);if(Ie<Fe&&Fe<it&&(it<Ke||Ke===-1)){var Ne=q.indexOf(z,it);if(Ne===-1)return Qe;it<Ne&&(it=q.indexOf(M,it+1)),Qe=at(Ne,it,Ke)}else Qe={nextDelim:Fe,quoteSearch:Ie};return Qe}},this.abort=function(){ne=!0},this.getCharIndex=function(){return J}}function A(T){var M=T.data,z=s[M.workerId],U=!1;if(M.error)z.userError(M.error,M.file);else if(M.results&&M.results.data){var F={abort:function(){U=!0,P(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:D,resume:D};if(I(z.userStep)){for(var V=0;V<M.results.data.length&&(z.userStep({data:M.results.data[V],errors:M.results.errors,meta:M.results.meta},F),!U);V++);delete M.results}else I(z.userChunk)&&(z.userChunk(M.results,F,M.file),delete M.results)}M.finished&&!U&&P(M.workerId,M.results)}function P(T,M){var z=s[T];I(z.userComplete)&&z.userComplete(M),z.terminate(),delete s[T]}function D(){throw new Error("Not implemented.")}function R(T){if(typeof T!="object"||T===null)return T;var M=Array.isArray(T)?[]:{};for(var z in T)M[z]=R(T[z]);return M}function S(T,M){return function(){T.apply(M,arguments)}}function I(T){return typeof T=="function"}return a&&(i.onmessage=function(T){var M=T.data;if(l.WORKER_ID===void 0&&M&&(l.WORKER_ID=M.workerId),typeof M.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(M.input,M.config),finished:!0});else if(i.File&&M.input instanceof File||M.input instanceof Object){var z=l.parse(M.input,M.config);z&&i.postMessage({workerId:l.WORKER_ID,results:z,finished:!0})}}),(v.prototype=Object.create(h.prototype)).constructor=v,(d.prototype=Object.create(h.prototype)).constructor=d,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(h.prototype)).constructor=_,l})})(Mb);const NE=Mb.exports;var UE=function(t){return t.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,i,o){return i||o.slice(1)})},HE={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},VE=function(t,e){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(i,o,a){var s=a&&a.toUpperCase();return o||e[a]||HE[a]||UE(e[s])})},GE=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,ZE=/\d/,Xd=/\d\d/,WE=/\d{3}/,jE=/\d{4}/,ec=/\d\d?/,YE=/[+-]?\d+/,XE=/[+-]\d\d:?(\d\d)?|Z/,Yh=/\d*[^-_:/,()\s\d]+/,pf={},kb=function(t){return t=+t,t+(t>68?1900:2e3)};function KE(r){if(!r||r==="Z")return 0;var t=r.match(/([+-]|\d\d)/g),e=+(t[1]*60)+(+t[2]||0);return e===0?0:t[0]==="+"?-e:e}var pl=function(t){return function(e){this[t]=+e}},fy=[XE,function(r){var t=this.zone||(this.zone={});t.offset=KE(r)}],Zm=function(t){var e=pf[t];return e&&(e.indexOf?e:e.s.concat(e.f))},hy=function(t,e){var i,o=pf,a=o.meridiem;if(!a)i=t===(e?"pm":"PM");else for(var s=1;s<=24;s+=1)if(t.indexOf(a(s,0,e))>-1){i=s>12;break}return i},JE={A:[Yh,function(r){this.afternoon=hy(r,!1)}],a:[Yh,function(r){this.afternoon=hy(r,!0)}],S:[ZE,function(r){this.milliseconds=+r*100}],SS:[Xd,function(r){this.milliseconds=+r*10}],SSS:[WE,function(r){this.milliseconds=+r}],s:[ec,pl("seconds")],ss:[ec,pl("seconds")],m:[ec,pl("minutes")],mm:[ec,pl("minutes")],H:[ec,pl("hours")],h:[ec,pl("hours")],HH:[ec,pl("hours")],hh:[ec,pl("hours")],D:[ec,pl("day")],DD:[Xd,pl("day")],Do:[Yh,function(r){var t=pf,e=t.ordinal,i=r.match(/\d+/);if(this.day=i[0],!!e)for(var o=1;o<=31;o+=1)e(o).replace(/\[|\]/g,"")===r&&(this.day=o)}],M:[ec,pl("month")],MM:[Xd,pl("month")],MMM:[Yh,function(r){var t=Zm("months"),e=Zm("monthsShort"),i=(e||t.map(function(o){return o.slice(0,3)})).indexOf(r)+1;if(i<1)throw new Error;this.month=i%12||i}],MMMM:[Yh,function(r){var t=Zm("months"),e=t.indexOf(r)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[YE,pl("year")],YY:[Xd,function(r){this.year=kb(r)}],YYYY:[jE,pl("year")],Z:fy,ZZ:fy};function $E(r){var t=r.afternoon;if(t!==void 0){var e=r.hours;t?e<12&&(r.hours+=12):e===12&&(r.hours=0),delete r.afternoon}}function QE(r){r=VE(r,pf&&pf.formats);for(var t=r.match(GE),e=t.length,i=0;i<e;i+=1){var o=t[i],a=JE[o],s=a&&a[0],n=a&&a[1];n?t[i]={regex:s,parser:n}:t[i]=o.replace(/^\[|\]$/g,"")}return function(l){for(var u={},h=0,v=0;h<e;h+=1){var d=t[h];if(typeof d=="string")v+=d.length;else{var p=d.regex,_=d.parser,b=l.slice(v),x=p.exec(b),E=x[0];_.call(u,E),l=l.replace(E,"")}}return $E(u),u}}var qE=function(t,e,i){try{if(["x","X"].indexOf(e)>-1)return new Date((e==="X"?1e3:1)*t);var o=QE(e),a=o(t),s=a.year,n=a.month,l=a.day,u=a.hours,h=a.minutes,v=a.seconds,d=a.milliseconds,p=a.zone,_=new Date,b=l||(!s&&!n?_.getDate():1),x=s||_.getFullYear(),E=0;s&&!n||(E=n>0?n-1:_.getMonth());var A=u||0,P=h||0,D=v||0,R=d||0;return p?new Date(Date.UTC(x,E,b,A,P,D,R+p.offset*60*1e3)):i?new Date(Date.UTC(x,E,b,A,P,D,R)):new Date(x,E,b,A,P,D,R)}catch{return new Date("")}};const Ib=function(r,t,e){e.p.customParseFormat=!0,r&&r.parseTwoDigitYear&&(kb=r.parseTwoDigitYear);var i=t.prototype,o=i.parse;i.parse=function(a){var s=a.date,n=a.utc,l=a.args;this.$u=n;var u=l[1];if(typeof u=="string"){var h=l[2]===!0,v=l[3]===!0,d=h||v,p=l[2];v&&(p=l[2]),pf=this.$locale(),!h&&p&&(pf=e.Ls[p]),this.$d=qE(s,u,n),this.init(),p&&p!==!0&&(this.$L=this.locale(p).$L),d&&s!=this.format(u)&&(this.$d=new Date("")),pf={}}else if(u instanceof Array)for(var _=u.length,b=1;b<=_;b+=1){l[1]=u[b-1];var x=e.apply(this,l);if(x.isValid()){this.$d=x.$d,this.$L=x.$L,this.init();break}b===_&&(this.$d=new Date(""))}else o.call(this,a)}};var Lb={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(r){(function(t,e){r.exports?r.exports=e():t.numeral=e()})(tc,function(){var t,e,i="2.0.6",o={},a={},s={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},n={currentLocale:s.currentLocale,zeroFormat:s.zeroFormat,nullFormat:s.nullFormat,defaultFormat:s.defaultFormat,scalePercentBy100:s.scalePercentBy100};function l(u,h){this._input=u,this._value=h}return t=function(u){var h,v,d,p;if(t.isNumeral(u))h=u.value();else if(u===0||typeof u>"u")h=0;else if(u===null||e.isNaN(u))h=null;else if(typeof u=="string")if(n.zeroFormat&&u===n.zeroFormat)h=0;else if(n.nullFormat&&u===n.nullFormat||!u.replace(/[^0-9]+/g,"").length)h=null;else{for(v in o)if(p=typeof o[v].regexps.unformat=="function"?o[v].regexps.unformat():o[v].regexps.unformat,p&&u.match(p)){d=o[v].unformat;break}d=d||t._.stringToNumber,h=d(u)}else h=Number(u)||null;return new l(u,h)},t.version=i,t.isNumeral=function(u){return u instanceof l},t._=e={numberToFormat:function(u,h,v){var d=a[t.options.currentLocale],p=!1,_=!1,b=0,x="",E=1e12,A=1e9,P=1e6,D=1e3,R="",S=!1,I,T,M,z,U,F,V;if(u=u||0,T=Math.abs(u),t._.includes(h,"(")?(p=!0,h=h.replace(/[\(|\)]/g,"")):(t._.includes(h,"+")||t._.includes(h,"-"))&&(U=t._.includes(h,"+")?h.indexOf("+"):u<0?h.indexOf("-"):-1,h=h.replace(/[\+|\-]/g,"")),t._.includes(h,"a")&&(I=h.match(/a(k|m|b|t)?/),I=I?I[1]:!1,t._.includes(h," a")&&(x=" "),h=h.replace(new RegExp(x+"a[kmbt]?"),""),T>=E&&!I||I==="t"?(x+=d.abbreviations.trillion,u=u/E):T<E&&T>=A&&!I||I==="b"?(x+=d.abbreviations.billion,u=u/A):T<A&&T>=P&&!I||I==="m"?(x+=d.abbreviations.million,u=u/P):(T<P&&T>=D&&!I||I==="k")&&(x+=d.abbreviations.thousand,u=u/D)),t._.includes(h,"[.]")&&(_=!0,h=h.replace("[.]",".")),M=u.toString().split(".")[0],z=h.split(".")[1],F=h.indexOf(","),b=(h.split(".")[0].split(",")[0].match(/0/g)||[]).length,z?(t._.includes(z,"[")?(z=z.replace("]",""),z=z.split("["),R=t._.toFixed(u,z[0].length+z[1].length,v,z[1].length)):R=t._.toFixed(u,z.length,v),M=R.split(".")[0],t._.includes(R,".")?R=d.delimiters.decimal+R.split(".")[1]:R="",_&&Number(R.slice(1))===0&&(R="")):M=t._.toFixed(u,0,v),x&&!I&&Number(M)>=1e3&&x!==d.abbreviations.trillion)switch(M=String(Number(M)/1e3),x){case d.abbreviations.thousand:x=d.abbreviations.million;break;case d.abbreviations.million:x=d.abbreviations.billion;break;case d.abbreviations.billion:x=d.abbreviations.trillion;break}if(t._.includes(M,"-")&&(M=M.slice(1),S=!0),M.length<b)for(var j=b-M.length;j>0;j--)M="0"+M;return F>-1&&(M=M.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d.delimiters.thousands)),h.indexOf(".")===0&&(M=""),V=M+R+(x||""),p?V=(p&&S?"(":"")+V+(p&&S?")":""):U>=0?V=U===0?(S?"-":"+")+V:V+(S?"-":"+"):S&&(V="-"+V),V},stringToNumber:function(u){var h=a[n.currentLocale],v=u,d={thousand:3,million:6,billion:9,trillion:12},p,_,b;if(n.zeroFormat&&u===n.zeroFormat)_=0;else if(n.nullFormat&&u===n.nullFormat||!u.replace(/[^0-9]+/g,"").length)_=null;else{_=1,h.delimiters.decimal!=="."&&(u=u.replace(/\./g,"").replace(h.delimiters.decimal,"."));for(p in d)if(b=new RegExp("[^a-zA-Z]"+h.abbreviations[p]+"(?:\\)|(\\"+h.currency.symbol+")?(?:\\))?)?$"),v.match(b)){_*=Math.pow(10,d[p]);break}_*=(u.split("-").length+Math.min(u.split("(").length-1,u.split(")").length-1))%2?1:-1,u=u.replace(/[^0-9\.]+/g,""),_*=Number(u)}return _},isNaN:function(u){return typeof u=="number"&&isNaN(u)},includes:function(u,h){return u.indexOf(h)!==-1},insert:function(u,h,v){return u.slice(0,v)+h+u.slice(v)},reduce:function(u,h){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof h!="function")throw new TypeError(h+" is not a function");var v=Object(u),d=v.length>>>0,p=0,_;if(arguments.length===3)_=arguments[2];else{for(;p<d&&!(p in v);)p++;if(p>=d)throw new TypeError("Reduce of empty array with no initial value");_=v[p++]}for(;p<d;p++)p in v&&(_=h(_,v[p],p,v));return _},multiplier:function(u){var h=u.toString().split(".");return h.length<2?1:Math.pow(10,h[1].length)},correctionFactor:function(){var u=Array.prototype.slice.call(arguments);return u.reduce(function(h,v){var d=e.multiplier(v);return h>d?h:d},1)},toFixed:function(u,h,v,d){var p=u.toString().split("."),_=h-(d||0),b,x,E,A;return p.length===2?b=Math.min(Math.max(p[1].length,_),h):b=_,E=Math.pow(10,b),A=(v(u+"e+"+b)/E).toFixed(b),d>h-b&&(x=new RegExp("\\.?0{1,"+(d-(h-b))+"}$"),A=A.replace(x,"")),A}},t.options=n,t.formats=o,t.locales=a,t.locale=function(u){return u&&(n.currentLocale=u.toLowerCase()),n.currentLocale},t.localeData=function(u){if(!u)return a[n.currentLocale];if(u=u.toLowerCase(),!a[u])throw new Error("Unknown locale : "+u);return a[u]},t.reset=function(){for(var u in s)n[u]=s[u]},t.zeroFormat=function(u){n.zeroFormat=typeof u=="string"?u:null},t.nullFormat=function(u){n.nullFormat=typeof u=="string"?u:null},t.defaultFormat=function(u){n.defaultFormat=typeof u=="string"?u:"0.0"},t.register=function(u,h,v){if(h=h.toLowerCase(),this[u+"s"][h])throw new TypeError(h+" "+u+" already registered.");return this[u+"s"][h]=v,v},t.validate=function(u,h){var v,d,p,_,b,x,E,A;if(typeof u!="string"&&(u+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",u)),u=u.trim(),u.match(/^\d+$/))return!0;if(u==="")return!1;try{E=t.localeData(h)}catch{E=t.localeData(t.locale())}return p=E.currency.symbol,b=E.abbreviations,v=E.delimiters.decimal,E.delimiters.thousands==="."?d="\\.":d=E.delimiters.thousands,A=u.match(/^[^\d]+/),A!==null&&(u=u.substr(1),A[0]!==p)||(A=u.match(/[^\d]+$/),A!==null&&(u=u.slice(0,-1),A[0]!==b.thousand&&A[0]!==b.million&&A[0]!==b.billion&&A[0]!==b.trillion))?!1:(x=new RegExp(d+"{2}"),u.match(/[^\d.,]/g)?!1:(_=u.split(v),_.length>2?!1:_.length<2?!!_[0].match(/^\d+.*\d$/)&&!_[0].match(x):_[0].length===1?!!_[0].match(/^\d+$/)&&!_[0].match(x)&&!!_[1].match(/^\d+$/):!!_[0].match(/^\d+.*\d$/)&&!_[0].match(x)&&!!_[1].match(/^\d+$/)))},t.fn=l.prototype={clone:function(){return t(this)},format:function(u,h){var v=this._value,d=u||n.defaultFormat,p,_,b;if(h=h||Math.round,v===0&&n.zeroFormat!==null)_=n.zeroFormat;else if(v===null&&n.nullFormat!==null)_=n.nullFormat;else{for(p in o)if(d.match(o[p].regexps.format)){b=o[p].format;break}b=b||t._.numberToFormat,_=b(v,d,h)}return _},value:function(){return this._value},input:function(){return this._input},set:function(u){return this._value=Number(u),this},add:function(u){var h=e.correctionFactor.call(null,this._value,u);function v(d,p,_,b){return d+Math.round(h*p)}return this._value=e.reduce([this._value,u],v,0)/h,this},subtract:function(u){var h=e.correctionFactor.call(null,this._value,u);function v(d,p,_,b){return d-Math.round(h*p)}return this._value=e.reduce([u],v,Math.round(this._value*h))/h,this},multiply:function(u){function h(v,d,p,_){var b=e.correctionFactor(v,d);return Math.round(v*b)*Math.round(d*b)/Math.round(b*b)}return this._value=e.reduce([this._value,u],h,1),this},divide:function(u){function h(v,d,p,_){var b=e.correctionFactor(v,d);return Math.round(v*b)/Math.round(d*b)}return this._value=e.reduce([this._value,u],h),this},difference:function(u){return Math.abs(t(this._value).subtract(u).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(u){var h=u%10;return~~(u%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th"},currency:{symbol:"$"}}),function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(u,h,v){var d=t._.includes(h," BPS")?" ":"",p;return u=u*1e4,h=h.replace(/\s?BPS/,""),p=t._.numberToFormat(u,h,v),t._.includes(p,")")?(p=p.split(""),p.splice(-1,0,d+"BPS"),p=p.join("")):p=p+d+"BPS",p},unformat:function(u){return+(t._.stringToNumber(u)*1e-4).toFixed(15)}})}(),function(){var u={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},h={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},v=u.suffixes.concat(h.suffixes.filter(function(p){return u.suffixes.indexOf(p)<0})),d=v.join("|");d="("+d.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(d)},format:function(p,_,b){var x,E=t._.includes(_,"ib")?h:u,A=t._.includes(_," b")||t._.includes(_," ib")?" ":"",P,D,R;for(_=_.replace(/\s?i?b/,""),P=0;P<=E.suffixes.length;P++)if(D=Math.pow(E.base,P),R=Math.pow(E.base,P+1),p===null||p===0||p>=D&&p<R){A+=E.suffixes[P],D>0&&(p=p/D);break}return x=t._.numberToFormat(p,_,b),x+A},unformat:function(p){var _=t._.stringToNumber(p),b,x;if(_){for(b=u.suffixes.length-1;b>=0;b--){if(t._.includes(p,u.suffixes[b])){x=Math.pow(u.base,b);break}if(t._.includes(p,h.suffixes[b])){x=Math.pow(h.base,b);break}}_*=x||1}return _}})}(),function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(u,h,v){var d=t.locales[t.options.currentLocale],p={before:h.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:h.match(/([\+|\-|\)|\s|\$]*)$/)[0]},_,b,x;for(h=h.replace(/\s?\$\s?/,""),_=t._.numberToFormat(u,h,v),u>=0?(p.before=p.before.replace(/[\-\(]/,""),p.after=p.after.replace(/[\-\)]/,"")):u<0&&!t._.includes(p.before,"-")&&!t._.includes(p.before,"(")&&(p.before="-"+p.before),x=0;x<p.before.length;x++)switch(b=p.before[x],b){case"$":_=t._.insert(_,d.currency.symbol,x);break;case" ":_=t._.insert(_," ",x+d.currency.symbol.length-1);break}for(x=p.after.length-1;x>=0;x--)switch(b=p.after[x],b){case"$":_=x===p.after.length-1?_+d.currency.symbol:t._.insert(_,d.currency.symbol,-(p.after.length-(1+x)));break;case" ":_=x===p.after.length-1?_+" ":t._.insert(_," ",-(p.after.length-(1+x)+d.currency.symbol.length-1));break}return _}})}(),function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(u,h,v){var d,p=typeof u=="number"&&!t._.isNaN(u)?u.toExponential():"0e+0",_=p.split("e");return h=h.replace(/e[\+|\-]{1}0/,""),d=t._.numberToFormat(Number(_[0]),h,v),d+"e"+_[1]},unformat:function(u){var h=t._.includes(u,"e+")?u.split("e+"):u.split("e-"),v=Number(h[0]),d=Number(h[1]);d=t._.includes(u,"e-")?d*=-1:d;function p(_,b,x,E){var A=t._.correctionFactor(_,b),P=_*A*(b*A)/(A*A);return P}return t._.reduce([v,Math.pow(10,d)],p,1)}})}(),function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(u,h,v){var d=t.locales[t.options.currentLocale],p,_=t._.includes(h," o")?" ":"";return h=h.replace(/\s?o/,""),_+=d.ordinal(u),p=t._.numberToFormat(u,h,v),p+_}})}(),function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(u,h,v){var d=t._.includes(h," %")?" ":"",p;return t.options.scalePercentBy100&&(u=u*100),h=h.replace(/\s?\%/,""),p=t._.numberToFormat(u,h,v),t._.includes(p,")")?(p=p.split(""),p.splice(-1,0,d+"%"),p=p.join("")):p=p+d+"%",p},unformat:function(u){var h=t._.stringToNumber(u);return t.options.scalePercentBy100?h*.01:h}})}(),function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(u,h,v){var d=Math.floor(u/60/60),p=Math.floor((u-d*60*60)/60),_=Math.round(u-d*60*60-p*60);return d+":"+(p<10?"0"+p:p)+":"+(_<10?"0"+_:_)},unformat:function(u){var h=u.split(":"),v=0;return h.length===3?(v=v+Number(h[0])*60*60,v=v+Number(h[1])*60,v=v+Number(h[2])):h.length===2&&(v=v+Number(h[0])*60,v=v+Number(h[1])),Number(v)}})}(),t})})(Lb);const eC=Lb.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Mv=function(r,t){return Mv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])},Mv(r,t)};function m0(r,t){Mv(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function fn(r){var t=typeof Symbol=="function"&&r[Symbol.iterator],e=0;return t?t.call(r):{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}}}function fp(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){s={error:n}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return a}function Pb(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(fp(arguments[t]));return r}var tC=function(){function r(){}return r.prototype.next=function(){return{done:!0,value:null}},r}(),Rb=function(){function r(){}return r.prototype[Symbol.iterator]=function(){return new tC},r}(),rC=function(){function r(){this.index=0}return r.prototype.next=function(){return{done:!1,value:this.index++}},r}(),kv=function(){function r(){}return r.prototype[Symbol.iterator]=function(){return new rC},r}(),nC=function(){function r(t){this.iterators=t}return r.prototype.next=function(){if(this.iterators.length===0)return{done:!0,value:[]};var t=[];try{for(var e=fn(this.iterators),i=e.next();!i.done;i=e.next()){var o=i.value,a=o.next();if(a.done)return{done:!0,value:[]};t.push(a.value)}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}return{done:!1,value:t};var s,n},r}(),ld=function(){function r(t){this.iterables=t}return r.prototype[Symbol.iterator]=function(){var t=[];try{for(var e=fn(this.iterables),i=e.next();!i.done;i=e.next()){var o=i.value;t.push(o[Symbol.iterator]())}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return new nC(t);var a,s},r}(),iC=function(){function r(t,e){this.index=0,this.iterator=t,this.selector=e}return r.prototype.next=function(){var t=this.iterator.next();return t.done?{done:!0}:{done:!1,value:this.selector(t.value,this.index++)}},r}(),xs=function(){function r(t,e){this.iterable=t,this.selector=e}return r.prototype[Symbol.iterator]=function(){var t=this.iterable[Symbol.iterator]();return new iC(t,this.selector)},r}(),aC=function(){function r(t,e){this.index=0,this.iterator=t,this.selector=e,this.outputIterator=null}return r.prototype.next=function(){for(;;){if(this.outputIterator===null){var t=this.iterator.next();if(t.done)return{done:!0};var e=this.selector(t.value,this.index++);this.outputIterator=e[Symbol.iterator]()}var i=this.outputIterator.next();if(i.done){this.outputIterator=null;continue}else return i}},r}(),Fb=function(){function r(t,e){this.iterable=t,this.selector=e}return r.prototype[Symbol.iterator]=function(){var t=this.iterable[Symbol.iterator]();return new aC(t,this.selector)},r}(),oC=function(){function r(t,e){this.childIterator=t,this.numElements=e}return r.prototype.next=function(){return this.numElements<=0?{done:!0}:(--this.numElements,this.childIterator.next())},r}(),uh=function(){function r(t,e){this.childIterable=t,this.numElements=e}return r.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new oC(t,this.numElements)},r}(),sC=function(){function r(t,e){this.done=!1,this.childIterator=t,this.predicate=e}return r.prototype.next=function(){if(!this.done){var t=this.childIterator.next();if(t.done)this.done=!0;else{if(this.predicate(t.value))return t;this.done=!0}}return{done:!0}},r}(),au=function(){function r(t,e){this.childIterable=t,this.predicate=e}return r.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new sC(t,this.predicate)},r}(),lC=function(){function r(t,e){this.childIterator=t,this.predicate=e}return r.prototype.next=function(){for(;;){var t=this.childIterator.next();if(t.done||this.predicate(t.value))return t}},r}(),ch=function(){function r(t,e){this.childIterable=t,this.predicate=e}return r.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new lC(t,this.predicate)},r}(),uC=function(){function r(t){this.curIterator=null,this.iterables=t,this.iterator=t[Symbol.iterator](),this.moveToNextIterable()}return r.prototype.moveToNextIterable=function(){var t=this.iterator.next();t.done?this.curIterator=null:this.curIterator=t.value[Symbol.iterator]()},r.prototype.next=function(){for(;;){if(this.curIterator==null)return{done:!0};var t=this.curIterator.next();if(!t.done)return t;this.moveToNextIterable()}},r}(),Fp=function(){function r(t){this.iterables=t}return r.prototype[Symbol.iterator]=function(){return new uC(this.iterables)},r}(),cC=function(){function r(t,e,i){this.iterable=t,this.period=e,this.whichIndex=i}return r.prototype.next=function(){this.iterator||(this.iterator=this.iterable[Symbol.iterator]());for(var t=[],e=0;e<this.period;++e){var i=this.iterator.next();if(i.done)break;t.push(i.value)}if(t.length===0)return{done:!0};var o=new qa({pairs:t});return{value:[this.whichIndex===bh.Start?o.getIndex().first():o.getIndex().last(),o],done:!1}},r}(),fC=function(){function r(t,e,i){this.iterable=t,this.period=e,this.whichIndex=i}return r.prototype[Symbol.iterator]=function(){return new cC(this.iterable,this.period,this.whichIndex)},r}(),Op=function(){function r(t){this.index=0,this.arr=t}return r.prototype.next=function(){return this.index<this.arr.length?{done:!1,value:this.arr[this.index++]}:{done:!0}},r}(),fh=function(){function r(t){this.iterable=t}return r.prototype[Symbol.iterator]=function(){var t=[];try{for(var e=fn(this.iterable),i=e.next();!i.done;i=e.next()){var o=i.value;t.push(o)}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t.reverse(),new Op(t);var a,s},r}(),hC=function(){function r(t,e){this.iterators=t.map(function(i){return i[Symbol.iterator]()}),this.zipper=e}return r.prototype.next=function(){var t=this.iterators.map(function(u){return u.next()});try{for(var e=fn(t),i=e.next();!i.done;i=e.next()){var o=i.value;if(o.done)return{done:!0}}}catch(u){n={error:u}}finally{try{i&&!i.done&&(l=e.return)&&l.call(e)}finally{if(n)throw n.error}}var a=t.map(function(u){return u.value}),s=new qa(a);return{done:!1,value:this.zipper(s)};var n,l},r}(),Ob=function(){function r(t,e){this.iterables=t,this.zipper=e}return r.prototype[Symbol.iterator]=function(){return new hC(this.iterables,this.zipper)},r}(),dC=function(){function r(t,e){this.valuesAlreadySeen=new Set,this.iterator=t[Symbol.iterator](),this.selector=e}return r.prototype.next=function(){for(;;){var t=this.iterator.next();if(t.done)return{done:!0};var e=void 0;if(this.selector?e=this.selector(t.value):e=t.value,!this.valuesAlreadySeen.has(e))return this.valuesAlreadySeen.add(e),{done:!1,value:t.value}}},r}(),zp=function(){function r(t,e){this.iterable=t,this.selector=e}return r.prototype[Symbol.iterator]=function(){return new dC(this.iterable,this.selector)},r}(),pC=function(){function r(t,e,i){this.iterable=t,this.period=e,this.whichIndex=i}return r.prototype.next=function(){if(this.curWindow){this.curWindow.shift();var e=this.iterator.next();if(e.done)return{done:!0};this.curWindow.push(e.value)}else{this.curWindow=[],this.iterator=this.iterable[Symbol.iterator]();for(var t=0;t<this.period;++t){var e=this.iterator.next();if(e.done)return{done:!0};this.curWindow.push(e.value)}}var i=new qa({pairs:this.curWindow});return{value:[this.whichIndex===bh.Start?i.getIndex().first():i.getIndex().last(),i],done:!1}},r}(),mC=function(){function r(t,e,i){this.iterable=t,this.period=e,this.whichIndex=i}return r.prototype[Symbol.iterator]=function(){return new pC(this.iterable,this.period,this.whichIndex)},r}(),vC=function(){function r(t,e){this.iterator=t[Symbol.iterator](),this.nextValue=this.iterator.next(),this.comparer=e}return r.prototype.next=function(){if(this.nextValue.done)return{done:!0};for(var t=[this.nextValue.value],e=this.nextValue.value;this.nextValue=this.iterator.next(),!this.nextValue.done;){if(!this.comparer(e[1],this.nextValue.value[1])){e=this.nextValue.value;break}t.push(this.nextValue.value),e=this.nextValue.value}var i=new qa({pairs:t});return{value:i,done:!1}},r}(),gC=function(){function r(t,e){this.iterable=t,this.comparer=e}return r.prototype[Symbol.iterator]=function(){return new vC(this.iterable,this.comparer)},r}(),Lu;(function(r){r[r.Ascending=0]="Ascending",r[r.Descending=1]="Descending"})(Lu||(Lu={}));var yC=function(){function r(t,e){this.values=t,this.sortSpec=e,this.keys=[]}return r.prototype.genKeys=function(){if(!(this.keys.length>0)){var t=0;try{for(var e=fn(this.values),i=e.next();!i.done;i=e.next()){var o=i.value;this.keys.push(this.sortSpec.selector(o,t))}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}var a,s}},r.prototype.compare=function(t,e){this.genKeys();var i=this.keys[t],o=this.keys[e],a=-1;return i===o?a=0:i>o&&(a=1),this.sortSpec.direction===Lu.Descending?-a:a},r}(),Bp=function(){function r(t,e){this.iterable=t,this.sortSpec=e}return r.prototype[Symbol.iterator]=function(){var t=[],e=[],i=0;try{for(var o=fn(this.iterable),a=o.next();!a.done;a=o.next()){var s=a.value;t.push(i),e.push(s),++i}}catch(R){b={error:R}}finally{try{a&&!a.done&&(x=o.return)&&x.call(o)}finally{if(b)throw b.error}}var n=[];try{for(var l=fn(this.sortSpec),u=l.next();!u.done;u=l.next()){var h=u.value;n.push(new yC(e,h))}}catch(R){E={error:R}}finally{try{u&&!u.done&&(A=l.return)&&A.call(l)}finally{if(E)throw E.error}}n[0].genKeys(),t.sort(function(R,S){try{for(var I=fn(n),T=I.next();!T.done;T=I.next()){var M=T.value,z=M.compare(R,S);if(z!==0)return z}}catch(V){U={error:V}}finally{try{T&&!T.done&&(F=I.return)&&F.call(I)}finally{if(U)throw U.error}}return 0;var U,F});var v=[];try{for(var d=fn(t),p=d.next();!p.done;p=d.next()){var _=p.value;v.push(e[_])}}catch(R){P={error:R}}finally{try{p&&!p.done&&(D=d.return)&&D.call(d)}finally{if(P)throw P.error}}return new Op(v);var b,x,E,A,P,D},r}(),_C=function(){function r(t,e){this.iterator=t,this.extractIndex=e}return r.prototype.next=function(){var t=this.iterator.next();return t.done?t:{done:!1,value:t.value[this.extractIndex]}},r}(),Np=function(){function r(t,e){this.arrayIterable=t,this.extractIndex=e}return r.prototype[Symbol.iterator]=function(){var t=this.arrayIterable[Symbol.iterator]();return new _C(t,this.extractIndex)},r}(),bC=function(){function r(t,e){this.iterator=t,this.numValues=e}return r.prototype.next=function(){for(;--this.numValues>=0;){var t=this.iterator.next();if(t.done)return t}return this.iterator.next()},r}(),hh=function(){function r(t,e){this.iterable=t,this.numValues=e}return r.prototype[Symbol.iterator]=function(){var t=this.iterable[Symbol.iterator]();return new bC(t,this.numValues)},r}(),xC=function(){function r(t,e){this.doneSkipping=!1,this.childIterator=t,this.predicate=e}return r.prototype.next=function(){for(;;){var t=this.childIterator.next();if(t.done)return t;if(!(!this.doneSkipping&&this.predicate(t.value)))return this.doneSkipping=!0,t}},r}(),ou=function(){function r(t,e){this.childIterable=t,this.predicate=e}return r.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new xC(t,this.predicate)},r}(),wC=function(){function r(t,e,i){this.columnNames=t,this.iterable=e,this.period=i}return r.prototype.next=function(){this.iterator||(this.iterator=this.iterable[Symbol.iterator]());for(var t=[],e=0;e<this.period;++e){var i=this.iterator.next();if(i.done)break;t.push(i.value)}if(t.length===0)return{done:!0};var o=new vl({columnNames:this.columnNames,pairs:t});return{value:o,done:!1}},r}(),TC=function(){function r(t,e,i){this.columnNames=t,this.iterable=e,this.period=i}return r.prototype[Symbol.iterator]=function(){return new wC(this.columnNames,this.iterable,this.period)},r}(),AC=function(){function r(t,e){this.index=0,this.columnNames=Array.from(t),this.rowsIterator=e[Symbol.iterator]()}return r.prototype.next=function(){var t=this.rowsIterator.next();if(t.done)return{done:!0};for(var e=t.value,i={},o=0;o<this.columnNames.length;++o){var a=this.columnNames[o];i[a]=e[o]}return{done:!1,value:i}},r}(),dy=function(){function r(t,e){this.columnNames=t,this.rows=e}return r.prototype[Symbol.iterator]=function(){return new AC(this.columnNames,this.rows)},r}(),SC=function(){function r(t,e,i){this.columnNames=t,this.iterable=e,this.period=i}return r.prototype.next=function(){if(this.curWindow){this.curWindow.shift();var e=this.iterator.next();if(e.done)return{done:!0};this.curWindow.push(e.value)}else{this.curWindow=[],this.iterator=this.iterable[Symbol.iterator]();for(var t=0;t<this.period;++t){var e=this.iterator.next();if(e.done)return{done:!0};this.curWindow.push(e.value)}}var i=new vl({columnNames:this.columnNames,pairs:this.curWindow});return{value:i,done:!1}},r}(),EC=function(){function r(t,e,i){this.columnNames=t,this.iterable=e,this.period=i}return r.prototype[Symbol.iterator]=function(){return new SC(this.columnNames,this.iterable,this.period)},r}(),CC=function(){function r(t,e,i){this.columnNames=t,this.iterator=e[Symbol.iterator](),this.nextValue=this.iterator.next(),this.comparer=i}return r.prototype.next=function(){if(this.nextValue.done)return{done:!0};for(var t=[this.nextValue.value],e=this.nextValue.value;this.nextValue=this.iterator.next(),!this.nextValue.done;){if(!this.comparer(e[1],this.nextValue.value[1])){e=this.nextValue.value;break}t.push(this.nextValue.value),e=this.nextValue.value}var i=new vl({columnNames:this.columnNames,pairs:t});return{value:i,done:!1}},r}(),DC=function(){function r(t,e,i){this.columnNames=t,this.iterable=e,this.comparer=i}return r.prototype[Symbol.iterator]=function(){return new CC(this.columnNames,this.iterable,this.comparer)},r}(),MC=function(){function r(t,e){this.repetition=0,this.iterator=t[Symbol.iterator](),this.count=e,this.result=this.iterator.next()}return r.prototype.next=function(){return this.count==0?{done:!0}:(this.repetition==this.count&&(this.result=this.iterator.next(),this.repetition=0),this.repetition+=1,this.result.done?{done:!0}:{done:!1,value:this.result.value})},r}(),kC=function(){function r(t,e){this.iterable=t,this.count=e}return r.prototype[Symbol.iterator]=function(){return new MC(this.iterable,this.count)},r}(),IC=function(){function r(t,e){this.count=0,this.repetition=0,this.firstIteration=!0,this.iterable=t,this.iterator=t[Symbol.iterator](),this.count=e}return r.prototype.next=function(){var t=this.iterator.next();return this.firstIteration&&t.done?{done:!0}:(this.firstIteration=!1,t.done&&(this.repetition+=1,this.iterator=this.iterable[Symbol.iterator](),t=this.iterator.next()),this.repetition<this.count?{done:!1,value:t.value}:{done:!0})},r}(),LC=function(){function r(t,e){this.iterable=t,this.count=e}return r.prototype[Symbol.iterator]=function(){return new IC(this.iterable,this.count)},r}(),PC=function(){function r(t){this.iteratorIndex=0,this.iterators=t.map(function(e){return e[Symbol.iterator]()})}return r.prototype.next=function(){if(this.iterators.length>0){for(var t=this.iterators[this.iteratorIndex].next();t.done;)if(this.iteratorIndex+=1,this.iteratorIndex<this.iterators.length)t=this.iterators[this.iteratorIndex].next();else return{done:!0};return{done:!1,value:t.value}}return{done:!0}},r}(),RC=function(){function r(t){this.iterables=t}return r.prototype[Symbol.iterator]=function(){return new PC(this.iterables)},r}(),FC=function(){function r(t,e){this.columnNamesIterator=null,this.values=t,this.considerAllRows=e}return r.prototype.next=function(){if(this.columnNamesIterator===null)if(this.considerAllRows){var t={};try{for(var e=fn(this.values),i=e.next();!i.done;i=e.next()){var o=i.value;try{for(var a=fn(Object.keys(o)),s=a.next();!s.done;s=a.next()){var n=s.value;t[n]=!0}}catch(_){d={error:_}}finally{try{s&&!s.done&&(p=a.return)&&p.call(a)}finally{if(d)throw d.error}}}}catch(_){h={error:_}}finally{try{i&&!i.done&&(v=e.return)&&v.call(e)}finally{if(h)throw h.error}}this.columnNamesIterator=new Op(Object.keys(t))}else{var l=this.values[Symbol.iterator](),u=l.next();if(u.done)return{done:!0,value:""};this.columnNamesIterator=new Op(Object.keys(u.value))}return this.columnNamesIterator.next();var h,v,d,p},r}(),py=function(){function r(t,e){this.values=t,this.considerAllRows=e}return r.prototype[Symbol.iterator]=function(){return new FC(this.values,this.considerAllRows)},r}();function Wm(r,t){var e={},i=[];try{for(var o=fn(r),a=o.next();!a.done;a=o.next()){var s=a.value,n=t&&t(s)||s;e[n]||(e[n]=!0,i.push(s))}}catch(h){l={error:h}}finally{try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(l)throw l.error}}return i;var l,u}function Cf(r,t,e){var i={};try{for(var o=fn(r),a=o.next();!a.done;a=o.next()){var s=a.value,n=t(s);i[n]=e(s)}}catch(h){l={error:h}}finally{try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(l)throw l.error}}return i;var l,u}function OC(r,t,e){var i=new Map;try{for(var o=fn(r),a=o.next();!a.done;a=o.next()){var s=a.value;i.set(t(s),e(s))}}catch(u){n={error:u}}finally{try{a&&!a.done&&(l=o.return)&&l.call(o)}finally{if(n)throw n.error}}return i;var n,l}function zb(r){return r===void 0?"undefined":oo(r)?"number":xa(r)?"string":r instanceof Date?"date":zC(r)?"boolean":"unsupported"}function Xo(r){return Eh(r).isObject&&!Iv(r)}function yn(r){return Eh(r).isFunction}function xa(r){return Eh(r).isString}function Iv(r){return Object.prototype.toString.call(r)==="[object Date]"}function zC(r){return Eh(r).isBoolean}function oo(r){return Eh(r).isNumber}function Ha(r){return Eh(r).isArray}function jm(r){return r===void 0}var BC=function(){function r(t){this.iterable=t,this.index=0}return r.prototype.next=function(){return this.iterable._next(this.index++)},r}(),iu=function(){function r(t){this.iterator=t,this.cached=[]}return r.prototype[Symbol.iterator]=function(){return new BC(this)},r.prototype._next=function(t){if(t>=this.cached.length){var e=this.iterator.next();if(e.done)return{done:!0};this.cached.push(e.value)}return{done:!1,value:this.cached[t]}},r}(),vl=function(){function r(t){if(this.configFn=null,this.content=null,this.indexedContent=null,t){var e=t;if(e.getTypeCode!==void 0){var i=e.getTypeCode();if(i==="dataframe"||i==="series"){e.content!==void 0?this.content=e.content:this.configFn=e.configFn;return}}yn(t)?this.configFn=t:r.isIterator(t)?this.content=r.initFromIterator(t):r.isIterable(t)?this.content=r.initFromIterable(t):this.content=r.initFromConfig(t)}else this.content=r.initEmpty()}return r.initFromIterator=function(t){return r.initFromIterable(new iu(t))},r.initFromIterable=function(t){var e=t[Symbol.iterator]().next(),i=e.done?[]:Object.keys(e.value);return{index:r.defaultCountIterable,values:t,pairs:new ld([r.defaultCountIterable,t]),isBaked:!0,columnNames:i,isCaseSensitive:!1}},r.initEmpty=function(){return{index:r.defaultEmptyIterable,values:r.defaultEmptyIterable,pairs:r.defaultEmptyIterable,isBaked:!0,columnNames:[],isCaseSensitive:!1}},r.initColumnNames=function(t,e){var i=[],o={},a=Array.from(t).map(function(A){return A.toString()});try{for(var s=fn(a),n=s.next();!n.done;n=s.next()){var l=n.value,u=e!==void 0&&e?l:l.toLowerCase();o[u]===void 0?o[u]=1:o[u]+=1}}catch(A){_={error:A}}finally{try{n&&!n.done&&(b=s.return)&&b.call(s)}finally{if(_)throw _.error}}var h={};try{for(var v=fn(a),d=v.next();!d.done;d=v.next()){var l=d.value,u=e!==void 0&&e?l:l.toLowerCase();if(o[u]>1){var p=1;h[u]!==void 0&&(p=h[u]),i.push(l+"."+p),h[u]=p+1}else i.push(l)}}catch(A){x={error:A}}finally{try{d&&!d.done&&(E=v.return)&&E.call(v)}finally{if(x)throw x.error}}return i;var _,b,x,E},r.isIterator=function(t){return Xo(t)&&yn(t.next)},r.isIterable=function(t){return Ha(t)||Xo(t)&&yn(t[Symbol.iterator])},r.checkIterable=function(t,e){if(!r.isIterable(t))throw new Error("Expected '"+e+"' field of DataFrame config object to be an array of values or an iterable of values.")},r.initFromConfig=function(t){var e,i,o,a=!1,s;if(t.pairs&&(r.isIterator(t.pairs)?o=new iu(t.pairs):(r.checkIterable(t.pairs,"pairs"),o=t.pairs)),t.columns){var n=t.columns;if(r.isIterator(n)&&(n=new iu(n)),r.isIterable(n)){var l=n;s=Array.from(l).map(function(E){return E.name}),n=Cf(l,function(E){return E.name},function(E){return E.series})}else{if(!Xo(n))throw new Error("Expected 'columns' member of 'config' parameter to DataFrame constructor to be an object with fields that define columns.");s=Object.keys(n)}var u=[];try{for(var h=fn(s),v=h.next();!v.done;v=h.next()){var d=v.value,p=n[d];r.isIterator(p)?p=new iu(p):r.checkIterable(p,d),u.push(p)}}catch(E){b={error:E}}finally{try{v&&!v.done&&(x=h.return)&&x.call(h)}finally{if(b)throw b.error}}i=new dy(s,new ld(u))}else if(t.columnNames&&(r.isIterator(t.columnNames)?s=new iu(t.columnNames):s=t.columnNames,s=this.initColumnNames(s,t.caseSensitive)),t.rows){t.columnNames||(s=new xs(new kv,function(E){return"Column."+E.toString()}));var _=void 0;r.isIterator(t.rows)?_=new iu(t.rows):(r.checkIterable(t.rows,"rows"),_=t.rows),i=new dy(s,_)}else t.values?(r.isIterator(t.values)?i=new iu(t.values):(r.checkIterable(t.values,"values"),i=t.values),t.columnNames||(s=new py(i,t.considerAllRows||!1))):o?(i=new Np(o,1),t.columnNames||(s=new py(i,t.considerAllRows||!1))):(i=r.defaultEmptyIterable,t.columnNames||(s=r.defaultEmptyIterable));return t.index?r.isIterator(t.index)?e=new iu(t.index):(r.checkIterable(t.index,"index"),e=t.index):o?e=new Np(o,0):e=r.defaultCountIterable,o||(o=new ld([e,i])),t.baked!==void 0&&(a=t.baked),{index:e,values:i,pairs:o,isBaked:a,columnNames:s,isCaseSensitive:t.caseSensitive||!1};var b,x},r.prototype.lazyInit=function(){this.content===null&&this.configFn!==null&&(this.content=r.initFromConfig(this.configFn()))},r.prototype.getContent=function(){return this.lazyInit(),this.content},r.prototype.getRowByIndex=function(t){if(!this.indexedContent){this.indexedContent=new Map;try{for(var e=fn(this.getContent().pairs),i=e.next();!i.done;i=e.next()){var o=i.value;this.indexedContent.set(o[0],o[1])}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}}return this.indexedContent.get(t);var a,s},r.prototype[Symbol.iterator]=function(){return this.getContent().values[Symbol.iterator]()},r.prototype.getColumnNames=function(){return Array.from(this.getContent().columnNames)},r.prototype.getColumns=function(){var t=this;return new qa(function(){var e=t.getColumnNames();return{values:e.map(function(i){var o=t.getSeries(i).skipWhile(function(s){return s==null}),a=o.any()?o.first():void 0;return{name:i,type:zb(a),series:o}})}})},r.prototype.isCaseSensitive=function(){return this.getContent().isCaseSensitive},r.prototype.cast=function(){return this},r.prototype.getIndex=function(){var t=this;return new Bb(function(){return{values:t.getContent().index}})},r.prototype.setIndex=function(t){if(!xa(t))throw new Error("Expected 'columnName' parameter to 'DataFrame.setIndex' to be a string that specifies the name of the column to set as the index for the dataframe.");return this.withIndex(this.getSeries(t))},r.prototype.withIndex=function(t){var e=this;return yn(t)?new r(function(){var i=e.getContent();return{columnNames:i.columnNames,values:i.values,index:e.deflate(t)}}):(r.checkIterable(t,"newIndex"),new r(function(){var i=e.getContent();return{columnNames:i.columnNames,values:i.values,index:t}}))},r.prototype.resetIndex=function(){var t=this;return new r(function(){var e=t.getContent();return{columnNames:e.columnNames,values:e.values}})},r.prototype.getSeries=function(t){var e=this;if(!xa(t))throw new Error("Expected 'columnName' parameter to 'DataFrame.getSeries' function to be a string that specifies the name of the column to retreive.");return new qa(function(){return{values:new xs(e.getContent().values,function(i){return i[t]}),index:e.getContent().index}})},r.prototype.hasSeries=function(t){var e=t.toLowerCase();try{for(var i=fn(this.getColumnNames()),o=i.next();!o.done;o=i.next()){var a=o.value;if(a.toLowerCase()===e)return!0}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return!1;var s,n},r.prototype.expectSeries=function(t){if(!this.hasSeries(t))throw new Error("Expected dataframe to contain series with column name: '"+t+"'.");return this.getSeries(t)},r.prototype.withSeries=function(t,e){var i=this;if(Xo(t)){if(!jm(e))throw new Error("Expected 'series' parameter to 'DataFrame.withSeries' to not be set when 'columnNameOrSpec is an object.")}else{if(!xa(t))throw new Error("Expected 'columnNameOrSpec' parameter to 'DataFrame.withSeries' function to be a string that specifies the column to set or replace.");if(!yn(e)&&!Xo(e))throw new Error("Expected 'series' parameter to 'DataFrame.withSeries' to be a Series object or a function that takes a dataframe and produces a Series.")}if(Xo(t)){var o=t,a=Object.keys(o),s=this;try{for(var n=fn(a),l=n.next();!l.done;l=n.next()){var u=l.value;s=s.withSeries(u,o[u])}}catch(_){d={error:_}}finally{try{l&&!l.done&&(p=n.return)&&p.call(n)}finally{if(d)throw d.error}}return s.cast()}var h=t;if(this.none()){var v=void 0;return yn(e)?v=e(this):v=e,v.inflate(function(_){var b={};return b[h]=_,b}).cast()}return new r(function(){var _;yn(e)?_=e(i):_=e;var b=OC(_.toPairs(),function(E){return E[0]},function(E){return E[1]}),x=Wm(i.getColumnNames().concat([h]));return{columnNames:x,index:i.getContent().index,pairs:new xs(i.getContent().pairs,function(E){var A=E[0],P=E[1],D=Object.assign({},P);return D[h]=b.get(A),[A,D]})}});var d,p},r.merge=function(t){var e=!1,i=new Map;try{for(var o=fn(t),a=o.next();!a.done;a=o.next()){var s=a.value;s.isCaseSensitive()&&(e=!0);try{for(var n=fn(s.toPairs()),l=n.next();!l.done;l=n.next()){var u=l.value,h=u[0];if(i.has(h))i.set(h,Object.assign(i.get(h),u[1]));else{var v=Object.assign({},u[1]);i.set(h,v)}}}catch(P){E={error:P}}finally{try{l&&!l.done&&(A=n.return)&&A.call(n)}finally{if(E)throw E.error}}}}catch(P){b={error:P}}finally{try{a&&!a.done&&(x=o.return)&&x.call(o)}finally{if(b)throw b.error}}var d=Array.from(t).map(function(P){return P.getColumnNames()}).reduce(function(P,D){return P.concat(D)},[]),p=Wm(d),_=Array.from(i.keys()).map(function(P){return[P,i.get(P)]});return _.sort(function(P,D){return P[0]===D[0]?0:P[0]>D[0]?1:-1}),new r({columnNames:p,pairs:_,caseSensitive:e});var b,x,E,A},r.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.merge([this].concat(t))},r.prototype.ensureSeries=function(t,e){if(Xo(t)){if(!jm(e))throw new Error("Expected 'series' parameter to 'DataFrame.ensureSeries' to not be set when 'columnNameOrSpec is an object.")}else{if(!xa(t))throw new Error("Expected 'columnNameOrSpec' parameter to 'DataFrame.ensureSeries' function to be a string that specifies the column to set or replace.");if(!yn(e)&&!Xo(e))throw new Error("Expected 'series' parameter to 'DataFrame.ensureSeries' to be a Series object or a function that takes a dataframe and produces a Series.")}if(Xo(t)){var i=t,o=Object.keys(t),a=this;try{for(var s=fn(o),n=s.next();!n.done;n=s.next()){var l=n.value;a=a.ensureSeries(l,i[l])}}catch(d){h={error:d}}finally{try{n&&!n.done&&(v=s.return)&&v.call(s)}finally{if(h)throw h.error}}return a}var u=t;if(this.hasSeries(u))return this;return this.withSeries(u,e);var h,v},r.prototype.subset=function(t){var e=this;if(!Ha(t))throw new Error("Expected 'columnNames' parameter to 'DataFrame.subset' to be an array of column names to keep.");return new r(function(){var i=e.getContent();return{columnNames:t,index:i.index,values:new xs(i.values,function(o){var a={};try{for(var s=fn(t),n=s.next();!n.done;n=s.next()){var l=n.value;a[l]=o[l]}}catch(v){u={error:v}}finally{try{n&&!n.done&&(h=s.return)&&h.call(s)}finally{if(u)throw u.error}}return a;var u,h}),pairs:new xs(i.pairs,function(o){var a={},s=o[1];try{for(var n=fn(t),l=n.next();!l.done;l=n.next()){var u=l.value;a[u]=s[u]}}catch(d){h={error:d}}finally{try{l&&!l.done&&(v=n.return)&&v.call(n)}finally{if(h)throw h.error}}return[o[0],a];var h,v})}})},r.prototype.dropSeries=function(t){var e=this;if(!Ha(t)){if(!xa(t))throw new Error("'DataFrame.dropSeries' expected either a string or an array or strings.");t=[t]}return new r(function(){var i=e.getContent(),o=[];try{for(var a=fn(i.columnNames),s=a.next();!s.done;s=a.next()){var n=s.value;t.indexOf(n)===-1&&o.push(n)}}catch(h){l={error:h}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(l)throw l.error}}return{columnNames:o,index:i.index,values:new xs(i.values,function(h){var v=Object.assign({},h);try{for(var d=fn(t),p=d.next();!p.done;p=d.next()){var _=p.value;delete v[_]}}catch(E){b={error:E}}finally{try{p&&!p.done&&(x=d.return)&&x.call(d)}finally{if(b)throw b.error}}return v;var b,x}),pairs:new xs(i.pairs,function(h){var v=Object.assign({},h[1]);try{for(var d=fn(t),p=d.next();!p.done;p=d.next()){var _=p.value;delete v[_]}}catch(E){b={error:E}}finally{try{p&&!p.done&&(x=d.return)&&x.call(d)}finally{if(b)throw b.error}}return[h[0],v];var b,x})};var l,u})},r.prototype.reorderSeries=function(t){var e=this;if(!Ha(t))throw new Error("Expected parameter 'columnNames' to 'DataFrame.reorderSeries' to be an array with column names.");try{for(var i=fn(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(!xa(a))throw new Error("Expected parameter 'columnNames' to 'DataFrame.reorderSeries' to be an array with column names.")}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return new r(function(){var l=e.getContent();return{columnNames:t,index:l.index,values:new xs(l.values,function(u){var h={};try{for(var v=fn(t),d=v.next();!d.done;d=v.next()){var p=d.value;h[p]=u[p]}}catch(x){_={error:x}}finally{try{d&&!d.done&&(b=v.return)&&b.call(v)}finally{if(_)throw _.error}}return h;var _,b}),pairs:new xs(l.pairs,function(u){var h=u[1],v={};try{for(var d=fn(t),p=d.next();!p.done;p=d.next()){var _=p.value;v[_]=h[_]}}catch(E){b={error:E}}finally{try{p&&!p.done&&(x=d.return)&&x.call(d)}finally{if(b)throw b.error}}return[u[0],v];var b,x}),caseSensitive:l.isCaseSensitive}});var s,n},r.prototype.bringToFront=function(t){var e=this;if(Ha(t))try{for(var i=fn(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(!xa(a))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToFront' function to specify a column or columns via a string or an array of strings.")}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}else{if(!xa(t))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToFront' function to specify a column or columns via a string or an array of strings.");t=[t]}return new r(function(){var l=e.getContent(),u=Array.from(l.columnNames),h=[];try{for(var v=fn(t),d=v.next();!d.done;d=v.next()){var p=d.value;u.indexOf(p)!==-1&&h.push(p)}}catch(S){A={error:S}}finally{try{d&&!d.done&&(P=v.return)&&P.call(v)}finally{if(A)throw A.error}}var _=[];try{for(var b=fn(u),x=b.next();!x.done;x=b.next()){var E=x.value;t.indexOf(E)===-1&&_.push(E)}}catch(S){D={error:S}}finally{try{x&&!x.done&&(R=b.return)&&R.call(b)}finally{if(D)throw D.error}}return{columnNames:h.concat(_),index:l.index,values:l.values,pairs:l.pairs};var A,P,D,R});var s,n},r.prototype.bringToBack=function(t){var e=this;if(Ha(t))try{for(var i=fn(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(!xa(a))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToBack' function to specify a column or columns via a string or an array of strings.")}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}else{if(!xa(t))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToBack' function to specify a column or columns via a string or an array of strings.");t=[t]}return new r(function(){var l=e.getContent(),u=Array.from(l.columnNames),h=[];try{for(var v=fn(t),d=v.next();!d.done;d=v.next()){var p=d.value;u.indexOf(p)!==-1&&h.push(p)}}catch(S){A={error:S}}finally{try{d&&!d.done&&(P=v.return)&&P.call(v)}finally{if(A)throw A.error}}var _=[];try{for(var b=fn(u),x=b.next();!x.done;x=b.next()){var E=x.value;t.indexOf(E)===-1&&_.push(E)}}catch(S){D={error:S}}finally{try{x&&!x.done&&(R=b.return)&&R.call(b)}finally{if(D)throw D.error}}return{columnNames:_.concat(h),index:l.index,values:l.values,pairs:l.pairs};var A,P,D,R});var s,n},r.prototype.renameSeries=function(t){var e=this;if(!Xo(t))throw new Error("Expected parameter 'newColumnNames' to 'DataFrame.renameSeries' to be an array with column names.");var i=Object.keys(t);try{for(var o=fn(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(!xa(s))throw new Error("Expected existing column name '"+s+"' of 'newColumnNames' parameter to 'DataFrame.renameSeries' to be a string.");if(!xa(t[s]))throw new Error("Expected new column name '"+t[s]+"' for existing column '"+s+"' of 'newColumnNames' parameter to 'DataFrame.renameSeries' to be a string.")}}catch(u){n={error:u}}finally{try{a&&!a.done&&(l=o.return)&&l.call(o)}finally{if(n)throw n.error}}return new r(function(){var u=e.getContent(),h=[];try{for(var v=fn(u.columnNames),d=v.next();!d.done;d=v.next()){var p=d.value,_=i.indexOf(p);_===-1?h.push(p):h.push(t[p])}}catch(A){x={error:A}}finally{try{d&&!d.done&&(E=v.return)&&E.call(v)}finally{if(x)throw x.error}}function b(A){var P=Object.assign({},A);try{for(var D=fn(i),R=D.next();!R.done;R=D.next()){var S=R.value;P[t[S]]=P[S],delete P[S]}}catch(M){I={error:M}}finally{try{R&&!R.done&&(T=D.return)&&T.call(D)}finally{if(I)throw I.error}}return P;var I,T}return{columnNames:h,index:u.index,values:new xs(u.values,b),pairs:new xs(u.pairs,function(A){return[A[0],b(A[1])]})};var x,E});var n,l},r.prototype.toArray=function(){var t=[];try{for(var e=fn(this.getContent().values),i=e.next();!i.done;i=e.next()){var o=i.value;o!=null&&t.push(o)}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t;var a,s},r.prototype.toPairs=function(){var t=[];try{for(var e=fn(this.getContent().pairs),i=e.next();!i.done;i=e.next()){var o=i.value;o[1]!=null&&o[1]!==null&&t.push(o)}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t;var a,s},r.prototype.toObject=function(t,e){if(!yn(t))throw new Error("Expected 'keySelector' parameter to DataFrame.toObject to be a function.");if(!yn(e))throw new Error("Expected 'valueSelector' parameter to DataFrame.toObject to be a function.");return Cf(this,t,e)},r.prototype.toRows=function(){var t=this.getColumnNames(),e=[];try{for(var i=fn(this.getContent().values),o=i.next();!o.done;o=i.next()){for(var a=o.value,s=[],n=0;n<t.length;++n)s.push(a[t[n]]);e.push(s)}}catch(h){l={error:h}}finally{try{o&&!o.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}return e;var l,u},r.prototype.select=function(t){if(!yn(t))throw new Error("Expected 'transformer' parameter to 'Series.select' to be a function.");return this.map(t)},r.prototype.map=function(t){var e=this;if(!yn(t))throw new Error("Expected 'transformer' parameter to 'DataFrame.map' to be a function.");return new r(function(){var i=e.getContent();return{values:new xs(i.values,t),index:i.index}})},r.prototype.selectMany=function(t){if(!yn(t))throw new Error("Expected 'transformer' parameter to 'DataFrame.selectMany' to be a function.");return this.flatMap(t)},r.prototype.flatMap=function(t){var e=this;if(!yn(t))throw new Error("Expected 'transformer' parameter to 'DataFrame.flatMap' to be a function.");return new r(function(){return{pairs:new Fb(e.getContent().pairs,function(i,o){var a=[];try{for(var s=fn(t(i[1],o)),n=s.next();!n.done;n=s.next()){var l=n.value;a.push([i[0],l])}}catch(v){u={error:v}}finally{try{n&&!n.done&&(h=s.return)&&h.call(s)}finally{if(u)throw u.error}}return a;var u,h})}})},r.prototype.transformSeries=function(t){if(!Xo(t))throw new Error("Expected 'columnSelectors' parameter of 'DataFrame.transformSeries' function to be an object. Field names should specify columns to transform. Field values should be selector functions that specify the transformation for each column.");var e=this;try{for(var i=fn(Object.keys(t)),o=i.next();!o.done;o=i.next()){var a=o.value;e.hasSeries(a)&&(e=e.withSeries(a,e.getSeries(a).select(t[a])))}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return e;var s,n},r.prototype.generateSeries=function(t){if(Xo(t)){var u=t,o=Object.keys(u),a=this;try{for(var h=fn(o),v=h.next();!v.done;v=h.next()){var l=v.value;a=a.withSeries(l,a.select(u[l]).deflate())}}catch(A){_={error:A}}finally{try{v&&!v.done&&(b=h.return)&&b.call(h)}finally{if(_)throw _.error}}return a}else{if(!yn(t))throw new Error("Expected 'generator' parameter to 'DataFrame.generateSeries' function to be a function or an object.");var e=t,i=this.select(e).bake(),o=i.getColumnNames(),a=this;try{for(var s=fn(o),n=s.next();!n.done;n=s.next()){var l=n.value;a=a.withSeries(l,i.getSeries(l))}}catch(x){d={error:x}}finally{try{n&&!n.done&&(p=s.return)&&p.call(s)}finally{if(d)throw d.error}}return a}var d,p,_,b},r.prototype.deflate=function(t){var e=this;if(t&&!yn(t))throw new Error("Expected 'selector' parameter to 'DataFrame.deflate' function to be a selector function.");return new qa(function(){var i=e.getContent();return t?{index:i.index,values:new xs(i.values,t),pairs:new xs(i.pairs,function(o,a){return[o[0],t(o[1],a)]})}:{index:i.index,values:i.values,pairs:i.pairs}})},r.prototype.inflateSeries=function(t,e){if(!xa(t))throw new Error("Expected 'columnName' parameter to 'DataFrame.inflateSeries' to be a string that is the name of the column to inflate.");if(e&&!yn(e))throw new Error("Expected optional 'selector' parameter to 'DataFrame.inflateSeries' to be a selector function, if it is specified.");return this.zip(this.getSeries(t).inflate(e),function(i,o){return Object.assign({},i,o)})},r.prototype.window=function(t){var e=this;if(!oo(t))throw new Error("Expected 'period' parameter to 'DataFrame.window' to be a number.");return new qa(function(){var i=e.getContent();return{values:new TC(i.columnNames,i.pairs,t)}})},r.prototype.rollingWindow=function(t){var e=this;if(!oo(t))throw new Error("Expected 'period' parameter to 'DataFrame.rollingWindow' to be a number.");return new qa(function(){var i=e.getContent();return{values:new EC(i.columnNames,i.pairs,t)}})},r.prototype.variableWindow=function(t){var e=this;if(!yn(t))throw new Error("Expected 'comparer' parameter to 'DataFrame.variableWindow' to be a function.");return new qa(function(){var i=e.getContent();return{values:new DC(i.columnNames,i.pairs,t)}})},r.prototype.sequentialDistinct=function(t){if(t){if(!yn(t))throw new Error("Expected 'selector' parameter to 'DataFrame.sequentialDistinct' to be a selector function that determines the value to compare for duplicates.")}else t=function(e){return e};return this.variableWindow(function(e,i){return t(e)===t(i)}).select(function(e){return[e.getIndex().first(),e.first()]}).withIndex(function(e){return e[0]}).inflate(function(e){return e[1]})},r.prototype.aggregate=function(t,e){var i=this;if(yn(t)&&!e)return this.skip(1).aggregate(this.first(),t);if(e){if(!yn(e))throw new Error("Expected 'selector' parameter to aggregate to be a function.");var o=t;try{for(var a=fn(this),s=a.next();!s.done;s=a.next()){var n=s.value;o=e(o,n)}}catch(p){v={error:p}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(v)throw v.error}}return o}else{if(!Xo(t))throw new Error("Expected 'seed' parameter to aggregate to be an object.");var l=t,u=Object.keys(l),h=u.map(function(p){var _=l[p];if(!yn(_))throw new Error("Expected column/selector pairs in 'seed' parameter to aggregate.");return[p,i.getSeries(p).aggregate(_)]});return Cf(h,function(p){return p[0]},function(p){return p[1]})}var v,d},r.prototype.reduce=function(t,e){if(!yn(t))throw new Error("Expected 'reducer' parameter to `DataFrame.reduce` to be a function.");var i=e,o=this;i===void 0&&o.any()&&(i=o.first(),o=o.skip(1));try{for(var a=fn(o),s=a.next();!s.done;s=a.next()){var n=s.value;i=t(i,n)}}catch(h){l={error:h}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(l)throw l.error}}return i;var l,u},r.prototype.skip=function(t){var e=this;if(!oo(t))throw new Error("Expected 'numValues' parameter to 'DataFrame.skip' to be a number.");return new r(function(){var i=e.getContent();return{columnNames:i.columnNames,values:new hh(i.values,t),index:new hh(i.index,t),pairs:new hh(i.pairs,t)}})},r.prototype.skipWhile=function(t){var e=this;if(!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.skipWhile' function to be a predicate function that returns true/false.");return new r(function(){var i=e.getContent();return{columnNames:i.columnNames,values:new ou(i.values,t),pairs:new ou(i.pairs,function(o){return t(o[1])})}})},r.prototype.skipUntil=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.skipUntil' function to be a predicate function that returns true/false.");return this.skipWhile(function(e){return!t(e)})},r.prototype.take=function(t){var e=this;if(!oo(t))throw new Error("Expected 'numRows' parameter to 'DataFrame.take' function to be a number.");return new r(function(){var i=e.getContent();return{columnNames:i.columnNames,index:new uh(i.index,t),values:new uh(i.values,t),pairs:new uh(i.pairs,t)}})},r.prototype.takeWhile=function(t){var e=this;if(!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.takeWhile' function to be a predicate function that returns true/false.");return new r(function(){var i=e.getContent();return{columnNames:i.columnNames,values:new au(i.values,t),pairs:new au(i.pairs,function(o){return t(o[1])})}})},r.prototype.takeUntil=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.takeUntil' function to be a predicate function that returns true/false.");return this.takeWhile(function(e){return!t(e)})},r.prototype.count=function(){var t=0;try{for(var e=fn(this.getContent().values),i=e.next();!i.done;i=e.next()){var o=i.value;++t}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t;var a,s},r.prototype.first=function(){try{for(var t=fn(this),e=t.next();!e.done;e=t.next()){var i=e.value;return i}}catch(s){o={error:s}}finally{try{e&&!e.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}}throw new Error("DataFrame.first: No values in DataFrame.");var o,a},r.prototype.last=function(){var t=null;try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;t=o}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}if(t===null)throw new Error("DataFrame.last: No values in DataFrame.");return t;var a,s},r.prototype.at=function(t){if(!this.none())return this.getRowByIndex(t)},r.prototype.head=function(t){if(!oo(t))throw new Error("Expected 'numValues' parameter to 'DataFrame.head' function to be a number.");if(t===0)return new r;var e=t<0?this.count()-Math.abs(t):t;return this.take(e)},r.prototype.tail=function(t){if(!oo(t))throw new Error("Expected 'numValues' parameter to 'DataFrame.tail' function to be a number.");if(t===0)return new r;var e=t>0?this.count()-t:Math.abs(t);return this.skip(e)},r.prototype.where=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.where' to be a function.");return this.filter(t)},r.prototype.filter=function(t){var e=this;if(!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.filter' to be a function.");return new r(function(){var i=e.getContent();return{columnNames:i.columnNames,values:new ch(i.values,t),pairs:new ch(i.pairs,function(o){return t(o[1])})}})},r.prototype.forEach=function(t){if(!yn(t))throw new Error("Expected 'callback' parameter to 'DataFrame.forEach' to be a function.");var e=0;try{for(var i=fn(this),o=i.next();!o.done;o=i.next()){var a=o.value;t(a,e++)}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return this;var s,n},r.prototype.all=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.all' to be a function.");var e=0;try{for(var i=fn(this),o=i.next();!o.done;o=i.next()){var a=o.value;if(!t(a))return!1;++e}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return e>0;var s,n},r.prototype.any=function(t){if(t&&!yn(t))throw new Error("Expected optional 'predicate' parameter to 'DataFrame.any' to be a function.");if(t)try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;if(t(o))return!0}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}else{var a=this[Symbol.iterator]();return!a.next().done}return!1;var s,n},r.prototype.none=function(t){if(t&&!yn(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.none' to be a function.");if(t)try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;if(t(o))return!1}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}else{var a=this[Symbol.iterator]();return a.next().done||!1}return!0;var s,n},r.prototype.startAt=function(t){var e=this;return new r(function(){var i=e.getContent(),o=e.getIndex().getLessThan();return{columnNames:i.columnNames,index:new ou(i.index,function(a){return o(a,t)}),pairs:new ou(i.pairs,function(a){return o(a[0],t)})}})},r.prototype.endAt=function(t){var e=this;return new r(function(){var i=e.getContent(),o=e.getIndex().getLessThanOrEqualTo();return{columnNames:i.columnNames,index:new au(i.index,function(a){return o(a,t)}),pairs:new au(i.pairs,function(a){return o(a[0],t)})}})},r.prototype.before=function(t){var e=this;return new r(function(){var i=e.getContent(),o=e.getIndex().getLessThan();return{columnNames:i.columnNames,index:new au(i.index,function(a){return o(a,t)}),pairs:new au(i.pairs,function(a){return o(a[0],t)})}})},r.prototype.after=function(t){var e=this;return new r(function(){var i=e.getContent(),o=e.getIndex().getLessThanOrEqualTo();return{columnNames:i.columnNames,index:new ou(i.index,function(a){return o(a,t)}),pairs:new ou(i.pairs,function(a){return o(a[0],t)})}})},r.prototype.between=function(t,e){return this.startAt(t).endAt(e)},r.prototype.toString=function(){var t=this.getColumnNames(),e=["__index__"].concat(t),i=new gb;try{for(var o=fn(this.toPairs()),a=o.next();!a.done;a=o.next()){var s=a.value,n=s[0],l=s[1];i.cell(e[0],n);for(var u=0;u<t.length;++u){var h=t[u];i.cell(e[u+1],l[h])}i.newRow()}}catch(p){v={error:p}}finally{try{a&&!a.done&&(d=o.return)&&d.call(o)}finally{if(v)throw v.error}}return i.toString();var v,d},r.prototype.parseInts=function(t){if(Ha(t)){var e=this;try{for(var i=fn(t),o=i.next();!o.done;o=i.next()){var a=o.value;e=e.parseInts(a)}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return e}else return this.withSeries(t,this.getSeries(t).parseInts());var s,n},r.prototype.parseFloats=function(t){if(Ha(t)){var e=this;try{for(var i=fn(t),o=i.next();!o.done;o=i.next()){var a=o.value;e=e.parseFloats(a)}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return e}else return this.withSeries(t,this.getSeries(t).parseFloats());var s,n},r.prototype.parseDates=function(t,e){if(e&&!xa(e))throw new Error("Expected optional 'formatString' parameter to 'DataFrame.parseDates' to be a string (if specified).");if(Ha(t)){var i=this;try{for(var o=fn(t),a=o.next();!a.done;a=o.next()){var s=a.value;i=i.parseDates(s,e)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(l=o.return)&&l.call(o)}finally{if(n)throw n.error}}return i}else return this.withSeries(t,this.getSeries(t).parseDates(e));var n,l},r.prototype.toStrings=function(t,e){if(Xo(t)){try{for(var i=fn(Object.keys(t)),o=i.next();!o.done;o=i.next()){var a=o.value;if(!xa(t[a]))throw new Error("Expected values of 'columnNames' parameter to be strings when a format spec is passed in.")}}catch(P){p={error:P}}finally{try{o&&!o.done&&(_=i.return)&&_.call(i)}finally{if(p)throw p.error}}if(!jm(e))throw new Error("Optional 'formatString' parameter to 'DataFrame.toStrings' should not be set when passing in a format spec.")}else{if(!Ha(t)&&!xa(t))throw new Error("Expected 'columnNames' parameter to 'DataFrame.toStrings' to be a string, array of strings or format spec that specifes which columns should be converted to strings.");if(e&&!xa(e))throw new Error("Expected optional 'formatString' parameter to 'DataFrame.toStrings' to be a string (if specified).")}if(Xo(t)){var s=this;try{for(var n=fn(Object.keys(t)),l=n.next();!l.done;l=n.next()){var a=l.value,u=t[a];s=s.toStrings(a,u)}}catch(P){b={error:P}}finally{try{l&&!l.done&&(x=n.return)&&x.call(n)}finally{if(b)throw b.error}}return s}else if(Ha(t)){var s=this;try{for(var h=fn(t),v=h.next();!v.done;v=h.next()){var a=v.value;s=s.toStrings(a,e)}}catch(D){E={error:D}}finally{try{v&&!v.done&&(A=h.return)&&A.call(h)}finally{if(E)throw E.error}}return s}else{var d=t;return this.withSeries(d,this.getSeries(d).toStrings(e))}var p,_,b,x,E,A},r.prototype.truncateStrings=function(t){if(!oo(t))throw new Error("Expected 'maxLength' parameter to 'truncateStrings' to be an integer.");return this.select(function(e){var i={};try{for(var o=fn(Object.keys(e)),a=o.next();!a.done;a=o.next()){var s=a.value,n=e[s];xa(n)?i[s]=n.substring(0,t):i[s]=n}}catch(h){l={error:h}}finally{try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(l)throw l.error}}return i;var l,u})},r.prototype.round=function(t){if(t!==void 0){if(!oo(t))throw new Error("Expected 'numDecimalPlaces' parameter to 'DataFrame.round' to be a number.")}else t=2;return this.select(function(e){var i={};try{for(var o=fn(Object.keys(e)),a=o.next();!a.done;a=o.next()){var s=a.value,n=e[s];oo(n)?i[s]=parseFloat(n.toFixed(t)):i[s]=n}}catch(h){l={error:h}}finally{try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(l)throw l.error}}return i;var l,u})},r.prototype.bake=function(){return this.getContent().isBaked?this:new r({columnNames:this.getColumnNames(),values:this.toArray(),pairs:this.toPairs(),baked:!0})},r.prototype.reverse=function(){var t=this;return new r(function(){var e=t.getContent();return{columnNames:e.columnNames,values:new fh(e.values),index:new fh(e.index),pairs:new fh(e.pairs)}})},r.prototype.distinct=function(t){var e=this;return new r(function(){var i=e.getContent();return{columnNames:i.columnNames,values:new zp(i.values,t),pairs:new zp(i.pairs,function(o){return t&&t(o[1])||o[1]})}})},r.prototype.groupBy=function(t){var e=this;if(!yn(t))throw new Error("Expected 'selector' parameter to 'DataFrame.groupBy' to be a selector function that determines the value to group the series by.");return new qa(function(){var i=[],o={},a=0;try{for(var s=fn(e.getContent().pairs),n=s.next();!n.done;n=s.next()){var l=n.value,u=t(l[1],a);++a;var h=o[u];if(h)h.push(l);else{var v=[];v.push(l),i.push(v),o[u]=v}}}catch(_){d={error:_}}finally{try{n&&!n.done&&(p=s.return)&&p.call(s)}finally{if(d)throw d.error}}return{values:i.map(function(_){return new r({pairs:_})})};var d,p})},r.prototype.groupSequentialBy=function(t){if(t){if(!yn(t))throw new Error("Expected 'selector' parameter to 'DataFrame.groupSequentialBy' to be a selector function that determines the value to group the series by.")}else t=function(e){return e};return this.variableWindow(function(e,i){return t(e)===t(i)})},r.concat=function(t){if(!Ha(t))throw new Error("Expected 'dataframes' parameter to 'DataFrame.concat' to be an array of dataframes.");return new r(function(){var e=t,i=e.map(function(b){return b.getContent()}),o=[];try{for(var a=fn(i),s=a.next();!s.done;s=a.next()){var n=s.value;try{for(var l=fn(n.columnNames),u=l.next();!u.done;u=l.next()){var h=u.value;o.push(h)}}catch(b){p={error:b}}finally{try{u&&!u.done&&(_=l.return)&&_.call(l)}finally{if(p)throw p.error}}}}catch(b){v={error:b}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(v)throw v.error}}return o=Wm(o),{columnNames:o,values:new Fp(i.map(function(b){return b.values})),pairs:new Fp(i.map(function(b){return b.pairs}))};var v,d,p,_})},r.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=[this];try{for(var o=fn(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(Ha(s))try{for(var n=fn(s),l=n.next();!l.done;l=n.next()){var u=l.value;i.push(u)}}catch(_){d={error:_}}finally{try{l&&!l.done&&(p=n.return)&&p.call(n)}finally{if(d)throw d.error}}else i.push(s)}}catch(_){h={error:_}}finally{try{a&&!a.done&&(v=o.return)&&v.call(o)}finally{if(h)throw h.error}}return r.concat(i);var h,v,d,p},r.zip=function(t,e){var i=Array.from(t);if(i.length===0)return new r;var o=i[0];return o.none()?new r:new r(function(){var a=o,s=i;return{index:a.getContent().index,values:new Ob(s.map(function(n){return n.getContent().values}),e)}})},r.prototype.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1],o=[this].concat(t.slice(0,t.length-1));return r.zip(o,function(a){return i.apply(void 0,Pb(a))})},r.prototype.orderBy=function(t){var e=this.getContent();return new my({columnNames:e.columnNames,values:e.values,pairs:e.pairs,selector:t,direction:Lu.Ascending,parent:null})},r.prototype.orderByDescending=function(t){var e=this.getContent();return new my({columnNames:e.columnNames,values:e.values,pairs:e.pairs,selector:t,direction:Lu.Descending,parent:null})},r.prototype.union=function(t,e){if(e&&!yn(e))throw new Error("Expected optional 'selector' parameter to 'DataFrame.union' to be a selector function.");return this.concat(t).distinct(e)},r.prototype.intersection=function(t,e,i){if(e){if(!yn(e))throw new Error("Expected optional 'outerSelector' parameter to 'DataFrame.intersection' to be a function.")}else e=function(a){return a};if(i){if(!yn(i))throw new Error("Expected optional 'innerSelector' parameter to 'DataFrame.intersection' to be a function.")}else i=function(a){return a};var o=this;return o.filter(function(a){var s=e(a);return t.filter(function(n){return s===i(n)}).any()})},r.prototype.except=function(t,e,i){if(e){if(!yn(e))throw new Error("Expected optional 'outerSelector' parameter to 'DataFrame.except' to be a function.")}else e=function(a){return a};if(i){if(!yn(i))throw new Error("Expected optional 'innerSelector' parameter to 'DataFrame.except' to be a function.")}else i=function(a){return a};var o=this;return o.filter(function(a){var s=e(a);return t.filter(function(n){return s===i(n)}).none()})},r.prototype.join=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.join' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.join' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.join' to be a selector function.");var a=this;return new r(function(){var s=t.groupBy(i).toObject(function(D){return i(D.first())},function(D){return D});a.getContent();var n=[];try{for(var l=fn(a),u=l.next();!u.done;u=l.next()){var h=u.value,v=e(h),d=s[v];if(d)try{for(var p=fn(d),_=p.next();!_.done;_=p.next()){var b=_.value;n.push(o(h,b))}}catch(D){A={error:D}}finally{try{_&&!_.done&&(P=p.return)&&P.call(p)}finally{if(A)throw A.error}}}}catch(D){x={error:D}}finally{try{u&&!u.done&&(E=l.return)&&E.call(l)}finally{if(x)throw x.error}}return{values:n};var x,E,A,P})},r.prototype.joinOuter=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuter' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuter' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuter' to be a selector function.");var a=this,s=a.except(t,e,i).select(function(u){return o(u,null)}).resetIndex(),n=t.except(a,i,e).select(function(u){return o(null,u)}).resetIndex(),l=a.join(t,e,i,o);return s.concat(l).concat(n).resetIndex()},r.prototype.joinOuterLeft=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");var a=this,s=a.except(t,e,i).select(function(l){return o(l,null)}).resetIndex(),n=a.join(t,e,i,o);return s.concat(n).resetIndex()},r.prototype.joinOuterRight=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");var a=this,s=t.except(a,i,e).select(function(l){return o(null,l)}).resetIndex(),n=a.join(t,e,i,o);return n.concat(s).resetIndex()},r.prototype.summarize=function(t){if(t&&!Xo(t))throw new Error("Expected 'spec' parameter to 'DataFrame.summarize' to be an object that specifies how to summarize the dataframe.");if(!t){t={};try{for(var e=fn(this.getColumnNames()),i=e.next();!i.done;i=e.next()){var o=i.value,a={};a[o+"_sum"]=qa.sum,a[o+"_average"]=qa.average,a[o+"_count"]=qa.count,t[o]=a}}catch(F){D={error:F}}finally{try{i&&!i.done&&(R=e.return)&&R.call(e)}finally{if(D)throw D.error}}}try{for(var s=fn(Object.keys(t)),n=s.next();!n.done;n=s.next()){var l=n.value,u=t[l];yn(u)&&(t[l]={},t[l][l]=u)}}catch(F){S={error:F}}finally{try{n&&!n.done&&(I=s.return)&&I.call(s)}finally{if(S)throw S.error}}var h=Object.keys(t),v=Cf(h,function(F){return F},function(F){return Object.keys(t[F])}),d={};try{for(var p=fn(h),_=p.next();!_.done;_=p.next()){var l=_.value,b=v[l];try{for(var x=fn(b),E=x.next();!E.done;E=x.next()){var A=E.value,P=t[l][A];d[A]=P(this.getSeries(l))}}catch(V){z={error:V}}finally{try{E&&!E.done&&(U=x.return)&&U.call(x)}finally{if(z)throw z.error}}}}catch(F){T={error:F}}finally{try{_&&!_.done&&(M=p.return)&&M.call(p)}finally{if(T)throw T.error}}return d;var D,R,S,I,T,M,z,U},r.prototype.pivot=function(t,e,i){var o;if(xa(t))o=[t];else{if(!Ha(t))throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's columns.");if(o=Array.from(t),o.length===0)throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to contain at least one string.");try{for(var a=fn(o),s=a.next();!s.done;s=a.next()){var n=s.value;if(!xa(n))throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to be an array of strings, each string identifies a column in the DataFrame on which to pivot.")}}catch(F){T={error:F}}finally{try{s&&!s.done&&(M=a.return)&&M.call(a)}finally{if(T)throw T.error}}}var l;if(Xo(e)){l=e;try{for(var v=fn(Object.keys(l)),d=v.next();!d.done;d=v.next()){var p=d.value,_=l[p];yn(_)&&(l[p]={},l[p][p]=_)}}catch(F){z={error:F}}finally{try{d&&!d.done&&(U=v.return)&&U.call(v)}finally{if(z)throw z.error}}}else{if(!xa(e))throw new Error("Expected 'value' parameter to 'DataFrame.pivot' to be a string that identifies the column whose values to aggregate or a column spec that defines which column contains the value ot aggregate and the ways to aggregate that value.");if(!yn(i))throw new Error("Expected 'aggregator' parameter to 'DataFrame.pivot' to be a function to aggregate pivoted values.");var u=e,h={};h[u]=i,l={},l[u]=h}for(var b=o[0],x=this.groupBy(function(F){return F[b]}).select(function(F){var V={};return V[b]=F.first()[b],V.src=F,V}),E=function(F){var V=o[F];x=x.selectMany(function(j){var H=j.src;return H.groupBy(function(Y){return Y[V]}).select(function(Y){var J=Object.assign({},j);return J[V]=Y.first()[V],J.src=Y,J})})},A=1;A<o.length;++A)E(A);for(var P=Object.keys(l),D=Cf(P,function(F){return F},function(F){return Object.keys(l[F])}),R=x.inflate(function(F){var V=function(q){var we=D[q];try{for(var ee=fn(we),X=ee.next();!X.done;X=ee.next()){var re=X.value,de=l[q][re];F[re]=de(F.src.deflate(function(He){return He[q]}))}}catch(He){me={error:He}}finally{try{X&&!X.done&&(xe=ee.return)&&xe.call(ee)}finally{if(me)throw me.error}}var me,xe};try{for(var j=fn(P),H=j.next();!H.done;H=j.next()){var Y=H.value;V(Y)}}catch(q){J={error:q}}finally{try{H&&!H.done&&(ne=j.return)&&ne.call(j)}finally{if(J)throw J.error}}return delete F.src,F;var J,ne}),S=R.orderBy(function(F){return F[b]}),I=function(F){var V=o[F];S=S.thenBy(function(j){return j[V]})},A=1;A<o.length;++A)I(A);return S;var T,M,z,U},r.prototype.melt=function(t,e){var i,o;if(xa(t))i=[t];else{if(!Ha(t))throw new Error("Expected 'idColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's identity columns.");i=Array.from(t);try{for(var a=fn(i),s=a.next();!s.done;s=a.next()){var n=s.value;if(!xa(n))throw new Error("Expected 'idColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's identity columns.")}}catch(q){U={error:q}}finally{try{s&&!s.done&&(F=a.return)&&F.call(a)}finally{if(U)throw U.error}}}if(xa(e))o=[e];else{if(!Ha(e))throw new Error("Expected 'valueColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose molten values make the new DataFrame's 'variable' and 'value' columns.");o=Array.from(e);try{for(var l=fn(o),u=l.next();!u.done;u=l.next()){var n=u.value;if(!xa(n))throw new Error("Expected 'valueColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose molten values make the new DataFrame's 'variable' and 'value' columns.")}}catch(q){V={error:q}}finally{try{u&&!u.done&&(j=l.return)&&j.call(l)}finally{if(V)throw V.error}}}var h=o.length,v=this.count(),d=new r,p=this.subset(i.concat(o));try{for(var _=fn(i),b=_.next();!b.done;b=_.next()){var x=b.value;p=p.dropSeries(x);var E=this.getSeries(x),A=new LC(E,h),P=new qa(A);d=d.withSeries(x,P)}}catch(q){H={error:q}}finally{try{b&&!b.done&&(Y=_.return)&&Y.call(_)}finally{if(H)throw H.error}}var D=[];try{for(var R=fn(p.getColumns()),S=R.next();!S.done;S=R.next()){var x=S.value;D.push(this.getSeries(x.name))}}catch(q){J={error:q}}finally{try{S&&!S.done&&(ne=R.return)&&ne.call(R)}finally{if(J)throw J.error}}var I=new RC(D),T=new qa(I);d=d.withSeries("value",T);var M=new kC(o,v),z=new qa(M);return d=d.withSeries("variable",z),d;var U,F,V,j,H,Y,J,ne},r.prototype.insertPair=function(t){if(!Ha(t))throw new Error("Expected 'pair' parameter to 'DataFrame.insertPair' to be an array.");if(t.length!==2)throw new Error("Expected 'pair' parameter to 'DataFrame.insertPair' to be an array with two elements. The first element is the index, the second is the value.");return new r({pairs:[t]}).concat(this)},r.prototype.appendPair=function(t){if(!Ha(t))throw new Error("Expected 'pair' parameter to 'DataFrame.appendPair' to be an array.");if(t.length!==2)throw new Error("Expected 'pair' parameter to 'DataFrame.appendPair' to be an array with two elements. The first element is the index, the second is the value.");return this.concat(new r({pairs:[t]}))},r.prototype.remove=function(t){var e=this;return new r(function(){var i=e.getContent();return{columnNames:i.columnNames,pairs:new ch(i.pairs,function(o){return o[0]!==t})}})},r.prototype.fillGaps=function(t,e){if(!yn(t))throw new Error("Expected 'comparer' parameter to 'DataFrame.fillGaps' to be a comparer function that compares two values and returns a boolean.");if(!yn(e))throw new Error("Expected 'generator' parameter to 'DataFrame.fillGaps' to be a generator function that takes two values and returns an array of generated pairs to span the gap.");return this.rollingWindow(2).selectMany(function(i){var o=i.toPairs(),a=o[0],s=o[1];if(!t(a,s))return[a];var n=e(a,s);if(!Ha(n))throw new Error("Expected return from 'generator' parameter to 'DataFrame.fillGaps' to be an array of pairs, instead got a "+typeof n);return[a].concat(n)}).withIndex(function(i){return i[0]}).inflate(function(i){return i[1]}).concat(this.tail(1))},r.prototype.defaultIfEmpty=function(t){if(this.none()){if(t instanceof r)return t;if(Ha(t))return new r(t);throw new Error("Expected 'defaultSequence' parameter to 'DataFrame.defaultIfEmpty' to be an array or a series.")}else return this},r.prototype.detectTypes=function(){var t=this;return new r(function(){var e=t.getColumns().selectMany(function(i){return i.series.detectTypes().select(function(o){var a=Object.assign({},o);return a.Column=i.name,a})});return{columnNames:["Type","Frequency","Column"],values:e}})},r.prototype.detectValues=function(){var t=this;return new r(function(){var e=t.getColumns().selectMany(function(i){return i.series.detectValues().select(function(o){var a=Object.assign({},o);return a.Column=i.name,a})});return{columnNames:["Value","Frequency","Column"],values:e}})},r.prototype.toJSON=function(){return JSON.stringify(this.toArray(),null,4)},r.prototype.toJSON5=function(){return BE.stringify(this.toArray(),null,4)},r.prototype.toCSV=function(t){var e=t===void 0||t.header===void 0||t.header?[this.getColumnNames()]:[],i=e.concat(this.toRows());return NE.unparse(i,t)},r.prototype.toHTML=function(){var t=this.getColumnNames(),e=t.map(function(o){return"            <th>"+o+"</th>"}).join(`
`),i=this.toPairs();return`<table border="1" class="dataframe">
    <thead>
        <tr style="text-align: right;">
            <th></th>
`+e+`
       </tr>
    </thead>
    <tbody>
`+i.map(function(o){var a=o[0],s=o[1];return`        <tr>
            <th>`+a+`</th>
`+t.map(function(n){return"            <td>"+s[n]+"</td>"}).join(`
`)+`
        </tr>`}).join(`
`)+`
    </tbody>
</table>`},r.prototype.serialize=function(){var t=this.toArray(),e=this.getIndex(),i=e.head(t.length).toArray(),o=this.getColumns(),a=Cf(o,function(A){return A.name},function(A){return A.type}),s=e.getType();s==="date"&&(i=i.map(function(A){return Ga(A).toISOString()}));var n=!1;try{for(var l=fn(o),u=l.next();!u.done;u=l.next()){var h=u.value;if(h.type==="date"){n||(t=t.map(function(A){return Object.assign({},A)}),n=!0);try{for(var v=fn(t),d=v.next();!d.done;d=v.next()){var p=d.value;p[h.name]=Ga(p[h.name]).toISOString()}}catch(A){x={error:A}}finally{try{d&&!d.done&&(E=v.return)&&E.call(v)}finally{if(x)throw x.error}}}}}catch(A){_={error:A}}finally{try{u&&!u.done&&(b=l.return)&&b.call(l)}finally{if(_)throw _.error}}return{columnOrder:this.getColumnNames(),columns:a,index:{type:s,values:i},values:t};var _,b,x,E},r.deserialize=function(t){var e=t.index&&t.index.values||[],i=t.values&&t.values||[],o=!1;if(t.columns)try{for(var a=fn(Object.keys(t.columns)),s=a.next();!s.done;s=a.next()){var n=s.value;if(t.columns[n]==="date"){o||(i=i.map(function(b){return Object.assign({},b)}),o=!0);try{for(var l=fn(i),u=l.next();!u.done;u=l.next()){var h=u.value;h[n]=Ga(h[n]).toDate()}}catch(b){p={error:b}}finally{try{u&&!u.done&&(_=l.return)&&_.call(l)}finally{if(p)throw p.error}}}}}catch(b){v={error:b}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(v)throw v.error}}return t.index&&t.index.type==="date"&&(e=e.map(function(b){return Ga(b).toDate()})),new r({columnNames:t.columnOrder||[],index:e,values:i});var v,d,p,_},r.prototype.getTypeCode=function(){return"dataframe"},r.defaultCountIterable=new kv,r.defaultEmptyIterable=new Rb,r}(),my=function(r){m0(t,r);function t(e){for(var i=this,o=[],a=[],s=0,n=e.parent,l=[];n!==null;)l.push(n),n=n.config.parent;l.reverse();try{for(var u=fn(l),h=u.next();!h.done;h=u.next()){var v=h.value,d=v.config;o.push(t.makeSortSpec(s,d.selector,d.direction)),a.push(t.makeSortSpec(s,t.makePairsSelector(d.selector),d.direction)),++s}}catch(b){p={error:b}}finally{try{h&&!h.done&&(_=u.return)&&_.call(u)}finally{if(p)throw p.error}}return o.push(t.makeSortSpec(s,e.selector,e.direction)),a.push(t.makeSortSpec(s,t.makePairsSelector(e.selector),e.direction)),i=r.call(this,{columnNames:e.columnNames,values:new Bp(e.values,o),pairs:new Bp(e.pairs,a)})||this,i.config=e,i;var p,_}return t.makeSortSpec=function(e,i,o){return{sortLevel:e,selector:i,direction:o}},t.makePairsSelector=function(e){return function(i,o){return e(i[1],o)}},t.prototype.thenBy=function(e){return new t({columnNames:this.config.columnNames,values:this.config.values,pairs:this.config.pairs,selector:e,direction:Lu.Ascending,parent:this})},t.prototype.thenByDescending=function(e){return new t({columnNames:this.config.columnNames,values:this.config.values,pairs:this.config.pairs,selector:e,direction:Lu.Descending,parent:this})},t}(vl);Ga.extend(Ib);var bh;(function(r){r.Start="start",r.End="end"})(bh||(bh={}));var qa=function(){function r(t){if(this.configFn=null,this.content=null,this.indexedContent=null,t){var e=t;if(e.getTypeCode!==void 0){var i=e.getTypeCode();if(i==="dataframe"||i==="series"){e.content!==void 0?this.content=e.content:this.configFn=e.configFn;return}}yn(t)?this.configFn=t:r.isIterator(t)?this.content=r.initFromIterator(t):r.isIterable(t)?this.content=r.initFromIterable(t):this.content=r.initFromConfig(t)}else this.content=r.initEmpty()}return r.initFromIterator=function(t){return r.initFromIterable(new iu(t))},r.initFromIterable=function(t){return{index:r.defaultCountIterable,values:t,pairs:new ld([r.defaultCountIterable,t]),isBaked:!0}},r.initEmpty=function(){return{index:r.defaultEmptyIterable,values:r.defaultEmptyIterable,pairs:r.defaultEmptyIterable,isBaked:!0}},r.isIterator=function(t){return Xo(t)&&yn(t.next)},r.isIterable=function(t){return Ha(t)||Xo(t)&&yn(t[Symbol.iterator])},r.checkIterable=function(t,e){if(!r.isIterable(t))throw new Error("Expected '"+e+"' field of Series config object to be an array of values or an iterable of values.")},r.initFromConfig=function(t){var e,i,o,a=!1;return t.pairs&&(r.isIterator(t.pairs)?o=new iu(t.pairs):(r.checkIterable(t.pairs,"pairs"),o=t.pairs)),t.index?r.isIterator(t.index)?e=new iu(t.index):(r.checkIterable(t.index,"index"),e=t.index):o?e=new Np(o,0):e=r.defaultCountIterable,t.values?r.isIterator(t.values)?i=new iu(t.values):(r.checkIterable(t.values,"values"),i=t.values):o?i=new Np(o,1):i=r.defaultEmptyIterable,o||(o=new ld([e,i])),t.baked!==void 0&&(a=t.baked),{index:e,values:i,pairs:o,isBaked:a}},r.prototype.lazyInit=function(){this.content===null&&this.configFn!==null&&(this.content=r.initFromConfig(this.configFn()))},r.prototype.getContent=function(){return this.lazyInit(),this.content},r.prototype.getRowByIndex=function(t){if(!this.indexedContent){this.indexedContent=new Map;try{for(var e=fn(this.getContent().pairs),i=e.next();!i.done;i=e.next()){var o=i.value;this.indexedContent.set(o[0],o[1])}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}}return this.indexedContent.get(t);var a,s},r.prototype[Symbol.iterator]=function(){return this.getContent().values[Symbol.iterator]()},r.prototype.cast=function(){return this},r.prototype.getIndex=function(){var t=this;return new Bb(function(){return{values:t.getContent().index}})},r.prototype.withIndex=function(t){var e=this;return yn(t)?new r(function(){return{values:e.getContent().values,index:e.select(t)}}):(r.checkIterable(t,"newIndex"),new r(function(){return{values:e.getContent().values,index:t}}))},r.prototype.resetIndex=function(){var t=this;return new r(function(){return{values:t.getContent().values}})},r.merge=function(t){var e=new Map,i=Array.from(t).length,o=0;try{for(var a=fn(t),s=a.next();!s.done;s=a.next()){var n=s.value;try{for(var l=fn(n.toPairs()),u=l.next();!u.done;u=l.next()){var h=u.value,v=h[0];e.has(v)||e.set(v,new Array(i)),e.get(v)[o]=h[1]}}catch(E){b={error:E}}finally{try{u&&!u.done&&(x=l.return)&&x.call(l)}finally{if(b)throw b.error}}++o}}catch(E){p={error:E}}finally{try{s&&!s.done&&(_=a.return)&&_.call(a)}finally{if(p)throw p.error}}var d=Array.from(e.keys()).map(function(E){return[E,e.get(E)]});return d.sort(function(E,A){return E[0]===A[0]?0:E[0]>A[0]?1:-1}),new r({pairs:d});var p,_,b,x},r.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.merge([this].concat(t))},r.prototype.toArray=function(){var t=[];try{for(var e=fn(this.getContent().values),i=e.next();!i.done;i=e.next()){var o=i.value;o!=null&&t.push(o)}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t;var a,s},r.prototype.toPairs=function(){var t=[];try{for(var e=fn(this.getContent().pairs),i=e.next();!i.done;i=e.next()){var o=i.value;o[1]!==void 0&&o[1]!==null&&t.push(o)}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t;var a,s},r.prototype.toObject=function(t,e){if(!yn(t))throw new Error("Expected 'keySelector' parameter to Series.toObject to be a function.");if(!yn(e))throw new Error("Expected 'valueSelector' parameter to Series.toObject to be a function.");return Cf(this,t,e)},r.prototype.select=function(t){if(!yn(t))throw new Error("Expected 'transformer' parameter to 'Series.select' to be a function.");return this.map(t)},r.prototype.map=function(t){var e=this;if(!yn(t))throw new Error("Expected 'transformer' parameter to 'Series.map' to be a function.");return new r(function(){var i=e.getContent();return{values:new xs(i.values,t),index:i.index}})},r.prototype.selectMany=function(t){if(!yn(t))throw new Error("Expected 'transformer' parameter to 'Series.selectMany' to be a function.");return this.flatMap(t)},r.prototype.flatMap=function(t){var e=this;if(!yn(t))throw new Error("Expected 'transformer' parameter to 'Series.flatMap' to be a function.");return new r(function(){return{pairs:new Fb(e.getContent().pairs,function(i,o){var a=[];try{for(var s=fn(t(i[1],o)),n=s.next();!n.done;n=s.next()){var l=n.value;a.push([i[0],l])}}catch(v){u={error:v}}finally{try{n&&!n.done&&(h=s.return)&&h.call(s)}finally{if(u)throw u.error}}return a;var u,h})}})},r.prototype.window=function(t,e){var i=this;if(!oo(t))throw new Error("Expected 'period' parameter to 'Series.window' to be a number.");return new r(function(){return{pairs:new fC(i.getContent().pairs,t,e||bh.End)}})},r.prototype.rollingWindow=function(t,e){var i=this;if(!oo(t))throw new Error("Expected 'period' parameter to 'Series.rollingWindow' to be a number.");return new r(function(){return{pairs:new mC(i.getContent().pairs,t,e||bh.End)}})},r.prototype.variableWindow=function(t){var e=this;if(!yn(t))throw new Error("Expected 'comparer' parameter to 'Series.variableWindow' to be a function.");return new r(function(){return{values:new gC(e.getContent().pairs,t)}})},r.prototype.sequentialDistinct=function(t){if(t){if(!yn(t))throw new Error("Expected 'selector' parameter to 'Series.sequentialDistinct' to be a selector function that determines the value to compare for duplicates.")}else t=function(e){return e};return this.variableWindow(function(e,i){return t(e)===t(i)}).select(function(e){return[e.getIndex().first(),e.first()]}).withIndex(function(e){return e[0]}).select(function(e){return e[1]})},r.prototype.aggregate=function(t,e){if(yn(t)&&!e)return this.skip(1).aggregate(this.first(),t);if(!yn(e))throw new Error("Expected 'selector' parameter to aggregate to be a function.");var i=t;try{for(var o=fn(this),a=o.next();!a.done;a=o.next()){var s=a.value;i=e(i,s)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(l=o.return)&&l.call(o)}finally{if(n)throw n.error}}return i;var n,l},r.prototype.reduce=function(t,e){if(!yn(t))throw new Error("Expected 'reducer' parameter to `Series.reduce` to be a function.");var i=e,o=this;i===void 0&&o.any()&&(i=o.first(),o=o.skip(1));try{for(var a=fn(o),s=a.next();!s.done;s=a.next()){var n=s.value;i=t(i,n)}}catch(h){l={error:h}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(l)throw l.error}}return i;var l,u},r.prototype.amountRange=function(t,e){return this.rollingWindow(t,e).select(function(i){return i.max()-i.min()})},r.prototype.proportionRange=function(t,e){return this.rollingWindow(t,e).select(function(i){return(i.max()-i.min())/i.last()})},r.prototype.percentRange=function(t,e){return this.proportionRange(t,e).select(function(i){return i*100})},r.prototype.amountChange=function(t,e){return this.rollingWindow(t===void 0?2:t,e).select(function(i){return i.last()-i.first()})},r.prototype.proportionChange=function(t,e){return this.rollingWindow(t===void 0?2:t,e).select(function(i){return(i.last()-i.first())/i.first()})},r.prototype.percentChange=function(t,e){return this.proportionChange(t,e).select(function(i){return i*100})},r.prototype.proportionRank=function(t){if(t===void 0&&(t=2),!oo(t))throw new Error("Expected 'period' parameter to 'Series.proportionRank' to be a number that specifies the time period for the ranking.");return this.rollingWindow(t+1).select(function(e){var i=e.last(),o=e.head(-1).filter(function(s){return s<i}).count(),a=o/t;return a})},r.prototype.percentRank=function(t){if(t===void 0&&(t=2),!oo(t))throw new Error("Expected 'period' parameter to 'Series.percentRank' to be a number that specifies the time period for the ranking.");return this.proportionRank(t).select(function(e){return e*100})},r.prototype.cumsum=function(){var t=this;return new r(function(){var e=0,i=t.toPairs(),o=i.map(function(a){var s=fp(a,2),n=s[0],l=s[1];return[n,e+=l]});return{pairs:o}})},r.prototype.skip=function(t){var e=this;return new r(function(){return{values:new hh(e.getContent().values,t),index:new hh(e.getContent().index,t),pairs:new hh(e.getContent().pairs,t)}})},r.prototype.skipWhile=function(t){var e=this;if(!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.skipWhile' function to be a predicate function that returns true/false.");return new r(function(){return{values:new ou(e.getContent().values,t),pairs:new ou(e.getContent().pairs,function(i){return t(i[1])})}})},r.prototype.skipUntil=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.skipUntil' function to be a predicate function that returns true/false.");return this.skipWhile(function(e){return!t(e)})},r.prototype.take=function(t){var e=this;if(!oo(t))throw new Error("Expected 'numRows' parameter to 'Series.take' function to be a number.");return new r(function(){return{index:new uh(e.getContent().index,t),values:new uh(e.getContent().values,t),pairs:new uh(e.getContent().pairs,t)}})},r.prototype.takeWhile=function(t){var e=this;if(!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.takeWhile' function to be a predicate function that returns true/false.");return new r(function(){return{values:new au(e.getContent().values,t),pairs:new au(e.getContent().pairs,function(i){return t(i[1])})}})},r.prototype.takeUntil=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.takeUntil' function to be a predicate function that returns true/false.");return this.takeWhile(function(e){return!t(e)})},r.count=function(t){return t.count()},r.prototype.count=function(){var t=0;try{for(var e=fn(this.getContent().values),i=e.next();!i.done;i=e.next()){var o=i.value;++t}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t;var a,s},r.prototype.first=function(){try{for(var t=fn(this),e=t.next();!e.done;e=t.next()){var i=e.value;return i}}catch(s){o={error:s}}finally{try{e&&!e.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}}throw new Error("Series.first: No values in Series.");var o,a},r.prototype.last=function(){var t=null;try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;t=o}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}if(t===null)throw new Error("Series.last: No values in Series.");return t;var a,s},r.prototype.at=function(t){if(!this.none())return this.getRowByIndex(t)},r.prototype.head=function(t){if(!oo(t))throw new Error("Expected 'numValues' parameter to 'Series.head' function to be a number.");if(t===0)return new r;var e=t<0?this.count()-Math.abs(t):t;return this.take(e)},r.prototype.tail=function(t){if(!oo(t))throw new Error("Expected 'numValues' parameter to 'Series.tail' function to be a number.");if(t===0)return new r;var e=t>0?this.count()-t:Math.abs(t);return this.skip(e)},r.prototype.where=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.where' to be a function.");return this.filter(t)},r.prototype.filter=function(t){var e=this;if(!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.filter' to be a function.");return new r(function(){return e.getContent(),{values:new ch(e.getContent().values,t),pairs:new ch(e.getContent().pairs,function(i){return t(i[1])})}})},r.prototype.forEach=function(t){if(!yn(t))throw new Error("Expected 'callback' parameter to 'Series.forEach' to be a function.");var e=0;try{for(var i=fn(this),o=i.next();!o.done;o=i.next()){var a=o.value;t(a,e++)}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return this;var s,n},r.prototype.all=function(t){if(!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.all' to be a function.");var e=0;try{for(var i=fn(this),o=i.next();!o.done;o=i.next()){var a=o.value;if(!t(a))return!1;++e}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return e>0;var s,n},r.prototype.any=function(t){if(t&&!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.any' to be a function.");if(t)try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;if(t(o))return!0}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}else{var a=this[Symbol.iterator]();return!a.next().done}return!1;var s,n},r.prototype.none=function(t){if(t&&!yn(t))throw new Error("Expected 'predicate' parameter to 'Series.none' to be a function.");if(t)try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;if(t(o))return!1}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}else{var a=this[Symbol.iterator]();return a.next().done}return!0;var s,n},r.prototype.startAt=function(t){var e=this;return new r(function(){var i=e.getIndex().getLessThan();return{index:new ou(e.getContent().index,function(o){return i(o,t)}),pairs:new ou(e.getContent().pairs,function(o){return i(o[0],t)})}})},r.prototype.endAt=function(t){var e=this;return new r(function(){var i=e.getIndex().getLessThanOrEqualTo();return{index:new au(e.getContent().index,function(o){return i(o,t)}),pairs:new au(e.getContent().pairs,function(o){return i(o[0],t)})}})},r.prototype.before=function(t){var e=this;return new r(function(){var i=e.getIndex().getLessThan();return{index:new au(e.getContent().index,function(o){return i(o,t)}),pairs:new au(e.getContent().pairs,function(o){return i(o[0],t)})}})},r.prototype.after=function(t){var e=this;return new r(function(){var i=e.getIndex().getLessThanOrEqualTo();return{index:new ou(e.getContent().index,function(o){return i(o,t)}),pairs:new ou(e.getContent().pairs,function(o){return i(o[0],t)})}})},r.prototype.between=function(t,e){return this.startAt(t).endAt(e)},r.prototype.toString=function(){for(var t=["__index__","__value__"],e=this.toPairs(),i=new gb,o=0;o<e.length;++o){for(var a=e[o],s=0;s<a.length;++s){var n=a[s];i.cell(t[s],n)}i.newRow()}return i.toString()},r.parseInt=function(t,e){if(t!=null){if(!xa(t))throw new Error("Called Series.parseInts, expected all values in the series to be strings, instead found a '"+typeof t+"' at index "+e);return t.length===0?void 0:parseInt(t)}},r.prototype.parseInts=function(){return this.select(r.parseInt)},r.parseFloat=function(t,e){if(t!=null){if(!xa(t))throw new Error("Called Series.parseFloats, expected all values in the series to be strings, instead found a '"+typeof t+"' at index "+e);return t.length===0?void 0:parseFloat(t)}},r.prototype.parseFloats=function(){return this.select(r.parseFloat)},r.parseDate=function(t,e,i){if(t!=null){if(!xa(t))throw new Error("Called Series.parseDates, expected all values in the series to be strings, instead found a '"+typeof t+"' at index "+e);return t.length===0?void 0:Ga(t,i).toDate()}},r.prototype.parseDates=function(t){if(t&&!xa(t))throw new Error("Expected optional 'formatString' parameter to Series.parseDates to be a string (if specified).");return this.select(function(e,i){return r.parseDate(e,i,t)})},r.toString=function(t,e){if(t!==void 0)return t===null?null:e&&Iv(t)?Ga(t).format(e):e&&oo(t)?eC(t).format(e):t.toString()},r.prototype.toStrings=function(t){if(t&&!xa(t))throw new Error("Expected optional 'formatString' parameter to Series.toStrings to be a string (if specified).");return this.select(function(e){return r.toString(e,t)})},r.prototype.bake=function(){return this.getContent().isBaked?this:new r({values:this.toArray(),pairs:this.toPairs(),baked:!0})},r.prototype.inflate=function(t){var e=this;if(t){if(!yn(t))throw new Error("Expected 'selector' parameter to Series.inflate to be a selector function.");return new vl(function(){var i=e.getContent();return{values:new xs(i.values,t),index:i.index,pairs:new xs(i.pairs,function(o,a){return[o[0],t(o[1],a)]})}})}else return new vl(function(){var i=e.getContent();return{values:i.values,index:i.index,pairs:i.pairs}})},r.sum=function(t){return t.sum()},r.prototype.sum=function(){var t=0;try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;o!=null&&(t+=o)}}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return t;var a,s},r.average=function(t){return t.average()},r.prototype.average=function(){return this.mean()},r.mean=function(t){return t.mean()},r.prototype.mean=function(){var t=0,e=0;try{for(var i=fn(this),o=i.next();!o.done;o=i.next()){var a=o.value;a!=null&&(e+=1,t+=a)}}catch(l){s={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}if(e===0)return 0;return t/e;var s,n},r.median=function(t){return t.median()},r.prototype.median=function(){var t=this.filter(function(s){return s!=null}),e=t.count();if(e===0)return 0;var i=t.orderBy(function(s){return s}).toArray();if(e%2==0){var o=i[e/2-1],a=i[e/2];return(o+a)/2}return i[Math.floor(e/2)]},r.mode=function(t){return t.mode()},r.prototype.mode=function(){if(!this.none()){var t=new Map;try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;t.has(o)?t.set(o,t.get(o)+1):t.set(o,1)}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}var a=Array.from(t.entries());return a.sort(function(l,u){return u[1]-l[1]}),a[0][0];var s,n}},r.prototype.sumOfSquares=function(){if(this.none())return[0,1];var t=this.mean(),e=0,i=this.filter(function(p){return p!=null}),o=0;try{for(var a=fn(i),s=a.next();!s.done;s=a.next()){var n=s.value;o+=1;var l=n,u=l-t,h=u*u;e+=h}}catch(p){v={error:p}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(v)throw v.error}}return[e,o];var v,d},r.variance=function(t){return t.variance()},r.prototype.variance=function(){if(this.none())return 0;var t=fp(this.sumOfSquares(),2),e=t[0],i=t[1];return e/i},r.std=function(t){return t.std()},r.prototype.std=function(){return this.none()?0:Math.sqrt(this.variance())},r.prototype.standardize=function(){if(this.none())return new r;var t=this.mean(),e=this.std();if(e===0)throw new Error("Can't standardize a series that has no variation.");var i=this.filter(function(o){return o!=null});return i.map(function(o){var a=(o-t)/e;return a})},r.sampleVariance=function(t){return t.sampleVariance()},r.prototype.sampleVariance=function(){if(this.none())return 0;var t=fp(this.sumOfSquares(),2),e=t[0],i=t[1];return e/(i-1)},r.sampleStd=function(t){return t.sampleStd()},r.prototype.sampleStd=function(){return this.none()?0:Math.sqrt(this.sampleVariance())},r.prototype.sampleStandardize=function(){if(this.none())return new r;var t=this.mean(),e=this.sampleStd();if(e===0)throw new Error("Can't standardize a series that has no variation.");var i=this.filter(function(o){return o!=null});return i.map(function(o){var a=(o-t)/e;return a})},r.min=function(t){return t.min()},r.prototype.min=function(){var t;try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;if(o!=null){var a=o;t===void 0?t=a:t=Math.min(t,a)}}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}if(t===void 0)return 0;return t;var s,n},r.max=function(t){return t.max()},r.prototype.max=function(){var t;try{for(var e=fn(this),i=e.next();!i.done;i=e.next()){var o=i.value;if(o!=null){var a=o;t===void 0?t=a:t=Math.max(t,a)}}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}if(t===void 0)return 0;return t;var s,n},r.range=function(t){return t.range()},r.prototype.range=function(){return this.max()-this.min()},r.prototype.invert=function(){return this.select(function(t){return t==null?t:-t})},r.prototype.counter=function(t){return this.groupSequentialBy(t).selectMany(function(e,i){return t(e.first())?VC(1,e.count()).withIndex(e.getIndex()).toPairs():GC(0,e.count()).withIndex(e.getIndex()).toPairs()}).withIndex(function(e){return e[0]}).select(function(e){return e[1]})},r.prototype.reverse=function(){var t=this;return new r(function(){return{values:new fh(t.getContent().values),index:new fh(t.getContent().index),pairs:new fh(t.getContent().pairs)}})},r.prototype.distinct=function(t){var e=this;return new r(function(){return{values:new zp(e.getContent().values,t),pairs:new zp(e.getContent().pairs,function(i){return t&&t(i[1])||i[1]})}})},r.prototype.groupBy=function(t){var e=this;if(!yn(t))throw new Error("Expected 'selector' parameter to 'Series.groupBy' to be a selector function that determines the value to group the series by.");return new r(function(){var i=[],o={},a=0;try{for(var s=fn(e.getContent().pairs),n=s.next();!n.done;n=s.next()){var l=n.value,u=t(l[1],a);++a;var h=o[u];if(h)h.push(l);else{var v=[];v.push(l),i.push(v),o[u]=v}}}catch(_){d={error:_}}finally{try{n&&!n.done&&(p=s.return)&&p.call(s)}finally{if(d)throw d.error}}return{values:i.map(function(_){return new r({pairs:_})})};var d,p})},r.prototype.groupSequentialBy=function(t){if(t){if(!yn(t))throw new Error("Expected 'selector' parameter to 'Series.groupSequentialBy' to be a selector function that determines the value to group the series by.")}else t=function(e){return e};return this.variableWindow(function(e,i){return t(e)===t(i)})},r.concat=function(t){if(!Ha(t))throw new Error("Expected 'series' parameter to 'Series.concat' to be an array of series.");return new r(function(){var e=t,i=e.map(function(o){return o.getContent()});return{values:new Fp(i.map(function(o){return o.values})),pairs:new Fp(i.map(function(o){return o.pairs}))}})},r.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=[this];try{for(var o=fn(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(Ha(s))try{for(var n=fn(s),l=n.next();!l.done;l=n.next()){var u=l.value;i.push(u)}}catch(_){d={error:_}}finally{try{l&&!l.done&&(p=n.return)&&p.call(n)}finally{if(d)throw d.error}}else i.push(s)}}catch(_){h={error:_}}finally{try{a&&!a.done&&(v=o.return)&&v.call(o)}finally{if(h)throw h.error}}return r.concat(i);var h,v,d,p},r.zip=function(t,e){var i=Array.from(t);if(i.length===0)return new r;var o=i[0];return o.none()?new r:new r(function(){var a=o,s=i;return{index:a.getContent().index,values:new Ob(s.map(function(n){return n.getContent().values}),e)}})},r.prototype.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1],o=[this].concat(t.slice(0,t.length-1));return r.zip(o,function(a){return i.apply(void 0,Pb(a))})},r.prototype.orderBy=function(t){var e=this.getContent();return new vy({values:e.values,pairs:e.pairs,selector:t,direction:Lu.Ascending,parent:null})},r.prototype.orderByDescending=function(t){var e=this.getContent();return new vy({values:e.values,pairs:e.pairs,selector:t,direction:Lu.Descending,parent:null})},r.prototype.union=function(t,e){if(e&&!yn(e))throw new Error("Expected optional 'selector' parameter to 'Series.union' to be a selector function.");return this.concat(t).distinct(e)},r.prototype.intersection=function(t,e,i){if(e){if(!yn(e))throw new Error("Expected optional 'outerSelector' parameter to 'Series.intersection' to be a function.")}else e=function(a){return a};if(i){if(!yn(i))throw new Error("Expected optional 'innerSelector' parameter to 'Series.intersection' to be a function.")}else i=function(a){return a};var o=this;return o.filter(function(a){var s=e(a);return t.filter(function(n){return s===i(n)}).any()})},r.prototype.except=function(t,e,i){if(e){if(!yn(e))throw new Error("Expected optional 'outerSelector' parameter to 'Series.except' to be a function.")}else e=function(a){return a};if(i){if(!yn(i))throw new Error("Expected optional 'innerSelector' parameter to 'Series.except' to be a function.")}else i=function(a){return a};var o=this;return o.filter(function(a){var s=e(a);return t.filter(function(n){return s===i(n)}).none()})},r.prototype.join=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.join' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'Series.join' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'Series.join' to be a selector function.");var a=this;return new r(function(){var s=t.groupBy(i).toObject(function(D){return i(D.first())},function(D){return D});a.getContent();var n=[];try{for(var l=fn(a),u=l.next();!u.done;u=l.next()){var h=u.value,v=e(h),d=s[v];if(d)try{for(var p=fn(d),_=p.next();!_.done;_=p.next()){var b=_.value;n.push(o(h,b))}}catch(D){A={error:D}}finally{try{_&&!_.done&&(P=p.return)&&P.call(p)}finally{if(A)throw A.error}}}}catch(D){x={error:D}}finally{try{u&&!u.done&&(E=l.return)&&E.call(l)}finally{if(x)throw x.error}}return{values:n};var x,E,A,P})},r.prototype.joinOuter=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuter' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuter' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuter' to be a selector function.");var a=this,s=a.except(t,e,i).select(function(u){return o(u,null)}).resetIndex(),n=t.except(a,i,e).select(function(u){return o(null,u)}).resetIndex(),l=a.join(t,e,i,o);return s.concat(l).concat(n).resetIndex()},r.prototype.joinOuterLeft=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuterLeft' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuterLeft' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuterLeft' to be a selector function.");var a=this,s=a.except(t,e,i).select(function(l){return o(l,null)}).resetIndex(),n=a.join(t,e,i,o);return s.concat(n).resetIndex()},r.prototype.joinOuterRight=function(t,e,i,o){if(!yn(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuterRight' to be a selector function.");if(!yn(i))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuterRight' to be a selector function.");if(!yn(o))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuterRight' to be a selector function.");var a=this,s=t.except(a,i,e).select(function(l){return o(null,l)}).resetIndex(),n=a.join(t,e,i,o);return n.concat(s).resetIndex()},r.prototype.truncateStrings=function(t){if(!oo(t))throw new Error("Expected 'maxLength' parameter to 'Series.truncateStrings' to be a number.");return this.select(function(e){return xa(e)&&e.length>t?e.substring(0,t):e})},r.prototype.round=function(t){if(t!==void 0){if(!oo(t))throw new Error("Expected 'numDecimalPlaces' parameter to 'Series.round' to be a number.")}else t=2;return this.select(function(e){return oo(e)?parseFloat(e.toFixed(t)):e})},r.prototype.insertPair=function(t){if(!Ha(t))throw new Error("Expected 'pair' parameter to 'Series.insertPair' to be an array.");if(t.length!==2)throw new Error("Expected 'pair' parameter to 'Series.insertPair' to be an array with two elements. The first element is the index, the second is the value.");return new r({pairs:[t]}).concat(this)},r.prototype.appendPair=function(t){if(!Ha(t))throw new Error("Expected 'pair' parameter to 'Series.appendPair' to be an array.");if(t.length!==2)throw new Error("Expected 'pair' parameter to 'Series.appendPair' to be an array with two elements. The first element is the index, the second is the value.");return this.concat(new r({pairs:[t]}))},r.prototype.remove=function(t){var e=this;return new r(function(){var i=e.getContent();return{pairs:new ch(i.pairs,function(o){return o[0]!==t})}})},r.prototype.fillGaps=function(t,e){if(!yn(t))throw new Error("Expected 'comparer' parameter to 'Series.fillGaps' to be a comparer function that compares two values and returns a boolean.");if(!yn(e))throw new Error("Expected 'generator' parameter to 'Series.fillGaps' to be a generator function that takes two values and returns an array of generated pairs to span the gap.");return this.rollingWindow(2).selectMany(function(i){var o=i.toPairs(),a=o[0],s=o[1];if(!t(a,s))return[a];var n=e(a,s);if(!Ha(n))throw new Error("Expected return from 'generator' parameter to 'Series.fillGaps' to be an array of pairs, instead got a "+typeof n);return[a].concat(n)}).withIndex(function(i){return i[0]}).select(function(i){return i[1]}).concat(this.tail(1))},r.prototype.defaultIfEmpty=function(t){if(this.none()){if(t instanceof r)return t;if(Ha(t))return new r(t);throw new Error("Expected 'defaultSequence' parameter to 'Series.defaultIfEmpty' to be an array or a series.")}else return this},r.prototype.detectTypes=function(){var t=this;return new vl(function(){var e=t.count(),i=t.select(function(o){var a=typeof o;return a==="object"&&Iv(o)&&(a="date"),a}).aggregate({},function(o,a){var s=o[a];return s||(s={count:0},o[a]=s),++s.count,o});return{columnNames:["Type","Frequency"],rows:Object.keys(i).map(function(o){return[o,i[o].count/e*100]})}})},r.prototype.detectValues=function(){var t=this;return new vl(function(){var e=t.count(),i=t.aggregate(new Map,function(o,a){var s=o.get(a);return s||(s={count:0,value:a},o.set(a,s)),++s.count,o});return{columnNames:["Value","Frequency"],rows:Array.from(i.keys()).map(function(o){var a=i.get(o);return[a.value,a.count/e*100]})}})},r.prototype.bucket=function(t){if(console.warn("Series.bucket is deprecated and will be removed in the future."),!oo(t))throw new Error("Expected 'numBuckets' parameter to 'Series.bucket' to be a number.");if(this.none())return new vl;var e=this,i=e.min(),o=e.max(),a=o-i,s=a/(t-1);return e.select(function(n){var l=Math.floor((n-i)/s),u=l*s+i;return{Value:n,Bucket:l,Min:u,Mid:u+s*.5,Max:u+s}}).inflate()},r.prototype.frequency=function(t){var e=this;return this.none()?new vl:new vl(function(){var i=e,o=t&&t.captureValues||!1,a=Number.MAX_VALUE,s=Number.MIN_VALUE,n=0;try{for(var l=fn(i),u=l.next();!u.done;u=l.next()){var h=u.value;a=Math.min(h,a),s=Math.max(h,s),n+=1}}catch(J){U={error:J}}finally{try{u&&!u.done&&(F=l.return)&&F.call(l)}finally{if(U)throw U.error}}var v;t&&t.lower!==void 0?v=t.lower:v=a;var d;t&&t.upper!==void 0?d=t.upper:d=s;var p=t&&t.interval,_=d-v,b;p!==void 0?b=Math.ceil(_/p):b=10,n<b&&(b=n),p===void 0&&(p=_/(b-1));for(var x=new Array(b),E=0;E<b;++E){var A=v+E*p;x[E]={lower:A,upper:A+p,count:0,proportion:0,cumulative:0},o&&(x[E].values=[])}var P={upper:v,count:0,proportion:0,cumulative:0};o&&(P.values=[]);var D={lower:d,count:0,proportion:0,cumulative:0};o&&(D.values=[]);try{for(var R=fn(i),S=R.next();!S.done;S=R.next()){var h=S.value,I=void 0;if(h<v)I=P;else if(h>d)I=D;else{var E=Math.floor((h-v)/p);I=x[E]}I.count+=1,o&&I.values.push(h)}}catch(J){V={error:J}}finally{try{S&&!S.done&&(j=R.return)&&j.call(R)}finally{if(V)throw V.error}}var T=0;P.count>0&&x.unshift(P),D.count>0&&x.push(D);try{for(var M=fn(x),z=M.next();!z.done;z=M.next()){var I=z.value;I.proportion=I.count/n,T+=I.proportion,I.cumulative=T}}catch(J){H={error:J}}finally{try{z&&!z.done&&(Y=M.return)&&Y.call(M)}finally{if(H)throw H.error}}return{values:x};var U,F,V,j,H,Y})},r.prototype.getTypeCode=function(){return"series"},r.defaultCountIterable=new kv,r.defaultEmptyIterable=new Rb,r}(),vy=function(r){m0(t,r);function t(e){for(var i=this,o=[],a=[],s=0,n=e.parent,l=[];n!==null;)l.push(n),n=n.config.parent;l.reverse();try{for(var u=fn(l),h=u.next();!h.done;h=u.next()){var v=h.value,d=v.config;o.push(t.makeSortSpec(s,d.selector,d.direction)),a.push(t.makeSortSpec(s,t.makePairsSelector(d.selector),d.direction)),++s}}catch(b){p={error:b}}finally{try{h&&!h.done&&(_=u.return)&&_.call(u)}finally{if(p)throw p.error}}return o.push(t.makeSortSpec(s,e.selector,e.direction)),a.push(t.makeSortSpec(s,t.makePairsSelector(e.selector),e.direction)),i=r.call(this,{values:new Bp(e.values,o),pairs:new Bp(e.pairs,a)})||this,i.config=e,i;var p,_}return t.makeSortSpec=function(e,i,o){return{sortLevel:e,selector:i,direction:o}},t.makePairsSelector=function(e){return function(i,o){return e(i[1],o)}},t.prototype.thenBy=function(e){return new t({values:this.config.values,pairs:this.config.pairs,selector:e,direction:Lu.Ascending,parent:this})},t.prototype.thenByDescending=function(e){return new t({values:this.config.values,pairs:this.config.pairs,selector:e,direction:Lu.Descending,parent:this})},t}(qa),Bb=function(r){m0(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getType=function(){return this._type||(this.any()?this._type=zb(this.first()):this._type="empty"),this._type},t.prototype.getLessThan=function(){switch(this.getType()){case"date":return function(e,i){return Ga(e).isBefore(i)};case"string":case"number":return function(e,i){return e<i};case"empty":return function(){return!0};default:throw new Error("No less than operation available for type: "+this.getType())}},t.prototype.getLessThanOrEqualTo=function(){var e=this;return function(i,o){return!e.getGreaterThan()(i,o)}},t.prototype.getGreaterThan=function(){switch(this.getType()){case"date":return function(e,i){return Ga(e).isAfter(i)};case"string":case"number":return function(e,i){return e>i};case"empty":return function(){return!0};default:throw new Error("No greater than operation available for type: "+this.getType())}},t}(qa);function v0(r,t){return t={exports:{}},r(t,t.exports),t.exports}var NC=function(t){return t instanceof Buffer},UC=v0(function(r){typeof Object.create=="function"?r.exports=function(e,i){e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:r.exports=function(e,i){e.super_=i;var o=function(){};o.prototype=i.prototype,e.prototype=new o,e.prototype.constructor=e}}),HC=v0(function(r){try{var t=eo;if(typeof t.inherits!="function")throw"";r.exports=t.inherits}catch{r.exports=UC}}),eo=v0(function(r,t){var e=Object.getOwnPropertyDescriptors||function(re){for(var de=Object.keys(re),me={},xe=0;xe<de.length;xe++)me[de[xe]]=Object.getOwnPropertyDescriptor(re,de[xe]);return me},i=/%[sdj%]/g;t.format=function(X){if(!R(X)){for(var re=[],de=0;de<arguments.length;de++)re.push(s(arguments[de]));return re.join(" ")}for(var de=1,me=arguments,xe=me.length,He=String(X).replace(i,function(Ee){if(Ee==="%%")return"%";if(de>=xe)return Ee;switch(Ee){case"%s":return String(me[de++]);case"%d":return Number(me[de++]);case"%j":try{return JSON.stringify(me[de++])}catch{return"[Circular]"}default:return Ee}}),Re=me[de];de<xe;Re=me[++de])A(Re)||!M(Re)?He+=" "+Re:He+=" "+s(Re);return He},t.deprecate=function(X,re){if(typeof process<"u"&&process.noDeprecation===!0)return X;if(typeof process>"u")return function(){return t.deprecate(X,re).apply(this,arguments)};var de=!1;function me(){if(!de){if(process.throwDeprecation)throw new Error(re);process.traceDeprecation?console.trace(re):console.error(re),de=!0}return X.apply(this,arguments)}return me};var o={},a;t.debuglog=function(X){if(I(a)&&(a=process.env.NODE_DEBUG||""),X=X.toUpperCase(),!o[X])if(new RegExp("\\b"+X+"\\b","i").test(a)){var re=process.pid;o[X]=function(){var de=t.format.apply(t,arguments);console.error("%s %d: %s",X,re,de)}}else o[X]=function(){};return o[X]};function s(X,re){var de={seen:[],stylize:l};return arguments.length>=3&&(de.depth=arguments[2]),arguments.length>=4&&(de.colors=arguments[3]),E(re)?de.showHidden=re:re&&t._extend(de,re),I(de.showHidden)&&(de.showHidden=!1),I(de.depth)&&(de.depth=2),I(de.colors)&&(de.colors=!1),I(de.customInspect)&&(de.customInspect=!0),de.colors&&(de.stylize=n),h(de,X,de.depth)}t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(X,re){var de=s.styles[re];return de?"\x1B["+s.colors[de][0]+"m"+X+"\x1B["+s.colors[de][1]+"m":X}function l(X,re){return X}function u(X){var re={};return X.forEach(function(de,me){re[de]=!0}),re}function h(X,re,de){if(X.customInspect&&re&&F(re.inspect)&&re.inspect!==t.inspect&&!(re.constructor&&re.constructor.prototype===re)){var me=re.inspect(de,X);return R(me)||(me=h(X,me,de)),me}var xe=v(X,re);if(xe)return xe;var He=Object.keys(re),Re=u(He);if(X.showHidden&&(He=Object.getOwnPropertyNames(re)),U(re)&&(He.indexOf("message")>=0||He.indexOf("description")>=0))return d(re);if(He.length===0){if(F(re)){var Ee=re.name?": "+re.name:"";return X.stylize("[Function"+Ee+"]","special")}if(T(re))return X.stylize(RegExp.prototype.toString.call(re),"regexp");if(z(re))return X.stylize(Date.prototype.toString.call(re),"date");if(U(re))return d(re)}var ke="",$=!1,le=["{","}"];if(x(re)&&($=!0,le=["[","]"]),F(re)){var K=re.name?": "+re.name:"";ke=" [Function"+K+"]"}if(T(re)&&(ke=" "+RegExp.prototype.toString.call(re)),z(re)&&(ke=" "+Date.prototype.toUTCString.call(re)),U(re)&&(ke=" "+d(re)),He.length===0&&(!$||re.length==0))return le[0]+ke+le[1];if(de<0)return T(re)?X.stylize(RegExp.prototype.toString.call(re),"regexp"):X.stylize("[Object]","special");X.seen.push(re);var te;return $?te=p(X,re,de,Re,He):te=He.map(function(ie){return _(X,re,de,Re,ie,$)}),X.seen.pop(),b(te,ke,le)}function v(X,re){if(I(re))return X.stylize("undefined","undefined");if(R(re)){var de="'"+JSON.stringify(re).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(de,"string")}if(D(re))return X.stylize(""+re,"number");if(E(re))return X.stylize(""+re,"boolean");if(A(re))return X.stylize("null","null")}function d(X){return"["+Error.prototype.toString.call(X)+"]"}function p(X,re,de,me,xe){for(var He=[],Re=0,Ee=re.length;Re<Ee;++Re)ne(re,String(Re))?He.push(_(X,re,de,me,String(Re),!0)):He.push("");return xe.forEach(function(ke){ke.match(/^\d+$/)||He.push(_(X,re,de,me,ke,!0))}),He}function _(X,re,de,me,xe,He){var Re,Ee,ke;if(ke=Object.getOwnPropertyDescriptor(re,xe)||{value:re[xe]},ke.get?ke.set?Ee=X.stylize("[Getter/Setter]","special"):Ee=X.stylize("[Getter]","special"):ke.set&&(Ee=X.stylize("[Setter]","special")),ne(me,xe)||(Re="["+xe+"]"),Ee||(X.seen.indexOf(ke.value)<0?(A(de)?Ee=h(X,ke.value,null):Ee=h(X,ke.value,de-1),Ee.indexOf(`
`)>-1&&(He?Ee=Ee.split(`
`).map(function($){return"  "+$}).join(`
`).substr(2):Ee=`
`+Ee.split(`
`).map(function($){return"   "+$}).join(`
`))):Ee=X.stylize("[Circular]","special")),I(Re)){if(He&&xe.match(/^\d+$/))return Ee;Re=JSON.stringify(""+xe),Re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Re=Re.substr(1,Re.length-2),Re=X.stylize(Re,"name")):(Re=Re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Re=X.stylize(Re,"string"))}return Re+": "+Ee}function b(X,re,de){var me=X.reduce(function(xe,He){return He.indexOf(`
`)>=0,xe+He.replace(/\u001b\[\d\d?m/g,"").length+1},0);return me>60?de[0]+(re===""?"":re+`
 `)+" "+X.join(`,
  `)+" "+de[1]:de[0]+re+" "+X.join(", ")+" "+de[1]}function x(X){return Array.isArray(X)}t.isArray=x;function E(X){return typeof X=="boolean"}t.isBoolean=E;function A(X){return X===null}t.isNull=A;function P(X){return X==null}t.isNullOrUndefined=P;function D(X){return typeof X=="number"}t.isNumber=D;function R(X){return typeof X=="string"}t.isString=R;function S(X){return typeof X=="symbol"}t.isSymbol=S;function I(X){return X===void 0}t.isUndefined=I;function T(X){return M(X)&&j(X)==="[object RegExp]"}t.isRegExp=T;function M(X){return typeof X=="object"&&X!==null}t.isObject=M;function z(X){return M(X)&&j(X)==="[object Date]"}t.isDate=z;function U(X){return M(X)&&(j(X)==="[object Error]"||X instanceof Error)}t.isError=U;function F(X){return typeof X=="function"}t.isFunction=F;function V(X){return X===null||typeof X=="boolean"||typeof X=="number"||typeof X=="string"||typeof X=="symbol"||typeof X>"u"}t.isPrimitive=V,t.isBuffer=NC;function j(X){return Object.prototype.toString.call(X)}function H(X){return X<10?"0"+X.toString(10):X.toString(10)}var Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function J(){var X=new Date,re=[H(X.getHours()),H(X.getMinutes()),H(X.getSeconds())].join(":");return[X.getDate(),Y[X.getMonth()],re].join(" ")}t.log=function(){console.log("%s - %s",J(),t.format.apply(t,arguments))},t.inherits=HC,t._extend=function(X,re){if(!re||!M(re))return X;for(var de=Object.keys(re),me=de.length;me--;)X[de[me]]=re[de[me]];return X};function ne(X,re){return Object.prototype.hasOwnProperty.call(X,re)}var q=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(re){if(typeof re!="function")throw new TypeError('The "original" argument must be of type Function');if(q&&re[q]){var de=re[q];if(typeof de!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(de,q,{value:de,enumerable:!1,writable:!1,configurable:!0}),de}function de(){for(var me,xe,He=new Promise(function(ke,$){me=ke,xe=$}),Re=[],Ee=0;Ee<arguments.length;Ee++)Re.push(arguments[Ee]);Re.push(function(ke,$){ke?xe(ke):me($)});try{re.apply(this,Re)}catch(ke){xe(ke)}return He}return Object.setPrototypeOf(de,Object.getPrototypeOf(re)),q&&Object.defineProperty(de,q,{value:de,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(de,e(re))},t.promisify.custom=q;function we(X,re){if(!X){var de=new Error("Promise was rejected with a falsy value");de.reason=X,X=de}return re(X)}function ee(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');function re(){for(var de=[],me=0;me<arguments.length;me++)de.push(arguments[me]);var xe=de.pop();if(typeof xe!="function")throw new TypeError("The last argument must be of type Function");var He=this,Re=function(){return xe.apply(He,arguments)};X.apply(this,de).then(function(Ee){process.nextTick(Re,null,Ee)},function(Ee){process.nextTick(we,Ee,Re)})}return Object.setPrototypeOf(re,Object.getPrototypeOf(X)),Object.defineProperties(re,e(X)),re}t.callbackify=ee});eo.format;eo.deprecate;eo.debuglog;eo.inspect;eo.isArray;eo.isBoolean;eo.isNull;eo.isNullOrUndefined;eo.isNumber;eo.isString;eo.isSymbol;eo.isUndefined;eo.isRegExp;eo.isObject;eo.isDate;eo.isError;eo.isFunction;eo.isPrimitive;eo.isBuffer;eo.log;eo.inherits;eo._extend;eo.promisify;eo.callbackify;Ga.extend(Ib);qa.concat;qa.zip;function VC(r,t){if(!oo(r))throw new Error("Expect 'start' parameter to 'dataForge.range' function to be a number.");if(!oo(t))throw new Error("Expect 'count' parameter to 'dataForge.range' function to be a number.");for(var e=[],i=0;i<t;++i)e.push(r+i);return new qa(e)}function GC(r,t){for(var e=[],i=0;i<t;++i)e.push(r);return new qa(e)}var Nb={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(r,t){(function(e,i){r.exports=i()})(tc,function e(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o=!i.document&&!!i.postMessage,a=o&&/blob:/i.test((i.location||{}).protocol),s={},n=0,l={parse:function(T,M){var z=(M=M||{}).dynamicTyping||!1;if(I(z)&&(M.dynamicTypingFunction=z,z={}),M.dynamicTyping=z,M.transform=!!I(M.transform)&&M.transform,M.worker&&l.WORKERS_SUPPORTED){var U=function(){if(!l.WORKERS_SUPPORTED)return!1;var V=(H=i.URL||i.webkitURL||null,Y=e.toString(),l.BLOB_URL||(l.BLOB_URL=H.createObjectURL(new Blob(["(",Y,")();"],{type:"text/javascript"})))),j=new i.Worker(V),H,Y;return j.onmessage=A,j.id=n++,s[j.id]=j}();return U.userStep=M.step,U.userChunk=M.chunk,U.userComplete=M.complete,U.userError=M.error,M.step=I(M.step),M.chunk=I(M.chunk),M.complete=I(M.complete),M.error=I(M.error),delete M.worker,void U.postMessage({input:T,config:M,workerId:U.id})}var F=null;return l.NODE_STREAM_INPUT,typeof T=="string"?F=M.download?new v(M):new p(M):T.readable===!0&&I(T.read)&&I(T.on)?F=new _(M):(i.File&&T instanceof File||T instanceof Object)&&(F=new d(M)),F.stream(T)},unparse:function(T,M){var z=!1,U=!0,F=",",V=`\r
`,j='"',H=j+j,Y=!1,J=null,ne=!1;(function(){if(typeof M=="object"){if(typeof M.delimiter!="string"||l.BAD_DELIMITERS.filter(function(X){return M.delimiter.indexOf(X)!==-1}).length||(F=M.delimiter),(typeof M.quotes=="boolean"||typeof M.quotes=="function"||Array.isArray(M.quotes))&&(z=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(Y=M.skipEmptyLines),typeof M.newline=="string"&&(V=M.newline),typeof M.quoteChar=="string"&&(j=M.quoteChar),typeof M.header=="boolean"&&(U=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");J=M.columns}M.escapeChar!==void 0&&(H=M.escapeChar+j),(typeof M.escapeFormulae=="boolean"||M.escapeFormulae instanceof RegExp)&&(ne=M.escapeFormulae instanceof RegExp?M.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var q=new RegExp(x(j),"g");if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return we(null,T,Y);if(typeof T[0]=="object")return we(J||Object.keys(T[0]),T,Y)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||J),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),we(T.fields||[],T.data||[],Y);throw new Error("Unable to serialize unrecognized input");function we(X,re,de){var me="";typeof X=="string"&&(X=JSON.parse(X)),typeof re=="string"&&(re=JSON.parse(re));var xe=Array.isArray(X)&&0<X.length,He=!Array.isArray(re[0]);if(xe&&U){for(var Re=0;Re<X.length;Re++)0<Re&&(me+=F),me+=ee(X[Re],Re);0<re.length&&(me+=V)}for(var Ee=0;Ee<re.length;Ee++){var ke=xe?X.length:re[Ee].length,$=!1,le=xe?Object.keys(re[Ee]).length===0:re[Ee].length===0;if(de&&!xe&&($=de==="greedy"?re[Ee].join("").trim()==="":re[Ee].length===1&&re[Ee][0].length===0),de==="greedy"&&xe){for(var K=[],te=0;te<ke;te++){var ie=He?X[te]:te;K.push(re[Ee][ie])}$=K.join("").trim()===""}if(!$){for(var ce=0;ce<ke;ce++){0<ce&&!le&&(me+=F);var ae=xe&&He?X[ce]:ce;me+=ee(re[Ee][ae],ce)}Ee<re.length-1&&(!de||0<ke&&!le)&&(me+=V)}}return me}function ee(X,re){if(X==null)return"";if(X.constructor===Date)return JSON.stringify(X).slice(1,25);var de=!1;ne&&typeof X=="string"&&ne.test(X)&&(X="'"+X,de=!0);var me=X.toString().replace(q,H);return(de=de||z===!0||typeof z=="function"&&z(X,re)||Array.isArray(z)&&z[re]||function(xe,He){for(var Re=0;Re<He.length;Re++)if(-1<xe.indexOf(He[Re]))return!0;return!1}(me,l.BAD_DELIMITERS)||-1<me.indexOf(F)||me.charAt(0)===" "||me.charAt(me.length-1)===" ")?j+me+j:me}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!o&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=E,l.ParserHandle=b,l.NetworkStreamer=v,l.FileStreamer=d,l.StringStreamer=p,l.ReadableStreamStreamer=_,i.jQuery){var u=i.jQuery;u.fn.parse=function(T){var M=T.config||{},z=[];return this.each(function(V){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)z.push({file:this.files[j],inputElem:this,instanceConfig:u.extend({},M)})}),U(),this;function U(){if(z.length!==0){var V,j,H,Y,J=z[0];if(I(T.before)){var ne=T.before(J.file,J.inputElem);if(typeof ne=="object"){if(ne.action==="abort")return V="AbortError",j=J.file,H=J.inputElem,Y=ne.reason,void(I(T.error)&&T.error({name:V},j,H,Y));if(ne.action==="skip")return void F();typeof ne.config=="object"&&(J.instanceConfig=u.extend(J.instanceConfig,ne.config))}else if(ne==="skip")return void F()}var q=J.instanceConfig.complete;J.instanceConfig.complete=function(we){I(q)&&q(we,J.file,J.inputElem),F()},l.parse(J.file,J.instanceConfig)}else I(T.complete)&&T.complete()}function F(){z.splice(0,1),U()}}}function h(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(M){var z=R(M);z.chunkSize=parseInt(z.chunkSize),M.step||M.chunk||(z.chunkSize=null),this._handle=new b(z),(this._handle.streamer=this)._config=z}.call(this,T),this.parseChunk=function(M,z){if(this.isFirstChunk&&I(this._config.beforeFirstChunk)){var U=this._config.beforeFirstChunk(M);U!==void 0&&(M=U)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+M;this._partialLine="";var V=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var j=V.meta.cursor;this._finished||(this._partialLine=F.substring(j-this._baseIndex),this._baseIndex=j),V&&V.data&&(this._rowCount+=V.data.length);var H=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)i.postMessage({results:V,workerId:l.WORKER_ID,finished:H});else if(I(this._config.chunk)&&!z){if(this._config.chunk(V,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);V=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(V.data),this._completeResults.errors=this._completeResults.errors.concat(V.errors),this._completeResults.meta=V.meta),this._completed||!H||!I(this._config.complete)||V&&V.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||V&&V.meta.paused||this._nextChunk(),V}this._halted=!0},this._sendError=function(M){I(this._config.error)?this._config.error(M):a&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:M,finished:!1})}}function v(T){var M;(T=T||{}).chunkSize||(T.chunkSize=l.RemoteChunkSize),h.call(this,T),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),o||(M.onload=S(this._chunkLoaded,this),M.onerror=S(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var z=this._config.downloadRequestHeaders;for(var U in z)M.setRequestHeader(U,z[U])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;M.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{M.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}o&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:M.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(z){var U=z.getResponseHeader("Content-Range");return U===null?-1:parseInt(U.substring(U.lastIndexOf("/")+1))}(M),this.parseChunk(M.responseText)))},this._chunkError=function(z){var U=M.statusText||z;this._sendError(new Error(U))}}function d(T){var M,z;(T=T||{}).chunkSize||(T.chunkSize=l.LocalChunkSize),h.call(this,T);var U=typeof FileReader<"u";this.stream=function(F){this._input=F,z=F.slice||F.webkitSlice||F.mozSlice,U?((M=new FileReader).onload=S(this._chunkLoaded,this),M.onerror=S(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var V=Math.min(this._start+this._config.chunkSize,this._input.size);F=z.call(F,this._start,V)}var j=M.readAsText(F,this._config.encoding);U||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(M.error)}}function p(T){var M;h.call(this,T=T||{}),this.stream=function(z){return M=z,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var z,U=this._config.chunkSize;return U?(z=M.substring(0,U),M=M.substring(U)):(z=M,M=""),this._finished=!M,this.parseChunk(z)}}}function _(T){h.call(this,T=T||{});var M=[],z=!0,U=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){U&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):z=!0},this._streamData=S(function(F){try{M.push(typeof F=="string"?F:F.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(V){this._streamError(V)}},this),this._streamError=S(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=S(function(){this._streamCleanUp(),U=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function b(T){var M,z,U,F=Math.pow(2,53),V=-F,j=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,Y=this,J=0,ne=0,q=!1,we=!1,ee=[],X={data:[],errors:[],meta:{}};if(I(T.step)){var re=T.step;T.step=function(Ee){if(X=Ee,xe())me();else{if(me(),X.data.length===0)return;J+=Ee.data.length,T.preview&&J>T.preview?z.abort():(X.data=X.data[0],re(X,Y))}}}function de(Ee){return T.skipEmptyLines==="greedy"?Ee.join("").trim()==="":Ee.length===1&&Ee[0].length===0}function me(){return X&&U&&(Re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),U=!1),T.skipEmptyLines&&(X.data=X.data.filter(function(Ee){return!de(Ee)})),xe()&&function(){if(!X)return;function Ee($,le){I(T.transformHeader)&&($=T.transformHeader($,le)),ee.push($)}if(Array.isArray(X.data[0])){for(var ke=0;xe()&&ke<X.data.length;ke++)X.data[ke].forEach(Ee);X.data.splice(0,1)}else X.data.forEach(Ee)}(),function(){if(!X||!T.header&&!T.dynamicTyping&&!T.transform)return X;function Ee($,le){var K,te=T.header?{}:[];for(K=0;K<$.length;K++){var ie=K,ce=$[K];T.header&&(ie=K>=ee.length?"__parsed_extra":ee[K]),T.transform&&(ce=T.transform(ce,ie)),ce=He(ie,ce),ie==="__parsed_extra"?(te[ie]=te[ie]||[],te[ie].push(ce)):te[ie]=ce}return T.header&&(K>ee.length?Re("FieldMismatch","TooManyFields","Too many fields: expected "+ee.length+" fields but parsed "+K,ne+le):K<ee.length&&Re("FieldMismatch","TooFewFields","Too few fields: expected "+ee.length+" fields but parsed "+K,ne+le)),te}var ke=1;return!X.data.length||Array.isArray(X.data[0])?(X.data=X.data.map(Ee),ke=X.data.length):X.data=Ee(X.data,0),T.header&&X.meta&&(X.meta.fields=ee),ne+=ke,X}()}function xe(){return T.header&&ee.length===0}function He(Ee,ke){return $=Ee,T.dynamicTypingFunction&&T.dynamicTyping[$]===void 0&&(T.dynamicTyping[$]=T.dynamicTypingFunction($)),(T.dynamicTyping[$]||T.dynamicTyping)===!0?ke==="true"||ke==="TRUE"||ke!=="false"&&ke!=="FALSE"&&(function(le){if(j.test(le)){var K=parseFloat(le);if(V<K&&K<F)return!0}return!1}(ke)?parseFloat(ke):H.test(ke)?new Date(ke):ke===""?null:ke):ke;var $}function Re(Ee,ke,$,le){var K={type:Ee,code:ke,message:$};le!==void 0&&(K.row=le),X.errors.push(K)}this.parse=function(Ee,ke,$){var le=T.quoteChar||'"';if(T.newline||(T.newline=function(ie,ce){ie=ie.substring(0,1048576);var ae=new RegExp(x(ce)+"([^]*?)"+x(ce),"gm"),ve=(ie=ie.replace(ae,"")).split("\r"),pe=ie.split(`
`),he=1<pe.length&&pe[0].length<ve[0].length;if(ve.length===1||he)return`
`;for(var ye=0,_e=0;_e<ve.length;_e++)ve[_e][0]===`
`&&ye++;return ye>=ve.length/2?`\r
`:"\r"}(Ee,le)),U=!1,T.delimiter)I(T.delimiter)&&(T.delimiter=T.delimiter(Ee),X.meta.delimiter=T.delimiter);else{var K=function(ie,ce,ae,ve,pe){var he,ye,_e,je;pe=pe||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Je=0;Je<pe.length;Je++){var nt=pe[Je],at=0,Fe=0,Ie=0;_e=void 0;for(var Ke=new E({comments:ve,delimiter:nt,newline:ce,preview:10}).parse(ie),Qe=0;Qe<Ke.data.length;Qe++)if(ae&&de(Ke.data[Qe]))Ie++;else{var it=Ke.data[Qe].length;Fe+=it,_e!==void 0?0<it&&(at+=Math.abs(it-_e),_e=it):_e=it}0<Ke.data.length&&(Fe/=Ke.data.length-Ie),(ye===void 0||at<=ye)&&(je===void 0||je<Fe)&&1.99<Fe&&(ye=at,he=nt,je=Fe)}return{successful:!!(T.delimiter=he),bestDelimiter:he}}(Ee,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess);K.successful?T.delimiter=K.bestDelimiter:(U=!0,T.delimiter=l.DefaultDelimiter),X.meta.delimiter=T.delimiter}var te=R(T);return T.preview&&T.header&&te.preview++,M=Ee,z=new E(te),X=z.parse(M,ke,$),me(),q?{meta:{paused:!0}}:X||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,z.abort(),M=I(T.chunk)?"":M.substring(z.getCharIndex())},this.resume=function(){Y.streamer._halted?(q=!1,Y.streamer.parseChunk(M,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return we},this.abort=function(){we=!0,z.abort(),X.meta.aborted=!0,I(T.complete)&&T.complete(X),M=""}}function x(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(T){var M,z=(T=T||{}).delimiter,U=T.newline,F=T.comments,V=T.step,j=T.preview,H=T.fastMode,Y=M=T.quoteChar===void 0||T.quoteChar===null?'"':T.quoteChar;if(T.escapeChar!==void 0&&(Y=T.escapeChar),(typeof z!="string"||-1<l.BAD_DELIMITERS.indexOf(z))&&(z=","),F===z)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<l.BAD_DELIMITERS.indexOf(F))&&(F=!1),U!==`
`&&U!=="\r"&&U!==`\r
`&&(U=`
`);var J=0,ne=!1;this.parse=function(q,we,ee){if(typeof q!="string")throw new Error("Input must be a string");var X=q.length,re=z.length,de=U.length,me=F.length,xe=I(V),He=[],Re=[],Ee=[],ke=J=0;if(!q)return je();if(H||H!==!1&&q.indexOf(M)===-1){for(var $=q.split(U),le=0;le<$.length;le++){if(Ee=$[le],J+=Ee.length,le!==$.length-1)J+=U.length;else if(ee)return je();if(!F||Ee.substring(0,me)!==F){if(xe){if(He=[],pe(Ee.split(z)),Je(),ne)return je()}else pe(Ee.split(z));if(j&&j<=le)return He=He.slice(0,j),je(!0)}}return je()}for(var K=q.indexOf(z,J),te=q.indexOf(U,J),ie=new RegExp(x(Y)+x(M),"g"),ce=q.indexOf(M,J);;)if(q[J]!==M)if(F&&Ee.length===0&&q.substring(J,J+me)===F){if(te===-1)return je();J=te+de,te=q.indexOf(U,J),K=q.indexOf(z,J)}else if(K!==-1&&(K<te||te===-1))Ee.push(q.substring(J,K)),J=K+re,K=q.indexOf(z,J);else{if(te===-1)break;if(Ee.push(q.substring(J,te)),_e(te+de),xe&&(Je(),ne))return je();if(j&&He.length>=j)return je(!0)}else for(ce=J,J++;;){if((ce=q.indexOf(M,ce+1))===-1)return ee||Re.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:He.length,index:J}),ye();if(ce===X-1)return ye(q.substring(J,ce).replace(ie,M));if(M!==Y||q[ce+1]!==Y){if(M===Y||ce===0||q[ce-1]!==Y){K!==-1&&K<ce+1&&(K=q.indexOf(z,ce+1)),te!==-1&&te<ce+1&&(te=q.indexOf(U,ce+1));var ae=he(te===-1?K:Math.min(K,te));if(q.substr(ce+1+ae,re)===z){Ee.push(q.substring(J,ce).replace(ie,M)),q[J=ce+1+ae+re]!==M&&(ce=q.indexOf(M,J)),K=q.indexOf(z,J),te=q.indexOf(U,J);break}var ve=he(te);if(q.substring(ce+1+ve,ce+1+ve+de)===U){if(Ee.push(q.substring(J,ce).replace(ie,M)),_e(ce+1+ve+de),K=q.indexOf(z,J),ce=q.indexOf(M,J),xe&&(Je(),ne))return je();if(j&&He.length>=j)return je(!0);break}Re.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:He.length,index:J}),ce++}}else ce++}return ye();function pe(nt){He.push(nt),ke=J}function he(nt){var at=0;if(nt!==-1){var Fe=q.substring(ce+1,nt);Fe&&Fe.trim()===""&&(at=Fe.length)}return at}function ye(nt){return ee||(nt===void 0&&(nt=q.substring(J)),Ee.push(nt),J=X,pe(Ee),xe&&Je()),je()}function _e(nt){J=nt,pe(Ee),Ee=[],te=q.indexOf(U,J)}function je(nt){return{data:He,errors:Re,meta:{delimiter:z,linebreak:U,aborted:ne,truncated:!!nt,cursor:ke+(we||0)}}}function Je(){V(je()),He=[],Re=[]}},this.abort=function(){ne=!0},this.getCharIndex=function(){return J}}function A(T){var M=T.data,z=s[M.workerId],U=!1;if(M.error)z.userError(M.error,M.file);else if(M.results&&M.results.data){var F={abort:function(){U=!0,P(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:D,resume:D};if(I(z.userStep)){for(var V=0;V<M.results.data.length&&(z.userStep({data:M.results.data[V],errors:M.results.errors,meta:M.results.meta},F),!U);V++);delete M.results}else I(z.userChunk)&&(z.userChunk(M.results,F,M.file),delete M.results)}M.finished&&!U&&P(M.workerId,M.results)}function P(T,M){var z=s[T];I(z.userComplete)&&z.userComplete(M),z.terminate(),delete s[T]}function D(){throw new Error("Not implemented.")}function R(T){if(typeof T!="object"||T===null)return T;var M=Array.isArray(T)?[]:{};for(var z in T)M[z]=R(T[z]);return M}function S(T,M){return function(){T.apply(M,arguments)}}function I(T){return typeof T=="function"}return a&&(i.onmessage=function(T){var M=T.data;if(l.WORKER_ID===void 0&&M&&(l.WORKER_ID=M.workerId),typeof M.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(M.input,M.config),finished:!0});else if(i.File&&M.input instanceof File||M.input instanceof Object){var z=l.parse(M.input,M.config);z&&i.postMessage({workerId:l.WORKER_ID,results:z,finished:!0})}}),(v.prototype=Object.create(h.prototype)).constructor=v,(d.prototype=Object.create(h.prototype)).constructor=d,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(h.prototype)).constructor=_,l})})(Nb);const Ym=Nb.exports,ZC={A:0,ACDT:630,ACST:570,ACT:-300,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,AMST:-180,AMT:-240,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:-60,AZT:240,B:120,BDT:480,BIOT:360,BIT:-720,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,C:180,CAT:120,CCT:390,CDT:-300,CEDT:120,CEST:120,CET:60,CHADT:825,CHAST:765,CHOT:480,ChST:600,CHUT:600,CIST:-480,CIT:480,CKT:-600,CLST:-180,CLT:-240,COST:-240,COT:-300,CST:-360,CT:480,CVT:-60,CWST:525,CXT:420,D:240,DAVT:420,DDUT:600,DFT:60,E:300,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEDT:180,EEST:180,EET:120,EGST:0,EGT:-60,EIT:540,EST:-300,F:360,FET:180,FJT:720,FKST:-180,FKT:-240,FNT:-120,G:420,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GIT:-540,GMT:0,GST:-120,GYT:-240,H:480,HADT:-540,HAEC:120,HAST:-600,HKT:480,HMT:300,HOVT:420,HST:-600,I:540,ICT:420,IDT:180,IOT:180,IRDT:270,IRKT:480,IRST:210,IST:330,JST:540,K:600,KGT:360,KOST:660,KRAT:420,KST:540,L:660,LHST:630,LINT:840,M:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MET:60,MEST:120,MHT:720,MIST:660,MIT:-510,MMT:390,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,N:-60,NCT:660,NDT:-90,NFT:690,NPT:345,NST:-150,NT:-150,NUT:-660,NZDT:780,NZST:720,O:-120,OMST:360,ORAT:300,P:-180,PDT:-420,PET:-300,PETT:720,PGT:600,PHOT:780,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PYST:-180,PYT:-240,R:-300,RET:240,ROTT:-180,S:-360,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SLST:330,SRET:660,SRT:-180,SST:480,SYOT:180,T:-420,TAHT:-600,THA:420,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TOT:780,TVT:720,U:-480,UCT:0,ULAT:480,USZ1:120,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,V:-540,VLAT:600,VOLT:240,VOST:360,VUT:660,W:-600,WAKT:720,WAST:120,WAT:60,WEDT:60,WEST:60,WET:0,WIT:420,WST:480,X:-660,Y:-720,YAKT:540,YEKT:300,Z:0};var zf=function(){function r(i){return Object.prototype.toString.call(i).slice(8,-1).toLowerCase()}function t(i,o){for(var a=[];o>0;a[--o]=i);return a.join("")}var e=function(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};return e.object_stringify=function(i,o,a,s){var n="";if(i!=null)switch(typeof i){case"function":return"[Function"+(i.name?": "+i.name:"")+"]";case"object":if(i instanceof Error)return"["+i.toString()+"]";if(o>=a)return"[Object]";if(s&&(s=s.slice(0),s.push(i)),i.length!=null){n+="[";var l=[];for(var u in i)s&&s.indexOf(i[u])>=0?l.push("[Circular]"):l.push(e.object_stringify(i[u],o+1,a,s));n+=l.join(", ")+"]"}else{if("getMonth"in i)return"Date("+i+")";n+="{";var l=[];for(var h in i)i.hasOwnProperty(h)&&(s&&s.indexOf(i[h])>=0?l.push(h+": [Circular]"):l.push(h+": "+e.object_stringify(i[h],o+1,a,s)));n+=l.join(", ")+"}"}return n;case"string":return'"'+i+'"'}return""+i},e.format=function(i,o){var a=1,s=i.length,n="",l,u=[],h,v,d,p,_,b;for(h=0;h<s;h++)if(n=r(i[h]),n==="string")u.push(i[h]);else if(n==="array"){if(d=i[h],d[2])for(l=o[a],v=0;v<d[2].length;v++){if(!l.hasOwnProperty(d[2][v]))throw new Error(zf('[sprintf] property "%s" does not exist',d[2][v]));l=l[d[2][v]]}else d[1]?l=o[d[1]]:l=o[a++];if(/[^sO]/.test(d[8])&&r(l)!="number")throw new Error(zf('[sprintf] expecting number but found %s "'+l+'"',r(l)));switch(d[8]){case"b":l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":l=parseInt(l,10);break;case"e":l=d[7]?l.toExponential(d[7]):l.toExponential();break;case"f":l=d[7]?parseFloat(l).toFixed(d[7]):parseFloat(l);break;case"O":l=e.object_stringify(l,0,parseInt(d[7])||5);break;case"o":l=l.toString(8);break;case"s":l=(l=String(l))&&d[7]?l.substring(0,d[7]):l;break;case"u":l=Math.abs(l);break;case"x":l=l.toString(16);break;case"X":l=l.toString(16).toUpperCase();break}l=/[def]/.test(d[8])&&d[3]&&l>=0?"+"+l:l,_=d[4]?d[4]=="0"?"0":d[4].charAt(1):" ",b=d[6]-String(l).length,p=d[6]?t(_,b):"",u.push(d[5]?l+p:p+l)}return u.join("")},e.cache={},e.parse=function(i){for(var o=i,a=[],s=[],n=0;o;){if((a=/^[^\x25]+/.exec(o))!==null)s.push(a[0]);else if((a=/^\x25{2}/.exec(o))!==null)s.push("%");else if((a=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(o))!==null){if(a[2]){n|=1;var l=[],u=a[2],h=[];if((h=/^([a-z_][a-z_\d]*)/i.exec(u))!==null)for(l.push(h[1]);(u=u.substring(h[0].length))!=="";)if((h=/^\.([a-z_][a-z_\d]*)/i.exec(u))!==null)l.push(h[1]);else if((h=/^\[(\d+)\]/.exec(u))!==null)l.push(h[1]);else throw new Error("[sprintf] "+u);else throw new Error("[sprintf] "+u);a[2]=l}else n|=2;if(n===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push(a)}else throw new Error("[sprintf] "+o);o=o.substring(a[0].length)}return s},e}(),WC=function(r,t){var e=t.slice();return e.unshift(r),zf.apply(null,e)},jC=zf;zf.sprintf=zf;zf.vsprintf=WC;const YC=r=>id(Math.abs(r-1)),XC=xd().range([.2,1]),KC=r=>QS(XC(r)),Ul={datainfo:"Last Measured",temp:"Temperature",flow:"Gage Flow",height:"Gage Height",wet:"Ground Condition is Wet",do:"Dissolved Oxygen",doContactTank:"Dissolved Oxygen - Contact Tank",doOutfall:"Dissolved Oxygen - Outfall",bod:"Biological Oxygen Demand",bodPercent:"Biological Oxygen Demand",ecoli:"E. Coli",fishIbi:"Fish IBI",invertMacro:"Invertebrate Macro Score",invertIndiana:"Invertebrate Indiana Score",invertMichigan:"Invertebrate Michigan Score",chlorides:"Chlorides",nitrates:"Nitrates",phosphorus:"Phosphorus",ph:"pH",spc:"Specific Conductance",tds:"Total Dissolved Solids",tss:"Total Suspended Solids",turbidity:"Turbidity"},g0={bod:ao([0,10],ry).clamp(!0),bodPercent:ao([0,100],Wd).clamp(!0),chlorides:ao([0,600],Zd).clamp(!0),datainfo:ao([365,0],KC).clamp(!0),do:ao([0,100],Zd).clamp(!0),doContactTank:ao([0,100],Zd).clamp(!0),doOutfall:ao([0,100],Zd).clamp(!0),ecoli:ao([0,1e3],ZS).clamp(!0),fishIbi:ao([0,60],id).clamp(!0),flow:ao([0,8e3],BS).clamp(!0),height:ao([0,30],ry).clamp(!0),invertIndiana:ao([0,60],id).clamp(!0),invertMacro:ao([-10,60],id).clamp(!0),invertMichigan:ao([-10,10],id).clamp(!0),nitrates:ao([0,15],XS).clamp(!0),ph:ao([5.5,12.5],$S).clamp(!0),phosphorus:ao([0,.5],Wd).clamp(!0),spc:ao([0,2500],JS).clamp(!0),tds:ao([0,800],US).clamp(!0),temp:ao([0,35],YC).clamp(!0),tss:ao([0,500],VS).clamp(!0),turbidity:ao([0,100],Wd).clamp(!0),wet:ao([0,1],Wd).clamp(!0)},Ub={bod:"mg/L",bodPercent:"%",chlorides:"mg/L",datainfo:"days ago",do:"mg/L",doContactTank:"mg/L",doOutfall:"mg/L",ecoli:"CFU",flow:"ft^3/s",height:"ft",nitrates:"mg/L",ph:"",phosphorus:"mg/L",spc:"uS/cm",tds:"mg/L",temp:"C",tss:"mg/L",turbidity:"NTU"},JC={ecoli:"%d",flow:"%d",nitrates:"%.2f",ph:"%.2f",phosphorus:"%.2f",spc:"%d",tds:"%d",turbidity:"%d",fishIbi:"%d",invertMacro:"%d",invertIndiana:"%d",invertMichigan:"%d"},Hb=[9,20];function gy(r,t){let e=JC[r];return e||(e="%.1f"),jC(e,t)}function $C(r){const t=Ul[r]||"",e=Ub[r]||"";return e.length>0?t+` (${e})`:t}function yy(r,t){const i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),o=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());return(i-o)/864e5}function QC(){return Date.now()-2592e6}const qC=(r,t)=>r.reduce((e,i)=>{var o;return(e[o=t(i)]||(e[o]=[])).push(i),e},{});function Vb(r){return r.values().next().value}function e5(r){let t=[],e=[];return r.split(`
`).map(i=>{i.indexOf("#")!=0?e.push(i):(e.length>0&&t.push(e.join(`
`)),e=[])}),e.length>0&&t.push(e.join(`
`)),t}function _y(r,t){var e=t.getDay(),i=t.getDate(),o=t.getMonth(),a=t.getFullYear(),s=t.getHours(),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"],u=[0,31,59,90,120,151,181,212,243,273,304,334],h=function(){return a%4===0&&a%100!==0||a%400===0},v=function(){var p=new Date(t);return p.setDate(i-(e+6)%7+3),p},d=function(p,_){return(Math.pow(10,_)+p+"").slice(1)};return r.replace(/%[a-z]/gi,function(p){return({"%a":n[e].slice(0,3),"%A":n[e],"%b":l[o].slice(0,3),"%B":l[o],"%c":t.toUTCString(),"%C":Math.floor(a/100),"%d":d(i,2),"%e":i,"%F":t.toISOString().slice(0,10),"%G":v().getFullYear(),"%g":(v().getFullYear()+"").slice(2),"%H":d(s,2),"%I":d((s+11)%12+1,2),"%j":d(u[o]+i+(o>1&&h()?1:0),3),"%k":s,"%l":(s+11)%12+1,"%m":d(o+1,2),"%n":o+1,"%M":d(t.getMinutes(),2),"%p":s<12?"AM":"PM","%P":s<12?"am":"pm","%s":Math.round(t.getTime()/1e3),"%S":d(t.getSeconds(),2),"%u":e||7,"%V":function(){var _=v(),b=_.valueOf();_.setMonth(0,1);var x=_.getDay();return x!==4&&_.setMonth(0,1+(4-x+7)%7),d(1+Math.ceil((b-_.getTime())/6048e5),2)}(),"%w":e,"%x":t.toLocaleDateString(),"%X":t.toLocaleTimeString(),"%y":(a+"").slice(2),"%Y":a,"%z":t.toTimeString().replace(/.+GMT([+-]\d+).+/,"$1"),"%Z":t.toTimeString().replace(/.+\((.+?)\)$/,"$1")}[p]||"")+""||p})}let qs={};window.dframes=qs;const Gb=r=>r.replace(/-\d+$/,"");function t5(r){return Array.from(new Set(r.map(t=>Gb(t.siteId))))}class r5{registerSite(t){Rg(t),qs[t.id]=new vl({columnNames:["date"],rows:[]}).setIndex("date")}sortDataFrames(){for(const t of Object.keys(qs))qs[t]=qs[t].orderBy(e=>e.date).bake()}updateSitesDataInfo(){this.sortDataFrames();let t=new Date(Date.now());for(const e of Object.keys(qs)){let i=rc(e);const o=qs[e].getIndex();if(i.dataset!=="usgs"&&o.count()>1){i.observationDaysSinceLast=yy(new Date(o.last()),t);const s=yy(new Date(o.first()),new Date(o.last()))/o.count();s<=1?i.observationFrequency="RT":s<7?i.observationFrequency="D":s<30?i.observationFrequency="W":s<60?i.observationFrequency="M":i.observationFrequency="Y",Rg(i)}}}getValue(t,e){var i;if(e==="datainfo")return(i=rc(t))==null?void 0:i.observationDaysSinceLast;try{return qs[t].getSeries(e).bake().last()}catch{return}}getValueDate(t,e){if(e==="datainfo")return Date.now();try{return qs[t].getSeries(e).bake().getIndex().last()}catch{return}}getSitesTimeseries(t,e){var i;if(t.size==0)return new qa;{const o=Vb(t);return(i=qs[o])==null?void 0:i.getSeries(e)}}getDframe(t){return qs[t]}importSJRBCSites(t){let e=Ym.parse(t,{delimiter:",",comments:"#",header:!0,skipEmptyLines:"greedy"}).data;return e.forEach((i,o)=>{let a={};a.id=i.siteId,a.dataset=Gb(a.id),a.lat=parseFloat(i.lat),a.lon=parseFloat(i.lon),a.name=i.name,a.observationFrequency="Y",a.observationDaysSinceLast=365,!a.id||!a.lat||!a.lon?console.log(`skip bad sites row #${o+1}`,i):this.registerSite(a)}),t5(e)}async processSJRBCSeriesData(t){let e=Ym.parse(t,{delimiter:",",comments:"#",header:!0,skipEmptyLines:"greedy"}).data;e.forEach(o=>{o.date=Date.parse(o.date)||Date.parse(o.year),Object.keys(o).forEach(a=>{if(a!=="siteId"&&a!=="date"&&!Ul[a])delete o[a];else{const s=o[a];s==="NA"||s===""||s===void 0?delete o[a]:Ul[a]&&(o[a]=parseFloat(o[a]))}})});const i=qC(e,o=>o.siteId);for(const[o,a]of Object.entries(i)){let s=new vl(a).setIndex("date");qs[o]=qs[o].concat(s).bake()}}importUSGSSites(t){console.log("process usgs sites");const e=[];t.value.timeSeries.forEach(i=>{let o={};const a=i.sourceInfo.siteCode[0].value;if(o.id=`usgs-${a}`,o.dataset="usgs",!e.includes(o.id)){e.push(o.id);const s=i.sourceInfo.geoLocation.geogLocation;o.lat=parseFloat(s.latitude),o.lon=parseFloat(s.longitude),o.name=i.sourceInfo.siteName,o.observationFrequency="RT",o.observationDaysSinceLast=0,this.registerSite(o)}})}async processUSGSSeriesData(t){e5(t).forEach(e=>{this.processUSGSSeriesDataSection(e)}),this.sortDataFrames()}processUSGSSeriesDataSection(t){let e=Ym.parse(t,{delimiter:"	",comments:"#"}).data;const i=0,o=1,a=2;let s,n,l;for(let d in e[0]){let p=e[0][d];p=="tz_cd"?s=d:/\d+_00060$/.test(p)||/\d+_00060_00003$/.test(p)?n=d:/\d+_00065$/.test(p)&&(l=d)}const u=[];let h;e.forEach(d=>{if(d[i]=="USGS"&&(h="usgs-"+d[o],rc(h))){let p="EST";s&&(p=ZC[d[s]]);let _=d[a]+p,b={};b.date=Date.parse(_),n&&(b.flow=parseFloat(d[n])||0),l&&(b.height=parseFloat(d[l])||0),(n||l)&&u.push(b)}});let v=new vl(u).setIndex("date");qs[h]=qs[h].concat(v).bake()}}const gl=new r5;function n5(r,t){const e=gl.getValue(r,t);if(e!==void 0){const i=g0[t];try{return vf(i(e)).formatHex()}catch(o){console.log(r,t,e,i(e)),console.log(o)}}}function i5(r,t){const e=gl.getValue(r,t);if(e!==void 0)try{return g0[t].copy().range(Hb)(e)}catch(i){console.log(r,t,e),console.log(i)}}function a5(r){const t=nE(r),e=[(t[0]+270)%360,100-t[1],100-t[2]];return`hsl(${e[0]}, ${e[1]}%, ${e[2]}%)`}function by(r){let t,e,i,o,a,s,n=r[4].has(r[0]),l,u,h=n&&xy(r);return{c(){t=su("svg"),e=su("defs"),i=su("pattern"),o=su("line"),s=su("circle"),h&&h.c(),nn(o,"x1","0"),nn(o,"y","0"),nn(o,"x2","0"),nn(o,"y2","5.5"),nn(o,"stroke",r[3]),nn(o,"stroke-width","5"),nn(i,"id",a="stripes-"+r[0]),nn(i,"patternUnits","userSpaceOnUse"),nn(i,"width","5.5"),nn(i,"height","5.5"),nn(i,"patternTransform","rotate(45)"),Do(s,"cursor","pointer"),Do(s,"pointer-events","visible"),nn(s,"cy","20"),nn(s,"cx","20"),nn(s,"r",r[2]),nn(s,"fill",r[1]),nn(s,"stroke","black"),nn(s,"stroke-width","2"),nn(t,"xmlns","http://www.w3.org/2000/svg"),nn(t,"width","40px"),nn(t,"height","40px"),Do(t,"overflow","visible"),Do(t,"pointer-events","none")},m(v,d){Er(v,t,d),En(t,e),En(e,i),En(i,o),En(t,s),h&&h.m(t,null),l||(u=si(s,"click",Uv(r[10])),l=!0)},p(v,d){d&8&&nn(o,"stroke",v[3]),d&1&&a!==(a="stripes-"+v[0])&&nn(i,"id",a),d&4&&nn(s,"r",v[2]),d&2&&nn(s,"fill",v[1]),d&17&&(n=v[4].has(v[0])),n?h?h.p(v,d):(h=xy(v),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},d(v){v&&Sr(t),h&&h.d(),l=!1,u()}}}function xy(r){let t,e,i,o,a,s;return{c(){t=su("circle"),i=su("circle"),nn(t,"cy","20"),nn(t,"cx","20"),nn(t,"r",e=r[2]+1),nn(t,"stroke","yellow"),nn(t,"fill","none"),nn(t,"stroke-width","4"),nn(t,"stroke-dasharray","2"),Do(i,"cursor","pointer"),nn(i,"cy","20"),nn(i,"cx","20"),nn(i,"r",r[2]),nn(i,"fill",o="url(#stripes-"+r[0]+")"),nn(i,"opacity","1")},m(n,l){Er(n,t,l),Er(n,i,l),a||(s=si(i,"click",Uv(r[11])),a=!0)},p(n,l){l&4&&e!==(e=n[2]+1)&&nn(t,"r",e),l&4&&nn(i,"r",n[2]),l&1&&o!==(o="url(#stripes-"+n[0]+")")&&nn(i,"fill",o)},d(n){n&&Sr(t),n&&Sr(i),a=!1,s()}}}function o5(r){let t,e,i,o,a=r[1]&&by(r);return{c(){t=_n("div"),e=_n("div"),a&&a.c(),Do(e,"overflow","visible"),Do(e,"pointer-events","none"),nn(t,"id","markers")},m(s,n){Er(s,t,n),En(t,e),a&&a.m(e,null),i||(o=ri(r[5].call(null,e)),i=!0)},p(s,[n]){s[1]?a?a.p(s,n):(a=by(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:qi,o:qi,d(s){s&&Sr(t),a&&a.d(),i=!1,o()}}}function s5(r,t,e){let i,o;Ei(r,mh,b=>e(9,i=b)),Ei(r,Ff,b=>e(4,o=b));let{map:a}=t,{id:s}=t,{lat:n,lon:l}=t,u,h,v;function d(b){const x=Wr.exports.divIcon({html:b,iconAnchor:[20,20],className:"river-divicon"}),E=Wr.exports.marker([n,l],{icon:x});return E.addTo(a),{destroy(){a.removeLayer(E)}}}const p=()=>{Pg(s)},_=()=>{Pg(s)};return r.$$set=b=>{"map"in b&&e(6,a=b.map),"id"in b&&e(0,s=b.id),"lat"in b&&e(7,n=b.lat),"lon"in b&&e(8,l=b.lon)},r.$$.update=()=>{r.$$.dirty&515&&(e(1,h=n5(s,i)),e(2,u=i5(s,i)),h&&e(3,v=a5(h)))},[s,h,u,v,o,d,a,n,l,i,p,_]}class l5 extends ki{constructor(t){super(),Mi(this,t,s5,o5,_i,{map:6,id:0,lat:7,lon:8})}}function wy(r,t,e){const i=r.slice();return i[2]=t[e],i}function Ty(r){let t,e;return t=new l5({props:{map:r[0],id:r[2].id,lat:r[2].lat,lon:r[2].lon}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&1&&(a.map=i[0]),o&2&&(a.id=i[2].id),o&2&&(a.lat=i[2].lat),o&2&&(a.lon=i[2].lon),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function u5(r){let t,e,i=Object.values(r[1]),o=[];for(let s=0;s<i.length;s+=1)o[s]=Ty(wy(r,i,s));const a=s=>lr(o[s],1,1,()=>{o[s]=null});return{c(){t=_n("div");for(let s=0;s<o.length;s+=1)o[s].c();nn(t,"id","markers")},m(s,n){Er(s,t,n);for(let l=0;l<o.length;l+=1)o[l].m(t,null);e=!0},p(s,[n]){if(n&3){i=Object.values(s[1]);let l;for(l=0;l<i.length;l+=1){const u=wy(s,i,l);o[l]?(o[l].p(u,n),Kt(o[l],1)):(o[l]=Ty(u),o[l].c(),Kt(o[l],1),o[l].m(t,null))}for(Ri(),l=i.length;l<o.length;l+=1)a(l);Fi()}},i(s){if(!e){for(let n=0;n<i.length;n+=1)Kt(o[n]);e=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)lr(o[n]);e=!1},d(s){s&&Sr(t),Bf(o,s)}}}function c5(r,t,e){let i;Ei(r,$v,a=>e(1,i=a));let{map:o}=t;return r.$$set=a=>{"map"in a&&e(0,o=a.map)},[o,i]}class f5 extends ki{constructor(t){super(),Mi(this,t,c5,u5,_i,{map:0})}}function Ay(r){let t,e;return t=new f5({props:{map:r[0]}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&1&&(a.map=i[0]),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function h5(r){let t,e,i,o,a,s,n=r[0]&&Ay(r);return{c(){t=_n("div"),t.textContent="Loading map layers...",e=Rn(),n&&n.c(),i=ea(),nn(t,"id","map"),nn(t,"class","svelte-pgtmwh")},m(l,u){Er(l,t,u),Er(l,e,u),n&&n.m(l,u),Er(l,i,u),o=!0,a||(s=ri(r[1].call(null,t)),a=!0)},p(l,[u]){l[0]?n?(n.p(l,u),u&1&&Kt(n,1)):(n=Ay(l),n.c(),Kt(n,1),n.m(i.parentNode,i)):n&&(Ri(),lr(n,1,1,()=>{n=null}),Fi())},i(l){o||(Kt(n),o=!0)},o(l){lr(n),o=!1},d(l){l&&Sr(t),l&&Sr(e),n&&n.d(l),l&&Sr(i),a=!1,s()}}}const Sy="AAPK3dfaa40a13c0404983142c26b566596ammsJLVROPRkVaZnrwj6bYIrYdi4FEikx7NZpYg7f5M9XlV2RFL6PgxMA_56IceHv";function d5(r,t,e){let i;function o(s){const n={Topographic:Lg("ArcGIS:Topographic",{apiKey:Sy}),Imagery:Lg("ArcGIS:Imagery",{apiKey:Sy})};e(0,i=Wr.exports.map(s,{preferCanvas:!0}).setView([41.55,-85.8],10)),O_.set(i),n.Topographic.addTo(i),new Wr.exports.Control.Layers(n).addTo(i)}function a(s){return o(s),{destroy:()=>{}}}return[i,a]}class p5 extends ki{constructor(t){super(),Mi(this,t,d5,h5,_i,{})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var m5={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},v5={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",OPENING_EVENT:"MDCMenuSurface:opening",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Xh={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},So;(function(r){r[r.BOTTOM=1]="BOTTOM",r[r.CENTER=2]="CENTER",r[r.RIGHT=4]="RIGHT",r[r.FLIP_RTL=8]="FLIP_RTL"})(So||(So={}));var Pf;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=4]="TOP_RIGHT",r[r.BOTTOM_LEFT=1]="BOTTOM_LEFT",r[r.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",r[r.TOP_START=8]="TOP_START",r[r.TOP_END=12]="TOP_END",r[r.BOTTOM_START=9]="BOTTOM_START",r[r.BOTTOM_END=13]="BOTTOM_END"})(Pf||(Pf={}));var Lv=function(r,t){return Lv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},Lv(r,t)};function xo(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Lv(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var aa=function(){return aa=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},aa.apply(this,arguments)};function g5(r,t,e,i){function o(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function n(h){try{u(i.next(h))}catch(v){s(v)}}function l(h){try{u(i.throw(h))}catch(v){s(v)}}function u(h){h.done?a(h.value):o(h.value).then(n,l)}u((i=i.apply(r,t||[])).next())})}function y5(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,s;return s={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function n(u){return function(h){return l([u,h])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(a=u[0]&2?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,o=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(h){u=[6,h],o=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ml(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pv(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){s={error:n}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return a}function _5(r,t,e){if(e||arguments.length===2)for(var i=0,o=t.length,a;i<o;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return r.concat(a||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ws=function(){function r(t){t===void 0&&(t={}),this.adapter=t}return Object.defineProperty(r,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.destroy=function(){},r}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function b5(r,t){if(r.closest)return r.closest(t);for(var e=r;e;){if(Zb(e,t))return e;e=e.parentElement}return null}function Zb(r,t){var e=r.matches||r.webkitMatchesSelector||r.msMatchesSelector;return e.call(r,t)}function x5(r){var t=r;if(t.offsetParent!==null)return t.scrollWidth;var e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);var i=e.scrollWidth;return document.documentElement.removeChild(e),i}const Ch=Object.freeze(Object.defineProperty({__proto__:null,closest:b5,matches:Zb,estimateScrollWidth:x5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var of,Mc,fa={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};of={},of[""+fa.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",of[""+fa.LIST_ITEM_CLASS]="mdc-list-item",of[""+fa.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",of[""+fa.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",of[""+fa.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",of[""+fa.ROOT]="mdc-list";var qf=(Mc={},Mc[""+fa.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Mc[""+fa.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Mc[""+fa.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Mc[""+fa.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Mc[""+fa.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Mc[""+fa.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Mc[""+fa.ROOT]="mdc-deprecated-list",Mc),sf={ACTION_EVENT:"MDCList:action",SELECTION_CHANGE_EVENT:"MDCList:selectionChange",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+fa.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+fa.LIST_ITEM_CLASS+` a,
    .`+qf[fa.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+qf[fa.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+fa.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+fa.LIST_ITEM_CLASS+` a,
    .`+fa.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+fa.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+qf[fa.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+qf[fa.LIST_ITEM_CLASS]+` a,
    .`+qf[fa.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+qf[fa.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},Ao={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bi={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},tl=new Set;tl.add(Bi.BACKSPACE);tl.add(Bi.ENTER);tl.add(Bi.SPACEBAR);tl.add(Bi.PAGE_UP);tl.add(Bi.PAGE_DOWN);tl.add(Bi.END);tl.add(Bi.HOME);tl.add(Bi.ARROW_LEFT);tl.add(Bi.ARROW_UP);tl.add(Bi.ARROW_RIGHT);tl.add(Bi.ARROW_DOWN);tl.add(Bi.DELETE);tl.add(Bi.ESCAPE);tl.add(Bi.TAB);var bl={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},rl=new Map;rl.set(bl.BACKSPACE,Bi.BACKSPACE);rl.set(bl.ENTER,Bi.ENTER);rl.set(bl.SPACEBAR,Bi.SPACEBAR);rl.set(bl.PAGE_UP,Bi.PAGE_UP);rl.set(bl.PAGE_DOWN,Bi.PAGE_DOWN);rl.set(bl.END,Bi.END);rl.set(bl.HOME,Bi.HOME);rl.set(bl.ARROW_LEFT,Bi.ARROW_LEFT);rl.set(bl.ARROW_UP,Bi.ARROW_UP);rl.set(bl.ARROW_RIGHT,Bi.ARROW_RIGHT);rl.set(bl.ARROW_DOWN,Bi.ARROW_DOWN);rl.set(bl.DELETE,Bi.DELETE);rl.set(bl.ESCAPE,Bi.ESCAPE);rl.set(bl.TAB,Bi.TAB);var yf=new Set;yf.add(Bi.PAGE_UP);yf.add(Bi.PAGE_DOWN);yf.add(Bi.END);yf.add(Bi.HOME);yf.add(Bi.ARROW_LEFT);yf.add(Bi.ARROW_UP);yf.add(Bi.ARROW_RIGHT);yf.add(Bi.ARROW_DOWN);function Co(r){var t=r.key;if(tl.has(t))return t;var e=rl.get(r.keyCode);return e||Bi.UNKNOWN}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var w5=["input","button","textarea","select"],nu=function(r){var t=r.target;if(!!t){var e=(""+t.tagName).toLowerCase();w5.indexOf(e)===-1&&r.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function T5(){var r={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return r}function A5(r,t){for(var e=new Map,i=0;i<r;i++){var o=t(i).trim();if(!!o){var a=o[0].toLowerCase();e.has(a)||e.set(a,[]),e.get(a).push({text:o.toLowerCase(),index:i})}}return e.forEach(function(s){s.sort(function(n,l){return n.index-l.index})}),e}function Rv(r,t){var e=r.nextChar,i=r.focusItemAtIndex,o=r.sortedIndexByFirstChar,a=r.focusedItemIndex,s=r.skipFocus,n=r.isItemAtIndexDisabled;clearTimeout(t.bufferClearTimeout),t.bufferClearTimeout=setTimeout(function(){jb(t)},Ao.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),t.typeaheadBuffer=t.typeaheadBuffer+e;var l;return t.typeaheadBuffer.length===1?l=S5(o,a,n,t):l=E5(o,n,t),l!==-1&&!s&&i(l),l}function S5(r,t,e,i){var o=i.typeaheadBuffer[0],a=r.get(o);if(!a)return-1;if(o===i.currentFirstChar&&a[i.sortedIndexCursor].index===t){i.sortedIndexCursor=(i.sortedIndexCursor+1)%a.length;var s=a[i.sortedIndexCursor].index;if(!e(s))return s}i.currentFirstChar=o;var n=-1,l;for(l=0;l<a.length;l++)if(!e(a[l].index)){n=l;break}for(;l<a.length;l++)if(a[l].index>t&&!e(a[l].index)){n=l;break}return n!==-1?(i.sortedIndexCursor=n,a[i.sortedIndexCursor].index):-1}function E5(r,t,e){var i=e.typeaheadBuffer[0],o=r.get(i);if(!o)return-1;var a=o[e.sortedIndexCursor];if(a.text.lastIndexOf(e.typeaheadBuffer,0)===0&&!t(a.index))return a.index;for(var s=(e.sortedIndexCursor+1)%o.length,n=-1;s!==e.sortedIndexCursor;){var l=o[s],u=l.text.lastIndexOf(e.typeaheadBuffer,0)===0,h=!t(l.index);if(u&&h){n=s;break}s=(s+1)%o.length}return n!==-1?(e.sortedIndexCursor=n,o[e.sortedIndexCursor].index):-1}function Wb(r){return r.typeaheadBuffer.length>0}function jb(r){r.typeaheadBuffer=""}function Ey(r,t){var e=r.event,i=r.isTargetListItem,o=r.focusedItemIndex,a=r.focusItemAtIndex,s=r.sortedIndexByFirstChar,n=r.isItemAtIndexDisabled,l=Co(e)==="ArrowLeft",u=Co(e)==="ArrowUp",h=Co(e)==="ArrowRight",v=Co(e)==="ArrowDown",d=Co(e)==="Home",p=Co(e)==="End",_=Co(e)==="Enter",b=Co(e)==="Spacebar";if(e.altKey||e.ctrlKey||e.metaKey||l||u||h||v||d||p||_)return-1;var x=!b&&e.key.length===1;if(x){nu(e);var E={focusItemAtIndex:a,focusedItemIndex:o,nextChar:e.key.toLowerCase(),sortedIndexByFirstChar:s,skipFocus:!1,isItemAtIndexDisabled:n};return Rv(E,t)}if(!b)return-1;i&&nu(e);var A=i&&Wb(t);if(A){var E={focusItemAtIndex:a,focusedItemIndex:o,nextChar:" ",sortedIndexByFirstChar:s,skipFocus:!1,isItemAtIndexDisabled:n};return Rv(E,t)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function C5(r){return r instanceof Array}var D5=["Alt","Control","Meta","Shift"];function Cy(r){var t=new Set(r?D5.filter(function(e){return r.getModifierState(e)}):[]);return function(e){return e.every(function(i){return t.has(i)})&&e.length===t.size}}var M5=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.wrapFocus=!1,i.isVertical=!0,i.isSingleSelectionList=!1,i.areDisabledItemsFocusable=!0,i.selectedIndex=Ao.UNSET_INDEX,i.focusedItemIndex=Ao.UNSET_INDEX,i.useActivatedClass=!1,i.useSelectedAttr=!1,i.ariaCurrentAttrValue=null,i.isCheckboxList=!1,i.isRadioList=!1,i.lastSelectedIndex=null,i.hasTypeahead=!1,i.typeaheadState=T5(),i.sortedIndexByFirstChar=new Map,i}return Object.defineProperty(t,"strings",{get:function(){return sf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return fa},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ao},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},notifySelectionChange:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},t.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},t.prototype.setWrapFocus=function(e){this.wrapFocus=e},t.prototype.setVerticalOrientation=function(e){this.isVertical=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList=e,e&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},t.prototype.setDisabledItemsFocusable=function(e){this.areDisabledItemsFocusable=e},t.prototype.maybeInitializeSingleSelection=function(){var e=this.getSelectedIndexFromDOM();if(e!==Ao.UNSET_INDEX){var i=this.adapter.listItemAtIndexHasClass(e,fa.LIST_ITEM_ACTIVATED_CLASS);i&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=e}},t.prototype.getSelectedIndexFromDOM=function(){for(var e=Ao.UNSET_INDEX,i=this.adapter.getListItemCount(),o=0;o<i;o++){var a=this.adapter.listItemAtIndexHasClass(o,fa.LIST_ITEM_SELECTED_CLASS),s=this.adapter.listItemAtIndexHasClass(o,fa.LIST_ITEM_ACTIVATED_CLASS);if(!!(a||s)){e=o;break}}return e},t.prototype.setHasTypeahead=function(e){this.hasTypeahead=e,e&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},t.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&Wb(this.typeaheadState)},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass=e},t.prototype.setUseSelectedAttribute=function(e){this.useSelectedAttr=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(e,i){i===void 0&&(i={}),this.isIndexValid(e)&&(this.isCheckboxList?this.setCheckboxAtIndex(e,i):this.isRadioList?this.setRadioAtIndex(e,i):this.setSingleSelectionAtIndex(e,i))},t.prototype.handleFocusIn=function(e){e>=0&&(this.focusedItemIndex=e,this.adapter.setAttributeForElementIndex(e,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(e,"0"))},t.prototype.handleFocusOut=function(e){var i=this;e>=0&&(this.adapter.setAttributeForElementIndex(e,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(e,"-1")),setTimeout(function(){i.adapter.isFocusInsideList()||i.setTabindexToFirstSelectedOrFocusedItem()},0)},t.prototype.isIndexDisabled=function(e){return this.adapter.listItemAtIndexHasClass(e,fa.LIST_ITEM_DISABLED_CLASS)},t.prototype.handleKeydown=function(e,i,o){var a=this,s,n=Co(e)==="ArrowLeft",l=Co(e)==="ArrowUp",u=Co(e)==="ArrowRight",h=Co(e)==="ArrowDown",v=Co(e)==="Home",d=Co(e)==="End",p=Co(e)==="Enter",_=Co(e)==="Spacebar",b=this.isVertical&&h||!this.isVertical&&u,x=this.isVertical&&l||!this.isVertical&&n,E=e.key==="A"||e.key==="a",A=Cy(e);if(this.adapter.isRootFocused()){if((x||d)&&A([]))e.preventDefault(),this.focusLastElement();else if((b||v)&&A([]))e.preventDefault(),this.focusFirstElement();else if(x&&A(["Shift"])&&this.isCheckboxList){e.preventDefault();var P=this.focusLastElement();P!==-1&&this.setSelectedIndexOnAction(P,!1)}else if(b&&A(["Shift"])&&this.isCheckboxList){e.preventDefault();var P=this.focusFirstElement();P!==-1&&this.setSelectedIndexOnAction(P,!1)}if(this.hasTypeahead){var D={event:e,focusItemAtIndex:function(I){a.focusItemAtIndex(I)},focusedItemIndex:-1,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(I){return a.isIndexDisabled(I)}};Ey(D,this.typeaheadState)}return}var R=this.adapter.getFocusedElementIndex();if(!(R===-1&&(R=o,R<0))){if(b&&A([]))nu(e),this.focusNextElement(R);else if(x&&A([]))nu(e),this.focusPrevElement(R);else if(b&&A(["Shift"])&&this.isCheckboxList){nu(e);var P=this.focusNextElement(R);P!==-1&&this.setSelectedIndexOnAction(P,!1)}else if(x&&A(["Shift"])&&this.isCheckboxList){nu(e);var P=this.focusPrevElement(R);P!==-1&&this.setSelectedIndexOnAction(P,!1)}else if(v&&A([]))nu(e),this.focusFirstElement();else if(d&&A([]))nu(e),this.focusLastElement();else if(v&&A(["Control","Shift"])&&this.isCheckboxList){if(nu(e),this.isIndexDisabled(R))return;this.focusFirstElement(),this.toggleCheckboxRange(0,R,R)}else if(d&&A(["Control","Shift"])&&this.isCheckboxList){if(nu(e),this.isIndexDisabled(R))return;this.focusLastElement(),this.toggleCheckboxRange(R,this.adapter.getListItemCount()-1,R)}else if(E&&A(["Control"])&&this.isCheckboxList)e.preventDefault(),this.checkboxListToggleAll(this.selectedIndex===Ao.UNSET_INDEX?[]:this.selectedIndex,!0);else if((p||_)&&A([])){if(i){var S=e.target;if(S&&S.tagName==="A"&&p||(nu(e),this.isIndexDisabled(R)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(R,!1),this.adapter.notifyAction(R))}}else if((p||_)&&A(["Shift"])&&this.isCheckboxList){var S=e.target;if(S&&S.tagName==="A"&&p||(nu(e),this.isIndexDisabled(R)))return;this.isTypeaheadInProgress()||(this.toggleCheckboxRange((s=this.lastSelectedIndex)!==null&&s!==void 0?s:R,R,R),this.adapter.notifyAction(R))}if(this.hasTypeahead){var D={event:e,focusItemAtIndex:function(T){a.focusItemAtIndex(T)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(T){return a.isIndexDisabled(T)}};Ey(D,this.typeaheadState)}}},t.prototype.handleClick=function(e,i,o){var a,s=Cy(o);e!==Ao.UNSET_INDEX&&(this.isIndexDisabled(e)||(s([])?(this.isSelectableList()&&this.setSelectedIndexOnAction(e,i),this.adapter.notifyAction(e)):this.isCheckboxList&&s(["Shift"])&&(this.toggleCheckboxRange((a=this.lastSelectedIndex)!==null&&a!==void 0?a:e,e,e),this.adapter.notifyAction(e))))},t.prototype.focusNextElement=function(e){var i=this.adapter.getListItemCount(),o=e,a=null;do{if(o++,o>=i)if(this.wrapFocus)o=0;else return e;if(o===a)return-1;a=a!=null?a:o}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(o));return this.focusItemAtIndex(o),o},t.prototype.focusPrevElement=function(e){var i=this.adapter.getListItemCount(),o=e,a=null;do{if(o--,o<0)if(this.wrapFocus)o=i-1;else return e;if(o===a)return-1;a=a!=null?a:o}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(o));return this.focusItemAtIndex(o),o},t.prototype.focusFirstElement=function(){return this.focusNextElement(-1)},t.prototype.focusLastElement=function(){return this.focusPrevElement(this.adapter.getListItemCount())},t.prototype.focusInitialElement=function(){var e=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,i){!this.isIndexValid(e,!1)||(i?(this.adapter.removeClassForElementIndex(e,fa.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(e,sf.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(e,fa.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(e,sf.ARIA_DISABLED,"true")))},t.prototype.setSingleSelectionAtIndex=function(e,i){if(i===void 0&&(i={}),!(this.selectedIndex===e&&!i.forceUpdate)){var o=fa.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(o=fa.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==Ao.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,o),this.setAriaForSingleSelectionAtIndex(e),this.setTabindexAtIndex(e),e!==Ao.UNSET_INDEX&&this.adapter.addClassForElementIndex(e,o),this.selectedIndex=e,i.isUserInteraction&&!i.forceUpdate&&this.adapter.notifySelectionChange([e])}},t.prototype.setAriaForSingleSelectionAtIndex=function(e){this.selectedIndex===Ao.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(e,sf.ARIA_CURRENT));var i=this.ariaCurrentAttrValue!==null,o=i?sf.ARIA_CURRENT:sf.ARIA_SELECTED;if(this.selectedIndex!==Ao.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,o,"false"),e!==Ao.UNSET_INDEX){var a=i?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(e,o,a)}},t.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?sf.ARIA_SELECTED:sf.ARIA_CHECKED},t.prototype.setRadioAtIndex=function(e,i){i===void 0&&(i={});var o=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(e,!0),!(this.selectedIndex===e&&!i.forceUpdate)&&(this.selectedIndex!==Ao.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,o,"false"),this.adapter.setAttributeForElementIndex(e,o,"true"),this.selectedIndex=e,i.isUserInteraction&&!i.forceUpdate&&this.adapter.notifySelectionChange([e]))},t.prototype.setCheckboxAtIndex=function(e,i){i===void 0&&(i={});for(var o=this.selectedIndex,a=i.isUserInteraction?new Set(o===Ao.UNSET_INDEX?[]:o):null,s=this.getSelectionAttribute(),n=[],l=0;l<this.adapter.getListItemCount();l++){var u=a==null?void 0:a.has(l),h=e.indexOf(l)>=0;h!==u&&n.push(l),this.adapter.setCheckedCheckboxOrRadioAtIndex(l,h),this.adapter.setAttributeForElementIndex(l,s,h?"true":"false")}this.selectedIndex=e,i.isUserInteraction&&n.length&&this.adapter.notifySelectionChange(n)},t.prototype.toggleCheckboxRange=function(e,i,o){this.lastSelectedIndex=o;for(var a=new Set(this.selectedIndex===Ao.UNSET_INDEX?[]:this.selectedIndex),s=!(a!=null&&a.has(o)),n=Pv([e,i].sort(),2),l=n[0],u=n[1],h=this.getSelectionAttribute(),v=[],d=l;d<=u;d++)if(!this.isIndexDisabled(d)){var p=a.has(d);s!==p&&(v.push(d),this.adapter.setCheckedCheckboxOrRadioAtIndex(d,s),this.adapter.setAttributeForElementIndex(d,h,""+s),s?a.add(d):a.delete(d))}v.length&&(this.selectedIndex=_5([],Pv(a)),this.adapter.notifySelectionChange(v))},t.prototype.setTabindexAtIndex=function(e){this.focusedItemIndex===Ao.UNSET_INDEX&&e!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==e&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==e&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),e!==Ao.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},t.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var e=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(e)},t.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==Ao.UNSET_INDEX?this.selectedIndex:C5(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(e,i){return Math.min(e,i)}):0:Math.max(this.focusedItemIndex,0)},t.prototype.isIndexValid=function(e,i){var o=this;if(i===void 0&&(i=!0),e instanceof Array){if(!this.isCheckboxList&&i)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return e.length===0?!0:e.some(function(a){return o.isIndexInRange(a)})}else if(typeof e=="number"){if(this.isCheckboxList&&i)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange(e)||this.isSingleSelectionList&&e===Ao.UNSET_INDEX}else return!1},t.prototype.isIndexInRange=function(e){var i=this.adapter.getListItemCount();return e>=0&&e<i},t.prototype.setSelectedIndexOnAction=function(e,i){this.lastSelectedIndex=e,this.isCheckboxList?(this.toggleCheckboxAtIndex(e,i),this.adapter.notifySelectionChange([e])):this.setSelectedIndex(e,{isUserInteraction:!0})},t.prototype.toggleCheckboxAtIndex=function(e,i){var o=this.getSelectionAttribute(),a=this.adapter.isCheckboxCheckedAtIndex(e),s;i?s=a:(s=!a,this.adapter.setCheckedCheckboxOrRadioAtIndex(e,s)),this.adapter.setAttributeForElementIndex(e,o,s?"true":"false");var n=this.selectedIndex===Ao.UNSET_INDEX?[]:this.selectedIndex.slice();s?n.push(e):n=n.filter(function(l){return l!==e}),this.selectedIndex=n},t.prototype.focusItemAtIndex=function(e){this.adapter.focusItemAtIndex(e),this.focusedItemIndex=e},t.prototype.checkboxListToggleAll=function(e,i){var o=this.adapter.getListItemCount();if(e.length===o)this.setCheckboxAtIndex([],{isUserInteraction:i});else{for(var a=[],s=0;s<o;s++)(!this.isIndexDisabled(s)||e.indexOf(s)>-1)&&a.push(s);this.setCheckboxAtIndex(a,{isUserInteraction:i})}},t.prototype.typeaheadMatchItem=function(e,i,o){var a=this;o===void 0&&(o=!1);var s={focusItemAtIndex:function(n){a.focusItemAtIndex(n)},focusedItemIndex:i||this.focusedItemIndex,nextChar:e,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:o,isItemAtIndexDisabled:function(n){return a.isIndexDisabled(n)}};return Rv(s,this.typeaheadState)},t.prototype.typeaheadInitSortedIndex=function(){return A5(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},t.prototype.clearTypeaheadBuffer=function(){jb(this.typeaheadState)},t}(ws);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Yb=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.isSurfaceOpen=!1,i.isQuickOpen=!1,i.isHoistedElement=!1,i.isFixedPosition=!1,i.isHorizontallyCenteredOnViewport=!1,i.maxHeight=0,i.openBottomBias=0,i.openAnimationEndTimerId=0,i.closeAnimationEndTimerId=0,i.animationRequestId=0,i.anchorCorner=Pf.TOP_START,i.originCorner=Pf.TOP_START,i.anchorMargin={top:0,right:0,bottom:0,left:0},i.position={x:0,y:0},i}return Object.defineProperty(t,"cssClasses",{get:function(){return m5},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return v5},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Xh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return Pf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyClosing:function(){},notifyOpen:function(){},notifyOpening:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,i=e.ROOT,o=e.OPEN;if(!this.adapter.hasClass(i))throw new Error(i+" class required in root element.");this.adapter.hasClass(o)&&(this.isSurfaceOpen=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},t.prototype.setAnchorCorner=function(e){this.anchorCorner=e},t.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^So.RIGHT},t.prototype.setAnchorMargin=function(e){this.anchorMargin.top=e.top||0,this.anchorMargin.right=e.right||0,this.anchorMargin.bottom=e.bottom||0,this.anchorMargin.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition=e},t.prototype.isFixed=function(){return this.isFixedPosition},t.prototype.setAbsolutePosition=function(e,i){this.position.x=this.isFinite(e)?e:0,this.position.y=this.isFinite(i)?i:0},t.prototype.setIsHorizontallyCenteredOnViewport=function(e){this.isHorizontallyCenteredOnViewport=e},t.prototype.setQuickOpen=function(e){this.isQuickOpen=e},t.prototype.setMaxHeight=function(e){this.maxHeight=e},t.prototype.setOpenBottomBias=function(e){this.openBottomBias=e},t.prototype.isOpen=function(){return this.isSurfaceOpen},t.prototype.open=function(){var e=this;this.isSurfaceOpen||(this.adapter.notifyOpening(),this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(t.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){e.dimensions=e.adapter.getInnerDimensions(),e.autoposition(),e.adapter.addClass(t.cssClasses.OPEN),e.openAnimationEndTimerId=setTimeout(function(){e.openAnimationEndTimerId=0,e.adapter.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter.notifyOpen()},Xh.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},t.prototype.close=function(e){var i=this;if(e===void 0&&(e=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,e||this.maybeRestoreFocus(),this.adapter.removeClass(t.cssClasses.OPEN),this.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){i.adapter.removeClass(t.cssClasses.OPEN),i.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),i.closeAnimationEndTimerId=setTimeout(function(){i.closeAnimationEndTimerId=0,i.adapter.removeClass(t.cssClasses.ANIMATING_CLOSED),i.adapter.notifyClose()},Xh.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,e||this.maybeRestoreFocus()}},t.prototype.handleBodyClick=function(e){var i=e.target;this.adapter.isElementInContainer(i)||this.close()},t.prototype.handleKeydown=function(e){var i=e.keyCode,o=e.key,a=o==="Escape"||i===27;a&&this.close()},t.prototype.autoposition=function(){var e;this.measurements=this.getAutoLayoutmeasurements();var i=this.getoriginCorner(),o=this.getMenuSurfaceMaxHeight(i),a=this.hasBit(i,So.BOTTOM)?"bottom":"top",s=this.hasBit(i,So.RIGHT)?"right":"left",n=this.getHorizontalOriginOffset(i),l=this.getVerticalOriginOffset(i),u=this.measurements,h=u.anchorSize,v=u.surfaceSize,d=(e={},e[s]=n,e[a]=l,e);h.width/v.width>Xh.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(d),this.adapter.setTransformOrigin(s+" "+a),this.adapter.setPosition(d),this.adapter.setMaxHeight(o?o+"px":""),this.hasBit(i,So.BOTTOM)||this.adapter.addClass(t.cssClasses.IS_OPEN_BELOW)},t.prototype.getAutoLayoutmeasurements=function(){var e=this.adapter.getAnchorDimensions(),i=this.adapter.getBodyDimensions(),o=this.adapter.getWindowDimensions(),a=this.adapter.getWindowScroll();return e||(e={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:e,bodySize:i,surfaceSize:this.dimensions,viewportDistance:{top:e.top,right:o.width-e.right,bottom:o.height-e.bottom,left:e.left},viewportSize:o,windowScroll:a}},t.prototype.getoriginCorner=function(){var e=this.originCorner,i=this.measurements,o=i.viewportDistance,a=i.anchorSize,s=i.surfaceSize,n=t.numbers.MARGIN_TO_EDGE,l=this.hasBit(this.anchorCorner,So.BOTTOM),u,h;l?(u=o.top-n+this.anchorMargin.bottom,h=o.bottom-n-this.anchorMargin.bottom):(u=o.top-n+this.anchorMargin.top,h=o.bottom-n+a.height-this.anchorMargin.top);var v=h-s.height>0;!v&&u>h+this.openBottomBias&&(e=this.setBit(e,So.BOTTOM));var d=this.adapter.isRtl(),p=this.hasBit(this.anchorCorner,So.FLIP_RTL),_=this.hasBit(this.anchorCorner,So.RIGHT)||this.hasBit(e,So.RIGHT),b=!1;d&&p?b=!_:b=_;var x,E;b?(x=o.left+a.width+this.anchorMargin.right,E=o.right-this.anchorMargin.right):(x=o.left+this.anchorMargin.left,E=o.right+a.width-this.anchorMargin.left);var A=x-s.width>0,P=E-s.width>0,D=this.hasBit(e,So.FLIP_RTL)&&this.hasBit(e,So.RIGHT);return P&&D&&d||!A&&D?e=this.unsetBit(e,So.RIGHT):(A&&b&&d||A&&!b&&_||!P&&x>=E)&&(e=this.setBit(e,So.RIGHT)),e},t.prototype.getMenuSurfaceMaxHeight=function(e){if(this.maxHeight>0)return this.maxHeight;var i=this.measurements.viewportDistance,o=0,a=this.hasBit(e,So.BOTTOM),s=this.hasBit(this.anchorCorner,So.BOTTOM),n=t.numbers.MARGIN_TO_EDGE;return a?(o=i.top+this.anchorMargin.top-n,s||(o+=this.measurements.anchorSize.height)):(o=i.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-n,s&&(o-=this.measurements.anchorSize.height)),o},t.prototype.getHorizontalOriginOffset=function(e){var i=this.measurements.anchorSize,o=this.hasBit(e,So.RIGHT),a=this.hasBit(this.anchorCorner,So.RIGHT);if(o){var s=a?i.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?s-(this.measurements.viewportSize.width-this.measurements.bodySize.width):s}return a?i.width-this.anchorMargin.right:this.anchorMargin.left},t.prototype.getVerticalOriginOffset=function(e){var i=this.measurements.anchorSize,o=this.hasBit(e,So.BOTTOM),a=this.hasBit(this.anchorCorner,So.BOTTOM),s=0;return o?s=a?i.height-this.anchorMargin.top:-this.anchorMargin.bottom:s=a?i.height+this.anchorMargin.bottom:this.anchorMargin.top,s},t.prototype.adjustPositionForHoistedElement=function(e){var i,o,a=this.measurements,s=a.windowScroll,n=a.viewportDistance,l=a.surfaceSize,u=a.viewportSize,h=Object.keys(e);try{for(var v=ml(h),d=v.next();!d.done;d=v.next()){var p=d.value,_=e[p]||0;if(this.isHorizontallyCenteredOnViewport&&(p==="left"||p==="right")){e[p]=(u.width-l.width)/2;continue}_+=n[p],this.isFixedPosition||(p==="top"?_+=s.y:p==="bottom"?_-=s.y:p==="left"?_+=s.x:_-=s.x),e[p]=_}}catch(b){i={error:b}}finally{try{d&&!d.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}},t.prototype.maybeRestoreFocus=function(){var e=this,i=this.adapter.isFocused(),o=this.adapter.getOwnerDocument?this.adapter.getOwnerDocument():document,a=o.activeElement&&this.adapter.isElementInContainer(o.activeElement);(i||a)&&setTimeout(function(){e.adapter.restoreFocus()},Xh.TOUCH_EVENT_WAIT_MS)},t.prototype.hasBit=function(e,i){return Boolean(e&i)},t.prototype.setBit=function(e,i){return e|i},t.prototype.unsetBit=function(e,i){return e^i},t.prototype.isFinite=function(e){return typeof e=="number"&&isFinite(e)},t}(ws);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Dy={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function k5(r){return Boolean(r.document)&&typeof r.document.createElement=="function"}function Fv(r,t){if(k5(r)&&t in Dy){var e=r.document.createElement("div"),i=Dy[t],o=i.standard,a=i.prefixed,s=o in e.style;return s?o:a}return t}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dh={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},eh={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},I5={FOCUS_ROOT_INDEX:-1},oh;(function(r){r[r.NONE=0]="NONE",r[r.LIST_ROOT=1]="LIST_ROOT",r[r.FIRST_ITEM=2]="FIRST_ITEM",r[r.LAST_ITEM=3]="LAST_ITEM"})(oh||(oh={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var L5=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.closeAnimationEndTimerId=0,i.defaultFocusState=oh.LIST_ROOT,i.selectedIndex=-1,i}return Object.defineProperty(t,"cssClasses",{get:function(){return dh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return eh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return I5},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},t.prototype.handleKeydown=function(e){var i=e.key,o=e.keyCode,a=i==="Tab"||o===9;a&&this.adapter.closeSurface(!0)},t.prototype.handleItemAction=function(e){var i=this,o=this.adapter.getElementIndex(e);if(!(o<0)){this.adapter.notifySelected({index:o});var a=this.adapter.getAttributeFromElementAtIndex(o,eh.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(a),this.closeAnimationEndTimerId=setTimeout(function(){var s=i.adapter.getElementIndex(e);s>=0&&i.adapter.isSelectableItemAtIndex(s)&&i.setSelectedIndex(s)},Yb.numbers.TRANSITION_CLOSE_DURATION)}},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case oh.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case oh.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case oh.NONE:break;default:this.adapter.focusListRoot();break}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex(e),!this.adapter.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var i=this.adapter.getSelectedSiblingOfItemAtIndex(e);i>=0&&(this.adapter.removeAttributeFromElementAtIndex(i,eh.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(i,dh.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(e,dh.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(e,eh.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=e},t.prototype.setEnabled=function(e,i){this.validatedIndex(e),i?(this.adapter.removeClassFromElementAtIndex(e,fa.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(e,eh.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(e,fa.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(e,eh.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex=function(e){var i=this.adapter.getMenuItemCount(),o=e>=0&&e<i;if(!o)throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(ws);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function P5(r){return r===void 0&&(r=window),R5(r)?{passive:!0}:!1}function R5(r){r===void 0&&(r=window);var t=!1;try{var e={get passive(){return t=!0,!1}},i=function(){};r.document.addEventListener("test",i,e),r.document.removeEventListener("test",i,e)}catch{t=!1}return t}const F5=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:P5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Xm="mdc-dom-focus-sentinel",O5=function(){function r(t,e){e===void 0&&(e={}),this.root=t,this.options=e,this.elFocusedBeforeTrapFocus=null}return r.prototype.trapFocus=function(){var t=this.getFocusableElements(this.root);if(t.length===0)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(t,this.options.initialFocusEl)},r.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Xm)).forEach(function(t){t.parentElement.removeChild(t)}),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},r.prototype.wrapTabFocus=function(t){var e=this,i=this.createSentinel(),o=this.createSentinel();i.addEventListener("focus",function(){var a=e.getFocusableElements(t);a.length>0&&a[a.length-1].focus()}),o.addEventListener("focus",function(){var a=e.getFocusableElements(t);a.length>0&&a[0].focus()}),t.insertBefore(i,t.children[0]),t.appendChild(o)},r.prototype.focusInitialElement=function(t,e){var i=0;e&&(i=Math.max(t.indexOf(e),0)),t[i].focus()},r.prototype.getFocusableElements=function(t){var e=[].slice.call(t.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button"));return e.filter(function(i){var o=i.getAttribute("aria-disabled")==="true"||i.getAttribute("disabled")!=null||i.getAttribute("hidden")!=null||i.getAttribute("aria-hidden")==="true",a=i.tabIndex>=0&&i.getBoundingClientRect().width>0&&!i.classList.contains(Xm)&&!o,s=!1;if(a){var n=getComputedStyle(i);s=n.display==="none"||n.visibility==="hidden"}return a&&!s})},r.prototype.createSentinel=function(){var t=document.createElement("div");return t.setAttribute("tabindex","0"),t.setAttribute("aria-hidden","true"),t.classList.add(Xm),t},r}();const z5=Object.freeze(Object.defineProperty({__proto__:null,FocusTrap:O5},Symbol.toStringTag,{value:"Module"}));function Pn(r){return Object.entries(r).filter(([t,e])=>t!==""&&e).map(([t])=>t).join(" ")}function Di(r,t,e,i={bubbles:!0},o=!1){if(typeof Event<"u"&&r){const a=new CustomEvent(t,Object.assign(Object.assign({},i),{detail:e}));if(r==null||r.dispatchEvent(a),o&&t.startsWith("SMUI")){const s=new CustomEvent(t.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},i),{detail:e}));r==null||r.dispatchEvent(s),s.defaultPrevented&&a.preventDefault()}return a}}function Os(r,t){let e=Object.getOwnPropertyNames(r);const i={};for(let o=0;o<e.length;o++){const a=e[o],s=a.indexOf("$");s!==-1&&t.indexOf(a.substring(0,s+1))!==-1||t.indexOf(a)===-1&&(i[a]=r[a])}return i}const My=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,B5=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function wa(r){let t,e=[];r.$on=(o,a)=>{let s=o,n=()=>{};return t?n=t(s,a):e.push([s,a]),s.match(My)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',s),()=>{n()}};function i(o){nv(r,o)}return o=>{const a=[],s={};t=(n,l)=>{let u=n,h=l,v=!1;const d=u.match(My),p=u.match(B5),_=d||p;if(u.match(/^SMUI:\w+:/)){const E=u.split(":");let A="";for(let P=0;P<E.length;P++)A+=P===E.length-1?":"+E[P]:E[P].split("-").map(D=>D.slice(0,1).toUpperCase()+D.slice(1)).join("");console.warn(`The event ${u.split("$")[0]} has been renamed to ${A.split("$")[0]}.`),u=A}if(_){const E=u.split(d?":":"$");u=E[0];const A=E.slice(1).reduce((P,D)=>(P[D]=!0,P),{});A.passive&&(v=v||{},v.passive=!0),A.nonpassive&&(v=v||{},v.passive=!1),A.capture&&(v=v||{},v.capture=!0),A.once&&(v=v||{},v.once=!0),A.preventDefault&&(h=F2(h)),A.stopPropagation&&(h=Uv(h))}const b=si(o,u,h,v),x=()=>{b();const E=a.indexOf(x);E>-1&&a.splice(E,1)};return a.push(x),u in s||(s[u]=si(o,u,i)),x};for(let n=0;n<e.length;n++)t(e[n][0],e[n][1]);return{destroy:()=>{for(let n=0;n<a.length;n++)a[n]();for(let n of Object.entries(s))n[1]()}}}}function xi(r,t){let e=Object.getOwnPropertyNames(r);const i={};for(let o=0;o<e.length;o++){const a=e[o];a.substring(0,t.length)===t&&(i[a.substring(t.length)]=r[a])}return i}function ma(r,t){let e=[];if(t)for(let i=0;i<t.length;i++){const o=t[i],a=Array.isArray(o)?o[0]:o;Array.isArray(o)&&o.length>1?e.push(a(r,o[1])):e.push(a(r))}return{update(i){if((i&&i.length||0)!=e.length)throw new Error("You must not change the length of an actions array.");if(i)for(let o=0;o<i.length;o++){const a=e[o];if(a&&a.update){const s=i[o];Array.isArray(s)&&s.length>1?a.update(s[1]):a.update()}}},destroy(){for(let i=0;i<e.length;i++){const o=e[i];o&&o.destroy&&o.destroy()}}}}const{document:N5}=p_;function U5(r){let t,e,i,o,a,s,n,l;const u=r[33].default,h=Ni(u,r,r[32],null);let v=[{class:i=Pn({[r[1]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":r[4],"mdc-menu-surface--open":r[3],"smui-menu-surface--static":r[3],"mdc-menu-surface--fullwidth":r[5],...r[8]})},{style:o=Object.entries(r[9]).map(ky).concat([r[2]]).join(" ")},r[12]],d={};for(let p=0;p<v.length;p+=1)d=cn(d,v[p]);return{c(){t=Rn(),e=_n("div"),h&&h.c(),Xn(e,d)},m(p,_){Er(p,t,_),Er(p,e,_),h&&h.m(e,null),r[34](e),s=!0,n||(l=[si(N5.body,"click",r[11],!0),ri(a=ma.call(null,e,r[0])),ri(r[10].call(null,e)),si(e,"keydown",function(){Ci(r[7]&&r[7].handleKeydown.bind(r[7]))&&(r[7]&&r[7].handleKeydown.bind(r[7])).apply(this,arguments)})],n=!0)},p(p,_){r=p,h&&h.p&&(!s||_[1]&2)&&Hi(h,u,r,r[32],s?Ui(u,r[32],_,null):Vi(r[32]),null),Xn(e,d=li(v,[(!s||_[0]&314&&i!==(i=Pn({[r[1]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":r[4],"mdc-menu-surface--open":r[3],"smui-menu-surface--static":r[3],"mdc-menu-surface--fullwidth":r[5],...r[8]})))&&{class:i},(!s||_[0]&516&&o!==(o=Object.entries(r[9]).map(ky).concat([r[2]]).join(" ")))&&{style:o},_[0]&4096&&r[12]])),a&&Ci(a.update)&&_[0]&1&&a.update.call(null,r[0])},i(p){s||(Kt(h,p),s=!0)},o(p){lr(h,p),s=!1},d(p){p&&Sr(t),p&&Sr(e),h&&h.d(p),r[34](null),n=!1,Ma(l)}}}const ky=([r,t])=>`${r}: ${t};`;function H5(r,t,e){const i=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","openBottomBias","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;var n,l,u;const h=wa(oa());let{use:v=[]}=t,{class:d=""}=t,{style:p=""}=t,{static:_=!1}=t,{anchor:b=!0}=t,{fixed:x=!1}=t,{open:E=_}=t,{managed:A=!1}=t,{fullWidth:P=!1}=t,{quickOpen:D=!1}=t,{anchorElement:R=void 0}=t,{anchorCorner:S=void 0}=t,{anchorMargin:I={top:0,right:0,bottom:0,left:0}}=t,{maxHeight:T=0}=t,{horizontallyCenteredOnViewport:M=!1}=t,{openBottomBias:z=0}=t,U,F,V={},j={},H;wi("SMUI:list:role","menu"),wi("SMUI:list:item:role","menuitem");const Y=Pf;bo(()=>(e(7,F=new Yb({addClass:ne,removeClass:q,hasClass:J,hasAnchor:()=>!!R,notifyClose:()=>{A||e(13,E=_),E||Di(U,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{A||e(13,E=_),E||Di(U,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{A||e(13,E=!0),E&&Di(U,"SMUIMenuSurface:opened",void 0,void 0,!0)},notifyOpening:()=>{E||Di(U,"SMUIMenuSurface:opening",void 0,void 0,!0)},isElementInContainer:ke=>U.contains(ke),isRtl:()=>getComputedStyle(U).getPropertyValue("direction")==="rtl",setTransformOrigin:ke=>{e(9,j["transform-origin"]=ke,j)},isFocused:()=>document.activeElement===U,saveFocus:()=>{var ke;H=(ke=document.activeElement)!==null&&ke!==void 0?ke:void 0},restoreFocus:()=>{(!U||U.contains(document.activeElement))&&H&&document.contains(H)&&"focus"in H&&H.focus()},getInnerDimensions:()=>({width:U.offsetWidth,height:U.offsetHeight}),getAnchorDimensions:()=>R?R.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:ke=>{e(9,j.left="left"in ke?`${ke.left}px`:"",j),e(9,j.right="right"in ke?`${ke.right}px`:"",j),e(9,j.top="top"in ke?`${ke.top}px`:"",j),e(9,j.bottom="bottom"in ke?`${ke.bottom}px`:"",j)},setMaxHeight:ke=>{e(9,j["max-height"]=ke,j)}})),Di(U,"SMUIMenuSurface:mount",{get open(){return E},set open(ke){e(13,E=ke)},closeProgrammatic:we}),F.init(),()=>{var ke;const $=F.isHoistedElement;F.destroy(),$&&((ke=U.parentNode)===null||ke===void 0||ke.removeChild(U))})),Vc(()=>{var Ee;b&&U&&((Ee=U.parentElement)===null||Ee===void 0||Ee.classList.remove("mdc-menu-surface--anchor"))});function J(Ee){return Ee in V?V[Ee]:He().classList.contains(Ee)}function ne(Ee){V[Ee]||e(8,V[Ee]=!0,V)}function q(Ee){(!(Ee in V)||V[Ee])&&e(8,V[Ee]=!1,V)}function we(Ee){F.close(Ee),e(13,E=!1)}function ee(Ee){F&&E&&!A&&F.handleBodyClick(Ee)}function X(){return E}function re(Ee){e(13,E=Ee)}function de(Ee,ke){return F.setAbsolutePosition(Ee,ke)}function me(Ee){return F.setIsHoisted(Ee)}function xe(){return F.isFixed()}function He(){return U}function Re(Ee){ci[Ee?"unshift":"push"](()=>{U=Ee,e(6,U)})}return r.$$set=Ee=>{t=cn(cn({},t),ga(Ee)),e(12,o=ei(t,i)),"use"in Ee&&e(0,v=Ee.use),"class"in Ee&&e(1,d=Ee.class),"style"in Ee&&e(2,p=Ee.style),"static"in Ee&&e(3,_=Ee.static),"anchor"in Ee&&e(15,b=Ee.anchor),"fixed"in Ee&&e(4,x=Ee.fixed),"open"in Ee&&e(13,E=Ee.open),"managed"in Ee&&e(16,A=Ee.managed),"fullWidth"in Ee&&e(5,P=Ee.fullWidth),"quickOpen"in Ee&&e(17,D=Ee.quickOpen),"anchorElement"in Ee&&e(14,R=Ee.anchorElement),"anchorCorner"in Ee&&e(18,S=Ee.anchorCorner),"anchorMargin"in Ee&&e(19,I=Ee.anchorMargin),"maxHeight"in Ee&&e(20,T=Ee.maxHeight),"horizontallyCenteredOnViewport"in Ee&&e(21,M=Ee.horizontallyCenteredOnViewport),"openBottomBias"in Ee&&e(22,z=Ee.openBottomBias),"$$scope"in Ee&&e(32,s=Ee.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&1610645568|r.$$.dirty[1]&1&&U&&b&&!(!(e(29,n=U.parentElement)===null||n===void 0)&&n.classList.contains("mdc-menu-surface--anchor"))&&(e(30,l=U.parentElement)===null||l===void 0||l.classList.add("mdc-menu-surface--anchor"),e(14,R=e(31,u=U.parentElement)!==null&&u!==void 0?u:void 0)),r.$$.dirty[0]&8320&&F&&F.isOpen()!==E&&(E?F.open():F.close()),r.$$.dirty[0]&131200&&F&&F.setQuickOpen(D),r.$$.dirty[0]&144&&F&&F.setFixedPosition(x),r.$$.dirty[0]&1048704&&F&&F.setMaxHeight(T),r.$$.dirty[0]&2097280&&F&&F.setIsHorizontallyCenteredOnViewport(M),r.$$.dirty[0]&262272&&F&&S!=null&&(typeof S=="string"?F.setAnchorCorner(Y[S]):F.setAnchorCorner(S)),r.$$.dirty[0]&524416&&F&&F.setAnchorMargin(I),r.$$.dirty[0]&4194432&&F&&F.setOpenBottomBias(z)},[v,d,p,_,x,P,U,F,V,j,h,ee,o,E,R,b,A,D,S,I,T,M,z,X,re,de,me,xe,He,n,l,u,s,a,Re]}class V5 extends ki{constructor(t){super(),Mi(this,t,H5,U5,_i,{use:0,class:1,style:2,static:3,anchor:15,fixed:4,open:13,managed:16,fullWidth:5,quickOpen:17,anchorElement:14,anchorCorner:18,anchorMargin:19,maxHeight:20,horizontallyCenteredOnViewport:21,openBottomBias:22,isOpen:23,setOpen:24,setAbsolutePosition:25,setIsHoisted:26,isFixed:27,getElement:28},null,[-1,-1])}get isOpen(){return this.$$.ctx[23]}get setOpen(){return this.$$.ctx[24]}get setAbsolutePosition(){return this.$$.ctx[25]}get setIsHoisted(){return this.$$.ctx[26]}get isFixed(){return this.$$.ctx[27]}get getElement(){return this.$$.ctx[28]}}function G5(r,{addClass:t=i=>r.classList.add(i),removeClass:e=i=>r.classList.remove(i)}={}){return t("mdc-menu-surface--anchor"),{destroy(){e("mdc-menu-surface--anchor")}}}function Z5(r){let t;const e=r[17].default,i=Ni(e,r,r[22],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&4194304)&&Hi(i,e,o,o[22],t?Ui(e,o[22],a,null):Vi(o[22]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function W5(r){let t,e,i;const o=[{use:r[5]},{class:Pn({[r[1]]:!0,"mdc-menu":!0})},r[9]];function a(n){r[19](n)}let s={$$slots:{default:[Z5]},$$scope:{ctx:r}};for(let n=0;n<o.length;n+=1)s=cn(s,o[n]);return r[0]!==void 0&&(s.open=r[0]),t=new V5({props:s}),r[18](t),ci.push(()=>Ah(t,"open",a)),t.$on("SMUIMenuSurface:mount",r[7]),t.$on("SMUIList:mount",r[8]),t.$on("SMUIMenuSurface:opened",r[20]),t.$on("keydown",r[6]),t.$on("SMUIList:action",r[21]),{c(){un(t.$$.fragment)},m(n,l){on(t,n,l),i=!0},p(n,[l]){const u=l&546?li(o,[l&32&&{use:n[5]},l&2&&{class:Pn({[n[1]]:!0,"mdc-menu":!0})},l&512&&pa(n[9])]):{};l&4194304&&(u.$$scope={dirty:l,ctx:n}),!e&&l&1&&(e=!0,u.open=n[0],Th(()=>e=!1)),t.$set(u)},i(n){i||(Kt(t.$$.fragment,n),i=!0)},o(n){lr(t.$$.fragment,n),i=!1},d(n){r[18](null),sn(t,n)}}}function j5(r,t,e){let i;const o=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getMenuSurface","getElement"];let a=ei(t,o),{$$slots:s={},$$scope:n}=t;const{closest:l}=Ch,u=wa(oa());let{use:h=[]}=t,{class:v=""}=t,{open:d=!1}=t,p,_,b,x;bo(()=>(e(3,_=new L5({addClassToElementAtIndex:(j,H)=>{x.addClassForElementIndex(j,H)},removeClassFromElementAtIndex:(j,H)=>{x.removeClassForElementIndex(j,H)},addAttributeToElementAtIndex:(j,H,Y)=>{x.setAttributeForElementIndex(j,H,Y)},removeAttributeFromElementAtIndex:(j,H)=>{x.removeAttributeForElementIndex(j,H)},getAttributeFromElementAtIndex:(j,H)=>x.getAttributeFromElementIndex(j,H),elementContainsClass:(j,H)=>j.classList.contains(H),closeSurface:j=>b.closeProgrammatic(j),getElementIndex:j=>x.getOrderedList().map(H=>H.element).indexOf(j),notifySelected:j=>Di(M(),"SMUIMenu:selected",{index:j.index,item:x.getOrderedList()[j.index].element},void 0,!0),getMenuItemCount:()=>x.items.length,focusItemAtIndex:j=>x.focusItemAtIndex(j),focusListRoot:()=>"focus"in x.element&&x.element.focus(),isSelectableItemAtIndex:j=>!!l(x.getOrderedList()[j].element,`.${dh.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:j=>{const H=x.getOrderedList(),Y=l(H[j].element,`.${dh.MENU_SELECTION_GROUP}`),J=Y==null?void 0:Y.querySelector(`.${dh.MENU_SELECTED_LIST_ITEM}`);return J?H.map(ne=>ne.element).indexOf(J):-1}})),Di(M(),"SMUIMenu:mount",_),_.init(),()=>{_.destroy()}));function E(j){_&&_.handleKeydown(j)}function A(j){b||(b=j.detail)}function P(j){x||e(4,x=j.detail)}function D(){return d}function R(j){e(0,d=j)}function S(j){_.setDefaultFocusState(j)}function I(){return _.getSelectedIndex()}function T(){return p}function M(){return p.getElement()}function z(j){ci[j?"unshift":"push"](()=>{p=j,e(2,p)})}function U(j){d=j,e(0,d)}const F=()=>_&&_.handleMenuSurfaceOpened(),V=j=>_&&_.handleItemAction(x.getOrderedList()[j.detail.index].element);return r.$$set=j=>{t=cn(cn({},t),ga(j)),e(9,a=ei(t,o)),"use"in j&&e(10,h=j.use),"class"in j&&e(1,v=j.class),"open"in j&&e(0,d=j.open),"$$scope"in j&&e(22,n=j.$$scope)},r.$$.update=()=>{r.$$.dirty&1024&&e(5,i=[u,...h])},[d,v,p,_,x,i,E,A,P,a,h,D,R,S,I,T,M,s,z,U,F,V,n]}class y0 extends ki{constructor(t){super(),Mi(this,t,j5,W5,_i,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getMenuSurface:15,getElement:16})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getMenuSurface(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}function Y5(r){let t;const e=r[10].default,i=Ni(e,r,r[12],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&4096)&&Hi(i,e,o,o[12],t?Ui(e,o[12],a,null):Vi(o[12]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function X5(r){let t,e,i;const o=[{tag:r[3]},{use:[r[5],...r[0]]},{class:Pn({[r[1]]:!0,"mdc-button__label":r[6]==="button","mdc-fab__label":r[6]==="fab","mdc-tab__text-label":r[6]==="tab","mdc-image-list__label":r[6]==="image-list","mdc-snackbar__label":r[6]==="snackbar","mdc-banner__text":r[6]==="banner","mdc-segmented-button__label":r[6]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":r[6]==="data-table:pagination","mdc-data-table__header-cell-label":r[6]==="data-table:sortable-header-cell"})},r[6]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:r[7]},r[8]];var a=r[2];function s(n){let l={$$slots:{default:[Y5]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[11](t)),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,[l]){const u=l&491?li(o,[l&8&&{tag:n[3]},l&33&&{use:[n[5],...n[0]]},l&66&&{class:Pn({[n[1]]:!0,"mdc-button__label":n[6]==="button","mdc-fab__label":n[6]==="fab","mdc-tab__text-label":n[6]==="tab","mdc-image-list__label":n[6]==="image-list","mdc-snackbar__label":n[6]==="snackbar","mdc-banner__text":n[6]==="banner","mdc-segmented-button__label":n[6]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":n[6]==="data-table:pagination","mdc-data-table__header-cell-label":n[6]==="data-table:sortable-header-cell"})},l&64&&pa(n[6]==="snackbar"?{"aria-atomic":"false"}:{}),l&128&&{tabindex:n[7]},l&256&&pa(n[8])]):{};if(l&4096&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[2])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[11](t),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[11](null),n&&Sr(e),t&&sn(t,n)}}}function K5(r,t,e){const i=["use","class","component","tag","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,h,{component:v=ls}=t,{tag:d=v===ls?"span":void 0}=t;const p=Ki("SMUI:label:context"),_=Ki("SMUI:label:tabindex");function b(){return h.getElement()}function x(E){ci[E?"unshift":"push"](()=>{h=E,e(4,h)})}return r.$$set=E=>{t=cn(cn({},t),ga(E)),e(8,o=ei(t,i)),"use"in E&&e(0,l=E.use),"class"in E&&e(1,u=E.class),"component"in E&&e(2,v=E.component),"tag"in E&&e(3,d=E.tag),"$$scope"in E&&e(12,s=E.$$scope)},[l,u,v,d,h,n,p,_,o,b,a,x,s]}class Xb extends ki{constructor(t){super(),Mi(this,t,K5,X5,_i,{use:0,class:1,component:2,tag:3,getElement:9})}get getElement(){return this.$$.ctx[9]}}function J5(r){let t;const e=r[11].default,i=Ni(e,r,r[13],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&8192)&&Hi(i,e,o,o[13],t?Ui(e,o[13],a,null):Vi(o[13]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function $5(r){let t,e,i;const o=[{tag:r[4]},{use:[r[6],...r[0]]},{class:Pn({[r[1]]:!0,"mdc-button__icon":r[8]==="button","mdc-fab__icon":r[8]==="fab","mdc-icon-button__icon":r[8]==="icon-button","mdc-icon-button__icon--on":r[8]==="icon-button"&&r[2],"mdc-tab__icon":r[8]==="tab","mdc-banner__icon":r[8]==="banner","mdc-segmented-button__icon":r[8]==="segmented-button"})},{"aria-hidden":"true"},r[7]?{focusable:"false",tabindex:"-1"}:{},r[9]];var a=r[3];function s(n){let l={$$slots:{default:[J5]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[12](t)),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,[l]){const u=l&983?li(o,[l&16&&{tag:n[4]},l&65&&{use:[n[6],...n[0]]},l&262&&{class:Pn({[n[1]]:!0,"mdc-button__icon":n[8]==="button","mdc-fab__icon":n[8]==="fab","mdc-icon-button__icon":n[8]==="icon-button","mdc-icon-button__icon--on":n[8]==="icon-button"&&n[2],"mdc-tab__icon":n[8]==="tab","mdc-banner__icon":n[8]==="banner","mdc-segmented-button__icon":n[8]==="segmented-button"})},o[3],l&128&&pa(n[7]?{focusable:"false",tabindex:"-1"}:{}),l&512&&pa(n[9])]):{};if(l&8192&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[3])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[12](t),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[12](null),n&&Sr(e),t&&sn(t,n)}}}function Q5(r,t,e){const i=["use","class","on","component","tag","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{on:h=!1}=t,v,{component:d=ls}=t,{tag:p=d===ls?"i":void 0}=t;const _=d===aD,b=Ki("SMUI:icon:context");function x(){return v.getElement()}function E(A){ci[A?"unshift":"push"](()=>{v=A,e(5,v)})}return r.$$set=A=>{t=cn(cn({},t),ga(A)),e(9,o=ei(t,i)),"use"in A&&e(0,l=A.use),"class"in A&&e(1,u=A.class),"on"in A&&e(2,h=A.on),"component"in A&&e(3,d=A.component),"tag"in A&&e(4,p=A.tag),"$$scope"in A&&e(13,s=A.$$scope)},[l,u,h,d,p,v,n,_,b,o,x,a,E,s]}class _0 extends ki{constructor(t){super(),Mi(this,t,Q5,$5,_i,{use:0,class:1,on:2,component:3,tag:4,getElement:10})}get getElement(){return this.$$.ctx[10]}}function q5(r){let t=r[1],e,i,o=r[1]&&Km(r);return{c(){o&&o.c(),e=ea()},m(a,s){o&&o.m(a,s),Er(a,e,s),i=!0},p(a,s){a[1]?t?_i(t,a[1])?(o.d(1),o=Km(a),o.c(),o.m(e.parentNode,e)):o.p(a,s):(o=Km(a),o.c(),o.m(e.parentNode,e)):t&&(o.d(1),o=null),t=a[1]},i(a){i||(Kt(o),i=!0)},o(a){lr(o),i=!1},d(a){a&&Sr(e),o&&o.d(a)}}}function eD(r){let t=r[1],e,i=r[1]&&Jm(r);return{c(){i&&i.c(),e=ea()},m(o,a){i&&i.m(o,a),Er(o,e,a)},p(o,a){o[1]?t?_i(t,o[1])?(i.d(1),i=Jm(o),i.c(),i.m(e.parentNode,e)):i.p(o,a):(i=Jm(o),i.c(),i.m(e.parentNode,e)):t&&(i.d(1),i=null),t=o[1]},i:qi,o:qi,d(o){o&&Sr(e),i&&i.d(o)}}}function Km(r){let t,e,i,o,a;const s=r[8].default,n=Ni(s,r,r[7],null);let l=[r[5]],u={};for(let h=0;h<l.length;h+=1)u=cn(u,l[h]);return{c(){t=_n(r[1]),n&&n.c(),/-/.test(r[1])?hp(t,u):Xn(t,u)},m(h,v){Er(h,t,v),n&&n.m(t,null),r[10](t),i=!0,o||(a=[ri(e=ma.call(null,t,r[0])),ri(r[4].call(null,t))],o=!0)},p(h,v){n&&n.p&&(!i||v&128)&&Hi(n,s,h,h[7],i?Ui(s,h[7],v,null):Vi(h[7]),null),u=li(l,[v&32&&h[5]]),/-/.test(h[1])?hp(t,u):Xn(t,u),e&&Ci(e.update)&&v&1&&e.update.call(null,h[0])},i(h){i||(Kt(n,h),i=!0)},o(h){lr(n,h),i=!1},d(h){h&&Sr(t),n&&n.d(h),r[10](null),o=!1,Ma(a)}}}function Jm(r){let t,e,i,o,a=[r[5]],s={};for(let n=0;n<a.length;n+=1)s=cn(s,a[n]);return{c(){t=_n(r[1]),/-/.test(r[1])?hp(t,s):Xn(t,s)},m(n,l){Er(n,t,l),r[9](t),i||(o=[ri(e=ma.call(null,t,r[0])),ri(r[4].call(null,t))],i=!0)},p(n,l){s=li(a,[l&32&&n[5]]),/-/.test(n[1])?hp(t,s):Xn(t,s),e&&Ci(e.update)&&l&1&&e.update.call(null,n[0])},d(n){n&&Sr(t),r[9](null),i=!1,Ma(o)}}}function tD(r){let t,e,i,o;const a=[eD,q5],s=[];function n(l,u){return l[3]?0:1}return t=n(r),e=s[t]=a[t](r),{c(){e.c(),i=ea()},m(l,u){s[t].m(l,u),Er(l,i,u),o=!0},p(l,[u]){let h=t;t=n(l),t===h?s[t].p(l,u):(Ri(),lr(s[h],1,1,()=>{s[h]=null}),Fi(),e=s[t],e?e.p(l,u):(e=s[t]=a[t](l),e.c()),Kt(e,1),e.m(i.parentNode,i))},i(l){o||(Kt(e),o=!0)},o(l){lr(e),o=!1},d(l){s[t].d(l),l&&Sr(i)}}}function rD(r,t,e){let i;const o=["use","tag","getElement"];let a=ei(t,o),{$$slots:s={},$$scope:n}=t,{use:l=[]}=t,{tag:u}=t;const h=wa(oa());let v;function d(){return v}function p(b){ci[b?"unshift":"push"](()=>{v=b,e(2,v)})}function _(b){ci[b?"unshift":"push"](()=>{v=b,e(2,v)})}return r.$$set=b=>{t=cn(cn({},t),ga(b)),e(5,a=ei(t,o)),"use"in b&&e(0,l=b.use),"tag"in b&&e(1,u=b.tag),"$$scope"in b&&e(7,n=b.$$scope)},r.$$.update=()=>{r.$$.dirty&2&&e(3,i=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(u)>-1)},[l,u,v,i,h,a,d,n,s,p,_]}class ls extends ki{constructor(t){super(),Mi(this,t,rD,tD,_i,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function nD(r){let t,e,i,o,a;const s=r[6].default,n=Ni(s,r,r[5],null);let l=[r[3]],u={};for(let h=0;h<l.length;h+=1)u=cn(u,l[h]);return{c(){t=su("svg"),n&&n.c(),Eg(t,u)},m(h,v){Er(h,t,v),n&&n.m(t,null),r[7](t),i=!0,o||(a=[ri(e=ma.call(null,t,r[0])),ri(r[2].call(null,t))],o=!0)},p(h,[v]){n&&n.p&&(!i||v&32)&&Hi(n,s,h,h[5],i?Ui(s,h[5],v,null):Vi(h[5]),null),Eg(t,u=li(l,[v&8&&h[3]])),e&&Ci(e.update)&&v&1&&e.update.call(null,h[0])},i(h){i||(Kt(n,h),i=!0)},o(h){lr(n,h),i=!1},d(h){h&&Sr(t),n&&n.d(h),r[7](null),o=!1,Ma(a)}}}function iD(r,t,e){const i=["use","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t,{use:n=[]}=t;const l=wa(oa());let u;function h(){return u}function v(d){ci[d?"unshift":"push"](()=>{u=d,e(1,u)})}return r.$$set=d=>{t=cn(cn({},t),ga(d)),e(3,o=ei(t,i)),"use"in d&&e(0,n=d.use),"$$scope"in d&&e(5,s=d.$$scope)},[n,u,l,o,h,s,a,v]}class aD extends ki{constructor(t){super(),Mi(this,t,iD,nD,_i,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function oD(r){let t;const e=r[11].default,i=Ni(e,r,r[13],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&8192)&&Hi(i,e,o,o[13],t?Ui(e,o[13],a,null):Vi(o[13]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function sD(r){let t,e,i;const o=[{tag:r[3]},{use:[r[8],...r[0]]},{class:Pn({[r[1]]:!0,[r[6]]:!0,...r[5]})},r[7],r[9]];var a=r[2];function s(n){let l={$$slots:{default:[oD]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[12](t)),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,[l]){const u=l&1003?li(o,[l&8&&{tag:n[3]},l&257&&{use:[n[8],...n[0]]},l&98&&{class:Pn({[n[1]]:!0,[n[6]]:!0,...n[5]})},l&128&&pa(n[7]),l&512&&pa(n[9])]):{};if(l&8192&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[2])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[12](t),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[12](null),n&&Sr(e),t&&sn(t,n)}}}const Lc={component:ls,tag:"div",class:"",classMap:{},contexts:{},props:{}};function lD(r,t,e){const i=["use","class","component","tag","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t,{use:n=[]}=t,{class:l=""}=t,u;const h=Lc.class,v={},d=[],p=Lc.contexts,_=Lc.props;let{component:b=Lc.component}=t,{tag:x=b===ls?Lc.tag:void 0}=t;Object.entries(Lc.classMap).forEach(([D,R])=>{const S=Ki(R);S&&"subscribe"in S&&d.push(S.subscribe(I=>{e(5,v[D]=I,v)}))});const E=wa(oa());for(let D in p)p.hasOwnProperty(D)&&wi(D,p[D]);Vc(()=>{for(const D of d)D()});function A(){return u.getElement()}function P(D){ci[D?"unshift":"push"](()=>{u=D,e(4,u)})}return r.$$set=D=>{t=cn(cn({},t),ga(D)),e(9,o=ei(t,i)),"use"in D&&e(0,n=D.use),"class"in D&&e(1,l=D.class),"component"in D&&e(2,b=D.component),"tag"in D&&e(3,x=D.tag),"$$scope"in D&&e(13,s=D.$$scope)},[n,l,b,x,u,v,h,_,E,o,A,a,P,s]}class uD extends ki{constructor(t){super(),Mi(this,t,lD,sD,_i,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const Iy=Object.assign({},Lc);function nl(r){return new Proxy(uD,{construct:function(t,e){return Object.assign(Lc,Iy,r),new t(...e)},get:function(t,e){return Object.assign(Lc,Iy,r),t[e]}})}function cD(r){let t;const e=r[41].default,i=Ni(e,r,r[43],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a[1]&4096)&&Hi(i,e,o,o[43],t?Ui(e,o[43],a,null):Vi(o[43]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function fD(r){let t,e,i;const o=[{tag:r[13]},{use:[r[16],...r[0]]},{class:Pn({[r[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":r[2],"mdc-deprecated-list--dense":r[3],"mdc-deprecated-list--textual-list":r[4],"mdc-deprecated-list--avatar-list":r[5]||r[17],"mdc-deprecated-list--icon-list":r[6],"mdc-deprecated-list--image-list":r[7],"mdc-deprecated-list--thumbnail-list":r[8],"mdc-deprecated-list--video-list":r[9],"mdc-deprecated-list--two-line":r[10],"smui-list--three-line":r[11]&&!r[10]})},{role:r[15]},r[25]];var a=r[12];function s(n){let l={$$slots:{default:[cD]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[42](t),t.$on("keydown",r[20]),t.$on("focusin",r[21]),t.$on("focusout",r[22]),t.$on("click",r[23]),t.$on("SMUIListItem:mount",r[18]),t.$on("SMUIListItem:unmount",r[19]),t.$on("SMUI:action",r[24])),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,l){const u=l[0]&33796095?li(o,[l[0]&8192&&{tag:n[13]},l[0]&65537&&{use:[n[16],...n[0]]},l[0]&135166&&{class:Pn({[n[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":n[2],"mdc-deprecated-list--dense":n[3],"mdc-deprecated-list--textual-list":n[4],"mdc-deprecated-list--avatar-list":n[5]||n[17],"mdc-deprecated-list--icon-list":n[6],"mdc-deprecated-list--image-list":n[7],"mdc-deprecated-list--thumbnail-list":n[8],"mdc-deprecated-list--video-list":n[9],"mdc-deprecated-list--two-line":n[10],"smui-list--three-line":n[11]&&!n[10]})},l[0]&32768&&{role:n[15]},l[0]&33554432&&pa(n[25])]):{};if(l[1]&4096&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[12])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[42](t),t.$on("keydown",n[20]),t.$on("focusin",n[21]),t.$on("focusout",n[22]),t.$on("click",n[23]),t.$on("SMUIListItem:mount",n[18]),t.$on("SMUIListItem:unmount",n[19]),t.$on("SMUI:action",n[24]),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[42](null),n&&Sr(e),t&&sn(t,n)}}}function hD(r,t,e){const i=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","disabledItemsFocusable","selectedIndex","radioList","checkList","hasTypeahead","component","tag","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;var n;const{closest:l,matches:u}=Ch,h=wa(oa());let{use:v=[]}=t,{class:d=""}=t,{nonInteractive:p=!1}=t,{dense:_=!1}=t,{textualList:b=!1}=t,{avatarList:x=!1}=t,{iconList:E=!1}=t,{imageList:A=!1}=t,{thumbnailList:P=!1}=t,{videoList:D=!1}=t,{twoLine:R=!1}=t,{threeLine:S=!1}=t,{vertical:I=!0}=t,{wrapFocus:T=(n=Ki("SMUI:list:wrapFocus"))!==null&&n!==void 0?n:!1}=t,{singleSelection:M=!1}=t,{disabledItemsFocusable:z=!1}=t,{selectedIndex:U=-1}=t,{radioList:F=!1}=t,{checkList:V=!1}=t,{hasTypeahead:j=!1}=t,H,Y,J=[],ne=Ki("SMUI:list:role"),q=Ki("SMUI:list:nav");const we=new WeakMap;let ee=Ki("SMUI:dialog:selection"),X=Ki("SMUI:addLayoutListener"),re,{component:de=ls}=t,{tag:me=de===ls?q?"nav":"ul":void 0}=t;wi("SMUI:list:nonInteractive",p),wi("SMUI:separator:context","list"),ne||(M?(ne="listbox",wi("SMUI:list:item:role","option")):F?(ne="radiogroup",wi("SMUI:list:item:role","radio")):V?(ne="group",wi("SMUI:list:item:role","checkbox")):(ne="list",wi("SMUI:list:item:role",void 0))),X&&(re=X(je)),bo(()=>{e(40,Y=new M5({addClassForElementIndex:ce,focusItemAtIndex:te,getAttributeForElementIndex:(it,Ne)=>{var ht,Tt;return(Tt=(ht=K()[it])===null||ht===void 0?void 0:ht.getAttr(Ne))!==null&&Tt!==void 0?Tt:null},getFocusedElementIndex:()=>document.activeElement?K().map(it=>it.element).indexOf(document.activeElement):-1,getListItemCount:()=>J.length,getPrimaryTextAtIndex:ye,hasCheckboxAtIndex:it=>{var Ne,ht;return(ht=(Ne=K()[it])===null||Ne===void 0?void 0:Ne.hasCheckbox)!==null&&ht!==void 0?ht:!1},hasRadioAtIndex:it=>{var Ne,ht;return(ht=(Ne=K()[it])===null||Ne===void 0?void 0:Ne.hasRadio)!==null&&ht!==void 0?ht:!1},isCheckboxCheckedAtIndex:it=>{var Ne;const ht=K()[it];return(Ne=(ht==null?void 0:ht.hasCheckbox)&&ht.checked)!==null&&Ne!==void 0?Ne:!1},isFocusInsideList:()=>H!=null&&Ie()!==document.activeElement&&Ie().contains(document.activeElement),isRootFocused:()=>H!=null&&document.activeElement===Ie(),listItemAtIndexHasClass:ie,notifyAction:it=>{e(26,U=it),H!=null&&Di(Ie(),"SMUIList:action",{index:it},void 0,!0)},notifySelectionChange:it=>{H!=null&&Di(Ie(),"SMUIList:selectionChange",{changedIndices:it})},removeClassForElementIndex:ae,setAttributeForElementIndex:ve,setCheckedCheckboxOrRadioAtIndex:(it,Ne)=>{K()[it].checked=Ne},setTabIndexForListItemChildren:(it,Ne)=>{const ht=K()[it],Tt="button:not(:disabled), a";Array.prototype.forEach.call(ht.element.querySelectorAll(Tt),Xt=>{Xt.setAttribute("tabindex",Ne)})}}));const Qe={get element(){return Ie()},get items(){return J},get typeaheadInProgress(){return Y.isTypeaheadInProgress()},typeaheadMatchItem(it,Ne){return Y.typeaheadMatchItem(it,Ne,!0)},getOrderedList:K,focusItemAtIndex:te,addClassForElementIndex:ce,removeClassForElementIndex:ae,setAttributeForElementIndex:ve,removeAttributeForElementIndex:pe,getAttributeFromElementIndex:he,getPrimaryTextAtIndex:ye};return Di(Ie(),"SMUIList:mount",Qe),Y.init(),Y.layout(),()=>{Y.destroy()}}),Vc(()=>{re&&re()});function xe(Qe){J.push(Qe.detail),we.set(Qe.detail.element,Qe.detail),M&&Qe.detail.selected&&e(26,U=_e(Qe.detail.element)),Qe.stopPropagation()}function He(Qe){var it;const Ne=(it=Qe.detail&&J.indexOf(Qe.detail))!==null&&it!==void 0?it:-1;Ne!==-1&&(J.splice(Ne,1),J=J,we.delete(Qe.detail.element)),Qe.stopPropagation()}function Re(Qe){Y&&Qe.target&&Y.handleKeydown(Qe,Qe.target.classList.contains("mdc-deprecated-list-item"),_e(Qe.target))}function Ee(Qe){Y&&Qe.target&&Y.handleFocusIn(_e(Qe.target))}function ke(Qe){Y&&Qe.target&&Y.handleFocusOut(_e(Qe.target))}function $(Qe){Y&&Qe.target&&Y.handleClick(_e(Qe.target),!u(Qe.target,'input[type="checkbox"], input[type="radio"]'),Qe)}function le(Qe){if(F||V){const it=_e(Qe.target);if(it!==-1){const Ne=K()[it];Ne&&(F&&!Ne.checked||V)&&(u(Qe.detail.target,'input[type="checkbox"], input[type="radio"]')||(Ne.checked=!Ne.checked),Ne.activateRipple(),window.requestAnimationFrame(()=>{Ne.deactivateRipple()}))}}}function K(){return H==null?[]:[...Ie().children].map(Qe=>we.get(Qe)).filter(Qe=>Qe&&Qe._smui_list_item_accessor)}function te(Qe){const it=K()[Qe];it&&"focus"in it.element&&it.element.focus()}function ie(Qe,it){var Ne;const ht=K()[Qe];return(Ne=ht&&ht.hasClass(it))!==null&&Ne!==void 0?Ne:!1}function ce(Qe,it){const Ne=K()[Qe];Ne&&Ne.addClass(it)}function ae(Qe,it){const Ne=K()[Qe];Ne&&Ne.removeClass(it)}function ve(Qe,it,Ne){const ht=K()[Qe];ht&&ht.addAttr(it,Ne)}function pe(Qe,it){const Ne=K()[Qe];Ne&&Ne.removeAttr(it)}function he(Qe,it){const Ne=K()[Qe];return Ne?Ne.getAttr(it):null}function ye(Qe){var it;const Ne=K()[Qe];return(it=Ne&&Ne.getPrimaryText())!==null&&it!==void 0?it:""}function _e(Qe){const it=l(Qe,".mdc-deprecated-list-item, .mdc-deprecated-list");return it&&u(it,".mdc-deprecated-list-item")?K().map(Ne=>Ne==null?void 0:Ne.element).indexOf(it):-1}function je(){return Y.layout()}function Je(Qe,it){return Y.setEnabled(Qe,it)}function nt(){return Y.isTypeaheadInProgress()}function at(){return Y.getSelectedIndex()}function Fe(){return Y.getFocusedItemIndex()}function Ie(){return H.getElement()}function Ke(Qe){ci[Qe?"unshift":"push"](()=>{H=Qe,e(14,H)})}return r.$$set=Qe=>{t=cn(cn({},t),ga(Qe)),e(25,o=ei(t,i)),"use"in Qe&&e(0,v=Qe.use),"class"in Qe&&e(1,d=Qe.class),"nonInteractive"in Qe&&e(2,p=Qe.nonInteractive),"dense"in Qe&&e(3,_=Qe.dense),"textualList"in Qe&&e(4,b=Qe.textualList),"avatarList"in Qe&&e(5,x=Qe.avatarList),"iconList"in Qe&&e(6,E=Qe.iconList),"imageList"in Qe&&e(7,A=Qe.imageList),"thumbnailList"in Qe&&e(8,P=Qe.thumbnailList),"videoList"in Qe&&e(9,D=Qe.videoList),"twoLine"in Qe&&e(10,R=Qe.twoLine),"threeLine"in Qe&&e(11,S=Qe.threeLine),"vertical"in Qe&&e(27,I=Qe.vertical),"wrapFocus"in Qe&&e(28,T=Qe.wrapFocus),"singleSelection"in Qe&&e(29,M=Qe.singleSelection),"disabledItemsFocusable"in Qe&&e(30,z=Qe.disabledItemsFocusable),"selectedIndex"in Qe&&e(26,U=Qe.selectedIndex),"radioList"in Qe&&e(31,F=Qe.radioList),"checkList"in Qe&&e(32,V=Qe.checkList),"hasTypeahead"in Qe&&e(33,j=Qe.hasTypeahead),"component"in Qe&&e(12,de=Qe.component),"tag"in Qe&&e(13,me=Qe.tag),"$$scope"in Qe&&e(43,s=Qe.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&134217728|r.$$.dirty[1]&512&&Y&&Y.setVerticalOrientation(I),r.$$.dirty[0]&268435456|r.$$.dirty[1]&512&&Y&&Y.setWrapFocus(T),r.$$.dirty[1]&516&&Y&&Y.setHasTypeahead(j),r.$$.dirty[0]&536870912|r.$$.dirty[1]&512&&Y&&Y.setSingleSelection(M),r.$$.dirty[0]&1073741824|r.$$.dirty[1]&512&&Y&&Y.setDisabledItemsFocusable(z),r.$$.dirty[0]&603979776|r.$$.dirty[1]&512&&Y&&M&&at()!==U&&Y.setSelectedIndex(U)},[v,d,p,_,b,x,E,A,P,D,R,S,de,me,H,ne,h,ee,xe,He,Re,Ee,ke,$,le,o,U,I,T,M,z,F,V,j,je,Je,nt,at,Fe,Ie,Y,a,Ke,s]}class qp extends ki{constructor(t){super(),Mi(this,t,hD,fD,_i,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:27,wrapFocus:28,singleSelection:29,disabledItemsFocusable:30,selectedIndex:26,radioList:31,checkList:32,hasTypeahead:33,component:12,tag:13,layout:34,setEnabled:35,getTypeaheadInProgress:36,getSelectedIndex:37,getFocusedItemIndex:38,getElement:39},null,[-1,-1])}get layout(){return this.$$.ctx[34]}get setEnabled(){return this.$$.ctx[35]}get getTypeaheadInProgress(){return this.$$.ctx[36]}get getSelectedIndex(){return this.$$.ctx[37]}get getFocusedItemIndex(){return this.$$.ctx[38]}get getElement(){return this.$$.ctx[39]}}var Kd;function dD(r,t){t===void 0&&(t=!1);var e=r.CSS,i=Kd;if(typeof Kd=="boolean"&&!t)return Kd;var o=e&&typeof e.supports=="function";if(!o)return!1;var a=e.supports("--css-vars","yes"),s=e.supports("(--css-vars: yes)")&&e.supports("color","#00000000");return i=a||s,t||(Kd=i),i}function pD(r,t,e){if(!r)return{x:0,y:0};var i=t.x,o=t.y,a=i+e.left,s=o+e.top,n,l;if(r.type==="touchstart"){var u=r;n=u.changedTouches[0].pageX-a,l=u.changedTouches[0].pageY-s}else{var h=r;n=h.pageX-a,l=h.pageY-s}return{x:n,y:l}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var mD={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},vD={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Ly={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Py=["touchstart","pointerdown","mousedown","keydown"],Ry=["touchend","pointerup","mouseup","contextmenu"],Jd=[],gD=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.activationAnimationHasEnded=!1,i.activationTimer=0,i.fgDeactivationRemovalTimer=0,i.fgScale="0",i.frame={width:0,height:0},i.initialSize=0,i.layoutFrame=0,i.maxRadius=0,i.unboundedCoords={left:0,top:0},i.activationState=i.defaultActivationState(),i.activationTimerCallback=function(){i.activationAnimationHasEnded=!0,i.runDeactivationUXLogicIfReady()},i.activateHandler=function(o){i.activateImpl(o)},i.deactivateHandler=function(){i.deactivateImpl()},i.focusHandler=function(){i.handleFocus()},i.blurHandler=function(){i.handleBlur()},i.resizeHandler=function(){i.layout()},i}return Object.defineProperty(t,"cssClasses",{get:function(){return mD},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return vD},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this,i=this.supportsPressRipple();if(this.registerRootHandlers(i),i){var o=t.cssClasses,a=o.ROOT,s=o.UNBOUNDED;requestAnimationFrame(function(){e.adapter.addClass(a),e.adapter.isUnbounded()&&(e.adapter.addClass(s),e.layoutInternal())})}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var i=t.cssClasses,o=i.ROOT,a=i.UNBOUNDED;requestAnimationFrame(function(){e.adapter.removeClass(o),e.adapter.removeClass(a),e.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(e){this.activateImpl(e)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var e=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){e.layoutInternal(),e.layoutFrame=0})},t.prototype.setUnbounded=function(e){var i=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame(function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)})},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame(function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)})},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(e){var i,o;if(e){try{for(var a=ml(Py),s=a.next();!s.done;s=a.next()){var n=s.value;this.adapter.registerInteractionHandler(n,this.activateHandler)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(e){var i,o;if(e.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var a=ml(Ry),s=a.next();!s.done;s=a.next()){var n=s.value;this.adapter.registerDocumentInteractionHandler(n,this.deactivateHandler)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}},t.prototype.deregisterRootHandlers=function(){var e,i;try{for(var o=ml(Py),a=o.next();!a.done;a=o.next()){var s=a.value;this.adapter.deregisterInteractionHandler(s,this.activateHandler)}}catch(n){e={error:n}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var e,i;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var o=ml(Ry),a=o.next();!a.done;a=o.next()){var s=a.value;this.adapter.deregisterDocumentInteractionHandler(s,this.deactivateHandler)}}catch(n){e={error:n}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},t.prototype.removeCssVars=function(){var e=this,i=t.strings,o=Object.keys(i);o.forEach(function(a){a.indexOf("VAR_")===0&&e.adapter.updateCssVariable(i[a],null)})},t.prototype.activateImpl=function(e){var i=this;if(!this.adapter.isSurfaceDisabled()){var o=this.activationState;if(!o.isActivated){var a=this.previousActivationEvent,s=a&&e!==void 0&&a.type!==e.type;if(!s){o.isActivated=!0,o.isProgrammatic=e===void 0,o.activationEvent=e,o.wasActivatedByPointer=o.isProgrammatic?!1:e!==void 0&&(e.type==="mousedown"||e.type==="touchstart"||e.type==="pointerdown");var n=e!==void 0&&Jd.length>0&&Jd.some(function(l){return i.adapter.containsEventTarget(l)});if(n){this.resetActivationState();return}e!==void 0&&(Jd.push(e.target),this.registerDeactivationHandlers(e)),o.wasElementMadeActive=this.checkElementMadeActive(e),o.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Jd=[],!o.wasElementMadeActive&&e!==void 0&&(e.key===" "||e.keyCode===32)&&(o.wasElementMadeActive=i.checkElementMadeActive(e),o.wasElementMadeActive&&i.animateActivation()),o.wasElementMadeActive||(i.activationState=i.defaultActivationState())})}}}},t.prototype.checkElementMadeActive=function(e){return e!==void 0&&e.type==="keydown"?this.adapter.isSurfaceActive():!0},t.prototype.animateActivation=function(){var e=this,i=t.strings,o=i.VAR_FG_TRANSLATE_START,a=i.VAR_FG_TRANSLATE_END,s=t.cssClasses,n=s.FG_DEACTIVATION,l=s.FG_ACTIVATION,u=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var h="",v="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates(),p=d.startPoint,_=d.endPoint;h=p.x+"px, "+p.y+"px",v=_.x+"px, "+_.y+"px"}this.adapter.updateCssVariable(o,h),this.adapter.updateCssVariable(a,v),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(n),this.adapter.computeBoundingRect(),this.adapter.addClass(l),this.activationTimer=setTimeout(function(){e.activationTimerCallback()},u)},t.prototype.getFgTranslationCoordinates=function(){var e=this.activationState,i=e.activationEvent,o=e.wasActivatedByPointer,a;o?a=pD(i,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):a={x:this.frame.width/2,y:this.frame.height/2},a={x:a.x-this.initialSize/2,y:a.y-this.initialSize/2};var s={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:a,endPoint:s}},t.prototype.runDeactivationUXLogicIfReady=function(){var e=this,i=t.cssClasses.FG_DEACTIVATION,o=this.activationState,a=o.hasDeactivationUXRun,s=o.isActivated,n=a||!s;n&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(i),this.fgDeactivationRemovalTimer=setTimeout(function(){e.adapter.removeClass(i)},Ly.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var e=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return e.previousActivationEvent=void 0},t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var e=this,i=this.activationState;if(!!i.isActivated){var o=aa({},i);i.isProgrammatic?(requestAnimationFrame(function(){e.animateDeactivation(o)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){e.activationState.hasDeactivationUXRun=!0,e.animateDeactivation(o),e.resetActivationState()}))}},t.prototype.animateDeactivation=function(e){var i=e.wasActivatedByPointer,o=e.wasElementMadeActive;(i||o)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var e=this;this.frame=this.adapter.computeBoundingRect();var i=Math.max(this.frame.height,this.frame.width),o=function(){var s=Math.sqrt(Math.pow(e.frame.width,2)+Math.pow(e.frame.height,2));return s+t.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?i:o();var a=Math.floor(i*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&a%2!==0?this.initialSize=a-1:this.initialSize=a,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var e=t.strings,i=e.VAR_FG_SIZE,o=e.VAR_LEFT,a=e.VAR_TOP,s=e.VAR_FG_SCALE;this.adapter.updateCssVariable(i,this.initialSize+"px"),this.adapter.updateCssVariable(s,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(o,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(a,this.unboundedCoords.top+"px"))},t}(ws);const{applyPassive:$d}=F5,{matches:yD}=Ch;function Hc(r,{ripple:t=!0,surface:e=!1,unbounded:i=!1,disabled:o=!1,color:a,active:s,rippleElement:n,eventTarget:l,activeTarget:u,addClass:h=_=>r.classList.add(_),removeClass:v=_=>r.classList.remove(_),addStyle:d=(_,b)=>r.style.setProperty(_,b),initPromise:p=Promise.resolve()}={}){let _,b=Ki("SMUI:addLayoutListener"),x,E=s,A=l,P=u;function D(){e?(h("mdc-ripple-surface"),a==="primary"?(h("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")):a==="secondary"?(v("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary")):(v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary"))):(v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),_&&E!==s&&(E=s,s?_.activate():s===!1&&_.deactivate()),t&&!_?(_=new gD({addClass:h,browserSupportsCssVars:()=>dD(window),computeBoundingRect:()=>(n||r).getBoundingClientRect(),containsEventTarget:S=>r.contains(S),deregisterDocumentInteractionHandler:(S,I)=>document.documentElement.removeEventListener(S,I,$d()),deregisterInteractionHandler:(S,I)=>(l||r).removeEventListener(S,I,$d()),deregisterResizeHandler:S=>window.removeEventListener("resize",S),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>s==null?yD(u||r,":active"):s,isSurfaceDisabled:()=>!!o,isUnbounded:()=>!!i,registerDocumentInteractionHandler:(S,I)=>document.documentElement.addEventListener(S,I,$d()),registerInteractionHandler:(S,I)=>(l||r).addEventListener(S,I,$d()),registerResizeHandler:S=>window.addEventListener("resize",S),removeClass:v,updateCssVariable:d}),p.then(()=>{_&&(_.init(),_.setUnbounded(i))})):_&&!t&&p.then(()=>{_&&(_.destroy(),_=void 0)}),_&&(A!==l||P!==u)&&(A=l,P=u,_.destroy(),requestAnimationFrame(()=>{_&&(_.init(),_.setUnbounded(i))})),!t&&i&&h("mdc-ripple-upgraded--unbounded")}D(),b&&(x=b(R));function R(){_&&_.layout()}return{update(S){({ripple:t,surface:e,unbounded:i,disabled:o,color:a,active:s,rippleElement:n,eventTarget:l,activeTarget:u,addClass:h,removeClass:v,addStyle:d,initPromise:p}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:I=>r.classList.add(I),removeClass:I=>r.classList.remove(I),addStyle:(I,T)=>r.style.setProperty(I,T),initPromise:Promise.resolve()},S)),D()},destroy(){_&&(_.destroy(),_=void 0,v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),x&&x()}}}function Fy(r){let t;return{c(){t=_n("span"),nn(t,"class","mdc-deprecated-list-item__ripple")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function _D(r){let t,e,i=r[7]&&Fy();const o=r[34].default,a=Ni(o,r,r[37],null);return{c(){i&&i.c(),t=ea(),a&&a.c()},m(s,n){i&&i.m(s,n),Er(s,t,n),a&&a.m(s,n),e=!0},p(s,n){s[7]?i||(i=Fy(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),a&&a.p&&(!e||n[1]&64)&&Hi(a,o,s,s[37],e?Ui(o,s[37],n,null):Vi(s[37]),null)},i(s){e||(Kt(a,s),e=!0)},o(s){lr(a,s),e=!1},d(s){i&&i.d(s),s&&Sr(t),a&&a.d(s)}}}function bD(r){let t,e,i;const o=[{tag:r[14]},{use:[...r[6]?[]:[[Hc,{ripple:!r[16],unbounded:!1,color:(r[1]||r[0])&&r[5]==null?"primary":r[5],disabled:r[10],addClass:r[24],removeClass:r[25],addStyle:r[26]}]],r[22],...r[2]]},{class:Pn({[r[3]]:!0,"mdc-deprecated-list-item":!r[8],"mdc-deprecated-list-item__wrapper":r[8],"mdc-deprecated-list-item--activated":r[1],"mdc-deprecated-list-item--selected":r[0],"mdc-deprecated-list-item--disabled":r[10],"mdc-menu-item--selected":!r[23]&&r[9]==="menuitem"&&r[0],"smui-menu-item--non-interactive":r[6],...r[18]})},{style:Object.entries(r[19]).map(Oy).concat([r[4]]).join(" ")},r[23]&&r[1]?{"aria-current":"page"}:{},!r[23]||r[8]?{role:r[9]}:{},!r[23]&&r[9]==="option"?{"aria-selected":r[0]?"true":"false"}:{},!r[23]&&(r[9]==="radio"||r[9]==="checkbox")?{"aria-checked":r[16]&&r[16].checked?"true":"false"}:{},r[23]?{}:{"aria-disabled":r[10]?"true":"false"},{"data-menu-item-skip-restore-focus":r[11]||void 0},{tabindex:r[21]},{href:r[12]},r[20],r[29]];var a=r[13];function s(n){let l={$$slots:{default:[_D]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[35](t),t.$on("click",r[15]),t.$on("keydown",r[27]),t.$on("SMUIGenericInput:mount",r[28]),t.$on("SMUIGenericInput:unmount",r[36])),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,l){const u=l[0]&670916479?li(o,[l[0]&16384&&{tag:n[14]},l[0]&121701479&&{use:[...n[6]?[]:[[Hc,{ripple:!n[16],unbounded:!1,color:(n[1]||n[0])&&n[5]==null?"primary":n[5],disabled:n[10],addClass:n[24],removeClass:n[25],addStyle:n[26]}]],n[22],...n[2]]},l[0]&8652619&&{class:Pn({[n[3]]:!0,"mdc-deprecated-list-item":!n[8],"mdc-deprecated-list-item__wrapper":n[8],"mdc-deprecated-list-item--activated":n[1],"mdc-deprecated-list-item--selected":n[0],"mdc-deprecated-list-item--disabled":n[10],"mdc-menu-item--selected":!n[23]&&n[9]==="menuitem"&&n[0],"smui-menu-item--non-interactive":n[6],...n[18]})},l[0]&524304&&{style:Object.entries(n[19]).map(Oy).concat([n[4]]).join(" ")},l[0]&8388610&&pa(n[23]&&n[1]?{"aria-current":"page"}:{}),l[0]&8389376&&pa(!n[23]||n[8]?{role:n[9]}:{}),l[0]&8389121&&pa(!n[23]&&n[9]==="option"?{"aria-selected":n[0]?"true":"false"}:{}),l[0]&8454656&&pa(!n[23]&&(n[9]==="radio"||n[9]==="checkbox")?{"aria-checked":n[16]&&n[16].checked?"true":"false"}:{}),l[0]&8389632&&pa(n[23]?{}:{"aria-disabled":n[10]?"true":"false"}),l[0]&2048&&{"data-menu-item-skip-restore-focus":n[11]||void 0},l[0]&2097152&&{tabindex:n[21]},l[0]&4096&&{href:n[12]},l[0]&1048576&&pa(n[20]),l[0]&536870912&&pa(n[29])]):{};if(l[0]&128|l[1]&64&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[13])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[35](t),t.$on("click",n[15]),t.$on("keydown",n[27]),t.$on("SMUIGenericInput:mount",n[28]),t.$on("SMUIGenericInput:unmount",n[36]),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[35](null),n&&Sr(e),t&&sn(t,n)}}}let xD=0;const Oy=([r,t])=>`${r}: ${t};`;function wD(r,t,e){let i;const o=["use","class","style","color","nonInteractive","ripple","wrapper","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","tag","action","getPrimaryText","getElement"];let a=ei(t,o),{$$slots:s={},$$scope:n}=t;var l;const u=wa(oa());let h=()=>{};function v(ie){return ie===h}let{use:d=[]}=t,{class:p=""}=t,{style:_=""}=t,{color:b=void 0}=t,{nonInteractive:x=(l=Ki("SMUI:list:nonInteractive"))!==null&&l!==void 0?l:!1}=t;wi("SMUI:list:nonInteractive",void 0);let{ripple:E=!x}=t,{wrapper:A=!1}=t,{activated:P=!1}=t,{role:D=A?"presentation":Ki("SMUI:list:item:role")}=t;wi("SMUI:list:item:role",void 0);let{selected:R=!1}=t,{disabled:S=!1}=t,{skipRestoreFocus:I=!1}=t,{tabindex:T=h}=t,{inputId:M="SMUI-form-field-list-"+xD++}=t,{href:z=void 0}=t,U,F={},V={},j={},H,Y,J=Ki("SMUI:list:item:nav"),{component:ne=ls}=t,{tag:q=ne===ls?J?z?"a":"span":"li":void 0}=t;wi("SMUI:generic:input:props",{id:M}),wi("SMUI:separator:context",void 0),bo(()=>{if(!R&&!x){let ce=!0,ae=U;for(;ae.previousSibling;)if(ae=ae.previousSibling,ae.nodeType===1&&ae.classList.contains("mdc-deprecated-list-item")&&!ae.classList.contains("mdc-deprecated-list-item--disabled")){ce=!1;break}ce&&(Y=window.requestAnimationFrame(He))}const ie={_smui_list_item_accessor:!0,get element(){return le()},get selected(){return R},set selected(ce){e(0,R=ce)},hasClass:we,addClass:ee,removeClass:X,getAttr:de,addAttr:me,removeAttr:xe,getPrimaryText:$,get checked(){var ce;return(ce=H&&H.checked)!==null&&ce!==void 0?ce:!1},set checked(ce){H&&e(16,H.checked=!!ce,H)},get hasCheckbox(){return!!(H&&"_smui_checkbox_accessor"in H)},get hasRadio(){return!!(H&&"_smui_radio_accessor"in H)},activateRipple(){H&&H.activateRipple()},deactivateRipple(){H&&H.deactivateRipple()},getValue(){return a.value},action:ke,get tabindex(){return i},set tabindex(ce){e(30,T=ce)},get disabled(){return S},get activated(){return P},set activated(ce){e(1,P=ce)}};return Di(le(),"SMUIListItem:mount",ie),()=>{Di(le(),"SMUIListItem:unmount",ie)}}),Vc(()=>{Y&&window.cancelAnimationFrame(Y)});function we(ie){return ie in F?F[ie]:le().classList.contains(ie)}function ee(ie){F[ie]||e(18,F[ie]=!0,F)}function X(ie){(!(ie in F)||F[ie])&&e(18,F[ie]=!1,F)}function re(ie,ce){V[ie]!=ce&&(ce===""||ce==null?(delete V[ie],e(19,V)):e(19,V[ie]=ce,V))}function de(ie){var ce;return ie in j?(ce=j[ie])!==null&&ce!==void 0?ce:null:le().getAttribute(ie)}function me(ie,ce){j[ie]!==ce&&e(20,j[ie]=ce,j)}function xe(ie){(!(ie in j)||j[ie]!=null)&&e(20,j[ie]=void 0,j)}function He(){let ie=!0,ce=U.getElement();for(;ce.nextElementSibling;)if(ce=ce.nextElementSibling,ce.nodeType===1&&ce.classList.contains("mdc-deprecated-list-item")){const ae=ce.attributes.getNamedItem("tabindex");if(ae&&ae.value==="0"){ie=!1;break}}ie&&e(21,i=0)}function Re(ie){const ce=ie.key==="Enter",ae=ie.key==="Space";(ce||ae)&&ke(ie)}function Ee(ie){("_smui_checkbox_accessor"in ie.detail||"_smui_radio_accessor"in ie.detail)&&e(16,H=ie.detail)}function ke(ie){S||Di(le(),"SMUI:action",ie)}function $(){var ie,ce,ae;const ve=le(),pe=ve.querySelector(".mdc-deprecated-list-item__primary-text");if(pe)return(ie=pe.textContent)!==null&&ie!==void 0?ie:"";const he=ve.querySelector(".mdc-deprecated-list-item__text");return he?(ce=he.textContent)!==null&&ce!==void 0?ce:"":(ae=ve.textContent)!==null&&ae!==void 0?ae:""}function le(){return U.getElement()}function K(ie){ci[ie?"unshift":"push"](()=>{U=ie,e(17,U)})}const te=()=>e(16,H=void 0);return r.$$set=ie=>{t=cn(cn({},t),ga(ie)),e(29,a=ei(t,o)),"use"in ie&&e(2,d=ie.use),"class"in ie&&e(3,p=ie.class),"style"in ie&&e(4,_=ie.style),"color"in ie&&e(5,b=ie.color),"nonInteractive"in ie&&e(6,x=ie.nonInteractive),"ripple"in ie&&e(7,E=ie.ripple),"wrapper"in ie&&e(8,A=ie.wrapper),"activated"in ie&&e(1,P=ie.activated),"role"in ie&&e(9,D=ie.role),"selected"in ie&&e(0,R=ie.selected),"disabled"in ie&&e(10,S=ie.disabled),"skipRestoreFocus"in ie&&e(11,I=ie.skipRestoreFocus),"tabindex"in ie&&e(30,T=ie.tabindex),"inputId"in ie&&e(31,M=ie.inputId),"href"in ie&&e(12,z=ie.href),"component"in ie&&e(13,ne=ie.component),"tag"in ie&&e(14,q=ie.tag),"$$scope"in ie&&e(37,n=ie.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&1073808449&&e(21,i=v(T)?!x&&!S&&(R||H&&H.checked)?0:-1:T)},[R,P,d,p,_,b,x,E,A,D,S,I,z,ne,q,ke,H,U,F,V,j,i,u,J,ee,X,re,Re,Ee,a,T,M,$,le,s,K,te,n]}class Rf extends ki{constructor(t){super(),Mi(this,t,wD,bD,_i,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,wrapper:8,activated:1,role:9,selected:0,disabled:10,skipRestoreFocus:11,tabindex:30,inputId:31,href:12,component:13,tag:14,action:15,getPrimaryText:32,getElement:33},null,[-1,-1])}get action(){return this.$$.ctx[15]}get getPrimaryText(){return this.$$.ctx[32]}get getElement(){return this.$$.ctx[33]}}const em=nl({class:"mdc-deprecated-list-item__text",tag:"span"}),Dh=nl({class:"mdc-deprecated-list-item__primary-text",tag:"span"}),Pu=nl({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function TD(r){let t,e,i,o,a,s;const n=r[8].default,l=Ni(n,r,r[7],null);let u=[{class:e=Pn({[r[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":r[4]})},r[5]],h={};for(let v=0;v<u.length;v+=1)h=cn(h,u[v]);return{c(){t=_n("span"),l&&l.c(),Xn(t,h)},m(v,d){Er(v,t,d),l&&l.m(t,null),r[9](t),o=!0,a||(s=[ri(i=ma.call(null,t,r[0])),ri(r[3].call(null,t))],a=!0)},p(v,[d]){l&&l.p&&(!o||d&128)&&Hi(l,n,v,v[7],o?Ui(n,v[7],d,null):Vi(v[7]),null),Xn(t,h=li(u,[(!o||d&2&&e!==(e=Pn({[v[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":v[4]})))&&{class:e},d&32&&v[5]])),i&&Ci(i.update)&&d&1&&i.update.call(null,v[0])},i(v){o||(Kt(l,v),o=!0)},o(v){lr(l,v),o=!1},d(v){v&&Sr(t),l&&l.d(v),r[9](null),a=!1,Ma(s)}}}function AD(r,t,e){const i=["use","class","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,h,v=Ki("SMUI:list:graphic:menu-selection-group");function d(){return h}function p(_){ci[_?"unshift":"push"](()=>{h=_,e(2,h)})}return r.$$set=_=>{t=cn(cn({},t),ga(_)),e(5,o=ei(t,i)),"use"in _&&e(0,l=_.use),"class"in _&&e(1,u=_.class),"$$scope"in _&&e(7,s=_.$$scope)},[l,u,h,n,v,o,d,s,a,p]}class SD extends ki{constructor(t){super(),Mi(this,t,AD,TD,_i,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}nl({class:"mdc-deprecated-list-item__meta",tag:"span"});nl({class:"mdc-deprecated-list-group",tag:"div"});nl({class:"mdc-deprecated-list-group__subheader",tag:"h3"});function ED(r){let t,e,i;const o=[{tag:r[8]},{use:[r[10],...r[0]]},{class:Pn({[r[1]]:!0,"mdc-deprecated-list-divider":!0,"mdc-deprecated-list-divider--padded":r[2],"mdc-deprecated-list-divider--inset":r[3],"mdc-deprecated-list-divider--inset-leading":r[4],"mdc-deprecated-list-divider--inset-trailing":r[5],"mdc-deprecated-list-divider--inset-padding":r[6]})},{role:"separator"},r[11]];var a=r[7];function s(n){let l={};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s()),r[13](t)),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,[l]){const u=l&3455?li(o,[l&256&&{tag:n[8]},l&1025&&{use:[n[10],...n[0]]},l&126&&{class:Pn({[n[1]]:!0,"mdc-deprecated-list-divider":!0,"mdc-deprecated-list-divider--padded":n[2],"mdc-deprecated-list-divider--inset":n[3],"mdc-deprecated-list-divider--inset-leading":n[4],"mdc-deprecated-list-divider--inset-trailing":n[5],"mdc-deprecated-list-divider--inset-padding":n[6]})},o[3],l&2048&&pa(n[11])]):{};if(a!==(a=n[7])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s()),n[13](t),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[13](null),n&&Sr(e),t&&sn(t,n)}}}function CD(r,t,e){const i=["use","class","padded","inset","insetLeading","insetTrailing","insetPadding","component","tag","getElement"];let o=ei(t,i);const a=wa(oa());let{use:s=[]}=t,{class:n=""}=t,{padded:l=!1}=t,{inset:u=!1}=t,{insetLeading:h=!1}=t,{insetTrailing:v=!1}=t,{insetPadding:d=!1}=t,p,_=Ki("SMUI:list:item:nav"),b=Ki("SMUI:separator:context"),{component:x=ls}=t,{tag:E=x===ls?_||b!=="list"?"hr":"li":void 0}=t;function A(){return p.getElement()}function P(D){ci[D?"unshift":"push"](()=>{p=D,e(9,p)})}return r.$$set=D=>{t=cn(cn({},t),ga(D)),e(11,o=ei(t,i)),"use"in D&&e(0,s=D.use),"class"in D&&e(1,n=D.class),"padded"in D&&e(2,l=D.padded),"inset"in D&&e(3,u=D.inset),"insetLeading"in D&&e(4,h=D.insetLeading),"insetTrailing"in D&&e(5,v=D.insetTrailing),"insetPadding"in D&&e(6,d=D.insetPadding),"component"in D&&e(7,x=D.component),"tag"in D&&e(8,E=D.tag)},[s,n,l,u,h,v,d,x,E,p,a,o,A,P]}class md extends ki{constructor(t){super(),Mi(this,t,CD,ED,_i,{use:0,class:1,padded:2,inset:3,insetLeading:4,insetTrailing:5,insetPadding:6,component:7,tag:8,getElement:12})}get getElement(){return this.$$.ctx[12]}}nl({class:"mdc-menu__selection-group-icon",component:SD});function zy(r){let t;return{c(){t=_n("div"),nn(t,"class","mdc-button__touch")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function DD(r){let t,e,i,o;const a=r[28].default,s=Ni(a,r,r[30],null);let n=r[6]&&zy();return{c(){t=_n("div"),e=Rn(),s&&s.c(),n&&n.c(),i=ea(),nn(t,"class","mdc-button__ripple")},m(l,u){Er(l,t,u),Er(l,e,u),s&&s.m(l,u),n&&n.m(l,u),Er(l,i,u),o=!0},p(l,u){s&&s.p&&(!o||u[0]&1073741824)&&Hi(s,a,l,l[30],o?Ui(a,l[30],u,null):Vi(l[30]),null),l[6]?n||(n=zy(),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},i(l){o||(Kt(s,l),o=!0)},o(l){lr(s,l),o=!1},d(l){l&&Sr(t),l&&Sr(e),s&&s.d(l),n&&n.d(l),l&&Sr(i)}}}function MD(r){let t,e,i;const o=[{tag:r[10]},{use:[[Hc,{ripple:r[3],unbounded:!1,color:r[4],disabled:!!r[23].disabled,addClass:r[19],removeClass:r[20],addStyle:r[21]}],r[17],...r[0]]},{class:Pn({[r[1]]:!0,"mdc-button":!0,"mdc-button--raised":r[5]==="raised","mdc-button--unelevated":r[5]==="unelevated","mdc-button--outlined":r[5]==="outlined","smui-button--color-secondary":r[4]==="secondary","mdc-button--touch":r[6],"mdc-card__action":r[18]==="card:action","mdc-card__action--button":r[18]==="card:action","mdc-dialog__button":r[18]==="dialog:action","mdc-top-app-bar__navigation-icon":r[18]==="top-app-bar:navigation","mdc-top-app-bar__action-item":r[18]==="top-app-bar:action","mdc-snackbar__action":r[18]==="snackbar:actions","mdc-banner__secondary-action":r[18]==="banner"&&r[8],"mdc-banner__primary-action":r[18]==="banner"&&!r[8],"mdc-tooltip__action":r[18]==="tooltip:rich-actions",...r[12]})},{style:Object.entries(r[13]).map(By).concat([r[2]]).join(" ")},r[16],r[15],r[14],{href:r[7]},r[23]];var a=r[9];function s(n){let l={$$slots:{default:[DD]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[29](t),t.$on("click",r[22])),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,l){const u=l[0]&12580351?li(o,[l[0]&1024&&{tag:n[10]},l[0]&12189721&&{use:[[Hc,{ripple:n[3],unbounded:!1,color:n[4],disabled:!!n[23].disabled,addClass:n[19],removeClass:n[20],addStyle:n[21]}],n[17],...n[0]]},l[0]&266610&&{class:Pn({[n[1]]:!0,"mdc-button":!0,"mdc-button--raised":n[5]==="raised","mdc-button--unelevated":n[5]==="unelevated","mdc-button--outlined":n[5]==="outlined","smui-button--color-secondary":n[4]==="secondary","mdc-button--touch":n[6],"mdc-card__action":n[18]==="card:action","mdc-card__action--button":n[18]==="card:action","mdc-dialog__button":n[18]==="dialog:action","mdc-top-app-bar__navigation-icon":n[18]==="top-app-bar:navigation","mdc-top-app-bar__action-item":n[18]==="top-app-bar:action","mdc-snackbar__action":n[18]==="snackbar:actions","mdc-banner__secondary-action":n[18]==="banner"&&n[8],"mdc-banner__primary-action":n[18]==="banner"&&!n[8],"mdc-tooltip__action":n[18]==="tooltip:rich-actions",...n[12]})},l[0]&8196&&{style:Object.entries(n[13]).map(By).concat([n[2]]).join(" ")},l[0]&65536&&pa(n[16]),l[0]&32768&&pa(n[15]),l[0]&16384&&pa(n[14]),l[0]&128&&{href:n[7]},l[0]&8388608&&pa(n[23])]):{};if(l[0]&1073741888&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[9])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[29](t),t.$on("click",n[22]),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[29](null),n&&Sr(e),t&&sn(t,n)}}}const By=([r,t])=>`${r}: ${t};`;function kD(r,t,e){let i,o,a;const s=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","tag","getElement"];let n=ei(t,s),{$$slots:l={},$$scope:u}=t;const h=wa(oa());let{use:v=[]}=t,{class:d=""}=t,{style:p=""}=t,{ripple:_=!0}=t,{color:b="primary"}=t,{variant:x="text"}=t,{touch:E=!1}=t,{href:A=void 0}=t,{action:P="close"}=t,{defaultAction:D=!1}=t,{secondary:R=!1}=t,S,I={},T={},M=Ki("SMUI:button:context"),{component:z=ls}=t,{tag:U=z===ls?A==null?"button":"a":void 0}=t,F=n.disabled;wi("SMUI:label:context","button"),wi("SMUI:icon:context","button");function V(q){I[q]||e(12,I[q]=!0,I)}function j(q){(!(q in I)||I[q])&&e(12,I[q]=!1,I)}function H(q,we){T[q]!=we&&(we===""||we==null?(delete T[q],e(13,T)):e(13,T[q]=we,T))}function Y(){M==="banner"&&Di(J(),R?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function J(){return S.getElement()}function ne(q){ci[q?"unshift":"push"](()=>{S=q,e(11,S)})}return r.$$set=q=>{e(31,t=cn(cn({},t),ga(q))),e(23,n=ei(t,s)),"use"in q&&e(0,v=q.use),"class"in q&&e(1,d=q.class),"style"in q&&e(2,p=q.style),"ripple"in q&&e(3,_=q.ripple),"color"in q&&e(4,b=q.color),"variant"in q&&e(5,x=q.variant),"touch"in q&&e(6,E=q.touch),"href"in q&&e(7,A=q.href),"action"in q&&e(24,P=q.action),"defaultAction"in q&&e(25,D=q.defaultAction),"secondary"in q&&e(8,R=q.secondary),"component"in q&&e(9,z=q.component),"tag"in q&&e(10,U=q.tag),"$$scope"in q&&e(30,u=q.$$scope)},r.$$.update=()=>{if(e(16,i=M==="dialog:action"&&P!=null?{"data-mdc-dialog-action":P}:{action:t.action}),e(15,o=M==="dialog:action"&&D?{"data-mdc-dialog-button-default":""}:{default:t.default}),e(14,a=M==="banner"?{}:{secondary:t.secondary}),F!==n.disabled){const q=J();"blur"in q&&q.blur(),e(27,F=n.disabled)}},t=ga(t),[v,d,p,_,b,x,E,A,R,z,U,S,I,T,a,o,i,h,M,V,j,H,Y,n,P,D,J,F,l,ne,u]}class ID extends ki{constructor(t){super(),Mi(this,t,kD,MD,_i,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:24,defaultAction:25,secondary:8,component:9,tag:10,getElement:26},null,[-1,-1])}get getElement(){return this.$$.ctx[26]}}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yl;(function(r){r.RICH="mdc-tooltip--rich",r.SHOWN="mdc-tooltip--shown",r.SHOWING="mdc-tooltip--showing",r.SHOWING_TRANSITION="mdc-tooltip--showing-transition",r.HIDE="mdc-tooltip--hide",r.HIDE_TRANSITION="mdc-tooltip--hide-transition",r.MULTILINE_TOOLTIP="mdc-tooltip--multiline",r.SURFACE="mdc-tooltip__surface",r.SURFACE_ANIMATION="mdc-tooltip__surface-animation",r.TOOLTIP_CARET_TOP="mdc-tooltip__caret-surface-top",r.TOOLTIP_CARET_BOTTOM="mdc-tooltip__caret-surface-bottom"})(yl||(yl={}));var Qs={BOUNDED_ANCHOR_GAP:4,UNBOUNDED_ANCHOR_GAP:8,MIN_VIEWPORT_TOOLTIP_THRESHOLD:8,HIDE_DELAY_MS:600,SHOW_DELAY_MS:500,MIN_HEIGHT:24,MAX_WIDTH:200,CARET_INDENTATION:24,ANIMATION_SCALE:.8},Qd={ARIA_EXPANDED:"aria-expanded",ARIA_HASPOPUP:"aria-haspopup",PERSISTENT:"data-mdc-tooltip-persistent",SCROLLABLE_ANCESTOR:"tooltip-scrollable-ancestor",HAS_CARET:"data-mdc-tooltip-has-caret"},kf;(function(r){r[r.DETECTED=0]="DETECTED",r[r.START=1]="START",r[r.CENTER=2]="CENTER",r[r.END=3]="END"})(kf||(kf={}));var ph;(function(r){r[r.DETECTED=0]="DETECTED",r[r.ABOVE=1]="ABOVE",r[r.BELOW=2]="BELOW"})(ph||(ph={}));var Up;(function(r){r[r.BOUNDED=0]="BOUNDED",r[r.UNBOUNDED=1]="UNBOUNDED"})(Up||(Up={}));var yi={LEFT:"left",RIGHT:"right",CENTER:"center",TOP:"top",BOTTOM:"bottom"},Xi;(function(r){r[r.DETECTED=0]="DETECTED",r[r.ABOVE_START=1]="ABOVE_START",r[r.ABOVE_CENTER=2]="ABOVE_CENTER",r[r.ABOVE_END=3]="ABOVE_END",r[r.TOP_SIDE_START=4]="TOP_SIDE_START",r[r.CENTER_SIDE_START=5]="CENTER_SIDE_START",r[r.BOTTOM_SIDE_START=6]="BOTTOM_SIDE_START",r[r.TOP_SIDE_END=7]="TOP_SIDE_END",r[r.CENTER_SIDE_END=8]="CENTER_SIDE_END",r[r.BOTTOM_SIDE_END=9]="BOTTOM_SIDE_END",r[r.BELOW_START=10]="BELOW_START",r[r.BELOW_CENTER=11]="BELOW_CENTER",r[r.BELOW_END=12]="BELOW_END"})(Xi||(Xi={}));var Ko;(function(r){r[r.ABOVE=1]="ABOVE",r[r.BELOW=2]="BELOW",r[r.SIDE_TOP=3]="SIDE_TOP",r[r.SIDE_CENTER=4]="SIDE_CENTER",r[r.SIDE_BOTTOM=5]="SIDE_BOTTOM"})(Ko||(Ko={}));var ha;(function(r){r[r.START=1]="START",r[r.CENTER=2]="CENTER",r[r.END=3]="END",r[r.SIDE_START=4]="SIDE_START",r[r.SIDE_END=5]="SIDE_END"})(ha||(ha={}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Kb=function(){function r(){this.rafIDs=new Map}return r.prototype.request=function(t,e){var i=this;this.cancel(t);var o=requestAnimationFrame(function(a){i.rafIDs.delete(t),e(a)});this.rafIDs.set(t,o)},r.prototype.cancel=function(t){var e=this.rafIDs.get(t);e&&(cancelAnimationFrame(e),this.rafIDs.delete(t))},r.prototype.cancelAll=function(){var t=this;this.rafIDs.forEach(function(e,i){t.cancel(i)})},r.prototype.getQueue=function(){var t=[];return this.rafIDs.forEach(function(e,i){t.push(i)}),t},r}();/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var LD=yl.RICH,$m=yl.SHOWN,Qm=yl.SHOWING,qd=yl.SHOWING_TRANSITION,Kh=yl.HIDE,ep=yl.HIDE_TRANSITION,PD=yl.MULTILINE_TOOLTIP,Ov;(function(r){r.POLL_ANCHOR="poll_anchor"})(Ov||(Ov={}));var Ny=typeof window<"u",RD=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.tooltipShown=!1,i.anchorGap=Qs.BOUNDED_ANCHOR_GAP,i.xTooltipPos=kf.DETECTED,i.yTooltipPos=ph.DETECTED,i.tooltipPositionWithCaret=Xi.DETECTED,i.minViewportTooltipThreshold=Qs.MIN_VIEWPORT_TOOLTIP_THRESHOLD,i.hideDelayMs=Qs.HIDE_DELAY_MS,i.showDelayMs=Qs.SHOW_DELAY_MS,i.anchorRect=null,i.parentRect=null,i.frameId=null,i.hideTimeout=null,i.showTimeout=null,i.addAncestorScrollEventListeners=new Array,i.removeAncestorScrollEventListeners=new Array,i.animFrame=new Kb,i.anchorBlurHandler=function(o){i.handleAnchorBlur(o)},i.documentClickHandler=function(o){i.handleDocumentClick(o)},i.documentKeydownHandler=function(o){i.handleKeydown(o)},i.tooltipMouseEnterHandler=function(){i.handleTooltipMouseEnter()},i.tooltipMouseLeaveHandler=function(){i.handleTooltipMouseLeave()},i.richTooltipFocusOutHandler=function(o){i.handleRichTooltipFocusOut(o)},i.windowScrollHandler=function(){i.handleWindowScrollEvent()},i.windowResizeHandler=function(){i.handleWindowChangeEvent()},i}return Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttribute:function(){return null},setAttribute:function(){},removeAttribute:function(){},addClass:function(){},hasClass:function(){return!1},removeClass:function(){},getComputedStyleProperty:function(){return""},setStyleProperty:function(){},setSurfaceAnimationStyleProperty:function(){},getViewportWidth:function(){return 0},getViewportHeight:function(){return 0},getTooltipSize:function(){return{width:0,height:0}},getAnchorBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getParentBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getAnchorAttribute:function(){return null},setAnchorAttribute:function(){return null},isRTL:function(){return!1},anchorContainsElement:function(){return!1},tooltipContainsElement:function(){return!1},focusAnchorElement:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){},registerAnchorEventHandler:function(){},deregisterAnchorEventHandler:function(){},registerDocumentEventHandler:function(){},deregisterDocumentEventHandler:function(){},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){},notifyHidden:function(){},getTooltipCaretBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setTooltipCaretStyle:function(){},clearTooltipCaretStyles:function(){},getActiveElement:function(){return null}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.richTooltip=this.adapter.hasClass(LD),this.persistentTooltip=this.adapter.getAttribute(Qd.PERSISTENT)==="true",this.interactiveTooltip=!!this.adapter.getAnchorAttribute(Qd.ARIA_EXPANDED)&&this.adapter.getAnchorAttribute(Qd.ARIA_HASPOPUP)==="dialog",this.hasCaret=this.richTooltip&&this.adapter.getAttribute(Qd.HAS_CARET)==="true"},t.prototype.isShown=function(){return this.tooltipShown},t.prototype.isRich=function(){return this.richTooltip},t.prototype.isPersistent=function(){return this.persistentTooltip},t.prototype.handleAnchorMouseEnter=function(){var e=this;this.tooltipShown?this.show():(this.clearHideTimeout(),this.showTimeout=setTimeout(function(){e.show()},this.showDelayMs))},t.prototype.handleAnchorTouchstart=function(){var e=this;this.showTimeout=setTimeout(function(){e.show()},this.showDelayMs),this.adapter.registerWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch)},t.prototype.preventContextMenuOnLongTouch=function(e){e.preventDefault()},t.prototype.handleAnchorTouchend=function(){this.clearShowTimeout(),this.isShown()||this.adapter.deregisterWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch)},t.prototype.handleAnchorFocus=function(e){var i=this,o=e.relatedTarget,a=o instanceof HTMLElement&&this.adapter.tooltipContainsElement(o);a||(this.showTimeout=setTimeout(function(){i.show()},this.showDelayMs))},t.prototype.handleAnchorMouseLeave=function(){var e=this;this.clearShowTimeout(),this.hideTimeout=setTimeout(function(){e.hide()},this.hideDelayMs)},t.prototype.handleAnchorClick=function(){this.tooltipShown?this.hide():this.show()},t.prototype.handleDocumentClick=function(e){var i=e.target instanceof HTMLElement&&(this.adapter.anchorContainsElement(e.target)||this.adapter.tooltipContainsElement(e.target));this.richTooltip&&this.persistentTooltip&&i||this.hide()},t.prototype.handleKeydown=function(e){var i=Co(e);if(i===Bi.ESCAPE){var o=this.adapter.getActiveElement(),a=o instanceof HTMLElement&&this.adapter.tooltipContainsElement(o);a&&this.adapter.focusAnchorElement(),this.hide()}},t.prototype.handleAnchorBlur=function(e){if(this.richTooltip){var i=e.relatedTarget instanceof HTMLElement&&this.adapter.tooltipContainsElement(e.relatedTarget);if(i||e.relatedTarget===null&&this.interactiveTooltip)return}this.hide()},t.prototype.handleTooltipMouseEnter=function(){this.show()},t.prototype.handleTooltipMouseLeave=function(){var e=this;this.clearShowTimeout(),this.hideTimeout=setTimeout(function(){e.hide()},this.hideDelayMs)},t.prototype.handleRichTooltipFocusOut=function(e){var i=e.relatedTarget instanceof HTMLElement&&(this.adapter.anchorContainsElement(e.relatedTarget)||this.adapter.tooltipContainsElement(e.relatedTarget));i||e.relatedTarget===null&&this.interactiveTooltip||this.hide()},t.prototype.handleWindowScrollEvent=function(){if(this.persistentTooltip){this.handleWindowChangeEvent();return}this.hide()},t.prototype.handleWindowChangeEvent=function(){var e=this;this.animFrame.request(Ov.POLL_ANCHOR,function(){e.repositionTooltipOnAnchorMove()})},t.prototype.show=function(){var e,i,o=this;if(this.clearHideTimeout(),this.clearShowTimeout(),!this.tooltipShown){this.tooltipShown=!0,this.adapter.removeAttribute("aria-hidden"),this.richTooltip&&(this.interactiveTooltip&&this.adapter.setAnchorAttribute("aria-expanded","true"),this.adapter.registerEventHandler("focusout",this.richTooltipFocusOutHandler)),this.persistentTooltip||(this.adapter.registerEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.registerEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.adapter.removeClass(Kh),this.adapter.addClass(Qm),this.isTooltipMultiline()&&!this.richTooltip&&this.adapter.addClass(PD),this.anchorRect=this.adapter.getAnchorBoundingRect(),this.parentRect=this.adapter.getParentBoundingRect(),this.richTooltip?this.positionRichTooltip():this.positionPlainTooltip(),this.adapter.registerAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.registerDocumentEventHandler("click",this.documentClickHandler),this.adapter.registerDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.registerWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler);try{for(var a=ml(this.addAncestorScrollEventListeners),s=a.next();!s.done;s=a.next()){var n=s.value;n()}}catch(l){e={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}this.frameId=requestAnimationFrame(function(){o.clearAllAnimationClasses(),o.adapter.addClass($m),o.adapter.addClass(qd)})}},t.prototype.hide=function(){var e,i;if(this.clearHideTimeout(),this.clearShowTimeout(),!!this.tooltipShown){this.frameId&&cancelAnimationFrame(this.frameId),this.tooltipShown=!1,this.adapter.setAttribute("aria-hidden","true"),this.adapter.deregisterEventHandler("focusout",this.richTooltipFocusOutHandler),this.richTooltip&&this.interactiveTooltip&&this.adapter.setAnchorAttribute("aria-expanded","false"),this.persistentTooltip||(this.adapter.deregisterEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.deregisterEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.clearAllAnimationClasses(),this.adapter.addClass(Kh),this.adapter.addClass(ep),this.adapter.removeClass($m),this.adapter.deregisterAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.deregisterDocumentEventHandler("click",this.documentClickHandler),this.adapter.deregisterDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.deregisterWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch);try{for(var o=ml(this.removeAncestorScrollEventListeners),a=o.next();!a.done;a=o.next()){var s=a.value;s()}}catch(n){e={error:n}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}}},t.prototype.handleTransitionEnd=function(){var e=this.adapter.hasClass(Kh);this.adapter.removeClass(Qm),this.adapter.removeClass(qd),this.adapter.removeClass(Kh),this.adapter.removeClass(ep),e&&this.showTimeout===null&&this.adapter.notifyHidden()},t.prototype.clearAllAnimationClasses=function(){this.adapter.removeClass(qd),this.adapter.removeClass(ep)},t.prototype.setTooltipPosition=function(e){var i=e.xPos,o=e.yPos,a=e.withCaretPos;if(this.hasCaret&&a){this.tooltipPositionWithCaret=a;return}i&&(this.xTooltipPos=i),o&&(this.yTooltipPos=o)},t.prototype.setAnchorBoundaryType=function(e){e===Up.UNBOUNDED?this.anchorGap=Qs.UNBOUNDED_ANCHOR_GAP:this.anchorGap=Qs.BOUNDED_ANCHOR_GAP},t.prototype.setShowDelay=function(e){this.showDelayMs=e},t.prototype.setHideDelay=function(e){this.hideDelayMs=e},t.prototype.isTooltipMultiline=function(){var e=this.adapter.getTooltipSize();return e.height>Qs.MIN_HEIGHT&&e.width>=Qs.MAX_WIDTH},t.prototype.positionPlainTooltip=function(){var e=this.calculateTooltipStyles(this.anchorRect),i=e.top,o=e.yTransformOrigin,a=e.left,s=e.xTransformOrigin,n=Ny?Fv(window,"transform"):"transform";this.adapter.setSurfaceAnimationStyleProperty(n+"-origin",s+" "+o),this.adapter.setStyleProperty("top",i+"px"),this.adapter.setStyleProperty("left",a+"px")},t.prototype.positionRichTooltip=function(){var e,i,o,a,s=this.adapter.getComputedStyleProperty("width");this.adapter.setStyleProperty("width",s);var n=this.hasCaret?this.calculateTooltipWithCaretStyles(this.anchorRect):this.calculateTooltipStyles(this.anchorRect),l=n.top,u=n.yTransformOrigin,h=n.left,v=n.xTransformOrigin,d=Ny?Fv(window,"transform"):"transform";this.adapter.setSurfaceAnimationStyleProperty(d+"-origin",v+" "+u);var p=h-((i=(e=this.parentRect)===null||e===void 0?void 0:e.left)!==null&&i!==void 0?i:0),_=l-((a=(o=this.parentRect)===null||o===void 0?void 0:o.top)!==null&&a!==void 0?a:0);this.adapter.setStyleProperty("top",_+"px"),this.adapter.setStyleProperty("left",p+"px")},t.prototype.calculateTooltipStyles=function(e){if(!e)return{top:0,left:0};var i=this.adapter.getTooltipSize(),o=this.calculateYTooltipDistance(e,i.height),a=this.calculateXTooltipDistance(e,i.width);return{top:o.distance,yTransformOrigin:o.yTransformOrigin,left:a.distance,xTransformOrigin:a.xTransformOrigin}},t.prototype.calculateXTooltipDistance=function(e,i){var o=!this.adapter.isRTL(),a,s,n,l,u;this.richTooltip?(a=o?e.left-i:e.right,s=o?e.right:e.left-i,l=o?yi.RIGHT:yi.LEFT,u=o?yi.LEFT:yi.RIGHT):(a=o?e.left:e.right-i,s=o?e.right-i:e.left,n=e.left+(e.width-i)/2,l=o?yi.LEFT:yi.RIGHT,u=o?yi.RIGHT:yi.LEFT);var h=this.richTooltip?this.determineValidPositionOptions(a,s):this.determineValidPositionOptions(n,a,s);if(this.xTooltipPos===kf.START&&h.has(a))return{distance:a,xTransformOrigin:l};if(this.xTooltipPos===kf.END&&h.has(s))return{distance:s,xTransformOrigin:u};if(this.xTooltipPos===kf.CENTER&&h.has(n))return{distance:n,xTransformOrigin:yi.CENTER};var v=this.richTooltip?[{distance:s,xTransformOrigin:u},{distance:a,xTransformOrigin:l}]:[{distance:n,xTransformOrigin:yi.CENTER},{distance:a,xTransformOrigin:l},{distance:s,xTransformOrigin:u}],d=v.find(function(b){var x=b.distance;return h.has(x)});if(d)return d;if(e.left<0)return{distance:this.minViewportTooltipThreshold,xTransformOrigin:yi.LEFT};var p=this.adapter.getViewportWidth(),_=p-(i+this.minViewportTooltipThreshold);return{distance:_,xTransformOrigin:yi.RIGHT}},t.prototype.determineValidPositionOptions=function(){for(var e,i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=new Set,n=new Set;try{for(var l=ml(o),u=l.next();!u.done;u=l.next()){var h=u.value;this.positionHonorsViewportThreshold(h)?s.add(h):this.positionDoesntCollideWithViewport(h)&&n.add(h)}}catch(v){e={error:v}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}return s.size?s:n},t.prototype.positionHonorsViewportThreshold=function(e){var i=this.adapter.getViewportWidth(),o=this.adapter.getTooltipSize().width;return e+o<=i-this.minViewportTooltipThreshold&&e>=this.minViewportTooltipThreshold},t.prototype.positionDoesntCollideWithViewport=function(e){var i=this.adapter.getViewportWidth(),o=this.adapter.getTooltipSize().width;return e+o<=i&&e>=0},t.prototype.calculateYTooltipDistance=function(e,i){var o=e.bottom+this.anchorGap,a=e.top-(this.anchorGap+i),s=this.determineValidYPositionOptions(a,o);return this.yTooltipPos===ph.ABOVE&&s.has(a)?{distance:a,yTransformOrigin:yi.BOTTOM}:this.yTooltipPos===ph.BELOW&&s.has(o)?{distance:o,yTransformOrigin:yi.TOP}:s.has(o)?{distance:o,yTransformOrigin:yi.TOP}:s.has(a)?{distance:a,yTransformOrigin:yi.BOTTOM}:{distance:o,yTransformOrigin:yi.TOP}},t.prototype.determineValidYPositionOptions=function(e,i){var o=new Set,a=new Set;return this.yPositionHonorsViewportThreshold(e)?o.add(e):this.yPositionDoesntCollideWithViewport(e)&&a.add(e),this.yPositionHonorsViewportThreshold(i)?o.add(i):this.yPositionDoesntCollideWithViewport(i)&&a.add(i),o.size?o:a},t.prototype.yPositionHonorsViewportThreshold=function(e){var i=this.adapter.getViewportHeight(),o=this.adapter.getTooltipSize().height;return e+o+this.minViewportTooltipThreshold<=i&&e>=this.minViewportTooltipThreshold},t.prototype.yPositionDoesntCollideWithViewport=function(e){var i=this.adapter.getViewportHeight(),o=this.adapter.getTooltipSize().height;return e+o<=i&&e>=0},t.prototype.calculateTooltipWithCaretStyles=function(e){this.adapter.clearTooltipCaretStyles();var i=this.adapter.getTooltipCaretBoundingRect();if(!e||!i)return{position:Xi.DETECTED,top:0,left:0};var o=i.width/Qs.ANIMATION_SCALE,a=i.height/Qs.ANIMATION_SCALE/2,s=this.adapter.getTooltipSize(),n=this.calculateYWithCaretDistanceOptions(e,s.height,{caretWidth:o,caretHeight:a}),l=this.calculateXWithCaretDistanceOptions(e,s.width,{caretWidth:o,caretHeight:a}),u=this.validateTooltipWithCaretDistances(n,l);u.size<1&&(u=this.generateBackupPositionOption(e,s,{caretWidth:o,caretHeight:a}));var h=this.determineTooltipWithCaretDistance(u),v=h.position,d=h.xDistance,p=h.yDistance,_=this.setCaretPositionStyles(v,{caretWidth:o,caretHeight:a}),b=_.yTransformOrigin,x=_.xTransformOrigin;return{yTransformOrigin:b,xTransformOrigin:x,top:p,left:d}},t.prototype.calculateXWithCaretDistanceOptions=function(e,i,o){var a=o.caretWidth,s=o.caretHeight,n=!this.adapter.isRTL(),l=e.left+e.width/2,u=e.left-(i+this.anchorGap+s),h=e.right+this.anchorGap+s,v=n?u:h,d=n?h:u,p=l-(Qs.CARET_INDENTATION+a/2),_=l-(i-Qs.CARET_INDENTATION-a/2),b=n?p:_,x=n?_:p,E=l-i/2,A=new Map([[ha.START,b],[ha.CENTER,E],[ha.END,x],[ha.SIDE_END,d],[ha.SIDE_START,v]]);return A},t.prototype.calculateYWithCaretDistanceOptions=function(e,i,o){var a=o.caretWidth,s=o.caretHeight,n=e.top+e.height/2,l=e.bottom+this.anchorGap+s,u=e.top-(this.anchorGap+i+s),h=n-(Qs.CARET_INDENTATION+a/2),v=n-i/2,d=n-(i-Qs.CARET_INDENTATION-a/2),p=new Map([[Ko.ABOVE,u],[Ko.BELOW,l],[Ko.SIDE_TOP,h],[Ko.SIDE_CENTER,v],[Ko.SIDE_BOTTOM,d]]);return p},t.prototype.repositionTooltipOnAnchorMove=function(){var e=this.adapter.getAnchorBoundingRect();!e||!this.anchorRect||(e.top!==this.anchorRect.top||e.left!==this.anchorRect.left||e.height!==this.anchorRect.height||e.width!==this.anchorRect.width)&&(this.anchorRect=e,this.parentRect=this.adapter.getParentBoundingRect(),this.richTooltip?this.positionRichTooltip():this.positionPlainTooltip())},t.prototype.validateTooltipWithCaretDistances=function(e,i){var o,a,s,n,l,u,h=new Map,v=new Map,d=new Map([[Ko.ABOVE,[ha.START,ha.CENTER,ha.END]],[Ko.BELOW,[ha.START,ha.CENTER,ha.END]],[Ko.SIDE_TOP,[ha.SIDE_START,ha.SIDE_END]],[Ko.SIDE_CENTER,[ha.SIDE_START,ha.SIDE_END]],[Ko.SIDE_BOTTOM,[ha.SIDE_START,ha.SIDE_END]]]);try{for(var p=ml(d.keys()),_=p.next();!_.done;_=p.next()){var b=_.value,x=e.get(b);if(this.yPositionHonorsViewportThreshold(x))try{for(var E=(s=void 0,ml(d.get(b))),A=E.next();!A.done;A=E.next()){var P=A.value,D=i.get(P);if(this.positionHonorsViewportThreshold(D)){var R=this.caretPositionOptionsMapping(P,b);h.set(R,{xDistance:D,yDistance:x})}}}catch(T){s={error:T}}finally{try{A&&!A.done&&(n=E.return)&&n.call(E)}finally{if(s)throw s.error}}if(this.yPositionDoesntCollideWithViewport(x))try{for(var S=(l=void 0,ml(d.get(b))),I=S.next();!I.done;I=S.next()){var P=I.value,D=i.get(P);if(this.positionDoesntCollideWithViewport(D)){var R=this.caretPositionOptionsMapping(P,b);v.set(R,{xDistance:D,yDistance:x})}}}catch(T){l={error:T}}finally{try{I&&!I.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}}}catch(T){o={error:T}}finally{try{_&&!_.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}return h.size?h:v},t.prototype.generateBackupPositionOption=function(e,i,o){var a=!this.adapter.isRTL(),s,n;if(e.left<0)s=this.minViewportTooltipThreshold+o.caretHeight,n=a?ha.END:ha.START;else{var l=this.adapter.getViewportWidth();s=l-(i.width+this.minViewportTooltipThreshold+o.caretHeight),n=a?ha.START:ha.END}var u,h;if(e.top<0)u=this.minViewportTooltipThreshold+o.caretHeight,h=Ko.BELOW;else{var v=this.adapter.getViewportHeight();u=v-(i.height+this.minViewportTooltipThreshold+o.caretHeight),h=Ko.ABOVE}var d=this.caretPositionOptionsMapping(n,h);return new Map([[d,{xDistance:s,yDistance:u}]])},t.prototype.determineTooltipWithCaretDistance=function(e){if(e.has(this.tooltipPositionWithCaret)){var i=e.get(this.tooltipPositionWithCaret);return{position:this.tooltipPositionWithCaret,xDistance:i.xDistance,yDistance:i.yDistance}}var o=[Xi.ABOVE_START,Xi.ABOVE_CENTER,Xi.ABOVE_END,Xi.TOP_SIDE_START,Xi.CENTER_SIDE_START,Xi.BOTTOM_SIDE_START,Xi.TOP_SIDE_END,Xi.CENTER_SIDE_END,Xi.BOTTOM_SIDE_END,Xi.BELOW_START,Xi.BELOW_CENTER,Xi.BELOW_END],a=o.find(function(n){return e.has(n)}),s=e.get(a);return{position:a,xDistance:s.xDistance,yDistance:s.yDistance}},t.prototype.caretPositionOptionsMapping=function(e,i){switch(i){case Ko.ABOVE:if(e===ha.START)return Xi.ABOVE_START;if(e===ha.CENTER)return Xi.ABOVE_CENTER;if(e===ha.END)return Xi.ABOVE_END;break;case Ko.BELOW:if(e===ha.START)return Xi.BELOW_START;if(e===ha.CENTER)return Xi.BELOW_CENTER;if(e===ha.END)return Xi.BELOW_END;break;case Ko.SIDE_TOP:if(e===ha.SIDE_START)return Xi.TOP_SIDE_START;if(e===ha.SIDE_END)return Xi.TOP_SIDE_END;break;case Ko.SIDE_CENTER:if(e===ha.SIDE_START)return Xi.CENTER_SIDE_START;if(e===ha.SIDE_END)return Xi.CENTER_SIDE_END;break;case Ko.SIDE_BOTTOM:if(e===ha.SIDE_START)return Xi.BOTTOM_SIDE_START;if(e===ha.SIDE_END)return Xi.BOTTOM_SIDE_END;break}throw new Error("MDCTooltipFoundation: Invalid caret position of "+e+", "+i)},t.prototype.setCaretPositionStyles=function(e,i){var o,a,s=this.calculateCaretPositionOnTooltip(e,i);if(!s)return{yTransformOrigin:0,xTransformOrigin:0};this.adapter.clearTooltipCaretStyles(),this.adapter.setTooltipCaretStyle(s.yAlignment,s.yAxisPx),this.adapter.setTooltipCaretStyle(s.xAlignment,s.xAxisPx);var n=s.skew*(Math.PI/180),l=Math.cos(n);this.adapter.setTooltipCaretStyle("transform","rotate("+s.rotation+"deg) skewY("+s.skew+"deg) scaleX("+l+")"),this.adapter.setTooltipCaretStyle("transform-origin",s.xAlignment+" "+s.yAlignment);try{for(var u=ml(s.caretCorners),h=u.next();!h.done;h=u.next()){var v=h.value;this.adapter.setTooltipCaretStyle(v,"0")}}catch(d){o={error:d}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return{yTransformOrigin:s.yTransformOrigin,xTransformOrigin:s.xTransformOrigin}},t.prototype.calculateCaretPositionOnTooltip=function(e,i){var o=!this.adapter.isRTL(),a=this.adapter.getComputedStyleProperty("width"),s=this.adapter.getComputedStyleProperty("height");if(!(!a||!s||!i)){var n="calc(("+a+" - "+i.caretWidth+"px) / 2)",l="calc(("+s+" - "+i.caretWidth+"px) / 2)",u="0",h=Qs.CARET_INDENTATION+"px",v="calc("+a+" - "+h+")",d="calc("+s+" - "+h+")",p=35,_=Math.abs(90-p),b=["border-bottom-right-radius","border-top-left-radius"],x=["border-bottom-left-radius","border-top-right-radius"],E=20;switch(e){case Xi.BELOW_CENTER:return{yAlignment:yi.TOP,xAlignment:yi.LEFT,yAxisPx:u,xAxisPx:n,rotation:-1*p,skew:-1*E,xTransformOrigin:n,yTransformOrigin:u,caretCorners:b};case Xi.BELOW_END:return{yAlignment:yi.TOP,xAlignment:o?yi.RIGHT:yi.LEFT,yAxisPx:u,xAxisPx:h,rotation:o?p:-1*p,skew:o?E:-1*E,xTransformOrigin:o?v:h,yTransformOrigin:u,caretCorners:o?x:b};case Xi.BELOW_START:return{yAlignment:yi.TOP,xAlignment:o?yi.LEFT:yi.RIGHT,yAxisPx:u,xAxisPx:h,rotation:o?-1*p:p,skew:o?-1*E:E,xTransformOrigin:o?h:v,yTransformOrigin:u,caretCorners:o?b:x};case Xi.TOP_SIDE_END:return{yAlignment:yi.TOP,xAlignment:o?yi.LEFT:yi.RIGHT,yAxisPx:h,xAxisPx:u,rotation:o?_:-1*_,skew:o?-1*E:E,xTransformOrigin:o?u:a,yTransformOrigin:h,caretCorners:o?b:x};case Xi.CENTER_SIDE_END:return{yAlignment:yi.TOP,xAlignment:o?yi.LEFT:yi.RIGHT,yAxisPx:l,xAxisPx:u,rotation:o?_:-1*_,skew:o?-1*E:E,xTransformOrigin:o?u:a,yTransformOrigin:l,caretCorners:o?b:x};case Xi.BOTTOM_SIDE_END:return{yAlignment:yi.BOTTOM,xAlignment:o?yi.LEFT:yi.RIGHT,yAxisPx:h,xAxisPx:u,rotation:o?-1*_:_,skew:o?E:-1*E,xTransformOrigin:o?u:a,yTransformOrigin:d,caretCorners:o?x:b};case Xi.TOP_SIDE_START:return{yAlignment:yi.TOP,xAlignment:o?yi.RIGHT:yi.LEFT,yAxisPx:h,xAxisPx:u,rotation:o?-1*_:_,skew:o?E:-1*E,xTransformOrigin:o?a:u,yTransformOrigin:h,caretCorners:o?x:b};case Xi.CENTER_SIDE_START:return{yAlignment:yi.TOP,xAlignment:o?yi.RIGHT:yi.LEFT,yAxisPx:l,xAxisPx:u,rotation:o?-1*_:_,skew:o?E:-1*E,xTransformOrigin:o?a:u,yTransformOrigin:l,caretCorners:o?x:b};case Xi.BOTTOM_SIDE_START:return{yAlignment:yi.BOTTOM,xAlignment:o?yi.RIGHT:yi.LEFT,yAxisPx:h,xAxisPx:u,rotation:o?_:-1*_,skew:o?-1*E:E,xTransformOrigin:o?a:u,yTransformOrigin:d,caretCorners:o?b:x};case Xi.ABOVE_CENTER:return{yAlignment:yi.BOTTOM,xAlignment:yi.LEFT,yAxisPx:u,xAxisPx:n,rotation:p,skew:E,xTransformOrigin:n,yTransformOrigin:s,caretCorners:x};case Xi.ABOVE_END:return{yAlignment:yi.BOTTOM,xAlignment:o?yi.RIGHT:yi.LEFT,yAxisPx:u,xAxisPx:h,rotation:o?-1*p:p,skew:o?-1*E:E,xTransformOrigin:o?v:h,yTransformOrigin:s,caretCorners:o?b:x};default:case Xi.ABOVE_START:return{yAlignment:yi.BOTTOM,xAlignment:o?yi.LEFT:yi.RIGHT,yAxisPx:u,xAxisPx:h,rotation:o?p:-1*p,skew:o?E:-1*E,xTransformOrigin:o?h:v,yTransformOrigin:s,caretCorners:o?x:b}}}},t.prototype.clearShowTimeout=function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)},t.prototype.clearHideTimeout=function(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)},t.prototype.attachScrollHandler=function(e){var i=this;this.addAncestorScrollEventListeners.push(function(){e("scroll",i.windowScrollHandler)})},t.prototype.removeScrollHandler=function(e){var i=this;this.removeAncestorScrollEventListeners.push(function(){e("scroll",i.windowScrollHandler)})},t.prototype.destroy=function(){var e,i;this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.clearHideTimeout(),this.clearShowTimeout(),this.adapter.removeClass($m),this.adapter.removeClass(qd),this.adapter.removeClass(Qm),this.adapter.removeClass(Kh),this.adapter.removeClass(ep),this.richTooltip&&this.adapter.deregisterEventHandler("focusout",this.richTooltipFocusOutHandler),this.persistentTooltip||(this.adapter.deregisterEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.deregisterEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.adapter.deregisterAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.deregisterDocumentEventHandler("click",this.documentClickHandler),this.adapter.deregisterDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.deregisterWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler);try{for(var o=ml(this.removeAncestorScrollEventListeners),a=o.next();!a.done;a=o.next()){var s=a.value;s()}}catch(n){e={error:n}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}this.animFrame.cancelAll()},t}(ws);function FD(r){let t,e,i,o,a,s,n,l,u,h,v,d,p,_,b;const x=r[31].default,E=Ni(x,r,r[30],null);let A=[{class:i=Pn({[r[7]]:!0,"mdc-tooltip__surface":!0,"mdc-tooltip__surface-animation":!0})},{style:o=Object.entries(r[14]).map(Uy).concat([r[8]]).join(" ")},xi(r[19],"surface$")],P={};for(let S=0;S<A.length;S+=1)P=cn(P,A[S]);let D=[{class:a=Pn({[r[1]]:!0,"mdc-tooltip":!0,"mdc-tooltip--rich":r[18],...r[11]})},{style:s=Object.entries(r[12]).map(Hy).concat([r[2]]).join(" ")},{role:n=r[18]&&r[5]?"dialog":"tooltip"},{"aria-hidden":"true"},{id:r[3]},{tabindex:l=r[18]&&r[4]?-1:void 0},{"data-mdc-tooltip-persist":u=r[18]&&r[4]?"true":void 0},{"data-mdc-tooltip-persistent":h=r[18]&&r[4]?"true":void 0},{"data-mdc-tooltip-has-caret":void 0},{"data-hide-tooltip-from-screenreader":v=r[6]?"true":void 0},r[13],Os(r[19],["surface$"])],R={};for(let S=0;S<D.length;S+=1)R=cn(R,D[S]);return{c(){t=_n("div"),e=_n("div"),E&&E.c(),Xn(e,P),Xn(t,R)},m(S,I){Er(S,t,I),En(t,e),E&&E.m(e,null),r[32](t),p=!0,_||(b=[ri(d=ma.call(null,t,r[0])),ri(r[15].call(null,t)),si(t,"transitionend",r[33])],_=!0)},p(S,I){E&&E.p&&(!p||I[0]&1073741824)&&Hi(E,x,S,S[30],p?Ui(x,S[30],I,null):Vi(S[30]),null),Xn(e,P=li(A,[(!p||I[0]&128&&i!==(i=Pn({[S[7]]:!0,"mdc-tooltip__surface":!0,"mdc-tooltip__surface-animation":!0})))&&{class:i},(!p||I[0]&16640&&o!==(o=Object.entries(S[14]).map(Uy).concat([S[8]]).join(" ")))&&{style:o},I[0]&524288&&xi(S[19],"surface$")])),Xn(t,R=li(D,[(!p||I[0]&2050&&a!==(a=Pn({[S[1]]:!0,"mdc-tooltip":!0,"mdc-tooltip--rich":S[18],...S[11]})))&&{class:a},(!p||I[0]&4100&&s!==(s=Object.entries(S[12]).map(Hy).concat([S[2]]).join(" ")))&&{style:s},(!p||I[0]&32&&n!==(n=S[18]&&S[5]?"dialog":"tooltip"))&&{role:n},{"aria-hidden":"true"},(!p||I[0]&8)&&{id:S[3]},(!p||I[0]&16&&l!==(l=S[18]&&S[4]?-1:void 0))&&{tabindex:l},(!p||I[0]&16&&u!==(u=S[18]&&S[4]?"true":void 0))&&{"data-mdc-tooltip-persist":u},(!p||I[0]&16&&h!==(h=S[18]&&S[4]?"true":void 0))&&{"data-mdc-tooltip-persistent":h},{"data-mdc-tooltip-has-caret":void 0},(!p||I[0]&64&&v!==(v=S[6]?"true":void 0))&&{"data-hide-tooltip-from-screenreader":v},I[0]&8192&&S[13],I[0]&524288&&Os(S[19],["surface$"])])),d&&Ci(d.update)&&I[0]&1&&d.update.call(null,S[0])},i(S){p||(Kt(E,S),p=!0)},o(S){lr(E,S),p=!1},d(S){S&&Sr(t),E&&E.d(S),r[32](null),_=!1,Ma(b)}}}let OD=0;const Uy=([r,t])=>`${r}: ${t};`,Hy=([r,t])=>`${r}: ${t};`;function zD(r,t,e){const i=["use","class","style","id","unbounded","xPos","yPos","persistent","interactive","hideFromScreenreader","showDelay","hideDelay","surface$class","surface$style","attachScrollHandler","removeScrollHandler","getElement"];let o=ei(t,i),a,s,{$$slots:n={},$$scope:l}=t;const u=wa(oa());let{use:h=[]}=t,{class:v=""}=t,{style:d=""}=t,{id:p="SMUI-tooltip-"+OD++}=t,{unbounded:_=!1}=t,{xPos:b="detected"}=t,{yPos:x="detected"}=t,{persistent:E=!1}=t,{interactive:A=E}=t,{hideFromScreenreader:P=!1}=t,{showDelay:D=void 0}=t,{hideDelay:R=void 0}=t,{surface$class:S=""}=t,{surface$style:I=""}=t,T,M,z={setParent(_e){Object.defineProperty(this,"parent",{value:_e})},setNextSibling(_e){Object.defineProperty(this,"nextSibling",{value:_e})}},U={},F={},V={},j={},H=Ki("SMUI:tooltip:wrapper:anchor");Ei(r,H,_e=>e(29,a=_e));let Y=Ki("SMUI:tooltip:wrapper:tooltip");Ei(r,Y,_e=>e(34,s=_e));const J=Ki("SMUI:tooltip:rich");let ne;bo(()=>(e(9,M=new RD({getAttribute:xe,setAttribute:He,removeAttribute:Re,addClass:X,hasClass:ee,removeClass:re,getComputedStyleProperty:_e=>{const je=pe();let Je=getComputedStyle(je).getPropertyValue(_e);return Je==="auto"&&(je.classList.add("smui-banner--force-show"),Je=getComputedStyle(je).getPropertyValue(_e),je.classList.remove("smui-banner--force-show")),Je},setStyleProperty:de,setSurfaceAnimationStyleProperty:me,getViewportWidth:()=>window.innerWidth,getViewportHeight:()=>window.innerHeight,getTooltipSize:()=>{const _e=pe();let je={width:_e.offsetWidth,height:_e.offsetHeight};return(je.width===0||je.height===0)&&(_e.classList.add("smui-banner--force-show"),je={width:_e.offsetWidth,height:_e.offsetHeight},_e.classList.remove("smui-banner--force-show")),je},getAnchorBoundingRect:()=>a?a.getBoundingClientRect():null,getParentBoundingRect:()=>{let _e=pe().parentElement;return J||(_e=document.body),(_e==null?void 0:_e.getBoundingClientRect())||null},getAnchorAttribute:_e=>a?a.getAttribute(_e):null,setAnchorAttribute:(_e,je)=>{a&&a.setAttribute(_e,je)},isRTL:()=>getComputedStyle(pe()).direction==="rtl",anchorContainsElement:_e=>!!(a&&a.contains(_e)),tooltipContainsElement:_e=>pe().contains(_e),focusAnchorElement:()=>{a&&a.focus()},registerEventHandler:(_e,je)=>{pe().addEventListener(_e,je)},deregisterEventHandler:(_e,je)=>{pe().removeEventListener(_e,je)},registerAnchorEventHandler:(_e,je)=>{a&&a.addEventListener(_e,je)},deregisterAnchorEventHandler:(_e,je)=>{a&&a.removeEventListener(_e,je)},registerDocumentEventHandler:(_e,je)=>{document.body.addEventListener(_e,je)},deregisterDocumentEventHandler:(_e,je)=>{document.body.removeEventListener(_e,je)},registerWindowEventHandler:(_e,je)=>{window.addEventListener(_e,je,_e==="scroll"&&{capture:!0,passive:!0})},deregisterWindowEventHandler:(_e,je)=>{window.removeEventListener(_e,je,_e==="scroll"&&{capture:!0,passive:!0})},notifyHidden:()=>{Di(pe(),"SMUITooltip:hidden",void 0,void 0,!0)},getTooltipCaretBoundingRect:()=>{const _e=pe().querySelector(`.${yl.TOOLTIP_CARET_TOP}`);return _e?_e.getBoundingClientRect():null},setTooltipCaretStyle:(_e,je)=>{const Je=pe().querySelector(`.${yl.TOOLTIP_CARET_TOP}`),nt=pe().querySelector(`.${yl.TOOLTIP_CARET_BOTTOM}`);!Je||!nt||(Je.style.setProperty(_e,je),nt.style.setProperty(_e,je))},clearTooltipCaretStyles:()=>{const _e=pe().querySelector(`.${yl.TOOLTIP_CARET_TOP}`),je=pe().querySelector(`.${yl.TOOLTIP_CARET_BOTTOM}`);!_e||!je||(_e.removeAttribute("style"),je.removeAttribute("style"))},getActiveElement:()=>document.activeElement})),Va(Y,s=T,s),()=>{a&&q(a)})),Vc(()=>{var _e;!J&&typeof document<"u"&&document.body===pe().parentElement&&z.parent!==pe().parentElement&&((_e=z.parent)===null||_e===void 0?void 0:_e.insertBefore)&&z.nextSibling&&z.parent.insertBefore(pe(),z.nextSibling)});function q(_e){_e.removeEventListener("focusout",Ee),J&&E?(_e.removeEventListener("click",ke),_e.removeEventListener("keydown",ke)):(_e.removeEventListener("mouseenter",$),_e.removeEventListener("focusin",le),_e.removeEventListener("mouseleave",K),_e.removeEventListener("touchstart",te),_e.removeEventListener("touchend",ie)),J&&A?(_e.removeAttribute("aria-haspopup"),_e.removeAttribute("aria-expanded"),_e.removeAttribute("data-tooltip-id")):_e.removeAttribute("aria-describedby"),M.destroy()}function we(_e){_e.addEventListener("focusout",Ee),J&&E?(_e.addEventListener("click",ke),_e.addEventListener("keydown",ke)):(_e.addEventListener("mouseenter",$),_e.addEventListener("focusin",le),_e.addEventListener("mouseleave",K),_e.addEventListener("touchstart",te),_e.addEventListener("touchend",ie)),J&&A?(_e.setAttribute("aria-haspopup","dialog"),_e.setAttribute("aria-expanded","false"),_e.setAttribute("data-tooltip-id",p)):_e.setAttribute("aria-describedby",p),J||ce(),M.init()}function ee(_e){return _e in U?U[_e]:pe().classList.contains(_e)}function X(_e){U[_e]||e(11,U[_e]=!0,U)}function re(_e){(!(_e in U)||U[_e])&&e(11,U[_e]=!1,U)}function de(_e,je){F[_e]!=je&&(je===""||je==null?(delete F[_e],e(12,F)):e(12,F[_e]=je,F))}function me(_e,je){j[_e]!=je&&(je===""||je==null?(delete j[_e],e(14,j)):e(14,j[_e]=je,j))}function xe(_e){var je;return _e in V?(je=V[_e])!==null&&je!==void 0?je:null:pe().getAttribute(_e)}function He(_e,je){V[_e]!==je&&e(13,V[_e]=je,V)}function Re(_e){(!(_e in V)||V[_e]!=null)&&e(13,V[_e]=void 0,V)}function Ee(_e){T.contains(_e.relatedTarget)||M&&M.hide()}function ke(_e){_e.type==="keydown"&&_e.key!=="Enter"&&_e.key!==" "||M&&M.handleAnchorClick()}function $(){M&&M.handleAnchorMouseEnter()}function le(_e){M&&M.handleAnchorFocus(_e)}function K(){M&&M.handleAnchorMouseLeave()}function te(){M&&M.handleAnchorTouchstart()}function ie(){M&&M.handleAnchorTouchend()}function ce(){var _e,je;a&&document.body!==pe().parentNode&&(z.setParent((_e=pe().parentElement)!==null&&_e!==void 0?_e:void 0),z.setNextSibling((je=pe().nextElementSibling)!==null&&je!==void 0?je:void 0),document.body.appendChild(pe()))}function ae(_e){M&&M.attachScrollHandler(_e)}function ve(_e){M&&M.removeScrollHandler(_e)}function pe(){return T}function he(_e){ci[_e?"unshift":"push"](()=>{T=_e,e(10,T)})}const ye=()=>M&&M.handleTransitionEnd();return r.$$set=_e=>{t=cn(cn({},t),ga(_e)),e(19,o=ei(t,i)),"use"in _e&&e(0,h=_e.use),"class"in _e&&e(1,v=_e.class),"style"in _e&&e(2,d=_e.style),"id"in _e&&e(3,p=_e.id),"unbounded"in _e&&e(20,_=_e.unbounded),"xPos"in _e&&e(21,b=_e.xPos),"yPos"in _e&&e(22,x=_e.yPos),"persistent"in _e&&e(4,E=_e.persistent),"interactive"in _e&&e(5,A=_e.interactive),"hideFromScreenreader"in _e&&e(6,P=_e.hideFromScreenreader),"showDelay"in _e&&e(23,D=_e.showDelay),"hideDelay"in _e&&e(24,R=_e.hideDelay),"surface$class"in _e&&e(7,S=_e.surface$class),"surface$style"in _e&&e(8,I=_e.surface$style),"$$scope"in _e&&e(30,l=_e.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&805306880&&M&&ne!==a&&(ne&&q(ne),a&&we(a),e(28,ne=a)),r.$$.dirty[0]&1049088&&M&&M.setAnchorBoundaryType(Up[_?"UNBOUNDED":"BOUNDED"]),r.$$.dirty[0]&6291968&&M&&M.setTooltipPosition({xPos:kf[b.toUpperCase()],yPos:ph[x.toUpperCase()]}),r.$$.dirty[0]&8389120&&M&&D!=null&&M.setShowDelay(D),r.$$.dirty[0]&16777728&&M&&R!=null&&M.setHideDelay(R)},[h,v,d,p,E,A,P,S,I,M,T,U,F,V,j,u,H,Y,J,o,_,b,x,D,R,ae,ve,pe,ne,a,l,n,he,ye]}class tm extends ki{constructor(t){super(),Mi(this,t,zD,FD,_i,{use:0,class:1,style:2,id:3,unbounded:20,xPos:21,yPos:22,persistent:4,interactive:5,hideFromScreenreader:6,showDelay:23,hideDelay:24,surface$class:7,surface$style:8,attachScrollHandler:25,removeScrollHandler:26,getElement:27},null,[-1,-1])}get attachScrollHandler(){return this.$$.ctx[25]}get removeScrollHandler(){return this.$$.ctx[26]}get getElement(){return this.$$.ctx[27]}}function BD(r){let t;const e=r[12].default,i=Ni(e,r,r[11],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&2048)&&Hi(i,e,o,o[11],t?Ui(e,o[11],a,null):Vi(o[11]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function ND(r){let t,e,i,o,a,s;const n=r[12].default,l=Ni(n,r,r[11],null);let u=[{class:e=Pn({[r[1]]:!0,"mdc-tooltip-wrapper--rich":!0})},r[7]],h={};for(let v=0;v<u.length;v+=1)h=cn(h,u[v]);return{c(){t=_n("div"),l&&l.c(),Xn(t,h)},m(v,d){Er(v,t,d),l&&l.m(t,null),r[13](t),o=!0,a||(s=[ri(i=ma.call(null,t,r[0])),ri(r[4].call(null,t))],a=!0)},p(v,d){l&&l.p&&(!o||d&2048)&&Hi(l,n,v,v[11],o?Ui(n,v[11],d,null):Vi(v[11]),null),Xn(t,h=li(u,[(!o||d&2&&e!==(e=Pn({[v[1]]:!0,"mdc-tooltip-wrapper--rich":!0})))&&{class:e},d&128&&v[7]])),i&&Ci(i.update)&&d&1&&i.update.call(null,v[0])},i(v){o||(Kt(l,v),o=!0)},o(v){lr(l,v),o=!1},d(v){v&&Sr(t),l&&l.d(v),r[13](null),a=!1,Ma(s)}}}function UD(r){let t,e,i,o;const a=[ND,BD],s=[];function n(l,u){return l[2]?0:1}return t=n(r),e=s[t]=a[t](r),{c(){e.c(),i=ea()},m(l,u){s[t].m(l,u),Er(l,i,u),o=!0},p(l,[u]){let h=t;t=n(l),t===h?s[t].p(l,u):(Ri(),lr(s[h],1,1,()=>{s[h]=null}),Fi(),e=s[t],e?e.p(l,u):(e=s[t]=a[t](l),e.c()),Kt(e,1),e.m(i.parentNode,i))},i(l){o||(Kt(e),o=!0)},o(l){lr(e),o=!1},d(l){s[t].d(l),l&&Sr(i)}}}function HD(r,t,e){const i=["use","class","rich","getElement"];let o=ei(t,i),a,s,{$$slots:n={},$$scope:l}=t;const u=wa(oa());let{use:h=[]}=t,{class:v=""}=t,{rich:d=!1}=t,p;const _=_o(void 0);Ei(r,_,A=>e(10,s=A));const b=_o(void 0);Ei(r,b,A=>e(9,a=A)),wi("SMUI:tooltip:wrapper:anchor",_),wi("SMUI:tooltip:wrapper:tooltip",b),wi("SMUI:tooltip:rich",d);function x(){return p}function E(A){ci[A?"unshift":"push"](()=>{p=A,e(3,p)})}return r.$$set=A=>{t=cn(cn({},t),ga(A)),e(7,o=ei(t,i)),"use"in A&&e(0,h=A.use),"class"in A&&e(1,v=A.class),"rich"in A&&e(2,d=A.rich),"$$scope"in A&&e(11,l=A.$$scope)},r.$$.update=()=>{r.$$.dirty&1536&&a&&!s&&Va(_,s=a.previousElementSibling,s)},[h,v,d,p,u,_,b,o,x,a,s,l,n,E]}class ud extends ki{constructor(t){super(),Mi(this,t,HD,UD,_i,{use:0,class:1,rich:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}nl({class:"mdc-tooltip__title",tag:"h2"});nl({class:"mdc-tooltip__content",tag:"div"});nl({class:"mdc-tooltip__content-link",tag:"a"});nl({class:"mdc-tooltip--rich-actions",tag:"div",contexts:{"SMUI:button:context":"tooltip:rich-actions"}});function Vy(r){let t;return{c(){t=_n("div"),nn(t,"class","mdc-fab__focus-ring")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function Gy(r){let t;return{c(){t=_n("div"),nn(t,"class","mdc-fab__touch")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function VD(r){let t,e,i,o,a,s=r[4]&&Vy();const n=r[22].default,l=Ni(n,r,r[24],null);let u=r[9]&&Gy();return{c(){t=_n("div"),e=Rn(),s&&s.c(),i=Rn(),l&&l.c(),u&&u.c(),o=ea(),nn(t,"class","mdc-fab__ripple")},m(h,v){Er(h,t,v),Er(h,e,v),s&&s.m(h,v),Er(h,i,v),l&&l.m(h,v),u&&u.m(h,v),Er(h,o,v),a=!0},p(h,v){h[4]?s||(s=Vy(),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null),l&&l.p&&(!a||v&16777216)&&Hi(l,n,h,h[24],a?Ui(n,h[24],v,null):Vi(h[24]),null),h[9]?u||(u=Gy(),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(h){a||(Kt(l,h),a=!0)},o(h){lr(l,h),a=!1},d(h){h&&Sr(t),h&&Sr(e),s&&s.d(h),h&&Sr(i),l&&l.d(h),u&&u.d(h),h&&Sr(o)}}}function GD(r){let t,e,i;const o=[{tag:r[12]},{use:[[Hc,{ripple:r[3],unbounded:!1,color:r[5],disabled:!!r[20].disabled,addClass:r[17],removeClass:r[18],addStyle:r[19]}],r[16],...r[0]]},{class:Pn({[r[1]]:!0,"mdc-fab":!0,"mdc-fab--mini":r[6],"mdc-fab--exited":r[7],"mdc-fab--extended":r[8],"smui-fab--color-primary":r[5]==="primary","mdc-fab--touch":r[9],...r[14]})},{style:Object.entries(r[15]).map(Zy).concat([r[2]]).join(" ")},{href:r[10]},r[20]];var a=r[11];function s(n){let l={$$slots:{default:[VD]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[23](t)),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,[l]){const u=l&2086895?li(o,[l&4096&&{tag:n[12]},l&2031657&&{use:[[Hc,{ripple:n[3],unbounded:!1,color:n[5],disabled:!!n[20].disabled,addClass:n[17],removeClass:n[18],addStyle:n[19]}],n[16],...n[0]]},l&17378&&{class:Pn({[n[1]]:!0,"mdc-fab":!0,"mdc-fab--mini":n[6],"mdc-fab--exited":n[7],"mdc-fab--extended":n[8],"smui-fab--color-primary":n[5]==="primary","mdc-fab--touch":n[9],...n[14]})},l&32772&&{style:Object.entries(n[15]).map(Zy).concat([n[2]]).join(" ")},l&1024&&{href:n[10]},l&1048576&&pa(n[20])]):{};if(l&16777744&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[11])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[23](t),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[23](null),n&&Sr(e),t&&sn(t,n)}}}const Zy=([r,t])=>`${r}: ${t};`;function ZD(r,t,e){const i=["use","class","style","ripple","focusRing","color","mini","exited","extended","touch","href","component","tag","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{style:h=""}=t,{ripple:v=!0}=t,{focusRing:d=!1}=t,{color:p="secondary"}=t,{mini:_=!1}=t,{exited:b=!1}=t,{extended:x=!1}=t,{touch:E=!1}=t,{href:A=void 0}=t,P,D={},R={},{component:S=ls}=t,{tag:I=S===ls?A==null?"button":"a":void 0}=t;wi("SMUI:label:context","fab"),wi("SMUI:icon:context","fab");function T(V){D[V]||e(14,D[V]=!0,D)}function M(V){(!(V in D)||D[V])&&e(14,D[V]=!1,D)}function z(V,j){R[V]!=j&&(j===""||j==null?(delete R[V],e(15,R)):e(15,R[V]=j,R))}function U(){return P.getElement()}function F(V){ci[V?"unshift":"push"](()=>{P=V,e(13,P)})}return r.$$set=V=>{t=cn(cn({},t),ga(V)),e(20,o=ei(t,i)),"use"in V&&e(0,l=V.use),"class"in V&&e(1,u=V.class),"style"in V&&e(2,h=V.style),"ripple"in V&&e(3,v=V.ripple),"focusRing"in V&&e(4,d=V.focusRing),"color"in V&&e(5,p=V.color),"mini"in V&&e(6,_=V.mini),"exited"in V&&e(7,b=V.exited),"extended"in V&&e(8,x=V.extended),"touch"in V&&e(9,E=V.touch),"href"in V&&e(10,A=V.href),"component"in V&&e(11,S=V.component),"tag"in V&&e(12,I=V.tag),"$$scope"in V&&e(24,s=V.$$scope)},[l,u,h,v,d,p,_,b,x,E,A,S,I,P,D,R,n,T,M,z,o,U,a,F,s]}class b0 extends ki{constructor(t){super(),Mi(this,t,ZD,GD,_i,{use:0,class:1,style:2,ripple:3,focusRing:4,color:5,mini:6,exited:7,extended:8,touch:9,href:10,component:11,tag:12,getElement:21})}get getElement(){return this.$$.ctx[21]}}function WD(r){let t;return{c(){t=oi("apps")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function jD(r){let t,e;return t=new _0({props:{class:"material-icons",$$slots:{default:[WD]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2048&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function YD(r){let t;return{c(){t=oi("Show and hide data views")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function XD(r){let t,e,i,o;return t=new b0({props:{color:"primary",mini:!0,$$slots:{default:[jD]},$$scope:{ctx:r}}}),t.$on("click",r[7]),i=new tm({props:{hideDelay:0,id:"tooltip-dataviews",style:"z-index: 20001",$$slots:{default:[YD]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment)},m(a,s){on(t,a,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&2048&&(n.$$scope={dirty:s,ctx:a}),t.$set(n);const l={};s&2048&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){o||(Kt(t.$$.fragment,a),Kt(i.$$.fragment,a),o=!0)},o(a){lr(t.$$.fragment,a),lr(i.$$.fragment,a),o=!1},d(a){sn(t,a),a&&Sr(e),sn(i,a)}}}function KD(r){let t,e;return{c(){t=_n("i"),t.textContent="filter_alt",e=oi(`
            Selector`),nn(t,"class","text-icon material-icons svelte-c5xhfg"),nn(t,"aria-hidden","true")},m(i,o){Er(i,t,o),Er(i,e,o)},p:qi,d(i){i&&Sr(t),i&&Sr(e)}}}function JD(r){let t;return{c(){t=oi("Select variables and sites. Show data legend")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function $D(r){let t,e,i,o;return t=new Dh({props:{$$slots:{default:[KD]},$$scope:{ctx:r}}}),i=new Pu({props:{$$slots:{default:[JD]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment)},m(a,s){on(t,a,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&2048&&(n.$$scope={dirty:s,ctx:a}),t.$set(n);const l={};s&2048&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){o||(Kt(t.$$.fragment,a),Kt(i.$$.fragment,a),o=!0)},o(a){lr(t.$$.fragment,a),lr(i.$$.fragment,a),o=!1},d(a){sn(t,a),a&&Sr(e),sn(i,a)}}}function QD(r){let t,e;return t=new em({props:{$$slots:{default:[$D]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2048&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function qD(r){let t,e;return{c(){t=_n("i"),t.textContent="insights",e=oi(`
            Time Series`),nn(t,"class","text-icon material-icons svelte-c5xhfg"),nn(t,"aria-hidden","true")},m(i,o){Er(i,t,o),Er(i,e,o)},p:qi,d(i){i&&Sr(t),i&&Sr(e)}}}function eM(r){let t;return{c(){t=oi("Graph selected sites and variables")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function tM(r){let t,e,i,o;return t=new Dh({props:{$$slots:{default:[qD]},$$scope:{ctx:r}}}),i=new Pu({props:{$$slots:{default:[eM]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment)},m(a,s){on(t,a,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&2048&&(n.$$scope={dirty:s,ctx:a}),t.$set(n);const l={};s&2048&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){o||(Kt(t.$$.fragment,a),Kt(i.$$.fragment,a),o=!0)},o(a){lr(t.$$.fragment,a),lr(i.$$.fragment,a),o=!1},d(a){sn(t,a),a&&Sr(e),sn(i,a)}}}function rM(r){let t,e;return t=new em({props:{$$slots:{default:[tM]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2048&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function nM(r){let t,e;return{c(){t=_n("i"),t.textContent="list",e=oi(`
            Summary Table`),nn(t,"class","text-icon material-icons svelte-c5xhfg"),nn(t,"aria-hidden","true")},m(i,o){Er(i,t,o),Er(i,e,o)},p:qi,d(i){i&&Sr(t),i&&Sr(e)}}}function iM(r){let t;return{c(){t=oi("Statistics for selected sites and variables")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function aM(r){let t,e,i,o;return t=new Dh({props:{$$slots:{default:[nM]},$$scope:{ctx:r}}}),i=new Pu({props:{$$slots:{default:[iM]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment)},m(a,s){on(t,a,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&2048&&(n.$$scope={dirty:s,ctx:a}),t.$set(n);const l={};s&2048&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){o||(Kt(t.$$.fragment,a),Kt(i.$$.fragment,a),o=!0)},o(a){lr(t.$$.fragment,a),lr(i.$$.fragment,a),o=!1},d(a){sn(t,a),a&&Sr(e),sn(i,a)}}}function oM(r){let t,e;return t=new em({props:{$$slots:{default:[aM]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2048&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function sM(r){let t,e,i,o,a,s,n,l;return t=new md({}),i=new Rf({props:{selected:r[2],$$slots:{default:[QD]},$$scope:{ctx:r}}}),i.$on("SMUI:action",r[4]),a=new Rf({props:{selected:r[1],$$slots:{default:[rM]},$$scope:{ctx:r}}}),a.$on("SMUI:action",r[5]),n=new Rf({props:{selected:r[3],$$slots:{default:[oM]},$$scope:{ctx:r}}}),n.$on("SMUI:action",r[6]),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment),o=Rn(),un(a.$$.fragment),s=Rn(),un(n.$$.fragment)},m(u,h){on(t,u,h),Er(u,e,h),on(i,u,h),Er(u,o,h),on(a,u,h),Er(u,s,h),on(n,u,h),l=!0},p(u,h){const v={};h&4&&(v.selected=u[2]),h&2048&&(v.$$scope={dirty:h,ctx:u}),i.$set(v);const d={};h&2&&(d.selected=u[1]),h&2048&&(d.$$scope={dirty:h,ctx:u}),a.$set(d);const p={};h&8&&(p.selected=u[3]),h&2048&&(p.$$scope={dirty:h,ctx:u}),n.$set(p)},i(u){l||(Kt(t.$$.fragment,u),Kt(i.$$.fragment,u),Kt(a.$$.fragment,u),Kt(n.$$.fragment,u),l=!0)},o(u){lr(t.$$.fragment,u),lr(i.$$.fragment,u),lr(a.$$.fragment,u),lr(n.$$.fragment,u),l=!1},d(u){sn(t,u),u&&Sr(e),sn(i,u),u&&Sr(o),sn(a,u),u&&Sr(s),sn(n,u)}}}function lM(r){let t,e,i,o;return i=new qp({props:{twoLine:!0,$$slots:{default:[sM]},$$scope:{ctx:r}}}),{c(){t=_n("p"),t.textContent="Data Views",e=Rn(),un(i.$$.fragment),nn(t,"class","menulist-title")},m(a,s){Er(a,t,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&2062&&(n.$$scope={dirty:s,ctx:a}),i.$set(n)},i(a){o||(Kt(i.$$.fragment,a),o=!0)},o(a){lr(i.$$.fragment,a),o=!1},d(a){a&&Sr(t),a&&Sr(e),sn(i,a)}}}function uM(r){let t,e,i,o,a;e=new ud({props:{$$slots:{default:[XD]},$$scope:{ctx:r}}});let s={$$slots:{default:[lM]},$$scope:{ctx:r}};return o=new y0({props:s}),r[8](o),{c(){t=_n("div"),un(e.$$.fragment),i=Rn(),un(o.$$.fragment),nn(t,"id","window-selector"),Do(t,"position","fixed"),Do(t,"left","4px"),Do(t,"bottom","0px"),Do(t,"z-index","20000")},m(n,l){Er(n,t,l),on(e,t,null),En(t,i),on(o,t,null),a=!0},p(n,[l]){const u={};l&2049&&(u.$$scope={dirty:l,ctx:n}),e.$set(u);const h={};l&2062&&(h.$$scope={dirty:l,ctx:n}),o.$set(h)},i(n){a||(Kt(e.$$.fragment,n),Kt(o.$$.fragment,n),a=!0)},o(n){lr(e.$$.fragment,n),lr(o.$$.fragment,n),a=!1},d(n){n&&Sr(t),sn(e),r[8](null),sn(o)}}}function cM(r,t,e){let i,o,a,s,n;Ei(r,zc,_=>e(1,i=_)),Ei(r,Df,_=>e(2,o=_)),Ei(r,qv,_=>e(9,a=_)),Ei(r,td,_=>e(3,s=_)),Ei(r,Qv,_=>e(10,n=_));let l;const u=()=>{Va(Df,o=!o,o),o&&n<780&&Va(zc,i=!1,i),o&&a<640&&Va(td,s=!1,s)},h=()=>{Va(zc,i=!i,i),i&&n<780&&Va(Df,o=!1,o),i&&a<640&&Va(td,s=!1,s)},v=()=>{Va(td,s=!s,s),s&&a<640&&(console.log("hide your wives"),Va(Df,o=!1,o),Va(zc,i=!1,i))},d=()=>l.setOpen(!0);function p(_){ci[_?"unshift":"push"](()=>{l=_,e(0,l)})}return[l,i,o,s,u,h,v,d,p]}class fM extends ki{constructor(t){super(),Mi(this,t,cM,uM,_i,{})}}function Jb(r){const t=r-1;return t*t*t+1}function xh(r,{delay:t=0,duration:e=400,easing:i=Jb,x:o=0,y:a=0,opacity:s=0}={}){const n=getComputedStyle(r),l=+n.opacity,u=n.transform==="none"?"":n.transform,h=l*(1-s);return{delay:t,duration:e,easing:i,css:(v,d)=>`
			transform: ${u} translate(${(1-v)*o}px, ${(1-v)*a}px);
			opacity: ${l-h*d}`}}function wh(r,{delay:t=0,duration:e=400,easing:i=Jb}={}){const o=getComputedStyle(r),a=+o.opacity,s=parseFloat(o.height),n=parseFloat(o.paddingTop),l=parseFloat(o.paddingBottom),u=parseFloat(o.marginTop),h=parseFloat(o.marginBottom),v=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:t,duration:e,easing:i,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*a};height: ${p*s}px;padding-top: ${p*n}px;padding-bottom: ${p*l}px;margin-top: ${p*u}px;margin-bottom: ${p*h}px;border-top-width: ${p*v}px;border-bottom-width: ${p*d}px;`}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var hM={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dM=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.shakeAnimationEndHandler=function(){i.handleShakeAnimationEnd()},i}return Object.defineProperty(t,"cssClasses",{get:function(){return hM},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(e){var i=t.cssClasses.LABEL_SHAKE;e?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.float=function(e){var i=t.cssClasses,o=i.LABEL_FLOAT_ABOVE,a=i.LABEL_SHAKE;e?this.adapter.addClass(o):(this.adapter.removeClass(o),this.adapter.removeClass(a))},t.prototype.setRequired=function(e){var i=t.cssClasses.LABEL_REQUIRED;e?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.handleShakeAnimationEnd=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(e)},t}(ws);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Tf={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var pM=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.transitionEndHandler=function(o){i.handleTransitionEnd(o)},i}return Object.defineProperty(t,"cssClasses",{get:function(){return Tf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},t.prototype.activate=function(){this.adapter.removeClass(Tf.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Tf.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(Tf.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var i=this.adapter.hasClass(Tf.LINE_RIPPLE_DEACTIVATING);e.propertyName==="opacity"&&i&&(this.adapter.removeClass(Tf.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Tf.LINE_RIPPLE_DEACTIVATING))},t}(ws);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var mM={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Wy={NOTCH_ELEMENT_PADDING:8},vM={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var gM=function(r){xo(t,r);function t(e){return r.call(this,aa(aa({},t.defaultAdapter),e))||this}return Object.defineProperty(t,"strings",{get:function(){return mM},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return vM},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Wy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.notch=function(e){var i=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=Wy.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(e),this.adapter.addClass(i)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(e),this.adapter.removeNotchWidthProperty()},t}(ws);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lo={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},qm={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},Af={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yM=function(r){xo(t,r);function t(e,i){i===void 0&&(i={});var o=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return o.disabled=!1,o.isMenuOpen=!1,o.useDefaultValidation=!0,o.customValidity=!0,o.lastSelectedIndex=Af.UNSET_INDEX,o.clickDebounceTimeout=0,o.recentlyClicked=!1,o.leadingIcon=i.leadingIcon,o.helperText=i.helperText,o}return Object.defineProperty(t,"cssClasses",{get:function(){return lo},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Af},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return qm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),t.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},t.prototype.setSelectedIndex=function(e,i,o){i===void 0&&(i=!1),o===void 0&&(o=!1),!(e>=this.adapter.getMenuItemCount())&&(e===Af.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(e).trim()),this.adapter.setSelectedIndex(e),i&&this.adapter.closeMenu(),!o&&this.lastSelectedIndex!==e&&this.handleChange(),this.lastSelectedIndex=e)},t.prototype.setValue=function(e,i){i===void 0&&(i=!1);var o=this.adapter.getMenuItemValues().indexOf(e);this.setSelectedIndex(o,!1,i)},t.prototype.getValue=function(){var e=this.adapter.getSelectedIndex(),i=this.adapter.getMenuItemValues();return e!==Af.UNSET_INDEX?i[e]:""},t.prototype.getDisabled=function(){return this.disabled},t.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.adapter.addClass(lo.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(lo.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},t.prototype.openMenu=function(){this.adapter.addClass(lo.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},t.prototype.setHelperTextContent=function(e){this.helperText&&this.helperText.setContent(e)},t.prototype.layout=function(){if(this.adapter.hasLabel()){var e=this.getValue().length>0,i=this.adapter.hasClass(lo.FOCUSED),o=e||i,a=this.adapter.hasClass(lo.REQUIRED);this.notchOutline(o),this.adapter.floatLabel(o),this.adapter.setLabelRequired(a)}},t.prototype.layoutOptions=function(){var e=this.adapter.getMenuItemValues(),i=e.indexOf(this.getValue());this.setSelectedIndex(i,!1,!0)},t.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var e=this.getSelectedIndex(),i=e>=0?e:0;this.adapter.focusMenuItemAtIndex(i)}},t.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},t.prototype.handleMenuClosed=function(){this.adapter.removeClass(lo.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},t.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var e=this.adapter.hasClass(lo.REQUIRED);e&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.handleMenuItemAction=function(e){this.setSelectedIndex(e,!0)},t.prototype.handleFocus=function(){this.adapter.addClass(lo.FOCUSED),this.layout(),this.adapter.activateBottomLine()},t.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},t.prototype.handleClick=function(e){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(e),this.openMenu()}},t.prototype.handleKeydown=function(e){if(!(this.isMenuOpen||!this.adapter.hasClass(lo.FOCUSED))){var i=Co(e)===Bi.ENTER,o=Co(e)===Bi.SPACEBAR,a=Co(e)===Bi.ARROW_UP,s=Co(e)===Bi.ARROW_DOWN,n=e.ctrlKey||e.metaKey;if(!n&&(!o&&e.key&&e.key.length===1||o&&this.adapter.isTypeaheadInProgress())){var l=o?" ":e.key,u=this.adapter.typeaheadMatchItem(l,this.getSelectedIndex());u>=0&&this.setSelectedIndex(u),e.preventDefault();return}!i&&!o&&!a&&!s||(this.openMenu(),e.preventDefault())}},t.prototype.notchOutline=function(e){if(!!this.adapter.hasOutline()){var i=this.adapter.hasClass(lo.FOCUSED);if(e){var o=Af.LABEL_SCALE,a=this.adapter.getLabelWidth()*o;this.adapter.notchOutline(a)}else i||this.adapter.closeOutline()}},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon&&this.leadingIcon.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon&&this.leadingIcon.setContent(e)},t.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},t.prototype.setUseDefaultValidation=function(e){this.useDefaultValidation=e},t.prototype.setValid=function(e){this.useDefaultValidation||(this.customValidity=e),this.adapter.setSelectAnchorAttr("aria-invalid",(!e).toString()),e?(this.adapter.removeClass(lo.INVALID),this.adapter.removeMenuClass(lo.MENU_INVALID)):(this.adapter.addClass(lo.INVALID),this.adapter.addMenuClass(lo.MENU_INVALID)),this.syncHelperTextValidity(e)},t.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(lo.REQUIRED)&&!this.adapter.hasClass(lo.DISABLED)?this.getSelectedIndex()!==Af.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},t.prototype.setRequired=function(e){e?this.adapter.addClass(lo.REQUIRED):this.adapter.removeClass(lo.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",e.toString()),this.adapter.setLabelRequired(e)},t.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},t.prototype.init=function(){var e=this.adapter.getAnchorElement();e&&(this.adapter.setMenuAnchorElement(e),this.adapter.setMenuAnchorCorner(Pf.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(lo.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(lo.INVALID)),this.layout(),this.layoutOptions()},t.prototype.blur=function(){this.adapter.removeClass(lo.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var e=this.adapter.hasClass(lo.REQUIRED);e&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.syncHelperTextValidity=function(e){if(!!this.helperText){this.helperText.setValidity(e);var i=this.helperText.isVisible(),o=this.helperText.getId();i&&o?this.adapter.setSelectAnchorAttr(qm.ARIA_DESCRIBEDBY,o):this.adapter.removeSelectAnchorAttr(qm.ARIA_DESCRIBEDBY)}},t.prototype.setClickDebounceTimeout=function(){var e=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){e.recentlyClicked=!1},Af.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},t}(ws);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Sf={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},kc={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _M=function(r){xo(t,r);function t(e){return r.call(this,aa(aa({},t.defaultAdapter),e))||this}return Object.defineProperty(t,"cssClasses",{get:function(){return kc},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Sf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.adapter.getAttr("id")},t.prototype.isVisible=function(){return this.adapter.getAttr(Sf.ARIA_HIDDEN)!=="true"},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.setValidation=function(e){e?this.adapter.addClass(kc.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(kc.HELPER_TEXT_VALIDATION_MSG)},t.prototype.setValidationMsgPersistent=function(e){e?this.adapter.addClass(kc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(kc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},t.prototype.getIsValidation=function(){return this.adapter.hasClass(kc.HELPER_TEXT_VALIDATION_MSG)},t.prototype.getIsValidationMsgPersistent=function(){return this.adapter.hasClass(kc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},t.prototype.setValidity=function(e){var i=this.adapter.hasClass(kc.HELPER_TEXT_VALIDATION_MSG);if(!!i){var o=this.adapter.hasClass(kc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),a=!e||o;if(a){this.showToScreenReader(),e?this.adapter.removeAttr(Sf.ROLE):this.adapter.setAttr(Sf.ROLE,"alert");return}this.adapter.removeAttr(Sf.ROLE),this.hide()}},t.prototype.showToScreenReader=function(){this.adapter.removeAttr(Sf.ARIA_HIDDEN)},t.prototype.hide=function(){this.adapter.setAttr(Sf.ARIA_HIDDEN,"true")},t}(ws);function bM(r){let t,e,i,o,a,s,n,l;const u=r[22].default,h=Ni(u,r,r[21],null);let v=[{class:e=Pn({[r[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":r[0],"mdc-floating-label--required":r[1],...r[8]})},{style:i=Object.entries(r[9]).map(Yy).concat([r[4]]).join(" ")},{for:o=r[5]||(r[11]?r[11].id:void 0)},r[12]],d={};for(let p=0;p<v.length;p+=1)d=cn(d,v[p]);return{c(){t=_n("label"),h&&h.c(),Xn(t,d)},m(p,_){Er(p,t,_),h&&h.m(t,null),r[24](t),s=!0,n||(l=[ri(a=ma.call(null,t,r[2])),ri(r[10].call(null,t))],n=!0)},p(p,_){h&&h.p&&(!s||_&2097152)&&Hi(h,u,p,p[21],s?Ui(u,p[21],_,null):Vi(p[21]),null),Xn(t,d=li(v,[(!s||_&267&&e!==(e=Pn({[p[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":p[0],"mdc-floating-label--required":p[1],...p[8]})))&&{class:e},(!s||_&528&&i!==(i=Object.entries(p[9]).map(Yy).concat([p[4]]).join(" ")))&&{style:i},(!s||_&32&&o!==(o=p[5]||(p[11]?p[11].id:void 0)))&&{for:o},_&4096&&p[12]])),a&&Ci(a.update)&&_&4&&a.update.call(null,p[2])},i(p){s||(Kt(h,p),s=!0)},o(p){lr(h,p),s=!1},d(p){p&&Sr(t),h&&h.d(p),r[24](null),n=!1,Ma(l)}}}function xM(r){let t,e,i,o,a,s,n;const l=r[22].default,u=Ni(l,r,r[21],null);let h=[{class:e=Pn({[r[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":r[0],"mdc-floating-label--required":r[1],...r[8]})},{style:i=Object.entries(r[9]).map(jy).concat([r[4]]).join(" ")},r[12]],v={};for(let d=0;d<h.length;d+=1)v=cn(v,h[d]);return{c(){t=_n("span"),u&&u.c(),Xn(t,v)},m(d,p){Er(d,t,p),u&&u.m(t,null),r[23](t),a=!0,s||(n=[ri(o=ma.call(null,t,r[2])),ri(r[10].call(null,t))],s=!0)},p(d,p){u&&u.p&&(!a||p&2097152)&&Hi(u,l,d,d[21],a?Ui(l,d[21],p,null):Vi(d[21]),null),Xn(t,v=li(h,[(!a||p&267&&e!==(e=Pn({[d[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":d[0],"mdc-floating-label--required":d[1],...d[8]})))&&{class:e},(!a||p&528&&i!==(i=Object.entries(d[9]).map(jy).concat([d[4]]).join(" ")))&&{style:i},p&4096&&d[12]])),o&&Ci(o.update)&&p&4&&o.update.call(null,d[2])},i(d){a||(Kt(u,d),a=!0)},o(d){lr(u,d),a=!1},d(d){d&&Sr(t),u&&u.d(d),r[23](null),s=!1,Ma(n)}}}function wM(r){let t,e,i,o;const a=[xM,bM],s=[];function n(l,u){return l[6]?0:1}return t=n(r),e=s[t]=a[t](r),{c(){e.c(),i=ea()},m(l,u){s[t].m(l,u),Er(l,i,u),o=!0},p(l,[u]){let h=t;t=n(l),t===h?s[t].p(l,u):(Ri(),lr(s[h],1,1,()=>{s[h]=null}),Fi(),e=s[t],e?e.p(l,u):(e=s[t]=a[t](l),e.c()),Kt(e,1),e.m(i.parentNode,i))},i(l){o||(Kt(e),o=!0)},o(l){lr(e),o=!1},d(l){s[t].d(l),l&&Sr(i)}}}const jy=([r,t])=>`${r}: ${t};`,Yy=([r,t])=>`${r}: ${t};`;function TM(r,t,e){const i=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;var n;const l=wa(oa());let{use:u=[]}=t,{class:h=""}=t,{style:v=""}=t,{for:d=void 0}=t,{floatAbove:p=!1}=t,{required:_=!1}=t,{wrapped:b=!1}=t,x,E,A={},P={},D=(n=Ki("SMUI:generic:input:props"))!==null&&n!==void 0?n:{},R=p,S=_;bo(()=>{e(18,E=new dM({addClass:I,removeClass:T,getWidth:()=>{var q,we;const ee=H(),X=ee.cloneNode(!0);(q=ee.parentNode)===null||q===void 0||q.appendChild(X),X.classList.add("smui-floating-label--remove-transition"),X.classList.add("smui-floating-label--force-size"),X.classList.remove("mdc-floating-label--float-above");const re=X.scrollWidth;return(we=ee.parentNode)===null||we===void 0||we.removeChild(X),re},registerInteractionHandler:(q,we)=>H().addEventListener(q,we),deregisterInteractionHandler:(q,we)=>H().removeEventListener(q,we)}));const ne={get element(){return H()},addStyle:M,removeStyle:z};return Di(x,"SMUIFloatingLabel:mount",ne),E.init(),()=>{Di(x,"SMUIFloatingLabel:unmount",ne),E.destroy()}});function I(ne){A[ne]||e(8,A[ne]=!0,A)}function T(ne){(!(ne in A)||A[ne])&&e(8,A[ne]=!1,A)}function M(ne,q){P[ne]!=q&&(q===""||q==null?(delete P[ne],e(9,P)):e(9,P[ne]=q,P))}function z(ne){ne in P&&(delete P[ne],e(9,P))}function U(ne){E.shake(ne)}function F(ne){e(0,p=ne)}function V(ne){e(1,_=ne)}function j(){return E.getWidth()}function H(){return x}function Y(ne){ci[ne?"unshift":"push"](()=>{x=ne,e(7,x)})}function J(ne){ci[ne?"unshift":"push"](()=>{x=ne,e(7,x)})}return r.$$set=ne=>{t=cn(cn({},t),ga(ne)),e(12,o=ei(t,i)),"use"in ne&&e(2,u=ne.use),"class"in ne&&e(3,h=ne.class),"style"in ne&&e(4,v=ne.style),"for"in ne&&e(5,d=ne.for),"floatAbove"in ne&&e(0,p=ne.floatAbove),"required"in ne&&e(1,_=ne.required),"wrapped"in ne&&e(6,b=ne.wrapped),"$$scope"in ne&&e(21,s=ne.$$scope)},r.$$.update=()=>{r.$$.dirty&786433&&E&&R!==p&&(e(19,R=p),E.float(p)),r.$$.dirty&1310722&&E&&S!==_&&(e(20,S=_),E.setRequired(_))},[p,_,u,h,v,d,b,x,A,P,l,D,o,U,F,V,j,H,E,R,S,s,a,Y,J]}class $b extends ki{constructor(t){super(),Mi(this,t,TM,wM,_i,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function AM(r){let t,e,i,o,a,s,n=[{class:e=Pn({[r[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":r[3],...r[5]})},{style:i=Object.entries(r[6]).map(Xy).concat([r[2]]).join(" ")},r[8]],l={};for(let u=0;u<n.length;u+=1)l=cn(l,n[u]);return{c(){t=_n("div"),Xn(t,l)},m(u,h){Er(u,t,h),r[13](t),a||(s=[ri(o=ma.call(null,t,r[0])),ri(r[7].call(null,t))],a=!0)},p(u,[h]){Xn(t,l=li(n,[h&42&&e!==(e=Pn({[u[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":u[3],...u[5]}))&&{class:e},h&68&&i!==(i=Object.entries(u[6]).map(Xy).concat([u[2]]).join(" "))&&{style:i},h&256&&u[8]])),o&&Ci(o.update)&&h&1&&o.update.call(null,u[0])},i:qi,o:qi,d(u){u&&Sr(t),r[13](null),a=!1,Ma(s)}}}const Xy=([r,t])=>`${r}: ${t};`;function SM(r,t,e){const i=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let o=ei(t,i);const a=wa(oa());let{use:s=[]}=t,{class:n=""}=t,{style:l=""}=t,{active:u=!1}=t,h,v,d={},p={};bo(()=>(v=new pM({addClass:b,removeClass:x,hasClass:_,setStyle:E,registerEventHandler:(I,T)=>R().addEventListener(I,T),deregisterEventHandler:(I,T)=>R().removeEventListener(I,T)}),v.init(),()=>{v.destroy()}));function _(I){return I in d?d[I]:R().classList.contains(I)}function b(I){d[I]||e(5,d[I]=!0,d)}function x(I){(!(I in d)||d[I])&&e(5,d[I]=!1,d)}function E(I,T){p[I]!=T&&(T===""||T==null?(delete p[I],e(6,p)):e(6,p[I]=T,p))}function A(){v.activate()}function P(){v.deactivate()}function D(I){v.setRippleCenter(I)}function R(){return h}function S(I){ci[I?"unshift":"push"](()=>{h=I,e(4,h)})}return r.$$set=I=>{t=cn(cn({},t),ga(I)),e(8,o=ei(t,i)),"use"in I&&e(0,s=I.use),"class"in I&&e(1,n=I.class),"style"in I&&e(2,l=I.style),"active"in I&&e(3,u=I.active)},[s,n,l,u,h,d,p,a,o,A,P,D,R,S]}class EM extends ki{constructor(t){super(),Mi(this,t,SM,AM,_i,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function Ky(r){let t,e,i;const o=r[14].default,a=Ni(o,r,r[13],null);return{c(){t=_n("div"),a&&a.c(),nn(t,"class","mdc-notched-outline__notch"),nn(t,"style",e=Object.entries(r[7]).map(Jy).join(" "))},m(s,n){Er(s,t,n),a&&a.m(t,null),i=!0},p(s,n){a&&a.p&&(!i||n&8192)&&Hi(a,o,s,s[13],i?Ui(o,s[13],n,null):Vi(s[13]),null),(!i||n&128&&e!==(e=Object.entries(s[7]).map(Jy).join(" ")))&&nn(t,"style",e)},i(s){i||(Kt(a,s),i=!0)},o(s){lr(a,s),i=!1},d(s){s&&Sr(t),a&&a.d(s)}}}function CM(r){let t,e,i,o,a,s,n,l,u,h,v=!r[3]&&Ky(r),d=[{class:s=Pn({[r[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":r[2],"mdc-notched-outline--no-label":r[3],...r[6]})},r[9]],p={};for(let _=0;_<d.length;_+=1)p=cn(p,d[_]);return{c(){t=_n("div"),e=_n("div"),i=Rn(),v&&v.c(),o=Rn(),a=_n("div"),nn(e,"class","mdc-notched-outline__leading"),nn(a,"class","mdc-notched-outline__trailing"),Xn(t,p)},m(_,b){Er(_,t,b),En(t,e),En(t,i),v&&v.m(t,null),En(t,o),En(t,a),r[15](t),l=!0,u||(h=[ri(n=ma.call(null,t,r[0])),ri(r[8].call(null,t)),si(t,"SMUIFloatingLabel:mount",r[16]),si(t,"SMUIFloatingLabel:unmount",r[17])],u=!0)},p(_,[b]){_[3]?v&&(Ri(),lr(v,1,1,()=>{v=null}),Fi()):v?(v.p(_,b),b&8&&Kt(v,1)):(v=Ky(_),v.c(),Kt(v,1),v.m(t,o)),Xn(t,p=li(d,[(!l||b&78&&s!==(s=Pn({[_[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":_[2],"mdc-notched-outline--no-label":_[3],..._[6]})))&&{class:s},b&512&&_[9]])),n&&Ci(n.update)&&b&1&&n.update.call(null,_[0])},i(_){l||(Kt(v),l=!0)},o(_){lr(v),l=!1},d(_){_&&Sr(t),v&&v.d(),r[15](null),u=!1,Ma(h)}}}const Jy=([r,t])=>`${r}: ${t};`;function DM(r,t,e){const i=["use","class","notched","noLabel","notch","closeNotch","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{notched:h=!1}=t,{noLabel:v=!1}=t,d,p,_,b={},x={};bo(()=>(p=new gM({addClass:E,removeClass:A,setNotchWidthProperty:U=>P("width",U+"px"),removeNotchWidthProperty:()=>D("width")}),p.init(),()=>{p.destroy()}));function E(U){b[U]||e(6,b[U]=!0,b)}function A(U){(!(U in b)||b[U])&&e(6,b[U]=!1,b)}function P(U,F){x[U]!=F&&(F===""||F==null?(delete x[U],e(7,x)):e(7,x[U]=F,x))}function D(U){U in x&&(delete x[U],e(7,x))}function R(U){p.notch(U)}function S(){p.closeNotch()}function I(){return d}function T(U){ci[U?"unshift":"push"](()=>{d=U,e(5,d)})}const M=U=>e(4,_=U.detail),z=()=>e(4,_=void 0);return r.$$set=U=>{t=cn(cn({},t),ga(U)),e(9,o=ei(t,i)),"use"in U&&e(0,l=U.use),"class"in U&&e(1,u=U.class),"notched"in U&&e(2,h=U.notched),"noLabel"in U&&e(3,v=U.noLabel),"$$scope"in U&&e(13,s=U.$$scope)},r.$$.update=()=>{r.$$.dirty&16&&(_?(_.addStyle("transition-duration","0s"),E("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{_&&_.removeStyle("transition-duration")})):A("mdc-notched-outline--upgraded"))},[l,u,h,v,_,d,b,x,n,o,R,S,I,s,a,T,M,z]}class MM extends ki{constructor(t){super(),Mi(this,t,DM,CM,_i,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function kM(r){let t;return{c(){t=oi(r[8])},m(e,i){Er(e,t,i)},p(e,i){i&256&&uo(t,e[8])},i:qi,o:qi,d(e){e&&Sr(t)}}}function IM(r){let t;const e=r[13].default,i=Ni(e,r,r[12],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&4096)&&Hi(i,e,o,o[12],t?Ui(e,o[12],a,null):Vi(o[12]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function LM(r){let t,e,i,o,a,s,n,l,u;const h=[IM,kM],v=[];function d(b,x){return b[8]==null?0:1}e=d(r),i=v[e]=h[e](r);let p=[{class:o=Pn({[r[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":r[4],"mdc-select-helper-text--validation-msg-persistent":r[3],...r[6]})},{"aria-hidden":a=r[3]?void 0:"true"},{id:r[2]},r[7],r[10]],_={};for(let b=0;b<p.length;b+=1)_=cn(_,p[b]);return{c(){t=_n("div"),i.c(),Xn(t,_)},m(b,x){Er(b,t,x),v[e].m(t,null),r[14](t),n=!0,l||(u=[ri(s=ma.call(null,t,r[0])),ri(r[9].call(null,t))],l=!0)},p(b,[x]){let E=e;e=d(b),e===E?v[e].p(b,x):(Ri(),lr(v[E],1,1,()=>{v[E]=null}),Fi(),i=v[e],i?i.p(b,x):(i=v[e]=h[e](b),i.c()),Kt(i,1),i.m(t,null)),Xn(t,_=li(p,[(!n||x&90&&o!==(o=Pn({[b[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":b[4],"mdc-select-helper-text--validation-msg-persistent":b[3],...b[6]})))&&{class:o},(!n||x&8&&a!==(a=b[3]?void 0:"true"))&&{"aria-hidden":a},(!n||x&4)&&{id:b[2]},x&128&&b[7],x&1024&&b[10]])),s&&Ci(s.update)&&x&1&&s.update.call(null,b[0])},i(b){n||(Kt(i),n=!0)},o(b){lr(i),n=!1},d(b){b&&Sr(t),v[e].d(),r[14](null),l=!1,Ma(u)}}}let PM=0;function RM(r,t,e){const i=["use","class","id","persistent","validationMsg","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{id:h="SMUI-select-helper-text-"+PM++}=t,{persistent:v=!1}=t,{validationMsg:d=!1}=t,p,_,b={},x={},E;bo(()=>(_=new _M({addClass:P,removeClass:D,hasClass:A,getAttr:R,setAttr:S,removeAttr:I,setContent:z=>{e(8,E=z)}}),h.startsWith("SMUI-select-helper-text-")&&Di(T(),"SMUISelectHelperText:id",h),Di(T(),"SMUISelectHelperText:mount",_),_.init(),()=>{Di(T(),"SMUISelectHelperText:unmount",_),_.destroy()}));function A(z){return z in b?b[z]:T().classList.contains(z)}function P(z){b[z]||e(6,b[z]=!0,b)}function D(z){(!(z in b)||b[z])&&e(6,b[z]=!1,b)}function R(z){var U;return z in x?(U=x[z])!==null&&U!==void 0?U:null:T().getAttribute(z)}function S(z,U){x[z]!==U&&e(7,x[z]=U,x)}function I(z){(!(z in x)||x[z]!=null)&&e(7,x[z]=void 0,x)}function T(){return p}function M(z){ci[z?"unshift":"push"](()=>{p=z,e(5,p)})}return r.$$set=z=>{t=cn(cn({},t),ga(z)),e(10,o=ei(t,i)),"use"in z&&e(0,l=z.use),"class"in z&&e(1,u=z.class),"id"in z&&e(2,h=z.id),"persistent"in z&&e(3,v=z.persistent),"validationMsg"in z&&e(4,d=z.validationMsg),"$$scope"in z&&e(12,s=z.$$scope)},[l,u,h,v,d,p,b,x,E,n,o,T,s,a,M]}class FM extends ki{constructor(t){super(),Mi(this,t,RM,LM,_i,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const OM=r=>({}),$y=r=>({}),zM=r=>({}),Qy=r=>({}),BM=r=>({}),qy=r=>({}),NM=r=>({}),e1=r=>({});function t1(r){let t,e=[{type:"hidden"},{required:r[10]},{disabled:r[6]},{value:r[0]},xi(r[52],"input$")],i={};for(let o=0;o<e.length;o+=1)i=cn(i,e[o]);return{c(){t=_n("input"),Xn(t,i)},m(o,a){Er(o,t,a),t.autofocus&&t.focus()},p(o,a){Xn(t,i=li(e,[{type:"hidden"},a[0]&1024&&{required:o[10]},a[0]&64&&{disabled:o[6]},a[0]&1&&{value:o[0]},a[1]&2097152&&xi(o[52],"input$")]))},d(o){o&&Sr(t)}}}function r1(r){let t;return{c(){t=_n("span"),nn(t,"class","mdc-select__ripple")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function n1(r){let t,e;const i=[{id:r[11]+"-smui-label"},{floatAbove:r[42]!==""},{required:r[10]},xi(r[52],"label$")];let o={$$slots:{default:[UM]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new $b({props:o}),r[65](t),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,s){const n=s[0]&3072|s[1]&2099200?li(i,[s[0]&2048&&{id:a[11]+"-smui-label"},s[1]&2048&&{floatAbove:a[42]!==""},s[0]&1024&&{required:a[10]},s[1]&2097152&&pa(xi(a[52],"label$"))]):{};s[0]&512|s[2]&16777216&&(n.$$scope={dirty:s,ctx:a}),t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){r[65](null),sn(t,a)}}}function UM(r){let t=(r[9]==null?"":r[9])+"",e,i;const o=r[62].label,a=Ni(o,r,r[86],e1);return{c(){e=oi(t),a&&a.c()},m(s,n){Er(s,e,n),a&&a.m(s,n),i=!0},p(s,n){(!i||n[0]&512)&&t!==(t=(s[9]==null?"":s[9])+"")&&uo(e,t),a&&a.p&&(!i||n[2]&16777216)&&Hi(a,o,s,s[86],i?Ui(o,s[86],n,NM):Vi(s[86]),e1)},i(s){i||(Kt(a,s),i=!0)},o(s){lr(a,s),i=!1},d(s){s&&Sr(e),a&&a.d(s)}}}function i1(r){let t,e;const i=[{noLabel:r[8]||r[9]==null&&!r[51].label},xi(r[52],"outline$")];let o={$$slots:{default:[VM]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new MM({props:o}),r[67](t),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,s){const n=s[0]&768|s[1]&3145728?li(i,[s[0]&768|s[1]&1048576&&{noLabel:a[8]||a[9]==null&&!a[51].label},s[1]&2097152&&pa(xi(a[52],"outline$"))]):{};s[0]&3840|s[1]&3148032|s[2]&16777216&&(n.$$scope={dirty:s,ctx:a}),t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){r[67](null),sn(t,a)}}}function a1(r){let t,e;const i=[{id:r[11]+"-smui-label"},{floatAbove:r[42]!==""},{required:r[10]},xi(r[52],"label$")];let o={$$slots:{default:[HM]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new $b({props:o}),r[66](t),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,s){const n=s[0]&3072|s[1]&2099200?li(i,[s[0]&2048&&{id:a[11]+"-smui-label"},s[1]&2048&&{floatAbove:a[42]!==""},s[0]&1024&&{required:a[10]},s[1]&2097152&&pa(xi(a[52],"label$"))]):{};s[0]&512|s[2]&16777216&&(n.$$scope={dirty:s,ctx:a}),t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){r[66](null),sn(t,a)}}}function HM(r){let t=(r[9]==null?"":r[9])+"",e,i;const o=r[62].label,a=Ni(o,r,r[86],qy);return{c(){e=oi(t),a&&a.c()},m(s,n){Er(s,e,n),a&&a.m(s,n),i=!0},p(s,n){(!i||n[0]&512)&&t!==(t=(s[9]==null?"":s[9])+"")&&uo(e,t),a&&a.p&&(!i||n[2]&16777216)&&Hi(a,o,s,s[86],i?Ui(o,s[86],n,BM):Vi(s[86]),qy)},i(s){i||(Kt(a,s),i=!0)},o(s){lr(a,s),i=!1},d(s){s&&Sr(e),a&&a.d(s)}}}function VM(r){let t,e,i=!r[8]&&(r[9]!=null||r[51].label)&&a1(r);return{c(){i&&i.c(),t=ea()},m(o,a){i&&i.m(o,a),Er(o,t,a),e=!0},p(o,a){!o[8]&&(o[9]!=null||o[51].label)?i?(i.p(o,a),a[0]&768|a[1]&1048576&&Kt(i,1)):(i=a1(o),i.c(),Kt(i,1),i.m(t.parentNode,t)):i&&(Ri(),lr(i,1,1,()=>{i=null}),Fi())},i(o){e||(Kt(i),e=!0)},o(o){lr(i),e=!1},d(o){i&&i.d(o),o&&Sr(t)}}}function o1(r){let t,e;const i=[xi(r[52],"ripple$")];let o={};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new EM({props:o}),r[68](t),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,s){const n=s[1]&2097152?li(i,[pa(xi(a[52],"ripple$"))]):{};t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){r[68](null),sn(t,a)}}}function GM(r){let t;const e=r[62].default,i=Ni(e,r,r[86],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a[2]&16777216)&&Hi(i,e,o,o[86],t?Ui(e,o[86],a,null):Vi(o[86]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function ZM(r){let t,e,i;const o=[{role:"listbox"},{wrapFocus:r[35]},xi(r[52],"list$")];function a(n){r[73](n)}let s={$$slots:{default:[GM]},$$scope:{ctx:r}};for(let n=0;n<o.length;n+=1)s=cn(s,o[n]);return r[24]!==void 0&&(s.selectedIndex=r[24]),t=new qp({props:s}),ci.push(()=>Ah(t,"selectedIndex",a)),t.$on("SMUIList:mount",r[74]),{c(){un(t.$$.fragment)},m(n,l){on(t,n,l),i=!0},p(n,l){const u=l[1]&2097168?li(o,[o[0],l[1]&16&&{wrapFocus:n[35]},l[1]&2097152&&pa(xi(n[52],"list$"))]):{};l[2]&16777216&&(u.$$scope={dirty:l,ctx:n}),!e&&l[0]&16777216&&(e=!0,u.selectedIndex=n[24],Th(()=>e=!1)),t.$set(u)},i(n){i||(Kt(t.$$.fragment,n),i=!0)},o(n){lr(t.$$.fragment,n),i=!1},d(n){sn(t,n)}}}function s1(r){let t,e;const i=[xi(r[52],"helperText$")];let o={$$slots:{default:[WM]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new FM({props:o}),t.$on("SMUISelectHelperText:id",r[83]),t.$on("SMUISelectHelperText:mount",r[84]),t.$on("SMUISelectHelperText:unmount",r[85]),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,s){const n=s[1]&2097152?li(i,[pa(xi(a[52],"helperText$"))]):{};s[2]&16777216&&(n.$$scope={dirty:s,ctx:a}),t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){sn(t,a)}}}function WM(r){let t;const e=r[62].helperText,i=Ni(e,r,r[86],$y);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a[2]&16777216)&&Hi(i,e,o,o[86],t?Ui(e,o[86],a,OM):Vi(o[86]),$y)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function jM(r){let t,e,i,o,a,s,n,l,u,h,v,d,p,_,b,x,E,A,P,D,R,S,I,T,M,z,U,F,V,j,H,Y,J,ne,q,we,ee,X,re,de,me=r[12]&&t1(r),xe=r[7]==="filled"&&r1(),He=r[7]!=="outlined"&&!r[8]&&(r[9]!=null||r[51].label)&&n1(r),Re=r[7]==="outlined"&&i1(r);const Ee=r[62].leadingIcon,ke=Ni(Ee,r,r[86],Qy);let $=[{id:v=r[11]+"-smui-selected-text"},{class:d=Pn({[r[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":p=r[11]+"-smui-label"},xi(r[52],"selectedText$")],le={};for(let at=0;at<$.length;at+=1)le=cn(le,$[at]);let K=[{class:b=Pn({[r[17]]:!0,"mdc-select__selected-text-container":!0})},xi(r[52],"selectedTextContainer$")],te={};for(let at=0;at<K.length;at+=1)te=cn(te,K[at]);let ie=[{class:S=Pn({[r[21]]:!0,"mdc-select__dropdown-icon":!0})},xi(r[52],"dropdownIcon$")],ce={};for(let at=0;at<ie.length;at+=1)ce=cn(ce,ie[at]);let ae=r[7]!=="outlined"&&r[5]&&o1(r),ve=[{class:M=Pn({[r[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":z=r[10]?"true":void 0},{"aria-disabled":U=r[6]?"true":void 0},{"aria-controls":r[30]},{"aria-describedby":r[30]},r[29],xi(r[52],"anchor$")],pe={};for(let at=0;at<ve.length;at+=1)pe=cn(pe,ve[at]);const he=[{class:Pn({[r[22]]:!0,"mdc-select__menu":!0,...r[32]})},{fullWidth:!0},{anchor:!1},{anchorElement:r[33]},{anchorCorner:r[34]},xi(r[52],"menu$")];function ye(at){r[75](at)}let _e={$$slots:{default:[ZM]},$$scope:{ctx:r}};for(let at=0;at<he.length;at+=1)_e=cn(_e,he[at]);r[31]!==void 0&&(_e.open=r[31]),j=new y0({props:_e}),ci.push(()=>Ah(j,"open",ye)),j.$on("SMUIMenu:selected",r[76]),j.$on("SMUIMenuSurface:closing",r[77]),j.$on("SMUIMenuSurface:closed",r[78]),j.$on("SMUIMenuSurface:opened",r[79]);let je=[{class:Y=Pn({[r[3]]:!0,"mdc-select":!0,"mdc-select--required":r[10],"mdc-select--disabled":r[6],"mdc-select--filled":r[7]==="filled","mdc-select--outlined":r[7]==="outlined","smui-select--standard":r[7]==="standard","mdc-select--with-leading-icon":r[44](r[13])?r[51].leadingIcon:r[13],"mdc-select--no-label":r[8]||r[9]==null&&!r[51].label,"mdc-select--invalid":r[1],"mdc-select--activated":r[31],"mdc-data-table__pagination-rows-per-page-select":r[45]==="data-table:pagination",...r[26]})},{style:J=Object.entries(r[27]).map(l1).concat([r[4]]).join(" ")},Os(r[52],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],Je={};for(let at=0;at<je.length;at+=1)Je=cn(Je,je[at]);let nt=r[51].helperText&&s1(r);return{c(){t=_n("div"),me&&me.c(),e=Rn(),i=_n("div"),xe&&xe.c(),o=Rn(),He&&He.c(),a=Rn(),Re&&Re.c(),s=Rn(),ke&&ke.c(),n=Rn(),l=_n("span"),u=_n("span"),h=oi(r[42]),E=Rn(),A=_n("span"),P=su("svg"),D=su("polygon"),R=su("polygon"),T=Rn(),ae&&ae.c(),V=Rn(),un(j.$$.fragment),we=Rn(),nt&&nt.c(),ee=ea(),Xn(u,le),Xn(l,te),nn(D,"class","mdc-select__dropdown-icon-inactive"),nn(D,"stroke","none"),nn(D,"fill-rule","evenodd"),nn(D,"points","7 10 12 15 17 10"),nn(R,"class","mdc-select__dropdown-icon-active"),nn(R,"stroke","none"),nn(R,"fill-rule","evenodd"),nn(R,"points","7 15 12 10 17 15"),nn(P,"class","mdc-select__dropdown-icon-graphic"),nn(P,"viewBox","7 10 10 5"),nn(P,"focusable","false"),Xn(A,ce),Xn(i,pe),Xn(t,Je)},m(at,Fe){Er(at,t,Fe),me&&me.m(t,null),En(t,e),En(t,i),xe&&xe.m(i,null),En(i,o),He&&He.m(i,null),En(i,a),Re&&Re.m(i,null),En(i,s),ke&&ke.m(i,null),En(i,n),En(i,l),En(l,u),En(u,h),En(i,E),En(i,A),En(A,P),En(P,D),En(P,R),En(i,T),ae&&ae.m(i,null),r[69](i),En(t,V),on(j,t,null),r[80](t),Er(at,we,Fe),nt&&nt.m(at,Fe),Er(at,ee,Fe),X=!0,re||(de=[ri(_=ma.call(null,u,r[18])),ri(x=ma.call(null,l,r[16])),ri(I=ma.call(null,A,r[20])),ri(F=ma.call(null,i,r[14])),si(i,"focus",r[70]),si(i,"blur",r[71]),si(i,"click",r[72]),si(i,"keydown",function(){Ci(r[23]&&r[23].handleKeydown.bind(r[23]))&&(r[23]&&r[23].handleKeydown.bind(r[23])).apply(this,arguments)}),si(i,"focus",r[63]),si(i,"blur",r[64]),ri(ne=Hc.call(null,t,{ripple:r[7]==="filled",unbounded:!1,addClass:r[48],removeClass:r[49],addStyle:r[50]})),ri(G5.call(null,t,{addClass:r[48],removeClass:r[49]})),ri(q=ma.call(null,t,r[2])),ri(r[43].call(null,t)),si(t,"SMUISelectLeadingIcon:mount",r[81]),si(t,"SMUISelectLeadingIcon:unmount",r[82])],re=!0)},p(at,Fe){r=at,r[12]?me?me.p(r,Fe):(me=t1(r),me.c(),me.m(t,e)):me&&(me.d(1),me=null),r[7]==="filled"?xe||(xe=r1(),xe.c(),xe.m(i,o)):xe&&(xe.d(1),xe=null),r[7]!=="outlined"&&!r[8]&&(r[9]!=null||r[51].label)?He?(He.p(r,Fe),Fe[0]&896|Fe[1]&1048576&&Kt(He,1)):(He=n1(r),He.c(),Kt(He,1),He.m(i,a)):He&&(Ri(),lr(He,1,1,()=>{He=null}),Fi()),r[7]==="outlined"?Re?(Re.p(r,Fe),Fe[0]&128&&Kt(Re,1)):(Re=i1(r),Re.c(),Kt(Re,1),Re.m(i,s)):Re&&(Ri(),lr(Re,1,1,()=>{Re=null}),Fi()),ke&&ke.p&&(!X||Fe[2]&16777216)&&Hi(ke,Ee,r,r[86],X?Ui(Ee,r[86],Fe,zM):Vi(r[86]),Qy),(!X||Fe[1]&2048)&&uo(h,r[42]),Xn(u,le=li($,[(!X||Fe[0]&2048&&v!==(v=r[11]+"-smui-selected-text"))&&{id:v},(!X||Fe[0]&524288&&d!==(d=Pn({[r[19]]:!0,"mdc-select__selected-text":!0})))&&{class:d},{role:"button"},{"aria-haspopup":"listbox"},(!X||Fe[0]&2048&&p!==(p=r[11]+"-smui-label"))&&{"aria-labelledby":p},Fe[1]&2097152&&xi(r[52],"selectedText$")])),_&&Ci(_.update)&&Fe[0]&262144&&_.update.call(null,r[18]),Xn(l,te=li(K,[(!X||Fe[0]&131072&&b!==(b=Pn({[r[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:b},Fe[1]&2097152&&xi(r[52],"selectedTextContainer$")])),x&&Ci(x.update)&&Fe[0]&65536&&x.update.call(null,r[16]),Xn(A,ce=li(ie,[(!X||Fe[0]&2097152&&S!==(S=Pn({[r[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:S},Fe[1]&2097152&&xi(r[52],"dropdownIcon$")])),I&&Ci(I.update)&&Fe[0]&1048576&&I.update.call(null,r[20]),r[7]!=="outlined"&&r[5]?ae?(ae.p(r,Fe),Fe[0]&160&&Kt(ae,1)):(ae=o1(r),ae.c(),Kt(ae,1),ae.m(i,null)):ae&&(Ri(),lr(ae,1,1,()=>{ae=null}),Fi()),Xn(i,pe=li(ve,[(!X||Fe[0]&32768&&M!==(M=Pn({[r[15]]:!0,"mdc-select__anchor":!0})))&&{class:M},(!X||Fe[0]&1024&&z!==(z=r[10]?"true":void 0))&&{"aria-required":z},(!X||Fe[0]&64&&U!==(U=r[6]?"true":void 0))&&{"aria-disabled":U},(!X||Fe[0]&1073741824)&&{"aria-controls":r[30]},(!X||Fe[0]&1073741824)&&{"aria-describedby":r[30]},Fe[0]&536870912&&r[29],Fe[1]&2097152&&xi(r[52],"anchor$")])),F&&Ci(F.update)&&Fe[0]&16384&&F.update.call(null,r[14]);const Ie=Fe[0]&4194304|Fe[1]&2097166?li(he,[Fe[0]&4194304|Fe[1]&2&&{class:Pn({[r[22]]:!0,"mdc-select__menu":!0,...r[32]})},he[1],he[2],Fe[1]&4&&{anchorElement:r[33]},Fe[1]&8&&{anchorCorner:r[34]},Fe[1]&2097152&&pa(xi(r[52],"menu$"))]):{};Fe[0]&16777216|Fe[1]&2097200|Fe[2]&16777216&&(Ie.$$scope={dirty:Fe,ctx:r}),!H&&Fe[1]&1&&(H=!0,Ie.open=r[31],Th(()=>H=!1)),j.$set(Ie),Xn(t,Je=li(je,[(!X||Fe[0]&67119050|Fe[1]&1048577&&Y!==(Y=Pn({[r[3]]:!0,"mdc-select":!0,"mdc-select--required":r[10],"mdc-select--disabled":r[6],"mdc-select--filled":r[7]==="filled","mdc-select--outlined":r[7]==="outlined","smui-select--standard":r[7]==="standard","mdc-select--with-leading-icon":r[44](r[13])?r[51].leadingIcon:r[13],"mdc-select--no-label":r[8]||r[9]==null&&!r[51].label,"mdc-select--invalid":r[1],"mdc-select--activated":r[31],"mdc-data-table__pagination-rows-per-page-select":r[45]==="data-table:pagination",...r[26]})))&&{class:Y},(!X||Fe[0]&134217744&&J!==(J=Object.entries(r[27]).map(l1).concat([r[4]]).join(" ")))&&{style:J},Fe[1]&2097152&&Os(r[52],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),ne&&Ci(ne.update)&&Fe[0]&128&&ne.update.call(null,{ripple:r[7]==="filled",unbounded:!1,addClass:r[48],removeClass:r[49],addStyle:r[50]}),q&&Ci(q.update)&&Fe[0]&4&&q.update.call(null,r[2]),r[51].helperText?nt?(nt.p(r,Fe),Fe[1]&1048576&&Kt(nt,1)):(nt=s1(r),nt.c(),Kt(nt,1),nt.m(ee.parentNode,ee)):nt&&(Ri(),lr(nt,1,1,()=>{nt=null}),Fi())},i(at){X||(Kt(He),Kt(Re),Kt(ke,at),Kt(ae),Kt(j.$$.fragment,at),Kt(nt),X=!0)},o(at){lr(He),lr(Re),lr(ke,at),lr(ae),lr(j.$$.fragment,at),lr(nt),X=!1},d(at){at&&Sr(t),me&&me.d(),xe&&xe.d(),He&&He.d(),Re&&Re.d(),ke&&ke.d(at),ae&&ae.d(),r[69](null),sn(j),r[80](null),at&&Sr(we),nt&&nt.d(at),at&&Sr(ee),re=!1,Ma(de)}}}let YM=0;function XM(r){const t=r.currentTarget.getBoundingClientRect();return(KM(r)?r.touches[0].clientX:r.clientX)-t.left}function KM(r){return"touches"in r}const l1=([r,t])=>`${r}: ${t};`;function JM(r,t,e){const i=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let o=ei(t,i),a,s,{$$slots:n={},$$scope:l}=t;const u=l_(n),h=wa(oa());let v=()=>{};function d(vt){return vt===v}let{use:p=[]}=t,{class:_=""}=t,{style:b=""}=t,{ripple:x=!0}=t,{disabled:E=!1}=t,{variant:A="standard"}=t,{noLabel:P=!1}=t,{label:D=void 0}=t,{value:R=""}=t,{key:S=vt=>vt}=t,{dirty:I=!1}=t,{invalid:T=v}=t,{updateInvalid:M=d(T)}=t;const z=d(T);d(T)&&(T=!1);let{required:U=!1}=t,{inputId:F="SMUI-select-"+YM++}=t,{hiddenInput:V=!1}=t,{withLeadingIcon:j=v}=t,{anchor$use:H=[]}=t,{anchor$class:Y=""}=t,{selectedTextContainer$use:J=[]}=t,{selectedTextContainer$class:ne=""}=t,{selectedText$use:q=[]}=t,{selectedText$class:we=""}=t,{dropdownIcon$use:ee=[]}=t,{dropdownIcon$class:X=""}=t,{menu$class:re=""}=t,de,me,xe={},He={},Re,Ee={},ke=-1,$,le=Ki("SMUI:addLayoutListener"),K,te=!1,ie={},ce,ae,ve=!1,pe,he=Ki("SMUI:select:context"),ye,_e,je,Je,nt;wi("SMUI:list:role",""),wi("SMUI:list:nav",!1);const at=_o("");Ei(r,at,vt=>e(42,a=vt)),wi("SMUI:select:selectedText",at);const Fe=_o(R);Ei(r,Fe,vt=>e(88,s=vt)),wi("SMUI:select:value",Fe);let Ie=ke;le&&(K=le(er)),bo(()=>(e(23,me=new yM({setSelectedText:vt=>{Va(at,a=vt,a)},isSelectAnchorFocused:()=>document.activeElement===Re,getSelectAnchorAttr:Xt,setSelectAnchorAttr:Nt,removeSelectAnchorAttr:Mt,addMenuClass:ht,removeMenuClass:Tt,openMenu:()=>{e(31,te=!0)},closeMenu:()=>{e(31,te=!1)},getAnchorElement:()=>Re,setMenuAnchorElement:vt=>{e(33,ce=vt)},setMenuAnchorCorner:vt=>{e(34,ae=vt)},setMenuWrapFocus:vt=>{e(35,ve=vt)},getSelectedIndex:()=>ke,setSelectedIndex:vt=>{e(61,Ie=vt),e(24,ke=vt),e(0,R=Vt()[ke])},focusMenuItemAtIndex:vt=>{pe.focusItemAtIndex(vt)},getMenuItemCount:()=>pe.items.length,getMenuItemValues:()=>Vt().map(S),getMenuItemTextAtIndex:vt=>pe.getPrimaryTextAtIndex(vt),isTypeaheadInProgress:()=>pe.typeaheadInProgress,typeaheadMatchItem:(vt,pr)=>pe.typeaheadMatchItem(vt,pr),addClass:Qe,removeClass:it,hasClass:Ke,setRippleCenter:vt=>Je&&Je.setRippleCenter(vt),activateBottomLine:()=>Je&&Je.activate(),deactivateBottomLine:()=>Je&&Je.deactivate(),notifyChange:vt=>{e(53,I=!0),M&&e(1,T=!me.isValid()),Di(Wt(),"SMUISelect:change",{value:R,index:ke},void 0,!0)},hasOutline:()=>!!nt,notchOutline:vt=>nt&&nt.notch(vt),closeOutline:()=>nt&&nt.closeNotch(),hasLabel:()=>!!je,floatLabel:vt=>je&&je.float(vt),getLabelWidth:()=>je?je.getWidth():0,setLabelRequired:vt=>je&&je.setRequired(vt)},{get helperText(){return _e},get leadingIcon(){return ye}})),e(24,ke=Vt().indexOf(R)),me.init(),cr(z),()=>{me.destroy()})),Vc(()=>{K&&K()});function Ke(vt){return vt in xe?xe[vt]:Wt().classList.contains(vt)}function Qe(vt){xe[vt]||e(26,xe[vt]=!0,xe)}function it(vt){(!(vt in xe)||xe[vt])&&e(26,xe[vt]=!1,xe)}function Ne(vt,pr){He[vt]!=pr&&(pr===""||pr==null?(delete He[vt],e(27,He)):e(27,He[vt]=pr,He))}function ht(vt){ie[vt]||e(32,ie[vt]=!0,ie)}function Tt(vt){(!(vt in ie)||ie[vt])&&e(32,ie[vt]=!1,ie)}function Xt(vt){var pr;return vt in Ee?(pr=Ee[vt])!==null&&pr!==void 0?pr:null:Wt().getAttribute(vt)}function Nt(vt,pr){Ee[vt]!==pr&&e(29,Ee[vt]=pr,Ee)}function Mt(vt){(!(vt in Ee)||Ee[vt]!=null)&&e(29,Ee[vt]=void 0,Ee)}function Vt(){return pe.getOrderedList().map(vt=>vt.getValue())}function Yt(){return me.getUseDefaultValidation()}function cr(vt){me.setUseDefaultValidation(vt)}function Nr(){Re.focus()}function er(){me.layout()}function Wt(){return de}function dr(vt){nv.call(this,r,vt)}function zr(vt){nv.call(this,r,vt)}function Dr(vt){ci[vt?"unshift":"push"](()=>{je=vt,e(39,je)})}function $e(vt){ci[vt?"unshift":"push"](()=>{je=vt,e(39,je)})}function pt(vt){ci[vt?"unshift":"push"](()=>{nt=vt,e(41,nt)})}function kt(vt){ci[vt?"unshift":"push"](()=>{Je=vt,e(40,Je)})}function Me(vt){ci[vt?"unshift":"push"](()=>{Re=vt,e(28,Re)})}const rt=()=>me&&me.handleFocus(),st=()=>me&&me.handleBlur(),ft=vt=>{Re.focus(),me&&me.handleClick(XM(vt))};function zt(vt){ke=vt,e(24,ke)}const Ue=vt=>e(36,pe=vt.detail);function Ae(vt){te=vt,e(31,te)}const Oe=vt=>me&&me.handleMenuItemAction(vt.detail.index),We=()=>me&&me.handleMenuClosing(),Ve=()=>me&&me.handleMenuClosed(),lt=()=>me&&me.handleMenuOpened();function mt(vt){ci[vt?"unshift":"push"](()=>{de=vt,e(25,de)})}const dt=vt=>e(37,ye=vt.detail),At=()=>e(37,ye=void 0),Bt=vt=>e(30,$=vt.detail),ir=vt=>e(38,_e=vt.detail),tr=()=>{e(30,$=void 0),e(38,_e=void 0)};return r.$$set=vt=>{t=cn(cn({},t),ga(vt)),e(52,o=ei(t,i)),"use"in vt&&e(2,p=vt.use),"class"in vt&&e(3,_=vt.class),"style"in vt&&e(4,b=vt.style),"ripple"in vt&&e(5,x=vt.ripple),"disabled"in vt&&e(6,E=vt.disabled),"variant"in vt&&e(7,A=vt.variant),"noLabel"in vt&&e(8,P=vt.noLabel),"label"in vt&&e(9,D=vt.label),"value"in vt&&e(0,R=vt.value),"key"in vt&&e(54,S=vt.key),"dirty"in vt&&e(53,I=vt.dirty),"invalid"in vt&&e(1,T=vt.invalid),"updateInvalid"in vt&&e(55,M=vt.updateInvalid),"required"in vt&&e(10,U=vt.required),"inputId"in vt&&e(11,F=vt.inputId),"hiddenInput"in vt&&e(12,V=vt.hiddenInput),"withLeadingIcon"in vt&&e(13,j=vt.withLeadingIcon),"anchor$use"in vt&&e(14,H=vt.anchor$use),"anchor$class"in vt&&e(15,Y=vt.anchor$class),"selectedTextContainer$use"in vt&&e(16,J=vt.selectedTextContainer$use),"selectedTextContainer$class"in vt&&e(17,ne=vt.selectedTextContainer$class),"selectedText$use"in vt&&e(18,q=vt.selectedText$use),"selectedText$class"in vt&&e(19,we=vt.selectedText$class),"dropdownIcon$use"in vt&&e(20,ee=vt.dropdownIcon$use),"dropdownIcon$class"in vt&&e(21,X=vt.dropdownIcon$class),"menu$class"in vt&&e(22,re=vt.menu$class),"$$scope"in vt&&e(86,l=vt.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&25165825|r.$$.dirty[1]&1073741824&&Ie!==ke)if(e(61,Ie=ke),me)me.setSelectedIndex(ke,!1,!0);else{const vt=Vt();R!==vt[ke]&&e(0,R=vt[ke])}r.$$.dirty[0]&1&&Va(Fe,s=R,s),r.$$.dirty[0]&8388609|r.$$.dirty[1]&8388608&&me&&me.getValue()!==S(R)&&me.setValue(S(R)),r.$$.dirty[0]&8388672&&me&&me.getDisabled()!==E&&me.setDisabled(E),r.$$.dirty[0]&8388610|r.$$.dirty[1]&20971520&&me&&I&&me.isValid()!==!T&&(M?e(1,T=!me.isValid()):me.setValid(!T)),r.$$.dirty[0]&8389632&&me&&me.getRequired()!==U&&me.setRequired(U)},[R,T,p,_,b,x,E,A,P,D,U,F,V,j,H,Y,J,ne,q,we,ee,X,re,me,ke,de,xe,He,Re,Ee,$,te,ie,ce,ae,ve,pe,ye,_e,je,Je,nt,a,h,d,he,at,Fe,Qe,it,Ne,u,o,I,S,M,Yt,cr,Nr,er,Wt,Ie,n,dr,zr,Dr,$e,pt,kt,Me,rt,st,ft,zt,Ue,Ae,Oe,We,Ve,lt,mt,dt,At,Bt,ir,tr,l]}class $M extends ki{constructor(t){super(),Mi(this,t,JM,jM,_i,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:54,dirty:53,invalid:1,updateInvalid:55,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:56,setUseDefaultValidation:57,focus:58,layout:59,getElement:60},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[56]}get setUseDefaultValidation(){return this.$$.ctx[57]}get focus(){return this.$$.ctx[58]}get layout(){return this.$$.ctx[59]}get getElement(){return this.$$.ctx[60]}}function QM(r){let t;const e=r[11].default,i=Ni(e,r,r[13],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&8192)&&Hi(i,e,o,o[13],t?Ui(e,o[13],a,null):Vi(o[13]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function qM(r){let t,e;const i=[{use:r[3]},{"data-value":r[0]},{value:r[0]},{selected:r[2]},r[6]];let o={$$slots:{default:[QM]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new Rf({props:o}),r[12](t),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,[s]){const n=s&77?li(i,[s&8&&{use:a[3]},s&1&&{"data-value":a[0]},s&1&&{value:a[0]},s&4&&{selected:a[2]},s&64&&pa(a[6])]):{};s&8192&&(n.$$scope={dirty:s,ctx:a}),t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){r[12](null),sn(t,a)}}}function e4(r,t,e){let i,o;const a=["use","class","value","getElement"];let s=ei(t,a),n,l,{$$slots:u={},$$scope:h}=t;const v=wa(oa());let{use:d=[]}=t;const p="";let{value:_=""}=t,b;const x=Ki("SMUI:select:selectedText");Ei(r,x,R=>e(14,n=R));const E=Ki("SMUI:select:value");Ei(r,E,R=>e(10,l=R)),wi("SMUI:list:item:role","option"),bo(A),Vc(A);function A(){o&&b&&Va(x,n=b.getPrimaryText(),n)}function P(){return b.getElement()}function D(R){ci[R?"unshift":"push"](()=>{b=R,e(1,b)})}return r.$$set=R=>{t=cn(cn({},t),ga(R)),e(6,s=ei(t,a)),"use"in R&&e(7,d=R.use),"value"in R&&e(0,_=R.value),"$$scope"in R&&e(13,h=R.$$scope)},r.$$.update=()=>{r.$$.dirty&128&&e(3,i=[v,...d]),r.$$.dirty&1025&&e(2,o=_!=null&&_!==""&&l===_)},[_,b,o,i,x,E,s,d,p,P,l,u,D,h]}class t4 extends ki{constructor(t){super(),Mi(this,t,e4,qM,_i,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}function u1(r){const t=$_("svg").attr("height",42).style("overflow","visible").style("display","block"),e=r4(r);let i=0,o=300;t.append("image").attr("x",i).attr("y",0).attr("width",o).attr("height",20).attr("preserveAspectRatio","none").attr("href",e);const a=[0,.25,.5,.75,1],s=a.length,n=xd().range(r.domain()),l=r.tickFormat(s);return t.selectAll("text").data(a).enter().append("text").attr("x",(u,h)=>i+o*h/(s-1)).attr("y",40).attr("text-anchor","middle").text(u=>l(n(u))),t.node()}function r4(r){let t=256;r=r.copy().domain([0,1]);const e=document.createElement("canvas");e.width=t,e.height=1;const i=e.getContext("2d");for(let o=0;o<t;++o)i.fillStyle=r(o/(t-1)),i.fillRect(o,0,1,1);return e.toDataURL()}const n4=[2,74,150,224,298];function i4(r){return r.copy().domain([0,1])(.5)}function Qb(){return $_("svg").attr("height",76).style("display","block").style("overflow","visible")}function qb(r){return r.selectAll("circle").data(n4).enter().append("g").attr("transform",t=>`translate(${t},26)`)}function ex(r){const t=xd().range(Hb);return r.append("circle").attr("r",(e,i)=>t(i/4)).attr("stroke","black").attr("stroke-width","2"),r}function c1(r){const t=xd().range(r.domain()),e=r.copy().domain([0,1]),i=Qb();i.attr("class","radius-list");const o=qb(i);return ex(o).attr("fill",(a,s)=>e(s/4)),t.range(),i.node()}function f1(r){i4(r);const t=["Yearly","Monthly","Weekly","Daily","Real-time"],e=["Y","M","W","D","RT"],i=[365,30,7,1,0],o=Qb(),a=qb(o);return a.attr("class","tippy").attr("data-tippy-content",(s,n)=>t[n]),ex(a).attr("fill",(s,n)=>r(i[n])),a.append("text").attr("text-anchor","middle").attr("y",40).attr("fill","black").text((s,n)=>e[n]),o.node()}function a4(r){let t,e=c1(r[1]).outerHTML+"",i;return{c(){t=new Hv(!1),i=ea(),t.a=i},m(o,a){t.m(e,o,a),Er(o,i,a)},p(o,a){a&2&&e!==(e=c1(o[1]).outerHTML+"")&&t.p(e)},i:qi,o:qi,d(o){o&&Sr(i),o&&t.d()}}}function o4(r){let t,e;return t=new ud({props:{$$slots:{default:[l4]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&6&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function s4(r){let t;return{c(){t=oi("Yearly, Monthly, Weekly, Daily, Real-Time")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function l4(r){let t,e=f1(r[1]).outerHTML+"",i,o,a;return o=new tm({props:{hideDelay:0,yPos:"above",xPos:"start",id:"tooltip-legend",$$slots:{default:[s4]},$$scope:{ctx:r}}}),{c(){t=new Hv(!1),i=Rn(),un(o.$$.fragment),t.a=i},m(s,n){t.m(e,s,n),Er(s,i,n),on(o,s,n),a=!0},p(s,n){(!a||n&2)&&e!==(e=f1(s[1]).outerHTML+"")&&t.p(e);const l={};n&4&&(l.$$scope={dirty:n,ctx:s}),o.$set(l)},i(s){a||(Kt(o.$$.fragment,s),a=!0)},o(s){lr(o.$$.fragment,s),a=!1},d(s){s&&t.d(),s&&Sr(i),sn(o,s)}}}function u4(r){let t,e,i,o=u1(r[1]).outerHTML+"",a,s,n,l,u;const h=[o4,a4],v=[];function d(p,_){return p[0]==="datainfo"?0:1}return s=d(r),n=v[s]=h[s](r),{c(){t=_n("div"),e=_n("div"),i=new Hv(!1),a=Rn(),n.c(),i.a=a,nn(t,"id","legend"),nn(t,"class",l="legend-"+r[0]+" svelte-1tdo9ec")},m(p,_){Er(p,t,_),En(t,e),i.m(o,e),En(e,a),v[s].m(e,null),u=!0},p(p,[_]){(!u||_&2)&&o!==(o=u1(p[1]).outerHTML+"")&&i.p(o);let b=s;s=d(p),s===b?v[s].p(p,_):(Ri(),lr(v[b],1,1,()=>{v[b]=null}),Fi(),n=v[s],n?n.p(p,_):(n=v[s]=h[s](p),n.c()),Kt(n,1),n.m(e,null)),(!u||_&1&&l!==(l="legend-"+p[0]+" svelte-1tdo9ec"))&&nn(t,"class",l)},i(p){u||(Kt(n),u=!0)},o(p){lr(n),u=!1},d(p){p&&Sr(t),v[s].d()}}}function c4(r,t,e){let i;Ei(r,mh,a=>e(0,i=a));let o;return r.$$.update=()=>{r.$$.dirty&1&&e(1,o=g0[i])},[i,o]}class f4 extends ki{constructor(t){super(),Mi(this,t,c4,u4,_i,{})}}function h1(r,t,e){const i=r.slice();return i[15]=t[e][0],i[16]=t[e][1],i}function d1(r){let t,e,i,o,a,s,n,l,u,h,v,d,p,_,b,x,E;e=new ud({props:{$$slots:{default:[m4]},$$scope:{ctx:r}}}),o=new f4({}),h=new ud({props:{$$slots:{default:[_4]},$$scope:{ctx:r}}}),p=new ud({props:{$$slots:{default:[T4]},$$scope:{ctx:r}}});let A={anchorCorner:"BOTTOM_RIGHT",$$slots:{default:[C4]},$$scope:{ctx:r}};return b=new y0({props:A}),r[9](b),{c(){t=_n("div"),un(e.$$.fragment),i=Rn(),un(o.$$.fragment),a=Rn(),s=_n("div"),n=_n("div"),l=Rn(),u=_n("div"),un(h.$$.fragment),v=Rn(),d=_n("div"),un(p.$$.fragment),_=Rn(),un(b.$$.fragment),nn(n,"id","sites-status"),nn(n,"class","svelte-1e5s1fx"),nn(u,"class","site-action-icon svelte-1e5s1fx"),nn(d,"class","site-action-icon svelte-1e5s1fx"),nn(s,"id","site-actions"),nn(s,"class","svelte-1e5s1fx"),nn(t,"id","data-selector"),nn(t,"class","elevation svelte-1e5s1fx")},m(P,D){Er(P,t,D),on(e,t,null),En(t,i),on(o,t,null),En(t,a),En(t,s),En(s,n),n.innerHTML=r[1],En(s,l),En(s,u),on(h,u,null),En(s,v),En(s,d),on(p,d,null),En(t,_),on(b,t,null),E=!0},p(P,D){const R={};D&524292&&(R.$$scope={dirty:D,ctx:P}),e.$set(R),(!E||D&2)&&(n.innerHTML=P[1]);const S={};D&524289&&(S.$$scope={dirty:D,ctx:P}),h.$set(S);const I={};D&524288&&(I.$$scope={dirty:D,ctx:P}),p.$set(I);const T={};D&524288&&(T.$$scope={dirty:D,ctx:P}),b.$set(T)},i(P){E||(Kt(e.$$.fragment,P),Kt(o.$$.fragment,P),Kt(h.$$.fragment,P),Kt(p.$$.fragment,P),Kt(b.$$.fragment,P),ic(()=>{x||(x=lu(t,xh,{x:-200,duration:400},!0)),x.run(1)}),E=!0)},o(P){lr(e.$$.fragment,P),lr(o.$$.fragment,P),lr(h.$$.fragment,P),lr(p.$$.fragment,P),lr(b.$$.fragment,P),x||(x=lu(t,xh,{x:-200,duration:400},!1)),x.run(0),E=!1},d(P){P&&Sr(t),sn(e),sn(o),sn(h),sn(p),r[9](null),sn(b),P&&x&&x.end()}}}function h4(r){let t=$C(r[15])+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p:qi,d(i){i&&Sr(e)}}}function d4(r){let t,e;return t=new md({}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function p1(r){let t,e,i,o;t=new t4({props:{value:r[15],$$slots:{default:[h4]},$$scope:{ctx:r}}});let a=(r[15]==="datainfo"||r[15]==="wet"||r[15]==="bodPercent"||r[15]==="invertMichigan"||r[15]==="ph")&&d4();return{c(){un(t.$$.fragment),e=Rn(),a&&a.c(),i=ea()},m(s,n){on(t,s,n),Er(s,e,n),a&&a.m(s,n),Er(s,i,n),o=!0},p(s,n){const l={};n&524288&&(l.$$scope={dirty:n,ctx:s}),t.$set(l)},i(s){o||(Kt(t.$$.fragment,s),Kt(a),o=!0)},o(s){lr(t.$$.fragment,s),lr(a),o=!1},d(s){sn(t,s),s&&Sr(e),a&&a.d(s),s&&Sr(i)}}}function p4(r){let t,e,i=Object.entries(Ul),o=[];for(let s=0;s<i.length;s+=1)o[s]=p1(h1(r,i,s));const a=s=>lr(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ea()},m(s,n){for(let l=0;l<o.length;l+=1)o[l].m(s,n);Er(s,t,n),e=!0},p(s,n){if(n&0){i=Object.entries(Ul);let l;for(l=0;l<i.length;l+=1){const u=h1(s,i,l);o[l]?(o[l].p(u,n),Kt(o[l],1)):(o[l]=p1(u),o[l].c(),Kt(o[l],1),o[l].m(t.parentNode,t))}for(Ri(),l=i.length;l<o.length;l+=1)a(l);Fi()}},i(s){if(!e){for(let n=0;n<i.length;n+=1)Kt(o[n]);e=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)lr(o[n]);e=!1},d(s){Bf(o,s),s&&Sr(t)}}}function m4(r){let t,e,i,o;function a(n){r[7](n)}let s={label:"Variable",style:"width:300px",$$slots:{default:[p4]},$$scope:{ctx:r}};return r[2]!==void 0&&(s.value=r[2]),e=new $M({props:s}),ci.push(()=>Ah(e,"value",a)),{c(){t=_n("div"),un(e.$$.fragment),nn(t,"id","data-variable-selector"),nn(t,"class","svelte-1e5s1fx")},m(n,l){Er(n,t,l),on(e,t,null),o=!0},p(n,l){const u={};l&524288&&(u.$$scope={dirty:l,ctx:n}),!i&&l&4&&(i=!0,u.value=n[2],Th(()=>i=!1)),e.$set(u)},i(n){o||(Kt(e.$$.fragment,n),o=!0)},o(n){lr(e.$$.fragment,n),o=!1},d(n){n&&Sr(t),sn(e)}}}function v4(r){let t;return{c(){t=oi("insights")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function g4(r){let t,e;return t=new _0({props:{class:"material-icons",$$slots:{default:[v4]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&524288&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function y4(r){let t;return{c(){t=oi("Add selected sites to the Timeseries View")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function _4(r){let t,e,i,o;return t=new b0({props:{color:"secondary",mini:!0,$$slots:{default:[g4]},$$scope:{ctx:r}}}),t.$on("click",r[8]),i=new tm({props:{showDelay:600,hideDelay:0,id:"tooltip-addtimeseries",$$slots:{default:[y4]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment)},m(a,s){on(t,a,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&524288&&(n.$$scope={dirty:s,ctx:a}),t.$set(n);const l={};s&524288&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){o||(Kt(t.$$.fragment,a),Kt(i.$$.fragment,a),o=!0)},o(a){lr(t.$$.fragment,a),lr(i.$$.fragment,a),o=!1},d(a){sn(t,a),a&&Sr(e),sn(i,a)}}}function b4(r){let t;return{c(){t=oi("clear")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function x4(r){let t,e;return t=new _0({props:{class:"material-icons",$$slots:{default:[b4]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&524288&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function w4(r){let t;return{c(){t=oi("Unselect all sites")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function T4(r){let t,e,i,o;return t=new b0({props:{color:"secondary",mini:!0,$$slots:{default:[x4]},$$scope:{ctx:r}}}),t.$on("click",Pw),i=new tm({props:{hideDelay:0,id:"tooltip-unselect",$$slots:{default:[w4]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment)},m(a,s){on(t,a,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&524288&&(n.$$scope={dirty:s,ctx:a}),t.$set(n);const l={};s&524288&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){o||(Kt(t.$$.fragment,a),Kt(i.$$.fragment,a),o=!0)},o(a){lr(t.$$.fragment,a),lr(i.$$.fragment,a),o=!1},d(a){sn(t,a),a&&Sr(e),sn(i,a)}}}function A4(r){let t,e;return{c(){t=_n("i"),t.textContent="arrow_circle_left",e=oi(`
          Left Timeseries`),nn(t,"class","text-icon material-icons"),nn(t,"aria-hidden","true"),Do(t,"margin-right","0.5rem")},m(i,o){Er(i,t,o),Er(i,e,o)},p:qi,d(i){i&&Sr(t),i&&Sr(e)}}}function S4(r){let t,e;return{c(){t=_n("i"),t.textContent="arrow_circle_right",e=oi(`
          Right Timeseries`),nn(t,"class","text-icon material-icons"),nn(t,"aria-hidden","true"),Do(t,"margin-right","0.5rem")},m(i,o){Er(i,t,o),Er(i,e,o)},p:qi,d(i){i&&Sr(t),i&&Sr(e)}}}function E4(r){let t,e,i,o,a,s,n,l;return t=new md({}),i=new Rf({props:{$$slots:{default:[A4]},$$scope:{ctx:r}}}),i.$on("SMUI:action",r[4]),a=new md({}),n=new Rf({props:{$$slots:{default:[S4]},$$scope:{ctx:r}}}),n.$on("SMUI:action",r[5]),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment),o=Rn(),un(a.$$.fragment),s=Rn(),un(n.$$.fragment)},m(u,h){on(t,u,h),Er(u,e,h),on(i,u,h),Er(u,o,h),on(a,u,h),Er(u,s,h),on(n,u,h),l=!0},p(u,h){const v={};h&524288&&(v.$$scope={dirty:h,ctx:u}),i.$set(v);const d={};h&524288&&(d.$$scope={dirty:h,ctx:u}),n.$set(d)},i(u){l||(Kt(t.$$.fragment,u),Kt(i.$$.fragment,u),Kt(a.$$.fragment,u),Kt(n.$$.fragment,u),l=!0)},o(u){lr(t.$$.fragment,u),lr(i.$$.fragment,u),lr(a.$$.fragment,u),lr(n.$$.fragment,u),l=!1},d(u){sn(t,u),u&&Sr(e),sn(i,u),u&&Sr(o),sn(a,u),u&&Sr(s),sn(n,u)}}}function C4(r){let t,e,i,o;return i=new qp({props:{dense:!0,$$slots:{default:[E4]},$$scope:{ctx:r}}}),{c(){t=_n("p"),t.textContent="Graph Selected To",e=Rn(),un(i.$$.fragment),nn(t,"class","menulist-title")},m(a,s){Er(a,t,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&524288&&(n.$$scope={dirty:s,ctx:a}),i.$set(n)},i(a){o||(Kt(i.$$.fragment,a),o=!0)},o(a){lr(i.$$.fragment,a),o=!1},d(a){a&&Sr(t),a&&Sr(e),sn(i,a)}}}function D4(r){let t,e,i=r[3]&&d1(r);return{c(){i&&i.c(),t=ea()},m(o,a){i&&i.m(o,a),Er(o,t,a),e=!0},p(o,[a]){o[3]?i?(i.p(o,a),a&8&&Kt(i,1)):(i=d1(o),i.c(),Kt(i,1),i.m(t.parentNode,t)):i&&(Ri(),lr(i,1,1,()=>{i=null}),Fi())},i(o){e||(Kt(i),e=!0)},o(o){lr(i),e=!1},d(o){i&&i.d(o),o&&Sr(t)}}}function M4(r,t,e){let i,o,a,s,n,l,u,h;Ei(r,mh,A=>e(2,i=A)),Ei(r,_p,A=>e(10,o=A)),Ei(r,Ff,A=>e(6,a=A)),Ei(r,fv,A=>e(11,s=A)),Ei(r,zc,A=>e(12,n=A)),Ei(r,yp,A=>e(13,l=A)),Ei(r,cv,A=>e(14,u=A)),Ei(r,Df,A=>e(3,h=A));let v,d;const p=()=>{Va(zc,n=!0,n),Va(cv,u=new Set(a),u),Va(yp,l=i,l)},_=()=>{Va(zc,n=!0,n),Va(fv,s=new Set(a),s),Va(_p,o=i,o)};function b(A){i=A,mh.set(i)}const x=()=>v.setOpen(!0);function E(A){ci[A?"unshift":"push"](()=>{v=A,e(0,v)})}return r.$$.update=()=>{r.$$.dirty&64&&(a.size===1?e(1,d="1 site selected"):a.size>1?e(1,d=`${a.size} sites selected`):e(1,d="<i>Use map to select sites</i>"))},[v,d,i,h,p,_,a,b,x,E]}class k4 extends ki{constructor(t){super(),Mi(this,t,M4,D4,_i,{})}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var zl={CLOSED_CLASS:"mdc-linear-progress--closed",CLOSED_ANIMATION_OFF_CLASS:"mdc-linear-progress--closed-animation-off",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed",ANIMATION_READY_CLASS:"mdc-linear-progress--animation-ready"},Eu={ARIA_HIDDEN:"aria-hidden",ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUENOW:"aria-valuenow",BUFFER_BAR_SELECTOR:".mdc-linear-progress__buffer-bar",FLEX_BASIS:"flex-basis",PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar"},Jh={PRIMARY_HALF:.8367142,PRIMARY_FULL:2.00611057,SECONDARY_QUARTER:.37651913,SECONDARY_HALF:.84386165,SECONDARY_FULL:1.60277782};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var I4=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.observer=null,i}return Object.defineProperty(t,"cssClasses",{get:function(){return zl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Eu},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},attachResizeObserver:function(){return null},forceLayout:function(){},getWidth:function(){return 0},hasClass:function(){return!1},setBufferBarStyle:function(){return null},setPrimaryBarStyle:function(){return null},setStyle:function(){},removeAttribute:function(){},removeClass:function(){},setAttribute:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this;this.determinate=!this.adapter.hasClass(zl.INDETERMINATE_CLASS),this.adapter.addClass(zl.ANIMATION_READY_CLASS),this.progress=0,this.buffer=1,this.observer=this.adapter.attachResizeObserver(function(i){var o,a;if(!e.determinate)try{for(var s=ml(i),n=s.next();!n.done;n=s.next()){var l=n.value;l.contentRect&&e.calculateAndSetDimensions(l.contentRect.width)}}catch(u){o={error:u}}finally{try{n&&!n.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}}),!this.determinate&&this.observer&&this.calculateAndSetDimensions(this.adapter.getWidth())},t.prototype.setDeterminate=function(e){if(this.determinate=e,this.determinate){this.adapter.removeClass(zl.INDETERMINATE_CLASS),this.adapter.setAttribute(Eu.ARIA_VALUENOW,this.progress.toString()),this.adapter.setAttribute(Eu.ARIA_VALUEMAX,"1"),this.adapter.setAttribute(Eu.ARIA_VALUEMIN,"0"),this.setPrimaryBarProgress(this.progress),this.setBufferBarProgress(this.buffer);return}this.observer&&this.calculateAndSetDimensions(this.adapter.getWidth()),this.adapter.addClass(zl.INDETERMINATE_CLASS),this.adapter.removeAttribute(Eu.ARIA_VALUENOW),this.adapter.removeAttribute(Eu.ARIA_VALUEMAX),this.adapter.removeAttribute(Eu.ARIA_VALUEMIN),this.setPrimaryBarProgress(1),this.setBufferBarProgress(1)},t.prototype.isDeterminate=function(){return this.determinate},t.prototype.setProgress=function(e){this.progress=e,this.determinate&&(this.setPrimaryBarProgress(e),this.adapter.setAttribute(Eu.ARIA_VALUENOW,e.toString()))},t.prototype.getProgress=function(){return this.progress},t.prototype.setBuffer=function(e){this.buffer=e,this.determinate&&this.setBufferBarProgress(e)},t.prototype.getBuffer=function(){return this.buffer},t.prototype.open=function(){this.adapter.removeClass(zl.CLOSED_CLASS),this.adapter.removeClass(zl.CLOSED_ANIMATION_OFF_CLASS),this.adapter.removeAttribute(Eu.ARIA_HIDDEN)},t.prototype.close=function(){this.adapter.addClass(zl.CLOSED_CLASS),this.adapter.setAttribute(Eu.ARIA_HIDDEN,"true")},t.prototype.isClosed=function(){return this.adapter.hasClass(zl.CLOSED_CLASS)},t.prototype.handleTransitionEnd=function(){this.adapter.hasClass(zl.CLOSED_CLASS)&&this.adapter.addClass(zl.CLOSED_ANIMATION_OFF_CLASS)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.observer&&this.observer.disconnect()},t.prototype.restartAnimation=function(){this.adapter.removeClass(zl.ANIMATION_READY_CLASS),this.adapter.forceLayout(),this.adapter.addClass(zl.ANIMATION_READY_CLASS)},t.prototype.setPrimaryBarProgress=function(e){var i="scaleX("+e+")",o=typeof window<"u"?Fv(window,"transform"):"transform";this.adapter.setPrimaryBarStyle(o,i)},t.prototype.setBufferBarProgress=function(e){var i=e*100+"%";this.adapter.setBufferBarStyle(Eu.FLEX_BASIS,i)},t.prototype.calculateAndSetDimensions=function(e){var i=e*Jh.PRIMARY_HALF,o=e*Jh.PRIMARY_FULL,a=e*Jh.SECONDARY_QUARTER,s=e*Jh.SECONDARY_HALF,n=e*Jh.SECONDARY_FULL;this.adapter.setStyle("--mdc-linear-progress-primary-half",i+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-half-neg",-i+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-full",o+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-full-neg",-o+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-quarter",a+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-quarter-neg",-a+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-half",s+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-half-neg",-s+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-full",n+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-full-neg",-n+"px"),this.restartAnimation()},t}(ws);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var No={CELL:"mdc-data-table__cell",CELL_NUMERIC:"mdc-data-table__cell--numeric",CONTENT:"mdc-data-table__content",HEADER_CELL:"mdc-data-table__header-cell",HEADER_CELL_LABEL:"mdc-data-table__header-cell-label",HEADER_CELL_SORTED:"mdc-data-table__header-cell--sorted",HEADER_CELL_SORTED_DESCENDING:"mdc-data-table__header-cell--sorted-descending",HEADER_CELL_WITH_SORT:"mdc-data-table__header-cell--with-sort",HEADER_CELL_WRAPPER:"mdc-data-table__header-cell-wrapper",HEADER_ROW:"mdc-data-table__header-row",HEADER_ROW_CHECKBOX:"mdc-data-table__header-row-checkbox",IN_PROGRESS:"mdc-data-table--in-progress",LINEAR_PROGRESS:"mdc-data-table__linear-progress",PAGINATION_ROWS_PER_PAGE_LABEL:"mdc-data-table__pagination-rows-per-page-label",PAGINATION_ROWS_PER_PAGE_SELECT:"mdc-data-table__pagination-rows-per-page-select",PROGRESS_INDICATOR:"mdc-data-table__progress-indicator",ROOT:"mdc-data-table",ROW:"mdc-data-table__row",ROW_CHECKBOX:"mdc-data-table__row-checkbox",ROW_SELECTED:"mdc-data-table__row--selected",SORT_ICON_BUTTON:"mdc-data-table__sort-icon-button",SORT_STATUS_LABEL:"mdc-data-table__sort-status-label",TABLE_CONTAINER:"mdc-data-table__table-container"},m1={ARIA_SELECTED:"aria-selected",ARIA_SORT:"aria-sort"},L4={COLUMN_ID:"data-column-id",ROW_ID:"data-row-id"},tp={CONTENT:"."+No.CONTENT,HEADER_CELL:"."+No.HEADER_CELL,HEADER_CELL_WITH_SORT:"."+No.HEADER_CELL_WITH_SORT,HEADER_ROW:"."+No.HEADER_ROW,HEADER_ROW_CHECKBOX:"."+No.HEADER_ROW_CHECKBOX,PROGRESS_INDICATOR:"."+No.PROGRESS_INDICATOR,ROW:"."+No.ROW,ROW_CHECKBOX:"."+No.ROW_CHECKBOX,ROW_SELECTED:"."+No.ROW_SELECTED,SORT_ICON_BUTTON:"."+No.SORT_ICON_BUTTON,SORT_STATUS_LABEL:"."+No.SORT_STATUS_LABEL},Ef={ARIA_SELECTED:m1.ARIA_SELECTED,ARIA_SORT:m1.ARIA_SORT,DATA_ROW_ID_ATTR:L4.ROW_ID,HEADER_ROW_CHECKBOX_SELECTOR:tp.HEADER_ROW_CHECKBOX,ROW_CHECKBOX_SELECTOR:tp.ROW_CHECKBOX,ROW_SELECTED_SELECTOR:tp.ROW_SELECTED,ROW_SELECTOR:tp.ROW},Bl;(function(r){r.ASCENDING="ascending",r.DESCENDING="descending",r.NONE="none",r.OTHER="other"})(Bl||(Bl={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var P4=function(r){xo(t,r);function t(e){return r.call(this,aa(aa({},t.defaultAdapter),e))||this}return Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},addClassAtRowIndex:function(){},getAttributeByHeaderCellIndex:function(){return""},getHeaderCellCount:function(){return 0},getHeaderCellElements:function(){return[]},getRowCount:function(){return 0},getRowElements:function(){return[]},getRowIdAtIndex:function(){return""},getRowIndexByChildElement:function(){return 0},getSelectedRowCount:function(){return 0},getTableContainerHeight:function(){return 0},getTableHeaderHeight:function(){return 0},isCheckboxAtRowIndexChecked:function(){return!1},isHeaderRowCheckboxChecked:function(){return!1},isRowsSelectable:function(){return!1},notifyRowSelectionChanged:function(){},notifySelectedAll:function(){},notifySortAction:function(){},notifyUnselectedAll:function(){},notifyRowClick:function(){},registerHeaderRowCheckbox:function(){},registerRowCheckboxes:function(){},removeClass:function(){},removeClassAtRowIndex:function(){},removeClassNameByHeaderCellIndex:function(){},setAttributeAtRowIndex:function(){},setAttributeByHeaderCellIndex:function(){},setClassNameByHeaderCellIndex:function(){},setHeaderRowCheckboxChecked:function(){},setHeaderRowCheckboxIndeterminate:function(){},setProgressIndicatorStyles:function(){},setRowCheckboxCheckedAtIndex:function(){},setSortStatusLabelByHeaderCellIndex:function(){}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){this.adapter.isRowsSelectable()&&(this.adapter.registerHeaderRowCheckbox(),this.adapter.registerRowCheckboxes(),this.setHeaderRowCheckboxState())},t.prototype.layoutAsync=function(){return g5(this,void 0,void 0,function(){return y5(this,function(e){switch(e.label){case 0:return this.adapter.isRowsSelectable()?[4,this.adapter.registerHeaderRowCheckbox()]:[3,3];case 1:return e.sent(),[4,this.adapter.registerRowCheckboxes()];case 2:e.sent(),this.setHeaderRowCheckboxState(),e.label=3;case 3:return[2]}})})},t.prototype.getRows=function(){return this.adapter.getRowElements()},t.prototype.getHeaderCells=function(){return this.adapter.getHeaderCellElements()},t.prototype.setSelectedRowIds=function(e){for(var i=0;i<this.adapter.getRowCount();i++){var o=this.adapter.getRowIdAtIndex(i),a=!1;o&&e.indexOf(o)>=0&&(a=!0),this.adapter.setRowCheckboxCheckedAtIndex(i,a),this.selectRowAtIndex(i,a)}this.setHeaderRowCheckboxState()},t.prototype.getRowIds=function(){for(var e=[],i=0;i<this.adapter.getRowCount();i++)e.push(this.adapter.getRowIdAtIndex(i));return e},t.prototype.getSelectedRowIds=function(){for(var e=[],i=0;i<this.adapter.getRowCount();i++)this.adapter.isCheckboxAtRowIndexChecked(i)&&e.push(this.adapter.getRowIdAtIndex(i));return e},t.prototype.handleHeaderRowCheckboxChange=function(){for(var e=this.adapter.isHeaderRowCheckboxChecked(),i=0;i<this.adapter.getRowCount();i++)this.adapter.setRowCheckboxCheckedAtIndex(i,e),this.selectRowAtIndex(i,e);e?this.adapter.notifySelectedAll():this.adapter.notifyUnselectedAll()},t.prototype.handleRowCheckboxChange=function(e){var i=this.adapter.getRowIndexByChildElement(e.target);if(i!==-1){var o=this.adapter.isCheckboxAtRowIndexChecked(i);this.selectRowAtIndex(i,o),this.setHeaderRowCheckboxState();var a=this.adapter.getRowIdAtIndex(i);this.adapter.notifyRowSelectionChanged({rowId:a,rowIndex:i,selected:o})}},t.prototype.handleSortAction=function(e){for(var i=e.columnId,o=e.columnIndex,a=e.headerCell,s=0;s<this.adapter.getHeaderCellCount();s++)s!==o&&(this.adapter.removeClassNameByHeaderCellIndex(s,No.HEADER_CELL_SORTED),this.adapter.removeClassNameByHeaderCellIndex(s,No.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(s,Ef.ARIA_SORT,Bl.NONE),this.adapter.setSortStatusLabelByHeaderCellIndex(s,Bl.NONE));this.adapter.setClassNameByHeaderCellIndex(o,No.HEADER_CELL_SORTED);var n=this.adapter.getAttributeByHeaderCellIndex(o,Ef.ARIA_SORT),l=Bl.NONE;n===Bl.ASCENDING?(this.adapter.setClassNameByHeaderCellIndex(o,No.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(o,Ef.ARIA_SORT,Bl.DESCENDING),l=Bl.DESCENDING):n===Bl.DESCENDING?(this.adapter.removeClassNameByHeaderCellIndex(o,No.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(o,Ef.ARIA_SORT,Bl.ASCENDING),l=Bl.ASCENDING):(this.adapter.setAttributeByHeaderCellIndex(o,Ef.ARIA_SORT,Bl.ASCENDING),l=Bl.ASCENDING),this.adapter.setSortStatusLabelByHeaderCellIndex(o,l),this.adapter.notifySortAction({columnId:i,columnIndex:o,headerCell:a,sortValue:l})},t.prototype.handleRowClick=function(e){var i=e.rowId,o=e.row;this.adapter.notifyRowClick({rowId:i,row:o})},t.prototype.showProgress=function(){var e=this.adapter.getTableHeaderHeight(),i=this.adapter.getTableContainerHeight()-e,o=e;this.adapter.setProgressIndicatorStyles({height:i+"px",top:o+"px"}),this.adapter.addClass(No.IN_PROGRESS)},t.prototype.hideProgress=function(){this.adapter.removeClass(No.IN_PROGRESS)},t.prototype.setHeaderRowCheckboxState=function(){this.adapter.getSelectedRowCount()===0?(this.adapter.setHeaderRowCheckboxChecked(!1),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):this.adapter.getSelectedRowCount()===this.adapter.getRowCount()?(this.adapter.setHeaderRowCheckboxChecked(!0),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):(this.adapter.setHeaderRowCheckboxIndeterminate(!0),this.adapter.setHeaderRowCheckboxChecked(!1))},t.prototype.selectRowAtIndex=function(e,i){i?(this.adapter.addClassAtRowIndex(e,No.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(e,Ef.ARIA_SELECTED,"true")):(this.adapter.removeClassAtRowIndex(e,No.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(e,Ef.ARIA_SELECTED,"false"))},t}(ws);const R4=r=>({}),v1=r=>({}),F4=r=>({}),g1=r=>({});function y1(r){let t,e,i,o,a;const s=r[33].progress,n=Ni(s,r,r[32],g1);return{c(){t=_n("div"),e=_n("div"),i=Rn(),n&&n.c(),nn(e,"class","mdc-data-table__scrim"),nn(t,"class","mdc-data-table__progress-indicator"),nn(t,"style",o=Object.entries(r[13]).map(_1).join(" "))},m(l,u){Er(l,t,u),En(t,e),En(t,i),n&&n.m(t,null),a=!0},p(l,u){n&&n.p&&(!a||u[1]&2)&&Hi(n,s,l,l[32],a?Ui(s,l[32],u,F4):Vi(l[32]),g1),(!a||u[0]&8192&&o!==(o=Object.entries(l[13]).map(_1).join(" ")))&&nn(t,"style",o)},i(l){a||(Kt(n,l),a=!0)},o(l){lr(n,l),a=!1},d(l){l&&Sr(t),n&&n.d(l)}}}function O4(r){let t,e,i,o,a,s,n,l,u,h,v,d,p,_;const b=r[33].default,x=Ni(b,r,r[32],null);let E=[{class:o=Pn({[r[6]]:!0,"mdc-data-table__table":!0})},xi(r[22],"table$")],A={};for(let z=0;z<E.length;z+=1)A=cn(A,E[z]);let P=[{class:s=Pn({[r[4]]:!0,"mdc-data-table__table-container":!0})},xi(r[22],"container$")],D={};for(let z=0;z<P.length;z+=1)D=cn(D,P[z]);let R=r[21].progress&&y1(r);const S=r[33].paginate,I=Ni(S,r,r[32],v1);let T=[{class:h=Pn({[r[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":r[2],...r[12]})},Os(r[22],["container$","table$"])],M={};for(let z=0;z<T.length;z+=1)M=cn(M,T[z]);return{c(){t=_n("div"),e=_n("div"),i=_n("table"),x&&x.c(),l=Rn(),R&&R.c(),u=Rn(),I&&I.c(),Xn(i,A),Xn(e,D),Xn(t,M)},m(z,U){Er(z,t,U),En(t,e),En(e,i),x&&x.m(i,null),r[34](e),En(t,l),R&&R.m(t,null),En(t,u),I&&I.m(t,null),r[35](t),d=!0,p||(_=[ri(a=ma.call(null,i,r[5])),ri(n=ma.call(null,e,r[3])),ri(v=ma.call(null,t,r[0])),ri(r[15].call(null,t)),si(t,"SMUICheckbox:mount",r[36]),si(t,"SMUIDataTableHeader:mount",r[37]),si(t,"SMUIDataTableHeader:unmount",r[38]),si(t,"SMUIDataTableBody:mount",r[39]),si(t,"SMUIDataTableBody:unmount",r[40]),si(t,"SMUIDataTableHeaderCheckbox:change",r[41]),si(t,"SMUIDataTableHeader:click",r[19]),si(t,"SMUIDataTableRow:click",r[20]),si(t,"SMUIDataTableBodyCheckbox:change",r[42])],p=!0)},p(z,U){x&&x.p&&(!d||U[1]&2)&&Hi(x,b,z,z[32],d?Ui(b,z[32],U,null):Vi(z[32]),null),Xn(i,A=li(E,[(!d||U[0]&64&&o!==(o=Pn({[z[6]]:!0,"mdc-data-table__table":!0})))&&{class:o},U[0]&4194304&&xi(z[22],"table$")])),a&&Ci(a.update)&&U[0]&32&&a.update.call(null,z[5]),Xn(e,D=li(P,[(!d||U[0]&16&&s!==(s=Pn({[z[4]]:!0,"mdc-data-table__table-container":!0})))&&{class:s},U[0]&4194304&&xi(z[22],"container$")])),n&&Ci(n.update)&&U[0]&8&&n.update.call(null,z[3]),z[21].progress?R?(R.p(z,U),U[0]&2097152&&Kt(R,1)):(R=y1(z),R.c(),Kt(R,1),R.m(t,u)):R&&(Ri(),lr(R,1,1,()=>{R=null}),Fi()),I&&I.p&&(!d||U[1]&2)&&Hi(I,S,z,z[32],d?Ui(S,z[32],U,R4):Vi(z[32]),v1),Xn(t,M=li(T,[(!d||U[0]&4102&&h!==(h=Pn({[z[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":z[2],...z[12]})))&&{class:h},U[0]&4194304&&Os(z[22],["container$","table$"])])),v&&Ci(v.update)&&U[0]&1&&v.update.call(null,z[0])},i(z){d||(Kt(x,z),Kt(R),Kt(I,z),d=!0)},o(z){lr(x,z),lr(R),lr(I,z),d=!1},d(z){z&&Sr(t),x&&x.d(z),r[34](null),R&&R.d(),I&&I.d(z),r[35](null),p=!1,Ma(_)}}}const _1=([r,t])=>`${r}: ${t};`;function z4(r,t,e){const i=["use","class","stickyHeader","sortable","sort","sortDirection","sortAscendingAriaLabel","sortDescendingAriaLabel","container$use","container$class","table$use","table$class","layout","getElement"];let o=ei(t,i),a,s,n,{$$slots:l={},$$scope:u}=t;const h=l_(l),{closest:v}=Ch,d=wa(oa());let{use:p=[]}=t,{class:_=""}=t,{stickyHeader:b=!1}=t,{sortable:x=!1}=t,{sort:E=null}=t,{sortDirection:A="ascending"}=t,{sortAscendingAriaLabel:P="sorted, ascending"}=t,{sortDescendingAriaLabel:D="sorted, descending"}=t,{container$use:R=[]}=t,{container$class:S=""}=t,{table$use:I=[]}=t,{table$class:T=""}=t,M,z,U,F,V,j={},H={height:"auto",top:"initial"},Y=Ki("SMUI:addLayoutListener"),J,ne=!1,q=_o(!1);Ei(r,q,he=>e(31,a=he));let we=_o(E);Ei(r,we,he=>e(45,n=he));let ee=_o(A);Ei(r,ee,he=>e(44,s=he)),wi("SMUI:checkbox:context","data-table"),wi("SMUI:linear-progress:context","data-table"),wi("SMUI:linear-progress:closed",q),wi("SMUI:data-table:sortable",x),wi("SMUI:data-table:sort",we),wi("SMUI:data-table:sortDirection",ee),wi("SMUI:data-table:sortAscendingAriaLabel",P),wi("SMUI:data-table:sortDescendingAriaLabel",D),Y&&(J=Y(Ee));let X;bo(()=>(e(7,z=new P4({addClass:re,removeClass:de,getHeaderCellElements:()=>{var he;return(he=F==null?void 0:F.cells.map(ye=>ye.element))!==null&&he!==void 0?he:[]},getHeaderCellCount:()=>{var he;return(he=F==null?void 0:F.cells.length)!==null&&he!==void 0?he:0},getAttributeByHeaderCellIndex:(he,ye)=>{var _e;return(_e=F==null?void 0:F.orderedCells[he].getAttr(ye))!==null&&_e!==void 0?_e:null},setAttributeByHeaderCellIndex:(he,ye,_e)=>{F==null||F.orderedCells[he].addAttr(ye,_e)},setClassNameByHeaderCellIndex:(he,ye)=>{F==null||F.orderedCells[he].addClass(ye)},removeClassNameByHeaderCellIndex:(he,ye)=>{F==null||F.orderedCells[he].removeClass(ye)},notifySortAction:he=>{e(23,E=he.columnId),e(24,A=he.sortValue),Di(ke(),"SMUIDataTable:sorted",he,void 0,!0)},getTableContainerHeight:()=>U.getBoundingClientRect().height,getTableHeaderHeight:()=>{const he=ke().querySelector(".mdc-data-table__header-row");if(!he)throw new Error("MDCDataTable: Table header element not found.");return he.getBoundingClientRect().height},setProgressIndicatorStyles:he=>{e(13,H=he)},addClassAtRowIndex:(he,ye)=>{V==null||V.orderedRows[he].addClass(ye)},getRowCount:()=>{var he;return(he=V==null?void 0:V.rows.length)!==null&&he!==void 0?he:0},getRowElements:()=>{var he;return(he=V==null?void 0:V.rows.map(ye=>ye.element))!==null&&he!==void 0?he:[]},getRowIdAtIndex:he=>{var ye;return(ye=V==null?void 0:V.orderedRows[he].rowId)!==null&&ye!==void 0?ye:null},getRowIndexByChildElement:he=>{var ye;return(ye=V==null?void 0:V.orderedRows.map(_e=>_e.element).indexOf(v(he,".mdc-data-table__row")))!==null&&ye!==void 0?ye:-1},getSelectedRowCount:()=>{var he;return(he=V==null?void 0:V.rows.filter(ye=>ye.selected).length)!==null&&he!==void 0?he:0},isCheckboxAtRowIndexChecked:he=>{const ye=V==null?void 0:V.orderedRows[he].checkbox;return ye?ye.checked:!1},isHeaderRowCheckboxChecked:()=>{const he=F==null?void 0:F.checkbox;return he?he.checked:!1},isRowsSelectable:()=>!!ke().querySelector(".mdc-data-table__row-checkbox")||!!ke().querySelector(".mdc-data-table__header-row-checkbox"),notifyRowSelectionChanged:he=>{const ye=V==null?void 0:V.orderedRows[he.rowIndex];ye&&Di(ke(),"SMUIDataTable:rowSelectionChanged",{row:ye.element,rowId:ye.rowId,rowIndex:he.rowIndex,selected:he.selected},void 0,!0)},notifySelectedAll:()=>{me(!1),Di(ke(),"SMUIDataTable:selectedAll",void 0,void 0,!0)},notifyUnselectedAll:()=>{me(!1),Di(ke(),"SMUIDataTable:unselectedAll",void 0,void 0,!0)},notifyRowClick:he=>{Di(ke(),"SMUIDataTable:rowClick",he,void 0,!0)},registerHeaderRowCheckbox:()=>{},registerRowCheckboxes:()=>{},removeClassAtRowIndex:(he,ye)=>{V==null||V.orderedRows[he].removeClass(ye)},setAttributeAtRowIndex:(he,ye,_e)=>{V==null||V.orderedRows[he].addAttr(ye,_e)},setHeaderRowCheckboxChecked:he=>{const ye=F==null?void 0:F.checkbox;ye&&(ye.checked=he)},setHeaderRowCheckboxIndeterminate:me,setRowCheckboxCheckedAtIndex:(he,ye)=>{const _e=V==null?void 0:V.orderedRows[he].checkbox;_e&&(_e.checked=ye)},setSortStatusLabelByHeaderCellIndex:(he,ye)=>{}})),z.init(),z.layout(),e(14,ne=!0),()=>{z.destroy()})),Vc(()=>{J&&J()});function re(he){j[he]||e(12,j[he]=!0,j)}function de(he){(!(he in j)||j[he])&&e(12,j[he]=!1,j)}function me(he){const ye=F==null?void 0:F.checkbox;ye&&(ye.indeterminate=he)}function xe(he){if(!z||!he.detail.target)return;const ye=v(he.detail.target,".mdc-data-table__header-cell--with-sort");ye&&Re(ye)}function He(he){if(!z||!he.detail.target)return;const ye=v(he.detail.target,".mdc-data-table__row");ye&&z&&z.handleRowClick({rowId:he.detail.rowId,row:ye})}function Re(he){var ye,_e;const je=(ye=F==null?void 0:F.orderedCells)!==null&&ye!==void 0?ye:[],Je=je.map(at=>at.element).indexOf(he);if(Je===-1)return;const nt=(_e=je[Je].columnId)!==null&&_e!==void 0?_e:null;z.handleSortAction({columnId:nt,columnIndex:Je,headerCell:he})}function Ee(){return z.layout()}function ke(){return M}function $(he){ci[he?"unshift":"push"](()=>{U=he,e(9,U)})}function le(he){ci[he?"unshift":"push"](()=>{M=he,e(8,M)})}const K=()=>z&&ne&&z.layout(),te=he=>e(10,F=he.detail),ie=()=>e(10,F=void 0),ce=he=>e(11,V=he.detail),ae=()=>e(11,V=void 0),ve=()=>z&&z.handleHeaderRowCheckboxChange(),pe=he=>z&&z.handleRowCheckboxChange(he);return r.$$set=he=>{t=cn(cn({},t),ga(he)),e(22,o=ei(t,i)),"use"in he&&e(0,p=he.use),"class"in he&&e(1,_=he.class),"stickyHeader"in he&&e(2,b=he.stickyHeader),"sortable"in he&&e(25,x=he.sortable),"sort"in he&&e(23,E=he.sort),"sortDirection"in he&&e(24,A=he.sortDirection),"sortAscendingAriaLabel"in he&&e(26,P=he.sortAscendingAriaLabel),"sortDescendingAriaLabel"in he&&e(27,D=he.sortDescendingAriaLabel),"container$use"in he&&e(3,R=he.container$use),"container$class"in he&&e(4,S=he.container$class),"table$use"in he&&e(5,I=he.table$use),"table$class"in he&&e(6,T=he.table$class),"$$scope"in he&&e(32,u=he.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&8388608&&Va(we,n=E,n),r.$$.dirty[0]&16777216&&Va(ee,s=A,s),r.$$.dirty[0]&1073741952|r.$$.dirty[1]&1&&h.progress&&z&&X!==a&&(e(30,X=a),a?z.hideProgress():z.showProgress())},[p,_,b,R,S,I,T,z,M,U,F,V,j,H,ne,d,q,we,ee,xe,He,h,o,E,A,x,P,D,Ee,ke,X,a,u,l,$,le,K,te,ie,ce,ae,ve,pe]}class B4 extends ki{constructor(t){super(),Mi(this,t,z4,O4,_i,{use:0,class:1,stickyHeader:2,sortable:25,sort:23,sortDirection:24,sortAscendingAriaLabel:26,sortDescendingAriaLabel:27,container$use:3,container$class:4,table$use:5,table$class:6,layout:28,getElement:29},null,[-1,-1])}get layout(){return this.$$.ctx[28]}get getElement(){return this.$$.ctx[29]}}function N4(r){let t,e,i,o,a;const s=r[9].default,n=Ni(s,r,r[8],null);let l=[r[6]],u={};for(let h=0;h<l.length;h+=1)u=cn(u,l[h]);return{c(){t=_n("thead"),n&&n.c(),Xn(t,u)},m(h,v){Er(h,t,v),n&&n.m(t,null),r[10](t),i=!0,o||(a=[ri(e=ma.call(null,t,r[0])),ri(r[3].call(null,t)),si(t,"SMUICheckbox:mount",r[11]),si(t,"SMUICheckbox:unmount",r[12]),si(t,"SMUIDataTableCell:mount",r[4]),si(t,"SMUIDataTableCell:unmount",r[5])],o=!0)},p(h,[v]){n&&n.p&&(!i||v&256)&&Hi(n,s,h,h[8],i?Ui(s,h[8],v,null):Vi(h[8]),null),Xn(t,u=li(l,[v&64&&h[6]])),e&&Ci(e.update)&&v&1&&e.update.call(null,h[0])},i(h){i||(Kt(n,h),i=!0)},o(h){lr(n,h),i=!1},d(h){h&&Sr(t),n&&n.d(h),r[10](null),o=!1,Ma(a)}}}function U4(r,t,e){const i=["use","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,u,h,v=[];const d=new WeakMap;wi("SMUI:data-table:row:header",!0),bo(()=>{const D={get cells(){return v},get orderedCells(){return b()},get checkbox(){return h}};return Di(x(),"SMUIDataTableHeader:mount",D),()=>{Di(x(),"SMUIDataTableHeader:unmount",D)}});function p(D){v.push(D.detail),d.set(D.detail.element,D.detail),D.stopPropagation()}function _(D){const R=v.indexOf(D.detail);R!==-1&&(v.splice(R,1),v=v),d.delete(D.detail.element),D.stopPropagation()}function b(){return[...x().querySelectorAll(".mdc-data-table__header-cell")].map(D=>d.get(D)).filter(D=>D&&D._smui_data_table_header_cell_accessor)}function x(){return u}function E(D){ci[D?"unshift":"push"](()=>{u=D,e(1,u)})}const A=D=>e(2,h=D.detail),P=()=>e(2,h=void 0);return r.$$set=D=>{t=cn(cn({},t),ga(D)),e(6,o=ei(t,i)),"use"in D&&e(0,l=D.use),"$$scope"in D&&e(8,s=D.$$scope)},[l,u,h,n,p,_,o,x,s,a,E,A,P]}class H4 extends ki{constructor(t){super(),Mi(this,t,U4,N4,_i,{use:0,getElement:7})}get getElement(){return this.$$.ctx[7]}}function V4(r){let t,e,i,o,a,s;const n=r[9].default,l=Ni(n,r,r[8],null);let u=[{class:e=Pn({[r[1]]:!0,"mdc-data-table__content":!0})},r[6]],h={};for(let v=0;v<u.length;v+=1)h=cn(h,u[v]);return{c(){t=_n("tbody"),l&&l.c(),Xn(t,h)},m(v,d){Er(v,t,d),l&&l.m(t,null),r[10](t),o=!0,a||(s=[ri(i=ma.call(null,t,r[0])),ri(r[3].call(null,t)),si(t,"SMUIDataTableRow:mount",r[4]),si(t,"SMUIDataTableRow:unmount",r[5])],a=!0)},p(v,[d]){l&&l.p&&(!o||d&256)&&Hi(l,n,v,v[8],o?Ui(n,v[8],d,null):Vi(v[8]),null),Xn(t,h=li(u,[(!o||d&2&&e!==(e=Pn({[v[1]]:!0,"mdc-data-table__content":!0})))&&{class:e},d&64&&v[6]])),i&&Ci(i.update)&&d&1&&i.update.call(null,v[0])},i(v){o||(Kt(l,v),o=!0)},o(v){lr(l,v),o=!1},d(v){v&&Sr(t),l&&l.d(v),r[10](null),a=!1,Ma(s)}}}function G4(r,t,e){const i=["use","class","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,h,v=[];const d=new WeakMap;wi("SMUI:data-table:row:header",!1),bo(()=>{const A={get rows(){return v},get orderedRows(){return b()}};return Di(x(),"SMUIDataTableBody:mount",A),()=>{Di(x(),"SMUIDataTableBody:unmount",A)}});function p(A){v.push(A.detail),d.set(A.detail.element,A.detail),A.stopPropagation()}function _(A){const P=v.indexOf(A.detail);P!==-1&&(v.splice(P,1),v=v),d.delete(A.detail.element),A.stopPropagation()}function b(){return[...x().querySelectorAll(".mdc-data-table__row")].map(A=>d.get(A)).filter(A=>A&&A._smui_data_table_row_accessor)}function x(){return h}function E(A){ci[A?"unshift":"push"](()=>{h=A,e(2,h)})}return r.$$set=A=>{t=cn(cn({},t),ga(A)),e(6,o=ei(t,i)),"use"in A&&e(0,l=A.use),"class"in A&&e(1,u=A.class),"$$scope"in A&&e(8,s=A.$$scope)},[l,u,h,n,p,_,o,x,s,a,E]}class Z4 extends ki{constructor(t){super(),Mi(this,t,G4,V4,_i,{use:0,class:1,getElement:7})}get getElement(){return this.$$.ctx[7]}}function W4(r){let t,e,i,o,a,s,n;const l=r[14].default,u=Ni(l,r,r[13],null);let h=[{class:e=Pn({[r[1]]:!0,"mdc-data-table__header-row":r[7],"mdc-data-table__row":!r[7],"mdc-data-table__row--selected":!r[7]&&r[3]&&r[3].checked,...r[4]})},{"aria-selected":i=r[3]?r[3].checked?"true":"false":void 0},r[5],r[10]],v={};for(let d=0;d<h.length;d+=1)v=cn(v,h[d]);return{c(){t=_n("tr"),u&&u.c(),Xn(t,v)},m(d,p){Er(d,t,p),u&&u.m(t,null),r[15](t),a=!0,s||(n=[ri(o=ma.call(null,t,r[0])),ri(r[6].call(null,t)),si(t,"click",r[16]),si(t,"SMUICheckbox:mount",r[17]),si(t,"SMUICheckbox:unmount",r[18])],s=!0)},p(d,[p]){u&&u.p&&(!a||p&8192)&&Hi(u,l,d,d[13],a?Ui(l,d[13],p,null):Vi(d[13]),null),Xn(t,v=li(h,[(!a||p&26&&e!==(e=Pn({[d[1]]:!0,"mdc-data-table__header-row":d[7],"mdc-data-table__row":!d[7],"mdc-data-table__row--selected":!d[7]&&d[3]&&d[3].checked,...d[4]})))&&{class:e},(!a||p&8&&i!==(i=d[3]?d[3].checked?"true":"false":void 0))&&{"aria-selected":i},p&32&&d[5],p&1024&&d[10]])),o&&Ci(o.update)&&p&1&&o.update.call(null,d[0])},i(d){a||(Kt(u,d),a=!0)},o(d){lr(u,d),a=!1},d(d){d&&Sr(t),u&&u.d(d),r[15](null),s=!1,Ma(n)}}}let j4=0;function Y4(r,t,e){const i=["use","class","rowId","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{rowId:h="SMUI-data-table-row-"+j4++}=t,v,d,p={},_={},b=Ki("SMUI:data-table:row:header");bo(()=>{const U=b?{_smui_data_table_row_accessor:!1,get element(){return S()},get checkbox(){return d},get rowId(){},get selected(){var F;return(F=d&&d.checked)!==null&&F!==void 0?F:!1},addClass:x,removeClass:E,getAttr:A,addAttr:P}:{_smui_data_table_row_accessor:!0,get element(){return S()},get checkbox(){return d},get rowId(){return h},get selected(){var F;return(F=d&&d.checked)!==null&&F!==void 0?F:!1},addClass:x,removeClass:E,getAttr:A,addAttr:P};return Di(S(),"SMUIDataTableRow:mount",U),()=>{Di(S(),"SMUIDataTableRow:unmount",U)}});function x(U){p[U]||e(4,p[U]=!0,p)}function E(U){(!(U in p)||p[U])&&e(4,p[U]=!1,p)}function A(U){var F;return U in _?(F=_[U])!==null&&F!==void 0?F:null:S().getAttribute(U)}function P(U,F){_[U]!==F&&e(5,_[U]=F,_)}function D(U){Di(S(),"SMUIDataTableHeader:click",U)}function R(U){Di(S(),"SMUIDataTableRow:click",{rowId:h,target:U.target})}function S(){return v}function I(U){ci[U?"unshift":"push"](()=>{v=U,e(2,v)})}const T=U=>b?D(U):R(U),M=U=>e(3,d=U.detail),z=()=>e(3,d=void 0);return r.$$set=U=>{t=cn(cn({},t),ga(U)),e(10,o=ei(t,i)),"use"in U&&e(0,l=U.use),"class"in U&&e(1,u=U.class),"rowId"in U&&e(11,h=U.rowId),"$$scope"in U&&e(13,s=U.$$scope)},[l,u,v,d,p,_,n,b,D,R,o,h,S,s,a,I,T,M,z]}class tx extends ki{constructor(t){super(),Mi(this,t,Y4,W4,_i,{use:0,class:1,rowId:11,getElement:12})}get getElement(){return this.$$.ctx[12]}}function X4(r){let t,e,i,o,a,s;const n=r[22].default,l=Ni(n,r,r[21],null);let u=[{class:e=Pn({[r[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":r[2],"mdc-data-table__cell--checkbox":r[3],...r[7]})},r[8],r[19]],h={};for(let v=0;v<u.length;v+=1)h=cn(h,u[v]);return{c(){t=_n("td"),l&&l.c(),Xn(t,h)},m(v,d){Er(v,t,d),l&&l.m(t,null),r[25](t),o=!0,a||(s=[ri(i=ma.call(null,t,r[0])),ri(r[11].call(null,t)),si(t,"change",r[26])],a=!0)},p(v,d){l&&l.p&&(!o||d&2097152)&&Hi(l,n,v,v[21],o?Ui(n,v[21],d,null):Vi(v[21]),null),Xn(t,h=li(u,[(!o||d&142&&e!==(e=Pn({[v[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":v[2],"mdc-data-table__cell--checkbox":v[3],...v[7]})))&&{class:e},d&256&&v[8],d&524288&&v[19]])),i&&Ci(i.update)&&d&1&&i.update.call(null,v[0])},i(v){o||(Kt(l,v),o=!0)},o(v){lr(l,v),o=!1},d(v){v&&Sr(t),l&&l.d(v),r[25](null),a=!1,Ma(s)}}}function K4(r){let t,e,i,o,a,s,n,l,u;const h=[$4,J4],v=[];function d(b,x){return b[5]?0:1}e=d(r),i=v[e]=h[e](r);let p=[{class:o=Pn({[r[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":r[2],"mdc-data-table__header-cell--checkbox":r[3],"mdc-data-table__header-cell--with-sort":r[5],"mdc-data-table__header-cell--sorted":r[5]&&r[9]===r[4],...r[7]})},{role:"columnheader"},{scope:"col"},{"data-column-id":r[4]},{"aria-sort":a=r[5]?r[9]===r[4]?r[10]:"none":void 0},r[8],r[19]],_={};for(let b=0;b<p.length;b+=1)_=cn(_,p[b]);return{c(){t=_n("th"),i.c(),Xn(t,_)},m(b,x){Er(b,t,x),v[e].m(t,null),r[23](t),n=!0,l||(u=[ri(s=ma.call(null,t,r[0])),ri(r[11].call(null,t)),si(t,"change",r[24])],l=!0)},p(b,x){let E=e;e=d(b),e===E?v[e].p(b,x):(Ri(),lr(v[E],1,1,()=>{v[E]=null}),Fi(),i=v[e],i?i.p(b,x):(i=v[e]=h[e](b),i.c()),Kt(i,1),i.m(t,null)),Xn(t,_=li(p,[(!n||x&702&&o!==(o=Pn({[b[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":b[2],"mdc-data-table__header-cell--checkbox":b[3],"mdc-data-table__header-cell--with-sort":b[5],"mdc-data-table__header-cell--sorted":b[5]&&b[9]===b[4],...b[7]})))&&{class:o},{role:"columnheader"},{scope:"col"},(!n||x&16)&&{"data-column-id":b[4]},(!n||x&1584&&a!==(a=b[5]?b[9]===b[4]?b[10]:"none":void 0))&&{"aria-sort":a},x&256&&b[8],x&524288&&b[19]])),s&&Ci(s.update)&&x&1&&s.update.call(null,b[0])},i(b){n||(Kt(i),n=!0)},o(b){lr(i),n=!1},d(b){b&&Sr(t),v[e].d(),r[23](null),l=!1,Ma(u)}}}function J4(r){let t;const e=r[22].default,i=Ni(e,r,r[21],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a&2097152)&&Hi(i,e,o,o[21],t?Ui(e,o[21],a,null):Vi(o[21]),null)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function $4(r){let t,e,i,o=(r[9]===r[4]?r[10]==="ascending"?r[15]:r[16]:"")+"",a,s,n;const l=r[22].default,u=Ni(l,r,r[21],null);return{c(){t=_n("div"),u&&u.c(),e=Rn(),i=_n("div"),a=oi(o),nn(i,"class","mdc-data-table__sort-status-label"),nn(i,"aria-hidden","true"),nn(i,"id",s=r[4]+"-status-label"),nn(t,"class","mdc-data-table__header-cell-wrapper")},m(h,v){Er(h,t,v),u&&u.m(t,null),En(t,e),En(t,i),En(i,a),n=!0},p(h,v){u&&u.p&&(!n||v&2097152)&&Hi(u,l,h,h[21],n?Ui(l,h[21],v,null):Vi(h[21]),null),(!n||v&1552)&&o!==(o=(h[9]===h[4]?h[10]==="ascending"?h[15]:h[16]:"")+"")&&uo(a,o),(!n||v&16&&s!==(s=h[4]+"-status-label"))&&nn(i,"id",s)},i(h){n||(Kt(u,h),n=!0)},o(h){lr(u,h),n=!1},d(h){h&&Sr(t),u&&u.d(h)}}}function Q4(r){let t,e,i,o;const a=[K4,X4],s=[];function n(l,u){return l[12]?0:1}return t=n(r),e=s[t]=a[t](r),{c(){e.c(),i=ea()},m(l,u){s[t].m(l,u),Er(l,i,u),o=!0},p(l,[u]){e.p(l,u)},i(l){o||(Kt(e),o=!0)},o(l){lr(e),o=!1},d(l){s[t].d(l),l&&Sr(i)}}}let q4=0;function ek(r,t,e){const i=["use","class","numeric","checkbox","columnId","sortable","getElement"];let o=ei(t,i),a,s,{$$slots:n={},$$scope:l}=t;const u=wa(oa());let h=Ki("SMUI:data-table:row:header"),{use:v=[]}=t,{class:d=""}=t,{numeric:p=!1}=t,{checkbox:_=!1}=t,{columnId:b=h?"SMUI-data-table-column-"+q4++:"SMUI-data-table-unused"}=t,{sortable:x=Ki("SMUI:data-table:sortable")}=t,E,A={},P={},D=Ki("SMUI:data-table:sort");Ei(r,D,q=>e(9,a=q));let R=Ki("SMUI:data-table:sortDirection");Ei(r,R,q=>e(10,s=q));let S=Ki("SMUI:data-table:sortAscendingAriaLabel"),I=Ki("SMUI:data-table:sortDescendingAriaLabel");x&&(wi("SMUI:label:context","data-table:sortable-header-cell"),wi("SMUI:icon-button:context","data-table:sortable-header-cell"),wi("SMUI:icon-button:aria-describedby",b+"-status-label")),bo(()=>{const q=h?{_smui_data_table_header_cell_accessor:!0,get element(){return j()},get columnId(){return b},addClass:T,removeClass:M,getAttr:z,addAttr:U}:{_smui_data_table_header_cell_accessor:!1,get element(){return j()},get columnId(){},addClass:T,removeClass:M,getAttr:z,addAttr:U};return Di(j(),"SMUIDataTableCell:mount",q),()=>{Di(j(),"SMUIDataTableCell:unmount",q)}});function T(q){A[q]||e(7,A[q]=!0,A)}function M(q){(!(q in A)||A[q])&&e(7,A[q]=!1,A)}function z(q){var we;return q in P?(we=P[q])!==null&&we!==void 0?we:null:j().getAttribute(q)}function U(q,we){P[q]!==we&&e(8,P[q]=we,P)}function F(q){Di(j(),"SMUIDataTableHeaderCheckbox:change",q)}function V(q){Di(j(),"SMUIDataTableBodyCheckbox:change",q)}function j(){return E}function H(q){ci[q?"unshift":"push"](()=>{E=q,e(6,E)})}const Y=q=>_&&F(q);function J(q){ci[q?"unshift":"push"](()=>{E=q,e(6,E)})}const ne=q=>_&&V(q);return r.$$set=q=>{t=cn(cn({},t),ga(q)),e(19,o=ei(t,i)),"use"in q&&e(0,v=q.use),"class"in q&&e(1,d=q.class),"numeric"in q&&e(2,p=q.numeric),"checkbox"in q&&e(3,_=q.checkbox),"columnId"in q&&e(4,b=q.columnId),"sortable"in q&&e(5,x=q.sortable),"$$scope"in q&&e(21,l=q.$$scope)},[v,d,p,_,b,x,E,A,P,a,s,u,h,D,R,S,I,F,V,o,j,l,n,H,Y,J,ne]}class df extends ki{constructor(t){super(),Mi(this,t,ek,Q4,_i,{use:0,class:1,numeric:2,checkbox:3,columnId:4,sortable:5,getElement:20})}get getElement(){return this.$$.ctx[20]}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var tk={ACTIVE:"mdc-tab-indicator--active",FADE:"mdc-tab-indicator--fade",NO_TRANSITION:"mdc-tab-indicator--no-transition"},rk={CONTENT_SELECTOR:".mdc-tab-indicator__content"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Pc=function(r){xo(t,r);function t(e){return r.call(this,aa(aa({},t.defaultAdapter),e))||this}return Object.defineProperty(t,"cssClasses",{get:function(){return tk},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return rk},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},computeContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setContentStyleProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.computeContentClientRect=function(){return this.adapter.computeContentClientRect()},t}(ws);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nk=function(r){xo(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.activate=function(){this.adapter.addClass(Pc.cssClasses.ACTIVE)},t.prototype.deactivate=function(){this.adapter.removeClass(Pc.cssClasses.ACTIVE)},t}(Pc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var b1=function(r){xo(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.activate=function(e){if(!e){this.adapter.addClass(Pc.cssClasses.ACTIVE);return}var i=this.computeContentClientRect(),o=e.width/i.width,a=e.left-i.left;this.adapter.addClass(Pc.cssClasses.NO_TRANSITION),this.adapter.setContentStyleProperty("transform","translateX("+a+"px) scaleX("+o+")"),this.computeContentClientRect(),this.adapter.removeClass(Pc.cssClasses.NO_TRANSITION),this.adapter.addClass(Pc.cssClasses.ACTIVE),this.adapter.setContentStyleProperty("transform","")},t.prototype.deactivate=function(){this.adapter.removeClass(Pc.cssClasses.ACTIVE)},t}(Pc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rp={ACTIVE:"mdc-tab--active"},$h={ARIA_SELECTED:"aria-selected",CONTENT_SELECTOR:".mdc-tab__content",INTERACTED_EVENT:"MDCTab:interacted",RIPPLE_SELECTOR:".mdc-tab__ripple",TABINDEX:"tabIndex",TAB_INDICATOR_SELECTOR:".mdc-tab-indicator"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ik=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.focusOnActivate=!0,i}return Object.defineProperty(t,"cssClasses",{get:function(){return rp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return $h},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},activateIndicator:function(){},deactivateIndicator:function(){},notifyInteracted:function(){},getOffsetLeft:function(){return 0},getOffsetWidth:function(){return 0},getContentOffsetLeft:function(){return 0},getContentOffsetWidth:function(){return 0},focus:function(){}}},enumerable:!1,configurable:!0}),t.prototype.handleClick=function(){this.adapter.notifyInteracted()},t.prototype.isActive=function(){return this.adapter.hasClass(rp.ACTIVE)},t.prototype.setFocusOnActivate=function(e){this.focusOnActivate=e},t.prototype.activate=function(e){this.adapter.addClass(rp.ACTIVE),this.adapter.setAttr($h.ARIA_SELECTED,"true"),this.adapter.setAttr($h.TABINDEX,"0"),this.adapter.activateIndicator(e),this.focusOnActivate&&this.adapter.focus()},t.prototype.deactivate=function(){!this.isActive()||(this.adapter.removeClass(rp.ACTIVE),this.adapter.setAttr($h.ARIA_SELECTED,"false"),this.adapter.setAttr($h.TABINDEX,"-1"),this.adapter.deactivateIndicator())},t.prototype.computeDimensions=function(){var e=this.adapter.getOffsetWidth(),i=this.adapter.getOffsetLeft(),o=this.adapter.getContentOffsetWidth(),a=this.adapter.getContentOffsetLeft();return{contentLeft:i+a,contentRight:i+a+o,rootLeft:i,rootRight:i+e}},t}(ws);function ak(r){let t,e,i,o,a,s,n,l,u,h,v;const d=r[21].default,p=Ni(d,r,r[20],null);let _=[{class:i=Pn({[r[6]]:!0,"mdc-tab-indicator__content":!0,"mdc-tab-indicator__content--underline":r[3]==="underline","mdc-tab-indicator__content--icon":r[3]==="icon"})},{style:o=Object.entries(r[10]).map(x1).join(" ")},{"aria-hidden":a=r[3]==="icon"?"true":void 0},xi(r[12],"content$")],b={};for(let A=0;A<_.length;A+=1)b=cn(b,_[A]);let x=[{class:n=Pn({[r[2]]:!0,"mdc-tab-indicator":!0,"mdc-tab-indicator--active":r[0],"mdc-tab-indicator--fade":r[4]==="fade",...r[9]})},Os(r[12],["content$"])],E={};for(let A=0;A<x.length;A+=1)E=cn(E,x[A]);return{c(){t=_n("span"),e=_n("span"),p&&p.c(),Xn(e,b),Xn(t,E)},m(A,P){Er(A,t,P),En(t,e),p&&p.m(e,null),r[22](e),r[23](t),u=!0,h||(v=[ri(s=ma.call(null,e,r[5])),ri(l=ma.call(null,t,r[1])),ri(r[11].call(null,t))],h=!0)},p(A,[P]){p&&p.p&&(!u||P&1048576)&&Hi(p,d,A,A[20],u?Ui(d,A[20],P,null):Vi(A[20]),null),Xn(e,b=li(_,[(!u||P&72&&i!==(i=Pn({[A[6]]:!0,"mdc-tab-indicator__content":!0,"mdc-tab-indicator__content--underline":A[3]==="underline","mdc-tab-indicator__content--icon":A[3]==="icon"})))&&{class:i},(!u||P&1024&&o!==(o=Object.entries(A[10]).map(x1).join(" ")))&&{style:o},(!u||P&8&&a!==(a=A[3]==="icon"?"true":void 0))&&{"aria-hidden":a},P&4096&&xi(A[12],"content$")])),s&&Ci(s.update)&&P&32&&s.update.call(null,A[5]),Xn(t,E=li(x,[(!u||P&533&&n!==(n=Pn({[A[2]]:!0,"mdc-tab-indicator":!0,"mdc-tab-indicator--active":A[0],"mdc-tab-indicator--fade":A[4]==="fade",...A[9]})))&&{class:n},P&4096&&Os(A[12],["content$"])])),l&&Ci(l.update)&&P&2&&l.update.call(null,A[1])},i(A){u||(Kt(p,A),u=!0)},o(A){lr(p,A),u=!1},d(A){A&&Sr(t),p&&p.d(A),r[22](null),r[23](null),h=!1,Ma(v)}}}const x1=([r,t])=>`${r}: ${t};`;function ok(r,t,e){const i=["use","class","active","type","transition","content$use","content$class","activate","deactivate","computeContentClientRect","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{active:h=!1}=t,{type:v="underline"}=t,{transition:d="slide"}=t,{content$use:p=[]}=t,{content$class:_=""}=t,b,x,E,A={},P={},D=[],R=d;bo(()=>(e(17,x=S()),x.init(),()=>{x.destroy()}));function S(){const J={fade:nk,slide:b1}[d]||b1;return new J({addClass:(...ne)=>I(()=>T(...ne)),removeClass:(...ne)=>I(()=>M(...ne)),computeContentClientRect:V,setContentStyleProperty:(...ne)=>I(()=>z(...ne))})}function I(J){D.length?D[D.length-1].push(J):J()}function T(J){A[J]||e(9,A[J]=!0,A)}function M(J){(!(J in A)||A[J])&&e(9,A[J]=!1,A)}function z(J,ne){P[J]!=ne&&(ne===""||ne==null?(delete P[J],e(10,P),e(19,R),e(4,d),e(17,x)):e(10,P[J]=ne,P))}function U(J){e(0,h=!0),x.activate(J)}function F(){e(0,h=!1),x.deactivate()}function V(){return D.push([]),e(18,D),E.getBoundingClientRect()}function j(){return b}function H(J){ci[J?"unshift":"push"](()=>{E=J,e(8,E)})}function Y(J){ci[J?"unshift":"push"](()=>{b=J,e(7,b)})}return r.$$set=J=>{t=cn(cn({},t),ga(J)),e(12,o=ei(t,i)),"use"in J&&e(1,l=J.use),"class"in J&&e(2,u=J.class),"active"in J&&e(0,h=J.active),"type"in J&&e(3,v=J.type),"transition"in J&&e(4,d=J.transition),"content$use"in J&&e(5,p=J.content$use),"content$class"in J&&e(6,_=J.content$class),"$$scope"in J&&e(20,s=J.$$scope)},r.$$.update=()=>{r.$$.dirty&655376&&R!==d&&(e(19,R=d),x&&x.destroy(),e(9,A={}),e(10,P={}),e(17,x=S()),x.init()),r.$$.dirty&262144&&D.length&&requestAnimationFrame(()=>{var J;const ne=(J=D.shift())!==null&&J!==void 0?J:[];e(18,D);for(const q of ne)q()})},[h,l,u,v,d,p,_,b,E,A,P,n,o,U,F,V,j,x,D,R,s,a,H,Y]}class rx extends ki{constructor(t){super(),Mi(this,t,ok,ak,_i,{use:1,class:2,active:0,type:3,transition:4,content$use:5,content$class:6,activate:13,deactivate:14,computeContentClientRect:15,getElement:16})}get activate(){return this.$$.ctx[13]}get deactivate(){return this.$$.ctx[14]}get computeContentClientRect(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}const sk=r=>({}),w1=r=>({}),lk=r=>({}),T1=r=>({});function A1(r){let t,e;const i=[{active:r[18]},xi(r[25],"tabIndicator$")];let o={$$slots:{default:[uk]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new rx({props:o}),r[33](t),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,s){const n=s[0]&33816576?li(i,[s[0]&262144&&{active:a[18]},s[0]&33554432&&pa(xi(a[25],"tabIndicator$"))]):{};s[1]&64&&(n.$$scope={dirty:s,ctx:a}),t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){r[33](null),sn(t,a)}}}function uk(r){let t;const e=r[32]["tab-indicator"],i=Ni(e,r,r[37],T1);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a[1]&64)&&Hi(i,e,o,o[37],t?Ui(e,o[37],a,lk):Vi(o[37]),T1)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function S1(r){let t,e;const i=[{active:r[18]},xi(r[25],"tabIndicator$")];let o={$$slots:{default:[ck]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)o=cn(o,i[a]);return t=new rx({props:o}),r[35](t),{c(){un(t.$$.fragment)},m(a,s){on(t,a,s),e=!0},p(a,s){const n=s[0]&33816576?li(i,[s[0]&262144&&{active:a[18]},s[0]&33554432&&pa(xi(a[25],"tabIndicator$"))]):{};s[1]&64&&(n.$$scope={dirty:s,ctx:a}),t.$set(n)},i(a){e||(Kt(t.$$.fragment,a),e=!0)},o(a){lr(t.$$.fragment,a),e=!1},d(a){r[35](null),sn(t,a)}}}function ck(r){let t;const e=r[32]["tab-indicator"],i=Ni(e,r,r[37],w1);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),t=!0},p(o,a){i&&i.p&&(!t||a[1]&64)&&Hi(i,e,o,o[37],t?Ui(e,o[37],a,sk):Vi(o[37]),w1)},i(o){t||(Kt(i,o),t=!0)},o(o){lr(i,o),t=!1},d(o){i&&i.d(o)}}}function fk(r){let t,e,i,o,a,s,n,l,u,h;const v=r[32].default,d=Ni(v,r,r[37],null);let p=r[6]&&A1(r),_=[{class:i=Pn({[r[9]]:!0,"mdc-tab__content":!0})},xi(r[25],"content$")],b={};for(let E=0;E<_.length;E+=1)b=cn(b,_[E]);let x=!r[6]&&S1(r);return{c(){t=_n("span"),d&&d.c(),e=Rn(),p&&p.c(),a=Rn(),x&&x.c(),s=Rn(),n=_n("span"),Xn(t,b),nn(n,"class","mdc-tab__ripple")},m(E,A){Er(E,t,A),d&&d.m(t,null),En(t,e),p&&p.m(t,null),r[34](t),Er(E,a,A),x&&x.m(E,A),Er(E,s,A),Er(E,n,A),l=!0,u||(h=ri(o=ma.call(null,t,r[8])),u=!0)},p(E,A){d&&d.p&&(!l||A[1]&64)&&Hi(d,v,E,E[37],l?Ui(v,E[37],A,null):Vi(E[37]),null),E[6]?p?(p.p(E,A),A[0]&64&&Kt(p,1)):(p=A1(E),p.c(),Kt(p,1),p.m(t,null)):p&&(Ri(),lr(p,1,1,()=>{p=null}),Fi()),Xn(t,b=li(_,[(!l||A[0]&512&&i!==(i=Pn({[E[9]]:!0,"mdc-tab__content":!0})))&&{class:i},A[0]&33554432&&xi(E[25],"content$")])),o&&Ci(o.update)&&A[0]&256&&o.update.call(null,E[8]),E[6]?x&&(Ri(),lr(x,1,1,()=>{x=null}),Fi()):x?(x.p(E,A),A[0]&64&&Kt(x,1)):(x=S1(E),x.c(),Kt(x,1),x.m(s.parentNode,s))},i(E){l||(Kt(d,E),Kt(p),Kt(x),l=!0)},o(E){lr(d,E),lr(p),lr(x),l=!1},d(E){E&&Sr(t),d&&d.d(E),p&&p.d(),r[34](null),E&&Sr(a),x&&x.d(E),E&&Sr(s),E&&Sr(n),u=!1,h()}}}function hk(r){let t,e,i;const o=[{tag:r[11]},{use:[[Hc,{ripple:r[3],unbounded:!1,addClass:r[21],removeClass:r[22],addStyle:r[23]}],r[20],...r[0]]},{class:Pn({[r[1]]:!0,"mdc-tab":!0,"mdc-tab--active":r[18],"mdc-tab--stacked":r[4],"mdc-tab--min-width":r[5],...r[15]})},{style:Object.entries(r[16]).map(E1).concat([r[2]]).join(" ")},{role:"tab"},{"aria-selected":r[18]?"true":"false"},{tabindex:r[18]||r[19]?"0":"-1"},{href:r[7]},r[17],Os(r[25],["content$","tabIndicator$"])];var a=r[10];function s(n){let l={$$slots:{default:[fk]},$$scope:{ctx:n}};for(let u=0;u<o.length;u+=1)l=cn(l,o[u]);return{props:l}}return a&&(t=ss(a,s(r)),r[36](t),t.$on("click",r[24])),{c(){t&&un(t.$$.fragment),e=ea()},m(n,l){t&&on(t,n,l),Er(n,e,l),i=!0},p(n,l){const u=l[0]&50301119?li(o,[l[0]&2048&&{tag:n[11]},l[0]&15728649&&{use:[[Hc,{ripple:n[3],unbounded:!1,addClass:n[21],removeClass:n[22],addStyle:n[23]}],n[20],...n[0]]},l[0]&294962&&{class:Pn({[n[1]]:!0,"mdc-tab":!0,"mdc-tab--active":n[18],"mdc-tab--stacked":n[4],"mdc-tab--min-width":n[5],...n[15]})},l[0]&65540&&{style:Object.entries(n[16]).map(E1).concat([n[2]]).join(" ")},o[4],l[0]&262144&&{"aria-selected":n[18]?"true":"false"},l[0]&786432&&{tabindex:n[18]||n[19]?"0":"-1"},l[0]&128&&{href:n[7]},l[0]&131072&&pa(n[17]),l[0]&33554432&&pa(Os(n[25],["content$","tabIndicator$"]))]):{};if(l[0]&33841984|l[1]&64&&(u.$$scope={dirty:l,ctx:n}),a!==(a=n[10])){if(t){Ri();const h=t;lr(h.$$.fragment,1,0,()=>{sn(h,1)}),Fi()}a?(t=ss(a,s(n)),n[36](t),t.$on("click",n[24]),un(t.$$.fragment),Kt(t.$$.fragment,1),on(t,e.parentNode,e)):t=null}else a&&t.$set(u)},i(n){i||(t&&Kt(t.$$.fragment,n),i=!0)},o(n){t&&lr(t.$$.fragment,n),i=!1},d(n){r[36](null),n&&Sr(e),t&&sn(t,n)}}}const E1=([r,t])=>`${r}: ${t};`;function dk(r,t,e){const i=["use","class","style","tab","ripple","stacked","minWidth","indicatorSpanOnlyContent","href","content$use","content$class","component","tag","activate","deactivate","focus","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{style:h=""}=t,{tab:v}=t,{ripple:d=!0}=t,{stacked:p=!1}=t,{minWidth:_=!1}=t,{indicatorSpanOnlyContent:b=!1}=t,{href:x=void 0}=t,{content$use:E=[]}=t,{content$class:A=""}=t,P,D,R,S,I={},T={},M={},z=Ki("SMUI:tab:focusOnActivate"),U=v===Ki("SMUI:tab:initialActive"),F=!1,{component:V=ls}=t,{tag:j=V===ls?x==null?"button":"a":void 0}=t;if(wi("SMUI:label:context","tab"),wi("SMUI:icon:context","tab"),!v)throw new Error("The tab property is required! It should be passed down from the TabBar to the Tab.");bo(()=>{e(31,D=new ik({setAttr:q,addClass:Y,removeClass:J,hasClass:H,activateIndicator:ke=>S.activate(ke),deactivateIndicator:()=>S.deactivate(),notifyInteracted:()=>Di(de(),"SMUITab:interacted",{tabId:v},void 0,!0),getOffsetLeft:()=>de().offsetLeft,getOffsetWidth:()=>de().offsetWidth,getContentOffsetLeft:()=>R.offsetLeft,getContentOffsetWidth:()=>R.offsetWidth,focus:re}));const Ee={tabId:v,get element(){return de()},get active(){return U},forceAccessible(ke){e(19,F=ke)},computeIndicatorClientRect:()=>S.computeContentClientRect(),computeDimensions:()=>D.computeDimensions(),focus:re,activate:ee,deactivate:X};return Di(de(),"SMUITab:mount",Ee),D.init(),()=>{Di(de(),"SMUITab:unmount",Ee),D.destroy()}});function H(Ee){return Ee in I?I[Ee]:de().classList.contains(Ee)}function Y(Ee){I[Ee]||e(15,I[Ee]=!0,I)}function J(Ee){(!(Ee in I)||I[Ee])&&e(15,I[Ee]=!1,I)}function ne(Ee,ke){T[Ee]!=ke&&(ke===""||ke==null?(delete T[Ee],e(16,T)):e(16,T[Ee]=ke,T))}function q(Ee,ke){M[Ee]!==ke&&e(17,M[Ee]=ke,M)}function we(Ee){!Ee.defaultPrevented&&D&&D.handleClick()}function ee(Ee,ke){e(18,U=!0),ke&&D.setFocusOnActivate(!1),D.activate(Ee),ke&&D.setFocusOnActivate(z)}function X(){e(18,U=!1),D.deactivate()}function re(){de().focus()}function de(){return P.getElement()}function me(Ee){ci[Ee?"unshift":"push"](()=>{S=Ee,e(14,S)})}function xe(Ee){ci[Ee?"unshift":"push"](()=>{R=Ee,e(13,R)})}function He(Ee){ci[Ee?"unshift":"push"](()=>{S=Ee,e(14,S)})}function Re(Ee){ci[Ee?"unshift":"push"](()=>{P=Ee,e(12,P)})}return r.$$set=Ee=>{t=cn(cn({},t),ga(Ee)),e(25,o=ei(t,i)),"use"in Ee&&e(0,l=Ee.use),"class"in Ee&&e(1,u=Ee.class),"style"in Ee&&e(2,h=Ee.style),"tab"in Ee&&e(26,v=Ee.tab),"ripple"in Ee&&e(3,d=Ee.ripple),"stacked"in Ee&&e(4,p=Ee.stacked),"minWidth"in Ee&&e(5,_=Ee.minWidth),"indicatorSpanOnlyContent"in Ee&&e(6,b=Ee.indicatorSpanOnlyContent),"href"in Ee&&e(7,x=Ee.href),"content$use"in Ee&&e(8,E=Ee.content$use),"content$class"in Ee&&e(9,A=Ee.content$class),"component"in Ee&&e(10,V=Ee.component),"tag"in Ee&&e(11,j=Ee.tag),"$$scope"in Ee&&e(37,s=Ee.$$scope)},r.$$.update=()=>{r.$$.dirty[1]&1&&D&&D.setFocusOnActivate(z)},[l,u,h,d,p,_,b,x,E,A,V,j,P,R,S,I,T,M,U,F,n,Y,J,ne,we,o,v,ee,X,re,de,D,a,me,xe,He,Re,s]}class pk extends ki{constructor(t){super(),Mi(this,t,dk,hk,_i,{use:0,class:1,style:2,tab:26,ripple:3,stacked:4,minWidth:5,indicatorSpanOnlyContent:6,href:7,content$use:8,content$class:9,component:10,tag:11,activate:27,deactivate:28,focus:29,getElement:30},null,[-1,-1])}get activate(){return this.$$.ctx[27]}get deactivate(){return this.$$.ctx[28]}get focus(){return this.$$.ctx[29]}get getElement(){return this.$$.ctx[30]}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nx={ANIMATING:"mdc-tab-scroller--animating",SCROLL_AREA_SCROLL:"mdc-tab-scroller__scroll-area--scroll",SCROLL_TEST:"mdc-tab-scroller__test"},mk={AREA_SELECTOR:".mdc-tab-scroller__scroll-area",CONTENT_SELECTOR:".mdc-tab-scroller__scroll-content"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var x0=function(){function r(t){this.adapter=t}return r}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vk=function(r){xo(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getScrollPositionRTL=function(){var e=this.adapter.getScrollAreaScrollLeft(),i=this.calculateScrollEdges().right;return Math.round(i-e)},t.prototype.scrollToRTL=function(e){var i=this.calculateScrollEdges(),o=this.adapter.getScrollAreaScrollLeft(),a=this.clampScrollValue(i.right-e);return{finalScrollPosition:a,scrollDelta:a-o}},t.prototype.incrementScrollRTL=function(e){var i=this.adapter.getScrollAreaScrollLeft(),o=this.clampScrollValue(i-e);return{finalScrollPosition:o,scrollDelta:o-i}},t.prototype.getAnimatingScrollPosition=function(e){return e},t.prototype.calculateScrollEdges=function(){var e=this.adapter.getScrollContentOffsetWidth(),i=this.adapter.getScrollAreaOffsetWidth();return{left:0,right:e-i}},t.prototype.clampScrollValue=function(e){var i=this.calculateScrollEdges();return Math.min(Math.max(i.left,e),i.right)},t}(x0);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var gk=function(r){xo(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getScrollPositionRTL=function(e){var i=this.adapter.getScrollAreaScrollLeft();return Math.round(e-i)},t.prototype.scrollToRTL=function(e){var i=this.adapter.getScrollAreaScrollLeft(),o=this.clampScrollValue(-e);return{finalScrollPosition:o,scrollDelta:o-i}},t.prototype.incrementScrollRTL=function(e){var i=this.adapter.getScrollAreaScrollLeft(),o=this.clampScrollValue(i-e);return{finalScrollPosition:o,scrollDelta:o-i}},t.prototype.getAnimatingScrollPosition=function(e,i){return e-i},t.prototype.calculateScrollEdges=function(){var e=this.adapter.getScrollContentOffsetWidth(),i=this.adapter.getScrollAreaOffsetWidth();return{left:i-e,right:0}},t.prototype.clampScrollValue=function(e){var i=this.calculateScrollEdges();return Math.max(Math.min(i.right,e),i.left)},t}(x0);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yk=function(r){xo(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getScrollPositionRTL=function(e){var i=this.adapter.getScrollAreaScrollLeft();return Math.round(i-e)},t.prototype.scrollToRTL=function(e){var i=this.adapter.getScrollAreaScrollLeft(),o=this.clampScrollValue(e);return{finalScrollPosition:o,scrollDelta:i-o}},t.prototype.incrementScrollRTL=function(e){var i=this.adapter.getScrollAreaScrollLeft(),o=this.clampScrollValue(i+e);return{finalScrollPosition:o,scrollDelta:i-o}},t.prototype.getAnimatingScrollPosition=function(e,i){return e+i},t.prototype.calculateScrollEdges=function(){var e=this.adapter.getScrollContentOffsetWidth(),i=this.adapter.getScrollAreaOffsetWidth();return{left:e-i,right:0}},t.prototype.clampScrollValue=function(e){var i=this.calculateScrollEdges();return Math.min(Math.max(i.right,e),i.left)},t}(x0);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _k=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.isAnimating=!1,i}return Object.defineProperty(t,"cssClasses",{get:function(){return nx},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return mk},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{eventTargetMatchesSelector:function(){return!1},addClass:function(){},removeClass:function(){},addScrollAreaClass:function(){},setScrollAreaStyleProperty:function(){},setScrollContentStyleProperty:function(){},getScrollContentStyleValue:function(){return""},setScrollAreaScrollLeft:function(){},getScrollAreaScrollLeft:function(){return 0},getScrollContentOffsetWidth:function(){return 0},getScrollAreaOffsetWidth:function(){return 0},computeScrollAreaClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeScrollContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeHorizontalScrollbarHeight:function(){return 0}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this.adapter.computeHorizontalScrollbarHeight();this.adapter.setScrollAreaStyleProperty("margin-bottom",-e+"px"),this.adapter.addScrollAreaClass(t.cssClasses.SCROLL_AREA_SCROLL)},t.prototype.getScrollPosition=function(){if(this.isRTL())return this.computeCurrentScrollPositionRTL();var e=this.calculateCurrentTranslateX(),i=this.adapter.getScrollAreaScrollLeft();return i-e},t.prototype.handleInteraction=function(){!this.isAnimating||this.stopScrollAnimation()},t.prototype.handleTransitionEnd=function(e){var i=e.target;!this.isAnimating||!this.adapter.eventTargetMatchesSelector(i,t.strings.CONTENT_SELECTOR)||(this.isAnimating=!1,this.adapter.removeClass(t.cssClasses.ANIMATING))},t.prototype.incrementScroll=function(e){e!==0&&this.animate(this.getIncrementScrollOperation(e))},t.prototype.incrementScrollImmediate=function(e){if(e!==0){var i=this.getIncrementScrollOperation(e);i.scrollDelta!==0&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(i.finalScrollPosition))}},t.prototype.scrollTo=function(e){if(this.isRTL()){this.scrollToImplRTL(e);return}this.scrollToImpl(e)},t.prototype.getRTLScroller=function(){return this.rtlScrollerInstance||(this.rtlScrollerInstance=this.rtlScrollerFactory()),this.rtlScrollerInstance},t.prototype.calculateCurrentTranslateX=function(){var e=this.adapter.getScrollContentStyleValue("transform");if(e==="none")return 0;var i=/\((.+?)\)/.exec(e);if(!i)return 0;var o=i[1],a=Pv(o.split(","),6);a[0],a[1],a[2],a[3];var s=a[4];return a[5],parseFloat(s)},t.prototype.clampScrollValue=function(e){var i=this.calculateScrollEdges();return Math.min(Math.max(i.left,e),i.right)},t.prototype.computeCurrentScrollPositionRTL=function(){var e=this.calculateCurrentTranslateX();return this.getRTLScroller().getScrollPositionRTL(e)},t.prototype.calculateScrollEdges=function(){var e=this.adapter.getScrollContentOffsetWidth(),i=this.adapter.getScrollAreaOffsetWidth();return{left:0,right:e-i}},t.prototype.scrollToImpl=function(e){var i=this.getScrollPosition(),o=this.clampScrollValue(e),a=o-i;this.animate({finalScrollPosition:o,scrollDelta:a})},t.prototype.scrollToImplRTL=function(e){var i=this.getRTLScroller().scrollToRTL(e);this.animate(i)},t.prototype.getIncrementScrollOperation=function(e){if(this.isRTL())return this.getRTLScroller().incrementScrollRTL(e);var i=this.getScrollPosition(),o=e+i,a=this.clampScrollValue(o),s=a-i;return{finalScrollPosition:a,scrollDelta:s}},t.prototype.animate=function(e){var i=this;e.scrollDelta!==0&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(e.finalScrollPosition),this.adapter.setScrollContentStyleProperty("transform","translateX("+e.scrollDelta+"px)"),this.adapter.computeScrollAreaClientRect(),requestAnimationFrame(function(){i.adapter.addClass(t.cssClasses.ANIMATING),i.adapter.setScrollContentStyleProperty("transform","none")}),this.isAnimating=!0)},t.prototype.stopScrollAnimation=function(){this.isAnimating=!1;var e=this.getAnimatingScrollPosition();this.adapter.removeClass(t.cssClasses.ANIMATING),this.adapter.setScrollContentStyleProperty("transform","translateX(0px)"),this.adapter.setScrollAreaScrollLeft(e)},t.prototype.getAnimatingScrollPosition=function(){var e=this.calculateCurrentTranslateX(),i=this.adapter.getScrollAreaScrollLeft();return this.isRTL()?this.getRTLScroller().getAnimatingScrollPosition(i,e):i-e},t.prototype.rtlScrollerFactory=function(){var e=this.adapter.getScrollAreaScrollLeft();this.adapter.setScrollAreaScrollLeft(e-1);var i=this.adapter.getScrollAreaScrollLeft();if(i<0)return this.adapter.setScrollAreaScrollLeft(e),new gk(this.adapter);var o=this.adapter.computeScrollAreaClientRect(),a=this.adapter.computeScrollContentClientRect(),s=Math.round(a.right-o.right);return this.adapter.setScrollAreaScrollLeft(e),s===i?new yk(this.adapter):new vk(this.adapter)},t.prototype.isRTL=function(){return this.adapter.getScrollContentStyleValue("direction")==="rtl"},t}(ws);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ev;function bk(r,t){if(t===void 0&&(t=!0),t&&typeof ev<"u")return ev;var e=r.createElement("div");e.classList.add(nx.SCROLL_TEST),r.body.appendChild(e);var i=e.offsetHeight-e.clientHeight;return r.body.removeChild(e),t&&(ev=i),i}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Uo={ARROW_LEFT_KEY:"ArrowLeft",ARROW_RIGHT_KEY:"ArrowRight",END_KEY:"End",ENTER_KEY:"Enter",HOME_KEY:"Home",SPACE_KEY:"Space",TAB_ACTIVATED_EVENT:"MDCTabBar:activated",TAB_SCROLLER_SELECTOR:".mdc-tab-scroller",TAB_SELECTOR:".mdc-tab"},ku={ARROW_LEFT_KEYCODE:37,ARROW_RIGHT_KEYCODE:39,END_KEYCODE:35,ENTER_KEYCODE:13,EXTRA_SCROLL_AMOUNT:20,HOME_KEYCODE:36,SPACE_KEYCODE:32};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Nf=new Set;Nf.add(Uo.ARROW_LEFT_KEY);Nf.add(Uo.ARROW_RIGHT_KEY);Nf.add(Uo.END_KEY);Nf.add(Uo.HOME_KEY);Nf.add(Uo.ENTER_KEY);Nf.add(Uo.SPACE_KEY);var Uf=new Map;Uf.set(ku.ARROW_LEFT_KEYCODE,Uo.ARROW_LEFT_KEY);Uf.set(ku.ARROW_RIGHT_KEYCODE,Uo.ARROW_RIGHT_KEY);Uf.set(ku.END_KEYCODE,Uo.END_KEY);Uf.set(ku.HOME_KEYCODE,Uo.HOME_KEY);Uf.set(ku.ENTER_KEYCODE,Uo.ENTER_KEY);Uf.set(ku.SPACE_KEYCODE,Uo.SPACE_KEY);var xk=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.useAutomaticActivation=!1,i}return Object.defineProperty(t,"strings",{get:function(){return Uo},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ku},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{scrollTo:function(){},incrementScroll:function(){},getScrollPosition:function(){return 0},getScrollContentWidth:function(){return 0},getOffsetWidth:function(){return 0},isRTL:function(){return!1},setActiveTab:function(){},activateTabAtIndex:function(){},deactivateTabAtIndex:function(){},focusTabAtIndex:function(){},getTabIndicatorClientRectAtIndex:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabDimensionsAtIndex:function(){return{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:function(){return-1},getFocusedTabIndex:function(){return-1},getIndexOfTabById:function(){return-1},getTabListLength:function(){return 0},notifyTabActivated:function(){}}},enumerable:!1,configurable:!0}),t.prototype.setUseAutomaticActivation=function(e){this.useAutomaticActivation=e},t.prototype.activateTab=function(e){var i=this.adapter.getPreviousActiveTabIndex();if(!(!this.indexIsInRange(e)||e===i)){var o;i!==-1&&(this.adapter.deactivateTabAtIndex(i),o=this.adapter.getTabIndicatorClientRectAtIndex(i)),this.adapter.activateTabAtIndex(e,o),this.scrollIntoView(e),this.adapter.notifyTabActivated(e)}},t.prototype.handleKeyDown=function(e){var i=this.getKeyFromEvent(e);if(i!==void 0)if(this.isActivationKey(i)||e.preventDefault(),this.useAutomaticActivation){if(this.isActivationKey(i))return;var o=this.determineTargetFromKey(this.adapter.getPreviousActiveTabIndex(),i);this.adapter.setActiveTab(o),this.scrollIntoView(o)}else{var a=this.adapter.getFocusedTabIndex();if(this.isActivationKey(i))this.adapter.setActiveTab(a);else{var o=this.determineTargetFromKey(a,i);this.adapter.focusTabAtIndex(o),this.scrollIntoView(o)}}},t.prototype.handleTabInteraction=function(e){this.adapter.setActiveTab(this.adapter.getIndexOfTabById(e.detail.tabId))},t.prototype.scrollIntoView=function(e){if(!!this.indexIsInRange(e)){if(e===0){this.adapter.scrollTo(0);return}if(e===this.adapter.getTabListLength()-1){this.adapter.scrollTo(this.adapter.getScrollContentWidth());return}if(this.isRTL()){this.scrollIntoViewImplRTL(e);return}this.scrollIntoViewImpl(e)}},t.prototype.determineTargetFromKey=function(e,i){var o=this.isRTL(),a=this.adapter.getTabListLength()-1,s=i===Uo.END_KEY,n=i===Uo.ARROW_LEFT_KEY&&!o||i===Uo.ARROW_RIGHT_KEY&&o,l=i===Uo.ARROW_RIGHT_KEY&&!o||i===Uo.ARROW_LEFT_KEY&&o,u=e;return s?u=a:n?u-=1:l?u+=1:u=0,u<0?u=a:u>a&&(u=0),u},t.prototype.calculateScrollIncrement=function(e,i,o,a){var s=this.adapter.getTabDimensionsAtIndex(i),n=s.contentLeft-o-a,l=s.contentRight-o,u=l-ku.EXTRA_SCROLL_AMOUNT,h=n+ku.EXTRA_SCROLL_AMOUNT;return i<e?Math.min(u,0):Math.max(h,0)},t.prototype.calculateScrollIncrementRTL=function(e,i,o,a,s){var n=this.adapter.getTabDimensionsAtIndex(i),l=s-n.contentLeft-o,u=s-n.contentRight-o-a,h=u+ku.EXTRA_SCROLL_AMOUNT,v=l-ku.EXTRA_SCROLL_AMOUNT;return i>e?Math.max(h,0):Math.min(v,0)},t.prototype.findAdjacentTabIndexClosestToEdge=function(e,i,o,a){var s=i.rootLeft-o,n=i.rootRight-o-a,l=s+n,u=s<0||l<0,h=n>0||l>0;return u?e-1:h?e+1:-1},t.prototype.findAdjacentTabIndexClosestToEdgeRTL=function(e,i,o,a,s){var n=s-i.rootLeft-a-o,l=s-i.rootRight-o,u=n+l,h=n>0||u>0,v=l<0||u<0;return h?e+1:v?e-1:-1},t.prototype.getKeyFromEvent=function(e){return Nf.has(e.key)?e.key:Uf.get(e.keyCode)},t.prototype.isActivationKey=function(e){return e===Uo.SPACE_KEY||e===Uo.ENTER_KEY},t.prototype.indexIsInRange=function(e){return e>=0&&e<this.adapter.getTabListLength()},t.prototype.isRTL=function(){return this.adapter.isRTL()},t.prototype.scrollIntoViewImpl=function(e){var i=this.adapter.getScrollPosition(),o=this.adapter.getOffsetWidth(),a=this.adapter.getTabDimensionsAtIndex(e),s=this.findAdjacentTabIndexClosestToEdge(e,a,i,o);if(!!this.indexIsInRange(s)){var n=this.calculateScrollIncrement(e,s,i,o);this.adapter.incrementScroll(n)}},t.prototype.scrollIntoViewImplRTL=function(e){var i=this.adapter.getScrollPosition(),o=this.adapter.getOffsetWidth(),a=this.adapter.getTabDimensionsAtIndex(e),s=this.adapter.getScrollContentWidth(),n=this.findAdjacentTabIndexClosestToEdgeRTL(e,a,i,o,s);if(!!this.indexIsInRange(n)){var l=this.calculateScrollIncrementRTL(e,n,i,o,s);this.adapter.incrementScroll(l)}},t}(ws);function wk(r){let t,e,i,o,a,s,n,l,u,h,v,d,p,_;const b=r[23].default,x=Ni(b,r,r[22],null);let E=[{class:o=Pn({[r[6]]:!0,"mdc-tab-scroller__scroll-content":!0})},{style:a=Object.entries(r[14]).map(C1).join(" ")},xi(r[16],"scrollContent$")],A={};for(let I=0;I<E.length;I+=1)A=cn(A,E[I]);let P=[{class:n=Pn({[r[4]]:!0,"mdc-tab-scroller__scroll-area":!0,...r[12]})},{style:l=Object.entries(r[13]).map(D1).join(" ")},xi(r[16],"scrollArea$")],D={};for(let I=0;I<P.length;I+=1)D=cn(D,P[I]);let R=[{class:h=Pn({[r[1]]:!0,"mdc-tab-scroller":!0,"mdc-tab-scroller--align-start":r[2]==="start","mdc-tab-scroller--align-end":r[2]==="end","mdc-tab-scroller--align-center":r[2]==="center",...r[11]})},Os(r[16],["scrollArea$","scrollContent$"])],S={};for(let I=0;I<R.length;I+=1)S=cn(S,R[I]);return{c(){t=_n("div"),e=_n("div"),i=_n("div"),x&&x.c(),Xn(i,A),Xn(e,D),Xn(t,S)},m(I,T){Er(I,t,T),En(t,e),En(e,i),x&&x.m(i,null),r[24](i),r[26](e),r[32](t),d=!0,p||(_=[ri(s=ma.call(null,i,r[5])),si(i,"transitionend",r[25]),ri(u=ma.call(null,e,r[3])),si(e,"wheel",r[27],{passive:!0}),si(e,"touchstart",r[28],{passive:!0}),si(e,"pointerdown",r[29]),si(e,"mousedown",r[30]),si(e,"keydown",r[31]),ri(v=ma.call(null,t,r[0])),ri(r[15].call(null,t))],p=!0)},p(I,T){x&&x.p&&(!d||T[0]&4194304)&&Hi(x,b,I,I[22],d?Ui(b,I[22],T,null):Vi(I[22]),null),Xn(i,A=li(E,[(!d||T[0]&64&&o!==(o=Pn({[I[6]]:!0,"mdc-tab-scroller__scroll-content":!0})))&&{class:o},(!d||T[0]&16384&&a!==(a=Object.entries(I[14]).map(C1).join(" ")))&&{style:a},T[0]&65536&&xi(I[16],"scrollContent$")])),s&&Ci(s.update)&&T[0]&32&&s.update.call(null,I[5]),Xn(e,D=li(P,[(!d||T[0]&4112&&n!==(n=Pn({[I[4]]:!0,"mdc-tab-scroller__scroll-area":!0,...I[12]})))&&{class:n},(!d||T[0]&8192&&l!==(l=Object.entries(I[13]).map(D1).join(" ")))&&{style:l},T[0]&65536&&xi(I[16],"scrollArea$")])),u&&Ci(u.update)&&T[0]&8&&u.update.call(null,I[3]),Xn(t,S=li(R,[(!d||T[0]&2054&&h!==(h=Pn({[I[1]]:!0,"mdc-tab-scroller":!0,"mdc-tab-scroller--align-start":I[2]==="start","mdc-tab-scroller--align-end":I[2]==="end","mdc-tab-scroller--align-center":I[2]==="center",...I[11]})))&&{class:h},T[0]&65536&&Os(I[16],["scrollArea$","scrollContent$"])])),v&&Ci(v.update)&&T[0]&1&&v.update.call(null,I[0])},i(I){d||(Kt(x,I),d=!0)},o(I){lr(x,I),d=!1},d(I){I&&Sr(t),x&&x.d(I),r[24](null),r[26](null),r[32](null),p=!1,Ma(_)}}}const C1=([r,t])=>`${r}: ${t};`,D1=([r,t])=>`${r}: ${t};`;function Tk(r,t,e){const i=["use","class","align","scrollArea$use","scrollArea$class","scrollContent$use","scrollContent$class","getScrollPosition","getScrollContentWidth","incrementScroll","scrollTo","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const{matches:n}=Ch,l=wa(oa());let{use:u=[]}=t,{class:h=""}=t,{align:v=void 0}=t,{scrollArea$use:d=[]}=t,{scrollArea$class:p=""}=t,{scrollContent$use:_=[]}=t,{scrollContent$class:b=""}=t,x,E,A,P,D={},R={},S={},I={};bo(()=>(e(8,E=new _k({eventTargetMatchesSelector:(Re,Ee)=>n(Re,Ee),addClass:T,removeClass:M,addScrollAreaClass:z,setScrollAreaStyleProperty:U,setScrollContentStyleProperty:F,getScrollContentStyleValue:V,setScrollAreaScrollLeft:Re=>e(9,A.scrollLeft=Re,A),getScrollAreaScrollLeft:()=>A.scrollLeft,getScrollContentOffsetWidth:()=>P.offsetWidth,getScrollAreaOffsetWidth:()=>A.offsetWidth,computeScrollAreaClientRect:()=>A.getBoundingClientRect(),computeScrollContentClientRect:()=>P.getBoundingClientRect(),computeHorizontalScrollbarHeight:()=>bk(document)})),E.init(),()=>{E.destroy()}));function T(Re){D[Re]||e(11,D[Re]=!0,D)}function M(Re){(!(Re in D)||D[Re])&&e(11,D[Re]=!1,D)}function z(Re){R[Re]||e(12,R[Re]=!0,R)}function U(Re,Ee){S[Re]!=Ee&&(Ee===""||Ee==null?(delete S[Re],e(13,S)):e(13,S[Re]=Ee,S))}function F(Re,Ee){I[Re]!=Ee&&(Ee===""||Ee==null?(delete I[Re],e(14,I)):e(14,I[Re]=Ee,I))}function V(Re){return Re in I?I[Re]:getComputedStyle(P).getPropertyValue(Re)}function j(){return E.getScrollPosition()}function H(){return P.offsetWidth}function Y(Re){E.incrementScroll(Re)}function J(Re){E.scrollTo(Re)}function ne(){return x}function q(Re){ci[Re?"unshift":"push"](()=>{P=Re,e(10,P)})}const we=Re=>E&&E.handleTransitionEnd(Re);function ee(Re){ci[Re?"unshift":"push"](()=>{A=Re,e(9,A)})}const X=()=>E&&E.handleInteraction(),re=()=>E&&E.handleInteraction(),de=()=>E&&E.handleInteraction(),me=()=>E&&E.handleInteraction(),xe=()=>E&&E.handleInteraction();function He(Re){ci[Re?"unshift":"push"](()=>{x=Re,e(7,x)})}return r.$$set=Re=>{t=cn(cn({},t),ga(Re)),e(16,o=ei(t,i)),"use"in Re&&e(0,u=Re.use),"class"in Re&&e(1,h=Re.class),"align"in Re&&e(2,v=Re.align),"scrollArea$use"in Re&&e(3,d=Re.scrollArea$use),"scrollArea$class"in Re&&e(4,p=Re.scrollArea$class),"scrollContent$use"in Re&&e(5,_=Re.scrollContent$use),"scrollContent$class"in Re&&e(6,b=Re.scrollContent$class),"$$scope"in Re&&e(22,s=Re.$$scope)},[u,h,v,d,p,_,b,x,E,A,P,D,R,S,I,l,o,j,H,Y,J,ne,s,a,q,we,ee,X,re,de,me,xe,He]}class Ak extends ki{constructor(t){super(),Mi(this,t,Tk,wk,_i,{use:0,class:1,align:2,scrollArea$use:3,scrollArea$class:4,scrollContent$use:5,scrollContent$class:6,getScrollPosition:17,getScrollContentWidth:18,incrementScroll:19,scrollTo:20,getElement:21},null,[-1,-1])}get getScrollPosition(){return this.$$.ctx[17]}get getScrollContentWidth(){return this.$$.ctx[18]}get incrementScroll(){return this.$$.ctx[19]}get scrollTo(){return this.$$.ctx[20]}get getElement(){return this.$$.ctx[21]}}function M1(r,t,e){const i=r.slice();return i[28]=t[e],i}const Sk=r=>({tab:r&4}),k1=r=>({tab:r[28]});function I1(r,t){let e,i;const o=t[20].default,a=Ni(o,t,t[23],k1);return{key:r,first:null,c(){e=ea(),a&&a.c(),this.first=e},m(s,n){Er(s,e,n),a&&a.m(s,n),i=!0},p(s,n){t=s,a&&a.p&&(!i||n&8388612)&&Hi(a,o,t,t[23],i?Ui(o,t[23],n,Sk):Vi(t[23]),k1)},i(s){i||(Kt(a,s),i=!0)},o(s){lr(a,s),i=!1},d(s){s&&Sr(e),a&&a.d(s)}}}function Ek(r){let t=[],e=new Map,i,o,a=r[2];const s=n=>n[3](n[28]);for(let n=0;n<a.length;n+=1){let l=M1(r,a,n),u=s(l);e.set(u,t[n]=I1(u,l))}return{c(){for(let n=0;n<t.length;n+=1)t[n].c();i=ea()},m(n,l){for(let u=0;u<t.length;u+=1)t[u].m(n,l);Er(n,i,l),o=!0},p(n,l){l&8388620&&(a=n[2],Ri(),t=K2(t,l,s,1,n,a,e,i.parentNode,X2,I1,i,M1),Fi())},i(n){if(!o){for(let l=0;l<a.length;l+=1)Kt(t[l]);o=!0}},o(n){for(let l=0;l<t.length;l+=1)lr(t[l]);o=!1},d(n){for(let l=0;l<t.length;l+=1)t[l].d(n);n&&Sr(i)}}}function Ck(r){let t,e,i,o,a,s,n;const l=[xi(r[10],"tabScroller$")];let u={$$slots:{default:[Ek]},$$scope:{ctx:r}};for(let d=0;d<l.length;d+=1)u=cn(u,l[d]);e=new Ak({props:u}),r[21](e);let h=[{class:i=Pn({[r[1]]:!0,"mdc-tab-bar":!0})},{role:"tablist"},Os(r[10],["tabScroller$"])],v={};for(let d=0;d<h.length;d+=1)v=cn(v,h[d]);return{c(){t=_n("div"),un(e.$$.fragment),Xn(t,v)},m(d,p){Er(d,t,p),on(e,t,null),r[22](t),a=!0,s||(n=[ri(o=ma.call(null,t,r[0])),ri(r[7].call(null,t)),si(t,"SMUITab:mount",r[8]),si(t,"SMUITab:unmount",r[9]),si(t,"SMUITab:interacted",function(){Ci(r[4]&&r[4].handleTabInteraction.bind(r[4]))&&(r[4]&&r[4].handleTabInteraction.bind(r[4])).apply(this,arguments)}),si(t,"keydown",function(){Ci(r[4]&&r[4].handleKeyDown.bind(r[4]))&&(r[4]&&r[4].handleKeyDown.bind(r[4])).apply(this,arguments)})],s=!0)},p(d,[p]){r=d;const _=p&1024?li(l,[pa(xi(r[10],"tabScroller$"))]):{};p&8388612&&(_.$$scope={dirty:p,ctx:r}),e.$set(_),Xn(t,v=li(h,[(!a||p&2&&i!==(i=Pn({[r[1]]:!0,"mdc-tab-bar":!0})))&&{class:i},{role:"tablist"},p&1024&&Os(r[10],["tabScroller$"])])),o&&Ci(o.update)&&p&1&&o.update.call(null,r[0])},i(d){a||(Kt(e.$$.fragment,d),a=!0)},o(d){lr(e.$$.fragment,d),a=!1},d(d){d&&Sr(t),r[21](null),sn(e),r[22](null),s=!1,Ma(n)}}}function Dk(r,t,e){const i=["use","class","tabs","key","focusOnActivate","focusOnProgrammatic","useAutomaticActivation","active","scrollIntoView","getElement"];let o=ei(t,i),{$$slots:a={},$$scope:s}=t;const n=wa(oa());let{use:l=[]}=t,{class:u=""}=t,{tabs:h=[]}=t,{key:v=Y=>Y}=t,{focusOnActivate:d=!0}=t,{focusOnProgrammatic:p=!1}=t,{useAutomaticActivation:_=!0}=t,{active:b=void 0}=t,x,E,A,P=h.indexOf(b),D={},R=new WeakMap,S=!1;wi("SMUI:tab:focusOnActivate",d),wi("SMUI:tab:initialActive",b),bo(()=>(e(4,E=new xk({scrollTo:Y=>A.scrollTo(Y),incrementScroll:Y=>A.incrementScroll(Y),getScrollPosition:()=>A.getScrollPosition(),getScrollContentWidth:()=>A.getScrollContentWidth(),getOffsetWidth:()=>V().offsetWidth,isRTL:()=>getComputedStyle(V()).getPropertyValue("direction")==="rtl",setActiveTab:Y=>{e(11,b=h[Y]),e(17,P=Y),E.activateTab(Y)},activateTabAtIndex:(Y,J)=>{var ne;return(ne=M(h[Y]))===null||ne===void 0?void 0:ne.activate(J,S)},deactivateTabAtIndex:Y=>{var J;return(J=M(h[Y]))===null||J===void 0?void 0:J.deactivate()},focusTabAtIndex:Y=>{var J;return(J=M(h[Y]))===null||J===void 0?void 0:J.focus()},getTabIndicatorClientRectAtIndex:Y=>{var J,ne;return(ne=(J=M(h[Y]))===null||J===void 0?void 0:J.computeIndicatorClientRect())!==null&&ne!==void 0?ne:new DOMRect},getTabDimensionsAtIndex:Y=>{var J,ne;return(ne=(J=M(h[Y]))===null||J===void 0?void 0:J.computeDimensions())!==null&&ne!==void 0?ne:{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:()=>{var Y;for(let J=0;J<h.length;J++)if(!((Y=M(h[J]))===null||Y===void 0)&&Y.active)return J;return-1},getFocusedTabIndex:()=>{const Y=h.map(ne=>{var q;return(q=M(ne))===null||q===void 0?void 0:q.element}),J=document.activeElement;return Y.indexOf(J)},getIndexOfTabById:Y=>h.indexOf(Y),getTabListLength:()=>h.length,notifyTabActivated:Y=>Di(V(),"SMUITabBar:activated",{index:Y},void 0,!0)})),E.init(),()=>{E.destroy()}));function I(Y){const J=Y.detail;z(J.tabId,J)}function T(Y){const J=Y.detail;U(J.tabId)}function M(Y){return Y instanceof Object?R.get(Y):D[Y]}function z(Y,J){Y instanceof Object?(R.set(Y,J),e(19,R)):(e(18,D[Y]=J,D),e(18,D))}function U(Y){Y instanceof Object?(R.delete(Y),e(19,R)):(delete D[Y],e(18,D))}function F(Y){E.scrollIntoView(Y)}function V(){return x}function j(Y){ci[Y?"unshift":"push"](()=>{A=Y,e(6,A)})}function H(Y){ci[Y?"unshift":"push"](()=>{x=Y,e(5,x)})}return r.$$set=Y=>{t=cn(cn({},t),ga(Y)),e(10,o=ei(t,i)),"use"in Y&&e(0,l=Y.use),"class"in Y&&e(1,u=Y.class),"tabs"in Y&&e(2,h=Y.tabs),"key"in Y&&e(3,v=Y.key),"focusOnActivate"in Y&&e(12,d=Y.focusOnActivate),"focusOnProgrammatic"in Y&&e(13,p=Y.focusOnProgrammatic),"useAutomaticActivation"in Y&&e(14,_=Y.useAutomaticActivation),"active"in Y&&e(11,b=Y.active),"$$scope"in Y&&e(23,s=Y.$$scope)},r.$$.update=()=>{if(r.$$.dirty&141332&&b!==h[P]&&(e(17,P=h.indexOf(b)),E&&(S=!p,E.activateTab(P),S=!1)),r.$$.dirty&917508&&h.length){const Y=h[0]instanceof Object?R.get(h[0]):D[h[0]];Y&&Y.forceAccessible(P===-1)}r.$$.dirty&16400&&E&&E.setUseAutomaticActivation(_)},[l,u,h,v,E,x,A,n,I,T,o,b,d,p,_,F,V,P,D,R,a,j,H,s]}class Mk extends ki{constructor(t){super(),Mi(this,t,Dk,Ck,_i,{use:0,class:1,tabs:2,key:3,focusOnActivate:12,focusOnProgrammatic:13,useAutomaticActivation:14,active:11,scrollIntoView:15,getElement:16})}get scrollIntoView(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}function L1(r,t,e){const i=r.slice();return i[13]=t[e],i}function P1(r,t,e){const i=r.slice();return i[16]=t[e],i}function R1(r,t,e){const i=r.slice();return i[13]=t[e],i}function F1(r,t,e){const i=r.slice();return i[16]=t[e],i}function O1(r,t,e){const i=r.slice();return i[13]=t[e],i}function kk(r){let t=r[25]+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&33554432&&t!==(t=i[25]+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function Ik(r){let t,e;return t=new Xb({props:{$$slots:{default:[kk]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&100663296&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function Lk(r){let t,e;return t=new pk({props:{tab:r[25],minWidth:!0,$$slots:{default:[Ik]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&33554432&&(a.tab=i[25]),o&100663296&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function z1(r){let t,e=r[1].size+"",i,o,a,s,n=Ul[r[2]]+"",l,u,h,v,d;return v=new qp({props:{threeLine:!0,nonInteractive:!0,$$slots:{default:[Hk]},$$scope:{ctx:r}}}),{c(){t=_n("h3"),i=oi(e),o=oi(" site(s) selected"),a=Rn(),s=_n("h3"),l=oi(n),u=oi(":"),h=Rn(),un(v.$$.fragment),nn(t,"class","svelte-sfyjhz"),nn(s,"class","svelte-sfyjhz")},m(p,_){Er(p,t,_),En(t,i),En(t,o),Er(p,a,_),Er(p,s,_),En(s,l),En(s,u),Er(p,h,_),on(v,p,_),d=!0},p(p,_){(!d||_&2)&&e!==(e=p[1].size+"")&&uo(i,e),(!d||_&4)&&n!==(n=Ul[p[2]]+"")&&uo(l,n);const b={};_&67108870&&(b.$$scope={dirty:_,ctx:p}),v.$set(b)},i(p){d||(Kt(v.$$.fragment,p),d=!0)},o(p){lr(v.$$.fragment,p),d=!1},d(p){p&&Sr(t),p&&Sr(a),p&&Sr(s),p&&Sr(h),sn(v,p)}}}function Pk(r){let t,e=r[13]+"",i,o,a;function s(){return r[10](r[13])}return{c(){t=_n("a"),i=oi(e),nn(t,"class","pointer svelte-sfyjhz")},m(n,l){Er(n,t,l),En(t,i),o||(a=si(t,"click",s),o=!0)},p(n,l){r=n,l&2&&e!==(e=r[13]+"")&&uo(i,e)},d(n){n&&Sr(t),o=!1,a()}}}function Rk(r){let t=rc(r[13]).name+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&2&&t!==(t=rc(i[13]).name+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function Fk(r){let t,e;return t=new Pu({props:{$$slots:{default:[zk]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&67108870&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function Ok(r){let t,e;return t=new Pu({props:{$$slots:{default:[Bk]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&67108870&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function zk(r){let t=r[6](r[13],r[2])+"",e,i,o,a=r[4](r[13],r[2])+"",s;return{c(){e=oi(t),i=oi(": "),o=_n("b"),s=oi(a)},m(n,l){Er(n,e,l),Er(n,i,l),Er(n,o,l),En(o,s)},p(n,l){l&6&&t!==(t=n[6](n[13],n[2])+"")&&uo(e,t),l&6&&a!==(a=n[4](n[13],n[2])+"")&&uo(s,a)},d(n){n&&Sr(e),n&&Sr(i),n&&Sr(o)}}}function Bk(r){let t,e=r[4](r[13],r[2])+"",i;return{c(){t=_n("b"),i=oi(e)},m(o,a){Er(o,t,a),En(t,i)},p(o,a){a&6&&e!==(e=o[4](o[13],o[2])+"")&&uo(i,e)},d(o){o&&Sr(t)}}}function Nk(r){let t,e,i,o,a,s,n,l,u;t=new Dh({props:{$$slots:{default:[Pk]},$$scope:{ctx:r}}}),i=new Pu({props:{$$slots:{default:[Rk]},$$scope:{ctx:r}}});const h=[Ok,Fk],v=[];function d(p,_){return _&6&&(a=null),a==null&&(a=!!(p[2]==="datainfo"||p[3](p[13],mh))),a?0:1}return s=d(r,-1),n=v[s]=h[s](r),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment),o=Rn(),n.c(),l=ea()},m(p,_){on(t,p,_),Er(p,e,_),on(i,p,_),Er(p,o,_),v[s].m(p,_),Er(p,l,_),u=!0},p(p,_){const b={};_&67108866&&(b.$$scope={dirty:_,ctx:p}),t.$set(b);const x={};_&67108866&&(x.$$scope={dirty:_,ctx:p}),i.$set(x);let E=s;s=d(p,_),s===E?v[s].p(p,_):(Ri(),lr(v[E],1,1,()=>{v[E]=null}),Fi(),n=v[s],n?n.p(p,_):(n=v[s]=h[s](p),n.c()),Kt(n,1),n.m(l.parentNode,l))},i(p){u||(Kt(t.$$.fragment,p),Kt(i.$$.fragment,p),Kt(n),u=!0)},o(p){lr(t.$$.fragment,p),lr(i.$$.fragment,p),lr(n),u=!1},d(p){sn(t,p),p&&Sr(e),sn(i,p),p&&Sr(o),v[s].d(p),p&&Sr(l)}}}function Uk(r){let t,e;return t=new em({props:{$$slots:{default:[Nk]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&67108870&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function B1(r){let t,e,i,o,a;return e=new Rf({props:{$$slots:{default:[Uk]},$$scope:{ctx:r}}}),{c(){t=_n("div"),un(e.$$.fragment),i=Rn()},m(s,n){Er(s,t,n),on(e,t,null),En(t,i),a=!0},p(s,n){const l={};n&67108870&&(l.$$scope={dirty:n,ctx:s}),e.$set(l)},i(s){a||(Kt(e.$$.fragment,s),ic(()=>{o||(o=lu(t,wh,{},!0)),o.run(1)}),a=!0)},o(s){lr(e.$$.fragment,s),o||(o=lu(t,wh,{},!1)),o.run(0),a=!1},d(s){s&&Sr(t),sn(e),s&&o&&o.end()}}}function Hk(r){let t,e,i=Array.from(r[1]).reverse(),o=[];for(let s=0;s<i.length;s+=1)o[s]=B1(O1(r,i,s));const a=s=>lr(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ea()},m(s,n){for(let l=0;l<o.length;l+=1)o[l].m(s,n);Er(s,t,n),e=!0},p(s,n){if(n&350){i=Array.from(s[1]).reverse();let l;for(l=0;l<i.length;l+=1){const u=O1(s,i,l);o[l]?(o[l].p(u,n),Kt(o[l],1)):(o[l]=B1(u),o[l].c(),Kt(o[l],1),o[l].m(t.parentNode,t))}for(Ri(),l=i.length;l<o.length;l+=1)a(l);Fi()}},i(s){if(!e){for(let n=0;n<i.length;n+=1)Kt(o[n]);e=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)lr(o[n]);e=!1},d(s){Bf(o,s),s&&Sr(t)}}}function N1(r){let t,e,i=Array.from(r[1]).reverse(),o=[];for(let s=0;s<i.length;s+=1)o[s]=H1(R1(r,i,s));const a=s=>lr(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ea()},m(s,n){for(let l=0;l<o.length;l+=1)o[l].m(s,n);Er(s,t,n),e=!0},p(s,n){if(n&282){i=Array.from(s[1]).reverse();let l;for(l=0;l<i.length;l+=1){const u=R1(s,i,l);o[l]?(o[l].p(u,n),Kt(o[l],1)):(o[l]=H1(u),o[l].c(),Kt(o[l],1),o[l].m(t.parentNode,t))}for(Ri(),l=i.length;l<o.length;l+=1)a(l);Fi()}},i(s){if(!e){for(let n=0;n<i.length;n+=1)Kt(o[n]);e=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)lr(o[n]);e=!1},d(s){Bf(o,s),s&&Sr(t)}}}function Vk(r){let t,e=r[13]+"",i,o,a;function s(){return r[11](r[13])}return{c(){t=_n("a"),i=oi(e),nn(t,"class","pointer svelte-sfyjhz")},m(n,l){Er(n,t,l),En(t,i),o||(a=si(t,"click",s),o=!0)},p(n,l){r=n,l&2&&e!==(e=r[13]+"")&&uo(i,e)},d(n){n&&Sr(t),o=!1,a()}}}function Gk(r){let t=rc(r[13]).name+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&2&&t!==(t=rc(i[13]).name+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function Zk(r){let t,e;return t=new Pu({props:{$$slots:{default:[jk]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&67108866&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function Wk(r){let t,e;return t=new Pu({props:{$$slots:{default:[Yk]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&67108866&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function jk(r){let t=Ul[r[16]]+"",e,i,o,a=r[4](r[13],r[16])+"",s;return{c(){e=oi(t),i=oi(": "),o=_n("b"),s=oi(a)},m(n,l){Er(n,e,l),Er(n,i,l),Er(n,o,l),En(o,s)},p(n,l){l&2&&a!==(a=n[4](n[13],n[16])+"")&&uo(s,a)},d(n){n&&Sr(e),n&&Sr(i),n&&Sr(o)}}}function Yk(r){let t,e=r[4](r[13],r[16])+"",i;return{c(){t=_n("b"),i=oi(e)},m(o,a){Er(o,t,a),En(t,i)},p(o,a){a&2&&e!==(e=o[4](o[13],o[16])+"")&&uo(i,e)},d(o){o&&Sr(t)}}}function U1(r){let t,e,i,o,a;const s=[Wk,Zk],n=[];function l(u,h){return h&2&&(t=null),u[16]==="datainfo"?0:(t==null&&(t=!u[3](u[13],u[16])),t?1:-1)}return~(e=l(r,-1))&&(i=n[e]=s[e](r)),{c(){i&&i.c(),o=ea()},m(u,h){~e&&n[e].m(u,h),Er(u,o,h),a=!0},p(u,h){let v=e;e=l(u,h),e===v?~e&&n[e].p(u,h):(i&&(Ri(),lr(n[v],1,1,()=>{n[v]=null}),Fi()),~e?(i=n[e],i?i.p(u,h):(i=n[e]=s[e](u),i.c()),Kt(i,1),i.m(o.parentNode,o)):i=null)},i(u){a||(Kt(i),a=!0)},o(u){lr(i),a=!1},d(u){~e&&n[e].d(u),u&&Sr(o)}}}function H1(r){let t,e,i,o,a,s,n,l,u;e=new Dh({props:{$$slots:{default:[Vk]},$$scope:{ctx:r}}}),o=new Pu({props:{$$slots:{default:[Gk]},$$scope:{ctx:r}}});let h=Object.keys(Ul),v=[];for(let p=0;p<h.length;p+=1)v[p]=U1(F1(r,h,p));const d=p=>lr(v[p],1,1,()=>{v[p]=null});return{c(){t=_n("div"),un(e.$$.fragment),i=Rn(),un(o.$$.fragment),a=Rn();for(let p=0;p<v.length;p+=1)v[p].c();n=Rn(),l=_n("hr")},m(p,_){Er(p,t,_),on(e,t,null),En(t,i),on(o,t,null),En(t,a);for(let b=0;b<v.length;b+=1)v[b].m(t,null);Er(p,n,_),Er(p,l,_),u=!0},p(p,_){const b={};_&67108866&&(b.$$scope={dirty:_,ctx:p}),e.$set(b);const x={};if(_&67108866&&(x.$$scope={dirty:_,ctx:p}),o.$set(x),_&26){h=Object.keys(Ul);let E;for(E=0;E<h.length;E+=1){const A=F1(p,h,E);v[E]?(v[E].p(A,_),Kt(v[E],1)):(v[E]=U1(A),v[E].c(),Kt(v[E],1),v[E].m(t,null))}for(Ri(),E=h.length;E<v.length;E+=1)d(E);Fi()}},i(p){if(!u){Kt(e.$$.fragment,p),Kt(o.$$.fragment,p);for(let _=0;_<h.length;_+=1)Kt(v[_]);ic(()=>{s||(s=lu(t,wh,{},!0)),s.run(1)}),u=!0}},o(p){lr(e.$$.fragment,p),lr(o.$$.fragment,p),v=v.filter(Boolean);for(let _=0;_<v.length;_+=1)lr(v[_]);s||(s=lu(t,wh,{},!1)),s.run(0),u=!1},d(p){p&&Sr(t),sn(e),sn(o),Bf(v,p),p&&s&&s.end(),p&&Sr(n),p&&Sr(l)}}}function V1(r){let t,e,i=Array.from(r[1]).reverse(),o=[];for(let s=0;s<i.length;s+=1)o[s]=W1(L1(r,i,s));const a=s=>lr(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ea()},m(s,n){for(let l=0;l<o.length;l+=1)o[l].m(s,n);Er(s,t,n),e=!0},p(s,n){if(n&426){i=Array.from(s[1]).reverse();let l;for(l=0;l<i.length;l+=1){const u=L1(s,i,l);o[l]?(o[l].p(u,n),Kt(o[l],1)):(o[l]=W1(u),o[l].c(),Kt(o[l],1),o[l].m(t.parentNode,t))}for(Ri(),l=i.length;l<o.length;l+=1)a(l);Fi()}},i(s){if(!e){for(let n=0;n<i.length;n+=1)Kt(o[n]);e=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)lr(o[n]);e=!1},d(s){Bf(o,s),s&&Sr(t)}}}function Xk(r){let t,e=r[13]+"",i,o,a;function s(){return r[12](r[13])}return{c(){t=_n("a"),i=oi(e),nn(t,"class","pointer svelte-sfyjhz")},m(n,l){Er(n,t,l),En(t,i),o||(a=si(t,"click",s),o=!0)},p(n,l){r=n,l&2&&e!==(e=r[13]+"")&&uo(i,e)},d(n){n&&Sr(t),o=!1,a()}}}function Kk(r){let t=rc(r[13]).name+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&2&&t!==(t=rc(i[13]).name+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function Jk(r){let t=r[7](r[13])+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&2&&t!==(t=i[7](i[13])+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function $k(r){let t;return{c(){t=oi("Series")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function Qk(r){let t;return{c(){t=oi("Min")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function qk(r){let t;return{c(){t=oi("Max")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function eI(r){let t;return{c(){t=oi("Mean")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function tI(r){let t,e,i,o,a,s,n,l;return t=new df({props:{$$slots:{default:[$k]},$$scope:{ctx:r}}}),i=new df({props:{numeric:!0,$$slots:{default:[Qk]},$$scope:{ctx:r}}}),a=new df({props:{numeric:!0,$$slots:{default:[qk]},$$scope:{ctx:r}}}),n=new df({props:{numeric:!0,$$slots:{default:[eI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment),o=Rn(),un(a.$$.fragment),s=Rn(),un(n.$$.fragment)},m(u,h){on(t,u,h),Er(u,e,h),on(i,u,h),Er(u,o,h),on(a,u,h),Er(u,s,h),on(n,u,h),l=!0},p(u,h){const v={};h&67108864&&(v.$$scope={dirty:h,ctx:u}),t.$set(v);const d={};h&67108864&&(d.$$scope={dirty:h,ctx:u}),i.$set(d);const p={};h&67108864&&(p.$$scope={dirty:h,ctx:u}),a.$set(p);const _={};h&67108864&&(_.$$scope={dirty:h,ctx:u}),n.$set(_)},i(u){l||(Kt(t.$$.fragment,u),Kt(i.$$.fragment,u),Kt(a.$$.fragment,u),Kt(n.$$.fragment,u),l=!0)},o(u){lr(t.$$.fragment,u),lr(i.$$.fragment,u),lr(a.$$.fragment,u),lr(n.$$.fragment,u),l=!1},d(u){sn(t,u),u&&Sr(e),sn(i,u),u&&Sr(o),sn(a,u),u&&Sr(s),sn(n,u)}}}function rI(r){let t,e;return t=new tx({props:{$$slots:{default:[tI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&67108864&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function G1(r){let t,e;return t=new tx({props:{$$slots:{default:[sI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&67108866&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function nI(r){let t=r[16]+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p:qi,d(i){i&&Sr(e)}}}function iI(r){let t=r[5](r[13],r[16]).min()+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&2&&t!==(t=i[5](i[13],i[16]).min()+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function aI(r){let t=r[5](r[13],r[16]).max()+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&2&&t!==(t=i[5](i[13],i[16]).max()+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function oI(r){let t=gy(r[16],r[5](r[13],r[16]).mean())+"",e;return{c(){e=oi(t)},m(i,o){Er(i,e,o)},p(i,o){o&2&&t!==(t=gy(i[16],i[5](i[13],i[16]).mean())+"")&&uo(e,t)},d(i){i&&Sr(e)}}}function sI(r){let t,e,i,o,a,s,n,l,u;return t=new df({props:{$$slots:{default:[nI]},$$scope:{ctx:r}}}),i=new df({props:{numeric:!0,$$slots:{default:[iI]},$$scope:{ctx:r}}}),a=new df({props:{numeric:!0,$$slots:{default:[aI]},$$scope:{ctx:r}}}),n=new df({props:{numeric:!0,$$slots:{default:[oI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment),o=Rn(),un(a.$$.fragment),s=Rn(),un(n.$$.fragment),l=Rn()},m(h,v){on(t,h,v),Er(h,e,v),on(i,h,v),Er(h,o,v),on(a,h,v),Er(h,s,v),on(n,h,v),Er(h,l,v),u=!0},p(h,v){const d={};v&67108864&&(d.$$scope={dirty:v,ctx:h}),t.$set(d);const p={};v&67108866&&(p.$$scope={dirty:v,ctx:h}),i.$set(p);const _={};v&67108866&&(_.$$scope={dirty:v,ctx:h}),a.$set(_);const b={};v&67108866&&(b.$$scope={dirty:v,ctx:h}),n.$set(b)},i(h){u||(Kt(t.$$.fragment,h),Kt(i.$$.fragment,h),Kt(a.$$.fragment,h),Kt(n.$$.fragment,h),u=!0)},o(h){lr(t.$$.fragment,h),lr(i.$$.fragment,h),lr(a.$$.fragment,h),lr(n.$$.fragment,h),u=!1},d(h){sn(t,h),h&&Sr(e),sn(i,h),h&&Sr(o),sn(a,h),h&&Sr(s),sn(n,h),h&&Sr(l)}}}function Z1(r){let t=r[16]!=="datainfo"&&!r[3](r[13],r[16]),e,i,o=t&&G1(r);return{c(){o&&o.c(),e=ea()},m(a,s){o&&o.m(a,s),Er(a,e,s),i=!0},p(a,s){s&2&&(t=a[16]!=="datainfo"&&!a[3](a[13],a[16])),t?o?(o.p(a,s),s&2&&Kt(o,1)):(o=G1(a),o.c(),Kt(o,1),o.m(e.parentNode,e)):o&&(Ri(),lr(o,1,1,()=>{o=null}),Fi())},i(a){i||(Kt(o),i=!0)},o(a){lr(o),i=!1},d(a){o&&o.d(a),a&&Sr(e)}}}function lI(r){let t,e,i=Object.keys(Ul),o=[];for(let s=0;s<i.length;s+=1)o[s]=Z1(P1(r,i,s));const a=s=>lr(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ea()},m(s,n){for(let l=0;l<o.length;l+=1)o[l].m(s,n);Er(s,t,n),e=!0},p(s,n){if(n&42){i=Object.keys(Ul);let l;for(l=0;l<i.length;l+=1){const u=P1(s,i,l);o[l]?(o[l].p(u,n),Kt(o[l],1)):(o[l]=Z1(u),o[l].c(),Kt(o[l],1),o[l].m(t.parentNode,t))}for(Ri(),l=i.length;l<o.length;l+=1)a(l);Fi()}},i(s){if(!e){for(let n=0;n<i.length;n+=1)Kt(o[n]);e=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)lr(o[n]);e=!1},d(s){Bf(o,s),s&&Sr(t)}}}function uI(r){let t,e,i,o;return t=new H4({props:{$$slots:{default:[rI]},$$scope:{ctx:r}}}),i=new Z4({props:{$$slots:{default:[lI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment)},m(a,s){on(t,a,s),Er(a,e,s),on(i,a,s),o=!0},p(a,s){const n={};s&67108864&&(n.$$scope={dirty:s,ctx:a}),t.$set(n);const l={};s&67108866&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){o||(Kt(t.$$.fragment,a),Kt(i.$$.fragment,a),o=!0)},o(a){lr(t.$$.fragment,a),lr(i.$$.fragment,a),o=!1},d(a){sn(t,a),a&&Sr(e),sn(i,a)}}}function W1(r){let t,e,i,o,a,s,n,l,u,h,v;return e=new Dh({props:{$$slots:{default:[Xk]},$$scope:{ctx:r}}}),o=new Pu({props:{$$slots:{default:[Kk]},$$scope:{ctx:r}}}),s=new Pu({props:{$$slots:{default:[Jk]},$$scope:{ctx:r}}}),l=new B4({props:{"table$aria-label":"People list",style:"max-width: 100%;",$$slots:{default:[uI]},$$scope:{ctx:r}}}),{c(){t=_n("div"),un(e.$$.fragment),i=Rn(),un(o.$$.fragment),a=Rn(),un(s.$$.fragment),n=Rn(),un(l.$$.fragment),u=Rn()},m(d,p){Er(d,t,p),on(e,t,null),En(t,i),on(o,t,null),En(t,a),on(s,t,null),En(t,n),on(l,t,null),En(t,u),v=!0},p(d,p){const _={};p&67108866&&(_.$$scope={dirty:p,ctx:d}),e.$set(_);const b={};p&67108866&&(b.$$scope={dirty:p,ctx:d}),o.$set(b);const x={};p&67108866&&(x.$$scope={dirty:p,ctx:d}),s.$set(x);const E={};p&67108866&&(E.$$scope={dirty:p,ctx:d}),l.$set(E)},i(d){v||(Kt(e.$$.fragment,d),Kt(o.$$.fragment,d),Kt(s.$$.fragment,d),Kt(l.$$.fragment,d),ic(()=>{h||(h=lu(t,wh,{},!0)),h.run(1)}),v=!0)},o(d){lr(e.$$.fragment,d),lr(o.$$.fragment,d),lr(s.$$.fragment,d),lr(l.$$.fragment,d),h||(h=lu(t,wh,{},!1)),h.run(0),v=!1},d(d){d&&Sr(t),sn(e),sn(o),sn(s),sn(l),d&&h&&h.end()}}}function cI(r){let t,e,i,o,a,s,n,l,u,h,v;o=new md({});function d(E){r[9](E)}let p={tabs:["Selected","Last","Statistics"],$$slots:{default:[Lk,({tab:E})=>({25:E}),({tab:E})=>E?33554432:0]},$$scope:{ctx:r}};r[0]!==void 0&&(p.active=r[0]),s=new Mk({props:p}),ci.push(()=>Ah(s,"active",d));let _=r[0]==="Selected"&&z1(r),b=r[0]==="Last"&&N1(r),x=r[0]==="Statistics"&&V1(r);return{c(){t=_n("div"),e=_n("h2"),e.textContent="Data Table",i=Rn(),un(o.$$.fragment),a=Rn(),un(s.$$.fragment),l=Rn(),_&&_.c(),u=Rn(),b&&b.c(),h=Rn(),x&&x.c(),nn(t,"id","data-table-content"),nn(t,"class","svelte-sfyjhz")},m(E,A){Er(E,t,A),En(t,e),En(t,i),on(o,t,null),En(t,a),on(s,t,null),En(t,l),_&&_.m(t,null),En(t,u),b&&b.m(t,null),En(t,h),x&&x.m(t,null),v=!0},p(E,[A]){const P={};A&100663296&&(P.$$scope={dirty:A,ctx:E}),!n&&A&1&&(n=!0,P.active=E[0],Th(()=>n=!1)),s.$set(P),E[0]==="Selected"?_?(_.p(E,A),A&1&&Kt(_,1)):(_=z1(E),_.c(),Kt(_,1),_.m(t,u)):_&&(Ri(),lr(_,1,1,()=>{_=null}),Fi()),E[0]==="Last"?b?(b.p(E,A),A&1&&Kt(b,1)):(b=N1(E),b.c(),Kt(b,1),b.m(t,h)):b&&(Ri(),lr(b,1,1,()=>{b=null}),Fi()),E[0]==="Statistics"?x?(x.p(E,A),A&1&&Kt(x,1)):(x=V1(E),x.c(),Kt(x,1),x.m(t,null)):x&&(Ri(),lr(x,1,1,()=>{x=null}),Fi())},i(E){v||(Kt(o.$$.fragment,E),Kt(s.$$.fragment,E),Kt(_),Kt(b),Kt(x),v=!0)},o(E){lr(o.$$.fragment,E),lr(s.$$.fragment,E),lr(_),lr(b),lr(x),v=!1},d(E){E&&Sr(t),sn(o),sn(s),_&&_.d(),b&&b.d(),x&&x.d()}}}function tv(r,t=!1){const e=r.toISOString();return t?e.slice(0,10):e.slice(0,10)+" "+e.slice(11,16)}function fI(r,t,e){let i,o;Ei(r,Ff,x=>e(1,i=x)),Ei(r,mh,x=>e(2,o=x));function a(x,E){return gl.getValue(x,E)===void 0}function s(x,E){const A=gl.getValue(x,E);if(console.log(A),A===void 0)return"n/a";const P=Ub[E]||"";return P.length>0?A+` ${P}`:A}function n(x,E){const A=gl.getDframe(x).getSeries(E);return E==="temp"&&console.log(A),new qa(A.toArray())}function l(x,E){return gl.getValue(x,E)===void 0?"n/a":tv(new Date(gl.getValueDate(x,E)))}function u(x){const E=gl.getDframe(x).getIndex(),A=E.toArray(),P=tv(new Date(A[0]),!0),D=tv(new Date(E.last()),!0);return`${A.length} observations ${P} to ${D}`}function h(x){const E=rc(x);let A=-.05;window.innerWidth<1024&&(A=-.065),Bv(O_).setView([E.lat,E.lon+A],12)}let v="Statistics";function d(x){v=x,e(0,v)}return[v,i,o,a,s,n,l,u,h,d,x=>h(x),x=>h(x),x=>h(x)]}class hI extends ki{constructor(t){super(),Mi(this,t,fI,cI,_i,{})}}function j1(r){let t,e,i,o;return e=new hI({}),{c(){t=_n("div"),un(e.$$.fragment),nn(t,"id","data-table"),nn(t,"class","elevation svelte-1dw20aq"),Do(t,"width",pI+"px"),Do(t,"height",r[0]+"px")},m(a,s){Er(a,t,s),on(e,t,null),o=!0},p(a,s){(!o||s&1)&&Do(t,"height",a[0]+"px")},i(a){o||(Kt(e.$$.fragment,a),ic(()=>{i||(i=lu(t,xh,{x:-200,duration:400},!0)),i.run(1)}),o=!0)},o(a){lr(e.$$.fragment,a),i||(i=lu(t,xh,{x:-200,duration:400},!1)),i.run(0),o=!1},d(a){a&&Sr(t),sn(e),a&&i&&i.end()}}}function dI(r){let t,e,i=r[1]&&j1(r);return{c(){i&&i.c(),t=ea()},m(o,a){i&&i.m(o,a),Er(o,t,a),e=!0},p(o,[a]){o[1]?i?(i.p(o,a),a&2&&Kt(i,1)):(i=j1(o),i.c(),Kt(i,1),i.m(t.parentNode,t)):i&&(Ri(),lr(i,1,1,()=>{i=null}),Fi())},i(o){e||(Kt(i),e=!0)},o(o){lr(i),e=!1},d(o){i&&i.d(o),o&&Sr(t)}}}let pI=392;function mI(r,t,e){let i,o,a,s;Ei(r,qv,l=>e(2,i=l)),Ei(r,zc,l=>e(3,o=l)),Ei(r,Df,l=>e(4,a=l)),Ei(r,td,l=>e(1,s=l));let n=200;return r.$$.update=()=>{r.$$.dirty&28&&(a||o?e(0,n=i-296):e(0,n=i))},[n,s,i,o,a]}class vI extends ki{constructor(t){super(),Mi(this,t,mI,dI,_i,{})}}function np(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ix={exports:{}};(function(r,t){(function(e){r.exports=e()})(function(){return function(){function e(i,o,a){function s(u,h){if(!o[u]){if(!i[u]){var v=typeof np=="function"&&np;if(!h&&v)return v(u,!0);if(n)return n(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var p=o[u]={exports:{}};i[u][0].call(p.exports,function(_){var b=i[u][1][_];return s(b||_)},p,p.exports,e,i,o,a)}return o[u].exports}for(var n=typeof np=="function"&&np,l=0;l<a.length;l++)s(a[l]);return s}return e}()({1:[function(e,i,o){var a=e("../src/lib"),s={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var n in s){var l=n.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(l,s[n])}},{"../src/lib":244}],2:[function(e,i,o){i.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":395}],3:[function(e,i,o){i.exports=e("../src/traces/bar")},{"../src/traces/bar":345}],4:[function(e,i,o){i.exports=e("../src/components/calendars")},{"../src/components/calendars":101}],5:[function(e,i,o){i.exports=e("../src/core")},{"../src/core":226}],6:[function(e,i,o){i.exports=e("../src/transforms/filter")},{"../src/transforms/filter":396}],7:[function(e,i,o){i.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":397}],8:[function(e,i,o){var a=e("./core");a.register([e("./bar"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),i.exports=a},{"./aggregate":2,"./bar":3,"./calendars":4,"./core":5,"./filter":6,"./groupby":7,"./pie":9,"./sort":10}],9:[function(e,i,o){i.exports=e("../src/traces/pie")},{"../src/traces/pie":360}],10:[function(e,i,o){i.exports=e("../src/transforms/sort")},{"../src/transforms/sort":399}],11:[function(e,i,o){(function(){var a={version:"3.8.0"},s=[].slice,n=function(C){return s.call(C)},l=self.document;function u(C){return C&&(C.ownerDocument||C.document||C).documentElement}function h(C){return C&&(C.ownerDocument&&C.ownerDocument.defaultView||C.document&&C||C.defaultView)}if(l)try{n(l.documentElement.childNodes)[0].nodeType}catch{n=function(W){for(var se=W.length,ge=new Array(se);se--;)ge[se]=W[se];return ge}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch{var v=this.Element.prototype,d=v.setAttribute,p=v.setAttributeNS,_=this.CSSStyleDeclaration.prototype,b=_.setProperty;v.setAttribute=function(W,se){d.call(this,W,se+"")},v.setAttributeNS=function(W,se,ge){p.call(this,W,se,ge+"")},_.setProperty=function(W,se,ge){b.call(this,W,se+"",ge)}}a.ascending=x;function x(C,W){return C<W?-1:C>W?1:C>=W?0:NaN}a.descending=function(C,W){return W<C?-1:W>C?1:W>=C?0:NaN},a.min=function(C,W){var se=-1,ge=C.length,be,Ce;if(arguments.length===1){for(;++se<ge;)if((Ce=C[se])!=null&&Ce>=Ce){be=Ce;break}for(;++se<ge;)(Ce=C[se])!=null&&be>Ce&&(be=Ce)}else{for(;++se<ge;)if((Ce=W.call(C,C[se],se))!=null&&Ce>=Ce){be=Ce;break}for(;++se<ge;)(Ce=W.call(C,C[se],se))!=null&&be>Ce&&(be=Ce)}return be},a.max=function(C,W){var se=-1,ge=C.length,be,Ce;if(arguments.length===1){for(;++se<ge;)if((Ce=C[se])!=null&&Ce>=Ce){be=Ce;break}for(;++se<ge;)(Ce=C[se])!=null&&Ce>be&&(be=Ce)}else{for(;++se<ge;)if((Ce=W.call(C,C[se],se))!=null&&Ce>=Ce){be=Ce;break}for(;++se<ge;)(Ce=W.call(C,C[se],se))!=null&&Ce>be&&(be=Ce)}return be},a.extent=function(C,W){var se=-1,ge=C.length,be,Ce,Xe;if(arguments.length===1){for(;++se<ge;)if((Ce=C[se])!=null&&Ce>=Ce){be=Xe=Ce;break}for(;++se<ge;)(Ce=C[se])!=null&&(be>Ce&&(be=Ce),Xe<Ce&&(Xe=Ce))}else{for(;++se<ge;)if((Ce=W.call(C,C[se],se))!=null&&Ce>=Ce){be=Xe=Ce;break}for(;++se<ge;)(Ce=W.call(C,C[se],se))!=null&&(be>Ce&&(be=Ce),Xe<Ce&&(Xe=Ce))}return[be,Xe]};function E(C){return C===null?NaN:+C}function A(C){return!isNaN(C)}a.sum=function(C,W){var se=0,ge=C.length,be,Ce=-1;if(arguments.length===1)for(;++Ce<ge;)A(be=+C[Ce])&&(se+=be);else for(;++Ce<ge;)A(be=+W.call(C,C[Ce],Ce))&&(se+=be);return se},a.mean=function(C,W){var se=0,ge=C.length,be,Ce=-1,Xe=ge;if(arguments.length===1)for(;++Ce<ge;)A(be=E(C[Ce]))?se+=be:--Xe;else for(;++Ce<ge;)A(be=E(W.call(C,C[Ce],Ce)))?se+=be:--Xe;if(Xe)return se/Xe},a.quantile=function(C,W){var se=(C.length-1)*W+1,ge=Math.floor(se),be=+C[ge-1],Ce=se-ge;return Ce?be+Ce*(C[ge]-be):be},a.median=function(C,W){var se=[],ge=C.length,be,Ce=-1;if(arguments.length===1)for(;++Ce<ge;)A(be=E(C[Ce]))&&se.push(be);else for(;++Ce<ge;)A(be=E(W.call(C,C[Ce],Ce)))&&se.push(be);if(se.length)return a.quantile(se.sort(x),.5)},a.variance=function(C,W){var se=C.length,ge=0,be,Ce,Xe=0,Ge=-1,tt=0;if(arguments.length===1)for(;++Ge<se;)A(be=E(C[Ge]))&&(Ce=be-ge,ge+=Ce/++tt,Xe+=Ce*(be-ge));else for(;++Ge<se;)A(be=E(W.call(C,C[Ge],Ge)))&&(Ce=be-ge,ge+=Ce/++tt,Xe+=Ce*(be-ge));if(tt>1)return Xe/(tt-1)},a.deviation=function(){var C=a.variance.apply(this,arguments);return C&&Math.sqrt(C)};function P(C){return{left:function(W,se,ge,be){for(arguments.length<3&&(ge=0),arguments.length<4&&(be=W.length);ge<be;){var Ce=ge+be>>>1;C(W[Ce],se)<0?ge=Ce+1:be=Ce}return ge},right:function(W,se,ge,be){for(arguments.length<3&&(ge=0),arguments.length<4&&(be=W.length);ge<be;){var Ce=ge+be>>>1;C(W[Ce],se)>0?be=Ce:ge=Ce+1}return ge}}}var D=P(x);a.bisectLeft=D.left,a.bisect=a.bisectRight=D.right,a.bisector=function(C){return P(C.length===1?function(W,se){return x(C(W),se)}:C)},a.shuffle=function(C,W,se){(ge=arguments.length)<3&&(se=C.length,ge<2&&(W=0));for(var ge=se-W,be,Ce;ge;)Ce=Math.random()*ge--|0,be=C[ge+W],C[ge+W]=C[Ce+W],C[Ce+W]=be;return C},a.permute=function(C,W){for(var se=W.length,ge=new Array(se);se--;)ge[se]=C[W[se]];return ge},a.pairs=function(C){for(var W=0,se=C.length-1,ge=C[0],be=new Array(se<0?0:se);W<se;)be[W]=[ge,ge=C[++W]];return be},a.transpose=function(C){if(!(Ce=C.length))return[];for(var W=-1,se=a.min(C,R),ge=new Array(se);++W<se;)for(var be=-1,Ce,Xe=ge[W]=new Array(Ce);++be<Ce;)Xe[be]=C[be][W];return ge};function R(C){return C.length}a.zip=function(){return a.transpose(arguments)},a.keys=function(C){var W=[];for(var se in C)W.push(se);return W},a.values=function(C){var W=[];for(var se in C)W.push(C[se]);return W},a.entries=function(C){var W=[];for(var se in C)W.push({key:se,value:C[se]});return W},a.merge=function(C){for(var W=C.length,se,ge=-1,be=0,Ce,Xe;++ge<W;)be+=C[ge].length;for(Ce=new Array(be);--W>=0;)for(Xe=C[W],se=Xe.length;--se>=0;)Ce[--be]=Xe[se];return Ce};var S=Math.abs;a.range=function(C,W,se){if(arguments.length<3&&(se=1,arguments.length<2&&(W=C,C=0)),(W-C)/se===1/0)throw new Error("infinite range");var ge=[],be=I(S(se)),Ce=-1,Xe;if(C*=be,W*=be,se*=be,se<0)for(;(Xe=C+se*++Ce)>W;)ge.push(Xe/be);else for(;(Xe=C+se*++Ce)<W;)ge.push(Xe/be);return ge};function I(C){for(var W=1;C*W%1;)W*=10;return W}function T(C,W){for(var se in W)Object.defineProperty(C.prototype,se,{value:W[se],enumerable:!1})}a.map=function(C,W){var se=new M;if(C instanceof M)C.forEach(function(Ge,tt){se.set(Ge,tt)});else if(Array.isArray(C)){var ge=-1,be=C.length,Ce;if(arguments.length===1)for(;++ge<be;)se.set(ge,C[ge]);else for(;++ge<be;)se.set(W.call(C,Ce=C[ge],ge),Ce)}else for(var Xe in C)se.set(Xe,C[Xe]);return se};function M(){this._=Object.create(null)}var z="__proto__",U="\0";T(M,{has:j,get:function(C){return this._[F(C)]},set:function(C,W){return this._[F(C)]=W},remove:H,keys:Y,values:function(){var C=[];for(var W in this._)C.push(this._[W]);return C},entries:function(){var C=[];for(var W in this._)C.push({key:V(W),value:this._[W]});return C},size:J,empty:ne,forEach:function(C){for(var W in this._)C.call(this,V(W),this._[W])}});function F(C){return(C+="")===z||C[0]===U?U+C:C}function V(C){return(C+="")[0]===U?C.slice(1):C}function j(C){return F(C)in this._}function H(C){return(C=F(C))in this._&&delete this._[C]}function Y(){var C=[];for(var W in this._)C.push(V(W));return C}function J(){var C=0;for(var W in this._)++C;return C}function ne(){for(var C in this._)return!1;return!0}a.nest=function(){var C={},W=[],se=[],ge,be;function Ce(Ge,tt,gt){if(gt>=W.length)return be?be.call(C,tt):ge?tt.sort(ge):tt;for(var yt=-1,Ft=tt.length,Ot=W[gt++],rr,yr,Ut,Jt=new M,or;++yt<Ft;)(or=Jt.get(rr=Ot(yr=tt[yt])))?or.push(yr):Jt.set(rr,[yr]);return Ge?(yr=Ge(),Ut=function(xr,Cr){yr.set(xr,Ce(Ge,Cr,gt))}):(yr={},Ut=function(xr,Cr){yr[xr]=Ce(Ge,Cr,gt)}),Jt.forEach(Ut),yr}function Xe(Ge,tt){if(tt>=W.length)return Ge;var gt=[],yt=se[tt++];return Ge.forEach(function(Ft,Ot){gt.push({key:Ft,values:Xe(Ot,tt)})}),yt?gt.sort(function(Ft,Ot){return yt(Ft.key,Ot.key)}):gt}return C.map=function(Ge,tt){return Ce(tt,Ge,0)},C.entries=function(Ge){return Xe(Ce(a.map,Ge,0),0)},C.key=function(Ge){return W.push(Ge),C},C.sortKeys=function(Ge){return se[W.length-1]=Ge,C},C.sortValues=function(Ge){return ge=Ge,C},C.rollup=function(Ge){return be=Ge,C},C},a.set=function(C){var W=new q;if(C)for(var se=0,ge=C.length;se<ge;++se)W.add(C[se]);return W};function q(){this._=Object.create(null)}T(q,{has:j,add:function(C){return this._[F(C+="")]=!0,C},remove:H,values:Y,size:J,empty:ne,forEach:function(C){for(var W in this._)C.call(this,V(W))}}),a.behavior={};function we(C){return C}a.rebind=function(C,W){for(var se=1,ge=arguments.length,be;++se<ge;)C[be=arguments[se]]=ee(C,W,W[be]);return C};function ee(C,W,se){return function(){var ge=se.apply(W,arguments);return ge===W?C:ge}}function X(C,W){if(W in C)return W;W=W.charAt(0).toUpperCase()+W.slice(1);for(var se=0,ge=re.length;se<ge;++se){var be=re[se]+W;if(be in C)return be}}var re=["webkit","ms","moz","Moz","o","O"];function de(){}a.dispatch=function(){for(var C=new me,W=-1,se=arguments.length;++W<se;)C[arguments[W]]=xe(C);return C};function me(){}me.prototype.on=function(C,W){var se=C.indexOf("."),ge="";if(se>=0&&(ge=C.slice(se+1),C=C.slice(0,se)),C)return arguments.length<2?this[C].on(ge):this[C].on(ge,W);if(arguments.length===2){if(W==null)for(C in this)this.hasOwnProperty(C)&&this[C].on(ge,null);return this}};function xe(C){var W=[],se=new M;function ge(){for(var be=W,Ce=-1,Xe=be.length,Ge;++Ce<Xe;)(Ge=be[Ce].on)&&Ge.apply(this,arguments);return C}return ge.on=function(be,Ce){var Xe=se.get(be),Ge;return arguments.length<2?Xe&&Xe.on:(Xe&&(Xe.on=null,W=W.slice(0,Ge=W.indexOf(Xe)).concat(W.slice(Ge+1)),se.remove(be)),Ce&&W.push(se.set(be,{on:Ce})),C)},ge}a.event=null;function He(){a.event.preventDefault()}function Re(){for(var C=a.event,W;W=C.sourceEvent;)C=W;return C}function Ee(C){for(var W=new me,se=0,ge=arguments.length;++se<ge;)W[arguments[se]]=xe(W);return W.of=function(be,Ce){return function(Xe){try{var Ge=Xe.sourceEvent=a.event;Xe.target=C,a.event=Xe,W[Xe.type].apply(be,Ce)}finally{a.event=Ge}}},W}a.requote=function(C){return C.replace(ke,"\\$&")};var ke=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$={}.__proto__?function(C,W){C.__proto__=W}:function(C,W){for(var se in W)C[se]=W[se]};function le(C){return $(C,ce),C}var K=function(C,W){return W.querySelector(C)},te=function(C,W){return W.querySelectorAll(C)},ie=function(C,W){var se=C.matches||C[X(C,"matchesSelector")];return ie=function(ge,be){return se.call(ge,be)},ie(C,W)};typeof Sizzle=="function"&&(K=function(C,W){return Sizzle(C,W)[0]||null},te=Sizzle,ie=Sizzle.matchesSelector),a.selection=function(){return a.select(l.documentElement)};var ce=a.selection.prototype=[];ce.select=function(C){var W=[],se,ge,be,Ce;C=ae(C);for(var Xe=-1,Ge=this.length;++Xe<Ge;){W.push(se=[]),se.parentNode=(be=this[Xe]).parentNode;for(var tt=-1,gt=be.length;++tt<gt;)(Ce=be[tt])?(se.push(ge=C.call(Ce,Ce.__data__,tt,Xe)),ge&&"__data__"in Ce&&(ge.__data__=Ce.__data__)):se.push(null)}return le(W)};function ae(C){return typeof C=="function"?C:function(){return K(C,this)}}ce.selectAll=function(C){var W=[],se,ge;C=ve(C);for(var be=-1,Ce=this.length;++be<Ce;)for(var Xe=this[be],Ge=-1,tt=Xe.length;++Ge<tt;)(ge=Xe[Ge])&&(W.push(se=n(C.call(ge,ge.__data__,Ge,be))),se.parentNode=ge);return le(W)};function ve(C){return typeof C=="function"?C:function(){return te(C,this)}}var pe="http://www.w3.org/1999/xhtml",he={svg:"http://www.w3.org/2000/svg",xhtml:pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};a.ns={prefix:he,qualify:function(C){var W=C.indexOf(":"),se=C;return W>=0&&(se=C.slice(0,W))!=="xmlns"&&(C=C.slice(W+1)),he.hasOwnProperty(se)?{space:he[se],local:C}:C}},ce.attr=function(C,W){if(arguments.length<2){if(typeof C=="string"){var se=this.node();return C=a.ns.qualify(C),C.local?se.getAttributeNS(C.space,C.local):se.getAttribute(C)}for(W in C)this.each(ye(W,C[W]));return this}return this.each(ye(C,W))};function ye(C,W){C=a.ns.qualify(C);function se(){this.removeAttribute(C)}function ge(){this.removeAttributeNS(C.space,C.local)}function be(){this.setAttribute(C,W)}function Ce(){this.setAttributeNS(C.space,C.local,W)}function Xe(){var tt=W.apply(this,arguments);tt==null?this.removeAttribute(C):this.setAttribute(C,tt)}function Ge(){var tt=W.apply(this,arguments);tt==null?this.removeAttributeNS(C.space,C.local):this.setAttributeNS(C.space,C.local,tt)}return W==null?C.local?ge:se:typeof W=="function"?C.local?Ge:Xe:C.local?Ce:be}function _e(C){return C.trim().replace(/\s+/g," ")}ce.classed=function(C,W){if(arguments.length<2){if(typeof C=="string"){var se=this.node(),ge=(C=Je(C)).length,be=-1;if(W=se.classList){for(;++be<ge;)if(!W.contains(C[be]))return!1}else for(W=se.getAttribute("class");++be<ge;)if(!je(C[be]).test(W))return!1;return!0}for(W in C)this.each(nt(W,C[W]));return this}return this.each(nt(C,W))};function je(C){return new RegExp("(?:^|\\s+)"+a.requote(C)+"(?:\\s+|$)","g")}function Je(C){return(C+"").trim().split(/^|\s+/)}function nt(C,W){C=Je(C).map(at);var se=C.length;function ge(){for(var Ce=-1;++Ce<se;)C[Ce](this,W)}function be(){for(var Ce=-1,Xe=W.apply(this,arguments);++Ce<se;)C[Ce](this,Xe)}return typeof W=="function"?be:ge}function at(C){var W=je(C);return function(se,ge){if(be=se.classList)return ge?be.add(C):be.remove(C);var be=se.getAttribute("class")||"";ge?(W.lastIndex=0,W.test(be)||se.setAttribute("class",_e(be+" "+C))):se.setAttribute("class",_e(be.replace(W," ")))}}ce.style=function(C,W,se){var ge=arguments.length;if(ge<3){if(typeof C!="string"){ge<2&&(W="");for(se in C)this.each(Fe(se,C[se],W));return this}if(ge<2){var be=this.node();return h(be).getComputedStyle(be,null).getPropertyValue(C)}se=""}return this.each(Fe(C,W,se))};function Fe(C,W,se){function ge(){this.style.removeProperty(C)}function be(){this.style.setProperty(C,W,se)}function Ce(){var Xe=W.apply(this,arguments);Xe==null?this.style.removeProperty(C):this.style.setProperty(C,Xe,se)}return W==null?ge:typeof W=="function"?Ce:be}ce.property=function(C,W){if(arguments.length<2){if(typeof C=="string")return this.node()[C];for(W in C)this.each(Ie(W,C[W]));return this}return this.each(Ie(C,W))};function Ie(C,W){function se(){delete this[C]}function ge(){this[C]=W}function be(){var Ce=W.apply(this,arguments);Ce==null?delete this[C]:this[C]=Ce}return W==null?se:typeof W=="function"?be:ge}ce.text=function(C){return arguments.length?this.each(typeof C=="function"?function(){var W=C.apply(this,arguments);this.textContent=W==null?"":W}:C==null?function(){this.textContent=""}:function(){this.textContent=C}):this.node().textContent},ce.html=function(C){return arguments.length?this.each(typeof C=="function"?function(){var W=C.apply(this,arguments);this.innerHTML=W==null?"":W}:C==null?function(){this.innerHTML=""}:function(){this.innerHTML=C}):this.node().innerHTML},ce.append=function(C){return C=Ke(C),this.select(function(){return this.appendChild(C.apply(this,arguments))})};function Ke(C){function W(){var ge=this.ownerDocument,be=this.namespaceURI;return be===pe&&ge.documentElement.namespaceURI===pe?ge.createElement(C):ge.createElementNS(be,C)}function se(){return this.ownerDocument.createElementNS(C.space,C.local)}return typeof C=="function"?C:(C=a.ns.qualify(C)).local?se:W}ce.insert=function(C,W){return C=Ke(C),W=ae(W),this.select(function(){return this.insertBefore(C.apply(this,arguments),W.apply(this,arguments)||null)})},ce.remove=function(){return this.each(Qe)};function Qe(){var C=this.parentNode;C&&C.removeChild(this)}ce.data=function(C,W){var se=-1,ge=this.length,be,Ce;if(!arguments.length){for(C=new Array(ge=(be=this[0]).length);++se<ge;)(Ce=be[se])&&(C[se]=Ce.__data__);return C}function Xe(yt,Ft){var Ot,rr=yt.length,yr=Ft.length,Ut=Math.min(rr,yr),Jt=new Array(yr),or=new Array(yr),xr=new Array(rr),Cr,ur;if(W){var rn=new M,xn=new Array(rr),Cn;for(Ot=-1;++Ot<rr;)(Cr=yt[Ot])&&(rn.has(Cn=W.call(Cr,Cr.__data__,Ot))?xr[Ot]=Cr:rn.set(Cn,Cr),xn[Ot]=Cn);for(Ot=-1;++Ot<yr;)(Cr=rn.get(Cn=W.call(Ft,ur=Ft[Ot],Ot)))?Cr!==!0&&(Jt[Ot]=Cr,Cr.__data__=ur):or[Ot]=it(ur),rn.set(Cn,!0);for(Ot=-1;++Ot<rr;)Ot in xn&&rn.get(xn[Ot])!==!0&&(xr[Ot]=yt[Ot])}else{for(Ot=-1;++Ot<Ut;)Cr=yt[Ot],ur=Ft[Ot],Cr?(Cr.__data__=ur,Jt[Ot]=Cr):or[Ot]=it(ur);for(;Ot<yr;++Ot)or[Ot]=it(Ft[Ot]);for(;Ot<rr;++Ot)xr[Ot]=yt[Ot]}or.update=Jt,or.parentNode=Jt.parentNode=xr.parentNode=yt.parentNode,Ge.push(or),tt.push(Jt),gt.push(xr)}var Ge=Xt([]),tt=le([]),gt=le([]);if(typeof C=="function")for(;++se<ge;)Xe(be=this[se],C.call(be,be.parentNode.__data__,se));else for(;++se<ge;)Xe(be=this[se],C);return tt.enter=function(){return Ge},tt.exit=function(){return gt},tt};function it(C){return{__data__:C}}ce.datum=function(C){return arguments.length?this.property("__data__",C):this.property("__data__")},ce.filter=function(C){var W=[],se,ge,be;typeof C!="function"&&(C=Ne(C));for(var Ce=0,Xe=this.length;Ce<Xe;Ce++){W.push(se=[]),se.parentNode=(ge=this[Ce]).parentNode;for(var Ge=0,tt=ge.length;Ge<tt;Ge++)(be=ge[Ge])&&C.call(be,be.__data__,Ge,Ce)&&se.push(be)}return le(W)};function Ne(C){return function(){return ie(this,C)}}ce.order=function(){for(var C=-1,W=this.length;++C<W;)for(var se=this[C],ge=se.length-1,be=se[ge],Ce;--ge>=0;)(Ce=se[ge])&&(be&&be!==Ce.nextSibling&&be.parentNode.insertBefore(Ce,be),be=Ce);return this},ce.sort=function(C){C=ht.apply(this,arguments);for(var W=-1,se=this.length;++W<se;)this[W].sort(C);return this.order()};function ht(C){return arguments.length||(C=x),function(W,se){return W&&se?C(W.__data__,se.__data__):!W-!se}}ce.each=function(C){return Tt(this,function(W,se,ge){C.call(W,W.__data__,se,ge)})};function Tt(C,W){for(var se=0,ge=C.length;se<ge;se++)for(var be=C[se],Ce=0,Xe=be.length,Ge;Ce<Xe;Ce++)(Ge=be[Ce])&&W(Ge,Ce,se);return C}ce.call=function(C){var W=n(arguments);return C.apply(W[0]=this,W),this},ce.empty=function(){return!this.node()},ce.node=function(){for(var C=0,W=this.length;C<W;C++)for(var se=this[C],ge=0,be=se.length;ge<be;ge++){var Ce=se[ge];if(Ce)return Ce}return null},ce.size=function(){var C=0;return Tt(this,function(){++C}),C};function Xt(C){return $(C,Nt),C}var Nt=[];a.selection.enter=Xt,a.selection.enter.prototype=Nt,Nt.append=ce.append,Nt.empty=ce.empty,Nt.node=ce.node,Nt.call=ce.call,Nt.size=ce.size,Nt.select=function(C){for(var W=[],se,ge,be,Ce,Xe,Ge=-1,tt=this.length;++Ge<tt;){be=(Ce=this[Ge]).update,W.push(se=[]),se.parentNode=Ce.parentNode;for(var gt=-1,yt=Ce.length;++gt<yt;)(Xe=Ce[gt])?(se.push(be[gt]=ge=C.call(Ce.parentNode,Xe.__data__,gt,Ge)),ge.__data__=Xe.__data__):se.push(null)}return le(W)},Nt.insert=function(C,W){return arguments.length<2&&(W=Mt(this)),ce.insert.call(this,C,W)};function Mt(C){var W,se;return function(ge,be,Ce){var Xe=C[Ce].update,Ge=Xe.length,tt;for(Ce!=se&&(se=Ce,W=0),be>=W&&(W=be+1);!(tt=Xe[W])&&++W<Ge;);return tt}}a.select=function(C){var W;return typeof C=="string"?(W=[K(C,l)],W.parentNode=l.documentElement):(W=[C],W.parentNode=u(C)),le([W])},a.selectAll=function(C){var W;return typeof C=="string"?(W=n(te(C,l)),W.parentNode=l.documentElement):(W=n(C),W.parentNode=null),le([W])},ce.on=function(C,W,se){var ge=arguments.length;if(ge<3){if(typeof C!="string"){ge<2&&(W=!1);for(se in C)this.each(Vt(se,C[se],W));return this}if(ge<2)return(ge=this.node()["__on"+C])&&ge._;se=!1}return this.each(Vt(C,W,se))};function Vt(C,W,se){var ge="__on"+C,be=C.indexOf("."),Ce=cr;be>0&&(C=C.slice(0,be));var Xe=Yt.get(C);Xe&&(C=Xe,Ce=Nr);function Ge(){var yt=this[ge];yt&&(this.removeEventListener(C,yt,yt.$),delete this[ge])}function tt(){var yt=Ce(W,n(arguments));Ge.call(this),this.addEventListener(C,this[ge]=yt,yt.$=se),yt._=W}function gt(){var yt=new RegExp("^__on([^.]+)"+a.requote(C)+"$"),Ft;for(var Ot in this)if(Ft=Ot.match(yt)){var rr=this[Ot];this.removeEventListener(Ft[1],rr,rr.$),delete this[Ot]}}return be?W?tt:Ge:W?de:gt}var Yt=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});l&&Yt.forEach(function(C){"on"+C in l&&Yt.remove(C)});function cr(C,W){return function(se){var ge=a.event;a.event=se,W[0]=this.__data__;try{C.apply(this,W)}finally{a.event=ge}}}function Nr(C,W){var se=cr(C,W);return function(ge){var be=this,Ce=ge.relatedTarget;(!Ce||Ce!==be&&!(Ce.compareDocumentPosition(be)&8))&&se.call(be,ge)}}var er,Wt=0;function dr(C){var W=".dragsuppress-"+ ++Wt,se="click"+W,ge=a.select(h(C)).on("touchmove"+W,He).on("dragstart"+W,He).on("selectstart"+W,He);if(er==null&&(er="onselectstart"in C?!1:X(C.style,"userSelect")),er){var be=u(C).style,Ce=be[er];be[er]="none"}return function(Xe){if(ge.on(W,null),er&&(be[er]=Ce),Xe){var Ge=function(){ge.on(se,null)};ge.on(se,function(){He(),Ge()},!0),setTimeout(Ge,0)}}}a.mouse=function(C){return Dr(C,Re())};var zr=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Dr(C,W){W.changedTouches&&(W=W.changedTouches[0]);var se=C.ownerSVGElement||C;if(se.createSVGPoint){var ge=se.createSVGPoint();if(zr<0){var be=h(C);if(be.scrollX||be.scrollY){se=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ce=se[0][0].getScreenCTM();zr=!(Ce.f||Ce.e),se.remove()}}return zr?(ge.x=W.pageX,ge.y=W.pageY):(ge.x=W.clientX,ge.y=W.clientY),ge=ge.matrixTransform(C.getScreenCTM().inverse()),[ge.x,ge.y]}var Xe=C.getBoundingClientRect();return[W.clientX-Xe.left-C.clientLeft,W.clientY-Xe.top-C.clientTop]}a.touch=function(C,W,se){if(arguments.length<3&&(se=W,W=Re().changedTouches),W){for(var ge=0,be=W.length,Ce;ge<be;++ge)if((Ce=W[ge]).identifier===se)return Dr(C,Ce)}},a.behavior.drag=function(){var C=Ee(be,"drag","dragstart","dragend"),W=null,se=Ce(de,a.mouse,h,"mousemove","mouseup"),ge=Ce($e,a.touch,we,"touchmove","touchend");function be(){this.on("mousedown.drag",se).on("touchstart.drag",ge)}function Ce(Xe,Ge,tt,gt,yt){return function(){var Ft=this,Ot=a.event.target.correspondingElement||a.event.target,rr=Ft.parentNode,yr=C.of(Ft,arguments),Ut=0,Jt=Xe(),or=".drag"+(Jt==null?"":"-"+Jt),xr,Cr=a.select(tt(Ot)).on(gt+or,xn).on(yt+or,Cn),ur=dr(Ot),rn=Ge(rr,Jt);W?(xr=W.apply(Ft,arguments),xr=[xr.x-rn[0],xr.y-rn[1]]):xr=[0,0],yr({type:"dragstart"});function xn(){var An=Ge(rr,Jt),Nn,Gn;!An||(Nn=An[0]-rn[0],Gn=An[1]-rn[1],Ut|=Nn|Gn,rn=An,yr({type:"drag",x:An[0]+xr[0],y:An[1]+xr[1],dx:Nn,dy:Gn}))}function Cn(){!Ge(rr,Jt)||(Cr.on(gt+or,null).on(yt+or,null),ur(Ut),yr({type:"dragend"}))}}}return be.origin=function(Xe){return arguments.length?(W=Xe,be):W},a.rebind(be,C,"on")};function $e(){return a.event.changedTouches[0].identifier}a.touches=function(C,W){return arguments.length<2&&(W=Re().touches),W?n(W).map(function(se){var ge=Dr(C,se);return ge.identifier=se.identifier,ge}):[]};var pt=1e-6,kt=pt*pt,Me=Math.PI,rt=2*Me,st=rt-pt,ft=Me/2,zt=Me/180,Ue=180/Me;function Ae(C,W,se){return(W[0]-C[0])*(se[1]-C[1])-(W[1]-C[1])*(se[0]-C[0])}function Oe(C){return C>1?ft:C<-1?-ft:Math.asin(C)}function We(C){return((C=Math.exp(C))-1/C)/2}function Ve(C){return((C=Math.exp(C))+1/C)/2}function lt(C){return((C=Math.exp(2*C))-1)/(C+1)}var mt=Math.SQRT2,dt=2,At=4;a.interpolateZoom=function(C,W){var se=C[0],ge=C[1],be=C[2],Ce=W[0],Xe=W[1],Ge=W[2],tt=Ce-se,gt=Xe-ge,yt=tt*tt+gt*gt,Ft,Ot;if(yt<kt)Ot=Math.log(Ge/be)/mt,Ft=function(xr){return[se+xr*tt,ge+xr*gt,be*Math.exp(mt*xr*Ot)]};else{var rr=Math.sqrt(yt),yr=(Ge*Ge-be*be+At*yt)/(2*be*dt*rr),Ut=(Ge*Ge-be*be-At*yt)/(2*Ge*dt*rr),Jt=Math.log(Math.sqrt(yr*yr+1)-yr),or=Math.log(Math.sqrt(Ut*Ut+1)-Ut);Ot=(or-Jt)/mt,Ft=function(xr){var Cr=xr*Ot,ur=Ve(Jt),rn=be/(dt*rr)*(ur*lt(mt*Cr+Jt)-We(Jt));return[se+rn*tt,ge+rn*gt,be*ur/Ve(mt*Cr+Jt)]}}return Ft.duration=Ot*1e3,Ft},a.behavior.zoom=function(){var C={x:0,y:0,k:1},W,se,ge,be=[960,500],Ce=Bt,Xe=250,Ge=0,tt="mousedown.zoom",gt="mousemove.zoom",yt="mouseup.zoom",Ft,Ot="touchstart.zoom",rr,yr=Ee(Cr,"zoomstart","zoom","zoomend"),Ut,Jt,or,xr;tr||(tr="onwheel"in l?(ir=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(ir=function(){return a.event.wheelDelta},"mousewheel"):(ir=function(){return-a.event.detail},"MozMousePixelScroll"));function Cr(Tn){Tn.on(tt,ni).on(tr+".zoom",na).on("dblclick.zoom",ia).on(Ot,Li)}Cr.event=function(Tn){Tn.each(function(){var fi=yr.of(this,arguments),pi=C;$u?a.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},Gn(fi)}).tween("zoom:zoom",function(){var Oi=be[0],Da=be[1],no=se?se[0]:Oi/2,Wa=se?se[1]:Da/2,vo=a.interpolateZoom([(no-C.x)/C.k,(Wa-C.y)/C.k,Oi/C.k],[(no-pi.x)/pi.k,(Wa-pi.y)/pi.k,Oi/pi.k]);return function(gs){var ts=vo(gs),Ps=Oi/ts[2];this.__chart__=C={x:no-ts[0]*Ps,y:Wa-ts[1]*Ps,k:Ps},ui(fi)}}).each("interrupt.zoom",function(){Wn(fi)}).each("end.zoom",function(){Wn(fi)}):(this.__chart__=C,Gn(fi),ui(fi),Wn(fi))})},Cr.translate=function(Tn){return arguments.length?(C={x:+Tn[0],y:+Tn[1],k:C.k},Nn(),Cr):[C.x,C.y]},Cr.scale=function(Tn){return arguments.length?(C={x:C.x,y:C.y,k:null},xn(+Tn),Nn(),Cr):C.k},Cr.scaleExtent=function(Tn){return arguments.length?(Ce=Tn==null?Bt:[+Tn[0],+Tn[1]],Cr):Ce},Cr.center=function(Tn){return arguments.length?(ge=Tn&&[+Tn[0],+Tn[1]],Cr):ge},Cr.size=function(Tn){return arguments.length?(be=Tn&&[+Tn[0],+Tn[1]],Cr):be},Cr.duration=function(Tn){return arguments.length?(Xe=+Tn,Cr):Xe},Cr.x=function(Tn){return arguments.length?(Jt=Tn,Ut=Tn.copy(),C={x:0,y:0,k:1},Cr):Jt},Cr.y=function(Tn){return arguments.length?(xr=Tn,or=Tn.copy(),C={x:0,y:0,k:1},Cr):xr};function ur(Tn){return[(Tn[0]-C.x)/C.k,(Tn[1]-C.y)/C.k]}function rn(Tn){return[Tn[0]*C.k+C.x,Tn[1]*C.k+C.y]}function xn(Tn){C.k=Math.max(Ce[0],Math.min(Ce[1],Tn))}function Cn(Tn,fi){fi=rn(fi),C.x+=Tn[0]-fi[0],C.y+=Tn[1]-fi[1]}function An(Tn,fi,pi,Oi){Tn.__chart__={x:C.x,y:C.y,k:C.k},xn(Math.pow(2,Oi)),Cn(se=fi,pi),Tn=a.select(Tn),Xe>0&&(Tn=Tn.transition().duration(Xe)),Tn.call(Cr.event)}function Nn(){Jt&&Jt.domain(Ut.range().map(function(Tn){return(Tn-C.x)/C.k}).map(Ut.invert)),xr&&xr.domain(or.range().map(function(Tn){return(Tn-C.y)/C.k}).map(or.invert))}function Gn(Tn){Ge++||Tn({type:"zoomstart"})}function ui(Tn){Nn(),Tn({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function Wn(Tn){--Ge||(Tn({type:"zoomend"}),se=null)}function ni(){var Tn=this,fi=yr.of(Tn,arguments),pi=0,Oi=a.select(h(Tn)).on(gt,Wa).on(yt,vo),Da=ur(a.mouse(Tn)),no=dr(Tn);Ju.call(Tn),Gn(fi);function Wa(){pi=1,Cn(a.mouse(Tn),Da),ui(fi)}function vo(){Oi.on(gt,null).on(yt,null),no(pi),Wn(fi)}}function Li(){var Tn=this,fi=yr.of(Tn,arguments),pi={},Oi=0,Da,no=".zoom-"+a.event.changedTouches[0].identifier,Wa="touchmove"+no,vo="touchend"+no,gs=[],ts=a.select(Tn),Ps=dr(Tn);Rs(),Gn(fi),ts.on(tt,null).on(Ot,Rs);function Wo(){var js=a.touches(Tn);return Da=C.k,js.forEach(function(Fo){Fo.identifier in pi&&(pi[Fo.identifier]=ur(Fo))}),js}function Rs(){var js=a.event.target;a.select(js).on(Wa,xc).on(vo,nm),gs.push(js);for(var Fo=a.event.changedTouches,jo=0,eu=Fo.length;jo<eu;++jo)pi[Fo[jo].identifier]=null;var ua=Wo(),wu=Date.now();if(ua.length===1){if(wu-rr<500){var Qu=ua[0];An(Tn,Qu,pi[Qu.identifier],Math.floor(Math.log(C.k)/Math.LN2)+1),He()}rr=wu}else if(ua.length>1){var Qu=ua[0],Pl=ua[1],wc=Qu[0]-Pl[0],ef=Qu[1]-Pl[1];Oi=wc*wc+ef*ef}}function xc(){var js=a.touches(Tn),Fo,jo,eu,ua;Ju.call(Tn);for(var wu=0,Qu=js.length;wu<Qu;++wu,ua=null)if(eu=js[wu],ua=pi[eu.identifier]){if(jo)break;Fo=eu,jo=ua}if(ua){var Pl=(Pl=eu[0]-Fo[0])*Pl+(Pl=eu[1]-Fo[1])*Pl,wc=Oi&&Math.sqrt(Pl/Oi);Fo=[(Fo[0]+eu[0])/2,(Fo[1]+eu[1])/2],jo=[(jo[0]+ua[0])/2,(jo[1]+ua[1])/2],xn(wc*Da)}rr=null,Cn(Fo,jo),ui(fi)}function nm(){if(a.event.touches.length){for(var js=a.event.changedTouches,Fo=0,jo=js.length;Fo<jo;++Fo)delete pi[js[Fo].identifier];for(var eu in pi)return void Wo()}a.selectAll(gs).on(no,null),ts.on(tt,ni).on(Ot,Li),Ps(),Wn(fi)}}function na(){var Tn=yr.of(this,arguments);Ft?clearTimeout(Ft):(Ju.call(this),W=ur(se=ge||a.mouse(this)),Gn(Tn)),Ft=setTimeout(function(){Ft=null,Wn(Tn)},50),He(),xn(Math.pow(2,ir()*.002)*C.k),Cn(se,W),ui(Tn)}function ia(){var Tn=a.mouse(this),fi=Math.log(C.k)/Math.LN2;An(this,Tn,ur(Tn),a.event.shiftKey?Math.ceil(fi)-1:Math.floor(fi)+1)}return a.rebind(Cr,yr,"on")};var Bt=[0,1/0],ir,tr;a.color=vt;function vt(){}vt.prototype.toString=function(){return this.rgb()+""},a.hsl=pr;function pr(C,W,se){return this instanceof pr?(this.h=+C,this.s=+W,void(this.l=+se)):arguments.length<2?C instanceof pr?new pr(C.h,C.s,C.l):Pr(""+C,wr,pr):new pr(C,W,se)}var Gt=pr.prototype=new vt;Gt.brighter=function(C){return C=Math.pow(.7,arguments.length?C:1),new pr(this.h,this.s,this.l/C)},Gt.darker=function(C){return C=Math.pow(.7,arguments.length?C:1),new pr(this.h,this.s,C*this.l)},Gt.rgb=function(){return Mr(this.h,this.s,this.l)};function Mr(C,W,se){var ge,be;C=isNaN(C)?0:(C%=360)<0?C+360:C,W=isNaN(W)||W<0?0:W>1?1:W,se=se<0?0:se>1?1:se,be=se<=.5?se*(1+W):se+W-se*W,ge=2*se-be;function Ce(Ge){return Ge>360?Ge-=360:Ge<0&&(Ge+=360),Ge<60?ge+(be-ge)*Ge/60:Ge<180?be:Ge<240?ge+(be-ge)*(240-Ge)/60:ge}function Xe(Ge){return Math.round(Ce(Ge)*255)}return new nr(Xe(C+120),Xe(C),Xe(C-120))}a.hcl=Rr;function Rr(C,W,se){return this instanceof Rr?(this.h=+C,this.c=+W,void(this.l=+se)):arguments.length<2?C instanceof Rr?new Rr(C.h,C.c,C.l):C instanceof vr?Ct(C.l,C.a,C.b):Ct((C=fr((C=a.rgb(C)).r,C.g,C.b)).l,C.a,C.b):new Rr(C,W,se)}var Yr=Rr.prototype=new vt;Yr.brighter=function(C){return new Rr(this.h,this.c,Math.min(100,this.l+Xr*(arguments.length?C:1)))},Yr.darker=function(C){return new Rr(this.h,this.c,Math.max(0,this.l-Xr*(arguments.length?C:1)))},Yr.rgb=function(){return Kr(this.h,this.c,this.l).rgb()};function Kr(C,W,se){return isNaN(C)&&(C=0),isNaN(W)&&(W=0),new vr(se,Math.cos(C*=zt)*W,Math.sin(C)*W)}a.lab=vr;function vr(C,W,se){return this instanceof vr?(this.l=+C,this.a=+W,void(this.b=+se)):arguments.length<2?C instanceof vr?new vr(C.l,C.a,C.b):C instanceof Rr?Kr(C.h,C.c,C.l):fr((C=nr(C)).r,C.g,C.b):new vr(C,W,se)}var Xr=18,$r=.95047,Le=1,De=1.08883,bt=vr.prototype=new vt;bt.brighter=function(C){return new vr(Math.min(100,this.l+Xr*(arguments.length?C:1)),this.a,this.b)},bt.darker=function(C){return new vr(Math.max(0,this.l-Xr*(arguments.length?C:1)),this.a,this.b)},bt.rgb=function(){return xt(this.l,this.a,this.b)};function xt(C,W,se){var ge=(C+16)/116,be=ge+W/500,Ce=ge-se/200;return be=Rt(be)*$r,ge=Rt(ge)*Le,Ce=Rt(Ce)*De,new nr(Pt(3.2404542*be-1.5371385*ge-.4985314*Ce),Pt(-.969266*be+1.8760108*ge+.041556*Ce),Pt(.0556434*be-.2040259*ge+1.0572252*Ce))}function Ct(C,W,se){return C>0?new Rr(Math.atan2(se,W)*Ue,Math.sqrt(W*W+se*se),C):new Rr(NaN,NaN,C)}function Rt(C){return C>.206893034?C*C*C:(C-4/29)/7.787037}function Lt(C){return C>.008856?Math.pow(C,1/3):7.787037*C+4/29}function Pt(C){return Math.round(255*(C<=.00304?12.92*C:1.055*Math.pow(C,1/2.4)-.055))}a.rgb=nr;function nr(C,W,se){return this instanceof nr?(this.r=~~C,this.g=~~W,void(this.b=~~se)):arguments.length<2?C instanceof nr?new nr(C.r,C.g,C.b):Pr(""+C,nr,Mr):new nr(C,W,se)}function Tr(C){return new nr(C>>16,C>>8&255,C&255)}function gr(C){return Tr(C)+""}var $t=nr.prototype=new vt;$t.brighter=function(C){C=Math.pow(.7,arguments.length?C:1);var W=this.r,se=this.g,ge=this.b,be=30;return!W&&!se&&!ge?new nr(be,be,be):(W&&W<be&&(W=be),se&&se<be&&(se=be),ge&&ge<be&&(ge=be),new nr(Math.min(255,W/C),Math.min(255,se/C),Math.min(255,ge/C)))},$t.darker=function(C){return C=Math.pow(.7,arguments.length?C:1),new nr(C*this.r,C*this.g,C*this.b)},$t.hsl=function(){return wr(this.r,this.g,this.b)},$t.toString=function(){return"#"+mr(this.r)+mr(this.g)+mr(this.b)};function mr(C){return C<16?"0"+Math.max(0,C).toString(16):Math.min(255,C).toString(16)}function Pr(C,W,se){var ge=0,be=0,Ce=0,Xe,Ge,tt;if(Xe=/([a-z]+)\((.*)\)/.exec(C=C.toLowerCase()),Xe)switch(Ge=Xe[2].split(","),Xe[1]){case"hsl":return se(parseFloat(Ge[0]),parseFloat(Ge[1])/100,parseFloat(Ge[2])/100);case"rgb":return W(Vr(Ge[0]),Vr(Ge[1]),Vr(Ge[2]))}return(tt=_r.get(C))?W(tt.r,tt.g,tt.b):(C!=null&&C.charAt(0)==="#"&&!isNaN(tt=parseInt(C.slice(1),16))&&(C.length===4?(ge=(tt&3840)>>4,ge=ge>>4|ge,be=tt&240,be=be>>4|be,Ce=tt&15,Ce=Ce<<4|Ce):C.length===7&&(ge=(tt&16711680)>>16,be=(tt&65280)>>8,Ce=tt&255)),W(ge,be,Ce))}function wr(C,W,se){var ge=Math.min(C/=255,W/=255,se/=255),be=Math.max(C,W,se),Ce=be-ge,Xe,Ge,tt=(be+ge)/2;return Ce?(Ge=tt<.5?Ce/(be+ge):Ce/(2-be-ge),C==be?Xe=(W-se)/Ce+(W<se?6:0):W==be?Xe=(se-C)/Ce+2:Xe=(C-W)/Ce+4,Xe*=60):(Xe=NaN,Ge=tt>0&&tt<1?0:Xe),new pr(Xe,Ge,tt)}function fr(C,W,se){C=Ir(C),W=Ir(W),se=Ir(se);var ge=Lt((.4124564*C+.3575761*W+.1804375*se)/$r),be=Lt((.2126729*C+.7151522*W+.072175*se)/Le),Ce=Lt((.0193339*C+.119192*W+.9503041*se)/De);return vr(116*be-16,500*(ge-be),200*(be-Ce))}function Ir(C){return(C/=255)<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Vr(C){var W=parseFloat(C);return C.charAt(C.length-1)==="%"?Math.round(W*2.55):W}var _r=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});_r.forEach(function(C,W){_r.set(C,Tr(W))});function Gr(C){return typeof C=="function"?C:function(){return C}}a.functor=Gr,a.xhr=qr(we);function qr(C){return function(W,se,ge){return arguments.length===2&&typeof se=="function"&&(ge=se,se=null),tn(W,se,C,ge)}}function tn(C,W,se,ge){var be={},Ce=a.dispatch("beforesend","progress","load","error"),Xe={},Ge=new XMLHttpRequest,tt=null;self.XDomainRequest&&!("withCredentials"in Ge)&&/^(http(s)?:)?\/\//.test(C)&&(Ge=new XDomainRequest),"onload"in Ge?Ge.onload=Ge.onerror=gt:Ge.onreadystatechange=function(){Ge.readyState>3&&gt()};function gt(){var yt=Ge.status,Ft;if(!yt&&Sn(Ge)||yt>=200&&yt<300||yt===304){try{Ft=se.call(be,Ge)}catch(Ot){Ce.error.call(be,Ot);return}Ce.load.call(be,Ft)}else Ce.error.call(be,Ge)}return Ge.onprogress=function(yt){var Ft=a.event;a.event=yt;try{Ce.progress.call(be,Ge)}finally{a.event=Ft}},be.header=function(yt,Ft){return yt=(yt+"").toLowerCase(),arguments.length<2?Xe[yt]:(Ft==null?delete Xe[yt]:Xe[yt]=Ft+"",be)},be.mimeType=function(yt){return arguments.length?(W=yt==null?null:yt+"",be):W},be.responseType=function(yt){return arguments.length?(tt=yt,be):tt},be.response=function(yt){return se=yt,be},["get","post"].forEach(function(yt){be[yt]=function(){return be.send.apply(be,[yt].concat(n(arguments)))}}),be.send=function(yt,Ft,Ot){if(arguments.length===2&&typeof Ft=="function"&&(Ot=Ft,Ft=null),Ge.open(yt,C,!0),W!=null&&!("accept"in Xe)&&(Xe.accept=W+",*/*"),Ge.setRequestHeader)for(var rr in Xe)Ge.setRequestHeader(rr,Xe[rr]);return W!=null&&Ge.overrideMimeType&&Ge.overrideMimeType(W),tt!=null&&(Ge.responseType=tt),Ot!=null&&be.on("error",Ot).on("load",function(yr){Ot(null,yr)}),Ce.beforesend.call(be,Ge),Ge.send(Ft==null?null:Ft),be},be.abort=function(){return Ge.abort(),be},a.rebind(be,Ce,"on"),ge==null?be:be.get(Ur(ge))}function Ur(C){return C.length===1?function(W,se){C(W==null?se:null)}:C}function Sn(C){var W=C.responseType;return W&&W!=="text"?C.response:C.responseText}a.dsv=function(C,W){var se=new RegExp('["'+C+`
]`),ge=C.charCodeAt(0);function be(gt,yt,Ft){arguments.length<3&&(Ft=yt,yt=null);var Ot=tn(gt,W,yt==null?Ce:Xe(yt),Ft);return Ot.row=function(rr){return arguments.length?Ot.response((yt=rr)==null?Ce:Xe(rr)):yt},Ot}function Ce(gt){return be.parse(gt.responseText)}function Xe(gt){return function(yt){return be.parse(yt.responseText,gt)}}be.parse=function(gt,yt){var Ft;return be.parseRows(gt,function(Ot,rr){if(Ft)return Ft(Ot,rr-1);var yr=function(Ut){for(var Jt={},or=Ot.length,xr=0;xr<or;++xr)Jt[Ot[xr]]=Ut[xr];return Jt};Ft=yt?function(Ut,Jt){return yt(yr(Ut),Jt)}:yr})},be.parseRows=function(gt,yt){var Ft={},Ot={},rr=[],yr=gt.length,Ut=0,Jt=0,or,xr;function Cr(){if(Ut>=yr)return Ot;if(xr)return xr=!1,Ft;var rn=Ut;if(gt.charCodeAt(rn)===34){for(var xn=rn;xn++<yr;)if(gt.charCodeAt(xn)===34){if(gt.charCodeAt(xn+1)!==34)break;++xn}Ut=xn+2;var Cn=gt.charCodeAt(xn+1);return Cn===13?(xr=!0,gt.charCodeAt(xn+2)===10&&++Ut):Cn===10&&(xr=!0),gt.slice(rn+1,xn).replace(/""/g,'"')}for(;Ut<yr;){var Cn=gt.charCodeAt(Ut++),An=1;if(Cn===10)xr=!0;else if(Cn===13)xr=!0,gt.charCodeAt(Ut)===10&&(++Ut,++An);else if(Cn!==ge)continue;return gt.slice(rn,Ut-An)}return gt.slice(rn)}for(;(or=Cr())!==Ot;){for(var ur=[];or!==Ft&&or!==Ot;)ur.push(or),or=Cr();yt&&(ur=yt(ur,Jt++))==null||rr.push(ur)}return rr},be.format=function(gt){if(Array.isArray(gt[0]))return be.formatRows(gt);var yt=new q,Ft=[];return gt.forEach(function(Ot){for(var rr in Ot)yt.has(rr)||Ft.push(yt.add(rr))}),[Ft.map(tt).join(C)].concat(gt.map(function(Ot){return Ft.map(function(rr){return tt(Ot[rr])}).join(C)})).join(`
`)},be.formatRows=function(gt){return gt.map(Ge).join(`
`)};function Ge(gt){return gt.map(tt).join(C)}function tt(gt){return se.test(gt)?'"'+gt.replace(/\"/g,'""')+'"':gt}return be},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("	","text/tab-separated-values");var wn,hn,bn,mn,Dn=this[X(this,"requestAnimationFrame")]||function(C){setTimeout(C,17)};a.timer=function(){Yn.apply(this,arguments)};function Yn(C,W,se){var ge=arguments.length;ge<2&&(W=0),ge<3&&(se=Date.now());var be=se+W,Ce={c:C,t:be,n:null};return hn?hn.n=Ce:wn=Ce,hn=Ce,bn||(mn=clearTimeout(mn),bn=1,Dn(hi)),Ce}function hi(){var C=mi(),W=Zi()-C;W>24?(isFinite(W)&&(clearTimeout(mn),mn=setTimeout(hi,W)),bn=0):(bn=1,Dn(hi))}a.timer.flush=function(){mi(),Zi()};function mi(){for(var C=Date.now(),W=wn;W;)C>=W.t&&W.c(C-W.t)&&(W.c=null),W=W.n;return C}function Zi(){for(var C,W=wn,se=1/0;W;)W.c?(W.t<se&&(se=W.t),W=(C=W).n):W=C?C.n=W.n:wn=W.n;return hn=C,se}a.round=function(C,W){return W?Math.round(C*(W=Math.pow(10,W)))/W:Math.round(C)},a.geom={};function Bn(C){return C[0]}function Ai(C){return C[1]}a.geom.hull=function(C){var W=Bn,se=Ai;if(arguments.length)return ge(C);function ge(be){if(be.length<3)return[];var Ce=Gr(W),Xe=Gr(se),Ge,tt=be.length,gt=[],yt=[];for(Ge=0;Ge<tt;Ge++)gt.push([+Ce.call(this,be[Ge],Ge),+Xe.call(this,be[Ge],Ge),Ge]);for(gt.sort(Mo),Ge=0;Ge<tt;Ge++)yt.push([gt[Ge][0],-gt[Ge][1]]);var Ft=vi(gt),Ot=vi(yt),rr=Ot[0]===Ft[0],yr=Ot[Ot.length-1]===Ft[Ft.length-1],Ut=[];for(Ge=Ft.length-1;Ge>=0;--Ge)Ut.push(be[gt[Ft[Ge]][2]]);for(Ge=+rr;Ge<Ot.length-yr;++Ge)Ut.push(be[gt[Ot[Ge]][2]]);return Ut}return ge.x=function(be){return arguments.length?(W=be,ge):W},ge.y=function(be){return arguments.length?(se=be,ge):se},ge};function vi(C){for(var W=C.length,se=[0,1],ge=2,be=2;be<W;be++){for(;ge>1&&Ae(C[se[ge-2]],C[se[ge-1]],C[be])<=0;)--ge;se[ge++]=be}return se.slice(0,ge)}function Mo(C,W){return C[0]-W[0]||C[1]-W[1]}a.geom.polygon=function(C){return $(C,sa),C};var sa=a.geom.polygon.prototype=[];sa.area=function(){for(var C=-1,W=this.length,se,ge=this[W-1],be=0;++C<W;)se=ge,ge=this[C],be+=se[1]*ge[0]-se[0]*ge[1];return be*.5},sa.centroid=function(C){var W=-1,se=this.length,ge=0,be=0,Ce,Xe=this[se-1],Ge;for(arguments.length||(C=-1/(6*this.area()));++W<se;)Ce=Xe,Xe=this[W],Ge=Ce[0]*Xe[1]-Xe[0]*Ce[1],ge+=(Ce[0]+Xe[0])*Ge,be+=(Ce[1]+Xe[1])*Ge;return[ge*C,be*C]},sa.clip=function(C){for(var W,se=Kn(C),ge=-1,be=this.length-Kn(this),Ce,Xe,Ge=this[be-1],tt,gt,yt;++ge<be;){for(W=C.slice(),C.length=0,tt=this[ge],gt=W[(Xe=W.length-se)-1],Ce=-1;++Ce<Xe;)yt=W[Ce],Ea(yt,Ge,tt)?(Ea(gt,Ge,tt)||C.push(Oa(gt,yt,Ge,tt)),C.push(yt)):Ea(gt,Ge,tt)&&C.push(Oa(gt,yt,Ge,tt)),gt=yt;se&&C.push(C[0]),Ge=tt}return C};function Ea(C,W,se){return(se[0]-W[0])*(C[1]-W[1])<(se[1]-W[1])*(C[0]-W[0])}function Oa(C,W,se,ge){var be=C[0],Ce=se[0],Xe=W[0]-be,Ge=ge[0]-Ce,tt=C[1],gt=se[1],yt=W[1]-tt,Ft=ge[1]-gt,Ot=(Ge*(tt-gt)-Ft*(be-Ce))/(Ft*Xe-Ge*yt);return[be+Ot*Xe,tt+Ot*yt]}function Kn(C){var W=C[0],se=C[C.length-1];return!(W[0]-se[0]||W[1]-se[1])}var ko,to,Wi,ro=[],Ts,ya,Io=[];function za(){Gl(this),this.edge=this.site=this.circle=null}function us(C){var W=ro.pop()||new za;return W.site=C,W}function Jo(C){As(C),Wi.remove(C),ro.push(C),Gl(C)}function Ta(C){var W=C.circle,se=W.x,ge=W.cy,be={x:se,y:ge},Ce=C.P,Xe=C.N,Ge=[C];Jo(C);for(var tt=Ce;tt.circle&&S(se-tt.circle.x)<pt&&S(ge-tt.circle.cy)<pt;)Ce=tt.P,Ge.unshift(tt),Jo(tt),tt=Ce;Ge.unshift(tt),As(tt);for(var gt=Xe;gt.circle&&S(se-gt.circle.x)<pt&&S(ge-gt.circle.cy)<pt;)Xe=gt.N,Ge.push(gt),Jo(gt),gt=Xe;Ge.push(gt),As(gt);var yt=Ge.length,Ft;for(Ft=1;Ft<yt;++Ft)gt=Ge[Ft],tt=Ge[Ft-1],xl(gt.edge,tt.site,gt.site,be);tt=Ge[0],gt=Ge[yt-1],gt.edge=co(tt.site,gt.site,null,be),$o(tt),$o(gt)}function di(C){for(var W=C.x,se=C.y,ge,be,Ce,Xe,Ge=Wi._;Ge;)if(Ce=zs(Ge,se)-W,Ce>pt)Ge=Ge.L;else if(Xe=W-Ya(Ge,se),Xe>pt){if(!Ge.R){ge=Ge;break}Ge=Ge.R}else{Ce>-pt?(ge=Ge.P,be=Ge):Xe>-pt?(ge=Ge,be=Ge.N):ge=be=Ge;break}var tt=us(C);if(Wi.insert(ge,tt),!(!ge&&!be)){if(ge===be){As(ge),be=us(ge.site),Wi.insert(tt,be),tt.edge=be.edge=co(ge.site,tt.site),$o(ge),$o(be);return}if(!be){tt.edge=co(ge.site,tt.site);return}As(ge),As(be);var gt=ge.site,yt=gt.x,Ft=gt.y,Ot=C.x-yt,rr=C.y-Ft,yr=be.site,Ut=yr.x-yt,Jt=yr.y-Ft,or=2*(Ot*Jt-rr*Ut),xr=Ot*Ot+rr*rr,Cr=Ut*Ut+Jt*Jt,ur={x:(Jt*xr-rr*Cr)/or+yt,y:(Ot*Cr-Ut*xr)/or+Ft};xl(be.edge,gt,yr,ur),tt.edge=co(gt,C,null,ur),be.edge=co(C,yr,null,ur),$o(ge),$o(be)}}function zs(C,W){var se=C.site,ge=se.x,be=se.y,Ce=be-W;if(!Ce)return ge;var Xe=C.P;if(!Xe)return-1/0;se=Xe.site;var Ge=se.x,tt=se.y,gt=tt-W;if(!gt)return Ge;var yt=Ge-ge,Ft=1/Ce-1/gt,Ot=yt/gt;return Ft?(-Ot+Math.sqrt(Ot*Ot-2*Ft*(yt*yt/(-2*gt)-tt+gt/2+be-Ce/2)))/Ft+ge:(ge+Ge)/2}function Ya(C,W){var se=C.N;if(se)return zs(se,W);var ge=C.site;return ge.y===W?ge.x:1/0}function _a(C){this.site=C,this.edges=[]}_a.prototype.prepare=function(){for(var C=this.edges,W=C.length,se;W--;)se=C[W].edge,(!se.b||!se.a)&&C.splice(W,1);return C.sort(cs),C.length};function Ba(C){for(var W=C[0][0],se=C[1][0],ge=C[0][1],be=C[1][1],Ce,Xe,Ge,tt,gt=to,yt=gt.length,Ft,Ot,rr,yr,Ut,Jt;yt--;)if(Ft=gt[yt],!(!Ft||!Ft.prepare()))for(rr=Ft.edges,yr=rr.length,Ot=0;Ot<yr;)Jt=rr[Ot].end(),Ge=Jt.x,tt=Jt.y,Ut=rr[++Ot%yr].start(),Ce=Ut.x,Xe=Ut.y,(S(Ge-Ce)>pt||S(tt-Xe)>pt)&&(rr.splice(Ot,0,new Ho(zu(Ft.site,Jt,S(Ge-W)<pt&&be-tt>pt?{x:W,y:S(Ce-W)<pt?Xe:be}:S(tt-be)<pt&&se-Ge>pt?{x:S(Xe-be)<pt?Ce:se,y:be}:S(Ge-se)<pt&&tt-ge>pt?{x:se,y:S(Ce-se)<pt?Xe:ge}:S(tt-ge)<pt&&Ge-W>pt?{x:S(Xe-ge)<pt?Ce:W,y:ge}:null),Ft.site,null)),++yr)}function cs(C,W){return W.angle-C.angle}function fs(){Gl(this),this.x=this.y=this.arc=this.site=this.cy=null}function $o(C){var W=C.P,se=C.N;if(!(!W||!se)){var ge=W.site,be=C.site,Ce=se.site;if(ge!==Ce){var Xe=be.x,Ge=be.y,tt=ge.x-Xe,gt=ge.y-Ge,yt=Ce.x-Xe,Jt=Ce.y-Ge,Ft=2*(tt*Jt-gt*yt);if(!(Ft>=-kt)){var Ot=tt*tt+gt*gt,rr=yt*yt+Jt*Jt,yr=(Jt*Ot-gt*rr)/Ft,Ut=(tt*rr-yt*Ot)/Ft,Jt=Ut+Ge,or=Io.pop()||new fs;or.arc=C,or.site=be,or.x=yr+Xe,or.y=Jt+Math.sqrt(yr*yr+Ut*Ut),or.cy=Jt,C.circle=or;for(var xr=null,Cr=ya._;Cr;)if(or.y<Cr.y||or.y===Cr.y&&or.x<=Cr.x)if(Cr.L)Cr=Cr.L;else{xr=Cr.P;break}else if(Cr.R)Cr=Cr.R;else{xr=Cr;break}ya.insert(xr,or),xr||(Ts=or)}}}}function As(C){var W=C.circle;W&&(W.P||(Ts=W.N),ya.remove(W),Io.push(W),Gl(W),C.circle=null)}function Fu(C,W,se,ge){return function(be){var Ce=be.a,Xe=be.b,Ge=Ce.x,tt=Ce.y,gt=Xe.x,yt=Xe.y,Ft=0,Ot=1,rr=gt-Ge,yr=yt-tt,Ut;if(Ut=C-Ge,!(!rr&&Ut>0)){if(Ut/=rr,rr<0){if(Ut<Ft)return;Ut<Ot&&(Ot=Ut)}else if(rr>0){if(Ut>Ot)return;Ut>Ft&&(Ft=Ut)}if(Ut=se-Ge,!(!rr&&Ut<0)){if(Ut/=rr,rr<0){if(Ut>Ot)return;Ut>Ft&&(Ft=Ut)}else if(rr>0){if(Ut<Ft)return;Ut<Ot&&(Ot=Ut)}if(Ut=W-tt,!(!yr&&Ut>0)){if(Ut/=yr,yr<0){if(Ut<Ft)return;Ut<Ot&&(Ot=Ut)}else if(yr>0){if(Ut>Ot)return;Ut>Ft&&(Ft=Ut)}if(Ut=ge-tt,!(!yr&&Ut<0)){if(Ut/=yr,yr<0){if(Ut>Ot)return;Ut>Ft&&(Ft=Ut)}else if(yr>0){if(Ut<Ft)return;Ut<Ot&&(Ot=Ut)}return Ft>0&&(be.a={x:Ge+Ft*rr,y:tt+Ft*yr}),Ot<1&&(be.b={x:Ge+Ot*rr,y:tt+Ot*yr}),be}}}}}}function Ou(C){for(var W=ko,se=Fu(C[0][0],C[0][1],C[1][0],C[1][1]),ge=W.length,be;ge--;)be=W[ge],(!Vl(be,C)||!se(be)||S(be.a.x-be.b.x)<pt&&S(be.a.y-be.b.y)<pt)&&(be.a=be.b=null,W.splice(ge,1))}function Vl(C,W){var se=C.b;if(se)return!0;var ge=C.a,be=W[0][0],Ce=W[1][0],Xe=W[0][1],Ge=W[1][1],tt=C.l,gt=C.r,yt=tt.x,Ft=tt.y,Ot=gt.x,rr=gt.y,yr=(yt+Ot)/2,Ut=(Ft+rr)/2,Jt,or;if(rr===Ft){if(yr<be||yr>=Ce)return;if(yt>Ot){if(!ge)ge={x:yr,y:Xe};else if(ge.y>=Ge)return;se={x:yr,y:Ge}}else{if(!ge)ge={x:yr,y:Ge};else if(ge.y<Xe)return;se={x:yr,y:Xe}}}else if(Jt=(yt-Ot)/(rr-Ft),or=Ut-Jt*yr,Jt<-1||Jt>1)if(yt>Ot){if(!ge)ge={x:(Xe-or)/Jt,y:Xe};else if(ge.y>=Ge)return;se={x:(Ge-or)/Jt,y:Ge}}else{if(!ge)ge={x:(Ge-or)/Jt,y:Ge};else if(ge.y<Xe)return;se={x:(Xe-or)/Jt,y:Xe}}else if(Ft<rr){if(!ge)ge={x:be,y:Jt*be+or};else if(ge.x>=Ce)return;se={x:Ce,y:Jt*Ce+or}}else{if(!ge)ge={x:Ce,y:Jt*Ce+or};else if(ge.x<be)return;se={x:be,y:Jt*be+or}}return C.a=ge,C.b=se,!0}function Zc(C,W){this.l=C,this.r=W,this.a=this.b=null}function co(C,W,se,ge){var be=new Zc(C,W);return ko.push(be),se&&xl(be,C,W,se),ge&&xl(be,W,C,ge),to[C.i].edges.push(new Ho(be,C,W)),to[W.i].edges.push(new Ho(be,W,C)),be}function zu(C,W,se){var ge=new Zc(C,null);return ge.a=W,ge.b=se,ko.push(ge),ge}function xl(C,W,se,ge){!C.a&&!C.b?(C.a=ge,C.l=W,C.r=se):C.l===se?C.b=ge:C.a=ge}function Ho(C,W,se){var ge=C.a,be=C.b;this.edge=C,this.site=W,this.angle=se?Math.atan2(se.y-W.y,se.x-W.x):C.l===W?Math.atan2(be.x-ge.x,ge.y-be.y):Math.atan2(ge.x-be.x,be.y-ge.y)}Ho.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Bs(){this._=null}function Gl(C){C.U=C.C=C.L=C.R=C.P=C.N=null}Bs.prototype={insert:function(C,W){var se,ge,be;if(C){if(W.P=C,W.N=C.N,C.N&&(C.N.P=W),C.N=W,C.R){for(C=C.R;C.L;)C=C.L;C.L=W}else C.R=W;se=C}else this._?(C=Ss(this._),W.P=null,W.N=C,C.P=C.L=W,se=C):(W.P=W.N=null,this._=W,se=null);for(W.L=W.R=null,W.U=se,W.C=!0,C=W;se&&se.C;)ge=se.U,se===ge.L?(be=ge.R,be&&be.C?(se.C=be.C=!1,ge.C=!0,C=ge):(C===se.R&&(Zl(this,se),C=se,se=C.U),se.C=!1,ge.C=!0,il(this,ge))):(be=ge.L,be&&be.C?(se.C=be.C=!1,ge.C=!0,C=ge):(C===se.L&&(il(this,se),C=se,se=C.U),se.C=!1,ge.C=!0,Zl(this,ge))),se=C.U;this._.C=!1},remove:function(C){C.N&&(C.N.P=C.P),C.P&&(C.P.N=C.N),C.N=C.P=null;var W=C.U,se,ge=C.L,be=C.R,Ce,Xe;if(ge?be?Ce=Ss(be):Ce=ge:Ce=be,W?W.L===C?W.L=Ce:W.R=Ce:this._=Ce,ge&&be?(Xe=Ce.C,Ce.C=C.C,Ce.L=ge,ge.U=Ce,Ce!==be?(W=Ce.U,Ce.U=C.U,C=Ce.R,W.L=C,Ce.R=be,be.U=Ce):(Ce.U=W,W=Ce,C=Ce.R)):(Xe=C.C,C=Ce),C&&(C.U=W),!Xe){if(C&&C.C){C.C=!1;return}do{if(C===this._)break;if(C===W.L){if(se=W.R,se.C&&(se.C=!1,W.C=!0,Zl(this,W),se=W.R),se.L&&se.L.C||se.R&&se.R.C){(!se.R||!se.R.C)&&(se.L.C=!1,se.C=!0,il(this,se),se=W.R),se.C=W.C,W.C=se.R.C=!1,Zl(this,W),C=this._;break}}else if(se=W.L,se.C&&(se.C=!1,W.C=!0,il(this,W),se=W.L),se.L&&se.L.C||se.R&&se.R.C){(!se.L||!se.L.C)&&(se.R.C=!1,se.C=!0,Zl(this,se),se=W.L),se.C=W.C,W.C=se.L.C=!1,il(this,W),C=this._;break}se.C=!0,C=W,W=W.U}while(!C.C);C&&(C.C=!1)}}};function Zl(C,W){var se=W,ge=W.R,be=se.U;be?be.L===se?be.L=ge:be.R=ge:C._=ge,ge.U=be,se.U=ge,se.R=ge.L,se.R&&(se.R.U=se),ge.L=se}function il(C,W){var se=W,ge=W.L,be=se.U;be?be.L===se?be.L=ge:be.R=ge:C._=ge,ge.U=be,se.U=ge,se.L=ge.R,se.L&&(se.L.U=se),ge.R=se}function Ss(C){for(;C.L;)C=C.L;return C}function Bu(C,W){var se=C.sort(wl).pop(),ge,be,Ce;for(ko=[],to=new Array(C.length),Wi=new Bs,ya=new Bs;;)if(Ce=Ts,se&&(!Ce||se.y<Ce.y||se.y===Ce.y&&se.x<Ce.x))(se.x!==ge||se.y!==be)&&(to[se.i]=new _a(se),di(se),ge=se.x,be=se.y),se=C.pop();else if(Ce)Ta(Ce.arc);else break;W&&(Ou(W),Ba(W));var Xe={cells:to,edges:ko};return Wi=ya=ko=to=null,Xe}function wl(C,W){return W.y-C.y||W.x-C.x}a.geom.voronoi=function(C){var W=Bn,se=Ai,ge=W,be=se,Ce=la;if(C)return Xe(C);function Xe(tt){var gt=new Array(tt.length),yt=Ce[0][0],Ft=Ce[0][1],Ot=Ce[1][0],rr=Ce[1][1];return Bu(Ge(tt),Ce).cells.forEach(function(yr,Ut){var Jt=yr.edges,or=yr.site,xr=gt[Ut]=Jt.length?Jt.map(function(Cr){var ur=Cr.start();return[ur.x,ur.y]}):or.x>=yt&&or.x<=Ot&&or.y>=Ft&&or.y<=rr?[[yt,rr],[Ot,rr],[Ot,Ft],[yt,Ft]]:[];xr.point=tt[Ut]}),gt}function Ge(tt){return tt.map(function(gt,yt){return{x:Math.round(ge(gt,yt)/pt)*pt,y:Math.round(be(gt,yt)/pt)*pt,i:yt}})}return Xe.links=function(tt){return Bu(Ge(tt)).edges.filter(function(gt){return gt.l&&gt.r}).map(function(gt){return{source:tt[gt.l.i],target:tt[gt.r.i]}})},Xe.triangles=function(tt){var gt=[];return Bu(Ge(tt)).cells.forEach(function(yt,Ft){for(var Ot=yt.site,rr=yt.edges.sort(cs),yr=-1,Ut=rr.length,Jt,or=rr[Ut-1].edge,xr=or.l===Ot?or.r:or.l;++yr<Ut;)Jt=xr,or=rr[yr].edge,xr=or.l===Ot?or.r:or.l,Ft<Jt.i&&Ft<xr.i&&uu(Ot,Jt,xr)<0&&gt.push([tt[Ft],tt[Jt.i],tt[xr.i]])}),gt},Xe.x=function(tt){return arguments.length?(ge=Gr(W=tt),Xe):W},Xe.y=function(tt){return arguments.length?(be=Gr(se=tt),Xe):se},Xe.clipExtent=function(tt){return arguments.length?(Ce=tt==null?la:tt,Xe):Ce===la?null:Ce},Xe.size=function(tt){return arguments.length?Xe.clipExtent(tt&&[[0,0],tt]):Ce===la?null:Ce&&Ce[1]},Xe};var la=[[-1e6,-1e6],[1e6,1e6]];function uu(C,W,se){return(C.x-se.x)*(W.y-C.y)-(C.x-W.x)*(se.y-C.y)}a.geom.delaunay=function(C){return a.geom.voronoi().triangles(C)},a.geom.quadtree=function(C,W,se,ge,be){var Ce=Bn,Xe=Ai,Ge;if(Ge=arguments.length)return Ce=gi,Xe=Ji,Ge===3&&(be=se,ge=W,se=W=0),tt(C);function tt(gt){var yt,Ft=Gr(Ce),Ot=Gr(Xe),rr,yr,Ut,Jt,or,xr,Cr,ur;if(W!=null)or=W,xr=se,Cr=ge,ur=be;else if(Cr=ur=-(or=xr=1/0),rr=[],yr=[],Jt=gt.length,Ge)for(Ut=0;Ut<Jt;++Ut)yt=gt[Ut],yt.x<or&&(or=yt.x),yt.y<xr&&(xr=yt.y),yt.x>Cr&&(Cr=yt.x),yt.y>ur&&(ur=yt.y),rr.push(yt.x),yr.push(yt.y);else for(Ut=0;Ut<Jt;++Ut){var rn=+Ft(yt=gt[Ut],Ut),xn=+Ot(yt,Ut);rn<or&&(or=rn),xn<xr&&(xr=xn),rn>Cr&&(Cr=rn),xn>ur&&(ur=xn),rr.push(rn),yr.push(xn)}var Cn=Cr-or,An=ur-xr;Cn>An?ur=xr+Cn:Cr=or+An;function Nn(Wn,ni,Li,na,ia,Tn,fi,pi){if(!(isNaN(Li)||isNaN(na)))if(Wn.leaf){var Oi=Wn.x,Da=Wn.y;if(Oi!=null)if(S(Oi-Li)+S(Da-na)<.01)Gn(Wn,ni,Li,na,ia,Tn,fi,pi);else{var no=Wn.point;Wn.x=Wn.y=Wn.point=null,Gn(Wn,no,Oi,Da,ia,Tn,fi,pi),Gn(Wn,ni,Li,na,ia,Tn,fi,pi)}else Wn.x=Li,Wn.y=na,Wn.point=ni}else Gn(Wn,ni,Li,na,ia,Tn,fi,pi)}function Gn(Wn,ni,Li,na,ia,Tn,fi,pi){var Oi=(ia+fi)*.5,Da=(Tn+pi)*.5,no=Li>=Oi,Wa=na>=Da,vo=Wa<<1|no;Wn.leaf=!1,Wn=Wn.nodes[vo]||(Wn.nodes[vo]=$i()),no?ia=Oi:fi=Oi,Wa?Tn=Da:pi=Da,Nn(Wn,ni,Li,na,ia,Tn,fi,pi)}var ui=$i();if(ui.add=function(Wn){Nn(ui,Wn,+Ft(Wn,++Ut),+Ot(Wn,Ut),or,xr,Cr,ur)},ui.visit=function(Wn){Si(Wn,ui,or,xr,Cr,ur)},ui.find=function(Wn){return Wl(ui,Wn[0],Wn[1],or,xr,Cr,ur)},Ut=-1,W==null){for(;++Ut<Jt;)Nn(ui,gt[Ut],rr[Ut],yr[Ut],or,xr,Cr,ur);--Ut}else gt.forEach(ui.add);return rr=yr=gt=yt=null,ui}return tt.x=function(gt){return arguments.length?(Ce=gt,tt):Ce},tt.y=function(gt){return arguments.length?(Xe=gt,tt):Xe},tt.extent=function(gt){return arguments.length?(gt==null?W=se=ge=be=null:(W=+gt[0][0],se=+gt[0][1],ge=+gt[1][0],be=+gt[1][1]),tt):W==null?null:[[W,se],[ge,be]]},tt.size=function(gt){return arguments.length?(gt==null?W=se=ge=be=null:(W=se=0,ge=+gt[0],be=+gt[1]),tt):W==null?null:[ge-W,be-se]},tt};function gi(C){return C.x}function Ji(C){return C.y}function $i(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Si(C,W,se,ge,be,Ce){if(!C(W,se,ge,be,Ce)){var Xe=(se+be)*.5,Ge=(ge+Ce)*.5,tt=W.nodes;tt[0]&&Si(C,tt[0],se,ge,Xe,Ge),tt[1]&&Si(C,tt[1],Xe,ge,be,Ge),tt[2]&&Si(C,tt[2],se,Ge,Xe,Ce),tt[3]&&Si(C,tt[3],Xe,Ge,be,Ce)}}function Wl(C,W,se,ge,be,Ce,Xe){var Ge=1/0,tt;return function gt(yt,Ft,Ot,rr,yr){if(!(Ft>Ce||Ot>Xe||rr<ge||yr<be)){if(Ut=yt.point){var Ut,Jt=W-yt.x,or=se-yt.y,xr=Jt*Jt+or*or;if(xr<Ge){var Cr=Math.sqrt(Ge=xr);ge=W-Cr,be=se-Cr,Ce=W+Cr,Xe=se+Cr,tt=Ut}}for(var ur=yt.nodes,rn=(Ft+rr)*.5,xn=(Ot+yr)*.5,Cn=W>=rn,An=se>=xn,Nn=An<<1|Cn,Gn=Nn+4;Nn<Gn;++Nn)if(yt=ur[Nn&3])switch(Nn&3){case 0:gt(yt,Ft,Ot,rn,xn);break;case 1:gt(yt,rn,Ot,rr,xn);break;case 2:gt(yt,Ft,xn,rn,yr);break;case 3:gt(yt,rn,xn,rr,yr);break}}}(C,ge,be,Ce,Xe),tt}a.interpolateRgb=Ns;function Ns(C,W){C=a.rgb(C),W=a.rgb(W);var se=C.r,ge=C.g,be=C.b,Ce=W.r-se,Xe=W.g-ge,Ge=W.b-be;return function(tt){return"#"+mr(Math.round(se+Ce*tt))+mr(Math.round(ge+Xe*tt))+mr(Math.round(be+Ge*tt))}}a.interpolateObject=Wc;function Wc(C,W){var se={},ge={},be;for(be in C)be in W?se[be]=Vo(C[be],W[be]):ge[be]=C[be];for(be in W)be in C||(ge[be]=W[be]);return function(Ce){for(be in se)ge[be]=se[be](Ce);return ge}}a.interpolateNumber=Es;function Es(C,W){return C=+C,W=+W,function(se){return C*(1-se)+W*se}}a.interpolateString=Nu;function Nu(C,W){var se=oc.lastIndex=al.lastIndex=0,ge,be,Ce,Xe=-1,Ge=[],tt=[];for(C=C+"",W=W+"";(ge=oc.exec(C))&&(be=al.exec(W));)(Ce=be.index)>se&&(Ce=W.slice(se,Ce),Ge[Xe]?Ge[Xe]+=Ce:Ge[++Xe]=Ce),(ge=ge[0])===(be=be[0])?Ge[Xe]?Ge[Xe]+=be:Ge[++Xe]=be:(Ge[++Xe]=null,tt.push({i:Xe,x:Es(ge,be)})),se=al.lastIndex;return se<W.length&&(Ce=W.slice(se),Ge[Xe]?Ge[Xe]+=Ce:Ge[++Xe]=Ce),Ge.length<2?tt[0]?(W=tt[0].x,function(gt){return W(gt)+""}):function(){return W}:(W=tt.length,function(gt){for(var yt=0,Ft;yt<W;++yt)Ge[(Ft=tt[yt]).i]=Ft.x(gt);return Ge.join("")})}var oc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,al=new RegExp(oc.source,"g");a.interpolate=Vo;function Vo(C,W){for(var se=a.interpolators.length,ge;--se>=0&&!(ge=a.interpolators[se](C,W)););return ge}a.interpolators=[function(C,W){var se=typeof W;return(se==="string"?_r.has(W.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(W)?Ns:Nu:W instanceof vt?Ns:Array.isArray(W)?ol:se==="object"&&isNaN(W)?Wc:Es)(C,W)}],a.interpolateArray=ol;function ol(C,W){var se=[],ge=[],be=C.length,Ce=W.length,Xe=Math.min(C.length,W.length),Ge;for(Ge=0;Ge<Xe;++Ge)se.push(Vo(C[Ge],W[Ge]));for(;Ge<be;++Ge)ge[Ge]=C[Ge];for(;Ge<Ce;++Ge)ge[Ge]=W[Ge];return function(tt){for(Ge=0;Ge<Xe;++Ge)ge[Ge]=se[Ge](tt);return ge}}var jl=function(){return we},Uu=a.map({linear:jl,poly:Al,quad:function(){return sl},cubic:function(){return sc},sin:function(){return Us},exp:function(){return Sl},circle:function(){return Hu},elastic:Vu,back:Hs,bounce:function(){return cu}}),jc=a.map({in:we,out:Cs,"in-out":Qo,"out-in":function(C){return Qo(Cs(C))}});a.ease=function(C){var W=C.indexOf("-"),se=W>=0?C.slice(0,W):C,ge=W>=0?C.slice(W+1):"in";return se=Uu.get(se)||jl,ge=jc.get(ge)||we,Lo(ge(se.apply(null,s.call(arguments,1))))};function Lo(C){return function(W){return W<=0?0:W>=1?1:C(W)}}function Cs(C){return function(W){return 1-C(1-W)}}function Qo(C){return function(W){return .5*(W<.5?C(2*W):2-C(2-2*W))}}function sl(C){return C*C}function sc(C){return C*C*C}function Tl(C){if(C<=0)return 0;if(C>=1)return 1;var W=C*C,se=W*C;return 4*(C<.5?se:3*(C-W)+se-.75)}function Al(C){return function(W){return Math.pow(W,C)}}function Us(C){return 1-Math.cos(C*ft)}function Sl(C){return Math.pow(2,10*(C-1))}function Hu(C){return 1-Math.sqrt(1-C*C)}function Vu(C,W){var se;return arguments.length<2&&(W=.45),arguments.length?se=W/rt*Math.asin(1/C):(C=1,se=W/4),function(ge){return 1+C*Math.pow(2,-10*ge)*Math.sin((ge-se)*rt/W)}}function Hs(C){return C||(C=1.70158),function(W){return W*W*((C+1)*W-C)}}function cu(C){return C<1/2.75?7.5625*C*C:C<2/2.75?7.5625*(C-=1.5/2.75)*C+.75:C<2.5/2.75?7.5625*(C-=2.25/2.75)*C+.9375:7.5625*(C-=2.625/2.75)*C+.984375}a.interpolateHcl=fu;function fu(C,W){C=a.hcl(C),W=a.hcl(W);var se=C.h,ge=C.c,be=C.l,Ce=W.h-se,Xe=W.c-ge,Ge=W.l-be;return isNaN(Xe)&&(Xe=0,ge=isNaN(ge)?W.c:ge),isNaN(Ce)?(Ce=0,se=isNaN(se)?W.h:se):Ce>180?Ce-=360:Ce<-180&&(Ce+=360),function(tt){return Kr(se+Ce*tt,ge+Xe*tt,be+Ge*tt)+""}}a.interpolateHsl=hu;function hu(C,W){C=a.hsl(C),W=a.hsl(W);var se=C.h,ge=C.s,be=C.l,Ce=W.h-se,Xe=W.s-ge,Ge=W.l-be;return isNaN(Xe)&&(Xe=0,ge=isNaN(ge)?W.s:ge),isNaN(Ce)?(Ce=0,se=isNaN(se)?W.h:se):Ce>180?Ce-=360:Ce<-180&&(Ce+=360),function(tt){return Mr(se+Ce*tt,ge+Xe*tt,be+Ge*tt)+""}}a.interpolateLab=Gu;function Gu(C,W){C=a.lab(C),W=a.lab(W);var se=C.l,ge=C.a,be=C.b,Ce=W.l-se,Xe=W.a-ge,Ge=W.b-be;return function(tt){return xt(se+Ce*tt,ge+Xe*tt,be+Ge*tt)+""}}a.interpolateRound=Po;function Po(C,W){return W-=C,function(se){return Math.round(C+W*se)}}a.transform=function(C){var W=l.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(se){if(se!=null){W.setAttribute("transform",se);var ge=W.transform.baseVal.consolidate()}return new El(ge?ge.matrix:du)})(C)};function El(C){var W=[C.a,C.b],se=[C.c,C.d],ge=lc(W),be=hs(W,se),Ce=lc(Go(se,W,-be))||0;W[0]*se[1]<se[0]*W[1]&&(W[0]*=-1,W[1]*=-1,ge*=-1,be*=-1),this.rotate=(ge?Math.atan2(W[1],W[0]):Math.atan2(-se[0],se[1]))*Ue,this.translate=[C.e,C.f],this.scale=[ge,Ce],this.skew=Ce?Math.atan2(be,Ce)*Ue:0}El.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function hs(C,W){return C[0]*W[0]+C[1]*W[1]}function lc(C){var W=Math.sqrt(hs(C,C));return W&&(C[0]/=W,C[1]/=W),W}function Go(C,W,se){return C[0]+=se*W[0],C[1]+=se*W[1],C}var du={a:1,b:0,c:0,d:1,e:0,f:0};a.interpolateTransform=ds;function ll(C){return C.length?C.pop()+",":""}function Zu(C,W,se,ge){if(C[0]!==W[0]||C[1]!==W[1]){var be=se.push("translate(",null,",",null,")");ge.push({i:be-4,x:Es(C[0],W[0])},{i:be-2,x:Es(C[1],W[1])})}else(W[0]||W[1])&&se.push("translate("+W+")")}function Vs(C,W,se,ge){C!==W?(C-W>180?W+=360:W-C>180&&(C+=360),ge.push({i:se.push(ll(se)+"rotate(",null,")")-2,x:Es(C,W)})):W&&se.push(ll(se)+"rotate("+W+")")}function Wu(C,W,se,ge){C!==W?ge.push({i:se.push(ll(se)+"skewX(",null,")")-2,x:Es(C,W)}):W&&se.push(ll(se)+"skewX("+W+")")}function ul(C,W,se,ge){if(C[0]!==W[0]||C[1]!==W[1]){var be=se.push(ll(se)+"scale(",null,",",null,")");ge.push({i:be-4,x:Es(C[0],W[0])},{i:be-2,x:Es(C[1],W[1])})}else(W[0]!==1||W[1]!==1)&&se.push(ll(se)+"scale("+W+")")}function ds(C,W){var se=[],ge=[];return C=a.transform(C),W=a.transform(W),Zu(C.translate,W.translate,se,ge),Vs(C.rotate,W.rotate,se,ge),Wu(C.skew,W.skew,se,ge),ul(C.scale,W.scale,se,ge),C=W=null,function(be){for(var Ce=-1,Xe=ge.length,Ge;++Ce<Xe;)se[(Ge=ge[Ce]).i]=Ge.x(be);return se.join("")}}function fo(C,W){return W=(W-=C=+C)||1/W,function(se){return(se-C)/W}}function Cl(C,W){return W=(W-=C=+C)||1/W,function(se){return Math.max(0,Math.min(1,(se-C)/W))}}a.layout={},a.layout.bundle=function(){return function(C){for(var W=[],se=-1,ge=C.length;++se<ge;)W.push(Ro(C[se]));return W}};function Ro(C){for(var W=C.source,se=C.target,ge=ps(W,se),be=[W];W!==ge;)W=W.parent,be.push(W);for(var Ce=be.length;se!==ge;)be.splice(Ce,0,se),se=se.parent;return be}function Yc(C){for(var W=[],se=C.parent;se!=null;)W.push(C),C=se,se=se.parent;return W.push(C),W}function ps(C,W){if(C===W)return C;for(var se=Yc(C),ge=Yc(W),be=se.pop(),Ce=ge.pop(),Xe=null;be===Ce;)Xe=be,be=se.pop(),Ce=ge.pop();return Xe}a.layout.chord=function(){var C={},W,se,ge,be,Ce=0,Xe,Ge,tt;function gt(){var Ft={},Ot=[],rr=a.range(be),yr=[],Ut,Jt,or,xr,Cr;for(W=[],se=[],Ut=0,xr=-1;++xr<be;){for(Jt=0,Cr=-1;++Cr<be;)Jt+=ge[xr][Cr];Ot.push(Jt),yr.push(a.range(be)),Ut+=Jt}for(Xe&&rr.sort(function(ui,Wn){return Xe(Ot[ui],Ot[Wn])}),Ge&&yr.forEach(function(ui,Wn){ui.sort(function(ni,Li){return Ge(ge[Wn][ni],ge[Wn][Li])})}),Ut=(rt-Ce*be)/Ut,Jt=0,xr=-1;++xr<be;){for(or=Jt,Cr=-1;++Cr<be;){var ur=rr[xr],rn=yr[ur][Cr],xn=ge[ur][rn],Cn=Jt,An=Jt+=xn*Ut;Ft[ur+"-"+rn]={index:ur,subindex:rn,startAngle:Cn,endAngle:An,value:xn}}se[ur]={index:ur,startAngle:or,endAngle:Jt,value:Ot[ur]},Jt+=Ce}for(xr=-1;++xr<be;)for(Cr=xr-1;++Cr<be;){var Nn=Ft[xr+"-"+Cr],Gn=Ft[Cr+"-"+xr];(Nn.value||Gn.value)&&W.push(Nn.value<Gn.value?{source:Gn,target:Nn}:{source:Nn,target:Gn})}tt&&yt()}function yt(){W.sort(function(Ft,Ot){return tt((Ft.source.value+Ft.target.value)/2,(Ot.source.value+Ot.target.value)/2)})}return C.matrix=function(Ft){return arguments.length?(be=(ge=Ft)&&ge.length,W=se=null,C):ge},C.padding=function(Ft){return arguments.length?(Ce=Ft,W=se=null,C):Ce},C.sortGroups=function(Ft){return arguments.length?(Xe=Ft,W=se=null,C):Xe},C.sortSubgroups=function(Ft){return arguments.length?(Ge=Ft,W=null,C):Ge},C.sortChords=function(Ft){return arguments.length?(tt=Ft,W&&yt(),C):tt},C.chords=function(){return W||gt(),W},C.groups=function(){return se||gt(),se},C},a.layout.force=function(){var C={},W=a.dispatch("start","tick","end"),se,ge=[1,1],be,Ce,Xe=.9,Ge=Ms,tt=Dl,gt=-30,yt=mu,Ft=.1,Ot=.64,rr=[],yr=[],Ut,Jt,or;function xr(ur){return function(rn,xn,Cn,An){if(rn.point!==ur){var Nn=rn.cx-ur.x,Gn=rn.cy-ur.y,ui=An-xn,Wn=Nn*Nn+Gn*Gn;if(ui*ui/Ot<Wn){if(Wn<yt){var ni=rn.charge/Wn;ur.px-=Nn*ni,ur.py-=Gn*ni}return!0}if(rn.point&&Wn&&Wn<yt){var ni=rn.pointCharge/Wn;ur.px-=Nn*ni,ur.py-=Gn*ni}}return!rn.charge}}C.tick=function(){if((Ce*=.99)<.005)return se=null,W.end({type:"end",alpha:Ce=0}),!0;var ur=rr.length,rn=yr.length,xn,Cn,An,Nn,Gn,ui,Wn,ni,Li;for(Cn=0;Cn<rn;++Cn)An=yr[Cn],Nn=An.source,Gn=An.target,ni=Gn.x-Nn.x,Li=Gn.y-Nn.y,(ui=ni*ni+Li*Li)&&(ui=Ce*Jt[Cn]*((ui=Math.sqrt(ui))-Ut[Cn])/ui,ni*=ui,Li*=ui,Gn.x-=ni*(Wn=Nn.weight+Gn.weight?Nn.weight/(Nn.weight+Gn.weight):.5),Gn.y-=Li*Wn,Nn.x+=ni*(Wn=1-Wn),Nn.y+=Li*Wn);if((Wn=Ce*Ft)&&(ni=ge[0]/2,Li=ge[1]/2,Cn=-1,Wn))for(;++Cn<ur;)An=rr[Cn],An.x+=(ni-An.x)*Wn,An.y+=(Li-An.y)*Wn;if(gt)for(Kc(xn=a.geom.quadtree(rr),Ce,or),Cn=-1;++Cn<ur;)(An=rr[Cn]).fixed||xn.visit(xr(An));for(Cn=-1;++Cn<ur;)An=rr[Cn],An.fixed?(An.x=An.px,An.y=An.py):(An.x-=(An.px-(An.px=An.x))*Xe,An.y-=(An.py-(An.py=An.y))*Xe);W.tick({type:"tick",alpha:Ce})},C.nodes=function(ur){return arguments.length?(rr=ur,C):rr},C.links=function(ur){return arguments.length?(yr=ur,C):yr},C.size=function(ur){return arguments.length?(ge=ur,C):ge},C.linkDistance=function(ur){return arguments.length?(Ge=typeof ur=="function"?ur:+ur,C):Ge},C.distance=C.linkDistance,C.linkStrength=function(ur){return arguments.length?(tt=typeof ur=="function"?ur:+ur,C):tt},C.friction=function(ur){return arguments.length?(Xe=+ur,C):Xe},C.charge=function(ur){return arguments.length?(gt=typeof ur=="function"?ur:+ur,C):gt},C.chargeDistance=function(ur){return arguments.length?(yt=ur*ur,C):Math.sqrt(yt)},C.gravity=function(ur){return arguments.length?(Ft=+ur,C):Ft},C.theta=function(ur){return arguments.length?(Ot=ur*ur,C):Math.sqrt(Ot)},C.alpha=function(ur){return arguments.length?(ur=+ur,Ce?ur>0?Ce=ur:(se.c=null,se.t=NaN,se=null,W.end({type:"end",alpha:Ce=0})):ur>0&&(W.start({type:"start",alpha:Ce=ur}),se=Yn(C.tick)),C):Ce},C.start=function(){var ur,rn=rr.length,xn=yr.length,Cn=ge[0],An=ge[1],Nn,Gn;for(ur=0;ur<rn;++ur)(Gn=rr[ur]).index=ur,Gn.weight=0;for(ur=0;ur<xn;++ur)Gn=yr[ur],typeof Gn.source=="number"&&(Gn.source=rr[Gn.source]),typeof Gn.target=="number"&&(Gn.target=rr[Gn.target]),++Gn.source.weight,++Gn.target.weight;for(ur=0;ur<rn;++ur)Gn=rr[ur],isNaN(Gn.x)&&(Gn.x=ui("x",Cn)),isNaN(Gn.y)&&(Gn.y=ui("y",An)),isNaN(Gn.px)&&(Gn.px=Gn.x),isNaN(Gn.py)&&(Gn.py=Gn.y);if(Ut=[],typeof Ge=="function")for(ur=0;ur<xn;++ur)Ut[ur]=+Ge.call(this,yr[ur],ur);else for(ur=0;ur<xn;++ur)Ut[ur]=Ge;if(Jt=[],typeof tt=="function")for(ur=0;ur<xn;++ur)Jt[ur]=+tt.call(this,yr[ur],ur);else for(ur=0;ur<xn;++ur)Jt[ur]=tt;if(or=[],typeof gt=="function")for(ur=0;ur<rn;++ur)or[ur]=+gt.call(this,rr[ur],ur);else for(ur=0;ur<rn;++ur)or[ur]=gt;function ui(Wn,ni){if(!Nn){for(Nn=new Array(rn),ia=0;ia<rn;++ia)Nn[ia]=[];for(ia=0;ia<xn;++ia){var Li=yr[ia];Nn[Li.source.index].push(Li.target),Nn[Li.target.index].push(Li.source)}}for(var na=Nn[ur],ia=-1,Tn=na.length,fi;++ia<Tn;)if(!isNaN(fi=na[ia][Wn]))return fi;return Math.random()*ni}return C.resume()},C.resume=function(){return C.alpha(.1)},C.stop=function(){return C.alpha(0)},C.drag=function(){if(be||(be=a.behavior.drag().origin(we).on("dragstart.force",Xc).on("drag.force",Cr).on("dragend.force",Ds)),!arguments.length)return be;this.on("mouseover.force",pu).on("mouseout.force",ju).call(be)};function Cr(ur){ur.px=a.event.x,ur.py=a.event.y,C.resume()}return a.rebind(C,W,"on")};function Xc(C){C.fixed|=2}function Ds(C){C.fixed&=-7}function pu(C){C.fixed|=4,C.px=C.x,C.py=C.y}function ju(C){C.fixed&=-5}function Kc(C,W,se){var ge=0,be=0;if(C.charge=0,!C.leaf)for(var Ce=C.nodes,Xe=Ce.length,Ge=-1,tt;++Ge<Xe;)tt=Ce[Ge],tt!=null&&(Kc(tt,W,se),C.charge+=tt.charge,ge+=tt.charge*tt.cx,be+=tt.charge*tt.cy);if(C.point){C.leaf||(C.point.x+=Math.random()-.5,C.point.y+=Math.random()-.5);var gt=W*se[C.point.index];C.charge+=C.pointCharge=gt,ge+=gt*C.point.x,be+=gt*C.point.y}C.cx=ge/C.charge,C.cy=be/C.charge}var Ms=20,Dl=1,mu=1/0;a.layout.hierarchy=function(){var C=uc,W=Ml,se=es;function ge(be){var Ce=[be],Xe=[],Ge;for(be.depth=0;(Ge=Ce.pop())!=null;)if(Xe.push(Ge),(gt=W.call(ge,Ge,Ge.depth))&&(tt=gt.length)){for(var tt,gt,yt;--tt>=0;)Ce.push(yt=gt[tt]),yt.parent=Ge,yt.depth=Ge.depth+1;se&&(Ge.value=0),Ge.children=gt}else se&&(Ge.value=+se.call(ge,Ge,Ge.depth)||0),delete Ge.children;return qo(be,function(Ft){var Ot,rr;C&&(Ot=Ft.children)&&Ot.sort(C),se&&(rr=Ft.parent)&&(rr.value+=Ft.value)}),Xe}return ge.sort=function(be){return arguments.length?(C=be,ge):C},ge.children=function(be){return arguments.length?(W=be,ge):W},ge.value=function(be){return arguments.length?(se=be,ge):se},ge.revalue=function(be){return se&&(On(be,function(Ce){Ce.children&&(Ce.value=0)}),qo(be,function(Ce){var Xe;Ce.children||(Ce.value=+se.call(ge,Ce,Ce.depth)||0),(Xe=Ce.parent)&&(Xe.value+=Ce.value)})),be},ge};function ho(C,W){return a.rebind(C,W,"sort","children","value"),C.nodes=C,C.links=Mn,C}function On(C,W){for(var se=[C];(C=se.pop())!=null;)if(W(C),(be=C.children)&&(ge=be.length))for(var ge,be;--ge>=0;)se.push(be[ge])}function qo(C,W){for(var se=[C],ge=[];(C=se.pop())!=null;)if(ge.push(C),(Xe=C.children)&&(Ce=Xe.length))for(var be=-1,Ce,Xe;++be<Ce;)se.push(Xe[be]);for(;(C=ge.pop())!=null;)W(C)}function Ml(C){return C.children}function es(C){return C.value}function uc(C,W){return W.value-C.value}function Mn(C){return a.merge(C.map(function(W){return(W.children||[]).map(function(se){return{source:W,target:se}})}))}a.layout.partition=function(){var C=a.layout.hierarchy(),W=[1,1];function se(Ce,Xe,Ge,tt){var gt=Ce.children;if(Ce.x=Xe,Ce.y=Ce.depth*tt,Ce.dx=Ge,Ce.dy=tt,gt&&(Ft=gt.length)){var yt=-1,Ft,Ot,rr;for(Ge=Ce.value?Ge/Ce.value:0;++yt<Ft;)se(Ot=gt[yt],Xe,rr=Ot.value*Ge,tt),Xe+=rr}}function ge(Ce){var Xe=Ce.children,Ge=0;if(Xe&&(gt=Xe.length))for(var tt=-1,gt;++tt<gt;)Ge=Math.max(Ge,ge(Xe[tt]));return 1+Ge}function be(Ce,Xe){var Ge=C.call(this,Ce,Xe);return se(Ge[0],0,W[0],W[1]/ge(Ge[0])),Ge}return be.size=function(Ce){return arguments.length?(W=Ce,be):W},ho(be,C)},a.layout.pie=function(){var C=Number,W=Yl,se=0,ge=rt,be=0;function Ce(Xe){var Ge=Xe.length,tt=Xe.map(function(xr,Cr){return+C.call(Ce,xr,Cr)}),gt=+(typeof se=="function"?se.apply(this,arguments):se),yt=(typeof ge=="function"?ge.apply(this,arguments):ge)-gt,Ft=Math.min(Math.abs(yt)/Ge,+(typeof be=="function"?be.apply(this,arguments):be)),Ot=Ft*(yt<0?-1:1),rr=a.sum(tt),yr=rr?(yt-Ge*Ot)/rr:0,Ut=a.range(Ge),Jt=[],or;return W!=null&&Ut.sort(W===Yl?function(xr,Cr){return tt[Cr]-tt[xr]}:function(xr,Cr){return W(Xe[xr],Xe[Cr])}),Ut.forEach(function(xr){Jt[xr]={data:Xe[xr],value:or=tt[xr],startAngle:gt,endAngle:gt+=or*yr+Ot,padAngle:Ft}}),Jt}return Ce.value=function(Xe){return arguments.length?(C=Xe,Ce):C},Ce.sort=function(Xe){return arguments.length?(W=Xe,Ce):W},Ce.startAngle=function(Xe){return arguments.length?(se=Xe,Ce):se},Ce.endAngle=function(Xe){return arguments.length?(ge=Xe,Ce):ge},Ce.padAngle=function(Xe){return arguments.length?(be=Xe,Ce):be},Ce};var Yl={};a.layout.stack=function(){var C=we,W=kl,se=Yu,ge=ms,be=Jc,Ce=cc;function Xe(Ge,tt){if(!(yr=Ge.length))return Ge;var gt=Ge.map(function(xr,Cr){return C.call(Xe,xr,Cr)}),yt=gt.map(function(xr){return xr.map(function(Cr,ur){return[be.call(Xe,Cr,ur),Ce.call(Xe,Cr,ur)]})}),Ft=W.call(Xe,yt,tt);gt=a.permute(gt,Ft),yt=a.permute(yt,Ft);var Ot=se.call(Xe,yt,tt),rr=gt[0].length,yr,Ut,Jt,or;for(Jt=0;Jt<rr;++Jt)for(ge.call(Xe,gt[0][Jt],or=Ot[Jt],yt[0][Jt][1]),Ut=1;Ut<yr;++Ut)ge.call(Xe,gt[Ut][Jt],or+=yt[Ut-1][Jt][1],yt[Ut][Jt][1]);return Ge}return Xe.values=function(Ge){return arguments.length?(C=Ge,Xe):C},Xe.order=function(Ge){return arguments.length?(W=typeof Ge=="function"?Ge:fc.get(Ge)||kl,Xe):W},Xe.offset=function(Ge){return arguments.length?(se=typeof Ge=="function"?Ge:hc.get(Ge)||Yu,Xe):se},Xe.x=function(Ge){return arguments.length?(be=Ge,Xe):be},Xe.y=function(Ge){return arguments.length?(Ce=Ge,Xe):Ce},Xe.out=function(Ge){return arguments.length?(ge=Ge,Xe):ge},Xe};function Jc(C){return C.x}function cc(C){return C.y}function ms(C,W,se){C.y0=W,C.y=se}var fc=a.map({"inside-out":function(C){var W=C.length,se,ge,be=C.map(Xl),Ce=C.map(Il),Xe=a.range(W).sort(function(Ft,Ot){return be[Ft]-be[Ot]}),Ge=0,tt=0,gt=[],yt=[];for(se=0;se<W;++se)ge=Xe[se],Ge<tt?(Ge+=Ce[ge],gt.push(ge)):(tt+=Ce[ge],yt.push(ge));return yt.reverse().concat(gt)},reverse:function(C){return a.range(C.length).reverse()},default:kl}),hc=a.map({silhouette:function(C){var W=C.length,se=C[0].length,ge=[],be=0,Ce,Xe,Ge,tt=[];for(Xe=0;Xe<se;++Xe){for(Ce=0,Ge=0;Ce<W;Ce++)Ge+=C[Ce][Xe][1];Ge>be&&(be=Ge),ge.push(Ge)}for(Xe=0;Xe<se;++Xe)tt[Xe]=(be-ge[Xe])/2;return tt},wiggle:function(C){var W=C.length,se=C[0],ge=se.length,be,Ce,Xe,Ge,tt,gt,yt,Ft,Ot,rr=[];for(rr[0]=Ft=Ot=0,Ce=1;Ce<ge;++Ce){for(be=0,Ge=0;be<W;++be)Ge+=C[be][Ce][1];for(be=0,tt=0,yt=se[Ce][0]-se[Ce-1][0];be<W;++be){for(Xe=0,gt=(C[be][Ce][1]-C[be][Ce-1][1])/(2*yt);Xe<be;++Xe)gt+=(C[Xe][Ce][1]-C[Xe][Ce-1][1])/yt;tt+=gt*C[be][Ce][1]}rr[Ce]=Ft-=Ge?tt/Ge*yt:0,Ft<Ot&&(Ot=Ft)}for(Ce=0;Ce<ge;++Ce)rr[Ce]-=Ot;return rr},expand:function(C){var W=C.length,se=C[0].length,ge=1/W,be,Ce,Xe,Ge=[];for(Ce=0;Ce<se;++Ce){for(be=0,Xe=0;be<W;be++)Xe+=C[be][Ce][1];if(Xe)for(be=0;be<W;be++)C[be][Ce][1]/=Xe;else for(be=0;be<W;be++)C[be][Ce][1]=ge}for(Ce=0;Ce<se;++Ce)Ge[Ce]=0;return Ge},zero:Yu});function kl(C){return a.range(C.length)}function Yu(C){for(var W=-1,se=C[0].length,ge=[];++W<se;)ge[W]=0;return ge}function Xl(C){for(var W=1,se=0,ge=C[0][1],be,Ce=C.length;W<Ce;++W)(be=C[W][1])>ge&&(se=W,ge=be);return se}function Il(C){return C.reduce(Xu,0)}function Xu(C,W){return C+W[1]}a.layout.histogram=function(){var C=!0,W=Number,se=Gs,ge=Ku;function be(Ce,Ot){for(var Ge=[],tt=Ce.map(W,this),gt=se.call(this,tt,Ot),yt=ge.call(this,gt,tt,Ot),Ft,Ot=-1,rr=tt.length,yr=yt.length-1,Ut=C?1:1/rr,Jt;++Ot<yr;)Ft=Ge[Ot]=[],Ft.dx=yt[Ot+1]-(Ft.x=yt[Ot]),Ft.y=0;if(yr>0)for(Ot=-1;++Ot<rr;)Jt=tt[Ot],Jt>=gt[0]&&Jt<=gt[1]&&(Ft=Ge[a.bisect(yt,Jt,1,yr)-1],Ft.y+=Ut,Ft.push(Ce[Ot]));return Ge}return be.value=function(Ce){return arguments.length?(W=Ce,be):W},be.range=function(Ce){return arguments.length?(se=Gr(Ce),be):se},be.bins=function(Ce){return arguments.length?(ge=typeof Ce=="number"?function(Xe){return wo(Xe,Ce)}:Gr(Ce),be):ge},be.frequency=function(Ce){return arguments.length?(C=!!Ce,be):C},be};function Ku(C,W){return wo(C,Math.ceil(Math.log(W.length)/Math.LN2+1))}function wo(C,W){for(var se=-1,ge=+C[0],be=(C[1]-ge)/W,Ce=[];++se<=W;)Ce[se]=be*se+ge;return Ce}function Gs(C){return[a.min(C),a.max(C)]}a.layout.pack=function(){var C=a.layout.hierarchy().sort(dc),W=0,se=[1,1],ge;function be(Ce,Xe){var Ge=C.call(this,Ce,Xe),tt=Ge[0],gt=se[0],yt=se[1],Ft=ge==null?Math.sqrt:typeof ge=="function"?ge:function(){return ge};if(tt.x=tt.y=0,qo(tt,function(rr){rr.r=+Ft(rr.value)}),qo(tt,pc),W){var Ot=W*(ge?1:Math.max(2*tt.r/gt,2*tt.r/yt))/2;qo(tt,function(rr){rr.r+=Ot}),qo(tt,pc),qo(tt,function(rr){rr.r-=Ot})}return Kl(tt,gt/2,yt/2,ge?1:1/Math.max(2*tt.r/gt,2*tt.r/yt)),Ge}return be.size=function(Ce){return arguments.length?(se=Ce,be):se},be.radius=function(Ce){return arguments.length?(ge=Ce==null||typeof Ce=="function"?Ce:+Ce,be):ge},be.padding=function(Ce){return arguments.length?(W=+Ce,be):W},ho(be,C)};function dc(C,W){return C.value-W.value}function Zs(C,W){var se=C._pack_next;C._pack_next=W,W._pack_prev=C,W._pack_next=se,se._pack_prev=W}function vu(C,W){C._pack_next=W,W._pack_prev=C}function Ll(C,W){var se=W.x-C.x,ge=W.y-C.y,be=C.r+W.r;return .999*be*be>se*se+ge*ge}function pc(C){if(!(W=C.children)||!(Ot=W.length))return;var W,se=1/0,ge=-1/0,be=1/0,Ce=-1/0,Xe,Ge,tt,gt,yt,Ft,Ot;function rr(ur){se=Math.min(ur.x-ur.r,se),ge=Math.max(ur.x+ur.r,ge),be=Math.min(ur.y-ur.r,be),Ce=Math.max(ur.y+ur.r,Ce)}if(W.forEach(Zo),Xe=W[0],Xe.x=-Xe.r,Xe.y=0,rr(Xe),Ot>1&&(Ge=W[1],Ge.x=Ge.r,Ge.y=0,rr(Ge),Ot>2))for(tt=W[2],y(Xe,Ge,tt),rr(tt),Zs(Xe,tt),Xe._pack_prev=tt,Zs(tt,Ge),Ge=Xe._pack_next,gt=3;gt<Ot;gt++){y(Xe,Ge,tt=W[gt]);var yr=0,Ut=1,Jt=1;for(yt=Ge._pack_next;yt!==Ge;yt=yt._pack_next,Ut++)if(Ll(yt,tt)){yr=1;break}if(yr==1)for(Ft=Xe._pack_prev;Ft!==yt._pack_prev&&!Ll(Ft,tt);Ft=Ft._pack_prev,Jt++);yr?(Ut<Jt||Ut==Jt&&Ge.r<Xe.r?vu(Xe,Ge=yt):vu(Xe=Ft,Ge),gt--):(Zs(Xe,tt),Ge=tt,rr(tt))}var or=(se+ge)/2,xr=(be+Ce)/2,Cr=0;for(gt=0;gt<Ot;gt++)tt=W[gt],tt.x-=or,tt.y-=xr,Cr=Math.max(Cr,tt.r+Math.sqrt(tt.x*tt.x+tt.y*tt.y));C.r=Cr,W.forEach(ba)}function Zo(C){C._pack_next=C._pack_prev=C}function ba(C){delete C._pack_next,delete C._pack_prev}function Kl(C,W,se,ge){var be=C.children;if(C.x=W+=ge*C.x,C.y=se+=ge*C.y,C.r*=ge,be)for(var Ce=-1,Xe=be.length;++Ce<Xe;)Kl(be[Ce],W,se,ge)}function y(C,W,se){var ge=C.r+se.r,be=W.x-C.x,Ce=W.y-C.y;if(ge&&(be||Ce)){var Xe=W.r+se.r,Ge=be*be+Ce*Ce;Xe*=Xe,ge*=ge;var tt=.5+(ge-Xe)/(2*Ge),gt=Math.sqrt(Math.max(0,2*Xe*(ge+Ge)-(ge-=Ge)*ge-Xe*Xe))/(2*Ge);se.x=C.x+tt*be+gt*Ce,se.y=C.y+tt*Ce-gt*be}else se.x=C.x+ge,se.y=C.y}a.layout.tree=function(){var C=a.layout.hierarchy().sort(null).value(null),W=B,se=[1,1],ge=null;function be(yt,Ft){var Ot=C.call(this,yt,Ft),rr=Ot[0],yr=Ce(rr);if(qo(yr,Xe),yr.parent.m=-yr.z,On(yr,Ge),ge)On(rr,gt);else{var Ut=rr,Jt=rr,or=rr;On(rr,function(rn){rn.x<Ut.x&&(Ut=rn),rn.x>Jt.x&&(Jt=rn),rn.depth>or.depth&&(or=rn)});var xr=W(Ut,Jt)/2-Ut.x,Cr=se[0]/(Jt.x+W(Jt,Ut)/2+xr),ur=se[1]/(or.depth||1);On(rr,function(rn){rn.x=(rn.x+xr)*Cr,rn.y=rn.depth*ur})}return Ot}function Ce(yt){for(var Ft={A:null,children:[yt]},Ot=[Ft],rr;(rr=Ot.pop())!=null;)for(var yr=rr.children,Ut,Jt=0,or=yr.length;Jt<or;++Jt)Ot.push((yr[Jt]=Ut={_:yr[Jt],parent:rr,children:(Ut=yr[Jt].children)&&Ut.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Jt}).a=Ut);return Ft.children[0]}function Xe(yt){var Ft=yt.children,Ot=yt.parent.children,rr=yt.i?Ot[yt.i-1]:null;if(Ft.length){St(yt);var yr=(Ft[0].z+Ft[Ft.length-1].z)/2;rr?(yt.z=rr.z+W(yt._,rr._),yt.m=yt.z-yr):yt.z=yr}else rr&&(yt.z=rr.z+W(yt._,rr._));yt.parent.A=tt(yt,rr,yt.parent.A||Ot[0])}function Ge(yt){yt._.x=yt.z+yt.parent.m,yt.m+=yt.parent.m}function tt(yt,Ft,Ot){if(Ft){for(var rr=yt,yr=yt,Ut=Ft,Jt=rr.parent.children[0],or=rr.m,xr=yr.m,Cr=Ut.m,ur=Jt.m,rn;Ut=Pe(Ut),rr=fe(rr),Ut&&rr;)Jt=fe(Jt),yr=Pe(yr),yr.a=yt,rn=Ut.z+Cr-rr.z-or+W(Ut._,rr._),rn>0&&(et(sr(Ut,yt,Ot),yt,rn),or+=rn,xr+=rn),Cr+=Ut.m,or+=rr.m,ur+=Jt.m,xr+=yr.m;Ut&&!Pe(yr)&&(yr.t=Ut,yr.m+=Cr-xr),rr&&!fe(Jt)&&(Jt.t=rr,Jt.m+=or-ur,Ot=yt)}return Ot}function gt(yt){yt.x*=se[0],yt.y=yt.depth*se[1]}return be.separation=function(yt){return arguments.length?(W=yt,be):W},be.size=function(yt){return arguments.length?(ge=(se=yt)==null?gt:null,be):ge?null:se},be.nodeSize=function(yt){return arguments.length?(ge=(se=yt)==null?null:gt,be):ge?se:null},ho(be,C)};function B(C,W){return C.parent==W.parent?1:2}function fe(C){var W=C.children;return W.length?W[0]:C.t}function Pe(C){var W=C.children,se;return(se=W.length)?W[se-1]:C.t}function et(C,W,se){var ge=se/(W.i-C.i);W.c-=ge,W.s+=se,C.c+=ge,W.z+=se,W.m+=se}function St(C){for(var W=0,se=0,ge=C.children,be=ge.length,Ce;--be>=0;)Ce=ge[be],Ce.z+=W,Ce.m+=W,W+=Ce.s+(se+=Ce.c)}function sr(C,W,se){return C.a.parent===W.parent?C.a:se}a.layout.cluster=function(){var C=a.layout.hierarchy().sort(null).value(null),W=B,se=[1,1],ge=!1;function be(Ce,Xe){var Ge=C.call(this,Ce,Xe),tt=Ge[0],gt,yt=0;qo(tt,function(Ut){var Jt=Ut.children;Jt&&Jt.length?(Ut.x=Ar(Jt),Ut.y=hr(Jt)):(Ut.x=gt?yt+=W(Ut,gt):0,Ut.y=0,gt=Ut)});var Ft=dn(tt),Ot=Zn(tt),rr=Ft.x-W(Ft,Ot)/2,yr=Ot.x+W(Ot,Ft)/2;return qo(tt,ge?function(Ut){Ut.x=(Ut.x-tt.x)*se[0],Ut.y=(tt.y-Ut.y)*se[1]}:function(Ut){Ut.x=(Ut.x-rr)/(yr-rr)*se[0],Ut.y=(1-(tt.y?Ut.y/tt.y:1))*se[1]}),Ge}return be.separation=function(Ce){return arguments.length?(W=Ce,be):W},be.size=function(Ce){return arguments.length?(ge=(se=Ce)==null,be):ge?null:se},be.nodeSize=function(Ce){return arguments.length?(ge=(se=Ce)!=null,be):ge?se:null},ho(be,C)};function hr(C){return 1+a.max(C,function(W){return W.y})}function Ar(C){return C.reduce(function(W,se){return W+se.x},0)/C.length}function dn(C){var W=C.children;return W&&W.length?dn(W[0]):C}function Zn(C){var W=C.children,se;return W&&(se=W.length)?Zn(W[se-1]):C}a.layout.treemap=function(){var C=a.layout.hierarchy(),W=Math.round,se=[1,1],ge=null,be=ii,Ce=!1,Xe,Ge="squarify",tt=.5*(1+Math.sqrt(5));function gt(Ut,Jt){for(var or=-1,xr=Ut.length,Cr,ur;++or<xr;)ur=(Cr=Ut[or]).value*(Jt<0?0:Jt),Cr.area=isNaN(ur)||ur<=0?0:ur}function yt(Ut){var Jt=Ut.children;if(Jt&&Jt.length){var or=be(Ut),xr=[],Cr=Jt.slice(),ur,rn=1/0,xn,Cn=Ge==="slice"?or.dx:Ge==="dice"?or.dy:Ge==="slice-dice"?Ut.depth&1?or.dy:or.dx:Math.min(or.dx,or.dy),An;for(gt(Cr,or.dx*or.dy/Ut.value),xr.area=0;(An=Cr.length)>0;)xr.push(ur=Cr[An-1]),xr.area+=ur.area,Ge!=="squarify"||(xn=Ot(xr,Cn))<=rn?(Cr.pop(),rn=xn):(xr.area-=xr.pop().area,rr(xr,Cn,or,!1),Cn=Math.min(or.dx,or.dy),xr.length=xr.area=0,rn=1/0);xr.length&&(rr(xr,Cn,or,!0),xr.length=xr.area=0),Jt.forEach(yt)}}function Ft(Ut){var Jt=Ut.children;if(Jt&&Jt.length){var or=be(Ut),xr=Jt.slice(),Cr,ur=[];for(gt(xr,or.dx*or.dy/Ut.value),ur.area=0;Cr=xr.pop();)ur.push(Cr),ur.area+=Cr.area,Cr.z!=null&&(rr(ur,Cr.z?or.dx:or.dy,or,!xr.length),ur.length=ur.area=0);Jt.forEach(Ft)}}function Ot(Ut,Jt){for(var or=Ut.area,xr,Cr=0,ur=1/0,rn=-1,xn=Ut.length;++rn<xn;)!(xr=Ut[rn].area)||(xr<ur&&(ur=xr),xr>Cr&&(Cr=xr));return or*=or,Jt*=Jt,or?Math.max(Jt*Cr*tt/or,or/(Jt*ur*tt)):1/0}function rr(Ut,Jt,or,xr){var Cr=-1,ur=Ut.length,rn=or.x,xn=or.y,Cn=Jt?W(Ut.area/Jt):0,An;if(Jt==or.dx){for((xr||Cn>or.dy)&&(Cn=or.dy);++Cr<ur;)An=Ut[Cr],An.x=rn,An.y=xn,An.dy=Cn,rn+=An.dx=Math.min(or.x+or.dx-rn,Cn?W(An.area/Cn):0);An.z=!0,An.dx+=or.x+or.dx-rn,or.y+=Cn,or.dy-=Cn}else{for((xr||Cn>or.dx)&&(Cn=or.dx);++Cr<ur;)An=Ut[Cr],An.x=rn,An.y=xn,An.dx=Cn,xn+=An.dy=Math.min(or.y+or.dy-xn,Cn?W(An.area/Cn):0);An.z=!1,An.dy+=or.y+or.dy-xn,or.x+=Cn,or.dx-=Cn}}function yr(Ut){var Jt=Xe||C(Ut),or=Jt[0];return or.x=or.y=0,or.value?(or.dx=se[0],or.dy=se[1]):or.dx=or.dy=0,Xe&&C.revalue(or),gt([or],or.dx*or.dy/or.value),(Xe?Ft:yt)(or),Ce&&(Xe=Jt),Jt}return yr.size=function(Ut){return arguments.length?(se=Ut,yr):se},yr.padding=function(Ut){if(!arguments.length)return ge;function Jt(Cr){var ur=Ut.call(yr,Cr,Cr.depth);return ur==null?ii(Cr):Qn(Cr,typeof ur=="number"?[ur,ur,ur,ur]:ur)}function or(Cr){return Qn(Cr,Ut)}var xr;return be=(ge=Ut)==null?ii:(xr=typeof Ut)=="function"?Jt:(xr==="number"&&(Ut=[Ut,Ut,Ut,Ut]),or),yr},yr.round=function(Ut){return arguments.length?(W=Ut?Math.round:Number,yr):W!=Number},yr.sticky=function(Ut){return arguments.length?(Ce=Ut,Xe=null,yr):Ce},yr.ratio=function(Ut){return arguments.length?(tt=Ut,yr):tt},yr.mode=function(Ut){return arguments.length?(Ge=Ut+"",yr):Ge},ho(yr,C)};function ii(C){return{x:C.x,y:C.y,dx:C.dx,dy:C.dy}}function Qn(C,W){var se=C.x+W[3],ge=C.y+W[0],be=C.dx-W[1]-W[3],Ce=C.dy-W[0]-W[2];return be<0&&(se+=be/2,be=0),Ce<0&&(ge+=Ce/2,Ce=0),{x:se,y:ge,dx:be,dy:Ce}}a.random={normal:function(C,W){var se=arguments.length;return se<2&&(W=1),se<1&&(C=0),function(){var ge,be,Ce;do ge=Math.random()*2-1,be=Math.random()*2-1,Ce=ge*ge+be*be;while(!Ce||Ce>1);return C+W*ge*Math.sqrt(-2*Math.log(Ce)/Ce)}},logNormal:function(){var C=a.random.normal.apply(a,arguments);return function(){return Math.exp(C())}},bates:function(C){var W=a.random.irwinHall(C);return function(){return W()/C}},irwinHall:function(C){return function(){for(var W=0,se=0;se<C;se++)W+=Math.random();return W}}},a.scale={};function Pa(C){var W=C[0],se=C[C.length-1];return W<se?[W,se]:[se,W]}function Xa(C){return C.rangeExtent?C.rangeExtent():Pa(C.range())}function gu(C,W,se,ge){var be=se(C[0],C[1]),Ce=ge(W[0],W[1]);return function(Xe){return Ce(be(Xe))}}function so(C,W){var se=0,ge=C.length-1,be=C[se],Ce=C[ge],Xe;return Ce<be&&(Xe=se,se=ge,ge=Xe,Xe=be,be=Ce,Ce=Xe),C[se]=W.floor(be),C[ge]=W.ceil(Ce),C}function Aa(C){return C?{floor:function(W){return Math.floor(W/C)*C},ceil:function(W){return Math.ceil(W/C)*C}}:Za}var Za={floor:we,ceil:we};function mc(C,W,se,ge){var be=[],Ce=[],Xe=0,Ge=Math.min(C.length,W.length)-1;for(C[Ge]<C[0]&&(C=C.slice().reverse(),W=W.slice().reverse());++Xe<=Ge;)be.push(se(C[Xe-1],C[Xe])),Ce.push(ge(W[Xe-1],W[Xe]));return function(tt){var gt=a.bisect(C,tt,1,Ge)-1;return Ce[gt](be[gt](tt))}}a.scale.linear=function(){return cl([0,1],[0,1],Vo,!1)};function cl(C,W,se,ge){var be,Ce;function Xe(){var tt=Math.min(C.length,W.length)>2?mc:gu,gt=ge?Cl:fo;return be=tt(C,W,gt,se),Ce=tt(W,C,gt,Vo),Ge}function Ge(tt){return be(tt)}return Ge.invert=function(tt){return Ce(tt)},Ge.domain=function(tt){return arguments.length?(C=tt.map(Number),Xe()):C},Ge.range=function(tt){return arguments.length?(W=tt,Xe()):W},Ge.rangeRound=function(tt){return Ge.range(tt).interpolate(Po)},Ge.clamp=function(tt){return arguments.length?(ge=tt,Xe()):ge},Ge.interpolate=function(tt){return arguments.length?(se=tt,Xe()):se},Ge.ticks=function(tt){return O(C,tt)},Ge.tickFormat=function(tt,gt){return d3_scale_linearTickFormat(C,tt,gt)},Ge.nice=function(tt){return f(C,tt),Xe()},Ge.copy=function(){return cl(C,W,se,ge)},Xe()}function N(C,W){return a.rebind(C,W,"range","rangeRound","interpolate","clamp")}function f(C,W){return so(C,Aa(w(C,W)[2])),so(C,Aa(w(C,W)[2])),C}function w(C,W){W==null&&(W=10);var se=Pa(C),ge=se[1]-se[0],be=Math.pow(10,Math.floor(Math.log(ge/W)/Math.LN10)),Ce=W/ge*be;return Ce<=.15?be*=10:Ce<=.35?be*=5:Ce<=.75&&(be*=2),se[0]=Math.ceil(se[0]/be)*be,se[1]=Math.floor(se[1]/be)*be+be*.5,se[2]=be,se}function O(C,W){return a.range.apply(a,w(C,W))}a.scale.log=function(){return G(a.scale.linear().domain([0,1]),10,!0,[1,10])};function G(C,W,se,ge){function be(Ge){return(se?Math.log(Ge<0?0:Ge):-Math.log(Ge>0?0:-Ge))/Math.log(W)}function Ce(Ge){return se?Math.pow(W,Ge):-Math.pow(W,-Ge)}function Xe(Ge){return C(be(Ge))}return Xe.invert=function(Ge){return Ce(C.invert(Ge))},Xe.domain=function(Ge){return arguments.length?(se=Ge[0]>=0,C.domain((ge=Ge.map(Number)).map(be)),Xe):ge},Xe.base=function(Ge){return arguments.length?(W=+Ge,C.domain(ge.map(be)),Xe):W},Xe.nice=function(){var Ge=so(ge.map(be),se?Math:oe);return C.domain(Ge),ge=Ge.map(Ce),Xe},Xe.ticks=function(){var Ge=Pa(ge),tt=[],gt=Ge[0],yt=Ge[1],Ft=Math.floor(be(gt)),Ot=Math.ceil(be(yt)),rr=W%1?2:W;if(isFinite(Ot-Ft)){if(se){for(;Ft<Ot;Ft++)for(var yr=1;yr<rr;yr++)tt.push(Ce(Ft)*yr);tt.push(Ce(Ft))}else for(tt.push(Ce(Ft));Ft++<Ot;)for(var yr=rr-1;yr>0;yr--)tt.push(Ce(Ft)*yr);for(Ft=0;tt[Ft]<gt;Ft++);for(Ot=tt.length;tt[Ot-1]>yt;Ot--);tt=tt.slice(Ft,Ot)}return tt},Xe.copy=function(){return G(C.copy(),W,se,ge)},N(Xe,C)}var oe={floor:function(C){return-Math.ceil(-C)},ceil:function(C){return-Math.floor(-C)}};a.scale.pow=function(){return Te(a.scale.linear(),1,[0,1])};function Te(C,W,se){var ge=Be(W),be=Be(1/W);function Ce(Xe){return C(ge(Xe))}return Ce.invert=function(Xe){return be(C.invert(Xe))},Ce.domain=function(Xe){return arguments.length?(C.domain((se=Xe.map(Number)).map(ge)),Ce):se},Ce.ticks=function(Xe){return O(se,Xe)},Ce.tickFormat=function(Xe,Ge){return d3_scale_linearTickFormat(se,Xe,Ge)},Ce.nice=function(Xe){return Ce.domain(f(se,Xe))},Ce.exponent=function(Xe){return arguments.length?(ge=Be(W=Xe),be=Be(1/W),C.domain(se.map(ge)),Ce):W},Ce.copy=function(){return Te(C.copy(),W,se)},N(Ce,C)}function Be(C){return function(W){return W<0?-Math.pow(-W,C):Math.pow(W,C)}}a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return Ze([],{t:"range",a:[[]]})};function Ze(C,W){var se,ge,be;function Ce(Ge){return ge[((se.get(Ge)||(W.t==="range"?se.set(Ge,C.push(Ge)):NaN))-1)%ge.length]}function Xe(Ge,tt){return a.range(C.length).map(function(gt){return Ge+tt*gt})}return Ce.domain=function(Ge){if(!arguments.length)return C;C=[],se=new M;for(var tt=-1,gt=Ge.length,yt;++tt<gt;)se.has(yt=Ge[tt])||se.set(yt,C.push(yt));return Ce[W.t].apply(Ce,W.a)},Ce.range=function(Ge){return arguments.length?(ge=Ge,be=0,W={t:"range",a:arguments},Ce):ge},Ce.rangePoints=function(Ge,tt){arguments.length<2&&(tt=0);var gt=Ge[0],yt=Ge[1],Ft=C.length<2?(gt=(gt+yt)/2,0):(yt-gt)/(C.length-1+tt);return ge=Xe(gt+Ft*tt/2,Ft),be=0,W={t:"rangePoints",a:arguments},Ce},Ce.rangeRoundPoints=function(Ge,tt){arguments.length<2&&(tt=0);var gt=Ge[0],yt=Ge[1],Ft=C.length<2?(gt=yt=Math.round((gt+yt)/2),0):(yt-gt)/(C.length-1+tt)|0;return ge=Xe(gt+Math.round(Ft*tt/2+(yt-gt-(C.length-1+tt)*Ft)/2),Ft),be=0,W={t:"rangeRoundPoints",a:arguments},Ce},Ce.rangeBands=function(Ge,tt,gt){arguments.length<2&&(tt=0),arguments.length<3&&(gt=tt);var yt=Ge[1]<Ge[0],Ft=Ge[yt-0],Ot=Ge[1-yt],rr=(Ot-Ft)/(C.length-tt+2*gt);return ge=Xe(Ft+rr*gt,rr),yt&&ge.reverse(),be=rr*(1-tt),W={t:"rangeBands",a:arguments},Ce},Ce.rangeRoundBands=function(Ge,tt,gt){arguments.length<2&&(tt=0),arguments.length<3&&(gt=tt);var yt=Ge[1]<Ge[0],Ft=Ge[yt-0],Ot=Ge[1-yt],rr=Math.floor((Ot-Ft)/(C.length-tt+2*gt));return ge=Xe(Ft+Math.round((Ot-Ft-(C.length-tt)*rr)/2),rr),yt&&ge.reverse(),be=Math.round(rr*(1-tt)),W={t:"rangeRoundBands",a:arguments},Ce},Ce.rangeBand=function(){return be},Ce.rangeExtent=function(){return Pa(W.a[0])},Ce.copy=function(){return Ze(C,W)},Ce.domain(C)}a.scale.category10=function(){return a.scale.ordinal().range(qe)},a.scale.category20=function(){return a.scale.ordinal().range(ut)},a.scale.category20b=function(){return a.scale.ordinal().range(_t)},a.scale.category20c=function(){return a.scale.ordinal().range(Et)};var qe=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(gr),ut=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(gr),_t=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(gr),Et=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(gr);a.scale.quantile=function(){return jt([],[])};function jt(C,W){var se;function ge(){var Ce=0,Xe=W.length;for(se=[];++Ce<Xe;)se[Ce-1]=a.quantile(C,Ce/Xe);return be}function be(Ce){if(!isNaN(Ce=+Ce))return W[a.bisect(se,Ce)]}return be.domain=function(Ce){return arguments.length?(C=Ce.map(E).filter(A).sort(x),ge()):C},be.range=function(Ce){return arguments.length?(W=Ce,ge()):W},be.quantiles=function(){return se},be.invertExtent=function(Ce){return Ce=W.indexOf(Ce),Ce<0?[NaN,NaN]:[Ce>0?se[Ce-1]:C[0],Ce<se.length?se[Ce]:C[C.length-1]]},be.copy=function(){return jt(C,W)},ge()}a.scale.quantize=function(){return Ht(0,1,[0,1])};function Ht(C,W,se){var ge,be;function Ce(Ge){return se[Math.max(0,Math.min(be,Math.floor(ge*(Ge-C))))]}function Xe(){return ge=se.length/(W-C),be=se.length-1,Ce}return Ce.domain=function(Ge){return arguments.length?(C=+Ge[0],W=+Ge[Ge.length-1],Xe()):[C,W]},Ce.range=function(Ge){return arguments.length?(se=Ge,Xe()):se},Ce.invertExtent=function(Ge){return Ge=se.indexOf(Ge),Ge=Ge<0?NaN:Ge/ge+C,[Ge,Ge+1/ge]},Ce.copy=function(){return Ht(C,W,se)},Xe()}a.scale.threshold=function(){return Zt([.5],[0,1])};function Zt(C,W){function se(ge){if(ge<=ge)return W[a.bisect(C,ge)]}return se.domain=function(ge){return arguments.length?(C=ge,se):C},se.range=function(ge){return arguments.length?(W=ge,se):W},se.invertExtent=function(ge){return ge=W.indexOf(ge),[C[ge-1],C[ge]]},se.copy=function(){return Zt(C,W)},se}a.scale.identity=function(){return br([0,1])};function br(C){function W(se){return+se}return W.invert=W,W.domain=W.range=function(se){return arguments.length?(C=se.map(W),W):C},W.ticks=function(se){return O(C,se)},W.tickFormat=function(se,ge){return d3_scale_linearTickFormat(C,se,ge)},W.copy=function(){return br(C)},W}a.svg={};function kr(){return 0}a.svg.arc=function(){var C=Qt,W=Zr,se=kr,ge=Or,be=Br,Ce=Qr,Xe=en;function Ge(){var gt=Math.max(0,+C.apply(this,arguments)),yt=Math.max(0,+W.apply(this,arguments)),Ft=be.apply(this,arguments)-ft,Ot=Ce.apply(this,arguments)-ft,rr=Math.abs(Ot-Ft),yr=Ft>Ot?0:1;if(yt<gt&&(Ut=yt,yt=gt,gt=Ut),rr>=st)return tt(yt,yr)+(gt?tt(gt,1-yr):"")+"Z";var Ut,Jt,or,xr,Cr=0,ur=0,rn,xn,Cn,An,Nn,Gn,ui,Wn,ni=[];if((xr=(+Xe.apply(this,arguments)||0)/2)&&(or=ge===Or?Math.sqrt(gt*gt+yt*yt):+ge.apply(this,arguments),yr||(ur*=-1),yt&&(ur=Oe(or/yt*Math.sin(xr))),gt&&(Cr=Oe(or/gt*Math.sin(xr)))),yt){rn=yt*Math.cos(Ft+ur),xn=yt*Math.sin(Ft+ur),Cn=yt*Math.cos(Ot-ur),An=yt*Math.sin(Ot-ur);var Li=Math.abs(Ot-Ft-2*ur)<=Me?0:1;if(ur&&pn(rn,xn,Cn,An)===yr^Li){var na=(Ft+Ot)/2;rn=yt*Math.cos(na),xn=yt*Math.sin(na),Cn=An=null}}else rn=xn=0;if(gt){Nn=gt*Math.cos(Ot-Cr),Gn=gt*Math.sin(Ot-Cr),ui=gt*Math.cos(Ft+Cr),Wn=gt*Math.sin(Ft+Cr);var ia=Math.abs(Ft-Ot+2*Cr)<=Me?0:1;if(Cr&&pn(Nn,Gn,ui,Wn)===1-yr^ia){var Tn=(Ft+Ot)/2;Nn=gt*Math.cos(Tn),Gn=gt*Math.sin(Tn),ui=Wn=null}}else Nn=Gn=0;if(rr>pt&&(Ut=Math.min(Math.abs(yt-gt)/2,+se.apply(this,arguments)))>.001){Jt=gt<yt^yr?0:1;var fi=Ut,pi=Ut;if(rr<Me){var Oi=ui==null?[Nn,Gn]:Cn==null?[rn,xn]:Oa([rn,xn],[ui,Wn],[Cn,An],[Nn,Gn]),Da=rn-Oi[0],no=xn-Oi[1],Wa=Cn-Oi[0],vo=An-Oi[1],gs=1/Math.sin(Math.acos((Da*Wa+no*vo)/(Math.sqrt(Da*Da+no*no)*Math.sqrt(Wa*Wa+vo*vo)))/2),ts=Math.sqrt(Oi[0]*Oi[0]+Oi[1]*Oi[1]);pi=Math.min(Ut,(gt-ts)/(gs-1)),fi=Math.min(Ut,(yt-ts)/(gs+1))}if(Cn!=null){var Ps=Jr(ui==null?[Nn,Gn]:[ui,Wn],[rn,xn],yt,fi,yr),Wo=Jr([Cn,An],[Nn,Gn],yt,fi,yr);Ut===fi?ni.push("M",Ps[0],"A",fi,",",fi," 0 0,",Jt," ",Ps[1],"A",yt,",",yt," 0 ",1-yr^pn(Ps[1][0],Ps[1][1],Wo[1][0],Wo[1][1]),",",yr," ",Wo[1],"A",fi,",",fi," 0 0,",Jt," ",Wo[0]):ni.push("M",Ps[0],"A",fi,",",fi," 0 1,",Jt," ",Wo[0])}else ni.push("M",rn,",",xn);if(ui!=null){var Rs=Jr([rn,xn],[ui,Wn],gt,-pi,yr),xc=Jr([Nn,Gn],Cn==null?[rn,xn]:[Cn,An],gt,-pi,yr);Ut===pi?ni.push("L",xc[0],"A",pi,",",pi," 0 0,",Jt," ",xc[1],"A",gt,",",gt," 0 ",yr^pn(xc[1][0],xc[1][1],Rs[1][0],Rs[1][1]),",",1-yr," ",Rs[1],"A",pi,",",pi," 0 0,",Jt," ",Rs[0]):ni.push("L",xc[0],"A",pi,",",pi," 0 0,",Jt," ",Rs[0])}else ni.push("L",Nn,",",Gn)}else ni.push("M",rn,",",xn),Cn!=null&&ni.push("A",yt,",",yt," 0 ",Li,",",yr," ",Cn,",",An),ni.push("L",Nn,",",Gn),ui!=null&&ni.push("A",gt,",",gt," 0 ",ia,",",1-yr," ",ui,",",Wn);return ni.push("Z"),ni.join("")}function tt(gt,yt){return"M0,"+gt+"A"+gt+","+gt+" 0 1,"+yt+" 0,"+-gt+"A"+gt+","+gt+" 0 1,"+yt+" 0,"+gt}return Ge.innerRadius=function(gt){return arguments.length?(C=Gr(gt),Ge):C},Ge.outerRadius=function(gt){return arguments.length?(W=Gr(gt),Ge):W},Ge.cornerRadius=function(gt){return arguments.length?(se=Gr(gt),Ge):se},Ge.padRadius=function(gt){return arguments.length?(ge=gt==Or?Or:Gr(gt),Ge):ge},Ge.startAngle=function(gt){return arguments.length?(be=Gr(gt),Ge):be},Ge.endAngle=function(gt){return arguments.length?(Ce=Gr(gt),Ge):Ce},Ge.padAngle=function(gt){return arguments.length?(Xe=Gr(gt),Ge):Xe},Ge.centroid=function(){var gt=(+C.apply(this,arguments)+ +W.apply(this,arguments))/2,yt=(+be.apply(this,arguments)+ +Ce.apply(this,arguments))/2-ft;return[Math.cos(yt)*gt,Math.sin(yt)*gt]},Ge};var Or="auto";function Qt(C){return C.innerRadius}function Zr(C){return C.outerRadius}function Br(C){return C.startAngle}function Qr(C){return C.endAngle}function en(C){return C&&C.padAngle}function pn(C,W,se,ge){return(C-se)*W-(W-ge)*C>0?0:1}function Jr(C,W,se,ge,be){var Ce=C[0]-W[0],Xe=C[1]-W[1],Ge=(be?ge:-ge)/Math.sqrt(Ce*Ce+Xe*Xe),tt=Ge*Xe,gt=-Ge*Ce,yt=C[0]+tt,Ft=C[1]+gt,Ot=W[0]+tt,rr=W[1]+gt,yr=(yt+Ot)/2,Ut=(Ft+rr)/2,Jt=Ot-yt,or=rr-Ft,xr=Jt*Jt+or*or,Cr=se-ge,ur=yt*rr-Ot*Ft,rn=(or<0?-1:1)*Math.sqrt(Math.max(0,Cr*Cr*xr-ur*ur)),xn=(ur*or-Jt*rn)/xr,Cn=(-ur*Jt-or*rn)/xr,An=(ur*or+Jt*rn)/xr,Nn=(-ur*Jt+or*rn)/xr,Gn=xn-yr,ui=Cn-Ut,Wn=An-yr,ni=Nn-Ut;return Gn*Gn+ui*ui>Wn*Wn+ni*ni&&(xn=An,Cn=Nn),[[xn-tt,Cn-gt],[xn*se/Cr,Cn*se/Cr]]}function zn(){return!0}function In(C){var W=Bn,se=Ai,ge=zn,be=ai,Ce=be.key,Xe=.7;function Ge(tt){var gt=[],yt=[],Ft=-1,Ot=tt.length,rr,yr=Gr(W),Ut=Gr(se);function Jt(){gt.push("M",be(C(yt),Xe))}for(;++Ft<Ot;)ge.call(this,rr=tt[Ft],Ft)?yt.push([+yr.call(this,rr,Ft),+Ut.call(this,rr,Ft)]):yt.length&&(Jt(),yt=[]);return yt.length&&Jt(),gt.length?gt.join(""):null}return Ge.x=function(tt){return arguments.length?(W=tt,Ge):W},Ge.y=function(tt){return arguments.length?(se=tt,Ge):se},Ge.defined=function(tt){return arguments.length?(ge=tt,Ge):ge},Ge.interpolate=function(tt){return arguments.length?(typeof tt=="function"?Ce=be=tt:Ce=(be=Vn.get(tt)||ai).key,Ge):Ce},Ge.tension=function(tt){return arguments.length?(Xe=tt,Ge):Xe},Ge}a.svg.line=function(){return In(we)};var Vn=a.map({linear:ai,"linear-closed":bi,step:qn,"step-before":ta,"step-after":ra,basis:Is,"basis-open":fl,"basis-closed":Jl,bundle:Ls,cardinal:da,"cardinal-open":Gi,"cardinal-closed":ji,monotone:Ia});Vn.forEach(function(C,W){W.key=C,W.closed=/-closed$/.test(C)});function ai(C){return C.length>1?C.join("L"):C+"Z"}function bi(C){return C.join("L")+"Z"}function qn(C){for(var W=0,se=C.length,ge=C[0],be=[ge[0],",",ge[1]];++W<se;)be.push("H",(ge[0]+(ge=C[W])[0])/2,"V",ge[1]);return se>1&&be.push("H",ge[0]),be.join("")}function ta(C){for(var W=0,se=C.length,ge=C[0],be=[ge[0],",",ge[1]];++W<se;)be.push("V",(ge=C[W])[1],"H",ge[0]);return be.join("")}function ra(C){for(var W=0,se=C.length,ge=C[0],be=[ge[0],",",ge[1]];++W<se;)be.push("H",(ge=C[W])[0],"V",ge[1]);return be.join("")}function Gi(C,W){return C.length<4?ai(C):C[1]+Ka(C.slice(1,-1),ks(C,W))}function ji(C,W){return C.length<3?bi(C):C[0]+Ka((C.push(C[0]),C),ks([C[C.length-2]].concat(C,[C[1]]),W))}function da(C,W){return C.length<3?ai(C):C[0]+Ka(C,ks(C,W))}function Ka(C,W){if(W.length<1||C.length!=W.length&&C.length!=W.length+2)return ai(C);var se=C.length!=W.length,ge="",be=C[0],Ce=C[1],Xe=W[0],Ge=Xe,tt=1;if(se&&(ge+="Q"+(Ce[0]-Xe[0]*2/3)+","+(Ce[1]-Xe[1]*2/3)+","+Ce[0]+","+Ce[1],be=C[1],tt=2),W.length>1){Ge=W[1],Ce=C[tt],tt++,ge+="C"+(be[0]+Xe[0])+","+(be[1]+Xe[1])+","+(Ce[0]-Ge[0])+","+(Ce[1]-Ge[1])+","+Ce[0]+","+Ce[1];for(var gt=2;gt<W.length;gt++,tt++)Ce=C[tt],Ge=W[gt],ge+="S"+(Ce[0]-Ge[0])+","+(Ce[1]-Ge[1])+","+Ce[0]+","+Ce[1]}if(se){var yt=C[tt];ge+="Q"+(Ce[0]+Ge[0]*2/3)+","+(Ce[1]+Ge[1]*2/3)+","+yt[0]+","+yt[1]}return ge}function ks(C,W){for(var se=[],ge=(1-W)/2,be,Ce=C[0],Xe=C[1],Ge=1,tt=C.length;++Ge<tt;)be=Ce,Ce=Xe,Xe=C[Ge],se.push([ge*(Xe[0]-be[0]),ge*(Xe[1]-be[1])]);return se}function Is(C){if(C.length<3)return ai(C);var W=1,se=C.length,ge=C[0],be=ge[0],Ce=ge[1],Xe=[be,be,be,(ge=C[1])[0]],Ge=[Ce,Ce,Ce,ge[1]],tt=[be,",",Ce,"L",ka(Ca,Xe),",",ka(Ca,Ge)];for(C.push(C[se-1]);++W<=se;)ge=C[W],Xe.shift(),Xe.push(ge[0]),Ge.shift(),Ge.push(ge[1]),Ti(tt,Xe,Ge);return C.pop(),tt.push("L",ge),tt.join("")}function fl(C){if(C.length<4)return ai(C);for(var W=[],se=-1,ge=C.length,be,Ce=[0],Xe=[0];++se<3;)be=C[se],Ce.push(be[0]),Xe.push(be[1]);for(W.push(ka(Ca,Ce)+","+ka(Ca,Xe)),--se;++se<ge;)be=C[se],Ce.shift(),Ce.push(be[0]),Xe.shift(),Xe.push(be[1]),Ti(W,Ce,Xe);return W.join("")}function Jl(C){for(var W,se=-1,ge=C.length,be=ge+4,Ce,Xe=[],Ge=[];++se<4;)Ce=C[se%ge],Xe.push(Ce[0]),Ge.push(Ce[1]);for(W=[ka(Ca,Xe),",",ka(Ca,Ge)],--se;++se<be;)Ce=C[se%ge],Xe.shift(),Xe.push(Ce[0]),Ge.shift(),Ge.push(Ce[1]),Ti(W,Xe,Ge);return W.join("")}function Ls(C,W){var se=C.length-1;if(se)for(var ge=C[0][0],be=C[0][1],Ce=C[se][0]-ge,Xe=C[se][1]-be,Ge=-1,tt,gt;++Ge<=se;)tt=C[Ge],gt=Ge/se,tt[0]=W*tt[0]+(1-W)*(ge+gt*Ce),tt[1]=W*tt[1]+(1-W)*(be+gt*Xe);return Is(C)}function ka(C,W){return C[0]*W[0]+C[1]*W[1]+C[2]*W[2]+C[3]*W[3]}var hl=[0,2/3,1/3,0],vc=[0,1/3,2/3,0],Ca=[0,1/6,2/3,1/6];function Ti(C,W,se){C.push("C",ka(hl,W),",",ka(hl,se),",",ka(vc,W),",",ka(vc,se),",",ka(Ca,W),",",ka(Ca,se))}function Qi(C,W){return(W[1]-C[1])/(W[0]-C[0])}function po(C){for(var W=0,se=C.length-1,ge=[],be=C[0],Ce=C[1],Xe=ge[0]=Qi(be,Ce);++W<se;)ge[W]=(Xe+(Xe=Qi(be=Ce,Ce=C[W+1])))/2;return ge[W]=Xe,ge}function mo(C){for(var W=[],se,ge,be,Ce,Xe=po(C),Ge=-1,tt=C.length-1;++Ge<tt;)se=Qi(C[Ge],C[Ge+1]),S(se)<pt?Xe[Ge]=Xe[Ge+1]=0:(ge=Xe[Ge]/se,be=Xe[Ge+1]/se,Ce=ge*ge+be*be,Ce>9&&(Ce=se*3/Math.sqrt(Ce),Xe[Ge]=Ce*ge,Xe[Ge+1]=Ce*be));for(Ge=-1;++Ge<=tt;)Ce=(C[Math.min(tt,Ge+1)][0]-C[Math.max(0,Ge-1)][0])/(6*(1+Xe[Ge]*Xe[Ge])),W.push([Ce||0,Xe[Ge]*Ce||0]);return W}function Ia(C){return C.length<3?ai(C):C[0]+Ka(C,mo(C))}a.svg.line.radial=function(){var C=In(vs);return C.radius=C.x,delete C.x,C.angle=C.y,delete C.y,C};function vs(C){for(var W,se=-1,ge=C.length,be,Ce;++se<ge;)W=C[se],be=W[0],Ce=W[1]-ft,W[0]=be*Math.cos(Ce),W[1]=be*Math.sin(Ce);return C}function $l(C){var W=Bn,se=Bn,ge=0,be=Ai,Ce=zn,Xe=ai,Ge=Xe.key,tt=Xe,gt="L",yt=.7;function Ft(Ot){var rr=[],yr=[],Ut=[],Jt=-1,or=Ot.length,xr,Cr=Gr(W),ur=Gr(ge),rn=W===se?function(){return Cn}:Gr(se),xn=ge===be?function(){return An}:Gr(be),Cn,An;function Nn(){rr.push("M",Xe(C(Ut),yt),gt,tt(C(yr.reverse()),yt),"Z")}for(;++Jt<or;)Ce.call(this,xr=Ot[Jt],Jt)?(yr.push([Cn=+Cr.call(this,xr,Jt),An=+ur.call(this,xr,Jt)]),Ut.push([+rn.call(this,xr,Jt),+xn.call(this,xr,Jt)])):yr.length&&(Nn(),yr=[],Ut=[]);return yr.length&&Nn(),rr.length?rr.join(""):null}return Ft.x=function(Ot){return arguments.length?(W=se=Ot,Ft):se},Ft.x0=function(Ot){return arguments.length?(W=Ot,Ft):W},Ft.x1=function(Ot){return arguments.length?(se=Ot,Ft):se},Ft.y=function(Ot){return arguments.length?(ge=be=Ot,Ft):be},Ft.y0=function(Ot){return arguments.length?(ge=Ot,Ft):ge},Ft.y1=function(Ot){return arguments.length?(be=Ot,Ft):be},Ft.defined=function(Ot){return arguments.length?(Ce=Ot,Ft):Ce},Ft.interpolate=function(Ot){return arguments.length?(typeof Ot=="function"?Ge=Xe=Ot:Ge=(Xe=Vn.get(Ot)||ai).key,tt=Xe.reverse||Xe,gt=Xe.closed?"M":"L",Ft):Ge},Ft.tension=function(Ot){return arguments.length?(yt=Ot,Ft):yt},Ft}ta.reverse=ra,ra.reverse=ta,a.svg.area=function(){return $l(we)},a.svg.area.radial=function(){var C=$l(vs);return C.radius=C.x,delete C.x,C.innerRadius=C.x0,delete C.x0,C.outerRadius=C.x1,delete C.x1,C.angle=C.y,delete C.y,C.startAngle=C.y0,delete C.y0,C.endAngle=C.y1,delete C.y1,C};function $c(C){return C.source}function yu(C){return C.target}a.svg.chord=function(){var C=$c,W=yu,se=Hf,ge=Br,be=Qr;function Ce(yt,Ft){var Ot=Xe(this,C,yt,Ft),rr=Xe(this,W,yt,Ft);return"M"+Ot.p0+tt(Ot.r,Ot.p1,Ot.a1-Ot.a0)+(Ge(Ot,rr)?gt(Ot.r,Ot.p1,Ot.r,Ot.p0):gt(Ot.r,Ot.p1,rr.r,rr.p0)+tt(rr.r,rr.p1,rr.a1-rr.a0)+gt(rr.r,rr.p1,Ot.r,Ot.p0))+"Z"}function Xe(yt,Ft,Ot,rr){var yr=Ft.call(yt,Ot,rr),Ut=se.call(yt,yr,rr),Jt=ge.call(yt,yr,rr)-ft,or=be.call(yt,yr,rr)-ft;return{r:Ut,a0:Jt,a1:or,p0:[Ut*Math.cos(Jt),Ut*Math.sin(Jt)],p1:[Ut*Math.cos(or),Ut*Math.sin(or)]}}function Ge(yt,Ft){return yt.a0==Ft.a0&&yt.a1==Ft.a1}function tt(yt,Ft,Ot){return"A"+yt+","+yt+" 0 "+ +(Ot>Me)+",1 "+Ft}function gt(yt,Ft,Ot,rr){return"Q 0,0 "+rr}return Ce.radius=function(yt){return arguments.length?(se=Gr(yt),Ce):se},Ce.source=function(yt){return arguments.length?(C=Gr(yt),Ce):C},Ce.target=function(yt){return arguments.length?(W=Gr(yt),Ce):W},Ce.startAngle=function(yt){return arguments.length?(ge=Gr(yt),Ce):ge},Ce.endAngle=function(yt){return arguments.length?(be=Gr(yt),Ce):be},Ce};function Hf(C){return C.radius}a.svg.diagonal=function(){var C=$c,W=yu,se=Qc;function ge(be,Ce){var Xe=C.call(this,be,Ce),Ge=W.call(this,be,Ce),tt=(Xe.y+Ge.y)/2,gt=[Xe,{x:Xe.x,y:tt},{x:Ge.x,y:tt},Ge];return gt=gt.map(se),"M"+gt[0]+"C"+gt[1]+" "+gt[2]+" "+gt[3]}return ge.source=function(be){return arguments.length?(C=Gr(be),ge):C},ge.target=function(be){return arguments.length?(W=Gr(be),ge):W},ge.projection=function(be){return arguments.length?(se=be,ge):se},ge};function Qc(C){return[C.x,C.y]}a.svg.diagonal.radial=function(){var C=a.svg.diagonal(),W=Qc,se=C.projection;return C.projection=function(ge){return arguments.length?se(Ql(W=ge)):W},C};function Ql(C){return function(){var W=C.apply(this,arguments),se=W[0],ge=W[1]-ft;return[se*Math.cos(ge),se*Math.sin(ge)]}}a.svg.symbol=function(){var C=bu,W=_u;function se(ge,be){return(kh.get(C.call(this,ge,be))||gc)(W.call(this,ge,be))}return se.type=function(ge){return arguments.length?(C=Gr(ge),se):C},se.size=function(ge){return arguments.length?(W=Gr(ge),se):W},se};function _u(){return 64}function bu(){return"circle"}function gc(C){var W=Math.sqrt(C/Me);return"M0,"+W+"A"+W+","+W+" 0 1,1 0,"+-W+"A"+W+","+W+" 0 1,1 0,"+W+"Z"}var kh=a.map({circle:gc,cross:function(C){var W=Math.sqrt(C/5)/2;return"M"+-3*W+","+-W+"H"+-W+"V"+-3*W+"H"+W+"V"+-W+"H"+3*W+"V"+W+"H"+W+"V"+3*W+"H"+-W+"V"+W+"H"+-3*W+"Z"},diamond:function(C){var W=Math.sqrt(C/(2*Gf)),se=W*Gf;return"M0,"+-W+"L"+se+",0 0,"+W+" "+-se+",0Z"},square:function(C){var W=Math.sqrt(C)/2;return"M"+-W+","+-W+"L"+W+","+-W+" "+W+","+W+" "+-W+","+W+"Z"},"triangle-down":function(C){var W=Math.sqrt(C/Vf),se=W*Vf/2;return"M0,"+se+"L"+W+","+-se+" "+-W+","+-se+"Z"},"triangle-up":function(C){var W=Math.sqrt(C/Vf),se=W*Vf/2;return"M0,"+-se+"L"+W+","+se+" "+-W+","+se+"Z"}});a.svg.symbolTypes=kh.keys();var Vf=Math.sqrt(3),Gf=Math.tan(30*zt);ce.transition=function(C){for(var W=$u||++xu,se=Ja(C),ge=[],be,Ce,Xe=ql||{time:Date.now(),ease:Tl,delay:0,duration:250},Ge=-1,tt=this.length;++Ge<tt;){ge.push(be=[]);for(var gt=this[Ge],yt=-1,Ft=gt.length;++yt<Ft;)(Ce=gt[yt])&&qc(Ce,yt,se,W,Xe),be.push(Ce)}return Ws(ge,se,W)},ce.interrupt=function(C){return this.each(C==null?Ju:yc(Ja(C)))};var Ju=yc(Ja());function yc(C){return function(){var W,se,ge;(W=this[C])&&(ge=W[se=W.active])&&(ge.timer.c=null,ge.timer.t=NaN,--W.count?delete W[se]:delete this[C],W.active+=.5,ge.event&&ge.event.interrupt.call(this,this.__data__,ge.index))}}function Ws(C,W,se){return $(C,va),C.namespace=W,C.id=se,C}var va=[],xu=0,$u,ql;va.call=ce.call,va.empty=ce.empty,va.node=ce.node,va.size=ce.size,a.transition=function(C,W){return C&&C.transition?$u?C.transition(W):C:a.selection().transition(C)},a.transition.prototype=va,va.select=function(C){var W=this.id,se=this.namespace,ge=[],be,Ce,Xe;C=ae(C);for(var Ge=-1,tt=this.length;++Ge<tt;){ge.push(be=[]);for(var gt=this[Ge],yt=-1,Ft=gt.length;++yt<Ft;)(Xe=gt[yt])&&(Ce=C.call(Xe,Xe.__data__,yt,Ge))?("__data__"in Xe&&(Ce.__data__=Xe.__data__),qc(Ce,yt,se,W,Xe[se][W]),be.push(Ce)):be.push(null)}return Ws(ge,se,W)},va.selectAll=function(C){var W=this.id,se=this.namespace,ge=[],be,Ce,Xe,Ge,tt;C=ve(C);for(var gt=-1,yt=this.length;++gt<yt;)for(var Ft=this[gt],Ot=-1,rr=Ft.length;++Ot<rr;)if(Xe=Ft[Ot]){tt=Xe[se][W],Ce=C.call(Xe,Xe.__data__,Ot,gt),ge.push(be=[]);for(var yr=-1,Ut=Ce.length;++yr<Ut;)(Ge=Ce[yr])&&qc(Ge,yr,se,W,tt),be.push(Ge)}return Ws(ge,se,W)},va.filter=function(C){var W=[],se,ge,be;typeof C!="function"&&(C=Ne(C));for(var Ce=0,Xe=this.length;Ce<Xe;Ce++){W.push(se=[]);for(var ge=this[Ce],Ge=0,tt=ge.length;Ge<tt;Ge++)(be=ge[Ge])&&C.call(be,be.__data__,Ge,Ce)&&se.push(be)}return Ws(W,this.namespace,this.id)},va.tween=function(C,W){var se=this.id,ge=this.namespace;return arguments.length<2?this.node()[ge][se].tween.get(C):Tt(this,W==null?function(be){be[ge][se].tween.remove(C)}:function(be){be[ge][se].tween.set(C,W)})};function Ih(C,W,se,ge){var be=C.id,Ce=C.namespace;return Tt(C,typeof se=="function"?function(Xe,Ge,tt){Xe[Ce][be].tween.set(W,ge(se.call(Xe,Xe.__data__,Ge,tt)))}:(se=ge(se),function(Xe){Xe[Ce][be].tween.set(W,se)}))}va.attr=function(C,W){if(arguments.length<2){for(W in C)this.attr(W,C[W]);return this}var se=C=="transform"?ds:Vo,ge=a.ns.qualify(C);function be(){this.removeAttribute(ge)}function Ce(){this.removeAttributeNS(ge.space,ge.local)}function Xe(tt){return tt==null?be:(tt+="",function(){var gt=this.getAttribute(ge),yt;return gt!==tt&&(yt=se(gt,tt),function(Ft){this.setAttribute(ge,yt(Ft))})})}function Ge(tt){return tt==null?Ce:(tt+="",function(){var gt=this.getAttributeNS(ge.space,ge.local),yt;return gt!==tt&&(yt=se(gt,tt),function(Ft){this.setAttributeNS(ge.space,ge.local,yt(Ft))})})}return Ih(this,"attr."+C,W,ge.local?Ge:Xe)},va.attrTween=function(C,W){var se=a.ns.qualify(C);function ge(Ce,Xe){var Ge=W.call(this,Ce,Xe,this.getAttribute(se));return Ge&&function(tt){this.setAttribute(se,Ge(tt))}}function be(Ce,Xe){var Ge=W.call(this,Ce,Xe,this.getAttributeNS(se.space,se.local));return Ge&&function(tt){this.setAttributeNS(se.space,se.local,Ge(tt))}}return this.tween("attr."+C,se.local?be:ge)},va.style=function(C,W,se){var ge=arguments.length;if(ge<3){if(typeof C!="string"){ge<2&&(W="");for(se in C)this.style(se,C[se],W);return this}se=""}function be(){this.style.removeProperty(C)}function Ce(Xe){return Xe==null?be:(Xe+="",function(){var Ge=h(this).getComputedStyle(this,null).getPropertyValue(C),tt;return Ge!==Xe&&(tt=Vo(Ge,Xe),function(gt){this.style.setProperty(C,tt(gt),se)})})}return Ih(this,"style."+C,W,Ce)},va.styleTween=function(C,W,se){arguments.length<3&&(se="");function ge(be,Ce){var Xe=W.call(this,be,Ce,h(this).getComputedStyle(this,null).getPropertyValue(C));return Xe&&function(Ge){this.style.setProperty(C,Xe(Ge),se)}}return this.tween("style."+C,ge)},va.text=function(C){return Ih(this,"text",C,Td)};function Td(C){return C==null&&(C=""),function(){this.textContent=C}}va.remove=function(){var C=this.namespace;return this.each("end.transition",function(){var W;this[C].count<2&&(W=this.parentNode)&&W.removeChild(this)})},va.ease=function(C){var W=this.id,se=this.namespace;return arguments.length<1?this.node()[se][W].ease:(typeof C!="function"&&(C=a.ease.apply(a,arguments)),Tt(this,function(ge){ge[se][W].ease=C}))},va.delay=function(C){var W=this.id,se=this.namespace;return arguments.length<1?this.node()[se][W].delay:Tt(this,typeof C=="function"?function(ge,be,Ce){ge[se][W].delay=+C.call(ge,ge.__data__,be,Ce)}:(C=+C,function(ge){ge[se][W].delay=C}))},va.duration=function(C){var W=this.id,se=this.namespace;return arguments.length<1?this.node()[se][W].duration:Tt(this,typeof C=="function"?function(ge,be,Ce){ge[se][W].duration=Math.max(1,C.call(ge,ge.__data__,be,Ce))}:(C=Math.max(1,C),function(ge){ge[se][W].duration=C}))},va.each=function(C,W){var se=this.id,ge=this.namespace;if(arguments.length<2){var be=ql,Ce=$u;try{$u=se,Tt(this,function(Xe,Ge,tt){ql=Xe[ge][se],C.call(Xe,Xe.__data__,Ge,tt)})}finally{ql=be,$u=Ce}}else Tt(this,function(Xe){var Ge=Xe[ge][se];(Ge.event||(Ge.event=a.dispatch("start","end","interrupt"))).on(C,W)});return this},va.transition=function(){for(var C=this.id,W=++xu,se=this.namespace,ge=[],be,Ce,Xe,Ge,tt=0,gt=this.length;tt<gt;tt++){ge.push(be=[]);for(var Ce=this[tt],yt=0,Ft=Ce.length;yt<Ft;yt++)(Xe=Ce[yt])&&(Ge=Xe[se][C],qc(Xe,yt,se,W,{time:Ge.time,ease:Ge.ease,delay:Ge.delay+Ge.duration,duration:Ge.duration})),be.push(Xe)}return Ws(ge,se,W)};function Ja(C){return C==null?"__transition__":"__transition_"+C+"__"}function qc(C,W,se,ge,be){var Ce=C[se]||(C[se]={active:0,count:0}),Xe=Ce[ge],Ge,tt,gt,yt,Ft;function Ot(Ut){var Jt=Xe.delay;if(tt.t=Jt+Ge,Jt<=Ut)return rr(Ut-Jt);tt.c=rr}function rr(Ut){var Jt=Ce.active,or=Ce[Jt];or&&(or.timer.c=null,or.timer.t=NaN,--Ce.count,delete Ce[Jt],or.event&&or.event.interrupt.call(C,C.__data__,or.index));for(var xr in Ce)if(+xr<ge){var Cr=Ce[xr];Cr.timer.c=null,Cr.timer.t=NaN,--Ce.count,delete Ce[xr]}tt.c=yr,Yn(function(){return tt.c&&yr(Ut||1)&&(tt.c=null,tt.t=NaN),1},0,Ge),Ce.active=ge,Xe.event&&Xe.event.start.call(C,C.__data__,W),Ft=[],Xe.tween.forEach(function(ur,rn){(rn=rn.call(C,C.__data__,W))&&Ft.push(rn)}),yt=Xe.ease,gt=Xe.duration}function yr(Ut){for(var Jt=Ut/gt,or=yt(Jt),xr=Ft.length;xr>0;)Ft[--xr].call(C,or);if(Jt>=1)return Xe.event&&Xe.event.end.call(C,C.__data__,W),--Ce.count?delete Ce[ge]:delete C[se],1}Xe||(Ge=be.time,tt=Yn(Ot,0,Ge),Xe=Ce[ge]={tween:new M,time:Ge,timer:tt,delay:be.delay,duration:be.duration,ease:be.ease,index:W},be=null,++Ce.count)}a.svg.axis=function(){var C=a.scale.linear(),W=Lh,se=6,ge=6,be=3,Ce=[10],Xe=null,Ge;function tt(gt){gt.each(function(){var yt=a.select(this),Ft=this.__chart__||C,Ot=this.__chart__=C.copy(),rr=Xe==null?Ot.ticks?Ot.ticks.apply(Ot,Ce):Ot.domain():Xe,yr=Ge==null?Ot.tickFormat?Ot.tickFormat.apply(Ot,Ce):we:Ge,Ut=yt.selectAll(".tick").data(rr,Ot),Jt=Ut.enter().insert("g",".domain").attr("class","tick").style("opacity",pt),or=a.transition(Ut.exit()).style("opacity",pt).remove(),xr=a.transition(Ut.order()).style("opacity",1),Cr=Math.max(se,0)+be,ur,rn=Xa(Ot),xn=yt.selectAll(".domain").data([0]),Cn=(xn.enter().append("path").attr("class","domain"),a.transition(xn));Jt.append("line"),Jt.append("text");var An=Jt.select("line"),Nn=xr.select("line"),Gn=Ut.select("text").text(yr),ui=Jt.select("text"),Wn=xr.select("text"),ni=W==="top"||W==="left"?-1:1,Li,na,ia,Tn;if(W==="bottom"||W==="top"?(ur=bc,Li="x",ia="y",na="x2",Tn="y2",Gn.attr("dy",ni<0?"0em":".71em").style("text-anchor","middle"),Cn.attr("d","M"+rn[0]+","+ni*ge+"V0H"+rn[1]+"V"+ni*ge)):(ur=Zf,Li="y",ia="x",na="y2",Tn="x2",Gn.attr("dy",".32em").style("text-anchor",ni<0?"end":"start"),Cn.attr("d","M"+ni*ge+","+rn[0]+"H0V"+rn[1]+"H"+ni*ge)),An.attr(Tn,ni*se),ui.attr(ia,ni*Cr),Nn.attr(na,0).attr(Tn,ni*se),Wn.attr(Li,0).attr(ia,ni*Cr),Ot.rangeBand){var fi=Ot,pi=fi.rangeBand()/2;Ft=Ot=function(Oi){return fi(Oi)+pi}}else Ft.rangeBand?Ft=Ot:or.call(ur,Ot,Ft);Jt.call(ur,Ft,Ot),xr.call(ur,Ot,Ot)})}return tt.scale=function(gt){return arguments.length?(C=gt,tt):C},tt.orient=function(gt){return arguments.length?(W=gt in _c?gt+"":Lh,tt):W},tt.ticks=function(){return arguments.length?(Ce=n(arguments),tt):Ce},tt.tickValues=function(gt){return arguments.length?(Xe=gt,tt):Xe},tt.tickFormat=function(gt){return arguments.length?(Ge=gt,tt):Ge},tt.tickSize=function(gt){var yt=arguments.length;return yt?(se=+gt,ge=+arguments[yt-1],tt):se},tt.innerTickSize=function(gt){return arguments.length?(se=+gt,tt):se},tt.outerTickSize=function(gt){return arguments.length?(ge=+gt,tt):ge},tt.tickPadding=function(gt){return arguments.length?(be=+gt,tt):be},tt.tickSubdivide=function(){return arguments.length&&tt},tt};var Lh="bottom",_c={top:1,right:1,bottom:1,left:1};function bc(C,W,se){C.attr("transform",function(ge){var be=W(ge);return"translate("+(isFinite(be)?be:se(ge))+",0)"})}function Zf(C,W,se){C.attr("transform",function(ge){var be=W(ge);return"translate(0,"+(isFinite(be)?be:se(ge))+")"})}a.svg.brush=function(){var C=Ee(yt,"brushstart","brush","brushend"),W=null,se=null,ge=[0,0],be=[0,0],Ce,Xe,Ge=!0,tt=!0,gt=Wf[0];function yt(Ut){Ut.each(function(){var Jt=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",yr).on("touchstart.brush",yr),or=Jt.selectAll(".background").data([0]);or.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Jt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var xr=Jt.selectAll(".resize").data(gt,we);xr.exit().remove(),xr.enter().append("g").attr("class",function(xn){return"resize "+xn}).style("cursor",function(xn){return Ph[xn]}).append("rect").attr("x",function(xn){return/[ew]$/.test(xn)?-3:null}).attr("y",function(xn){return/^[ns]/.test(xn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),xr.style("display",yt.empty()?"none":null);var Cr=a.transition(Jt),ur=a.transition(or),rn;W&&(rn=Xa(W),ur.attr("x",rn[0]).attr("width",rn[1]-rn[0]),Ot(Cr)),se&&(rn=Xa(se),ur.attr("y",rn[0]).attr("height",rn[1]-rn[0]),rr(Cr)),Ft(Cr)})}yt.event=function(Ut){Ut.each(function(){var Jt=C.of(this,arguments),or={x:ge,y:be,i:Ce,j:Xe},xr=this.__chart__||or;this.__chart__=or,$u?a.select(this).transition().each("start.brush",function(){Ce=xr.i,Xe=xr.j,ge=xr.x,be=xr.y,Jt({type:"brushstart"})}).tween("brush:brush",function(){var Cr=ol(ge,or.x),ur=ol(be,or.y);return Ce=Xe=null,function(rn){ge=or.x=Cr(rn),be=or.y=ur(rn),Jt({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ce=or.i,Xe=or.j,Jt({type:"brush",mode:"resize"}),Jt({type:"brushend"})}):(Jt({type:"brushstart"}),Jt({type:"brush",mode:"resize"}),Jt({type:"brushend"}))})};function Ft(Ut){Ut.selectAll(".resize").attr("transform",function(Jt){return"translate("+ge[+/e$/.test(Jt)]+","+be[+/^s/.test(Jt)]+")"})}function Ot(Ut){Ut.select(".extent").attr("x",ge[0]),Ut.selectAll(".extent,.n>rect,.s>rect").attr("width",ge[1]-ge[0])}function rr(Ut){Ut.select(".extent").attr("y",be[0]),Ut.selectAll(".extent,.e>rect,.w>rect").attr("height",be[1]-be[0])}function yr(){var Ut=this,Jt=a.select(a.event.target),or=C.of(Ut,arguments),xr=a.select(Ut),Cr=Jt.datum(),ur=!/^(n|s)$/.test(Cr)&&W,rn=!/^(e|w)$/.test(Cr)&&se,xn=Jt.classed("extent"),Cn=dr(Ut),An,Nn=a.mouse(Ut),Gn,ui=a.select(h(Ut)).on("keydown.brush",Li).on("keyup.brush",na);if(a.event.changedTouches?ui.on("touchmove.brush",ia).on("touchend.brush",fi):ui.on("mousemove.brush",ia).on("mouseup.brush",fi),xr.interrupt().selectAll("*").interrupt(),xn)Nn[0]=ge[0]-Nn[0],Nn[1]=be[0]-Nn[1];else if(Cr){var Wn=+/w$/.test(Cr),ni=+/^n/.test(Cr);Gn=[ge[1-Wn]-Nn[0],be[1-ni]-Nn[1]],Nn[0]=ge[Wn],Nn[1]=be[ni]}else a.event.altKey&&(An=Nn.slice());xr.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",Jt.style("cursor")),or({type:"brushstart"}),ia();function Li(){a.event.keyCode==32&&(xn||(An=null,Nn[0]-=ge[1],Nn[1]-=be[1],xn=2),He())}function na(){a.event.keyCode==32&&xn==2&&(Nn[0]+=ge[1],Nn[1]+=be[1],xn=0,He())}function ia(){var pi=a.mouse(Ut),Oi=!1;Gn&&(pi[0]+=Gn[0],pi[1]+=Gn[1]),xn||(a.event.altKey?(An||(An=[(ge[0]+ge[1])/2,(be[0]+be[1])/2]),Nn[0]=ge[+(pi[0]<An[0])],Nn[1]=be[+(pi[1]<An[1])]):An=null),ur&&Tn(pi,W,0)&&(Ot(xr),Oi=!0),rn&&Tn(pi,se,1)&&(rr(xr),Oi=!0),Oi&&(Ft(xr),or({type:"brush",mode:xn?"move":"resize"}))}function Tn(pi,Oi,Da){var no=Xa(Oi),Wa=no[0],vo=no[1],gs=Nn[Da],ts=Da?be:ge,Ps=ts[1]-ts[0],Wo,Rs;if(xn&&(Wa-=gs,vo-=Ps+gs),Wo=(Da?tt:Ge)?Math.max(Wa,Math.min(vo,pi[Da])):pi[Da],xn?Rs=(Wo+=gs)+Ps:(An&&(gs=Math.max(Wa,Math.min(vo,2*An[Da]-Wo))),gs<Wo?(Rs=Wo,Wo=gs):Rs=gs),ts[0]!=Wo||ts[1]!=Rs)return Da?Xe=null:Ce=null,ts[0]=Wo,ts[1]=Rs,!0}function fi(){ia(),xr.style("pointer-events","all").selectAll(".resize").style("display",yt.empty()?"none":null),a.select("body").style("cursor",null),ui.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Cn(),or({type:"brushend"})}}return yt.x=function(Ut){return arguments.length?(W=Ut,gt=Wf[!W<<1|!se],yt):W},yt.y=function(Ut){return arguments.length?(se=Ut,gt=Wf[!W<<1|!se],yt):se},yt.clamp=function(Ut){return arguments.length?(W&&se?(Ge=!!Ut[0],tt=!!Ut[1]):W?Ge=!!Ut:se&&(tt=!!Ut),yt):W&&se?[Ge,tt]:W?Ge:se?tt:null},yt.extent=function(Ut){var Jt,or,xr,Cr,ur;return arguments.length?(W&&(Jt=Ut[0],or=Ut[1],se&&(Jt=Jt[0],or=or[0]),Ce=[Jt,or],W.invert&&(Jt=W(Jt),or=W(or)),or<Jt&&(ur=Jt,Jt=or,or=ur),(Jt!=ge[0]||or!=ge[1])&&(ge=[Jt,or])),se&&(xr=Ut[0],Cr=Ut[1],W&&(xr=xr[1],Cr=Cr[1]),Xe=[xr,Cr],se.invert&&(xr=se(xr),Cr=se(Cr)),Cr<xr&&(ur=xr,xr=Cr,Cr=ur),(xr!=be[0]||Cr!=be[1])&&(be=[xr,Cr])),yt):(W&&(Ce?(Jt=Ce[0],or=Ce[1]):(Jt=ge[0],or=ge[1],W.invert&&(Jt=W.invert(Jt),or=W.invert(or)),or<Jt&&(ur=Jt,Jt=or,or=ur))),se&&(Xe?(xr=Xe[0],Cr=Xe[1]):(xr=be[0],Cr=be[1],se.invert&&(xr=se.invert(xr),Cr=se.invert(Cr)),Cr<xr&&(ur=xr,xr=Cr,Cr=ur))),W&&se?[[Jt,xr],[or,Cr]]:W?[Jt,or]:se&&[xr,Cr])},yt.clear=function(){return yt.empty()||(ge=[0,0],be=[0,0],Ce=Xe=null),yt},yt.empty=function(){return!!W&&ge[0]==ge[1]||!!se&&be[0]==be[1]},a.rebind(yt,C,"on")};var Ph={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];a.text=qr(function(C){return C.responseText}),a.json=function(C,W){return tn(C,"application/json",rm,W)};function rm(C){return JSON.parse(C.responseText)}a.html=function(C,W){return tn(C,"text/html",Ad,W)};function Ad(C){var W=l.createRange();return W.selectNode(l.body),W.createContextualFragment(C.responseText)}a.xml=qr(function(C){return C.responseXML}),typeof i=="object"&&i.exports?i.exports=a:this.d3=a}).apply(self)},{}],12:[function(e,i,o){var a=typeof Reflect=="object"?Reflect:null,s=a&&typeof a.apply=="function"?a.apply:function(T,M,z){return Function.prototype.apply.call(T,M,z)},n;a&&typeof a.ownKeys=="function"?n=a.ownKeys:Object.getOwnPropertySymbols?n=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:n=function(T){return Object.getOwnPropertyNames(T)};function l(I){console&&console.warn&&console.warn(I)}var u=Number.isNaN||function(T){return T!==T};function h(){h.init.call(this)}i.exports=h,i.exports.once=S,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var v=10;function d(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(I){if(typeof I!="number"||I<0||u(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");v=I}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||u(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function p(I){return I._maxListeners===void 0?h.defaultMaxListeners:I._maxListeners}h.prototype.getMaxListeners=function(){return p(this)},h.prototype.emit=function(T){for(var M=[],z=1;z<arguments.length;z++)M.push(arguments[z]);var U=T==="error",F=this._events;if(F!==void 0)U=U&&F.error===void 0;else if(!U)return!1;if(U){var V;if(M.length>0&&(V=M[0]),V instanceof Error)throw V;var j=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw j.context=V,j}var H=F[T];if(H===void 0)return!1;if(typeof H=="function")s(H,this,M);else for(var Y=H.length,J=P(H,Y),z=0;z<Y;++z)s(J[z],this,M);return!0};function _(I,T,M,z){var U,F,V;if(d(M),F=I._events,F===void 0?(F=I._events=Object.create(null),I._eventsCount=0):(F.newListener!==void 0&&(I.emit("newListener",T,M.listener?M.listener:M),F=I._events),V=F[T]),V===void 0)V=F[T]=M,++I._eventsCount;else if(typeof V=="function"?V=F[T]=z?[M,V]:[V,M]:z?V.unshift(M):V.push(M),U=p(I),U>0&&V.length>U&&!V.warned){V.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=I,j.type=T,j.count=V.length,l(j)}return I}h.prototype.addListener=function(T,M){return _(this,T,M,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(T,M){return _(this,T,M,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(I,T,M){var z={fired:!1,wrapFn:void 0,target:I,type:T,listener:M},U=b.bind(z);return U.listener=M,z.wrapFn=U,U}h.prototype.once=function(T,M){return d(M),this.on(T,x(this,T,M)),this},h.prototype.prependOnceListener=function(T,M){return d(M),this.prependListener(T,x(this,T,M)),this},h.prototype.removeListener=function(T,M){var z,U,F,V,j;if(d(M),U=this._events,U===void 0)return this;if(z=U[T],z===void 0)return this;if(z===M||z.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete U[T],U.removeListener&&this.emit("removeListener",T,z.listener||M));else if(typeof z!="function"){for(F=-1,V=z.length-1;V>=0;V--)if(z[V]===M||z[V].listener===M){j=z[V].listener,F=V;break}if(F<0)return this;F===0?z.shift():D(z,F),z.length===1&&(U[T]=z[0]),U.removeListener!==void 0&&this.emit("removeListener",T,j||M)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(T){var M,z,U;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[T]),this;if(arguments.length===0){var F=Object.keys(z),V;for(U=0;U<F.length;++U)V=F[U],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=z[T],typeof M=="function")this.removeListener(T,M);else if(M!==void 0)for(U=M.length-1;U>=0;U--)this.removeListener(T,M[U]);return this};function E(I,T,M){var z=I._events;if(z===void 0)return[];var U=z[T];return U===void 0?[]:typeof U=="function"?M?[U.listener||U]:[U]:M?R(U):P(U,U.length)}h.prototype.listeners=function(T){return E(this,T,!0)},h.prototype.rawListeners=function(T){return E(this,T,!1)},h.listenerCount=function(I,T){return typeof I.listenerCount=="function"?I.listenerCount(T):A.call(I,T)},h.prototype.listenerCount=A;function A(I){var T=this._events;if(T!==void 0){var M=T[I];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function P(I,T){for(var M=new Array(T),z=0;z<T;++z)M[z]=I[z];return M}function D(I,T){for(;T+1<I.length;T++)I[T]=I[T+1];I.pop()}function R(I){for(var T=new Array(I.length),M=0;M<T.length;++M)T[M]=I[M].listener||I[M];return T}function S(I,T){return new Promise(function(M,z){function U(){F!==void 0&&I.removeListener("error",F),M([].slice.call(arguments))}var F;T!=="error"&&(F=function(j){I.removeListener(T,U),z(j)},I.once("error",F)),I.once(T,U)})}},{}],13:[function(e,i,o){(function(a,s){typeof o=="object"&&typeof i<"u"?s(o):(a=typeof globalThis<"u"?globalThis:a||self,s(a.d3=a.d3||{}))})(this,function(a){function s(F){return Math.abs(F=Math.round(F))>=1e21?F.toLocaleString("en").replace(/,/g,""):F.toString(10)}function n(F,V){if((j=(F=V?F.toExponential(V-1):F.toExponential()).indexOf("e"))<0)return null;var j,H=F.slice(0,j);return[H.length>1?H[0]+H.slice(2):H,+F.slice(j+1)]}function l(F){return F=n(Math.abs(F)),F?F[1]:NaN}function u(F,V){return function(j,H){for(var Y=j.length,J=[],ne=0,q=F[0],we=0;Y>0&&q>0&&(we+q+1>H&&(q=Math.max(1,H-we)),J.push(j.substring(Y-=q,Y+q)),!((we+=q+1)>H));)q=F[ne=(ne+1)%F.length];return J.reverse().join(V)}}function h(F){return function(V){return V.replace(/[0-9]/g,function(j){return F[+j]})}}var v=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d(F){if(!(V=v.exec(F)))throw new Error("invalid format: "+F);var V;return new p({fill:V[1],align:V[2],sign:V[3],symbol:V[4],zero:V[5],width:V[6],comma:V[7],precision:V[8]&&V[8].slice(1),trim:V[9],type:V[10]})}d.prototype=p.prototype;function p(F){this.fill=F.fill===void 0?" ":F.fill+"",this.align=F.align===void 0?">":F.align+"",this.sign=F.sign===void 0?"-":F.sign+"",this.symbol=F.symbol===void 0?"":F.symbol+"",this.zero=!!F.zero,this.width=F.width===void 0?void 0:+F.width,this.comma=!!F.comma,this.precision=F.precision===void 0?void 0:+F.precision,this.trim=!!F.trim,this.type=F.type===void 0?"":F.type+""}p.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _(F){e:for(var V=F.length,j=1,H=-1,Y;j<V;++j)switch(F[j]){case".":H=Y=j;break;case"0":H===0&&(H=j),Y=j;break;default:if(!+F[j])break e;H>0&&(H=0);break}return H>0?F.slice(0,H)+F.slice(Y+1):F}var b;function x(F,V){var j=n(F,V);if(!j)return F+"";var H=j[0],Y=j[1],J=Y-(b=Math.max(-8,Math.min(8,Math.floor(Y/3)))*3)+1,ne=H.length;return J===ne?H:J>ne?H+new Array(J-ne+1).join("0"):J>0?H.slice(0,J)+"."+H.slice(J):"0."+new Array(1-J).join("0")+n(F,Math.max(0,V+J-1))[0]}function E(F,V){var j=n(F,V);if(!j)return F+"";var H=j[0],Y=j[1];return Y<0?"0."+new Array(-Y).join("0")+H:H.length>Y+1?H.slice(0,Y+1)+"."+H.slice(Y+1):H+new Array(Y-H.length+2).join("0")}var A={"%":function(F,V){return(F*100).toFixed(V)},b:function(F){return Math.round(F).toString(2)},c:function(F){return F+""},d:s,e:function(F,V){return F.toExponential(V)},f:function(F,V){return F.toFixed(V)},g:function(F,V){return F.toPrecision(V)},o:function(F){return Math.round(F).toString(8)},p:function(F,V){return E(F*100,V)},r:E,s:x,X:function(F){return Math.round(F).toString(16).toUpperCase()},x:function(F){return Math.round(F).toString(16)}};function P(F){return F}var D=Array.prototype.map,R=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function S(F){var V=F.grouping===void 0||F.thousands===void 0?P:u(D.call(F.grouping,Number),F.thousands+""),j=F.currency===void 0?"":F.currency[0]+"",H=F.currency===void 0?"":F.currency[1]+"",Y=F.decimal===void 0?".":F.decimal+"",J=F.numerals===void 0?P:h(D.call(F.numerals,String)),ne=F.percent===void 0?"%":F.percent+"",q=F.minus===void 0?"-":F.minus+"",we=F.nan===void 0?"NaN":F.nan+"";function ee(re){re=d(re);var de=re.fill,me=re.align,xe=re.sign,He=re.symbol,Re=re.zero,Ee=re.width,ke=re.comma,$=re.precision,le=re.trim,K=re.type;K==="n"?(ke=!0,K="g"):A[K]||($===void 0&&($=12),le=!0,K="g"),(Re||de==="0"&&me==="=")&&(Re=!0,de="0",me="=");var te=He==="$"?j:He==="#"&&/[boxX]/.test(K)?"0"+K.toLowerCase():"",ie=He==="$"?H:/[%p]/.test(K)?ne:"",ce=A[K],ae=/[defgprs%]/.test(K);$=$===void 0?6:/[gprs]/.test(K)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function ve(pe){var he=te,ye=ie,_e,je,Je;if(K==="c")ye=ce(pe)+ye,pe="";else{pe=+pe;var nt=pe<0||1/pe<0;if(pe=isNaN(pe)?we:ce(Math.abs(pe),$),le&&(pe=_(pe)),nt&&+pe==0&&xe!=="+"&&(nt=!1),he=(nt?xe==="("?xe:q:xe==="-"||xe==="("?"":xe)+he,ye=(K==="s"?R[8+b/3]:"")+ye+(nt&&xe==="("?")":""),ae){for(_e=-1,je=pe.length;++_e<je;)if(Je=pe.charCodeAt(_e),48>Je||Je>57){ye=(Je===46?Y+pe.slice(_e+1):pe.slice(_e))+ye,pe=pe.slice(0,_e);break}}}ke&&!Re&&(pe=V(pe,1/0));var at=he.length+pe.length+ye.length,Fe=at<Ee?new Array(Ee-at+1).join(de):"";switch(ke&&Re&&(pe=V(Fe+pe,Fe.length?Ee-ye.length:1/0),Fe=""),me){case"<":pe=he+pe+ye+Fe;break;case"=":pe=he+Fe+pe+ye;break;case"^":pe=Fe.slice(0,at=Fe.length>>1)+he+pe+ye+Fe.slice(at);break;default:pe=Fe+he+pe+ye;break}return J(pe)}return ve.toString=function(){return re+""},ve}function X(re,de){var me=ee((re=d(re),re.type="f",re)),xe=Math.max(-8,Math.min(8,Math.floor(l(de)/3)))*3,He=Math.pow(10,-xe),Re=R[8+xe/3];return function(Ee){return me(He*Ee)+Re}}return{format:ee,formatPrefix:X}}var I;T({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function T(F){return I=S(F),a.format=I.format,a.formatPrefix=I.formatPrefix,I}function M(F){return Math.max(0,-l(Math.abs(F)))}function z(F,V){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(l(V)/3)))*3-l(Math.abs(F)))}function U(F,V){return F=Math.abs(F),V=Math.abs(V)-F,Math.max(0,l(V)-l(F))+1}a.FormatSpecifier=p,a.formatDefaultLocale=T,a.formatLocale=S,a.formatSpecifier=d,a.precisionFixed=M,a.precisionPrefix=z,a.precisionRound=U,Object.defineProperty(a,"__esModule",{value:!0})})},{}],14:[function(e,i,o){(function(a,s){typeof o=="object"&&typeof i<"u"?s(o,e("d3-time")):(a=a||self,s(a.d3=a.d3||{},a.d3))})(this,function(a,s){function n($e){if(0<=$e.y&&$e.y<100){var pt=new Date(-1,$e.m,$e.d,$e.H,$e.M,$e.S,$e.L);return pt.setFullYear($e.y),pt}return new Date($e.y,$e.m,$e.d,$e.H,$e.M,$e.S,$e.L)}function l($e){if(0<=$e.y&&$e.y<100){var pt=new Date(Date.UTC(-1,$e.m,$e.d,$e.H,$e.M,$e.S,$e.L));return pt.setUTCFullYear($e.y),pt}return new Date(Date.UTC($e.y,$e.m,$e.d,$e.H,$e.M,$e.S,$e.L))}function u($e,pt,kt){return{y:$e,m:pt,d:kt,H:0,M:0,S:0,L:0}}function h($e){var pt=$e.dateTime,kt=$e.date,Me=$e.time,rt=$e.periods,st=$e.days,ft=$e.shortDays,zt=$e.months,Ue=$e.shortMonths,Ae=E(rt),Oe=A(rt),We=E(st),Ve=A(st),lt=E(ft),mt=A(ft),dt=E(zt),At=A(zt),Bt=E(Ue),ir=A(Ue),tr={a:xt,A:Ct,b:Rt,B:Lt,c:null,d:re,e:re,f:Re,H:de,I:me,j:xe,L:He,m:Ee,M:ke,p:Pt,q:nr,Q:Vt,s:Yt,S:$,u:le,U:K,V:te,w:ie,W:ce,x:null,X:null,y:ae,Y:ve,Z:pe,"%":Mt},vt={a:Tr,A:gr,b:$t,B:mr,c:null,d:he,e:he,f:nt,H:ye,I:_e,j:je,L:Je,m:at,M:Fe,p:Pr,q:wr,Q:Vt,s:Yt,S:Ie,u:Ke,U:Qe,V:it,w:Ne,W:ht,x:null,X:null,y:Tt,Y:Xt,Z:Nt,"%":Mt},pr={a:Kr,A:vr,b:Xr,B:$r,c:Le,d:V,e:V,f:q,H,I:H,j,L:ne,m:F,M:Y,p:Yr,q:U,Q:ee,s:X,S:J,u:D,U:R,V:S,w:P,W:I,x:De,X:bt,y:M,Y:T,Z:z,"%":we};tr.x=Gt(kt,tr),tr.X=Gt(Me,tr),tr.c=Gt(pt,tr),vt.x=Gt(kt,vt),vt.X=Gt(Me,vt),vt.c=Gt(pt,vt);function Gt(fr,Ir){return function(Vr){var _r=[],Gr=-1,qr=0,tn=fr.length,Ur,Sn,wn;for(Vr instanceof Date||(Vr=new Date(+Vr));++Gr<tn;)fr.charCodeAt(Gr)===37&&(_r.push(fr.slice(qr,Gr)),(Sn=v[Ur=fr.charAt(++Gr)])!=null?Ur=fr.charAt(++Gr):Sn=Ur==="e"?" ":"0",(wn=Ir[Ur])&&(Ur=wn(Vr,Sn)),_r.push(Ur),qr=Gr+1);return _r.push(fr.slice(qr,Gr)),_r.join("")}}function Mr(fr,Ir){return function(Vr){var _r=u(1900,void 0,1),Gr=Rr(_r,fr,Vr+="",0),qr,tn;if(Gr!=Vr.length)return null;if("Q"in _r)return new Date(_r.Q);if("s"in _r)return new Date(_r.s*1e3+("L"in _r?_r.L:0));if(Ir&&!("Z"in _r)&&(_r.Z=0),"p"in _r&&(_r.H=_r.H%12+_r.p*12),_r.m===void 0&&(_r.m="q"in _r?_r.q:0),"V"in _r){if(_r.V<1||_r.V>53)return null;"w"in _r||(_r.w=1),"Z"in _r?(qr=l(u(_r.y,0,1)),tn=qr.getUTCDay(),qr=tn>4||tn===0?s.utcMonday.ceil(qr):s.utcMonday(qr),qr=s.utcDay.offset(qr,(_r.V-1)*7),_r.y=qr.getUTCFullYear(),_r.m=qr.getUTCMonth(),_r.d=qr.getUTCDate()+(_r.w+6)%7):(qr=n(u(_r.y,0,1)),tn=qr.getDay(),qr=tn>4||tn===0?s.timeMonday.ceil(qr):s.timeMonday(qr),qr=s.timeDay.offset(qr,(_r.V-1)*7),_r.y=qr.getFullYear(),_r.m=qr.getMonth(),_r.d=qr.getDate()+(_r.w+6)%7)}else("W"in _r||"U"in _r)&&("w"in _r||(_r.w="u"in _r?_r.u%7:"W"in _r?1:0),tn="Z"in _r?l(u(_r.y,0,1)).getUTCDay():n(u(_r.y,0,1)).getDay(),_r.m=0,_r.d="W"in _r?(_r.w+6)%7+_r.W*7-(tn+5)%7:_r.w+_r.U*7-(tn+6)%7);return"Z"in _r?(_r.H+=_r.Z/100|0,_r.M+=_r.Z%100,l(_r)):n(_r)}}function Rr(fr,Ir,Vr,_r){for(var Gr=0,qr=Ir.length,tn=Vr.length,Ur,Sn;Gr<qr;){if(_r>=tn)return-1;if(Ur=Ir.charCodeAt(Gr++),Ur===37){if(Ur=Ir.charAt(Gr++),Sn=pr[Ur in v?Ir.charAt(Gr++):Ur],!Sn||(_r=Sn(fr,Vr,_r))<0)return-1}else if(Ur!=Vr.charCodeAt(_r++))return-1}return _r}function Yr(fr,Ir,Vr){var _r=Ae.exec(Ir.slice(Vr));return _r?(fr.p=Oe[_r[0].toLowerCase()],Vr+_r[0].length):-1}function Kr(fr,Ir,Vr){var _r=lt.exec(Ir.slice(Vr));return _r?(fr.w=mt[_r[0].toLowerCase()],Vr+_r[0].length):-1}function vr(fr,Ir,Vr){var _r=We.exec(Ir.slice(Vr));return _r?(fr.w=Ve[_r[0].toLowerCase()],Vr+_r[0].length):-1}function Xr(fr,Ir,Vr){var _r=Bt.exec(Ir.slice(Vr));return _r?(fr.m=ir[_r[0].toLowerCase()],Vr+_r[0].length):-1}function $r(fr,Ir,Vr){var _r=dt.exec(Ir.slice(Vr));return _r?(fr.m=At[_r[0].toLowerCase()],Vr+_r[0].length):-1}function Le(fr,Ir,Vr){return Rr(fr,pt,Ir,Vr)}function De(fr,Ir,Vr){return Rr(fr,kt,Ir,Vr)}function bt(fr,Ir,Vr){return Rr(fr,Me,Ir,Vr)}function xt(fr){return ft[fr.getDay()]}function Ct(fr){return st[fr.getDay()]}function Rt(fr){return Ue[fr.getMonth()]}function Lt(fr){return zt[fr.getMonth()]}function Pt(fr){return rt[+(fr.getHours()>=12)]}function nr(fr){return 1+~~(fr.getMonth()/3)}function Tr(fr){return ft[fr.getUTCDay()]}function gr(fr){return st[fr.getUTCDay()]}function $t(fr){return Ue[fr.getUTCMonth()]}function mr(fr){return zt[fr.getUTCMonth()]}function Pr(fr){return rt[+(fr.getUTCHours()>=12)]}function wr(fr){return 1+~~(fr.getUTCMonth()/3)}return{format:function(fr){var Ir=Gt(fr+="",tr);return Ir.toString=function(){return fr},Ir},parse:function(fr){var Ir=Mr(fr+="",!1);return Ir.toString=function(){return fr},Ir},utcFormat:function(fr){var Ir=Gt(fr+="",vt);return Ir.toString=function(){return fr},Ir},utcParse:function(fr){var Ir=Mr(fr+="",!0);return Ir.toString=function(){return fr},Ir}}}var v={"-":"",_:" ",0:"0"},d=/^\s*\d+/,p=/^%/,_=/[\\^$*+?|[\]().{}]/g;function b($e,pt,kt){var Me=$e<0?"-":"",rt=(Me?-$e:$e)+"",st=rt.length;return Me+(st<kt?new Array(kt-st+1).join(pt)+rt:rt)}function x($e){return $e.replace(_,"\\$&")}function E($e){return new RegExp("^(?:"+$e.map(x).join("|")+")","i")}function A($e){for(var pt={},kt=-1,Me=$e.length;++kt<Me;)pt[$e[kt].toLowerCase()]=kt;return pt}function P($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+1));return Me?($e.w=+Me[0],kt+Me[0].length):-1}function D($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+1));return Me?($e.u=+Me[0],kt+Me[0].length):-1}function R($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.U=+Me[0],kt+Me[0].length):-1}function S($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.V=+Me[0],kt+Me[0].length):-1}function I($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.W=+Me[0],kt+Me[0].length):-1}function T($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+4));return Me?($e.y=+Me[0],kt+Me[0].length):-1}function M($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.y=+Me[0]+(+Me[0]>68?1900:2e3),kt+Me[0].length):-1}function z($e,pt,kt){var Me=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(pt.slice(kt,kt+6));return Me?($e.Z=Me[1]?0:-(Me[2]+(Me[3]||"00")),kt+Me[0].length):-1}function U($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+1));return Me?($e.q=Me[0]*3-3,kt+Me[0].length):-1}function F($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.m=Me[0]-1,kt+Me[0].length):-1}function V($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.d=+Me[0],kt+Me[0].length):-1}function j($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+3));return Me?($e.m=0,$e.d=+Me[0],kt+Me[0].length):-1}function H($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.H=+Me[0],kt+Me[0].length):-1}function Y($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.M=+Me[0],kt+Me[0].length):-1}function J($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+2));return Me?($e.S=+Me[0],kt+Me[0].length):-1}function ne($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+3));return Me?($e.L=+Me[0],kt+Me[0].length):-1}function q($e,pt,kt){var Me=d.exec(pt.slice(kt,kt+6));return Me?($e.L=Math.floor(Me[0]/1e3),kt+Me[0].length):-1}function we($e,pt,kt){var Me=p.exec(pt.slice(kt,kt+1));return Me?kt+Me[0].length:-1}function ee($e,pt,kt){var Me=d.exec(pt.slice(kt));return Me?($e.Q=+Me[0],kt+Me[0].length):-1}function X($e,pt,kt){var Me=d.exec(pt.slice(kt));return Me?($e.s=+Me[0],kt+Me[0].length):-1}function re($e,pt){return b($e.getDate(),pt,2)}function de($e,pt){return b($e.getHours(),pt,2)}function me($e,pt){return b($e.getHours()%12||12,pt,2)}function xe($e,pt){return b(1+s.timeDay.count(s.timeYear($e),$e),pt,3)}function He($e,pt){return b($e.getMilliseconds(),pt,3)}function Re($e,pt){return He($e,pt)+"000"}function Ee($e,pt){return b($e.getMonth()+1,pt,2)}function ke($e,pt){return b($e.getMinutes(),pt,2)}function $($e,pt){return b($e.getSeconds(),pt,2)}function le($e){var pt=$e.getDay();return pt===0?7:pt}function K($e,pt){return b(s.timeSunday.count(s.timeYear($e)-1,$e),pt,2)}function te($e,pt){var kt=$e.getDay();return $e=kt>=4||kt===0?s.timeThursday($e):s.timeThursday.ceil($e),b(s.timeThursday.count(s.timeYear($e),$e)+(s.timeYear($e).getDay()===4),pt,2)}function ie($e){return $e.getDay()}function ce($e,pt){return b(s.timeMonday.count(s.timeYear($e)-1,$e),pt,2)}function ae($e,pt){return b($e.getFullYear()%100,pt,2)}function ve($e,pt){return b($e.getFullYear()%1e4,pt,4)}function pe($e){var pt=$e.getTimezoneOffset();return(pt>0?"-":(pt*=-1,"+"))+b(pt/60|0,"0",2)+b(pt%60,"0",2)}function he($e,pt){return b($e.getUTCDate(),pt,2)}function ye($e,pt){return b($e.getUTCHours(),pt,2)}function _e($e,pt){return b($e.getUTCHours()%12||12,pt,2)}function je($e,pt){return b(1+s.utcDay.count(s.utcYear($e),$e),pt,3)}function Je($e,pt){return b($e.getUTCMilliseconds(),pt,3)}function nt($e,pt){return Je($e,pt)+"000"}function at($e,pt){return b($e.getUTCMonth()+1,pt,2)}function Fe($e,pt){return b($e.getUTCMinutes(),pt,2)}function Ie($e,pt){return b($e.getUTCSeconds(),pt,2)}function Ke($e){var pt=$e.getUTCDay();return pt===0?7:pt}function Qe($e,pt){return b(s.utcSunday.count(s.utcYear($e)-1,$e),pt,2)}function it($e,pt){var kt=$e.getUTCDay();return $e=kt>=4||kt===0?s.utcThursday($e):s.utcThursday.ceil($e),b(s.utcThursday.count(s.utcYear($e),$e)+(s.utcYear($e).getUTCDay()===4),pt,2)}function Ne($e){return $e.getUTCDay()}function ht($e,pt){return b(s.utcMonday.count(s.utcYear($e)-1,$e),pt,2)}function Tt($e,pt){return b($e.getUTCFullYear()%100,pt,2)}function Xt($e,pt){return b($e.getUTCFullYear()%1e4,pt,4)}function Nt(){return"+0000"}function Mt(){return"%"}function Vt($e){return+$e}function Yt($e){return Math.floor(+$e/1e3)}var cr;Nr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nr($e){return cr=h($e),a.timeFormat=cr.format,a.timeParse=cr.parse,a.utcFormat=cr.utcFormat,a.utcParse=cr.utcParse,cr}var er="%Y-%m-%dT%H:%M:%S.%LZ";function Wt($e){return $e.toISOString()}var dr=Date.prototype.toISOString?Wt:a.utcFormat(er);function zr($e){var pt=new Date($e);return isNaN(pt)?null:pt}var Dr=+new Date("2000-01-01T00:00:00.000Z")?zr:a.utcParse(er);a.isoFormat=dr,a.isoParse=Dr,a.timeFormatDefaultLocale=Nr,a.timeFormatLocale=h,Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-time":15}],15:[function(e,i,o){(function(a,s){typeof o=="object"&&typeof i<"u"?s(o):(a=a||self,s(a.d3=a.d3||{}))})(this,function(a){var s=new Date,n=new Date;function l(Ne,ht,Tt,Xt){function Nt(Mt){return Ne(Mt=arguments.length===0?new Date:new Date(+Mt)),Mt}return Nt.floor=function(Mt){return Ne(Mt=new Date(+Mt)),Mt},Nt.ceil=function(Mt){return Ne(Mt=new Date(Mt-1)),ht(Mt,1),Ne(Mt),Mt},Nt.round=function(Mt){var Vt=Nt(Mt),Yt=Nt.ceil(Mt);return Mt-Vt<Yt-Mt?Vt:Yt},Nt.offset=function(Mt,Vt){return ht(Mt=new Date(+Mt),Vt==null?1:Math.floor(Vt)),Mt},Nt.range=function(Mt,Vt,Yt){var cr=[],Nr;if(Mt=Nt.ceil(Mt),Yt=Yt==null?1:Math.floor(Yt),!(Mt<Vt)||!(Yt>0))return cr;do cr.push(Nr=new Date(+Mt)),ht(Mt,Yt),Ne(Mt);while(Nr<Mt&&Mt<Vt);return cr},Nt.filter=function(Mt){return l(function(Vt){if(Vt>=Vt)for(;Ne(Vt),!Mt(Vt);)Vt.setTime(Vt-1)},function(Vt,Yt){if(Vt>=Vt)if(Yt<0)for(;++Yt<=0;)for(;ht(Vt,-1),!Mt(Vt););else for(;--Yt>=0;)for(;ht(Vt,1),!Mt(Vt););})},Tt&&(Nt.count=function(Mt,Vt){return s.setTime(+Mt),n.setTime(+Vt),Ne(s),Ne(n),Math.floor(Tt(s,n))},Nt.every=function(Mt){return Mt=Math.floor(Mt),!isFinite(Mt)||!(Mt>0)?null:Mt>1?Nt.filter(Xt?function(Vt){return Xt(Vt)%Mt===0}:function(Vt){return Nt.count(0,Vt)%Mt===0}):Nt}),Nt}var u=l(function(){},function(Ne,ht){Ne.setTime(+Ne+ht)},function(Ne,ht){return ht-Ne});u.every=function(Ne){return Ne=Math.floor(Ne),!isFinite(Ne)||!(Ne>0)?null:Ne>1?l(function(ht){ht.setTime(Math.floor(ht/Ne)*Ne)},function(ht,Tt){ht.setTime(+ht+Tt*Ne)},function(ht,Tt){return(Tt-ht)/Ne}):u};var h=u.range,v=1e3,d=6e4,p=36e5,_=864e5,b=6048e5,x=l(function(Ne){Ne.setTime(Ne-Ne.getMilliseconds())},function(Ne,ht){Ne.setTime(+Ne+ht*v)},function(Ne,ht){return(ht-Ne)/v},function(Ne){return Ne.getUTCSeconds()}),E=x.range,A=l(function(Ne){Ne.setTime(Ne-Ne.getMilliseconds()-Ne.getSeconds()*v)},function(Ne,ht){Ne.setTime(+Ne+ht*d)},function(Ne,ht){return(ht-Ne)/d},function(Ne){return Ne.getMinutes()}),P=A.range,D=l(function(Ne){Ne.setTime(Ne-Ne.getMilliseconds()-Ne.getSeconds()*v-Ne.getMinutes()*d)},function(Ne,ht){Ne.setTime(+Ne+ht*p)},function(Ne,ht){return(ht-Ne)/p},function(Ne){return Ne.getHours()}),R=D.range,S=l(function(Ne){Ne.setHours(0,0,0,0)},function(Ne,ht){Ne.setDate(Ne.getDate()+ht)},function(Ne,ht){return(ht-Ne-(ht.getTimezoneOffset()-Ne.getTimezoneOffset())*d)/_},function(Ne){return Ne.getDate()-1}),I=S.range;function T(Ne){return l(function(ht){ht.setDate(ht.getDate()-(ht.getDay()+7-Ne)%7),ht.setHours(0,0,0,0)},function(ht,Tt){ht.setDate(ht.getDate()+Tt*7)},function(ht,Tt){return(Tt-ht-(Tt.getTimezoneOffset()-ht.getTimezoneOffset())*d)/b})}var M=T(0),z=T(1),U=T(2),F=T(3),V=T(4),j=T(5),H=T(6),Y=M.range,J=z.range,ne=U.range,q=F.range,we=V.range,ee=j.range,X=H.range,re=l(function(Ne){Ne.setDate(1),Ne.setHours(0,0,0,0)},function(Ne,ht){Ne.setMonth(Ne.getMonth()+ht)},function(Ne,ht){return ht.getMonth()-Ne.getMonth()+(ht.getFullYear()-Ne.getFullYear())*12},function(Ne){return Ne.getMonth()}),de=re.range,me=l(function(Ne){Ne.setMonth(0,1),Ne.setHours(0,0,0,0)},function(Ne,ht){Ne.setFullYear(Ne.getFullYear()+ht)},function(Ne,ht){return ht.getFullYear()-Ne.getFullYear()},function(Ne){return Ne.getFullYear()});me.every=function(Ne){return!isFinite(Ne=Math.floor(Ne))||!(Ne>0)?null:l(function(ht){ht.setFullYear(Math.floor(ht.getFullYear()/Ne)*Ne),ht.setMonth(0,1),ht.setHours(0,0,0,0)},function(ht,Tt){ht.setFullYear(ht.getFullYear()+Tt*Ne)})};var xe=me.range,He=l(function(Ne){Ne.setUTCSeconds(0,0)},function(Ne,ht){Ne.setTime(+Ne+ht*d)},function(Ne,ht){return(ht-Ne)/d},function(Ne){return Ne.getUTCMinutes()}),Re=He.range,Ee=l(function(Ne){Ne.setUTCMinutes(0,0,0)},function(Ne,ht){Ne.setTime(+Ne+ht*p)},function(Ne,ht){return(ht-Ne)/p},function(Ne){return Ne.getUTCHours()}),ke=Ee.range,$=l(function(Ne){Ne.setUTCHours(0,0,0,0)},function(Ne,ht){Ne.setUTCDate(Ne.getUTCDate()+ht)},function(Ne,ht){return(ht-Ne)/_},function(Ne){return Ne.getUTCDate()-1}),le=$.range;function K(Ne){return l(function(ht){ht.setUTCDate(ht.getUTCDate()-(ht.getUTCDay()+7-Ne)%7),ht.setUTCHours(0,0,0,0)},function(ht,Tt){ht.setUTCDate(ht.getUTCDate()+Tt*7)},function(ht,Tt){return(Tt-ht)/b})}var te=K(0),ie=K(1),ce=K(2),ae=K(3),ve=K(4),pe=K(5),he=K(6),ye=te.range,_e=ie.range,je=ce.range,Je=ae.range,nt=ve.range,at=pe.range,Fe=he.range,Ie=l(function(Ne){Ne.setUTCDate(1),Ne.setUTCHours(0,0,0,0)},function(Ne,ht){Ne.setUTCMonth(Ne.getUTCMonth()+ht)},function(Ne,ht){return ht.getUTCMonth()-Ne.getUTCMonth()+(ht.getUTCFullYear()-Ne.getUTCFullYear())*12},function(Ne){return Ne.getUTCMonth()}),Ke=Ie.range,Qe=l(function(Ne){Ne.setUTCMonth(0,1),Ne.setUTCHours(0,0,0,0)},function(Ne,ht){Ne.setUTCFullYear(Ne.getUTCFullYear()+ht)},function(Ne,ht){return ht.getUTCFullYear()-Ne.getUTCFullYear()},function(Ne){return Ne.getUTCFullYear()});Qe.every=function(Ne){return!isFinite(Ne=Math.floor(Ne))||!(Ne>0)?null:l(function(ht){ht.setUTCFullYear(Math.floor(ht.getUTCFullYear()/Ne)*Ne),ht.setUTCMonth(0,1),ht.setUTCHours(0,0,0,0)},function(ht,Tt){ht.setUTCFullYear(ht.getUTCFullYear()+Tt*Ne)})};var it=Qe.range;a.timeDay=S,a.timeDays=I,a.timeFriday=j,a.timeFridays=ee,a.timeHour=D,a.timeHours=R,a.timeInterval=l,a.timeMillisecond=u,a.timeMilliseconds=h,a.timeMinute=A,a.timeMinutes=P,a.timeMonday=z,a.timeMondays=J,a.timeMonth=re,a.timeMonths=de,a.timeSaturday=H,a.timeSaturdays=X,a.timeSecond=x,a.timeSeconds=E,a.timeSunday=M,a.timeSundays=Y,a.timeThursday=V,a.timeThursdays=we,a.timeTuesday=U,a.timeTuesdays=ne,a.timeWednesday=F,a.timeWednesdays=q,a.timeWeek=M,a.timeWeeks=Y,a.timeYear=me,a.timeYears=xe,a.utcDay=$,a.utcDays=le,a.utcFriday=pe,a.utcFridays=at,a.utcHour=Ee,a.utcHours=ke,a.utcMillisecond=u,a.utcMilliseconds=h,a.utcMinute=He,a.utcMinutes=Re,a.utcMonday=ie,a.utcMondays=_e,a.utcMonth=Ie,a.utcMonths=Ke,a.utcSaturday=he,a.utcSaturdays=Fe,a.utcSecond=x,a.utcSeconds=E,a.utcSunday=te,a.utcSundays=ye,a.utcThursday=ve,a.utcThursdays=nt,a.utcTuesday=ce,a.utcTuesdays=je,a.utcWednesday=ae,a.utcWednesdays=Je,a.utcWeek=te,a.utcWeeks=ye,a.utcYear=Qe,a.utcYears=it,Object.defineProperty(a,"__esModule",{value:!0})})},{}],16:[function(e,i,o){arguments[4][15][0].apply(o,arguments)},{dup:15}],17:[function(e,i,o){var a=e("is-string-blank");i.exports=function(s){var n=typeof s;if(n==="string"){var l=s;if(s=+s,s===0&&a(l))return!1}else if(n!=="number")return!1;return s-s<1}},{"is-string-blank":52}],18:[function(e,i,o){i.exports=a;function a(s,n){var l=n[0],u=n[1],h=n[2],v=n[3],d=n[4],p=n[5],_=n[6],b=n[7],x=n[8],E=n[9],A=n[10],P=n[11],D=n[12],R=n[13],S=n[14],I=n[15];return s[0]=p*(A*I-P*S)-E*(_*I-b*S)+R*(_*P-b*A),s[1]=-(u*(A*I-P*S)-E*(h*I-v*S)+R*(h*P-v*A)),s[2]=u*(_*I-b*S)-p*(h*I-v*S)+R*(h*b-v*_),s[3]=-(u*(_*P-b*A)-p*(h*P-v*A)+E*(h*b-v*_)),s[4]=-(d*(A*I-P*S)-x*(_*I-b*S)+D*(_*P-b*A)),s[5]=l*(A*I-P*S)-x*(h*I-v*S)+D*(h*P-v*A),s[6]=-(l*(_*I-b*S)-d*(h*I-v*S)+D*(h*b-v*_)),s[7]=l*(_*P-b*A)-d*(h*P-v*A)+x*(h*b-v*_),s[8]=d*(E*I-P*R)-x*(p*I-b*R)+D*(p*P-b*E),s[9]=-(l*(E*I-P*R)-x*(u*I-v*R)+D*(u*P-v*E)),s[10]=l*(p*I-b*R)-d*(u*I-v*R)+D*(u*b-v*p),s[11]=-(l*(p*P-b*E)-d*(u*P-v*E)+x*(u*b-v*p)),s[12]=-(d*(E*S-A*R)-x*(p*S-_*R)+D*(p*A-_*E)),s[13]=l*(E*S-A*R)-x*(u*S-h*R)+D*(u*A-h*E),s[14]=-(l*(p*S-_*R)-d*(u*S-h*R)+D*(u*_-h*p)),s[15]=l*(p*A-_*E)-d*(u*A-h*E)+x*(u*_-h*p),s}},{}],19:[function(e,i,o){i.exports=a;function a(s){var n=new Float32Array(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n}},{}],20:[function(e,i,o){i.exports=a;function a(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s}},{}],21:[function(e,i,o){i.exports=a;function a(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],22:[function(e,i,o){i.exports=a;function a(s){var n=s[0],l=s[1],u=s[2],h=s[3],v=s[4],d=s[5],p=s[6],_=s[7],b=s[8],x=s[9],E=s[10],A=s[11],P=s[12],D=s[13],R=s[14],S=s[15],I=n*d-l*v,T=n*p-u*v,M=n*_-h*v,z=l*p-u*d,U=l*_-h*d,F=u*_-h*p,V=b*D-x*P,j=b*R-E*P,H=b*S-A*P,Y=x*R-E*D,J=x*S-A*D,ne=E*S-A*R;return I*ne-T*J+M*Y+z*H-U*j+F*V}},{}],23:[function(e,i,o){i.exports=a;function a(s,n){var l=n[0],u=n[1],h=n[2],v=n[3],d=l+l,p=u+u,_=h+h,b=l*d,x=u*d,E=u*p,A=h*d,P=h*p,D=h*_,R=v*d,S=v*p,I=v*_;return s[0]=1-E-D,s[1]=x+I,s[2]=A-S,s[3]=0,s[4]=x-I,s[5]=1-b-D,s[6]=P+R,s[7]=0,s[8]=A+S,s[9]=P-R,s[10]=1-b-E,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],24:[function(e,i,o){i.exports=a;function a(s,n,l){var u,h,v,d=l[0],p=l[1],_=l[2],b=Math.sqrt(d*d+p*p+_*_);return Math.abs(b)<1e-6?null:(b=1/b,d*=b,p*=b,_*=b,u=Math.sin(n),h=Math.cos(n),v=1-h,s[0]=d*d*v+h,s[1]=p*d*v+_*u,s[2]=_*d*v-p*u,s[3]=0,s[4]=d*p*v-_*u,s[5]=p*p*v+h,s[6]=_*p*v+d*u,s[7]=0,s[8]=d*_*v+p*u,s[9]=p*_*v-d*u,s[10]=_*_*v+h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}},{}],25:[function(e,i,o){i.exports=a;function a(s,n,l){var u=n[0],h=n[1],v=n[2],d=n[3],p=u+u,_=h+h,b=v+v,x=u*p,E=u*_,A=u*b,P=h*_,D=h*b,R=v*b,S=d*p,I=d*_,T=d*b;return s[0]=1-(P+R),s[1]=E+T,s[2]=A-I,s[3]=0,s[4]=E-T,s[5]=1-(x+R),s[6]=D+S,s[7]=0,s[8]=A+I,s[9]=D-S,s[10]=1-(x+P),s[11]=0,s[12]=l[0],s[13]=l[1],s[14]=l[2],s[15]=1,s}},{}],26:[function(e,i,o){i.exports=a;function a(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],27:[function(e,i,o){i.exports=a;function a(s,n){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=n[0],s[13]=n[1],s[14]=n[2],s[15]=1,s}},{}],28:[function(e,i,o){i.exports=a;function a(s,n){var l=Math.sin(n),u=Math.cos(n);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=u,s[6]=l,s[7]=0,s[8]=0,s[9]=-l,s[10]=u,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],29:[function(e,i,o){i.exports=a;function a(s,n){var l=Math.sin(n),u=Math.cos(n);return s[0]=u,s[1]=0,s[2]=-l,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=l,s[9]=0,s[10]=u,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],30:[function(e,i,o){i.exports=a;function a(s,n){var l=Math.sin(n),u=Math.cos(n);return s[0]=u,s[1]=l,s[2]=0,s[3]=0,s[4]=-l,s[5]=u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],31:[function(e,i,o){i.exports=a;function a(s,n,l,u,h,v,d){var p=1/(l-n),_=1/(h-u),b=1/(v-d);return s[0]=v*2*p,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=v*2*_,s[6]=0,s[7]=0,s[8]=(l+n)*p,s[9]=(h+u)*_,s[10]=(d+v)*b,s[11]=-1,s[12]=0,s[13]=0,s[14]=d*v*2*b,s[15]=0,s}},{}],32:[function(e,i,o){i.exports=a;function a(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],33:[function(e,i,o){i.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":18,"./clone":19,"./copy":20,"./create":21,"./determinant":22,"./fromQuat":23,"./fromRotation":24,"./fromRotationTranslation":25,"./fromScaling":26,"./fromTranslation":27,"./fromXRotation":28,"./fromYRotation":29,"./fromZRotation":30,"./frustum":31,"./identity":32,"./invert":34,"./lookAt":35,"./multiply":36,"./ortho":37,"./perspective":38,"./perspectiveFromFieldOfView":39,"./rotate":40,"./rotateX":41,"./rotateY":42,"./rotateZ":43,"./scale":44,"./str":45,"./translate":46,"./transpose":47}],34:[function(e,i,o){i.exports=a;function a(s,n){var l=n[0],u=n[1],h=n[2],v=n[3],d=n[4],p=n[5],_=n[6],b=n[7],x=n[8],E=n[9],A=n[10],P=n[11],D=n[12],R=n[13],S=n[14],I=n[15],T=l*p-u*d,M=l*_-h*d,z=l*b-v*d,U=u*_-h*p,F=u*b-v*p,V=h*b-v*_,j=x*R-E*D,H=x*S-A*D,Y=x*I-P*D,J=E*S-A*R,ne=E*I-P*R,q=A*I-P*S,we=T*q-M*ne+z*J+U*Y-F*H+V*j;return we?(we=1/we,s[0]=(p*q-_*ne+b*J)*we,s[1]=(h*ne-u*q-v*J)*we,s[2]=(R*V-S*F+I*U)*we,s[3]=(A*F-E*V-P*U)*we,s[4]=(_*Y-d*q-b*H)*we,s[5]=(l*q-h*Y+v*H)*we,s[6]=(S*z-D*V-I*M)*we,s[7]=(x*V-A*z+P*M)*we,s[8]=(d*ne-p*Y+b*j)*we,s[9]=(u*Y-l*ne-v*j)*we,s[10]=(D*F-R*z+I*T)*we,s[11]=(E*z-x*F-P*T)*we,s[12]=(p*H-d*J-_*j)*we,s[13]=(l*J-u*H+h*j)*we,s[14]=(R*M-D*U-S*T)*we,s[15]=(x*U-E*M+A*T)*we,s):null}},{}],35:[function(e,i,o){var a=e("./identity");i.exports=s;function s(n,l,u,h){var v,d,p,_,b,x,E,A,P,D,R=l[0],S=l[1],I=l[2],T=h[0],M=h[1],z=h[2],U=u[0],F=u[1],V=u[2];return Math.abs(R-U)<1e-6&&Math.abs(S-F)<1e-6&&Math.abs(I-V)<1e-6?a(n):(E=R-U,A=S-F,P=I-V,D=1/Math.sqrt(E*E+A*A+P*P),E*=D,A*=D,P*=D,v=M*P-z*A,d=z*E-T*P,p=T*A-M*E,D=Math.sqrt(v*v+d*d+p*p),D?(D=1/D,v*=D,d*=D,p*=D):(v=0,d=0,p=0),_=A*p-P*d,b=P*v-E*p,x=E*d-A*v,D=Math.sqrt(_*_+b*b+x*x),D?(D=1/D,_*=D,b*=D,x*=D):(_=0,b=0,x=0),n[0]=v,n[1]=_,n[2]=E,n[3]=0,n[4]=d,n[5]=b,n[6]=A,n[7]=0,n[8]=p,n[9]=x,n[10]=P,n[11]=0,n[12]=-(v*R+d*S+p*I),n[13]=-(_*R+b*S+x*I),n[14]=-(E*R+A*S+P*I),n[15]=1,n)}},{"./identity":32}],36:[function(e,i,o){i.exports=a;function a(s,n,l){var u=n[0],h=n[1],v=n[2],d=n[3],p=n[4],_=n[5],b=n[6],x=n[7],E=n[8],A=n[9],P=n[10],D=n[11],R=n[12],S=n[13],I=n[14],T=n[15],M=l[0],z=l[1],U=l[2],F=l[3];return s[0]=M*u+z*p+U*E+F*R,s[1]=M*h+z*_+U*A+F*S,s[2]=M*v+z*b+U*P+F*I,s[3]=M*d+z*x+U*D+F*T,M=l[4],z=l[5],U=l[6],F=l[7],s[4]=M*u+z*p+U*E+F*R,s[5]=M*h+z*_+U*A+F*S,s[6]=M*v+z*b+U*P+F*I,s[7]=M*d+z*x+U*D+F*T,M=l[8],z=l[9],U=l[10],F=l[11],s[8]=M*u+z*p+U*E+F*R,s[9]=M*h+z*_+U*A+F*S,s[10]=M*v+z*b+U*P+F*I,s[11]=M*d+z*x+U*D+F*T,M=l[12],z=l[13],U=l[14],F=l[15],s[12]=M*u+z*p+U*E+F*R,s[13]=M*h+z*_+U*A+F*S,s[14]=M*v+z*b+U*P+F*I,s[15]=M*d+z*x+U*D+F*T,s}},{}],37:[function(e,i,o){i.exports=a;function a(s,n,l,u,h,v,d){var p=1/(n-l),_=1/(u-h),b=1/(v-d);return s[0]=-2*p,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*_,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*b,s[11]=0,s[12]=(n+l)*p,s[13]=(h+u)*_,s[14]=(d+v)*b,s[15]=1,s}},{}],38:[function(e,i,o){i.exports=a;function a(s,n,l,u,h){var v=1/Math.tan(n/2),d=1/(u-h);return s[0]=v/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=v,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(h+u)*d,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*h*u*d,s[15]=0,s}},{}],39:[function(e,i,o){i.exports=a;function a(s,n,l,u){var h=Math.tan(n.upDegrees*Math.PI/180),v=Math.tan(n.downDegrees*Math.PI/180),d=Math.tan(n.leftDegrees*Math.PI/180),p=Math.tan(n.rightDegrees*Math.PI/180),_=2/(d+p),b=2/(h+v);return s[0]=_,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=b,s[6]=0,s[7]=0,s[8]=-((d-p)*_*.5),s[9]=(h-v)*b*.5,s[10]=u/(l-u),s[11]=-1,s[12]=0,s[13]=0,s[14]=u*l/(l-u),s[15]=0,s}},{}],40:[function(e,i,o){i.exports=a;function a(s,n,l,u){var h=u[0],v=u[1],d=u[2],p=Math.sqrt(h*h+v*v+d*d),_,b,x,E,A,P,D,R,S,I,T,M,z,U,F,V,j,H,Y,J,ne,q,we,ee;return Math.abs(p)<1e-6?null:(p=1/p,h*=p,v*=p,d*=p,_=Math.sin(l),b=Math.cos(l),x=1-b,E=n[0],A=n[1],P=n[2],D=n[3],R=n[4],S=n[5],I=n[6],T=n[7],M=n[8],z=n[9],U=n[10],F=n[11],V=h*h*x+b,j=v*h*x+d*_,H=d*h*x-v*_,Y=h*v*x-d*_,J=v*v*x+b,ne=d*v*x+h*_,q=h*d*x+v*_,we=v*d*x-h*_,ee=d*d*x+b,s[0]=E*V+R*j+M*H,s[1]=A*V+S*j+z*H,s[2]=P*V+I*j+U*H,s[3]=D*V+T*j+F*H,s[4]=E*Y+R*J+M*ne,s[5]=A*Y+S*J+z*ne,s[6]=P*Y+I*J+U*ne,s[7]=D*Y+T*J+F*ne,s[8]=E*q+R*we+M*ee,s[9]=A*q+S*we+z*ee,s[10]=P*q+I*we+U*ee,s[11]=D*q+T*we+F*ee,n!==s&&(s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s)}},{}],41:[function(e,i,o){i.exports=a;function a(s,n,l){var u=Math.sin(l),h=Math.cos(l),v=n[4],d=n[5],p=n[6],_=n[7],b=n[8],x=n[9],E=n[10],A=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=v*h+b*u,s[5]=d*h+x*u,s[6]=p*h+E*u,s[7]=_*h+A*u,s[8]=b*h-v*u,s[9]=x*h-d*u,s[10]=E*h-p*u,s[11]=A*h-_*u,s}},{}],42:[function(e,i,o){i.exports=a;function a(s,n,l){var u=Math.sin(l),h=Math.cos(l),v=n[0],d=n[1],p=n[2],_=n[3],b=n[8],x=n[9],E=n[10],A=n[11];return n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=v*h-b*u,s[1]=d*h-x*u,s[2]=p*h-E*u,s[3]=_*h-A*u,s[8]=v*u+b*h,s[9]=d*u+x*h,s[10]=p*u+E*h,s[11]=_*u+A*h,s}},{}],43:[function(e,i,o){i.exports=a;function a(s,n,l){var u=Math.sin(l),h=Math.cos(l),v=n[0],d=n[1],p=n[2],_=n[3],b=n[4],x=n[5],E=n[6],A=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=v*h+b*u,s[1]=d*h+x*u,s[2]=p*h+E*u,s[3]=_*h+A*u,s[4]=b*h-v*u,s[5]=x*h-d*u,s[6]=E*h-p*u,s[7]=A*h-_*u,s}},{}],44:[function(e,i,o){i.exports=a;function a(s,n,l){var u=l[0],h=l[1],v=l[2];return s[0]=n[0]*u,s[1]=n[1]*u,s[2]=n[2]*u,s[3]=n[3]*u,s[4]=n[4]*h,s[5]=n[5]*h,s[6]=n[6]*h,s[7]=n[7]*h,s[8]=n[8]*v,s[9]=n[9]*v,s[10]=n[10]*v,s[11]=n[11]*v,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s}},{}],45:[function(e,i,o){i.exports=a;function a(s){return"mat4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+", "+s[9]+", "+s[10]+", "+s[11]+", "+s[12]+", "+s[13]+", "+s[14]+", "+s[15]+")"}},{}],46:[function(e,i,o){i.exports=a;function a(s,n,l){var u=l[0],h=l[1],v=l[2],d,p,_,b,x,E,A,P,D,R,S,I;return n===s?(s[12]=n[0]*u+n[4]*h+n[8]*v+n[12],s[13]=n[1]*u+n[5]*h+n[9]*v+n[13],s[14]=n[2]*u+n[6]*h+n[10]*v+n[14],s[15]=n[3]*u+n[7]*h+n[11]*v+n[15]):(d=n[0],p=n[1],_=n[2],b=n[3],x=n[4],E=n[5],A=n[6],P=n[7],D=n[8],R=n[9],S=n[10],I=n[11],s[0]=d,s[1]=p,s[2]=_,s[3]=b,s[4]=x,s[5]=E,s[6]=A,s[7]=P,s[8]=D,s[9]=R,s[10]=S,s[11]=I,s[12]=d*u+x*h+D*v+n[12],s[13]=p*u+E*h+R*v+n[13],s[14]=_*u+A*h+S*v+n[14],s[15]=b*u+P*h+I*v+n[15]),s}},{}],47:[function(e,i,o){i.exports=a;function a(s,n){if(s===n){var l=n[1],u=n[2],h=n[3],v=n[6],d=n[7],p=n[11];s[1]=n[4],s[2]=n[8],s[3]=n[12],s[4]=l,s[6]=n[9],s[7]=n[13],s[8]=u,s[9]=v,s[11]=n[14],s[12]=h,s[13]=d,s[14]=p}else s[0]=n[0],s[1]=n[4],s[2]=n[8],s[3]=n[12],s[4]=n[1],s[5]=n[5],s[6]=n[9],s[7]=n[13],s[8]=n[2],s[9]=n[6],s[10]=n[10],s[11]=n[14],s[12]=n[3],s[13]=n[7],s[14]=n[11],s[15]=n[15];return s}},{}],48:[function(e,i,o){(function(a){(function(){var s=e("is-browser"),n;typeof a.matchMedia=="function"?n=!a.matchMedia("(hover: none)").matches:n=s,i.exports=n}).call(this)}).call(this,typeof tc<"u"?tc:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":50}],49:[function(e,i,o){var a=e("is-browser");function s(){var n=!1;try{var l=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{n=!1}return n}i.exports=a&&s()},{"is-browser":50}],50:[function(e,i,o){i.exports=!0},{}],51:[function(e,i,o){i.exports=n,i.exports.isMobile=n,i.exports.default=n;var a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function n(l){l||(l={});var u=l.ua;if(!u&&typeof navigator<"u"&&(u=navigator.userAgent),u&&u.headers&&typeof u.headers["user-agent"]=="string"&&(u=u.headers["user-agent"]),typeof u!="string")return!1;var h=l.tablet?s.test(u):a.test(u);return!h&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&u.indexOf("Macintosh")!==-1&&u.indexOf("Safari")!==-1&&(h=!0),h}},{}],52:[function(e,i,o){i.exports=function(a){for(var s=a.length,n,l=0;l<s;l++)if(n=a.charCodeAt(l),(n<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1;return!0}},{}],53:[function(e,i,o){var a={left:0,top:0};i.exports=s;function s(l,u,h){u=u||l.currentTarget||l.srcElement,Array.isArray(h)||(h=[0,0]);var v=l.clientX||0,d=l.clientY||0,p=n(u);return h[0]=v-p.left,h[1]=d-p.top,h}function n(l){return l===window||l===document||l===document.body?a:l.getBoundingClientRect()}},{}],54:[function(e,i,o){(function(a,s){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(l,u,h){u[l]=u[l]||h(),typeof i<"u"&&i.exports&&(i.exports=u[l])})("Promise",typeof a<"u"?a:this,function(){var l,u,h,v=Object.prototype.toString,d=typeof s<"u"?function(M){return s(M)}:setTimeout;try{Object.defineProperty({},"x",{}),l=function(M,z,U,F){return Object.defineProperty(M,z,{value:U,writable:!0,configurable:F!==!1})}}catch{l=function(z,U,F){return z[U]=F,z}}h=function(){var M,z,U;function F(V,j){this.fn=V,this.self=j,this.next=void 0}return{add:function(j,H){U=new F(j,H),z?z.next=U:M=U,z=U,U=void 0},drain:function(){var j=M;for(M=z=u=void 0;j;)j.fn.call(j.self),j=j.next}}}();function p(T,M){h.add(T,M),u||(u=d(h.drain))}function _(T){var M,z=typeof T;return T!=null&&(z=="object"||z=="function")&&(M=T.then),typeof M=="function"?M:!1}function b(){for(var T=0;T<this.chain.length;T++)x(this,this.state===1?this.chain[T].success:this.chain[T].failure,this.chain[T]);this.chain.length=0}function x(T,M,z){var U,F;try{M===!1?z.reject(T.msg):(M===!0?U=T.msg:U=M.call(void 0,T.msg),U===z.promise?z.reject(TypeError("Promise-chain cycle")):(F=_(U))?F.call(U,z.resolve,z.reject):z.resolve(U))}catch(V){z.reject(V)}}function E(T){var M,z=this;if(!z.triggered){z.triggered=!0,z.def&&(z=z.def);try{(M=_(T))?p(function(){var U=new D(z);try{M.call(T,function(){E.apply(U,arguments)},function(){A.apply(U,arguments)})}catch(F){A.call(U,F)}}):(z.msg=T,z.state=1,z.chain.length>0&&p(b,z))}catch(U){A.call(new D(z),U)}}}function A(T){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=T,M.state=2,M.chain.length>0&&p(b,M))}function P(T,M,z,U){for(var F=0;F<M.length;F++)(function(j){T.resolve(M[j]).then(function(Y){z(j,Y)},U)})(F)}function D(T){this.def=T,this.triggered=!1}function R(T){this.promise=T,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function S(T){if(typeof T!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new R(this);this.then=function(U,F){var V={success:typeof U=="function"?U:!0,failure:typeof F=="function"?F:!1};return V.promise=new this.constructor(function(H,Y){if(typeof H!="function"||typeof Y!="function")throw TypeError("Not a function");V.resolve=H,V.reject=Y}),M.chain.push(V),M.state!==0&&p(b,M),V.promise},this.catch=function(U){return this.then(void 0,U)};try{T.call(void 0,function(U){E.call(M,U)},function(U){A.call(M,U)})}catch(z){A.call(M,z)}}var I=l({},"constructor",S,!1);return S.prototype=I,l(I,"__NPO__",0,!1),l(S,"resolve",function(M){var z=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new z(function(F,V){if(typeof F!="function"||typeof V!="function")throw TypeError("Not a function");F(M)})}),l(S,"reject",function(M){return new this(function(U,F){if(typeof U!="function"||typeof F!="function")throw TypeError("Not a function");F(M)})}),l(S,"all",function(M){var z=this;return v.call(M)!="[object Array]"?z.reject(TypeError("Not an array")):M.length===0?z.resolve([]):new z(function(F,V){if(typeof F!="function"||typeof V!="function")throw TypeError("Not a function");var j=M.length,H=Array(j),Y=0;P(z,M,function(ne,q){H[ne]=q,++Y===j&&F(H)},V)})}),l(S,"race",function(M){var z=this;return v.call(M)!="[object Array]"?z.reject(TypeError("Not an array")):new z(function(F,V){if(typeof F!="function"||typeof V!="function")throw TypeError("Not a function");P(z,M,function(H,Y){F(Y)},V)})}),S})}).call(this)}).call(this,typeof tc<"u"?tc:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{timers:67}],55:[function(e,i,o){var a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function l(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function u(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var v={},d=0;d<10;d++)v["_"+String.fromCharCode(d)]=d;var p=Object.getOwnPropertyNames(v).map(function(b){return v[b]});if(p.join("")!=="0123456789")return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(b){_[b]=b}),Object.keys(Object.assign({},_)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=u()?Object.assign:function(h,v){for(var d,p=l(h),_,b=1;b<arguments.length;b++){d=Object(arguments[b]);for(var x in d)s.call(d,x)&&(p[x]=d[x]);if(a){_=a(d);for(var E=0;E<_.length;E++)n.call(d,_[E])&&(p[_[E]]=d[_[E]])}}return p}},{}],56:[function(e,i,o){i.exports=n;var a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(h){var v=[];return h.replace(s,function(d,p,_){var b=p.toLowerCase();for(_=u(_),b=="m"&&_.length>2&&(v.push([p].concat(_.splice(0,2))),b="l",p=p=="m"?"l":"L");;){if(_.length==a[b])return _.unshift(p),v.push(_);if(_.length<a[b])throw new Error("malformed path data");v.push([p].concat(_.splice(0,a[b])))}}),v}var l=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function u(h){var v=h.match(l);return v?v.map(Number):[]}},{}],57:[function(e,i,o){i.exports=function(s,n,l,u){var h=s[0],v=s[1],d=!1;l===void 0&&(l=0),u===void 0&&(u=n.length);for(var p=u-l,_=0,b=p-1;_<p;b=_++){var x=n[_+l][0],E=n[_+l][1],A=n[b+l][0],P=n[b+l][1],D=E>v!=P>v&&h<(A-x)*(v-E)/(P-E)+x;D&&(d=!d)}return d}},{}],58:[function(e,i,o){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var a=e("./lib/build-log"),s=e("./lib/epsilon"),n=e("./lib/intersecter"),l=e("./lib/segment-chainer"),u=e("./lib/segment-selector"),h=e("./lib/geojson"),v=!1,d=s(),p;p={buildLog:function(b){return b===!0?v=a():b===!1&&(v=!1),v===!1?!1:v.list},epsilon:function(b){return d.epsilon(b)},segments:function(b){var x=n(!0,d,v);return b.regions.forEach(x.addRegion),{segments:x.calculate(b.inverted),inverted:b.inverted}},combine:function(b,x){var E=n(!1,d,v);return{combined:E.calculate(b.segments,b.inverted,x.segments,x.inverted),inverted1:b.inverted,inverted2:x.inverted}},selectUnion:function(b){return{segments:u.union(b.combined,v),inverted:b.inverted1||b.inverted2}},selectIntersect:function(b){return{segments:u.intersect(b.combined,v),inverted:b.inverted1&&b.inverted2}},selectDifference:function(b){return{segments:u.difference(b.combined,v),inverted:b.inverted1&&!b.inverted2}},selectDifferenceRev:function(b){return{segments:u.differenceRev(b.combined,v),inverted:!b.inverted1&&b.inverted2}},selectXor:function(b){return{segments:u.xor(b.combined,v),inverted:b.inverted1!==b.inverted2}},polygon:function(b){return{regions:l(b.segments,d,v),inverted:b.inverted}},polygonFromGeoJSON:function(b){return h.toPolygon(p,b)},polygonToGeoJSON:function(b){return h.fromPolygon(p,d,b)},union:function(b,x){return _(b,x,p.selectUnion)},intersect:function(b,x){return _(b,x,p.selectIntersect)},difference:function(b,x){return _(b,x,p.selectDifference)},differenceRev:function(b,x){return _(b,x,p.selectDifferenceRev)},xor:function(b,x){return _(b,x,p.selectXor)}};function _(b,x,E){var A=p.segments(b),P=p.segments(x),D=p.combine(A,P),R=E(D);return p.polygon(R)}typeof window=="object"&&(window.PolyBool=p),i.exports=p},{"./lib/build-log":59,"./lib/epsilon":60,"./lib/geojson":61,"./lib/intersecter":62,"./lib/segment-chainer":64,"./lib/segment-selector":65}],59:[function(e,i,o){function a(){var s,n=0,l=!1;function u(h,v){return s.list.push({type:h,data:v?JSON.parse(JSON.stringify(v)):void 0}),s}return s={list:[],segmentId:function(){return n++},checkIntersection:function(h,v){return u("check",{seg1:h,seg2:v})},segmentChop:function(h,v){return u("div_seg",{seg:h,pt:v}),u("chop",{seg:h,pt:v})},statusRemove:function(h){return u("pop_seg",{seg:h})},segmentUpdate:function(h){return u("seg_update",{seg:h})},segmentNew:function(h,v){return u("new_seg",{seg:h,primary:v})},segmentRemove:function(h){return u("rem_seg",{seg:h})},tempStatus:function(h,v,d){return u("temp_status",{seg:h,above:v,below:d})},rewind:function(h){return u("rewind",{seg:h})},status:function(h,v,d){return u("status",{seg:h,above:v,below:d})},vert:function(h){return h===l?s:(l=h,u("vert",{x:h}))},log:function(h){return typeof h!="string"&&(h=JSON.stringify(h,!1,"  ")),u("log",{txt:h})},reset:function(){return u("reset")},selected:function(h){return u("selected",{segs:h})},chainStart:function(h){return u("chain_start",{seg:h})},chainRemoveHead:function(h,v){return u("chain_rem_head",{index:h,pt:v})},chainRemoveTail:function(h,v){return u("chain_rem_tail",{index:h,pt:v})},chainNew:function(h,v){return u("chain_new",{pt1:h,pt2:v})},chainMatch:function(h){return u("chain_match",{index:h})},chainClose:function(h){return u("chain_close",{index:h})},chainAddHead:function(h,v){return u("chain_add_head",{index:h,pt:v})},chainAddTail:function(h,v){return u("chain_add_tail",{index:h,pt:v})},chainConnect:function(h,v){return u("chain_con",{index1:h,index2:v})},chainReverse:function(h){return u("chain_rev",{index:h})},chainJoin:function(h,v){return u("chain_join",{index1:h,index2:v})},done:function(){return u("done")}},s}i.exports=a},{}],60:[function(e,i,o){function a(s){typeof s!="number"&&(s=1e-10);var n={epsilon:function(l){return typeof l=="number"&&(s=l),s},pointAboveOrOnLine:function(l,u,h){var v=u[0],d=u[1],p=h[0],_=h[1],b=l[0],x=l[1];return(p-v)*(x-d)-(_-d)*(b-v)>=-s},pointBetween:function(l,u,h){var v=l[1]-u[1],d=h[0]-u[0],p=l[0]-u[0],_=h[1]-u[1],b=p*d+v*_;if(b<s)return!1;var x=d*d+_*_;return!(b-x>-s)},pointsSameX:function(l,u){return Math.abs(l[0]-u[0])<s},pointsSameY:function(l,u){return Math.abs(l[1]-u[1])<s},pointsSame:function(l,u){return n.pointsSameX(l,u)&&n.pointsSameY(l,u)},pointsCompare:function(l,u){return n.pointsSameX(l,u)?n.pointsSameY(l,u)?0:l[1]<u[1]?-1:1:l[0]<u[0]?-1:1},pointsCollinear:function(l,u,h){var v=l[0]-u[0],d=l[1]-u[1],p=u[0]-h[0],_=u[1]-h[1];return Math.abs(v*_-p*d)<s},linesIntersect:function(l,u,h,v){var d=u[0]-l[0],p=u[1]-l[1],_=v[0]-h[0],b=v[1]-h[1],x=d*b-p*_;if(Math.abs(x)<s)return!1;var E=l[0]-h[0],A=l[1]-h[1],P=(_*A-b*E)/x,D=(d*A-p*E)/x,R={alongA:0,alongB:0,pt:[l[0]+P*d,l[1]+P*p]};return P<=-s?R.alongA=-2:P<s?R.alongA=-1:P-1<=-s?R.alongA=0:P-1<s?R.alongA=1:R.alongA=2,D<=-s?R.alongB=-2:D<s?R.alongB=-1:D-1<=-s?R.alongB=0:D-1<s?R.alongB=1:R.alongB=2,R},pointInsideRegion:function(l,u){for(var h=l[0],v=l[1],d=u[u.length-1][0],p=u[u.length-1][1],_=!1,b=0;b<u.length;b++){var x=u[b][0],E=u[b][1];E-v>s!=p-v>s&&(d-x)*(v-E)/(p-E)+x-h>s&&(_=!_),d=x,p=E}return _}};return n}i.exports=a},{}],61:[function(e,i,o){var a={toPolygon:function(s,n){function l(v){if(v.length<=0)return s.segments({inverted:!1,regions:[]});function d(b){var x=b.slice(0,b.length-1);return s.segments({inverted:!1,regions:[x]})}for(var p=d(v[0]),_=1;_<v.length;_++)p=s.selectDifference(s.combine(p,d(v[_])));return p}if(n.type==="Polygon")return s.polygon(l(n.coordinates));if(n.type==="MultiPolygon"){for(var u=s.segments({inverted:!1,regions:[]}),h=0;h<n.coordinates.length;h++)u=s.selectUnion(s.combine(u,l(n.coordinates[h])));return s.polygon(u)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(s,n,l){l=s.polygon(s.segments(l));function u(P,D){return n.pointInsideRegion([(P[0][0]+P[1][0])*.5,(P[0][1]+P[1][1])*.5],D)}function h(P){return{region:P,children:[]}}var v=h(null);function d(P,D){for(var R=0;R<P.children.length;R++){var S=P.children[R];if(u(D,S.region)){d(S,D);return}}for(var I=h(D),R=0;R<P.children.length;R++){var S=P.children[R];u(S.region,D)&&(I.children.push(S),P.children.splice(R,1),R--)}P.children.push(I)}for(var p=0;p<l.regions.length;p++){var _=l.regions[p];_.length<3||d(v,_)}function b(P,D){for(var R=0,S=P[P.length-1][0],I=P[P.length-1][1],T=[],M=0;M<P.length;M++){var z=P[M][0],U=P[M][1];T.push([z,U]),R+=U*S-z*I,S=z,I=U}var F=R<0;return F!==D&&T.reverse(),T.push([T[0][0],T[0][1]]),T}var x=[];function E(P){var D=[b(P.region,!1)];x.push(D);for(var R=0;R<P.children.length;R++)D.push(A(P.children[R]))}function A(P){for(var D=0;D<P.children.length;D++)E(P.children[D]);return b(P.region,!0)}for(var p=0;p<v.children.length;p++)E(v.children[p]);return x.length<=0?{type:"Polygon",coordinates:[]}:x.length==1?{type:"Polygon",coordinates:x[0]}:{type:"MultiPolygon",coordinates:x}}};i.exports=a},{}],62:[function(e,i,o){var a=e("./linked-list");function s(n,l,u){function h(R,S){return{id:u?u.segmentId():-1,start:R,end:S,myFill:{above:null,below:null},otherFill:null}}function v(R,S,I){return{id:u?u.segmentId():-1,start:R,end:S,myFill:{above:I.myFill.above,below:I.myFill.below},otherFill:null}}var d=a.create();function p(R,S,I,T,M,z){var U=l.pointsCompare(S,M);return U!==0?U:l.pointsSame(I,z)?0:R!==T?R?1:-1:l.pointAboveOrOnLine(I,T?M:z,T?z:M)?1:-1}function _(R,S){d.insertBefore(R,function(I){var T=p(R.isStart,R.pt,S,I.isStart,I.pt,I.other.pt);return T<0})}function b(R,S){var I=a.node({isStart:!0,pt:R.start,seg:R,primary:S,other:null,status:null});return _(I,R.end),I}function x(R,S,I){var T=a.node({isStart:!1,pt:S.end,seg:S,primary:I,other:R,status:null});R.other=T,_(T,R.pt)}function E(R,S){var I=b(R,S);return x(I,R,S),I}function A(R,S){u&&u.segmentChop(R.seg,S),R.other.remove(),R.seg.end=S,R.other.pt=S,_(R.other,R.pt)}function P(R,S){var I=v(S,R.seg.end,R.seg);return A(R,S),E(I,R.primary)}function D(R,S){var I=a.create();function T(X,re){var de=X.seg.start,me=X.seg.end,xe=re.seg.start,He=re.seg.end;return l.pointsCollinear(de,xe,He)?l.pointsCollinear(me,xe,He)||l.pointAboveOrOnLine(me,xe,He)?1:-1:l.pointAboveOrOnLine(de,xe,He)?1:-1}function M(X){return I.findTransition(function(re){var de=T(X,re.ev);return de>0})}function z(X,re){var de=X.seg,me=re.seg,xe=de.start,He=de.end,Re=me.start,Ee=me.end;u&&u.checkIntersection(de,me);var ke=l.linesIntersect(xe,He,Re,Ee);if(ke===!1){if(!l.pointsCollinear(xe,He,Re)||l.pointsSame(xe,Ee)||l.pointsSame(He,Re))return!1;var $=l.pointsSame(xe,Re),le=l.pointsSame(He,Ee);if($&&le)return re;var K=!$&&l.pointBetween(xe,Re,Ee),te=!le&&l.pointBetween(He,Re,Ee);if($)return te?P(re,He):P(X,Ee),re;K&&(le||(te?P(re,He):P(X,Ee)),P(re,xe))}else ke.alongA===0&&(ke.alongB===-1?P(X,Re):ke.alongB===0?P(X,ke.pt):ke.alongB===1&&P(X,Ee)),ke.alongB===0&&(ke.alongA===-1?P(re,xe):ke.alongA===0?P(re,ke.pt):ke.alongA===1&&P(re,He));return!1}for(var U=[];!d.isEmpty();){var F=d.getHead();if(u&&u.vert(F.pt[0]),F.isStart){let X=function(){if(j){var re=z(F,j);if(re)return re}return H?z(F,H):!1};var ee=X;u&&u.segmentNew(F.seg,F.primary);var V=M(F),j=V.before?V.before.ev:null,H=V.after?V.after.ev:null;u&&u.tempStatus(F.seg,j?j.seg:!1,H?H.seg:!1);var Y=X();if(Y){if(n){var J;F.seg.myFill.below===null?J=!0:J=F.seg.myFill.above!==F.seg.myFill.below,J&&(Y.seg.myFill.above=!Y.seg.myFill.above)}else Y.seg.otherFill=F.seg.myFill;u&&u.segmentUpdate(Y.seg),F.other.remove(),F.remove()}if(d.getHead()!==F){u&&u.rewind(F.seg);continue}if(n){var J;F.seg.myFill.below===null?J=!0:J=F.seg.myFill.above!==F.seg.myFill.below,H?F.seg.myFill.below=H.seg.myFill.above:F.seg.myFill.below=R,J?F.seg.myFill.above=!F.seg.myFill.below:F.seg.myFill.above=F.seg.myFill.below}else if(F.seg.otherFill===null){var ne;H?F.primary===H.primary?ne=H.seg.otherFill.above:ne=H.seg.myFill.above:ne=F.primary?S:R,F.seg.otherFill={above:ne,below:ne}}u&&u.status(F.seg,j?j.seg:!1,H?H.seg:!1),F.other.status=V.insert(a.node({ev:F}))}else{var q=F.status;if(q===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(I.exists(q.prev)&&I.exists(q.next)&&z(q.prev.ev,q.next.ev),u&&u.statusRemove(q.ev.seg),q.remove(),!F.primary){var we=F.seg.myFill;F.seg.myFill=F.seg.otherFill,F.seg.otherFill=we}U.push(F.seg)}d.getHead().remove()}return u&&u.done(),U}return n?{addRegion:function(R){for(var S,I=R[R.length-1],T=0;T<R.length;T++){S=I,I=R[T];var M=l.pointsCompare(S,I);M!==0&&E(h(M<0?S:I,M<0?I:S),!0)}},calculate:function(R){return D(R,!1)}}:{calculate:function(R,S,I,T){return R.forEach(function(M){E(v(M.start,M.end,M),!0)}),I.forEach(function(M){E(v(M.start,M.end,M),!1)}),D(S,T)}}}i.exports=s},{"./linked-list":63}],63:[function(e,i,o){var a={create:function(){var s={root:{root:!0,next:null},exists:function(n){return!(n===null||n===s.root)},isEmpty:function(){return s.root.next===null},getHead:function(){return s.root.next},insertBefore:function(n,l){for(var u=s.root,h=s.root.next;h!==null;){if(l(h)){n.prev=h.prev,n.next=h,h.prev.next=n,h.prev=n;return}u=h,h=h.next}u.next=n,n.prev=u,n.next=null},findTransition:function(n){for(var l=s.root,u=s.root.next;u!==null&&!n(u);)l=u,u=u.next;return{before:l===s.root?null:l,after:u,insert:function(h){return h.prev=l,h.next=u,l.next=h,u!==null&&(u.prev=h),h}}}};return s},node:function(s){return s.prev=null,s.next=null,s.remove=function(){s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.prev=null,s.next=null},s}};i.exports=a},{}],64:[function(e,i,o){function a(s,n,l){var u=[],h=[];return s.forEach(function(v){var d=v.start,p=v.end;if(n.pointsSame(d,p)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}l&&l.chainStart(v);var _={index:0,matches_head:!1,matches_pt1:!1},b={index:0,matches_head:!1,matches_pt1:!1},x=_;function E(ne,q,we){return x.index=ne,x.matches_head=q,x.matches_pt1=we,x===_?(x=b,!1):(x=null,!0)}for(var A=0;A<u.length;A++){var P=u[A],D=P[0];P[1];var R=P[P.length-1];if(P[P.length-2],n.pointsSame(D,d)){if(E(A,!0,!0))break}else if(n.pointsSame(D,p)){if(E(A,!0,!1))break}else if(n.pointsSame(R,d)){if(E(A,!1,!0))break}else if(n.pointsSame(R,p)&&E(A,!1,!1))break}if(x===_){u.push([d,p]),l&&l.chainNew(d,p);return}if(x===b){l&&l.chainMatch(_.index);var S=_.index,I=_.matches_pt1?p:d,T=_.matches_head,P=u[S],M=T?P[0]:P[P.length-1],z=T?P[1]:P[P.length-2],U=T?P[P.length-1]:P[0],F=T?P[P.length-2]:P[1];if(n.pointsCollinear(z,M,I)&&(T?(l&&l.chainRemoveHead(_.index,I),P.shift()):(l&&l.chainRemoveTail(_.index,I),P.pop()),M=z),n.pointsSame(U,I)){u.splice(S,1),n.pointsCollinear(F,U,M)&&(T?(l&&l.chainRemoveTail(_.index,M),P.pop()):(l&&l.chainRemoveHead(_.index,M),P.shift())),l&&l.chainClose(_.index),h.push(P);return}T?(l&&l.chainAddHead(_.index,I),P.unshift(I)):(l&&l.chainAddTail(_.index,I),P.push(I));return}function V(ne){l&&l.chainReverse(ne),u[ne].reverse()}function j(ne,q){var we=u[ne],ee=u[q],X=we[we.length-1],re=we[we.length-2],de=ee[0],me=ee[1];n.pointsCollinear(re,X,de)&&(l&&l.chainRemoveTail(ne,X),we.pop(),X=re),n.pointsCollinear(X,de,me)&&(l&&l.chainRemoveHead(q,de),ee.shift()),l&&l.chainJoin(ne,q),u[ne]=we.concat(ee),u.splice(q,1)}var H=_.index,Y=b.index;l&&l.chainConnect(H,Y);var J=u[H].length<u[Y].length;_.matches_head?b.matches_head?J?(V(H),j(H,Y)):(V(Y),j(Y,H)):j(Y,H):b.matches_head?j(H,Y):J?(V(H),j(Y,H)):(V(Y),j(H,Y))}),h}i.exports=a},{}],65:[function(e,i,o){function a(n,l,u){var h=[];return n.forEach(function(v){var d=(v.myFill.above?8:0)+(v.myFill.below?4:0)+(v.otherFill&&v.otherFill.above?2:0)+(v.otherFill&&v.otherFill.below?1:0);l[d]!==0&&h.push({id:u?u.segmentId():-1,start:v.start,end:v.end,myFill:{above:l[d]===1,below:l[d]===2},otherFill:null})}),u&&u.selected(h),h}var s={union:function(n,l){return a(n,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],l)},intersect:function(n,l){return a(n,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],l)},difference:function(n,l){return a(n,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],l)},differenceRev:function(n,l){return a(n,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],l)},xor:function(n,l){return a(n,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],l)}};i.exports=s},{}],66:[function(e,i,o){var a=i.exports={},s,n;function l(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=l}catch{s=l}try{typeof clearTimeout=="function"?n=clearTimeout:n=u}catch{n=u}})();function h(D){if(s===setTimeout)return setTimeout(D,0);if((s===l||!s)&&setTimeout)return s=setTimeout,setTimeout(D,0);try{return s(D,0)}catch{try{return s.call(null,D,0)}catch{return s.call(this,D,0)}}}function v(D){if(n===clearTimeout)return clearTimeout(D);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(D);try{return n(D)}catch{try{return n.call(null,D)}catch{return n.call(this,D)}}}var d=[],p=!1,_,b=-1;function x(){!p||!_||(p=!1,_.length?d=_.concat(d):b=-1,d.length&&E())}function E(){if(!p){var D=h(x);p=!0;for(var R=d.length;R;){for(_=d,d=[];++b<R;)_&&_[b].run();b=-1,R=d.length}_=null,p=!1,v(D)}}a.nextTick=function(D){var R=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)R[S-1]=arguments[S];d.push(new A(D,R)),d.length===1&&!p&&h(E)};function A(D,R){this.fun=D,this.array=R}A.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={};function P(){}a.on=P,a.addListener=P,a.once=P,a.off=P,a.removeListener=P,a.removeAllListeners=P,a.emit=P,a.prependListener=P,a.prependOnceListener=P,a.listeners=function(D){return[]},a.binding=function(D){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(D){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],67:[function(e,i,o){(function(a,s){(function(){var n=e("process/browser.js").nextTick,l=Function.prototype.apply,u=Array.prototype.slice,h={},v=0;o.setTimeout=function(){return new d(l.call(setTimeout,window,arguments),clearTimeout)},o.setInterval=function(){return new d(l.call(setInterval,window,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(p){p.close()};function d(p,_){this._id=p,this._clearFn=_}d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},o.enroll=function(p,_){clearTimeout(p._idleTimeoutId),p._idleTimeout=_},o.unenroll=function(p){clearTimeout(p._idleTimeoutId),p._idleTimeout=-1},o._unrefActive=o.active=function(p){clearTimeout(p._idleTimeoutId);var _=p._idleTimeout;_>=0&&(p._idleTimeoutId=setTimeout(function(){p._onTimeout&&p._onTimeout()},_))},o.setImmediate=typeof a=="function"?a:function(p){var _=v++,b=arguments.length<2?!1:u.call(arguments,1);return h[_]=!0,n(function(){h[_]&&(b?p.apply(null,b):p.call(null),o.clearImmediate(_))}),_},o.clearImmediate=typeof s=="function"?s:function(p){delete h[p]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":66,timers:67}],68:[function(e,i,o){(function(a){var s=/^\s+/,n=/\s+$/,l=0,u=a.round,h=a.min,v=a.max,d=a.random;function p(ae,ve){if(ae=ae||"",ve=ve||{},ae instanceof p)return ae;if(!(this instanceof p))return new p(ae,ve);var pe=_(ae);this._originalInput=ae,this._r=pe.r,this._g=pe.g,this._b=pe.b,this._a=pe.a,this._roundA=u(100*this._a)/100,this._format=ve.format||pe.format,this._gradientType=ve.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=pe.ok,this._tc_id=l++}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ae=this.toRgb();return(ae.r*299+ae.g*587+ae.b*114)/1e3},getLuminance:function(){var ae=this.toRgb(),ve,pe,he,ye,_e,je;return ve=ae.r/255,pe=ae.g/255,he=ae.b/255,ve<=.03928?ye=ve/12.92:ye=a.pow((ve+.055)/1.055,2.4),pe<=.03928?_e=pe/12.92:_e=a.pow((pe+.055)/1.055,2.4),he<=.03928?je=he/12.92:je=a.pow((he+.055)/1.055,2.4),.2126*ye+.7152*_e+.0722*je},setAlpha:function(ae){return this._a=re(ae),this._roundA=u(100*this._a)/100,this},toHsv:function(){var ae=A(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,v:ae.v,a:this._a}},toHsvString:function(){var ae=A(this._r,this._g,this._b),ve=u(ae.h*360),pe=u(ae.s*100),he=u(ae.v*100);return this._a==1?"hsv("+ve+", "+pe+"%, "+he+"%)":"hsva("+ve+", "+pe+"%, "+he+"%, "+this._roundA+")"},toHsl:function(){var ae=x(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,l:ae.l,a:this._a}},toHslString:function(){var ae=x(this._r,this._g,this._b),ve=u(ae.h*360),pe=u(ae.s*100),he=u(ae.l*100);return this._a==1?"hsl("+ve+", "+pe+"%, "+he+"%)":"hsla("+ve+", "+pe+"%, "+he+"%, "+this._roundA+")"},toHex:function(ae){return D(this._r,this._g,this._b,ae)},toHexString:function(ae){return"#"+this.toHex(ae)},toHex8:function(ae){return R(this._r,this._g,this._b,this._a,ae)},toHex8String:function(ae){return"#"+this.toHex8(ae)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(de(this._r,255)*100)+"%",g:u(de(this._g,255)*100)+"%",b:u(de(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+u(de(this._r,255)*100)+"%, "+u(de(this._g,255)*100)+"%, "+u(de(this._b,255)*100)+"%)":"rgba("+u(de(this._r,255)*100)+"%, "+u(de(this._g,255)*100)+"%, "+u(de(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ee[D(this._r,this._g,this._b,!0)]||!1},toFilter:function(ae){var ve="#"+S(this._r,this._g,this._b,this._a),pe=ve,he=this._gradientType?"GradientType = 1, ":"";if(ae){var ye=p(ae);pe="#"+S(ye._r,ye._g,ye._b,ye._a)}return"progid:DXImageTransform.Microsoft.gradient("+he+"startColorstr="+ve+",endColorstr="+pe+")"},toString:function(ae){var ve=!!ae;ae=ae||this._format;var pe=!1,he=this._a<1&&this._a>=0,ye=!ve&&he&&(ae==="hex"||ae==="hex6"||ae==="hex3"||ae==="hex4"||ae==="hex8"||ae==="name");return ye?ae==="name"&&this._a===0?this.toName():this.toRgbString():(ae==="rgb"&&(pe=this.toRgbString()),ae==="prgb"&&(pe=this.toPercentageRgbString()),(ae==="hex"||ae==="hex6")&&(pe=this.toHexString()),ae==="hex3"&&(pe=this.toHexString(!0)),ae==="hex4"&&(pe=this.toHex8String(!0)),ae==="hex8"&&(pe=this.toHex8String()),ae==="name"&&(pe=this.toName()),ae==="hsl"&&(pe=this.toHslString()),ae==="hsv"&&(pe=this.toHsvString()),pe||this.toHexString())},clone:function(){return p(this.toString())},_applyModification:function(ae,ve){var pe=ae.apply(null,[this].concat([].slice.call(ve)));return this._r=pe._r,this._g=pe._g,this._b=pe._b,this.setAlpha(pe._a),this},lighten:function(){return this._applyModification(z,arguments)},brighten:function(){return this._applyModification(U,arguments)},darken:function(){return this._applyModification(F,arguments)},desaturate:function(){return this._applyModification(I,arguments)},saturate:function(){return this._applyModification(T,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(V,arguments)},_applyCombination:function(ae,ve){return ae.apply(null,[this].concat([].slice.call(ve)))},analogous:function(){return this._applyCombination(ne,arguments)},complement:function(){return this._applyCombination(j,arguments)},monochromatic:function(){return this._applyCombination(q,arguments)},splitcomplement:function(){return this._applyCombination(J,arguments)},triad:function(){return this._applyCombination(H,arguments)},tetrad:function(){return this._applyCombination(Y,arguments)}},p.fromRatio=function(ae,ve){if(typeof ae=="object"){var pe={};for(var he in ae)ae.hasOwnProperty(he)&&(he==="a"?pe[he]=ae[he]:pe[he]=ke(ae[he]));ae=pe}return p(ae,ve)};function _(ae){var ve={r:0,g:0,b:0},pe=1,he=null,ye=null,_e=null,je=!1,Je=!1;return typeof ae=="string"&&(ae=ie(ae)),typeof ae=="object"&&(te(ae.r)&&te(ae.g)&&te(ae.b)?(ve=b(ae.r,ae.g,ae.b),je=!0,Je=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):te(ae.h)&&te(ae.s)&&te(ae.v)?(he=ke(ae.s),ye=ke(ae.v),ve=P(ae.h,he,ye),je=!0,Je="hsv"):te(ae.h)&&te(ae.s)&&te(ae.l)&&(he=ke(ae.s),_e=ke(ae.l),ve=E(ae.h,he,_e),je=!0,Je="hsl"),ae.hasOwnProperty("a")&&(pe=ae.a)),pe=re(pe),{ok:je,format:ae.format||Je,r:h(255,v(ve.r,0)),g:h(255,v(ve.g,0)),b:h(255,v(ve.b,0)),a:pe}}function b(ae,ve,pe){return{r:de(ae,255)*255,g:de(ve,255)*255,b:de(pe,255)*255}}function x(ae,ve,pe){ae=de(ae,255),ve=de(ve,255),pe=de(pe,255);var he=v(ae,ve,pe),ye=h(ae,ve,pe),_e,je,Je=(he+ye)/2;if(he==ye)_e=je=0;else{var nt=he-ye;switch(je=Je>.5?nt/(2-he-ye):nt/(he+ye),he){case ae:_e=(ve-pe)/nt+(ve<pe?6:0);break;case ve:_e=(pe-ae)/nt+2;break;case pe:_e=(ae-ve)/nt+4;break}_e/=6}return{h:_e,s:je,l:Je}}function E(ae,ve,pe){var he,ye,_e;ae=de(ae,360),ve=de(ve,100),pe=de(pe,100);function je(at,Fe,Ie){return Ie<0&&(Ie+=1),Ie>1&&(Ie-=1),Ie<1/6?at+(Fe-at)*6*Ie:Ie<1/2?Fe:Ie<2/3?at+(Fe-at)*(2/3-Ie)*6:at}if(ve===0)he=ye=_e=pe;else{var Je=pe<.5?pe*(1+ve):pe+ve-pe*ve,nt=2*pe-Je;he=je(nt,Je,ae+1/3),ye=je(nt,Je,ae),_e=je(nt,Je,ae-1/3)}return{r:he*255,g:ye*255,b:_e*255}}function A(ae,ve,pe){ae=de(ae,255),ve=de(ve,255),pe=de(pe,255);var he=v(ae,ve,pe),ye=h(ae,ve,pe),_e,je,Je=he,nt=he-ye;if(je=he===0?0:nt/he,he==ye)_e=0;else{switch(he){case ae:_e=(ve-pe)/nt+(ve<pe?6:0);break;case ve:_e=(pe-ae)/nt+2;break;case pe:_e=(ae-ve)/nt+4;break}_e/=6}return{h:_e,s:je,v:Je}}function P(ae,ve,pe){ae=de(ae,360)*6,ve=de(ve,100),pe=de(pe,100);var he=a.floor(ae),ye=ae-he,_e=pe*(1-ve),je=pe*(1-ye*ve),Je=pe*(1-(1-ye)*ve),nt=he%6,at=[pe,je,_e,_e,Je,pe][nt],Fe=[Je,pe,pe,je,_e,_e][nt],Ie=[_e,_e,Je,pe,pe,je][nt];return{r:at*255,g:Fe*255,b:Ie*255}}function D(ae,ve,pe,he){var ye=[Ee(u(ae).toString(16)),Ee(u(ve).toString(16)),Ee(u(pe).toString(16))];return he&&ye[0].charAt(0)==ye[0].charAt(1)&&ye[1].charAt(0)==ye[1].charAt(1)&&ye[2].charAt(0)==ye[2].charAt(1)?ye[0].charAt(0)+ye[1].charAt(0)+ye[2].charAt(0):ye.join("")}function R(ae,ve,pe,he,ye){var _e=[Ee(u(ae).toString(16)),Ee(u(ve).toString(16)),Ee(u(pe).toString(16)),Ee($(he))];return ye&&_e[0].charAt(0)==_e[0].charAt(1)&&_e[1].charAt(0)==_e[1].charAt(1)&&_e[2].charAt(0)==_e[2].charAt(1)&&_e[3].charAt(0)==_e[3].charAt(1)?_e[0].charAt(0)+_e[1].charAt(0)+_e[2].charAt(0)+_e[3].charAt(0):_e.join("")}function S(ae,ve,pe,he){var ye=[Ee($(he)),Ee(u(ae).toString(16)),Ee(u(ve).toString(16)),Ee(u(pe).toString(16))];return ye.join("")}p.equals=function(ae,ve){return!ae||!ve?!1:p(ae).toRgbString()==p(ve).toRgbString()},p.random=function(){return p.fromRatio({r:d(),g:d(),b:d()})};function I(ae,ve){ve=ve===0?0:ve||10;var pe=p(ae).toHsl();return pe.s-=ve/100,pe.s=me(pe.s),p(pe)}function T(ae,ve){ve=ve===0?0:ve||10;var pe=p(ae).toHsl();return pe.s+=ve/100,pe.s=me(pe.s),p(pe)}function M(ae){return p(ae).desaturate(100)}function z(ae,ve){ve=ve===0?0:ve||10;var pe=p(ae).toHsl();return pe.l+=ve/100,pe.l=me(pe.l),p(pe)}function U(ae,ve){ve=ve===0?0:ve||10;var pe=p(ae).toRgb();return pe.r=v(0,h(255,pe.r-u(255*-(ve/100)))),pe.g=v(0,h(255,pe.g-u(255*-(ve/100)))),pe.b=v(0,h(255,pe.b-u(255*-(ve/100)))),p(pe)}function F(ae,ve){ve=ve===0?0:ve||10;var pe=p(ae).toHsl();return pe.l-=ve/100,pe.l=me(pe.l),p(pe)}function V(ae,ve){var pe=p(ae).toHsl(),he=(pe.h+ve)%360;return pe.h=he<0?360+he:he,p(pe)}function j(ae){var ve=p(ae).toHsl();return ve.h=(ve.h+180)%360,p(ve)}function H(ae){var ve=p(ae).toHsl(),pe=ve.h;return[p(ae),p({h:(pe+120)%360,s:ve.s,l:ve.l}),p({h:(pe+240)%360,s:ve.s,l:ve.l})]}function Y(ae){var ve=p(ae).toHsl(),pe=ve.h;return[p(ae),p({h:(pe+90)%360,s:ve.s,l:ve.l}),p({h:(pe+180)%360,s:ve.s,l:ve.l}),p({h:(pe+270)%360,s:ve.s,l:ve.l})]}function J(ae){var ve=p(ae).toHsl(),pe=ve.h;return[p(ae),p({h:(pe+72)%360,s:ve.s,l:ve.l}),p({h:(pe+216)%360,s:ve.s,l:ve.l})]}function ne(ae,ve,pe){ve=ve||6,pe=pe||30;var he=p(ae).toHsl(),ye=360/pe,_e=[p(ae)];for(he.h=(he.h-(ye*ve>>1)+720)%360;--ve;)he.h=(he.h+ye)%360,_e.push(p(he));return _e}function q(ae,ve){ve=ve||6;for(var pe=p(ae).toHsv(),he=pe.h,ye=pe.s,_e=pe.v,je=[],Je=1/ve;ve--;)je.push(p({h:he,s:ye,v:_e})),_e=(_e+Je)%1;return je}p.mix=function(ae,ve,pe){pe=pe===0?0:pe||50;var he=p(ae).toRgb(),ye=p(ve).toRgb(),_e=pe/100,je={r:(ye.r-he.r)*_e+he.r,g:(ye.g-he.g)*_e+he.g,b:(ye.b-he.b)*_e+he.b,a:(ye.a-he.a)*_e+he.a};return p(je)},p.readability=function(ae,ve){var pe=p(ae),he=p(ve);return(a.max(pe.getLuminance(),he.getLuminance())+.05)/(a.min(pe.getLuminance(),he.getLuminance())+.05)},p.isReadable=function(ae,ve,pe){var he=p.readability(ae,ve),ye,_e;switch(_e=!1,ye=ce(pe),ye.level+ye.size){case"AAsmall":case"AAAlarge":_e=he>=4.5;break;case"AAlarge":_e=he>=3;break;case"AAAsmall":_e=he>=7;break}return _e},p.mostReadable=function(ae,ve,pe){var he=null,ye=0,_e,je,Je,nt;pe=pe||{},je=pe.includeFallbackColors,Je=pe.level,nt=pe.size;for(var at=0;at<ve.length;at++)_e=p.readability(ae,ve[at]),_e>ye&&(ye=_e,he=p(ve[at]));return p.isReadable(ae,he,{level:Je,size:nt})||!je?he:(pe.includeFallbackColors=!1,p.mostReadable(ae,["#fff","#000"],pe))};var we=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ee=p.hexNames=X(we);function X(ae){var ve={};for(var pe in ae)ae.hasOwnProperty(pe)&&(ve[ae[pe]]=pe);return ve}function re(ae){return ae=parseFloat(ae),(isNaN(ae)||ae<0||ae>1)&&(ae=1),ae}function de(ae,ve){He(ae)&&(ae="100%");var pe=Re(ae);return ae=h(ve,v(0,parseFloat(ae))),pe&&(ae=parseInt(ae*ve,10)/100),a.abs(ae-ve)<1e-6?1:ae%ve/parseFloat(ve)}function me(ae){return h(1,v(0,ae))}function xe(ae){return parseInt(ae,16)}function He(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1}function Re(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}function Ee(ae){return ae.length==1?"0"+ae:""+ae}function ke(ae){return ae<=1&&(ae=ae*100+"%"),ae}function $(ae){return a.round(parseFloat(ae)*255).toString(16)}function le(ae){return xe(ae)/255}var K=function(){var ae="[-\\+]?\\d+%?",ve="[-\\+]?\\d*\\.\\d+%?",pe="(?:"+ve+")|(?:"+ae+")",he="[\\s|\\(]+("+pe+")[,|\\s]+("+pe+")[,|\\s]+("+pe+")\\s*\\)?",ye="[\\s|\\(]+("+pe+")[,|\\s]+("+pe+")[,|\\s]+("+pe+")[,|\\s]+("+pe+")\\s*\\)?";return{CSS_UNIT:new RegExp(pe),rgb:new RegExp("rgb"+he),rgba:new RegExp("rgba"+ye),hsl:new RegExp("hsl"+he),hsla:new RegExp("hsla"+ye),hsv:new RegExp("hsv"+he),hsva:new RegExp("hsva"+ye),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function te(ae){return!!K.CSS_UNIT.exec(ae)}function ie(ae){ae=ae.replace(s,"").replace(n,"").toLowerCase();var ve=!1;if(we[ae])ae=we[ae],ve=!0;else if(ae=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var pe;return(pe=K.rgb.exec(ae))?{r:pe[1],g:pe[2],b:pe[3]}:(pe=K.rgba.exec(ae))?{r:pe[1],g:pe[2],b:pe[3],a:pe[4]}:(pe=K.hsl.exec(ae))?{h:pe[1],s:pe[2],l:pe[3]}:(pe=K.hsla.exec(ae))?{h:pe[1],s:pe[2],l:pe[3],a:pe[4]}:(pe=K.hsv.exec(ae))?{h:pe[1],s:pe[2],v:pe[3]}:(pe=K.hsva.exec(ae))?{h:pe[1],s:pe[2],v:pe[3],a:pe[4]}:(pe=K.hex8.exec(ae))?{r:xe(pe[1]),g:xe(pe[2]),b:xe(pe[3]),a:le(pe[4]),format:ve?"name":"hex8"}:(pe=K.hex6.exec(ae))?{r:xe(pe[1]),g:xe(pe[2]),b:xe(pe[3]),format:ve?"name":"hex"}:(pe=K.hex4.exec(ae))?{r:xe(pe[1]+""+pe[1]),g:xe(pe[2]+""+pe[2]),b:xe(pe[3]+""+pe[3]),a:le(pe[4]+""+pe[4]),format:ve?"name":"hex8"}:(pe=K.hex3.exec(ae))?{r:xe(pe[1]+""+pe[1]),g:xe(pe[2]+""+pe[2]),b:xe(pe[3]+""+pe[3]),format:ve?"name":"hex"}:!1}function ce(ae){var ve,pe;return ae=ae||{level:"AA",size:"small"},ve=(ae.level||"AA").toUpperCase(),pe=(ae.size||"small").toLowerCase(),ve!=="AA"&&ve!=="AAA"&&(ve="AA"),pe!=="small"&&pe!=="large"&&(pe="small"),{level:ve,size:pe}}typeof i<"u"&&i.exports?i.exports=p:window.tinycolor=p})(Math)},{}],69:[function(e,i,o){var a=e("../main"),s=e("object-assign"),n=a.instance();function l(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,s(l.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(E,A){if(typeof E=="string"){var P=E.match(h);return P?P[0]:""}var D=this._validateYear(E),R=E.month(),S=""+this.toChineseMonth(D,R);return A&&S.length<2&&(S="0"+S),this.isIntercalaryMonth(D,R)&&(S+="i"),S},monthNames:function(E){if(typeof E=="string"){var A=E.match(v);return A?A[0]:""}var P=this._validateYear(E),D=E.month(),R=this.toChineseMonth(P,D),S=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][R-1];return this.isIntercalaryMonth(P,D)&&(S="\u95F0"+S),S},monthNamesShort:function(E){if(typeof E=="string"){var A=E.match(d);return A?A[0]:""}var P=this._validateYear(E),D=E.month(),R=this.toChineseMonth(P,D),S=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][R-1];return this.isIntercalaryMonth(P,D)&&(S="\u95F0"+S),S},parseMonth:function(E,A){E=this._validateYear(E);var P=parseInt(A),D;if(isNaN(P))A[0]==="\u95F0"&&(D=!0,A=A.substring(1)),A[A.length-1]==="\u6708"&&(A=A.substring(0,A.length-1)),P=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(A);else{var R=A[A.length-1];D=R==="i"||R==="I"}var S=this.toMonthIndex(E,P,D);return S},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(E,A){if(E.year&&(E=E.year()),typeof E!="number"||E<1888||E>2111)throw A.replace(/\{0\}/,this.local.name);return E},toMonthIndex:function(E,A,P){var D=this.intercalaryMonth(E),R=P&&A!==D;if(R||A<1||A>12)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);var S;return D?!P&&A<=D?S=A-1:S=A:S=A-1,S},toChineseMonth:function(E,A){E.year&&(E=E.year(),A=E.month());var P=this.intercalaryMonth(E),D=P?12:11;if(A<0||A>D)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);var R;return P?A<P?R=A+1:R=A:R=A+1,R},intercalaryMonth:function(E){E=this._validateYear(E);var A=p[E-p[0]],P=A>>13;return P},isIntercalaryMonth:function(E,A){E.year&&(E=E.year(),A=E.month());var P=this.intercalaryMonth(E);return!!P&&P===A},leapYear:function(E){return this.intercalaryMonth(E)!==0},weekOfYear:function(E,A,P){var D=this._validateYear(E,a.local.invalidyear),R=_[D-_[0]],S=R>>9&4095,I=R>>5&15,T=R&31,M;M=n.newDate(S,I,T),M.add(4-(M.dayOfWeek()||7),"d");var z=this.toJD(E,A,P)-M.toJD();return 1+Math.floor(z/7)},monthsInYear:function(E){return this.leapYear(E)?13:12},daysInMonth:function(E,A){E.year&&(A=E.month(),E=E.year()),E=this._validateYear(E);var P=p[E-p[0]],D=P>>13,R=D?12:11;if(A>R)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);var S=P&1<<12-A?30:29;return S},weekDay:function(E,A,P){return(this.dayOfWeek(E,A,P)||7)<6},toJD:function(E,A,P){var D=this._validate(E,S,P,a.local.invalidDate);E=this._validateYear(D.year()),A=D.month(),P=D.day();var R=this.isIntercalaryMonth(E,A),S=this.toChineseMonth(E,A),I=x(E,S,P,R);return n.toJD(I.year,I.month,I.day)},fromJD:function(E){var A=n.fromJD(E),P=b(A.year(),A.month(),A.day()),D=this.toMonthIndex(P.year,P.month,P.isIntercalary);return this.newDate(P.year,D,P.day)},fromString:function(E){var A=E.match(u),P=this._validateYear(+A[1]),D=+A[2],R=!!A[3],S=this.toMonthIndex(P,D,R),I=+A[4];return this.newDate(P,S,I)},add:function(E,A,P){var D=E.year(),R=E.month(),S=this.isIntercalaryMonth(D,R),I=this.toChineseMonth(D,R),T=Object.getPrototypeOf(l.prototype).add.call(this,E,A,P);if(P==="y"){var M=T.year(),z=T.month(),U=this.isIntercalaryMonth(M,I),F=S&&U?this.toMonthIndex(M,I,!0):this.toMonthIndex(M,I,!1);F!==z&&T.month(F)}return T}});var u=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,h=/^\d?\d[iI]?/m,v=/^??[]?/m,d=/^??[]?/m;a.calendars.chinese=l;var p=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],_=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function b(E,A,P,D){var R,S;if(typeof E=="object")R=E,S=A||{};else{var I=typeof E=="number"&&E>=1888&&E<=2111;if(!I)throw new Error("Solar year outside range 1888-2111");var T=typeof A=="number"&&A>=1&&A<=12;if(!T)throw new Error("Solar month outside range 1 - 12");var M=typeof P=="number"&&P>=1&&P<=31;if(!M)throw new Error("Solar day outside range 1 - 31");R={year:E,month:A,day:P},S=D||{}}var z=_[R.year-_[0]],U=R.year<<9|R.month<<5|R.day;S.year=U>=z?R.year:R.year-1,z=_[S.year-_[0]];var F=z>>9&4095,V=z>>5&15,j=z&31,H,Y=new Date(F,V-1,j),J=new Date(R.year,R.month-1,R.day);H=Math.round((J-Y)/(24*3600*1e3));var ne=p[S.year-p[0]],q;for(q=0;q<13;q++){var we=ne&1<<12-q?30:29;if(H<we)break;H-=we}var ee=ne>>13;return!ee||q<ee?(S.isIntercalary=!1,S.month=1+q):q===ee?(S.isIntercalary=!0,S.month=q):(S.isIntercalary=!1,S.month=q),S.day=1+H,S}function x(E,A,P,D,R){var S,I;if(typeof E=="object")I=E,S=A||{};else{var T=typeof E=="number"&&E>=1888&&E<=2111;if(!T)throw new Error("Lunar year outside range 1888-2111");var M=typeof A=="number"&&A>=1&&A<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var z=typeof P=="number"&&P>=1&&P<=30;if(!z)throw new Error("Lunar day outside range 1 - 30");var U;typeof D=="object"?(U=!1,S=D):(U=!!D,S=R||{}),I={year:E,month:A,day:P,isIntercalary:U}}var F;F=I.day-1;var V=p[I.year-p[0]],j=V>>13,H;j&&(I.month>j||I.isIntercalary)?H=I.month:H=I.month-1;for(var Y=0;Y<H;Y++){var J=V&1<<12-Y?30:29;F+=J}var ne=_[I.year-_[0]],q=ne>>9&4095,we=ne>>5&15,ee=ne&31,X=new Date(q,we-1,ee+F);return S.year=X.getFullYear(),S.month=1+X.getMonth(),S.day=X.getDate(),S}},{"../main":83,"object-assign":55}],70:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var u=this._validate(h,this.minMonth,this.minDay,a.local.invalidYear),h=u.year()+(u.year()<0?1:0);return h%4===3||h%4===-1},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),13},weekOfYear:function(l,u,h){var v=this.newDate(l,u,h);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(l,u){var h=this._validate(l,u,this.minDay,a.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(l,u,h){return(this.dayOfWeek(l,u,h)||7)<6},toJD:function(l,u,h){var v=this._validate(l,u,h,a.local.invalidDate);return l=v.year(),l<0&&l++,v.day()+(v.month()-1)*30+(l-1)*365+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var u=Math.floor(l)+.5-this.jdEpoch,h=Math.floor((u-Math.floor((u+366)/1461))/365)+1;h<=0&&h--,u=Math.floor(l)+.5-this.newDate(h,1,1).toJD();var v=Math.floor(u/30)+1,d=u-(v-1)*30+1;return this.newDate(h,v,d)}}),a.calendars.coptic=n},{"../main":83,"object-assign":55}],71:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(u){return this._validate(u,this.minMonth,this.minDay,a.local.invalidYear),!1},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,a.local.invalidYear),13},daysInYear:function(u){return this._validate(u,this.minMonth,this.minDay,a.local.invalidYear),400},weekOfYear:function(u,h,v){var d=this.newDate(u,h,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/8)+1},daysInMonth:function(u,h){var v=this._validate(u,h,this.minDay,a.local.invalidMonth);return this.daysPerMonth[v.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(u,h,v){var d=this._validate(u,h,v,a.local.invalidDate);return(d.day()+1)%8},weekDay:function(u,h,v){var d=this.dayOfWeek(u,h,v);return d>=2&&d<=6},extraInfo:function(u,h,v){var d=this._validate(u,h,v,a.local.invalidDate);return{century:l[Math.floor((d.year()-1)/100)+1]||""}},toJD:function(u,h,v){var d=this._validate(u,h,v,a.local.invalidDate);return u=d.year()+(d.year()<0?1:0),h=d.month(),v=d.day(),v+(h>1?16:0)+(h>2?(h-2)*32:0)+(u-1)*400+this.jdEpoch-1},fromJD:function(u){u=Math.floor(u+.5)-Math.floor(this.jdEpoch)-1;var h=Math.floor(u/400)+1;u-=(h-1)*400,u+=u>15?16:0;var v=Math.floor(u/32)+1,d=u-(v-1)*32+1;return this.newDate(h<=0?h-1:h,v,d)}});var l={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=n},{"../main":83,"object-assign":55}],72:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var u=this._validate(h,this.minMonth,this.minDay,a.local.invalidYear),h=u.year()+(u.year()<0?1:0);return h%4===3||h%4===-1},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),13},weekOfYear:function(l,u,h){var v=this.newDate(l,u,h);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(l,u){var h=this._validate(l,u,this.minDay,a.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(l,u,h){return(this.dayOfWeek(l,u,h)||7)<6},toJD:function(l,u,h){var v=this._validate(l,u,h,a.local.invalidDate);return l=v.year(),l<0&&l++,v.day()+(v.month()-1)*30+(l-1)*365+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var u=Math.floor(l)+.5-this.jdEpoch,h=Math.floor((u-Math.floor((u+366)/1461))/365)+1;h<=0&&h--,u=Math.floor(l)+.5-this.newDate(h,1,1).toJD();var v=Math.floor(u/30)+1,d=u-(v-1)*30+1;return this.newDate(h,v,d)}}),a.calendars.ethiopian=n},{"../main":83,"object-assign":55}],73:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var h=this._validate(u,this.minMonth,this.minDay,a.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(u){return u=u<0?u+1:u,l(u*7+1,19)<7},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,a.local.invalidYear),this._leapYear(u.year?u.year():u)?13:12},weekOfYear:function(u,h,v){var d=this.newDate(u,h,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(u){var h=this._validate(u,this.minMonth,this.minDay,a.local.invalidYear);return u=h.year(),this.toJD(u===-1?1:u+1,7,1)-this.toJD(u,7,1)},daysInMonth:function(u,h){return u.year&&(h=u.month(),u=u.year()),this._validate(u,h,this.minDay,a.local.invalidMonth),h===12&&this.leapYear(u)||h===8&&l(this.daysInYear(u),10)===5?30:h===9&&l(this.daysInYear(u),10)===3?29:this.daysPerMonth[h-1]},weekDay:function(u,h,v){return this.dayOfWeek(u,h,v)!==6},extraInfo:function(u,h,v){var d=this._validate(u,h,v,a.local.invalidDate);return{yearType:(this.leapYear(d)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(d)%10-3]}},toJD:function(u,h,v){var d=this._validate(u,h,v,a.local.invalidDate);u=d.year(),h=d.month(),v=d.day();var p=u<=0?u+1:u,_=this.jdEpoch+this._delay1(p)+this._delay2(p)+v+1;if(h<7){for(var b=7;b<=this.monthsInYear(u);b++)_+=this.daysInMonth(u,b);for(var b=1;b<h;b++)_+=this.daysInMonth(u,b)}else for(var b=7;b<h;b++)_+=this.daysInMonth(u,b);return _},_delay1:function(u){var h=Math.floor((235*u-234)/19),v=12084+13753*h,d=h*29+Math.floor(v/25920);return l(3*(d+1),7)<3&&d++,d},_delay2:function(u){var h=this._delay1(u-1),v=this._delay1(u),d=this._delay1(u+1);return d-v===356?2:v-h===382?1:0},fromJD:function(u){u=Math.floor(u)+.5;for(var h=Math.floor((u-this.jdEpoch)*98496/35975351)-1;u>=this.toJD(h===-1?1:h+1,7,1);)h++;for(var v=u<this.toJD(h,1,1)?7:1;u>this.toJD(h,v,this.daysInMonth(h,v));)v++;var d=u-this.toJD(h,v,1)+1;return this.newDate(h,v,d)}});function l(u,h){return u-h*Math.floor(u/h)}a.calendars.hebrew=n},{"../main":83,"object-assign":55}],74:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(l){var u=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear);return(u.year()*11+14)%30<11},weekOfYear:function(l,u,h){var v=this.newDate(l,u,h);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(l){return this.leapYear(l)?355:354},daysInMonth:function(l,u){var h=this._validate(l,u,this.minDay,a.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===12&&this.leapYear(h.year())?1:0)},weekDay:function(l,u,h){return this.dayOfWeek(l,u,h)!==5},toJD:function(l,u,h){var v=this._validate(l,u,h,a.local.invalidDate);return l=v.year(),u=v.month(),h=v.day(),l=l<=0?l+1:l,h+Math.ceil(29.5*(u-1))+(l-1)*354+Math.floor((3+11*l)/30)+this.jdEpoch-1},fromJD:function(l){l=Math.floor(l)+.5;var u=Math.floor((30*(l-this.jdEpoch)+10646)/10631);u=u<=0?u-1:u;var h=Math.min(12,Math.ceil((l-29-this.toJD(u,1,1))/29.5)+1),v=l-this.toJD(u,h,1)+1;return this.newDate(u,h,v)}}),a.calendars.islamic=n},{"../main":83,"object-assign":55}],75:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var u=this._validate(h,this.minMonth,this.minDay,a.local.invalidYear),h=u.year()<0?u.year()+1:u.year();return h%4===0},weekOfYear:function(l,u,h){var v=this.newDate(l,u,h);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(l,u){var h=this._validate(l,u,this.minDay,a.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(l,u,h){return(this.dayOfWeek(l,u,h)||7)<6},toJD:function(l,u,h){var v=this._validate(l,u,h,a.local.invalidDate);return l=v.year(),u=v.month(),h=v.day(),l<0&&l++,u<=2&&(l--,u+=12),Math.floor(365.25*(l+4716))+Math.floor(30.6001*(u+1))+h-1524.5},fromJD:function(l){var u=Math.floor(l+.5),h=u+1524,v=Math.floor((h-122.1)/365.25),d=Math.floor(365.25*v),p=Math.floor((h-d)/30.6001),_=p-Math.floor(p<14?1:13),b=v-Math.floor(_>2?4716:4715),x=h-d-Math.floor(30.6001*p);return b<=0&&b--,this.newDate(b,_,x)}}),a.calendars.julian=n},{"../main":83,"object-assign":55}],76:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,a.local.invalidYear),!1},formatYear:function(h){var v=this._validate(h,this.minMonth,this.minDay,a.local.invalidYear);h=v.year();var d=Math.floor(h/400);h=h%400,h+=h<0?400:0;var p=Math.floor(h/20);return d+"."+p+"."+h%20},forYear:function(h){if(h=h.split("."),h.length<3)throw"Invalid Mayan year";for(var v=0,d=0;d<h.length;d++){var p=parseInt(h[d],10);if(Math.abs(p)>19||d>0&&p<0)throw"Invalid Mayan year";v=v*20+p}return v},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,a.local.invalidYear),18},weekOfYear:function(h,v,d){return this._validate(h,v,d,a.local.invalidDate),0},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,a.local.invalidYear),360},daysInMonth:function(h,v){return this._validate(h,v,this.minDay,a.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(h,v,d){var p=this._validate(h,v,d,a.local.invalidDate);return p.day()},weekDay:function(h,v,d){return this._validate(h,v,d,a.local.invalidDate),!0},extraInfo:function(h,v,d){var p=this._validate(h,v,d,a.local.invalidDate),_=p.toJD(),b=this._toHaab(_),x=this._toTzolkin(_);return{haabMonthName:this.local.haabMonths[b[0]-1],haabMonth:b[0],haabDay:b[1],tzolkinDayName:this.local.tzolkinMonths[x[0]-1],tzolkinDay:x[0],tzolkinTrecena:x[1]}},_toHaab:function(h){h-=this.jdEpoch;var v=l(h+8+(18-1)*20,365);return[Math.floor(v/20)+1,l(v,20)]},_toTzolkin:function(h){return h-=this.jdEpoch,[u(h+20,20),u(h+4,13)]},toJD:function(h,v,d){var p=this._validate(h,v,d,a.local.invalidDate);return p.day()+p.month()*20+p.year()*360+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var v=Math.floor(h/360);h=h%360,h+=h<0?360:0;var d=Math.floor(h/20),p=h%20;return this.newDate(v,d,p)}});function l(h,v){return h-v*Math.floor(h/v)}function u(h,v){return l(h-1,v)+1}a.calendars.mayan=n},{"../main":83,"object-assign":55}],77:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar;var l=a.instance("gregorian");s(n.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var h=this._validate(u,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return l.leapYear(h.year()+(h.year()<1?1:0)+1469)},weekOfYear:function(u,h,v){var d=this.newDate(u,h,v);return d.add(1-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(u,h){var v=this._validate(u,h,this.minDay,a.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(u,h,v){return(this.dayOfWeek(u,h,v)||7)<6},toJD:function(p,h,v){var d=this._validate(p,h,v,a.local.invalidMonth),p=d.year();p<0&&p++;for(var _=d.day(),b=1;b<d.month();b++)_+=this.daysPerMonth[b-1];return _+l.toJD(p+1468,3,13)},fromJD:function(u){u=Math.floor(u+.5);for(var h=Math.floor((u-(this.jdEpoch-1))/366);u>=this.toJD(h+1,1,1);)h++;for(var v=u-Math.floor(this.toJD(h,1,1)+.5)+1,d=1;v>this.daysInMonth(h,d);)v-=this.daysInMonth(h,d),d++;return this.newDate(h,d,v)}}),a.calendars.nanakshahi=n},{"../main":83,"object-assign":55}],78:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(l){return this.daysInYear(l)!==this.daysPerYear},weekOfYear:function(l,u,h){var v=this.newDate(l,u,h);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(l){var u=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear);if(l=u.year(),typeof this.NEPALI_CALENDAR_DATA[l]>"u")return this.daysPerYear;for(var h=0,v=this.minMonth;v<=12;v++)h+=this.NEPALI_CALENDAR_DATA[l][v];return h},daysInMonth:function(l,u){return l.year&&(u=l.month(),l=l.year()),this._validate(l,u,this.minDay,a.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[l]>"u"?this.daysPerMonth[u-1]:this.NEPALI_CALENDAR_DATA[l][u]},weekDay:function(l,u,h){return this.dayOfWeek(l,u,h)!==6},toJD:function(l,u,h){var v=this._validate(l,u,h,a.local.invalidDate);l=v.year(),u=v.month(),h=v.day();var d=a.instance(),p=0,_=u,b=l;this._createMissingCalendarData(l);var x=l-(_>9||_===9&&h>=this.NEPALI_CALENDAR_DATA[b][0]?56:57);for(u!==9&&(p=h,_--);_!==9;)_<=0&&(_=12,b--),p+=this.NEPALI_CALENDAR_DATA[b][_],_--;return u===9?(p+=h-this.NEPALI_CALENDAR_DATA[b][0],p<0&&(p+=d.daysInYear(x))):p+=this.NEPALI_CALENDAR_DATA[b][9]-this.NEPALI_CALENDAR_DATA[b][0],d.newDate(x,1,1).add(p,"d").toJD()},fromJD:function(l){var u=a.instance(),h=u.fromJD(l),v=h.year(),d=h.dayOfYear(),p=v+56;this._createMissingCalendarData(p);for(var _=9,b=this.NEPALI_CALENDAR_DATA[p][0],x=this.NEPALI_CALENDAR_DATA[p][_]-b+1;d>x;)_++,_>12&&(_=1,p++),x+=this.NEPALI_CALENDAR_DATA[p][_];var E=this.NEPALI_CALENDAR_DATA[p][_]-(x-d);return this.newDate(p,_,E)},_createMissingCalendarData:function(l){var u=this.daysPerMonth.slice(0);u.unshift(17);for(var h=l-1;h<l+2;h++)typeof this.NEPALI_CALENDAR_DATA[h]>"u"&&(this.NEPALI_CALENDAR_DATA[h]=u)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),a.calendars.nepali=n},{"../main":83,"object-assign":55}],79:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(u){var h=this._validate(u,this.minMonth,this.minDay,a.local.invalidYear);return((h.year()-(h.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(u,h,v){var d=this.newDate(u,h,v);return d.add(-((d.dayOfWeek()+1)%7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(u,h){var v=this._validate(u,h,this.minDay,a.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(u,h,v){return this.dayOfWeek(u,h,v)!==5},toJD:function(u,h,v){var d=this._validate(u,h,v,a.local.invalidDate);u=d.year(),h=d.month(),v=d.day();var p=u-(u>=0?474:473),_=474+l(p,2820);return v+(h<=7?(h-1)*31:(h-1)*30+6)+Math.floor((_*682-110)/2816)+(_-1)*365+Math.floor(p/2820)*1029983+this.jdEpoch-1},fromJD:function(u){u=Math.floor(u)+.5;var h=u-this.toJD(475,1,1),v=Math.floor(h/1029983),d=l(h,1029983),p=2820;if(d!==1029982){var _=Math.floor(d/366),b=l(d,366);p=Math.floor((2134*_+2816*b+2815)/1028522)+_+1}var x=p+2820*v+474;x=x<=0?x-1:x;var E=u-this.toJD(x,1,1)+1,A=E<=186?Math.ceil(E/31):Math.ceil((E-6)/30),P=u-this.toJD(x,A,1)+1;return this.newDate(x,A,P)}});function l(u,h){return u-h*Math.floor(u/h)}a.calendars.persian=n,a.calendars.jalali=n},{"../main":83,"object-assign":55}],80:[function(e,i,o){var a=e("../main"),s=e("object-assign"),n=a.instance();function l(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,s(l.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,a.local.invalidYear),v=this._t2gYear(h.year());return n.leapYear(v)},weekOfYear:function(p,h,v){var d=this._validate(p,this.minMonth,this.minDay,a.local.invalidYear),p=this._t2gYear(d.year());return n.weekOfYear(p,d.month(),d.day())},daysInMonth:function(u,h){var v=this._validate(u,h,this.minDay,a.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(u,h,v){return(this.dayOfWeek(u,h,v)||7)<6},toJD:function(p,h,v){var d=this._validate(p,h,v,a.local.invalidDate),p=this._t2gYear(d.year());return n.toJD(p,d.month(),d.day())},fromJD:function(u){var h=n.fromJD(u),v=this._g2tYear(h.year());return this.newDate(v,h.month(),h.day())},_t2gYear:function(u){return u+this.yearsOffset+(u>=-this.yearsOffset&&u<=-1?1:0)},_g2tYear:function(u){return u-this.yearsOffset-(u>=1&&u<=this.yearsOffset?1:0)}}),a.calendars.taiwan=l},{"../main":83,"object-assign":55}],81:[function(e,i,o){var a=e("../main"),s=e("object-assign"),n=a.instance();function l(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,s(l.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var h=this._validate(v,this.minMonth,this.minDay,a.local.invalidYear),v=this._t2gYear(h.year());return n.leapYear(v)},weekOfYear:function(p,h,v){var d=this._validate(p,this.minMonth,this.minDay,a.local.invalidYear),p=this._t2gYear(d.year());return n.weekOfYear(p,d.month(),d.day())},daysInMonth:function(u,h){var v=this._validate(u,h,this.minDay,a.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(u,h,v){return(this.dayOfWeek(u,h,v)||7)<6},toJD:function(p,h,v){var d=this._validate(p,h,v,a.local.invalidDate),p=this._t2gYear(d.year());return n.toJD(p,d.month(),d.day())},fromJD:function(u){var h=n.fromJD(u),v=this._g2tYear(h.year());return this.newDate(v,h.month(),h.day())},_t2gYear:function(u){return u-this.yearsOffset-(u>=1&&u<=this.yearsOffset?1:0)},_g2tYear:function(u){return u+this.yearsOffset+(u>=-this.yearsOffset&&u<=-1?1:0)}}),a.calendars.thai=l},{"../main":83,"object-assign":55}],82:[function(e,i,o){var a=e("../main"),s=e("object-assign");function n(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}n.prototype=new a.baseCalendar,s(n.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(u){var h=this._validate(u,this.minMonth,this.minDay,a.local.invalidYear);return this.daysInYear(h.year())===355},weekOfYear:function(u,h,v){var d=this.newDate(u,h,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(u){for(var h=0,v=1;v<=12;v++)h+=this.daysInMonth(u,v);return h},daysInMonth:function(u,h){for(var v=this._validate(u,h,this.minDay,a.local.invalidMonth),d=v.toJD()-24e5+.5,p=0,_=0;_<l.length;_++){if(l[_]>d)return l[p]-l[p-1];p++}return 30},weekDay:function(u,h,v){return this.dayOfWeek(u,h,v)!==5},toJD:function(u,h,v){var d=this._validate(u,h,v,a.local.invalidDate),p=12*(d.year()-1)+d.month()-15292,_=d.day()+l[p-1]-1;return _+24e5-.5},fromJD:function(u){for(var h=u-24e5+.5,v=0,d=0;d<l.length&&!(l[d]>h);d++)v++;var p=v+15292,_=Math.floor((p-1)/12),b=_+1,x=p-12*_,E=h-l[v-1]+1;return this.newDate(b,x,E)},isValid:function(u,h,v){var d=a.baseCalendar.prototype.isValid.apply(this,arguments);return d&&(u=u.year!=null?u.year:u,d=u>=1276&&u<=1500),d},_validate:function(u,h,v,d){var p=a.baseCalendar.prototype._validate.apply(this,arguments);if(p.year<1276||p.year>1500)throw d.replace(/\{0\}/,this.local.name);return p}}),a.calendars.ummalqura=n;var l=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":83,"object-assign":55}],83:[function(e,i,o){var a=e("object-assign");function s(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}a(s.prototype,{instance:function(d,p){d=(d||"gregorian").toLowerCase(),p=p||"";var _=this._localCals[d+"-"+p];if(!_&&this.calendars[d]&&(_=new this.calendars[d](p),this._localCals[d+"-"+p]=_),!_)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,d);return _},newDate:function(d,p,_,b,x){return b=(d!=null&&d.year?d.calendar():typeof b=="string"?this.instance(b,x):b)||this.instance(),b.newDate(d,p,_)},substituteDigits:function(d){return function(p){return(p+"").replace(/[0-9]/g,function(_){return d[_]})}},substituteChineseDigits:function(d,p){return function(_){for(var b="",x=0;_>0;){var E=_%10;b=(E===0?"":d[E]+p[x])+b,x++,_=Math.floor(_/10)}return b.indexOf(d[1]+p[1])===0&&(b=b.substr(1)),b||d[0]}}});function n(d,p,_,b){if(this._calendar=d,this._year=p,this._month=_,this._day=b,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(v.local.invalidDate||v.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function l(d,p){return d=""+d,"000000".substring(0,p-d.length)+d}a(n.prototype,{newDate:function(d,p,_){return this._calendar.newDate(d==null?this:d,p,_)},year:function(d){return arguments.length===0?this._year:this.set(d,"y")},month:function(d){return arguments.length===0?this._month:this.set(d,"m")},day:function(d){return arguments.length===0?this._day:this.set(d,"d")},date:function(d,p,_){if(!this._calendar.isValid(d,p,_))throw(v.local.invalidDate||v.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=d,this._month=p,this._day=_,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(d,p){return this._calendar.add(this,d,p)},set:function(d,p){return this._calendar.set(this,d,p)},compareTo:function(d){if(this._calendar.name!==d._calendar.name)throw(v.local.differentCalendars||v.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,d._calendar.local.name);var p=this._year!==d._year?this._year-d._year:this._month!==d._month?this.monthOfYear()-d.monthOfYear():this._day-d._day;return p===0?0:p<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(d){return this._calendar.fromJD(d)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(d){return this._calendar.fromJSDate(d)},toString:function(){return(this.year()<0?"-":"")+l(Math.abs(this.year()),4)+"-"+l(this.month(),2)+"-"+l(this.day(),2)}});function u(){this.shortYearCutoff="+10"}a(u.prototype,{_validateLevel:0,newDate:function(d,p,_){return d==null?this.today():(d.year&&(this._validate(d,p,_,v.local.invalidDate||v.regionalOptions[""].invalidDate),_=d.day(),p=d.month(),d=d.year()),new n(this,d,p,_))},today:function(){return this.fromJSDate(new Date)},epoch:function(d){var p=this._validate(d,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return p.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(d){var p=this._validate(d,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return(p.year()<0?"-":"")+l(Math.abs(p.year()),4)},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),12},monthOfYear:function(d,p){var _=this._validate(d,p,this.minDay,v.local.invalidMonth||v.regionalOptions[""].invalidMonth);return(_.month()+this.monthsInYear(_)-this.firstMonth)%this.monthsInYear(_)+this.minMonth},fromMonthOfYear:function(d,p){var _=(p+this.firstMonth-2*this.minMonth)%this.monthsInYear(d)+this.minMonth;return this._validate(d,_,this.minDay,v.local.invalidMonth||v.regionalOptions[""].invalidMonth),_},daysInYear:function(d){var p=this._validate(d,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return this.leapYear(p)?366:365},dayOfYear:function(d,p,_){var b=this._validate(d,p,_,v.local.invalidDate||v.regionalOptions[""].invalidDate);return b.toJD()-this.newDate(b.year(),this.fromMonthOfYear(b.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(d,p,_){var b=this._validate(d,p,_,v.local.invalidDate||v.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(b))+2)%this.daysInWeek()},extraInfo:function(d,p,_){return this._validate(d,p,_,v.local.invalidDate||v.regionalOptions[""].invalidDate),{}},add:function(d,p,_){return this._validate(d,this.minMonth,this.minDay,v.local.invalidDate||v.regionalOptions[""].invalidDate),this._correctAdd(d,this._add(d,p,_),p,_)},_add:function(d,p,_){if(this._validateLevel++,_==="d"||_==="w"){var b=d.toJD()+p*(_==="w"?this.daysInWeek():1),x=d.calendar().fromJD(b);return this._validateLevel--,[x.year(),x.month(),x.day()]}try{var E=d.year()+(_==="y"?p:0),A=d.monthOfYear()+(_==="m"?p:0),x=d.day(),P=function(S){for(;A<S.minMonth;)E--,A+=S.monthsInYear(E);for(var I=S.monthsInYear(E);A>I-1+S.minMonth;)E++,A-=I,I=S.monthsInYear(E)};_==="y"?(d.month()!==this.fromMonthOfYear(E,A)&&(A=this.newDate(E,d.month(),this.minDay).monthOfYear()),A=Math.min(A,this.monthsInYear(E)),x=Math.min(x,this.daysInMonth(E,this.fromMonthOfYear(E,A)))):_==="m"&&(P(this),x=Math.min(x,this.daysInMonth(E,this.fromMonthOfYear(E,A))));var D=[E,this.fromMonthOfYear(E,A),x];return this._validateLevel--,D}catch(R){throw this._validateLevel--,R}},_correctAdd:function(d,p,_,b){if(!this.hasYearZero&&(b==="y"||b==="m")&&(p[0]===0||d.year()>0!=p[0]>0)){var x={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[b],E=_<0?-1:1;p=this._add(d,_*x[0]+E*x[1],x[2])}return d.date(p[0],p[1],p[2])},set:function(d,p,_){this._validate(d,this.minMonth,this.minDay,v.local.invalidDate||v.regionalOptions[""].invalidDate);var b=_==="y"?p:d.year(),x=_==="m"?p:d.month(),E=_==="d"?p:d.day();return(_==="y"||_==="m")&&(E=Math.min(E,this.daysInMonth(b,x))),d.date(b,x,E)},isValid:function(d,p,_){this._validateLevel++;var b=this.hasYearZero||d!==0;if(b){var x=this.newDate(d,p,this.minDay);b=p>=this.minMonth&&p-this.minMonth<this.monthsInYear(x)&&_>=this.minDay&&_-this.minDay<this.daysInMonth(x)}return this._validateLevel--,b},toJSDate:function(d,p,_){var b=this._validate(d,p,_,v.local.invalidDate||v.regionalOptions[""].invalidDate);return v.instance().fromJD(this.toJD(b)).toJSDate()},fromJSDate:function(d){return this.fromJD(v.instance().fromJSDate(d).toJD())},_validate:function(d,p,_,b){if(d.year){if(this._validateLevel===0&&this.name!==d.calendar().name)throw(v.local.differentCalendars||v.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,d.calendar().local.name);return d}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(d,p,_))throw b.replace(/\{0\}/,this.local.name);var x=this.newDate(d,p,_);return this._validateLevel--,x}catch(E){throw this._validateLevel--,E}}});function h(d){this.local=this.regionalOptions[d]||this.regionalOptions[""]}h.prototype=new u,a(h.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),_=p.year()+(p.year()<0?1:0);return _%4===0&&(_%100!==0||_%400===0)},weekOfYear:function(d,p,_){var b=this.newDate(d,p,_);return b.add(4-(b.dayOfWeek()||7),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(d,p){var _=this._validate(d,p,this.minDay,v.local.invalidMonth||v.regionalOptions[""].invalidMonth);return this.daysPerMonth[_.month()-1]+(_.month()===2&&this.leapYear(_.year())?1:0)},weekDay:function(d,p,_){return(this.dayOfWeek(d,p,_)||7)<6},toJD:function(d,p,_){var b=this._validate(d,p,_,v.local.invalidDate||v.regionalOptions[""].invalidDate);d=b.year(),p=b.month(),_=b.day(),d<0&&d++,p<3&&(p+=12,d--);var x=Math.floor(d/100),E=2-x+Math.floor(x/4);return Math.floor(365.25*(d+4716))+Math.floor(30.6001*(p+1))+_+E-1524.5},fromJD:function(d){var p=Math.floor(d+.5),_=Math.floor((p-186721625e-2)/36524.25);_=p+1+_-Math.floor(_/4);var b=_+1524,x=Math.floor((b-122.1)/365.25),E=Math.floor(365.25*x),A=Math.floor((b-E)/30.6001),P=b-E-Math.floor(A*30.6001),D=A-(A>13.5?13:1),R=x-(D>2.5?4716:4715);return R<=0&&R--,this.newDate(R,D,P)},toJSDate:function(d,p,_){var b=this._validate(d,p,_,v.local.invalidDate||v.regionalOptions[""].invalidDate),x=new Date(b.year(),b.month()-1,b.day());return x.setHours(0),x.setMinutes(0),x.setSeconds(0),x.setMilliseconds(0),x.setHours(x.getHours()>12?x.getHours()+2:0),x},fromJSDate:function(d){return this.newDate(d.getFullYear(),d.getMonth()+1,d.getDate())}});var v=i.exports=new s;v.cdate=n,v.baseCalendar=u,v.calendars.gregorian=h},{"object-assign":55}],84:[function(e,i,o){var a=e("object-assign"),s=e("./main");a(s.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),s.local=s.regionalOptions[""],a(s.cdate.prototype,{formatDate:function(n,l){return typeof n!="string"&&(l=n,n=""),this._calendar.formatDate(n||"",this,l)}}),a(s.baseCalendar.prototype,{UNIX_EPOCH:s.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:s.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,l,u){if(typeof n!="string"&&(u=l,l=n,n=""),!l)return"";if(l.calendar()!==this)throw s.local.invalidFormat||s.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat,u=u||{};var h=u.dayNamesShort||this.local.dayNamesShort,v=u.dayNames||this.local.dayNames,d=u.monthNumbers||this.local.monthNumbers,p=u.monthNamesShort||this.local.monthNamesShort,_=u.monthNames||this.local.monthNames;u.calculateWeek||this.local.calculateWeek;for(var b=function(z,U){for(var F=1;M+F<n.length&&n.charAt(M+F)===z;)F++;return M+=F-1,Math.floor(F/(U||1))>1},x=function(z,U,F,V){var j=""+U;if(b(z,V))for(;j.length<F;)j="0"+j;return j},E=function(z,U,F,V){return b(z)?V[U]:F[U]},A=this,P=function(z){return typeof d=="function"?d.call(A,z,b("m")):S(x("m",z.month(),2))},D=function(z,U){return U?typeof _=="function"?_.call(A,z):_[z.month()-A.minMonth]:typeof p=="function"?p.call(A,z):p[z.month()-A.minMonth]},R=this.local.digits,S=function(z){return u.localNumbers&&R?R(z):z},I="",T=!1,M=0;M<n.length;M++)if(T)n.charAt(M)==="'"&&!b("'")?T=!1:I+=n.charAt(M);else switch(n.charAt(M)){case"d":I+=S(x("d",l.day(),2));break;case"D":I+=E("D",l.dayOfWeek(),h,v);break;case"o":I+=x("o",l.dayOfYear(),3);break;case"w":I+=x("w",l.weekOfYear(),2);break;case"m":I+=P(l);break;case"M":I+=D(l,b("M"));break;case"y":I+=b("y",2)?l.year():(l.year()%100<10?"0":"")+l.year()%100;break;case"Y":b("Y",2),I+=l.formatYear();break;case"J":I+=l.toJD();break;case"@":I+=(l.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":I+=(l.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":b("'")?I+="'":T=!0;break;default:I+=n.charAt(M)}return I},parseDate:function(n,l,u){if(l==null)throw s.local.invalidArguments||s.regionalOptions[""].invalidArguments;if(l=typeof l=="object"?l.toString():l+"",l==="")return null;n=n||this.local.dateFormat,u=u||{};var h=u.shortYearCutoff||this.shortYearCutoff;h=typeof h!="string"?h:this.today().year()%100+parseInt(h,10);for(var v=u.dayNamesShort||this.local.dayNamesShort,d=u.dayNames||this.local.dayNames,p=u.parseMonth||this.local.parseMonth,_=u.monthNumbers||this.local.monthNumbers,b=u.monthNamesShort||this.local.monthNamesShort,x=u.monthNames||this.local.monthNames,E=-1,A=-1,P=-1,D=-1,R=-1,S=!1,I=!1,T=function(q,we){for(var ee=1;Y+ee<n.length&&n.charAt(Y+ee)===q;)ee++;return Y+=ee-1,Math.floor(ee/(we||1))>1},M=function(q,we){var ee=T(q,we),X=[2,3,ee?4:2,ee?4:2,10,11,20]["oyYJ@!".indexOf(q)+1],re=new RegExp("^-?\\d{1,"+X+"}"),de=l.substring(H).match(re);if(!de)throw(s.local.missingNumberAt||s.regionalOptions[""].missingNumberAt).replace(/\{0\}/,H);return H+=de[0].length,parseInt(de[0],10)},z=this,U=function(){if(typeof _=="function"){T("m");var q=_.call(z,l.substring(H));return H+=q.length,q}return M("m")},F=function(q,we,ee,X){for(var re=T(q,X)?ee:we,de=0;de<re.length;de++)if(l.substr(H,re[de].length).toLowerCase()===re[de].toLowerCase())return H+=re[de].length,de+z.minMonth;throw(s.local.unknownNameAt||s.regionalOptions[""].unknownNameAt).replace(/\{0\}/,H)},V=function(){if(typeof x=="function"){var q=T("M")?x.call(z,l.substring(H)):b.call(z,l.substring(H));return H+=q.length,q}return F("M",b,x)},j=function(){if(l.charAt(H)!==n.charAt(Y))throw(s.local.unexpectedLiteralAt||s.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,H);H++},H=0,Y=0;Y<n.length;Y++)if(I)n.charAt(Y)==="'"&&!T("'")?I=!1:j();else switch(n.charAt(Y)){case"d":D=M("d");break;case"D":F("D",v,d);break;case"o":R=M("o");break;case"w":M("w");break;case"m":P=U();break;case"M":P=V();break;case"y":var J=Y;S=!T("y",2),Y=J,A=M("y",2);break;case"Y":A=M("Y",2);break;case"J":E=M("J")+.5,l.charAt(H)==="."&&(H++,M("J"));break;case"@":E=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":E=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":H=l.length;break;case"'":T("'")?j():I=!0;break;default:j()}if(H<l.length)throw s.local.unexpectedText||s.regionalOptions[""].unexpectedText;if(A===-1?A=this.today().year():A<100&&S&&(A+=h===-1?1900:this.today().year()-this.today().year()%100-(A<=h?0:100)),typeof P=="string"&&(P=p.call(this,A,P)),R>-1){P=1,D=R;for(var ne=this.daysInMonth(A,P);D>ne;ne=this.daysInMonth(A,P))P++,D-=ne}return E>-1?this.fromJD(E):this.newDate(A,P,D)},determineDate:function(n,l,u,h,v){u&&typeof u!="object"&&(v=h,h=u,u=null),typeof h!="string"&&(v=h,h="");var d=this,p=function(_){try{return d.parseDate(h,_,v)}catch{}_=_.toLowerCase();for(var b=(_.match(/^c/)&&u?u.newDate():null)||d.today(),x=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,E=x.exec(_);E;)b.add(parseInt(E[1],10),E[2]||"d"),E=x.exec(_);return b};return l=l?l.newDate():null,n=n==null?l:typeof n=="string"?p(n):typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?l:d.today().add(n,"d"):d.newDate(n),n}})},{"./main":83,"object-assign":55}],85:[function(e,i,o){i.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],86:[function(e,i,o){var a=e("./arrow_paths"),s=e("../../plots/font_attributes"),n=e("../../plots/cartesian/constants"),l=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),i.exports=l("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:s({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:s({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":220,"../../plot_api/plot_template":280,"../../plots/cartesian/constants":298,"../../plots/font_attributes":319,"./arrow_paths":85}],87:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes"),n=e("./draw").draw;i.exports=function(v){var d=v._fullLayout,p=a.filterVisible(d.annotations);if(p.length&&v._fullData.length)return a.syncOrAsync([n,l],v)};function l(h){var v=h._fullLayout;a.filterVisible(v.annotations).forEach(function(d){var p=s.getFromId(h,d.xref),_=s.getFromId(h,d.yref),b=s.getRefType(d.xref),x=s.getRefType(d.yref);d._extremes={},b==="range"&&u(d,p),x==="range"&&u(d,_)})}function u(h,v){var d=v._id,p=d.charAt(0),_=h[p],b=h["a"+p],x=h[p+"ref"],E=h["a"+p+"ref"],A=h["_"+p+"padplus"],P=h["_"+p+"padminus"],D={x:1,y:-1}[p]*h[p+"shift"],R=3*h.arrowsize*h.arrowwidth||0,S=R+D,I=R-D,T=3*h.startarrowsize*h.arrowwidth||0,M=T+D,z=T-D,U;if(E===x){var F=s.findExtremes(v,[v.r2c(_)],{ppadplus:S,ppadminus:I}),V=s.findExtremes(v,[v.r2c(b)],{ppadplus:Math.max(A,M),ppadminus:Math.max(P,z)});U={min:[F.min[0],V.min[0]],max:[F.max[0],V.max[0]]}}else M=b?M+b:M,z=b?z-b:z,U=s.findExtremes(v,[v.r2c(_)],{ppadplus:Math.max(A,S,M),ppadminus:Math.max(P,I,z)});h._extremes[d]=U}},{"../../lib":244,"../../plots/cartesian/axes":291,"./draw":92}],88:[function(e,i,o){var a=e("../../lib"),s=e("../../registry"),n=e("../../plot_api/plot_template").arrayEditor;i.exports={hasClickToShow:l,onClick:u};function l(d,p){var _=h(d,p);return _.on.length>0||_.explicitOff.length>0}function u(d,p){var _=h(d,p),b=_.on,x=_.off.concat(_.explicitOff),E={},A=d._fullLayout.annotations,P,D;if(!!(b.length||x.length)){for(P=0;P<b.length;P++)D=n(d.layout,"annotations",A[b[P]]),D.modifyItem("visible",!0),a.extendFlat(E,D.getUpdateObj());for(P=0;P<x.length;P++)D=n(d.layout,"annotations",A[x[P]]),D.modifyItem("visible",!1),a.extendFlat(E,D.getUpdateObj());return s.call("update",d,{},E)}}function h(d,p){var _=d._fullLayout.annotations,b=[],x=[],E=[],A=(p||[]).length,P,D,R,S,I,T,M,z;for(P=0;P<_.length;P++)if(R=_[P],S=R.clicktoshow,S){for(D=0;D<A;D++)if(I=p[D],T=I.xaxis,M=I.yaxis,T._id===R.xref&&M._id===R.yref&&T.d2r(I.x)===v(R._xclick,T)&&M.d2r(I.y)===v(R._yclick,M)){R.visible?S==="onout"?z=x:z=E:z=b,z.push(P);break}D===A&&R.visible&&S==="onout"&&x.push(P)}return{on:b,off:x,explicitOff:E}}function v(d,p){return p.type==="log"?p.l2r(d):p.d2r(d)}},{"../../lib":244,"../../plot_api/plot_template":280,"../../registry":327}],89:[function(e,i,o){var a=e("../../lib"),s=e("../color");i.exports=function(l,u,h,v){v("opacity");var d=v("bgcolor"),p=v("bordercolor"),_=s.opacity(p);v("borderpad");var b=v("borderwidth"),x=v("showarrow");v("text",x?" ":h._dfltTitle.annotation),v("textangle"),a.coerceFont(v,"font",h.font),v("width"),v("align");var E=v("height");if(E&&v("valign"),x){var A=v("arrowside"),P,D;A.indexOf("end")!==-1&&(P=v("arrowhead"),D=v("arrowsize")),A.indexOf("start")!==-1&&(v("startarrowhead",P),v("startarrowsize",D)),v("arrowcolor",_?u.bordercolor:s.defaultLine),v("arrowwidth",(_&&b||1)*2),v("standoff"),v("startstandoff")}var R=v("hovertext"),S=h.hoverlabel||{};if(R){var I=v("hoverlabel.bgcolor",S.bgcolor||(s.opacity(d)?s.rgb(d):s.defaultLine)),T=v("hoverlabel.bordercolor",S.bordercolor||s.contrast(I));a.coerceFont(v,"hoverlabel.font",{family:S.font.family,size:S.font.size,color:S.font.color||T})}v("captureevents",!!R)}},{"../../lib":244,"../color":103}],90:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib/to_log_range");i.exports=function(l,u,h,v){u=u||{};var d=h==="log"&&u.type==="linear",p=h==="linear"&&u.type==="log";if(!(d||p))return;var _=l._fullLayout.annotations,b=u._id.charAt(0),x,E;function A(D){var R=x[D],S=null;d?S=s(R,u.range):S=Math.pow(10,R),a(S)||(S=null),v(E+D,S)}for(var P=0;P<_.length;P++)x=_[P],E="annotations["+P+"].",x[b+"ref"]===u._id&&A(b),x["a"+b+"ref"]===u._id&&A("a"+b)}},{"../../lib/to_log_range":269,"fast-isnumeric":17}],91:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes"),n=e("../../plots/array_container_defaults"),l=e("./common_defaults"),u=e("./attributes");i.exports=function(d,p){n(d,p,{name:"annotations",handleItemDefaults:h})};function h(v,d,p){function _(j,H){return a.coerce(v,d,u,j,H)}var b=_("visible"),x=_("clicktoshow");if(!!(b||x)){l(v,d,p,_);for(var E=d.showarrow,A=["x","y"],P=[-10,-30],D={_fullLayout:p},R=0;R<2;R++){var S=A[R],I=s.coerceRef(v,d,D,S,"","paper");if(I!=="paper"){var T=s.getFromId(D,I);T._annIndices.push(d._index)}if(s.coercePosition(d,D,_,I,S,.5),E){var M="a"+S,z=s.coerceRef(v,d,D,M,"pixel",["pixel","paper"]);z!=="pixel"&&z!==I&&(z=d[M]="pixel");var U=z==="pixel"?P[R]:.4;s.coercePosition(d,D,_,z,M,U)}_(S+"anchor"),_(S+"shift")}if(a.noneOrAll(v,d,["x","y"]),E&&a.noneOrAll(v,d,["ax","ay"]),x){var F=_("xclick"),V=_("yclick");d._xclick=F===void 0?d.x:s.cleanPosition(F,D,d.xref),d._yclick=V===void 0?d.y:s.cleanPosition(V,D,d.yref)}}}},{"../../lib":244,"../../plots/array_container_defaults":286,"../../plots/cartesian/axes":291,"./attributes":86,"./common_defaults":89}],92:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../registry"),n=e("../../plots/plots"),l=e("../../lib"),u=l.strTranslate,h=e("../../plots/cartesian/axes"),v=e("../color"),d=e("../drawing"),p=e("../fx"),_=e("../../lib/svg_text_utils"),b=e("../../lib/setcursor"),x=e("../dragelement"),E=e("../../plot_api/plot_template").arrayEditor,A=e("./draw_arrow_head");i.exports={draw:P,drawOne:D,drawRaw:S};function P(I){var T=I._fullLayout;T._infolayer.selectAll(".annotation").remove();for(var M=0;M<T.annotations.length;M++)T.annotations[M].visible&&D(I,M);return n.previousPromises(I)}function D(I,T){var M=I._fullLayout,z=M.annotations[T]||{},U=h.getFromId(I,z.xref),F=h.getFromId(I,z.yref);U&&U.setScale(),F&&F.setScale(),S(I,z,T,!1,U,F)}function R(I,T,M,z,U){var F=U[M],V=U[M+"ref"],j=M.indexOf("y")!==-1,H=h.getRefType(V)==="domain",Y=j?z.h:z.w;return I?H?F+(j?-T:T)/I._length:I.p2r(I.r2p(F)+T):F+(j?-T:T)/Y}function S(I,T,M,z,U,F){var V=I._fullLayout,j=I._fullLayout._size,H=I._context.edits,Y,J;z?(Y="annotation-"+z,J=z+".annotations"):(Y="annotation",J="annotations");var ne=E(I.layout,J,T),q=ne.modifyBase,we=ne.modifyItem,ee=ne.getUpdateObj;V._infolayer.selectAll("."+Y+'[data-index="'+M+'"]').remove();var X="clip"+V._uid+"_ann"+M;if(!T._input||T.visible===!1){a.selectAll("#"+X).remove();return}var re={x:{},y:{}},de=+T.textangle||0,me=V._infolayer.append("g").classed(Y,!0).attr("data-index",String(M)).style("opacity",T.opacity),xe=me.append("g").classed("annotation-text-g",!0),He=H[T.showarrow?"annotationTail":"annotationPosition"],Re=T.captureevents||H.annotationText||He;function Ee(_e){var je={index:M,annotation:T._input,fullAnnotation:T,event:_e};return z&&(je.subplotId=z),je}var ke=xe.append("g").style("pointer-events",Re?"all":null).call(b,"pointer").on("click",function(){I._dragging=!1,I.emit("plotly_clickannotation",Ee(a.event))});T.hovertext&&ke.on("mouseover",function(){var _e=T.hoverlabel,je=_e.font,Je=this.getBoundingClientRect(),nt=I.getBoundingClientRect();p.loneHover({x0:Je.left-nt.left,x1:Je.right-nt.left,y:(Je.top+Je.bottom)/2-nt.top,text:T.hovertext,color:_e.bgcolor,borderColor:_e.bordercolor,fontFamily:je.family,fontSize:je.size,fontColor:je.color},{container:V._hoverlayer.node(),outerContainer:V._paper.node(),gd:I})}).on("mouseout",function(){p.loneUnhover(V._hoverlayer.node())});var $=T.borderwidth,le=T.borderpad,K=$+le,te=ke.append("rect").attr("class","bg").style("stroke-width",$+"px").call(v.stroke,T.bordercolor).call(v.fill,T.bgcolor),ie=T.width||T.height,ce=V._topclips.selectAll("#"+X).data(ie?[0]:[]);ce.enter().append("clipPath").classed("annclip",!0).attr("id",X).append("rect"),ce.exit().remove();var ae=T.font,ve=V._meta?l.templateString(T.text,V._meta):T.text,pe=ke.append("text").classed("annotation-text",!0).text(ve);function he(_e){return _e.call(d.font,ae).attr({"text-anchor":{left:"start",right:"end"}[T.align]||"middle"}),_.convertToTspans(_e,I,ye),_e}function ye(){var _e=pe.selectAll("a");if(_e.size()===1&&_e.text()===pe.text()){var je=ke.insert("a",":first-child").attr({"xlink:xlink:href":_e.attr("xlink:href"),"xlink:xlink:show":_e.attr("xlink:show")}).style({cursor:"pointer"});je.node().appendChild(te.node())}var Je=ke.select(".annotation-text-math-group"),nt=!Je.empty(),at=d.bBox((nt?Je:pe).node()),Fe=at.width,Ie=at.height,Ke=T.width||Fe,Qe=T.height||Ie,it=Math.round(Ke+2*K),Ne=Math.round(Qe+2*K);function ht(vt,pr){return pr==="auto"&&(vt<1/3?pr="left":vt>2/3?pr="right":pr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[pr]}for(var Tt=!1,Xt=["x","y"],Nt=0;Nt<Xt.length;Nt++){var Mt=Xt[Nt],Vt=T[Mt+"ref"]||Mt,Yt=T["a"+Mt+"ref"],cr={x:U,y:F}[Mt],Nr=(de+(Mt==="x"?0:-90))*Math.PI/180,er=it*Math.cos(Nr),Wt=Ne*Math.sin(Nr),dr=Math.abs(er)+Math.abs(Wt),zr=T[Mt+"anchor"],Dr=T[Mt+"shift"]*(Mt==="x"?1:-1),$e=re[Mt],pt,kt,Me,rt,st,ft=h.getRefType(Vt);if(cr&&ft!=="domain"){var zt=cr.r2fraction(T[Mt]);(zt<0||zt>1)&&(Yt===Vt?(zt=cr.r2fraction(T["a"+Mt]),(zt<0||zt>1)&&(Tt=!0)):Tt=!0),pt=cr._offset+cr.r2p(T[Mt]),rt=.5}else{var Ue=ft==="domain";Mt==="x"?(Me=T[Mt],pt=Ue?cr._offset+cr._length*Me:pt=j.l+j.w*Me):(Me=1-T[Mt],pt=Ue?cr._offset+cr._length*Me:pt=j.t+j.h*Me),rt=T.showarrow?.5:Me}if(T.showarrow){$e.head=pt;var Ae=T["a"+Mt];if(st=er*ht(.5,T.xanchor)-Wt*ht(.5,T.yanchor),Yt===Vt){var Oe=h.getRefType(Yt);Oe==="domain"?(Mt==="y"&&(Ae=1-Ae),$e.tail=cr._offset+cr._length*Ae):Oe==="paper"?Mt==="y"?(Ae=1-Ae,$e.tail=j.t+j.h*Ae):$e.tail=j.l+j.w*Ae:$e.tail=cr._offset+cr.r2p(Ae),kt=st}else $e.tail=pt+Ae,kt=st+Ae;$e.text=$e.tail+st;var We=V[Mt==="x"?"width":"height"];if(Vt==="paper"&&($e.head=l.constrain($e.head,1,We-1)),Yt==="pixel"){var Ve=-Math.max($e.tail-3,$e.text),lt=Math.min($e.tail+3,$e.text)-We;Ve>0?($e.tail+=Ve,$e.text+=Ve):lt>0&&($e.tail-=lt,$e.text-=lt)}$e.tail+=Dr,$e.head+=Dr}else st=dr*ht(rt,zr),kt=st,$e.text=pt+st;$e.text+=Dr,st+=Dr,kt+=Dr,T["_"+Mt+"padplus"]=dr/2+kt,T["_"+Mt+"padminus"]=dr/2-kt,T["_"+Mt+"size"]=dr,T["_"+Mt+"shift"]=st}if(Tt){ke.remove();return}var mt=0,dt=0;if(T.align!=="left"&&(mt=(Ke-Fe)*(T.align==="center"?.5:1)),T.valign!=="top"&&(dt=(Qe-Ie)*(T.valign==="middle"?.5:1)),nt)Je.select("svg").attr({x:K+mt-1,y:K+dt}).call(d.setClipUrl,ie?X:null,I);else{var At=K+dt-at.top,Bt=K+mt-at.left;pe.call(_.positionText,Bt,At).call(d.setClipUrl,ie?X:null,I)}ce.select("rect").call(d.setRect,K,K,Ke,Qe),te.call(d.setRect,$/2,$/2,it-$,Ne-$),ke.call(d.setTranslate,Math.round(re.x.text-it/2),Math.round(re.y.text-Ne/2)),xe.attr({transform:"rotate("+de+","+re.x.text+","+re.y.text+")"});var ir=function(vt,pr){me.selectAll(".annotation-arrow-g").remove();var Gt=re.x.head,Mr=re.y.head,Rr=re.x.tail+vt,Yr=re.y.tail+pr,Kr=re.x.text+vt,vr=re.y.text+pr,Xr=l.rotationXYMatrix(de,Kr,vr),$r=l.apply2DTransform(Xr),Le=l.apply2DTransform2(Xr),De=+te.attr("width"),bt=+te.attr("height"),xt=Kr-.5*De,Ct=xt+De,Rt=vr-.5*bt,Lt=Rt+bt,Pt=[[xt,Rt,xt,Lt],[xt,Lt,Ct,Lt],[Ct,Lt,Ct,Rt],[Ct,Rt,xt,Rt]].map(Le);if(!Pt.reduce(function(Gr,qr){return Gr^!!l.segmentsIntersect(Gt,Mr,Gt+1e6,Mr+1e6,qr[0],qr[1],qr[2],qr[3])},!1)){Pt.forEach(function(Gr){var qr=l.segmentsIntersect(Rr,Yr,Gt,Mr,Gr[0],Gr[1],Gr[2],Gr[3]);qr&&(Rr=qr.x,Yr=qr.y)});var nr=T.arrowwidth,Tr=T.arrowcolor,gr=T.arrowside,$t=me.append("g").style({opacity:v.opacity(Tr)}).classed("annotation-arrow-g",!0),mr=$t.append("path").attr("d","M"+Rr+","+Yr+"L"+Gt+","+Mr).style("stroke-width",nr+"px").call(v.stroke,v.rgb(Tr));if(A(mr,gr,T),H.annotationPosition&&mr.node().parentNode&&!z){var Pr=Gt,wr=Mr;if(T.standoff){var fr=Math.sqrt(Math.pow(Gt-Rr,2)+Math.pow(Mr-Yr,2));Pr+=T.standoff*(Rr-Gt)/fr,wr+=T.standoff*(Yr-Mr)/fr}var Ir=$t.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Rr-Pr)+","+(Yr-wr),transform:u(Pr,wr)}).style("stroke-width",nr+6+"px").call(v.stroke,"rgba(0,0,0,0)").call(v.fill,"rgba(0,0,0,0)"),Vr,_r;x.init({element:Ir.node(),gd:I,prepFn:function(){var Gr=d.getTranslate(ke);Vr=Gr.x,_r=Gr.y,U&&U.autorange&&q(U._name+".autorange",!0),F&&F.autorange&&q(F._name+".autorange",!0)},moveFn:function(Gr,qr){var tn=$r(Vr,_r),Ur=tn[0]+Gr,Sn=tn[1]+qr;ke.call(d.setTranslate,Ur,Sn),we("x",R(U,Gr,"x",j,T)),we("y",R(F,qr,"y",j,T)),T.axref===T.xref&&we("ax",R(U,Gr,"ax",j,T)),T.ayref===T.yref&&we("ay",R(F,qr,"ay",j,T)),$t.attr("transform",u(Gr,qr)),xe.attr({transform:"rotate("+de+","+Ur+","+Sn+")"})},doneFn:function(){s.call("_guiRelayout",I,ee());var Gr=document.querySelector(".js-notes-box-panel");Gr&&Gr.redraw(Gr.selectedObj)}})}}};if(T.showarrow&&ir(0,0),He){var tr;x.init({element:ke.node(),gd:I,prepFn:function(){tr=xe.attr("transform")},moveFn:function(vt,pr){var Gt="pointer";if(T.showarrow)T.axref===T.xref?we("ax",R(U,vt,"ax",j,T)):we("ax",T.ax+vt),T.ayref===T.yref?we("ay",R(F,pr,"ay",j.w,T)):we("ay",T.ay+pr),ir(vt,pr);else{if(z)return;var Mr,Rr;if(U)Mr=R(U,vt,"x",j,T);else{var Yr=T._xsize/j.w,Kr=T.x+(T._xshift-T.xshift)/j.w-Yr/2;Mr=x.align(Kr+vt/j.w,Yr,0,1,T.xanchor)}if(F)Rr=R(F,pr,"y",j,T);else{var vr=T._ysize/j.h,Xr=T.y-(T._yshift+T.yshift)/j.h-vr/2;Rr=x.align(Xr-pr/j.h,vr,0,1,T.yanchor)}we("x",Mr),we("y",Rr),(!U||!F)&&(Gt=x.getCursor(U?.5:Mr,F?.5:Rr,T.xanchor,T.yanchor))}xe.attr({transform:u(vt,pr)+tr}),b(ke,Gt)},clickFn:function(vt,pr){T.captureevents&&I.emit("plotly_clickannotation",Ee(pr))},doneFn:function(){b(ke),s.call("_guiRelayout",I,ee());var vt=document.querySelector(".js-notes-box-panel");vt&&vt.redraw(vt.selectedObj)}})}}H.annotationText?pe.call(_.makeEditable,{delegate:ke,gd:I}).call(he).on("edit",function(_e){T.text=_e,this.call(he),we("text",_e),U&&U.autorange&&q(U._name+".autorange",!0),F&&F.autorange&&q(F._name+".autorange",!0),s.call("_guiRelayout",I,ee())}):pe.call(he)}},{"../../lib":244,"../../lib/setcursor":264,"../../lib/svg_text_utils":267,"../../plot_api/plot_template":280,"../../plots/cartesian/axes":291,"../../plots/plots":325,"../../registry":327,"../color":103,"../dragelement":122,"../drawing":125,"../fx":143,"./draw_arrow_head":93,"@plotly/d3":11}],93:[function(e,i,o){var a=e("@plotly/d3"),s=e("../color"),n=e("./arrow_paths"),l=e("../../lib"),u=l.strScale,h=l.strRotate,v=l.strTranslate;i.exports=function(p,_,b){var x=p.node(),E=n[b.arrowhead||0],A=n[b.startarrowhead||0],P=(b.arrowwidth||1)*(b.arrowsize||1),D=(b.arrowwidth||1)*(b.startarrowsize||1),R=_.indexOf("start")>=0,S=_.indexOf("end")>=0,I=E.backoff*P+b.standoff,T=A.backoff*D+b.startstandoff,M,z,U,F;if(x.nodeName==="line"){M={x:+p.attr("x1"),y:+p.attr("y1")},z={x:+p.attr("x2"),y:+p.attr("y2")};var V=M.x-z.x,j=M.y-z.y;if(U=Math.atan2(j,V),F=U+Math.PI,I&&T&&I+T>Math.sqrt(V*V+j*j)){xe();return}if(I){if(I*I>V*V+j*j){xe();return}var H=I*Math.cos(U),Y=I*Math.sin(U);z.x+=H,z.y+=Y,p.attr({x2:z.x,y2:z.y})}if(T){if(T*T>V*V+j*j){xe();return}var J=T*Math.cos(U),ne=T*Math.sin(U);M.x-=J,M.y-=ne,p.attr({x1:M.x,y1:M.y})}}else if(x.nodeName==="path"){var q=x.getTotalLength(),we="";if(q<I+T){xe();return}var ee=x.getPointAtLength(0),X=x.getPointAtLength(.1);U=Math.atan2(ee.y-X.y,ee.x-X.x),M=x.getPointAtLength(Math.min(T,q)),we="0px,"+T+"px,";var re=x.getPointAtLength(q),de=x.getPointAtLength(q-.1);F=Math.atan2(re.y-de.y,re.x-de.x),z=x.getPointAtLength(Math.max(0,q-I));var me=we?T+I:I;we+=q-me+"px,"+q+"px",p.style("stroke-dasharray",we)}function xe(){p.style("stroke-dasharray","0px,100px")}function He(Re,Ee,ke,$){!Re.path||(Re.noRotate&&(ke=0),a.select(x.parentNode).append("path").attr({class:p.attr("class"),d:Re.path,transform:v(Ee.x,Ee.y)+h(ke*180/Math.PI)+u($)}).style({fill:s.rgb(b.arrowcolor),"stroke-width":0}))}R&&He(A,M,U,D),S&&He(E,z,F,P)}},{"../../lib":244,"../color":103,"./arrow_paths":85,"@plotly/d3":11}],94:[function(e,i,o){var a=e("./draw"),s=e("./click");i.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne,drawRaw:a.drawRaw,hasClickToShow:s.hasClickToShow,onClick:s.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":302,"./attributes":86,"./calc_autorange":87,"./click":88,"./convert_coords":90,"./defaults":91,"./draw":92}],95:[function(e,i,o){var a=e("../annotations/attributes"),s=e("../../plot_api/edit_types").overrideAll,n=e("../../plot_api/plot_template").templatedArray;i.exports=s(n("annotation",{visible:a.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:a.xanchor,xshift:a.xshift,yanchor:a.yanchor,yshift:a.yshift,text:a.text,textangle:a.textangle,font:a.font,width:a.width,height:a.height,opacity:a.opacity,align:a.align,valign:a.valign,bgcolor:a.bgcolor,bordercolor:a.bordercolor,borderpad:a.borderpad,borderwidth:a.borderwidth,showarrow:a.showarrow,arrowcolor:a.arrowcolor,arrowhead:a.arrowhead,startarrowhead:a.startarrowhead,arrowside:a.arrowside,arrowsize:a.arrowsize,startarrowsize:a.startarrowsize,arrowwidth:a.arrowwidth,standoff:a.standoff,startstandoff:a.startstandoff,hovertext:a.hovertext,hoverlabel:a.hoverlabel,captureevents:a.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":273,"../../plot_api/plot_template":280,"../annotations/attributes":86}],96:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes");i.exports=function(u){for(var h=u.fullSceneLayout,v=h.annotations,d=0;d<v.length;d++)n(v[d],u);u.fullLayout._infolayer.selectAll(".annotation-"+u.id).remove()};function n(l,u){var h=u.fullSceneLayout,v=h.domain,d=u.fullLayout._size,p={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};l._xa={},a.extendFlat(l._xa,p),s.setConvert(l._xa),l._xa._offset=d.l+v.x[0]*d.w,l._xa.l2p=function(){return .5*(1+l._pdata[0]/l._pdata[3])*d.w*(v.x[1]-v.x[0])},l._ya={},a.extendFlat(l._ya,p),s.setConvert(l._ya),l._ya._offset=d.t+(1-v.y[1])*d.h,l._ya.l2p=function(){return .5*(1-l._pdata[1]/l._pdata[3])*d.h*(v.y[1]-v.y[0])}}},{"../../lib":244,"../../plots/cartesian/axes":291}],97:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes"),n=e("../../plots/array_container_defaults"),l=e("../annotations/common_defaults"),u=e("./attributes");i.exports=function(d,p,_){n(d,p,{name:"annotations",handleItemDefaults:h,fullLayout:_.fullLayout})};function h(v,d,p,_){function b(A,P){return a.coerce(v,d,u,A,P)}function x(A){var P=A+"axis",D={_fullLayout:{}};return D._fullLayout[P]=p[P],s.coercePosition(d,D,b,A,A,.5)}var E=b("visible");!E||(l(v,d,_.fullLayout,b),x("x"),x("y"),x("z"),a.noneOrAll(v,d,["x","y","z"]),d.xref="x",d.yref="y",d.zref="z",b("xanchor"),b("yanchor"),b("xshift"),b("yshift"),d.showarrow&&(d.axref="pixel",d.ayref="pixel",b("ax",-10),b("ay",-30),a.noneOrAll(v,d,["ax","ay"])))}},{"../../lib":244,"../../plots/array_container_defaults":286,"../../plots/cartesian/axes":291,"../annotations/common_defaults":89,"./attributes":95}],98:[function(e,i,o){var a=e("../annotations/draw").drawRaw,s=e("../../plots/gl3d/project"),n=["x","y","z"];i.exports=function(u){for(var h=u.fullSceneLayout,v=u.dataScale,d=h.annotations,p=0;p<d.length;p++){for(var _=d[p],b=!1,x=0;x<3;x++){var E=n[x],A=_[E],P=h[E+"axis"],D=P.r2fraction(A);if(D<0||D>1){b=!0;break}}b?u.fullLayout._infolayer.select(".annotation-"+u.id+'[data-index="'+p+'"]').remove():(_._pdata=s(u.glplot.cameraParams,[h.xaxis.r2l(_.x)*v[0],h.yaxis.r2l(_.y)*v[1],h.zaxis.r2l(_.z)*v[2]]),a(u.graphDiv,_,p,u.id,_._xa,_._ya))}}},{"../../plots/gl3d/project":322,"../annotations/draw":92}],99:[function(e,i,o){var a=e("../../registry"),s=e("../../lib");i.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:n,convert:e("./convert"),draw:e("./draw")};function n(l,u){var h=a.subplotsRegistry.gl3d;if(!!h)for(var v=h.attrRegex,d=Object.keys(l),p=0;p<d.length;p++){var _=d[p];v.test(_)&&(l[_].annotations||[]).length&&(s.pushUnique(u._basePlotModules,h),s.pushUnique(u._subplots.gl3d,_))}}},{"../../lib":244,"../../registry":327,"./attributes":95,"./convert":96,"./defaults":97,"./draw":98}],100:[function(e,i,o){i.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":69,"world-calendars/dist/calendars/coptic":70,"world-calendars/dist/calendars/discworld":71,"world-calendars/dist/calendars/ethiopian":72,"world-calendars/dist/calendars/hebrew":73,"world-calendars/dist/calendars/islamic":74,"world-calendars/dist/calendars/julian":75,"world-calendars/dist/calendars/mayan":76,"world-calendars/dist/calendars/nanakshahi":77,"world-calendars/dist/calendars/nepali":78,"world-calendars/dist/calendars/persian":79,"world-calendars/dist/calendars/taiwan":80,"world-calendars/dist/calendars/thai":81,"world-calendars/dist/calendars/ummalqura":82,"world-calendars/dist/main":83,"world-calendars/dist/plus":84}],101:[function(e,i,o){var a=e("./calendars"),s=e("../../lib"),n=e("../../constants/numerical"),l=n.EPOCHJD,u=n.ONEDAY,h={valType:"enumerated",values:s.sortObjectKeys(a.calendars),editType:"calc",dflt:"gregorian"},v=function(U,F,V,j){var H={};return H[V]=h,s.coerce(U,F,H,V,j)},d=function(U,F,V,j){for(var H=0;H<V.length;H++)v(U,F,V[H]+"calendar",j.calendar)},p={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},_={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},b={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},x="##",E={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:x,w:x,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function A(U,F,V){for(var j=Math.floor((F+.05)/u)+l,H=D(V).fromJD(j),Y=0,J,ne,q,we,ee;(Y=U.indexOf("%",Y))!==-1;)J=U.charAt(Y+1),J==="0"||J==="-"||J==="_"?(q=3,ne=U.charAt(Y+2),J==="_"&&(J="-")):(ne=J,J="0",q=2),we=E[ne],we?(we===x?ee=x:ee=H.formatDate(we[J]),U=U.substr(0,Y)+ee+U.substr(Y+q),Y+=ee.length):Y+=q;return U}var P={};function D(U){var F=P[U];return F||(F=P[U]=a.instance(U),F)}function R(U){return s.extendFlat({},h,{description:U})}function S(U){return"Sets the calendar system to use with `"+U+"` date data."}var I={xcalendar:R(S("x"))},T=s.extendFlat({},I,{ycalendar:R(S("y"))}),M=s.extendFlat({},T,{zcalendar:R(S("z"))}),z=R(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));i.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:T,bar:T,box:T,heatmap:T,contour:T,histogram:T,histogram2d:T,histogram2dcontour:T,scatter3d:M,surface:M,mesh3d:M,scattergl:T,ohlc:I,candlestick:I},layout:{calendar:R(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:z},yaxis:{calendar:z},scene:{xaxis:{calendar:z},yaxis:{calendar:z},zaxis:{calendar:z}},polar:{radialaxis:{calendar:z}}},transforms:{filter:{valuecalendar:R(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:R(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:h,handleDefaults:v,handleTraceDefaults:d,CANONICAL_SUNDAY:_,CANONICAL_TICK:p,DFLTRANGE:b,getCal:D,worldCalFmt:A}},{"../../constants/numerical":224,"../../lib":244,"./calendars":100}],102:[function(e,i,o){o.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],o.defaultLine="#444",o.lightLine="#eee",o.background="#fff",o.borderLine="#BEC8D9",o.lightFraction=100*(14-4)/(15-4)},{}],103:[function(e,i,o){var a=e("tinycolor2"),s=e("fast-isnumeric"),n=e("../../lib/array").isTypedArray,l=i.exports={},u=e("./attributes");l.defaults=u.defaults;var h=l.defaultLine=u.defaultLine;l.lightLine=u.lightLine;var v=l.background=u.background;l.tinyRGB=function(p){var _=p.toRgb();return"rgb("+Math.round(_.r)+", "+Math.round(_.g)+", "+Math.round(_.b)+")"},l.rgb=function(p){return l.tinyRGB(a(p))},l.opacity=function(p){return p?a(p).getAlpha():0},l.addOpacity=function(p,_){var b=a(p).toRgb();return"rgba("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+", "+_+")"},l.combine=function(p,_){var b=a(p).toRgb();if(b.a===1)return a(p).toRgbString();var x=a(_||v).toRgb(),E=x.a===1?x:{r:255*(1-x.a)+x.r*x.a,g:255*(1-x.a)+x.g*x.a,b:255*(1-x.a)+x.b*x.a},A={r:E.r*(1-b.a)+b.r*b.a,g:E.g*(1-b.a)+b.g*b.a,b:E.b*(1-b.a)+b.b*b.a};return a(A).toRgbString()},l.contrast=function(p,_,b){var x=a(p);x.getAlpha()!==1&&(x=a(l.combine(p,v)));var E=x.isDark()?_?x.lighten(_):v:b?x.darken(b):h;return E.toString()},l.stroke=function(p,_){var b=a(_);p.style({stroke:l.tinyRGB(b),"stroke-opacity":b.getAlpha()})},l.fill=function(p,_){var b=a(_);p.style({fill:l.tinyRGB(b),"fill-opacity":b.getAlpha()})},l.clean=function(p){if(!(!p||typeof p!="object")){var _=Object.keys(p),b,x,E,A;for(b=0;b<_.length;b++)if(E=_[b],A=p[E],E.substr(E.length-5)==="color")if(Array.isArray(A))for(x=0;x<A.length;x++)A[x]=d(A[x]);else p[E]=d(A);else if(E.substr(E.length-10)==="colorscale"&&Array.isArray(A))for(x=0;x<A.length;x++)Array.isArray(A[x])&&(A[x][1]=d(A[x][1]));else if(Array.isArray(A)){var P=A[0];if(!Array.isArray(P)&&P&&typeof P=="object")for(x=0;x<A.length;x++)l.clean(A[x])}else A&&typeof A=="object"&&!n(A)&&l.clean(A)}};function d(p){if(s(p)||typeof p!="string")return p;var _=p.trim();if(_.substr(0,3)!=="rgb")return p;var b=_.match(/^rgba?\s*\(([^()]*)\)$/);if(!b)return p;var x=b[1].trim().split(/\s*[\s,]\s*/),E=_.charAt(3)==="a"&&x.length===4;if(!E&&x.length!==3)return p;for(var A=0;A<x.length;A++){if(!x[A].length||(x[A]=Number(x[A]),!(x[A]>=0)))return p;if(A===3)x[A]>1&&(x[A]=1);else if(x[A]>=1)return p}var P=Math.round(x[0]*255)+", "+Math.round(x[1]*255)+", "+Math.round(x[2]*255);return E?"rgba("+P+", "+x[3]+")":"rgb("+P+")"}},{"../../lib/array":230,"./attributes":102,"fast-isnumeric":17,tinycolor2:68}],104:[function(e,i,o){var a=e("../../plots/cartesian/layout_attributes"),s=e("../../plots/font_attributes"),n=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll;i.exports=l({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:a.linecolor,outlinewidth:a.linewidth,bordercolor:a.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:n({},a.ticks,{dflt:""}),ticklabeloverflow:n({},a.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,tickfont:s({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,title:{text:{valType:"string"},font:s({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:s({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":238,"../../plot_api/edit_types":273,"../../plots/cartesian/layout_attributes":304,"../../plots/font_attributes":319}],105:[function(e,i,o){i.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],106:[function(e,i,o){var a=e("../../lib"),s=e("../../plot_api/plot_template"),n=e("../../plots/cartesian/tick_value_defaults"),l=e("../../plots/cartesian/tick_mark_defaults"),u=e("../../plots/cartesian/tick_label_defaults"),h=e("../../plots/cartesian/prefix_suffix_defaults"),v=e("./attributes");i.exports=function(p,_,b){var x=s.newContainer(_,"colorbar"),E=p.colorbar||{};function A(H,Y){return a.coerce(E,x,v,H,Y)}var P=b.margin||{t:0,b:0,l:0,r:0},D=b.width-P.l-P.r,R=b.height-P.t-P.b,S=A("orientation"),I=S==="v",T=A("thicknessmode");A("thickness",T==="fraction"?30/(I?D:R):30);var M=A("lenmode");A("len",M==="fraction"?1:I?R:D),A("x",I?1.02:.5),A("xanchor",I?"left":"center"),A("xpad"),A("y",I?.5:1.02),A("yanchor",I?"middle":"bottom"),A("ypad"),a.noneOrAll(E,x,["x","y"]),A("outlinecolor"),A("outlinewidth"),A("bordercolor"),A("borderwidth"),A("bgcolor");var z=a.coerce(E,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");A("ticklabeloverflow",z.indexOf("inside")!==-1?"hide past domain":"hide past div"),n(E,x,A,"linear");var U=b.font,F={outerTicks:!1,font:U};z.indexOf("inside")!==-1&&(F.bgColor="black"),h(E,x,A,"linear",F),u(E,x,A,"linear",F),l(E,x,A,"linear",F),A("title.text",b._dfltTitle.colorbar);var V=x.tickfont,j=a.extendFlat({},V,{color:U.color,size:a.bigFont(V.size)});a.coerceFont(A,"title.font",j),A("title.side",I?"top":"right")}},{"../../lib":244,"../../plot_api/plot_template":280,"../../plots/cartesian/prefix_suffix_defaults":308,"../../plots/cartesian/tick_label_defaults":312,"../../plots/cartesian/tick_mark_defaults":313,"../../plots/cartesian/tick_value_defaults":314,"./attributes":104}],107:[function(e,i,o){var a=e("@plotly/d3"),s=e("tinycolor2"),n=e("../../plots/plots"),l=e("../../registry"),u=e("../../plots/cartesian/axes"),h=e("../dragelement"),v=e("../../lib"),d=v.strTranslate,p=e("../../lib/extend").extendFlat,_=e("../../lib/setcursor"),b=e("../drawing"),x=e("../color"),E=e("../titles"),A=e("../../lib/svg_text_utils"),P=e("../colorscale/helpers").flipScale,D=e("../../plots/cartesian/axis_defaults"),R=e("../../plots/cartesian/position_defaults"),S=e("../../plots/cartesian/layout_attributes"),I=e("../../constants/alignment"),T=I.LINE_SPACING,M=I.FROM_TL,z=I.FROM_BR,U=e("./constants").cn;function F(ne){var q=ne._fullLayout,we=q._infolayer.selectAll("g."+U.colorbar).data(V(ne),function(ee){return ee._id});we.enter().append("g").attr("class",function(ee){return ee._id}).classed(U.colorbar,!0),we.each(function(ee){var X=a.select(this);v.ensureSingle(X,"rect",U.cbbg),v.ensureSingle(X,"g",U.cbfills),v.ensureSingle(X,"g",U.cblines),v.ensureSingle(X,"g",U.cbaxis,function(de){de.classed(U.crisp,!0)}),v.ensureSingle(X,"g",U.cbtitleunshift,function(de){de.append("g").classed(U.cbtitle,!0)}),v.ensureSingle(X,"rect",U.cboutline);var re=j(X,ee,ne);re&&re.then&&(ne._promises||[]).push(re),ne._context.edits.colorbarPosition&&H(X,ee,ne)}),we.exit().each(function(ee){n.autoMargin(ne,ee._id)}).remove(),we.order()}function V(ne){var q=ne._fullLayout,we=ne.calcdata,ee=[],X,re,de,me;function xe(ae){return p(ae,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function He(){typeof me.calc=="function"?me.calc(ne,de,X):(X._fillgradient=re.reversescale?P(re.colorscale):re.colorscale,X._zrange=[re[me.min],re[me.max]])}for(var Re=0;Re<we.length;Re++){var Ee=we[Re];de=Ee[0].trace;var ke=de._module.colorbar;if(de.visible===!0&&ke)for(var $=Array.isArray(ke),le=$?ke:[ke],K=0;K<le.length;K++){me=le[K];var te=me.container;re=te?de[te]:de,re&&re.showscale&&(X=xe(re.colorbar),X._id="cb"+de.uid+($&&te?"-"+te:""),X._traceIndex=de.index,X._propPrefix=(te?te+".":"")+"colorbar.",X._meta=de._meta,He(),ee.push(X))}}for(var ie in q._colorAxes)if(re=q[ie],re.showscale){var ce=q._colorAxes[ie];X=xe(re.colorbar),X._id="cb"+ie,X._propPrefix=ie+".colorbar.",X._meta=q._meta,me={min:"cmin",max:"cmax"},ce[0]!=="heatmap"&&(de=ce[1],me.calc=de._module.colorbar.calc),He(),ee.push(X)}return ee}function j(ne,q,we){var ee=q.orientation==="v",X=q.len,re=q.lenmode,de=q.thickness,me=q.thicknessmode,xe=q.outlinewidth,He=q.borderwidth,Re=q.bgcolor,Ee=q.xanchor,ke=q.yanchor,$=q.xpad,le=q.ypad,K=q.x,te=ee?q.y:1-q.y,ie=we._fullLayout,ce=ie._size,ae=q._fillcolor,ve=q._line,pe=q.title,he=pe.side,ye=q._zrange||a.extent((typeof ae=="function"?ae:ve.color).domain()),_e=typeof ve.color=="function"?ve.color:function(){return ve.color},je=typeof ae=="function"?ae:function(){return ae},Je=q._levels,nt=Y(we,q,ye),at=nt.fill,Fe=nt.line,Ie=Math.round(de*(me==="fraction"?ee?ce.w:ce.h:1)),Ke=Ie/(ee?ce.w:ce.h),Qe=Math.round(X*(re==="fraction"?ee?ce.h:ce.w:1)),it=Qe/(ee?ce.h:ce.w),Ne=Math.round(ee?K*ce.w+$:te*ce.h+le),ht={center:.5,right:1}[Ee]||0,Tt={top:1,middle:.5}[ke]||0,Xt=ee?K-ht*Ke:te-Tt*Ke,Nt=ee?te-Tt*it:K-ht*it,Mt=Math.round(ee?ce.h*(1-Nt):ce.w*Nt);q._lenFrac=it,q._thickFrac=Ke,q._uFrac=Xt,q._vFrac=Nt;var Vt=q._axis=J(we,q,ye);Vt.position=Ke+(ee?K+$/ce.w:te+le/ce.h);var Yt=["top","bottom"].indexOf(he)!==-1;if(ee&&Yt&&(Vt.title.side=he,Vt.titlex=K+$/ce.w,Vt.titley=Nt+(pe.side==="top"?it-le/ce.h:le/ce.h)),!ee&&!Yt&&(Vt.title.side=he,Vt.titley=te+le/ce.h,Vt.titlex=Nt+$/ce.w),ve.color&&q.tickmode==="auto"){Vt.tickmode="linear",Vt.tick0=Je.start;var cr=Je.size,Nr=v.constrain(Qe/50,4,15)+1,er=(ye[1]-ye[0])/((q.nticks||Nr)*cr);if(er>1){var Wt=Math.pow(10,Math.floor(Math.log(er)/Math.LN10));cr*=Wt*v.roundUp(er/Wt,[2,5,10]),(Math.abs(Je.start)/Je.size+1e-6)%1<2e-6&&(Vt.tick0=0)}Vt.dtick=cr}Vt.domain=ee?[Nt+le/ce.h,Nt+it-le/ce.h]:[Nt+$/ce.w,Nt+it-$/ce.w],Vt.setScale(),ne.attr("transform",d(Math.round(ce.l),Math.round(ce.t)));var dr=ne.select("."+U.cbtitleunshift).attr("transform",d(-Math.round(ce.l),-Math.round(ce.t))),zr=Vt.ticklabelposition,Dr=Vt.title.font.size,$e=ne.select("."+U.cbaxis),pt,kt=0,Me=0;function rt(Ae,Oe){var We={propContainer:Vt,propName:q._propPrefix+"title",traceIndex:q._traceIndex,_meta:q._meta,placeholder:ie._dfltTitle.colorbar,containerGroup:ne.select("."+U.cbtitle)},Ve=Ae.charAt(0)==="h"?Ae.substr(1):"h"+Ae;ne.selectAll("."+Ve+",."+Ve+"-math-group").remove(),E.draw(we,Ae,p(We,Oe||{}))}function st(){if(ee&&Yt||!ee&&!Yt){var Ae,Oe;he==="top"&&(Ae=$+ce.l+ce.w*K,Oe=le+ce.t+ce.h*(1-Nt-it)+3+Dr*.75),he==="bottom"&&(Ae=$+ce.l+ce.w*K,Oe=le+ce.t+ce.h*(1-Nt)-3-Dr*.25),he==="right"&&(Oe=le+ce.t+ce.h*te+3+Dr*.75,Ae=$+ce.l+ce.w*Nt),rt(Vt._id+"title",{attributes:{x:Ae,y:Oe,"text-anchor":ee?"start":"middle"}})}}function ft(){if(ee&&!Yt||!ee&&Yt){var Ae=Vt.position||0,Oe=Vt._offset+Vt._length/2,We,Ve;if(he==="right")Ve=Oe,We=ce.l+ce.w*Ae+10+Dr*(Vt.showticklabels?1:.5);else if(We=Oe,he==="bottom"&&(Ve=ce.t+ce.h*Ae+10+(zr.indexOf("inside")===-1?Vt.tickfont.size:0)+(Vt.ticks!=="intside"&&q.ticklen||0)),he==="top"){var lt=pe.text.split("<br>").length;Ve=ce.t+ce.h*Ae+10-Ie-T*Dr*lt}rt((ee?"h":"v")+Vt._id+"title",{avoid:{selection:a.select(we).selectAll("g."+Vt._id+"tick"),side:he,offsetTop:ee?0:ce.t,offsetLeft:ee?ce.l:0,maxShift:ee?ie.width:ie.height},attributes:{x:We,y:Ve,"text-anchor":"middle"},transform:{rotate:ee?-90:0,offset:0}})}}function zt(){if(!ee&&!Yt||ee&&Yt){var Ae=ne.select("."+U.cbtitle),Oe=Ae.select("text"),We=[-xe/2,xe/2],Ve=Ae.select(".h"+Vt._id+"title-math-group").node(),lt=15.6;Oe.node()&&(lt=parseInt(Oe.node().style.fontSize,10)*T);var mt;if(Ve?(mt=b.bBox(Ve),Me=mt.width,kt=mt.height,kt>lt&&(We[1]-=(kt-lt)/2)):Oe.node()&&!Oe.classed(U.jsPlaceholder)&&(mt=b.bBox(Oe.node()),Me=mt.width,kt=mt.height),ee){if(kt){if(kt+=5,he==="top")Vt.domain[1]-=kt/ce.h,We[1]*=-1;else{Vt.domain[0]+=kt/ce.h;var dt=A.lineCount(Oe);We[1]+=(1-dt)*lt}Ae.attr("transform",d(We[0],We[1])),Vt.setScale()}}else Me&&(he==="right"&&(Vt.domain[0]+=(Me+Dr/2)/ce.w),Ae.attr("transform",d(We[0],We[1])),Vt.setScale())}ne.selectAll("."+U.cbfills+",."+U.cblines).attr("transform",ee?d(0,Math.round(ce.h*(1-Vt.domain[1]))):d(Math.round(ce.w*Vt.domain[0]),0)),$e.attr("transform",ee?d(0,Math.round(-ce.t)):d(Math.round(-ce.l),0));var At=ne.select("."+U.cbfills).selectAll("rect."+U.cbfill).attr("style","").data(at);At.enter().append("rect").classed(U.cbfill,!0).style("stroke","none"),At.exit().remove();var Bt=ye.map(Vt.c2p).map(Math.round).sort(function(Gt,Mr){return Gt-Mr});At.each(function(Gt,Mr){var Rr=[Mr===0?ye[0]:(at[Mr]+at[Mr-1])/2,Mr===at.length-1?ye[1]:(at[Mr]+at[Mr+1])/2].map(Vt.c2p).map(Math.round);ee&&(Rr[1]=v.constrain(Rr[1]+(Rr[1]>Rr[0])?1:-1,Bt[0],Bt[1]));var Yr=a.select(this).attr(ee?"x":"y",Ne).attr(ee?"y":"x",a.min(Rr)).attr(ee?"width":"height",Math.max(Ie,2)).attr(ee?"height":"width",Math.max(a.max(Rr)-a.min(Rr),2));if(q._fillgradient)b.gradient(Yr,we,q._id,ee?"vertical":"horizontalreversed",q._fillgradient,"fill");else{var Kr=je(Gt).replace("e-","");Yr.attr("fill",s(Kr).toHexString())}});var ir=ne.select("."+U.cblines).selectAll("path."+U.cbline).data(ve.color&&ve.width?Fe:[]);ir.enter().append("path").classed(U.cbline,!0),ir.exit().remove(),ir.each(function(Gt){var Mr=Ne,Rr=Math.round(Vt.c2p(Gt))+ve.width/2%1;a.select(this).attr("d","M"+(ee?Mr+","+Rr:Rr+","+Mr)+(ee?"h":"v")+Ie).call(b.lineGroupStyle,ve.width,_e(Gt),ve.dash)}),$e.selectAll("g."+Vt._id+"tick,path").remove();var tr=Ne+Ie+(xe||0)/2-(q.ticks==="outside"?1:0),vt=u.calcTicks(Vt),pr=u.getTickSigns(Vt)[2];return u.drawTicks(we,Vt,{vals:Vt.ticks==="inside"?u.clipEnds(Vt,vt):vt,layer:$e,path:u.makeTickPath(Vt,tr,pr),transFn:u.makeTransTickFn(Vt)}),u.drawLabels(we,Vt,{vals:vt,layer:$e,transFn:u.makeTransTickLabelFn(Vt),labelFns:u.makeLabelFns(Vt,tr)})}function Ue(){var Ae,Oe=Ie+xe/2;zr.indexOf("inside")===-1&&(Ae=b.bBox($e.node()),Oe+=ee?Ae.width:Ae.height),pt=dr.select("text");var We=0,Ve=ee&&he==="top",lt=!ee&&he==="right",mt=0;if(pt.node()&&!pt.classed(U.jsPlaceholder)){var dt,At=dr.select(".h"+Vt._id+"title-math-group").node();At&&(ee&&Yt||!ee&&!Yt)?(Ae=b.bBox(At),We=Ae.width,dt=Ae.height):(Ae=b.bBox(dr.node()),We=Ae.right-ce.l-(ee?Ne:Mt),dt=Ae.bottom-ce.t-(ee?Mt:Ne),!ee&&he==="top"&&(Oe+=Ae.height,mt=Ae.height)),lt&&(pt.attr("transform",d(We/2+Dr/2,0)),We*=2),Oe=Math.max(Oe,ee?We:dt)}var Bt=(ee?$:le)*2+Oe+He+xe/2,ir=0;!ee&&pe.text&&ke==="bottom"&&te<=0&&(ir=Bt/2,Bt+=ir,mt+=ir),ie._hColorbarMoveTitle=ir,ie._hColorbarMoveCBTitle=mt;var tr=He+xe;ne.select("."+U.cbbg).attr("x",(ee?Ne:Mt)-tr/2-(ee?$:0)).attr("y",(ee?Mt:Ne)-(ee?Qe:le+mt-ir)).attr(ee?"width":"height",Math.max(Bt-ir,2)).attr(ee?"height":"width",Math.max(Qe+tr,2)).call(x.fill,Re).call(x.stroke,q.bordercolor).style("stroke-width",He);var vt=lt?Math.max(We-10,0):0;if(ne.selectAll("."+U.cboutline).attr("x",(ee?Ne:Mt+$)+vt).attr("y",(ee?Mt+le-Qe:Ne)+(Ve?kt:0)).attr(ee?"width":"height",Math.max(Ie,2)).attr(ee?"height":"width",Math.max(Qe-(ee?2*le+kt:2*$+vt),2)).call(x.stroke,q.outlinecolor).style({fill:"none","stroke-width":xe}),ne.attr("transform",d(ce.l-(ee?ht*Bt:0),ce.t-(ee?0:(1-Tt)*Bt-mt))),!ee&&(He||s(Re).getAlpha()&&!s.equals(ie.paper_bgcolor,Re))){var pr=$e.selectAll("text"),Gt=pr[0].length,Mr=ne.select("."+U.cbbg).node(),Rr=b.bBox(Mr),Yr=b.getTranslate(ne),Kr=2;pr.each(function(xt,Ct){var Rt=0,Lt=Gt-1;if(Ct===Rt||Ct===Lt){var Pt=b.bBox(this),nr=b.getTranslate(this),Tr;if(Ct===Lt){var gr=Pt.right+nr.x,$t=Rr.right+Yr.x+Mt-He-Kr+K;Tr=$t-gr,Tr>0&&(Tr=0)}else if(Ct===Rt){var mr=Pt.left+nr.x,Pr=Rr.left+Yr.x+Mt+He+Kr;Tr=Pr-mr,Tr<0&&(Tr=0)}Tr&&(Gt<3?this.setAttribute("transform","translate("+Tr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var vr={},Xr=M[Ee],$r=z[Ee],Le=M[ke],De=z[ke],bt=Bt-Ie;ee?(re==="pixels"?(vr.y=te,vr.t=Qe*Le,vr.b=Qe*De):(vr.t=vr.b=0,vr.yt=te+X*Le,vr.yb=te-X*De),me==="pixels"?(vr.x=K,vr.l=Bt*Xr,vr.r=Bt*$r):(vr.l=bt*Xr,vr.r=bt*$r,vr.xl=K-de*Xr,vr.xr=K+de*$r)):(re==="pixels"?(vr.x=K,vr.l=Qe*Xr,vr.r=Qe*$r):(vr.l=vr.r=0,vr.xl=K+X*Xr,vr.xr=K-X*$r),me==="pixels"?(vr.y=1-te,vr.t=Bt*Le,vr.b=Bt*De):(vr.t=bt*Le,vr.b=bt*De,vr.yt=te-de*Le,vr.yb=te+de*De)),n.autoMargin(we,q._id,vr)}return v.syncOrAsync([n.previousPromises,st,zt,ft,n.previousPromises,Ue],we)}function H(ne,q,we){var ee=q.orientation==="v",X=we._fullLayout,re=X._size,de,me,xe;h.init({element:ne.node(),gd:we,prepFn:function(){de=ne.attr("transform"),_(ne)},moveFn:function(He,Re){ne.attr("transform",de+d(He,Re)),me=h.align((ee?q._uFrac:q._vFrac)+He/re.w,ee?q._thickFrac:q._lenFrac,0,1,q.xanchor),xe=h.align((ee?q._vFrac:1-q._uFrac)-Re/re.h,ee?q._lenFrac:q._thickFrac,0,1,q.yanchor);var Ee=h.getCursor(me,xe,q.xanchor,q.yanchor);_(ne,Ee)},doneFn:function(){if(_(ne),me!==void 0&&xe!==void 0){var He={};He[q._propPrefix+"x"]=me,He[q._propPrefix+"y"]=xe,q._traceIndex!==void 0?l.call("_guiRestyle",we,He,q._traceIndex):l.call("_guiRelayout",we,He)}}})}function Y(ne,q,we){var ee=q._levels,X=[],re=[],de,me,xe=ee.end+ee.size/100,He=ee.size,Re=1.001*we[0]-.001*we[1],Ee=1.001*we[1]-.001*we[0];for(me=0;me<1e5&&(de=ee.start+me*He,!(He>0?de>=xe:de<=xe));me++)de>Re&&de<Ee&&X.push(de);if(q._fillgradient)re=[0];else if(typeof q._fillcolor=="function"){var ke=q._filllevels;if(ke)for(xe=ke.end+ke.size/100,He=ke.size,me=0;me<1e5&&(de=ke.start+me*He,!(He>0?de>=xe:de<=xe));me++)de>we[0]&&de<we[1]&&re.push(de);else re=X.map(function($){return $-ee.size/2}),re.push(re[re.length-1]+ee.size)}else q._fillcolor&&typeof q._fillcolor=="string"&&(re=[0]);return ee.size<0&&(X.reverse(),re.reverse()),{line:X,fill:re}}function J(ne,q,we){var ee=ne._fullLayout,X=q.orientation==="v",re={type:"linear",range:we,tickmode:q.tickmode,nticks:q.nticks,tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,ticktext:q.ticktext,ticks:q.ticks,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,ticklabelposition:q.ticklabelposition,ticklabeloverflow:q.ticklabeloverflow,ticklabelstep:q.ticklabelstep,tickfont:q.tickfont,tickangle:q.tickangle,tickformat:q.tickformat,exponentformat:q.exponentformat,minexponent:q.minexponent,separatethousands:q.separatethousands,showexponent:q.showexponent,showtickprefix:q.showtickprefix,tickprefix:q.tickprefix,showticksuffix:q.showticksuffix,ticksuffix:q.ticksuffix,title:q.title,showline:!0,anchor:"free",side:X?"right":"bottom",position:1},de=X?"y":"x",me={type:"linear",_id:de+q._id},xe={letter:de,font:ee.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:ee.calendar};function He(Re,Ee){return v.coerce(re,me,S,Re,Ee)}return D(re,me,He,xe,ee),R(re,me,He,xe),me}i.exports={draw:F}},{"../../constants/alignment":219,"../../lib":244,"../../lib/extend":238,"../../lib/setcursor":264,"../../lib/svg_text_utils":267,"../../plots/cartesian/axes":291,"../../plots/cartesian/axis_defaults":293,"../../plots/cartesian/layout_attributes":304,"../../plots/cartesian/position_defaults":307,"../../plots/plots":325,"../../registry":327,"../color":103,"../colorscale/helpers":114,"../dragelement":122,"../drawing":125,"../titles":212,"./constants":105,"@plotly/d3":11,tinycolor2:68}],108:[function(e,i,o){var a=e("../../lib");i.exports=function(n){return a.isPlainObject(n.colorbar)}},{"../../lib":244}],109:[function(e,i,o){i.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":104,"./defaults":106,"./draw":107,"./has_colorbar":108}],110:[function(e,i,o){var a=e("../colorbar/attributes"),s=e("../../lib/regex").counter,n=e("../../lib/sort_object_keys"),l=e("./scales.js").scales;n(l),i.exports=function(h,v){h=h||"",v=v||{};var d=v.cLetter||"c";"onlyIfNumerical"in v?v.onlyIfNumerical:Boolean(h);var p="noScale"in v?v.noScale:h==="marker.line",_="showScaleDflt"in v?v.showScaleDflt:d==="z",b=typeof v.colorscaleDflt=="string"?l[v.colorscaleDflt]:null,x=v.editTypeOverride||"",E;"colorAttr"in v?(E=v.colorAttr,v.colorAttr):E={z:"z",c:"color"}[d];var A=d+"auto",P=d+"min",D=d+"max",R=d+"mid",S={};S[P]=S[D]=void 0;var I={};I[A]=!1;var T={};return E==="color"&&(T.color={valType:"color",arrayOk:!0,editType:x||"style"},v.anim&&(T.color.anim=!0)),T[A]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:S},T[P]={valType:"number",dflt:null,editType:x||"plot",impliedEdits:I},T[D]={valType:"number",dflt:null,editType:x||"plot",impliedEdits:I},T[R]={valType:"number",dflt:null,editType:"calc",impliedEdits:S},T.colorscale={valType:"colorscale",editType:"calc",dflt:b,impliedEdits:{autocolorscale:!1}},T.autocolorscale={valType:"boolean",dflt:v.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},T.reversescale={valType:"boolean",dflt:!1,editType:"plot"},p||(T.showscale={valType:"boolean",dflt:_,editType:"calc"},T.colorbar=a),v.noColorAxis||(T.coloraxis={valType:"subplotid",regex:s("coloraxis"),dflt:null,editType:"calc"}),T}},{"../../lib/regex":260,"../../lib/sort_object_keys":265,"../colorbar/attributes":104,"./scales.js":118}],111:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib"),n=e("./helpers").extractOpts;i.exports=function(u,h,v){var d=u._fullLayout,p=v.vals,_=v.containerStr,b=_?s.nestedProperty(h,_).get():h,x=n(b),E=x.auto!==!1,A=x.min,P=x.max,D=x.mid,R=function(){return s.aggNums(Math.min,null,p)},S=function(){return s.aggNums(Math.max,null,p)};if(A===void 0?A=R():E&&(b._colorAx&&a(A)?A=Math.min(A,R()):A=R()),P===void 0?P=S():E&&(b._colorAx&&a(P)?P=Math.max(P,S()):P=S()),E&&D!==void 0&&(P-D>D-A?A=D-(P-D):P-D<D-A&&(P=D+(D-A))),A===P&&(A-=.5,P+=.5),x._sync("min",A),x._sync("max",P),x.autocolorscale){var I;A*P<0?I=d.colorscale.diverging:A>=0?I=d.colorscale.sequential:I=d.colorscale.sequentialminus,x._sync("colorscale",I)}}},{"../../lib":244,"./helpers":114,"fast-isnumeric":17}],112:[function(e,i,o){var a=e("../../lib"),s=e("./helpers").hasColorscale,n=e("./helpers").extractOpts;i.exports=function(u,h){function v(A,P){var D=A["_"+P];D!==void 0&&(A[P]=D)}function d(A,P){var D=P.container?a.nestedProperty(A,P.container).get():A;if(D)if(D.coloraxis)D._colorAx=h[D.coloraxis];else{var R=n(D),S=R.auto;(S||R.min===void 0)&&v(D,P.min),(S||R.max===void 0)&&v(D,P.max),R.autocolorscale&&v(D,"colorscale")}}for(var p=0;p<u.length;p++){var _=u[p],b=_._module.colorbar;if(b)if(Array.isArray(b))for(var x=0;x<b.length;x++)d(_,b[x]);else d(_,b);s(_,"marker.line")&&d(_,{container:"marker.line",min:"cmin",max:"cmax"})}for(var E in h._colorAxes)d(h[E],{min:"cmin",max:"cmax"})}},{"../../lib":244,"./helpers":114}],113:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib"),n=e("../colorbar/has_colorbar"),l=e("../colorbar/defaults"),u=e("./scales").isValid,h=e("../../registry").traceIs;function v(d,p){var _=p.slice(0,p.length-1);return p?s.nestedProperty(d,_).get()||{}:d}i.exports=function d(p,_,b,x,E){var A=E.prefix,P=E.cLetter,D="_module"in _,R=v(p,A),S=v(_,A),I=v(_._template||{},A)||{},T=function(){return delete p.coloraxis,delete _.coloraxis,d(p,_,b,x,E)};if(D){var M=b._colorAxes||{},z=x(A+"coloraxis");if(z){var U=h(_,"contour")&&s.nestedProperty(_,"contours.coloring").get()||"heatmap",F=M[z];F?(F[2].push(T),F[0]!==U&&(F[0]=!1,s.warn(["Ignoring coloraxis:",z,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[z]=[U,_,[T]];return}}var V=R[P+"min"],j=R[P+"max"],H=a(V)&&a(j)&&V<j,Y=x(A+P+"auto",!H);Y?x(A+P+"mid"):(x(A+P+"min"),x(A+P+"max"));var J=R.colorscale,ne=I.colorscale,q;if(J!==void 0&&(q=!u(J)),ne!==void 0&&(q=!u(ne)),x(A+"autocolorscale",q),x(A+"colorscale"),x(A+"reversescale"),A!=="marker.line."){var we;A&&D&&(we=n(R));var ee=x(A+"showscale",we);ee&&(A&&I&&(S._template=I),l(R,S,b))}}},{"../../lib":244,"../../registry":327,"../colorbar/defaults":106,"../colorbar/has_colorbar":108,"./scales":118,"fast-isnumeric":17}],114:[function(e,i,o){var a=e("@plotly/d3"),s=e("tinycolor2"),n=e("fast-isnumeric"),l=e("../../lib"),u=e("../color"),h=e("./scales").isValid;function v(D,R,S){var I=R?l.nestedProperty(D,R).get()||{}:D,T=I[S||"color"],M=!1;if(l.isArrayOrTypedArray(T)){for(var z=0;z<T.length;z++)if(n(T[z])){M=!0;break}}return l.isPlainObject(I)&&(M||I.showscale===!0||n(I.cmin)&&n(I.cmax)||h(I.colorscale)||l.isPlainObject(I.colorbar))}var d=["showscale","autocolorscale","colorscale","reversescale","colorbar"],p=["min","max","mid","auto"];function _(D){var R=D._colorAx,S=R||D,I={},T,M,z;for(M=0;M<d.length;M++)z=d[M],I[z]=S[z];if(R)for(T="c",M=0;M<p.length;M++)z=p[M],I[z]=S["c"+z];else{var U;for(M=0;M<p.length;M++){if(z=p[M],U="c"+z,U in S){I[z]=S[U];continue}U="z"+z,U in S&&(I[z]=S[U])}T=U.charAt(0)}return I._sync=function(F,V){var j=p.indexOf(F)!==-1?T+F:F;S[j]=S["_"+j]=V},I}function b(D){for(var R=_(D),S=R.min,I=R.max,T=R.reversescale?x(R.colorscale):R.colorscale,M=T.length,z=new Array(M),U=new Array(M),F=0;F<M;F++){var V=T[F];z[F]=S+V[0]*(I-S),U[F]=V[1]}return{domain:z,range:U}}function x(D){for(var R=D.length,S=new Array(R),I=R-1,T=0;I>=0;I--,T++){var M=D[I];S[T]=[1-M[0],M[1]]}return S}function E(D,R){R=R||{};for(var S=D.domain,I=D.range,T=I.length,M=new Array(T),z=0;z<T;z++){var U=s(I[z]).toRgb();M[z]=[U.r,U.g,U.b,U.a]}var F=a.scale.linear().domain(S).range(M).clamp(!0),V=R.noNumericCheck,j=R.returnArray,H;return V&&j?H=F:V?H=function(Y){return P(F(Y))}:j?H=function(Y){return n(Y)?F(Y):s(Y).isValid()?Y:u.defaultLine}:H=function(Y){return n(Y)?P(F(Y)):s(Y).isValid()?Y:u.defaultLine},H.domain=F.domain,H.range=function(){return I},H}function A(D,R){return E(b(D),R)}function P(D){var R={r:D[0],g:D[1],b:D[2],a:D[3]};return s(R).toRgbString()}i.exports={hasColorscale:v,extractOpts:_,extractScale:b,flipScale:x,makeColorScaleFunc:E,makeColorScaleFuncFromTrace:A}},{"../../lib":244,"../color":103,"./scales":118,"@plotly/d3":11,"fast-isnumeric":17,tinycolor2:68}],115:[function(e,i,o){var a=e("./scales"),s=e("./helpers");i.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:a.scales,defaultScale:a.defaultScale,getScale:a.get,isValidScale:a.isValid,hasColorscale:s.hasColorscale,extractOpts:s.extractOpts,extractScale:s.extractScale,flipScale:s.flipScale,makeColorScaleFunc:s.makeColorScaleFunc,makeColorScaleFuncFromTrace:s.makeColorScaleFuncFromTrace}},{"./attributes":110,"./calc":111,"./cross_trace_defaults":112,"./defaults":113,"./helpers":114,"./layout_attributes":116,"./layout_defaults":117,"./scales":118}],116:[function(e,i,o){var a=e("../../lib/extend").extendFlat,s=e("./attributes"),n=e("./scales").scales;i.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:n.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:n.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:n.RdBu,editType:"calc"}},coloraxis:a({_isSubplotObj:!0,editType:"calc"},s("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":238,"./attributes":110,"./scales":118}],117:[function(e,i,o){var a=e("../../lib"),s=e("../../plot_api/plot_template"),n=e("./layout_attributes"),l=e("./defaults");i.exports=function(h,v){function d(D,R){return a.coerce(h,v,n,D,R)}d("colorscale.sequential"),d("colorscale.sequentialminus"),d("colorscale.diverging");var p=v._colorAxes,_,b;function x(D,R){return a.coerce(_,b,n.coloraxis,D,R)}for(var E in p){var A=p[E];if(A[0])_=h[E]||{},b=s.newContainer(v,E,"coloraxis"),b._name=E,l(_,b,v,x,{prefix:"",cLetter:"c"});else{for(var P=0;P<A[2].length;P++)A[2][P]();delete v._colorAxes[E]}}}},{"../../lib":244,"../../plot_api/plot_template":280,"./defaults":113,"./layout_attributes":116}],118:[function(e,i,o){var a=e("tinycolor2"),s={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},n=s.RdBu;function l(v,d){if(d||(d=n),!v)return d;function p(){try{v=s[v]||JSON.parse(v)}catch{v=d}}return typeof v=="string"&&(p(),typeof v=="string"&&p()),u(v)?v:d}function u(v){var d=0;if(!Array.isArray(v)||v.length<2||!v[0]||!v[v.length-1]||+v[0][0]!=0||+v[v.length-1][0]!=1)return!1;for(var p=0;p<v.length;p++){var _=v[p];if(_.length!==2||+_[0]<d||!a(_[1]).isValid())return!1;d=+_[0]}return!0}function h(v){return s[v]!==void 0?!0:u(v)}i.exports={scales:s,defaultScale:n,get:l,isValid:h}},{tinycolor2:68}],119:[function(e,i,o){i.exports=function(s,n,l,u,h){var v=(s-l)/(u-l),d=v+n/(u-l),p=(v+d)/2;return h==="left"||h==="bottom"?v:h==="center"||h==="middle"?p:h==="right"||h==="top"?d:v<2/3-p?v:d>4/3-p?d:p}},{}],120:[function(e,i,o){var a=e("../../lib"),s=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];i.exports=function(l,u,h,v){return h==="left"?l=0:h==="center"?l=1:h==="right"?l=2:l=a.constrain(Math.floor(l*3),0,2),v==="bottom"?u=0:v==="middle"?u=1:v==="top"?u=2:u=a.constrain(Math.floor(u*3),0,2),s[u][l]}},{"../../lib":244}],121:[function(e,i,o){o.selectMode=function(a){return a==="lasso"||a==="select"},o.drawMode=function(a){return a==="drawclosedpath"||a==="drawopenpath"||a==="drawline"||a==="drawrect"||a==="drawcircle"},o.openMode=function(a){return a==="drawline"||a==="drawopenpath"},o.rectMode=function(a){return a==="select"||a==="drawline"||a==="drawrect"||a==="drawcircle"},o.freeMode=function(a){return a==="lasso"||a==="drawclosedpath"||a==="drawopenpath"},o.selectingOrDrawing=function(a){return o.freeMode(a)||o.rectMode(a)}},{}],122:[function(e,i,o){var a=e("mouse-event-offset"),s=e("has-hover"),n=e("has-passive-events"),l=e("../../lib").removeElement,u=e("../../plots/cartesian/constants"),h=i.exports={};h.align=e("./align"),h.getCursor=e("./cursor");var v=e("./unhover");h.unhover=v.wrapped,h.unhoverRaw=v.raw,h.init=function(b){var x=b.gd,E=1,A=x._context.doubleClickDelay,P=b.element,D,R,S,I,T,M,z,U;x._mouseDownTime||(x._mouseDownTime=0),P.style.pointerEvents="all",P.onmousedown=j,n?(P._ontouchstart&&P.removeEventListener("touchstart",P._ontouchstart),P._ontouchstart=j,P.addEventListener("touchstart",j,{passive:!1})):P.ontouchstart=j;function F(J,ne,q){return Math.abs(J)<q&&(J=0),Math.abs(ne)<q&&(ne=0),[J,ne]}var V=b.clampFn||F;function j(J){x._dragged=!1,x._dragging=!0;var ne=p(J);D=ne[0],R=ne[1],z=J.target,M=J,U=J.buttons===2||J.ctrlKey,typeof J.clientX>"u"&&typeof J.clientY>"u"&&(J.clientX=D,J.clientY=R),S=new Date().getTime(),S-x._mouseDownTime<A?E+=1:(E=1,x._mouseDownTime=S),b.prepFn&&b.prepFn(J,D,R),s&&!U?(T=d(),T.style.cursor=window.getComputedStyle(P).cursor):s||(T=document,I=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(P).cursor),document.addEventListener("mouseup",Y),document.addEventListener("touchend",Y),b.dragmode!==!1&&(J.preventDefault(),document.addEventListener("mousemove",H),document.addEventListener("touchmove",H,{passive:!1}))}function H(J){J.preventDefault();var ne=p(J),q=b.minDrag||u.MINDRAG,we=V(ne[0]-D,ne[1]-R,q),ee=we[0],X=we[1];(ee||X)&&(x._dragged=!0,h.unhover(x,J)),x._dragged&&b.moveFn&&!U&&(x._dragdata={element:P,dx:ee,dy:X},b.moveFn(ee,X))}function Y(J){if(delete x._dragdata,b.dragmode!==!1&&(J.preventDefault(),document.removeEventListener("mousemove",H),document.removeEventListener("touchmove",H)),document.removeEventListener("mouseup",Y),document.removeEventListener("touchend",Y),s?l(T):I&&(T.documentElement.style.cursor=I,I=null),!x._dragging){x._dragged=!1;return}if(x._dragging=!1,new Date().getTime()-x._mouseDownTime>A&&(E=Math.max(E-1,1)),x._dragged)b.doneFn&&b.doneFn();else if(b.clickFn&&b.clickFn(E,M),!U){var ne;try{ne=new MouseEvent("click",J)}catch{var q=p(J);ne=document.createEvent("MouseEvents"),ne.initMouseEvent("click",J.bubbles,J.cancelable,J.view,J.detail,J.screenX,J.screenY,q[0],q[1],J.ctrlKey,J.altKey,J.shiftKey,J.metaKey,J.button,J.relatedTarget)}z.dispatchEvent(ne)}x._dragging=!1,x._dragged=!1}};function d(){var _=document.createElement("div");_.className="dragcover";var b=_.style;return b.position="fixed",b.left=0,b.right=0,b.top=0,b.bottom=0,b.zIndex=999999999,b.background="none",document.body.appendChild(_),_}h.coverSlip=d;function p(_){return a(_.changedTouches?_.changedTouches[0]:_,document.body)}},{"../../lib":244,"../../plots/cartesian/constants":298,"./align":119,"./cursor":120,"./unhover":123,"has-hover":48,"has-passive-events":49,"mouse-event-offset":53}],123:[function(e,i,o){var a=e("../../lib/events"),s=e("../../lib/throttle"),n=e("../../lib/dom").getGraphDiv,l=e("../fx/constants"),u=i.exports={};u.wrapped=function(h,v,d){h=n(h),h._fullLayout&&s.clear(h._fullLayout._uid+l.HOVERID),u.raw(h,v,d)},u.raw=function(v,d){var p=v._fullLayout,_=v._hoverdata;d||(d={}),!(d.target&&!v._dragged&&a.triggerHandler(v,"plotly_beforehover",d)===!1)&&(p._hoverlayer.selectAll("g").remove(),p._hoverlayer.selectAll("line").remove(),p._hoverlayer.selectAll("circle").remove(),v._hoverdata=void 0,d.target&&_&&v.emit("plotly_unhover",{event:d,points:_}))}},{"../../lib/dom":236,"../../lib/events":237,"../../lib/throttle":268,"../fx/constants":137}],124:[function(e,i,o){o.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},o.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],125:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../lib"),n=s.numberFormat,l=e("fast-isnumeric"),u=e("tinycolor2"),h=e("../../registry"),v=e("../color"),d=e("../colorscale"),p=s.strTranslate,_=e("../../lib/svg_text_utils"),b=e("../../constants/xmlns_namespaces"),x=e("../../constants/alignment"),E=x.LINE_SPACING,A=e("../../constants/interactions").DESELECTDIM,P=e("../../traces/scatter/subtypes"),D=e("../../traces/scatter/make_bubble_size_func"),R=e("../../components/fx/helpers").appendArrayPointValue,S=i.exports={};S.font=function(Fe,Ie,Ke,Qe){s.isPlainObject(Ie)&&(Qe=Ie.color,Ke=Ie.size,Ie=Ie.family),Ie&&Fe.style("font-family",Ie),Ke+1&&Fe.style("font-size",Ke+"px"),Qe&&Fe.call(v.fill,Qe)},S.setPosition=function(Fe,Ie,Ke){Fe.attr("x",Ie).attr("y",Ke)},S.setSize=function(Fe,Ie,Ke){Fe.attr("width",Ie).attr("height",Ke)},S.setRect=function(Fe,Ie,Ke,Qe,it){Fe.call(S.setPosition,Ie,Ke).call(S.setSize,Qe,it)},S.translatePoint=function(Fe,Ie,Ke,Qe){var it=Ke.c2p(Fe.x),Ne=Qe.c2p(Fe.y);if(l(it)&&l(Ne)&&Ie.node())Ie.node().nodeName==="text"?Ie.attr("x",it).attr("y",Ne):Ie.attr("transform",p(it,Ne));else return!1;return!0},S.translatePoints=function(Fe,Ie,Ke){Fe.each(function(Qe){var it=a.select(this);S.translatePoint(Qe,it,Ie,Ke)})},S.hideOutsideRangePoint=function(Fe,Ie,Ke,Qe,it,Ne){Ie.attr("display",Ke.isPtWithinRange(Fe,it)&&Qe.isPtWithinRange(Fe,Ne)?null:"none")},S.hideOutsideRangePoints=function(Fe,Ie){if(!!Ie._hasClipOnAxisFalse){var Ke=Ie.xaxis,Qe=Ie.yaxis;Fe.each(function(it){var Ne=it[0].trace,ht=Ne.xcalendar,Tt=Ne.ycalendar,Xt=h.traceIs(Ne,"bar-like")?".bartext":".point,.textpoint";Fe.selectAll(Xt).each(function(Nt){S.hideOutsideRangePoint(Nt,a.select(this),Ke,Qe,ht,Tt)})})}},S.crispRound=function(Fe,Ie,Ke){return!Ie||!l(Ie)?Ke||0:Fe._context.staticPlot?Ie:Ie<1?1:Math.round(Ie)},S.singleLineStyle=function(Fe,Ie,Ke,Qe,it){Ie.style("fill","none");var Ne=(((Fe||[])[0]||{}).trace||{}).line||{},ht=Ke||Ne.width||0,Tt=it||Ne.dash||"";v.stroke(Ie,Qe||Ne.color),S.dashLine(Ie,Tt,ht)},S.lineGroupStyle=function(Fe,Ie,Ke,Qe){Fe.style("fill","none").each(function(it){var Ne=(((it||[])[0]||{}).trace||{}).line||{},ht=Ie||Ne.width||0,Tt=Qe||Ne.dash||"";a.select(this).call(v.stroke,Ke||Ne.color).call(S.dashLine,Tt,ht)})},S.dashLine=function(Fe,Ie,Ke){Ke=+Ke||0,Ie=S.dashStyle(Ie,Ke),Fe.style({"stroke-dasharray":Ie,"stroke-width":Ke+"px"})},S.dashStyle=function(Fe,Ie){Ie=+Ie||1;var Ke=Math.max(Ie,3);return Fe==="solid"?Fe="":Fe==="dot"?Fe=Ke+"px,"+Ke+"px":Fe==="dash"?Fe=3*Ke+"px,"+3*Ke+"px":Fe==="longdash"?Fe=5*Ke+"px,"+5*Ke+"px":Fe==="dashdot"?Fe=3*Ke+"px,"+Ke+"px,"+Ke+"px,"+Ke+"px":Fe==="longdashdot"&&(Fe=5*Ke+"px,"+2*Ke+"px,"+Ke+"px,"+2*Ke+"px"),Fe};function I(Fe,Ie,Ke){var Qe=Ie.fillpattern,it=Qe&&S.getPatternAttr(Qe.shape,0,"");if(it){var Ne=S.getPatternAttr(Qe.bgcolor,0,null),ht=S.getPatternAttr(Qe.fgcolor,0,null),Tt=Qe.fgopacity,Xt=S.getPatternAttr(Qe.size,0,8),Nt=S.getPatternAttr(Qe.solidity,0,.3),Mt=Ie.uid;S.pattern(Fe,"point",Ke,Mt,it,Xt,Nt,void 0,Qe.fillmode,Ne,ht,Tt)}else Ie.fillcolor&&Fe.call(v.fill,Ie.fillcolor)}S.singleFillStyle=function(Fe,Ie){var Ke=a.select(Fe.node()),Qe=Ke.data(),it=((Qe[0]||[])[0]||{}).trace||{};I(Fe,it,Ie)},S.fillGroupStyle=function(Fe,Ie){Fe.style("stroke-width",0).each(function(Ke){var Qe=a.select(this);Ke[0].trace&&I(Qe,Ke[0].trace,Ie)})};var T=e("./symbol_defs");S.symbolNames=[],S.symbolFuncs=[],S.symbolBackOffs=[],S.symbolNeedLines={},S.symbolNoDot={},S.symbolNoFill={},S.symbolList=[],Object.keys(T).forEach(function(Fe){var Ie=T[Fe],Ke=Ie.n;S.symbolList.push(Ke,String(Ke),Fe,Ke+100,String(Ke+100),Fe+"-open"),S.symbolNames[Ke]=Fe,S.symbolFuncs[Ke]=Ie.f,S.symbolBackOffs[Ke]=Ie.backoff||0,Ie.needLine&&(S.symbolNeedLines[Ke]=!0),Ie.noDot?S.symbolNoDot[Ke]=!0:S.symbolList.push(Ke+200,String(Ke+200),Fe+"-dot",Ke+300,String(Ke+300),Fe+"-open-dot"),Ie.noFill&&(S.symbolNoFill[Ke]=!0)});var M=S.symbolNames.length,z="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";S.symbolNumber=function(Fe){if(l(Fe))Fe=+Fe;else if(typeof Fe=="string"){var Ie=0;Fe.indexOf("-open")>0&&(Ie=100,Fe=Fe.replace("-open","")),Fe.indexOf("-dot")>0&&(Ie+=200,Fe=Fe.replace("-dot","")),Fe=S.symbolNames.indexOf(Fe),Fe>=0&&(Fe+=Ie)}return Fe%100>=M||Fe>=400?0:Math.floor(Math.max(Fe,0))};function U(Fe,Ie,Ke,Qe){var it=Fe%100;return S.symbolFuncs[it](Ie,Ke,Qe)+(Fe>=200?z:"")}var F={x1:1,x2:0,y1:0,y2:0},V={x1:0,x2:0,y1:1,y2:0},j=n("~f"),H={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:F},horizontalreversed:{node:"linearGradient",attrs:F,reversed:!0},vertical:{node:"linearGradient",attrs:V},verticalreversed:{node:"linearGradient",attrs:V,reversed:!0}};S.gradient=function(Fe,Ie,Ke,Qe,it,Ne){for(var ht=it.length,Tt=H[Qe],Xt=new Array(ht),Nt=0;Nt<ht;Nt++)Tt.reversed?Xt[ht-1-Nt]=[j((1-it[Nt][0])*100),it[Nt][1]]:Xt[Nt]=[j(it[Nt][0]*100),it[Nt][1]];var Mt=Ie._fullLayout,Vt="g"+Mt._uid+"-"+Ke,Yt=Mt._defs.select(".gradients").selectAll("#"+Vt).data([Qe+Xt.join(";")],s.identity);Yt.exit().remove(),Yt.enter().append(Tt.node).each(function(){var cr=a.select(this);Tt.attrs&&cr.attr(Tt.attrs),cr.attr("id",Vt);var Nr=cr.selectAll("stop").data(Xt);Nr.exit().remove(),Nr.enter().append("stop"),Nr.each(function(er){var Wt=u(er[1]);a.select(this).attr({offset:er[0]+"%","stop-color":v.tinyRGB(Wt),"stop-opacity":Wt.getAlpha()})})}),Fe.style(Ne,le(Vt,Ie)).style(Ne+"-opacity",null),Fe.classed("gradient_filled",!0)},S.pattern=function(Fe,Ie,Ke,Qe,it,Ne,ht,Tt,Xt,Nt,Mt,Vt){var Yt=Ie==="legend";Tt&&(Xt==="overlay"?(Nt=Tt,Mt=v.contrast(Nt)):(Nt=void 0,Mt=Tt));var cr=Ke._fullLayout,Nr="p"+cr._uid+"-"+Qe,er,Wt,dr=function(Ae,Oe,We,Ve,lt){return Ve+(lt-Ve)*(Ae-Oe)/(We-Oe)},zr,Dr,$e,pt,kt={},Me=u(Mt),rt=v.tinyRGB(Me),st=Me.getAlpha(),ft=Vt*st;switch(it){case"/":er=Ne*Math.sqrt(2),Wt=Ne*Math.sqrt(2),zr="M-"+er/4+","+Wt/4+"l"+er/2+",-"+Wt/2+"M0,"+Wt+"L"+er+",0M"+er/4*3+","+Wt/4*5+"l"+er/2+",-"+Wt/2,Dr=ht*Ne,pt="path",kt={d:zr,opacity:ft,stroke:rt,"stroke-width":Dr+"px"};break;case"\\":er=Ne*Math.sqrt(2),Wt=Ne*Math.sqrt(2),zr="M"+er/4*3+",-"+Wt/4+"l"+er/2+","+Wt/2+"M0,0L"+er+","+Wt+"M-"+er/4+","+Wt/4*3+"l"+er/2+","+Wt/2,Dr=ht*Ne,pt="path",kt={d:zr,opacity:ft,stroke:rt,"stroke-width":Dr+"px"};break;case"x":er=Ne*Math.sqrt(2),Wt=Ne*Math.sqrt(2),zr="M-"+er/4+","+Wt/4+"l"+er/2+",-"+Wt/2+"M0,"+Wt+"L"+er+",0M"+er/4*3+","+Wt/4*5+"l"+er/2+",-"+Wt/2+"M"+er/4*3+",-"+Wt/4+"l"+er/2+","+Wt/2+"M0,0L"+er+","+Wt+"M-"+er/4+","+Wt/4*3+"l"+er/2+","+Wt/2,Dr=Ne-Ne*Math.sqrt(1-ht),pt="path",kt={d:zr,opacity:ft,stroke:rt,"stroke-width":Dr+"px"};break;case"|":er=Ne,Wt=Ne,pt="path",zr="M"+er/2+",0L"+er/2+","+Wt,Dr=ht*Ne,pt="path",kt={d:zr,opacity:ft,stroke:rt,"stroke-width":Dr+"px"};break;case"-":er=Ne,Wt=Ne,pt="path",zr="M0,"+Wt/2+"L"+er+","+Wt/2,Dr=ht*Ne,pt="path",kt={d:zr,opacity:ft,stroke:rt,"stroke-width":Dr+"px"};break;case"+":er=Ne,Wt=Ne,pt="path",zr="M"+er/2+",0L"+er/2+","+Wt+"M0,"+Wt/2+"L"+er+","+Wt/2,Dr=Ne-Ne*Math.sqrt(1-ht),pt="path",kt={d:zr,opacity:ft,stroke:rt,"stroke-width":Dr+"px"};break;case".":er=Ne,Wt=Ne,ht<Math.PI/4?$e=Math.sqrt(ht*Ne*Ne/Math.PI):$e=dr(ht,Math.PI/4,1,Ne/2,Ne/Math.sqrt(2)),pt="circle",kt={cx:er/2,cy:Wt/2,r:$e,opacity:ft,fill:rt};break}var zt=[it||"noSh",Nt||"noBg",Mt||"noFg",Ne,ht].join(";"),Ue=cr._defs.select(".patterns").selectAll("#"+Nr).data([zt],s.identity);Ue.exit().remove(),Ue.enter().append("pattern").each(function(){var Ae=a.select(this);if(Ae.attr({id:Nr,width:er+"px",height:Wt+"px",patternUnits:"userSpaceOnUse",patternTransform:Yt?"scale(0.8)":""}),Nt){var Oe=u(Nt),We=v.tinyRGB(Oe),Ve=Oe.getAlpha(),lt=Ae.selectAll("rect").data([0]);lt.exit().remove(),lt.enter().append("rect").attr({width:er+"px",height:Wt+"px",fill:We,"fill-opacity":Ve})}var mt=Ae.selectAll(pt).data([0]);mt.exit().remove(),mt.enter().append(pt).attr(kt)}),Fe.style("fill",le(Nr,Ke)).style("fill-opacity",null),Fe.classed("pattern_filled",!0)},S.initGradients=function(Fe){var Ie=Fe._fullLayout,Ke=s.ensureSingle(Ie._defs,"g","gradients");Ke.selectAll("linearGradient,radialGradient").remove(),a.select(Fe).selectAll(".gradient_filled").classed("gradient_filled",!1)},S.initPatterns=function(Fe){var Ie=Fe._fullLayout,Ke=s.ensureSingle(Ie._defs,"g","patterns");Ke.selectAll("pattern").remove(),a.select(Fe).selectAll(".pattern_filled").classed("pattern_filled",!1)},S.getPatternAttr=function(Fe,Ie,Ke){return Fe&&s.isArrayOrTypedArray(Fe)?Ie<Fe.length?Fe[Ie]:Ke:Fe},S.pointStyle=function(Fe,Ie,Ke){if(!!Fe.size()){var Qe=S.makePointStyleFns(Ie);Fe.each(function(it){S.singlePointStyle(it,a.select(this),Ie,Qe,Ke)})}},S.singlePointStyle=function(Fe,Ie,Ke,Qe,it){var Ne=Ke.marker,ht=Ne.line;if(Ie.style("opacity",Qe.selectedOpacityFn?Qe.selectedOpacityFn(Fe):Fe.mo===void 0?Ne.opacity:Fe.mo),Qe.ms2mrc){var Tt;Fe.ms==="various"||Ne.size==="various"?Tt=3:Tt=Qe.ms2mrc(Fe.ms),Fe.mrc=Tt,Qe.selectedSizeFn&&(Tt=Fe.mrc=Qe.selectedSizeFn(Fe));var Xt=S.symbolNumber(Fe.mx||Ne.symbol)||0;Fe.om=Xt%200>=100;var Nt=at(Fe,Ke),Mt=ie(Fe,Ke);Ie.attr("d",U(Xt,Tt,Nt,Mt))}var Vt=!1,Yt,cr,Nr;if(Fe.so)Nr=ht.outlierwidth,cr=ht.outliercolor,Yt=Ne.outliercolor;else{var er=(ht||{}).width;Nr=(Fe.mlw+1||er+1||(Fe.trace?(Fe.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Fe?cr=Fe.mlcc=Qe.lineScale(Fe.mlc):s.isArrayOrTypedArray(ht.color)?cr=v.defaultLine:cr=ht.color,s.isArrayOrTypedArray(Ne.color)&&(Yt=v.defaultLine,Vt=!0),"mc"in Fe?Yt=Fe.mcc=Qe.markerScale(Fe.mc):Yt=Ne.color||"rgba(0,0,0,0)",Qe.selectedColorFn&&(Yt=Qe.selectedColorFn(Fe))}if(Fe.om)Ie.call(v.stroke,Yt).style({"stroke-width":(Nr||1)+"px",fill:"none"});else{Ie.style("stroke-width",(Fe.isBlank?0:Nr)+"px");var Wt=Ne.gradient,dr=Fe.mgt;dr?Vt=!0:dr=Wt&&Wt.type,s.isArrayOrTypedArray(dr)&&(dr=dr[0],H[dr]||(dr=0));var zr=Ne.pattern,Dr=zr&&S.getPatternAttr(zr.shape,Fe.i,"");if(dr&&dr!=="none"){var $e=Fe.mgc;$e?Vt=!0:$e=Wt.color;var pt=Ke.uid;Vt&&(pt+="-"+Fe.i),S.gradient(Ie,it,pt,dr,[[0,$e],[1,Yt]],"fill")}else if(Dr){var kt=S.getPatternAttr(zr.bgcolor,Fe.i,null),Me=S.getPatternAttr(zr.fgcolor,Fe.i,null),rt=zr.fgopacity,st=S.getPatternAttr(zr.size,Fe.i,8),ft=S.getPatternAttr(zr.solidity,Fe.i,.3),zt=Fe.mcc||s.isArrayOrTypedArray(zr.shape)||s.isArrayOrTypedArray(zr.bgcolor)||s.isArrayOrTypedArray(zr.size)||s.isArrayOrTypedArray(zr.solidity),Ue=Ke.uid;zt&&(Ue+="-"+Fe.i),S.pattern(Ie,"point",it,Ue,Dr,st,ft,Fe.mcc,zr.fillmode,kt,Me,rt)}else v.fill(Ie,Yt);Nr&&v.stroke(Ie,cr)}},S.makePointStyleFns=function(Fe){var Ie={},Ke=Fe.marker;return Ie.markerScale=S.tryColorscale(Ke,""),Ie.lineScale=S.tryColorscale(Ke,"line"),h.traceIs(Fe,"symbols")&&(Ie.ms2mrc=P.isBubble(Fe)?D(Fe):function(){return(Ke.size||6)/2}),Fe.selectedpoints&&s.extendFlat(Ie,S.makeSelectedPointStyleFns(Fe)),Ie},S.makeSelectedPointStyleFns=function(Fe){var Ie={},Ke=Fe.selected||{},Qe=Fe.unselected||{},it=Fe.marker||{},Ne=Ke.marker||{},ht=Qe.marker||{},Tt=it.opacity,Xt=Ne.opacity,Nt=ht.opacity,Mt=Xt!==void 0,Vt=Nt!==void 0;(s.isArrayOrTypedArray(Tt)||Mt||Vt)&&(Ie.selectedOpacityFn=function($e){var pt=$e.mo===void 0?it.opacity:$e.mo;return $e.selected?Mt?Xt:pt:Vt?Nt:A*pt});var Yt=it.color,cr=Ne.color,Nr=ht.color;(cr||Nr)&&(Ie.selectedColorFn=function($e){var pt=$e.mcc||Yt;return $e.selected?cr||pt:Nr||pt});var er=it.size,Wt=Ne.size,dr=ht.size,zr=Wt!==void 0,Dr=dr!==void 0;return h.traceIs(Fe,"symbols")&&(zr||Dr)&&(Ie.selectedSizeFn=function($e){var pt=$e.mrc||er/2;return $e.selected?zr?Wt/2:pt:Dr?dr/2:pt}),Ie},S.makeSelectedTextStyleFns=function(Fe){var Ie={},Ke=Fe.selected||{},Qe=Fe.unselected||{},it=Fe.textfont||{},Ne=Ke.textfont||{},ht=Qe.textfont||{},Tt=it.color,Xt=Ne.color,Nt=ht.color;return Ie.selectedTextColorFn=function(Mt){var Vt=Mt.tc||Tt;return Mt.selected?Xt||Vt:Nt||(Xt?Vt:v.addOpacity(Vt,A))},Ie},S.selectedPointStyle=function(Fe,Ie){if(!(!Fe.size()||!Ie.selectedpoints)){var Ke=S.makeSelectedPointStyleFns(Ie),Qe=Ie.marker||{},it=[];Ke.selectedOpacityFn&&it.push(function(Ne,ht){Ne.style("opacity",Ke.selectedOpacityFn(ht))}),Ke.selectedColorFn&&it.push(function(Ne,ht){v.fill(Ne,Ke.selectedColorFn(ht))}),Ke.selectedSizeFn&&it.push(function(Ne,ht){var Tt=ht.mx||Qe.symbol||0,Xt=Ke.selectedSizeFn(ht);Ne.attr("d",U(S.symbolNumber(Tt),Xt,at(ht,Ie),ie(ht,Ie))),ht.mrc2=Xt}),it.length&&Fe.each(function(Ne){for(var ht=a.select(this),Tt=0;Tt<it.length;Tt++)it[Tt](ht,Ne)})}},S.tryColorscale=function(Fe,Ie){var Ke=Ie?s.nestedProperty(Fe,Ie).get():Fe;if(Ke){var Qe=Ke.color;if((Ke.colorscale||Ke._colorAx)&&s.isArrayOrTypedArray(Qe))return d.makeColorScaleFuncFromTrace(Ke)}return s.identity};var Y={start:1,end:-1,middle:0,bottom:1,top:-1};function J(Fe,Ie,Ke,Qe,it){var Ne=a.select(Fe.node().parentNode),ht=Ie.indexOf("top")!==-1?"top":Ie.indexOf("bottom")!==-1?"bottom":"middle",Tt=Ie.indexOf("left")!==-1?"end":Ie.indexOf("right")!==-1?"start":"middle",Xt=Qe?Qe/.8+1:0,Nt=(_.lineCount(Fe)-1)*E+1,Mt=Y[Tt]*Xt,Vt=Ke*.75+Y[ht]*Xt+(Y[ht]-1)*Nt*Ke/2;Fe.attr("text-anchor",Tt),it||Ne.attr("transform",p(Mt,Vt))}function ne(Fe,Ie){var Ke=Fe.ts||Ie.textfont.size;return l(Ke)&&Ke>0?Ke:0}S.textPointStyle=function(Fe,Ie,Ke){if(!!Fe.size()){var Qe;if(Ie.selectedpoints){var it=S.makeSelectedTextStyleFns(Ie);Qe=it.selectedTextColorFn}var Ne=Ie.texttemplate,ht=Ke._fullLayout;Fe.each(function(Tt){var Xt=a.select(this),Nt=Ne?s.extractOption(Tt,Ie,"txt","texttemplate"):s.extractOption(Tt,Ie,"tx","text");if(!Nt&&Nt!==0){Xt.remove();return}if(Ne){var Mt=Ie._module.formatLabels,Vt=Mt?Mt(Tt,Ie,ht):{},Yt={};R(Yt,Ie,Tt.i);var cr=Ie._meta||{};Nt=s.texttemplateString(Nt,Vt,ht._d3locale,Yt,Tt,cr)}var Nr=Tt.tp||Ie.textposition,er=ne(Tt,Ie),Wt=Qe?Qe(Tt):Tt.tc||Ie.textfont.color;Xt.call(S.font,Tt.tf||Ie.textfont.family,er,Wt).text(Nt).call(_.convertToTspans,Ke).call(J,Nr,er,Tt.mrc)})}},S.selectedTextStyle=function(Fe,Ie){if(!(!Fe.size()||!Ie.selectedpoints)){var Ke=S.makeSelectedTextStyleFns(Ie);Fe.each(function(Qe){var it=a.select(this),Ne=Ke.selectedTextColorFn(Qe),ht=Qe.tp||Ie.textposition,Tt=ne(Qe,Ie);v.fill(it,Ne);var Xt=h.traceIs(Ie,"bar-like");J(it,ht,Tt,Qe.mrc2||Qe.mrc,Xt)})}};var q=.5;S.smoothopen=function(Fe,Ie){if(Fe.length<3)return"M"+Fe.join("L");var Ke="M"+Fe[0],Qe=[],it;for(it=1;it<Fe.length-1;it++)Qe.push(me(Fe[it-1],Fe[it],Fe[it+1],Ie));for(Ke+="Q"+Qe[0][0]+" "+Fe[1],it=2;it<Fe.length-1;it++)Ke+="C"+Qe[it-2][1]+" "+Qe[it-1][0]+" "+Fe[it];return Ke+="Q"+Qe[Fe.length-3][1]+" "+Fe[Fe.length-1],Ke},S.smoothclosed=function(Fe,Ie){if(Fe.length<3)return"M"+Fe.join("L")+"Z";var Ke="M"+Fe[0],Qe=Fe.length-1,it=[me(Fe[Qe],Fe[0],Fe[1],Ie)],Ne;for(Ne=1;Ne<Qe;Ne++)it.push(me(Fe[Ne-1],Fe[Ne],Fe[Ne+1],Ie));for(it.push(me(Fe[Qe-1],Fe[Qe],Fe[0],Ie)),Ne=1;Ne<=Qe;Ne++)Ke+="C"+it[Ne-1][1]+" "+it[Ne][0]+" "+Fe[Ne];return Ke+="C"+it[Qe][1]+" "+it[0][0]+" "+Fe[0]+"Z",Ke};var we,ee;function X(Fe,Ie,Ke){return Ke&&(Fe=Re(Fe)),Ie?de(Fe[1]):re(Fe[0])}function re(Fe){var Ie=a.round(Fe,2);return we=Ie,Ie}function de(Fe){var Ie=a.round(Fe,2);return ee=Ie,Ie}function me(Fe,Ie,Ke,Qe){var it=Fe[0]-Ie[0],Ne=Fe[1]-Ie[1],ht=Ke[0]-Ie[0],Tt=Ke[1]-Ie[1],Xt=Math.pow(it*it+Ne*Ne,q/2),Nt=Math.pow(ht*ht+Tt*Tt,q/2),Mt=(Nt*Nt*it-Xt*Xt*ht)*Qe,Vt=(Nt*Nt*Ne-Xt*Xt*Tt)*Qe,Yt=3*Nt*(Xt+Nt),cr=3*Xt*(Xt+Nt);return[[re(Ie[0]+(Yt&&Mt/Yt)),de(Ie[1]+(Yt&&Vt/Yt))],[re(Ie[0]-(cr&&Mt/cr)),de(Ie[1]-(cr&&Vt/cr))]]}var xe={hv:function(Fe,Ie,Ke){return"H"+re(Ie[0])+"V"+X(Ie,1,Ke)},vh:function(Fe,Ie,Ke){return"V"+de(Ie[1])+"H"+X(Ie,0,Ke)},hvh:function(Fe,Ie,Ke){return"H"+re((Fe[0]+Ie[0])/2)+"V"+de(Ie[1])+"H"+X(Ie,0,Ke)},vhv:function(Fe,Ie,Ke){return"V"+de((Fe[1]+Ie[1])/2)+"H"+re(Ie[0])+"V"+X(Ie,1,Ke)}},He=function(Fe,Ie,Ke){return"L"+X(Ie,0,Ke)+","+X(Ie,1,Ke)};S.steps=function(Fe){var Ie=xe[Fe]||He;return function(Ke){for(var Qe="M"+re(Ke[0][0])+","+de(Ke[0][1]),it=Ke.length,Ne=1;Ne<it;Ne++)Qe+=Ie(Ke[Ne-1],Ke[Ne],Ne===it-1);return Qe}};function Re(Fe,Ie){var Ke=Fe.backoff,Qe=Fe.trace,it=Fe.d,Ne=Fe.i;if(Ke&&Qe&&Qe.marker&&Qe.marker.angle%360===0&&Qe.line&&Qe.line.shape!=="spline"){var ht=s.isArrayOrTypedArray(Ke),Tt=Fe,Xt=Ie?Ie[0]:we||0,Nt=Ie?Ie[1]:ee||0,Mt=Tt[0],Vt=Tt[1],Yt=Mt-Xt,cr=Vt-Nt,Nr=Math.atan2(cr,Yt),er=ht?Ke[Ne]:Ke;if(er==="auto"){var Wt=Tt.i;Qe.type==="scatter"&&Wt--;var dr=Tt.marker;er=dr?S.symbolBackOffs[S.symbolNumber(dr.symbol)]*dr.size:0,er+=S.getMarkerStandoff(it[Wt],Qe)||0}var zr=Mt-er*Math.cos(Nr),Dr=Vt-er*Math.sin(Nr);(zr<=Mt&&zr>=Xt||zr>=Mt&&zr<=Xt)&&(Dr<=Vt&&Dr>=Nt||Dr>=Vt&&Dr<=Nt)&&(Fe=[zr,Dr])}return Fe}S.applyBackoff=Re,S.makeTester=function(){var Fe=s.ensureSingleById(a.select("body"),"svg","js-plotly-tester",function(Ke){Ke.attr(b.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Ie=s.ensureSingle(Fe,"path","js-reference-point",function(Ke){Ke.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});S.tester=Fe,S.testref=Ie},S.savedBBoxes={};var Ee=0,ke=1e4;S.bBox=function(Fe,Ie,Ke){Ke||(Ke=$(Fe));var Qe;if(Ke){if(Qe=S.savedBBoxes[Ke],Qe)return s.extendFlat({},Qe)}else if(Fe.childNodes.length===1){var it=Fe.childNodes[0];if(Ke=$(it),Ke){var Ne=+it.getAttribute("x")||0,ht=+it.getAttribute("y")||0,Tt=it.getAttribute("transform");if(!Tt){var Xt=S.bBox(it,!1,Ke);return Ne&&(Xt.left+=Ne,Xt.right+=Ne),ht&&(Xt.top+=ht,Xt.bottom+=ht),Xt}if(Ke+="~"+Ne+"~"+ht+"~"+Tt,Qe=S.savedBBoxes[Ke],Qe)return s.extendFlat({},Qe)}}var Nt,Mt;Ie?Nt=Fe:(Mt=S.tester.node(),Nt=Fe.cloneNode(!0),Mt.appendChild(Nt)),a.select(Nt).attr("transform",null).call(_.positionText,0,0);var Vt=Nt.getBoundingClientRect(),Yt=S.testref.node().getBoundingClientRect();Ie||Mt.removeChild(Nt);var cr={height:Vt.height,width:Vt.width,left:Vt.left-Yt.left,top:Vt.top-Yt.top,right:Vt.right-Yt.left,bottom:Vt.bottom-Yt.top};return Ee>=ke&&(S.savedBBoxes={},Ee=0),Ke&&(S.savedBBoxes[Ke]=cr),Ee++,s.extendFlat({},cr)};function $(Fe){var Ie=Fe.getAttribute("data-unformatted");if(Ie!==null)return Ie+Fe.getAttribute("data-math")+Fe.getAttribute("text-anchor")+Fe.getAttribute("style")}S.setClipUrl=function(Fe,Ie,Ke){Fe.attr("clip-path",le(Ie,Ke))};function le(Fe,Ie){if(!Fe)return null;var Ke=Ie._context,Qe=Ke._exportedPlot?"":Ke._baseUrl||"";return Qe?"url('"+Qe+"#"+Fe+"')":"url(#"+Fe+")"}S.getTranslate=function(Fe){var Ie=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Ke=Fe.attr?"attr":"getAttribute",Qe=Fe[Ke]("transform")||"",it=Qe.replace(Ie,function(Ne,ht,Tt){return[ht,Tt].join(" ")}).split(" ");return{x:+it[0]||0,y:+it[1]||0}},S.setTranslate=function(Fe,Ie,Ke){var Qe=/(\btranslate\(.*?\);?)/,it=Fe.attr?"attr":"getAttribute",Ne=Fe.attr?"attr":"setAttribute",ht=Fe[it]("transform")||"";return Ie=Ie||0,Ke=Ke||0,ht=ht.replace(Qe,"").trim(),ht+=p(Ie,Ke),ht=ht.trim(),Fe[Ne]("transform",ht),ht},S.getScale=function(Fe){var Ie=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Ke=Fe.attr?"attr":"getAttribute",Qe=Fe[Ke]("transform")||"",it=Qe.replace(Ie,function(Ne,ht,Tt){return[ht,Tt].join(" ")}).split(" ");return{x:+it[0]||1,y:+it[1]||1}},S.setScale=function(Fe,Ie,Ke){var Qe=/(\bscale\(.*?\);?)/,it=Fe.attr?"attr":"getAttribute",Ne=Fe.attr?"attr":"setAttribute",ht=Fe[it]("transform")||"";return Ie=Ie||1,Ke=Ke||1,ht=ht.replace(Qe,"").trim(),ht+="scale("+Ie+","+Ke+")",ht=ht.trim(),Fe[Ne]("transform",ht),ht};var K=/\s*sc.*/;S.setPointGroupScale=function(Fe,Ie,Ke){if(Ie=Ie||1,Ke=Ke||1,!!Fe){var Qe=Ie===1&&Ke===1?"":"scale("+Ie+","+Ke+")";Fe.each(function(){var it=(this.getAttribute("transform")||"").replace(K,"");it+=Qe,it=it.trim(),this.setAttribute("transform",it)})}};var te=/translate\([^)]*\)\s*$/;S.setTextPointsScale=function(Fe,Ie,Ke){!Fe||Fe.each(function(){var Qe,it=a.select(this),Ne=it.select("text");if(!!Ne.node()){var ht=parseFloat(Ne.attr("x")||0),Tt=parseFloat(Ne.attr("y")||0),Xt=(it.attr("transform")||"").match(te);Ie===1&&Ke===1?Qe=[]:Qe=[p(ht,Tt),"scale("+Ie+","+Ke+")",p(-ht,-Tt)],Xt&&Qe.push(Xt),it.attr("transform",Qe.join(""))}})};function ie(Fe,Ie){var Ke;return Fe&&(Ke=Fe.mf),Ke===void 0&&(Ke=Ie.marker&&Ie.marker.standoff||0),!Ie._geo&&!Ie._xA?-Ke:Ke}S.getMarkerStandoff=ie;var ce=Math.atan2,ae=Math.cos,ve=Math.sin;function pe(Fe,Ie){var Ke=Ie[0],Qe=Ie[1];return[Ke*ae(Fe)-Qe*ve(Fe),Ke*ve(Fe)+Qe*ae(Fe)]}var he,ye,_e,je,Je,nt;function at(Fe,Ie){var Ke=Fe.ma;Ke===void 0&&(Ke=Ie.marker.angle||0);var Qe,it,Ne=Ie.marker.angleref;if(Ne==="previous"||Ne==="north"){if(Ie._geo){var ht=Ie._geo.project(Fe.lonlat);Qe=ht[0],it=ht[1]}else{var Tt=Ie._xA,Xt=Ie._yA;if(Tt&&Xt)Qe=Tt.c2p(Fe.x),it=Xt.c2p(Fe.y);else return 90}if(Ie._geo){var Nt=Fe.lonlat[0],Mt=Fe.lonlat[1],Vt=Ie._geo.project([Nt,Mt+1e-5]),Yt=Ie._geo.project([Nt+1e-5,Mt]),cr=ce(Yt[1]-it,Yt[0]-Qe),Nr=ce(Vt[1]-it,Vt[0]-Qe),er;if(Ne==="north")er=Ke/180*Math.PI;else if(Ne==="previous"){var Wt=Nt/180*Math.PI,dr=Mt/180*Math.PI,zr=he/180*Math.PI,Dr=ye/180*Math.PI,$e=zr-Wt,pt=ae(Dr)*ve($e),kt=ve(Dr)*ae(dr)-ae(Dr)*ve(dr)*ae($e);er=-ce(pt,kt)-Math.PI,he=Nt,ye=Mt}var Me=pe(cr,[ae(er),0]),rt=pe(Nr,[ve(er),0]);Ke=ce(Me[1]+rt[1],Me[0]+rt[0])/Math.PI*180,Ne==="previous"&&!(nt===Ie.uid&&Fe.i===Je+1)&&(Ke=null)}if(Ne==="previous"&&!Ie._geo)if(nt===Ie.uid&&Fe.i===Je+1&&l(Qe)&&l(it)){var st=Qe-_e,ft=it-je,zt=Ie.line&&Ie.line.shape||"",Ue=zt.slice(zt.length-1);Ue==="h"&&(ft=0),Ue==="v"&&(st=0),Ke+=ce(ft,st)/Math.PI*180+90}else Ke=null}return _e=Qe,je=it,Je=Fe.i,nt=Ie.uid,Ke}S.getMarkerAngle=at},{"../../components/fx/helpers":139,"../../constants/alignment":219,"../../constants/interactions":223,"../../constants/xmlns_namespaces":225,"../../lib":244,"../../lib/svg_text_utils":267,"../../registry":327,"../../traces/scatter/make_bubble_size_func":384,"../../traces/scatter/subtypes":392,"../color":103,"../colorscale":115,"./symbol_defs":126,"@plotly/d3":11,"fast-isnumeric":17,tinycolor2:68}],126:[function(e,i,o){var a=e("parse-svg-path"),s=e("@plotly/d3").round,n="M0,0Z",l=Math.sqrt(2),u=Math.sqrt(3),h=Math.PI,v=Math.cos,d=Math.sin;i.exports={circle:{n:0,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I="M"+S+",0A"+S+","+S+" 0 1,1 0,-"+S+"A"+S+","+S+" 0 0,1 "+S+",0Z";return R?A(D,R,I):I}},square:{n:1,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M"+S+","+S+"H-"+S+"V-"+S+"H"+S+"Z")}},diamond:{n:2,f:function(P,D,R){if(p(D))return n;var S=s(P*1.3,2);return A(D,R,"M"+S+",0L0,"+S+"L-"+S+",0L0,-"+S+"Z")}},cross:{n:3,f:function(P,D,R){if(p(D))return n;var S=s(P*.4,2),I=s(P*1.2,2);return A(D,R,"M"+I+","+S+"H"+S+"V"+I+"H-"+S+"V"+S+"H-"+I+"V-"+S+"H-"+S+"V-"+I+"H"+S+"V-"+S+"H"+I+"Z")}},x:{n:4,f:function(P,D,R){if(p(D))return n;var S=s(P*.8/l,2),I="l"+S+","+S,T="l"+S+",-"+S,M="l-"+S+",-"+S,z="l-"+S+","+S;return A(D,R,"M0,"+S+I+T+M+T+M+z+M+z+I+z+I+"Z")}},"triangle-up":{n:5,f:function(P,D,R){if(p(D))return n;var S=s(P*2/u,2),I=s(P/2,2),T=s(P,2);return A(D,R,"M-"+S+","+I+"H"+S+"L0,-"+T+"Z")}},"triangle-down":{n:6,f:function(P,D,R){if(p(D))return n;var S=s(P*2/u,2),I=s(P/2,2),T=s(P,2);return A(D,R,"M-"+S+",-"+I+"H"+S+"L0,"+T+"Z")}},"triangle-left":{n:7,f:function(P,D,R){if(p(D))return n;var S=s(P*2/u,2),I=s(P/2,2),T=s(P,2);return A(D,R,"M"+I+",-"+S+"V"+S+"L-"+T+",0Z")}},"triangle-right":{n:8,f:function(P,D,R){if(p(D))return n;var S=s(P*2/u,2),I=s(P/2,2),T=s(P,2);return A(D,R,"M-"+I+",-"+S+"V"+S+"L"+T+",0Z")}},"triangle-ne":{n:9,f:function(P,D,R){if(p(D))return n;var S=s(P*.6,2),I=s(P*1.2,2);return A(D,R,"M-"+I+",-"+S+"H"+S+"V"+I+"Z")}},"triangle-se":{n:10,f:function(P,D,R){if(p(D))return n;var S=s(P*.6,2),I=s(P*1.2,2);return A(D,R,"M"+S+",-"+I+"V"+S+"H-"+I+"Z")}},"triangle-sw":{n:11,f:function(P,D,R){if(p(D))return n;var S=s(P*.6,2),I=s(P*1.2,2);return A(D,R,"M"+I+","+S+"H-"+S+"V-"+I+"Z")}},"triangle-nw":{n:12,f:function(P,D,R){if(p(D))return n;var S=s(P*.6,2),I=s(P*1.2,2);return A(D,R,"M-"+S+","+I+"V-"+S+"H"+I+"Z")}},pentagon:{n:13,f:function(P,D,R){if(p(D))return n;var S=s(P*.951,2),I=s(P*.588,2),T=s(-P,2),M=s(P*-.309,2),z=s(P*.809,2);return A(D,R,"M"+S+","+M+"L"+I+","+z+"H-"+I+"L-"+S+","+M+"L0,"+T+"Z")}},hexagon:{n:14,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I=s(P/2,2),T=s(P*u/2,2);return A(D,R,"M"+T+",-"+I+"V"+I+"L0,"+S+"L-"+T+","+I+"V-"+I+"L0,-"+S+"Z")}},hexagon2:{n:15,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I=s(P/2,2),T=s(P*u/2,2);return A(D,R,"M-"+I+","+T+"H"+I+"L"+S+",0L"+I+",-"+T+"H-"+I+"L-"+S+",0Z")}},octagon:{n:16,f:function(P,D,R){if(p(D))return n;var S=s(P*.924,2),I=s(P*.383,2);return A(D,R,"M-"+I+",-"+S+"H"+I+"L"+S+",-"+I+"V"+I+"L"+I+","+S+"H-"+I+"L-"+S+","+I+"V-"+I+"Z")}},star:{n:17,f:function(P,D,R){if(p(D))return n;var S=P*1.4,I=s(S*.225,2),T=s(S*.951,2),M=s(S*.363,2),z=s(S*.588,2),U=s(-S,2),F=s(S*-.309,2),V=s(S*.118,2),j=s(S*.809,2),H=s(S*.382,2);return A(D,R,"M"+I+","+F+"H"+T+"L"+M+","+V+"L"+z+","+j+"L0,"+H+"L-"+z+","+j+"L-"+M+","+V+"L-"+T+","+F+"H-"+I+"L0,"+U+"Z")}},hexagram:{n:18,f:function(P,D,R){if(p(D))return n;var S=s(P*.66,2),I=s(P*.38,2),T=s(P*.76,2);return A(D,R,"M-"+T+",0l-"+I+",-"+S+"h"+T+"l"+I+",-"+S+"l"+I+","+S+"h"+T+"l-"+I+","+S+"l"+I+","+S+"h-"+T+"l-"+I+","+S+"l-"+I+",-"+S+"h-"+T+"Z")}},"star-triangle-up":{n:19,f:function(P,D,R){if(p(D))return n;var S=s(P*u*.8,2),I=s(P*.8,2),T=s(P*1.6,2),M=s(P*4,2),z="A "+M+","+M+" 0 0 1 ";return A(D,R,"M-"+S+","+I+z+S+","+I+z+"0,-"+T+z+"-"+S+","+I+"Z")}},"star-triangle-down":{n:20,f:function(P,D,R){if(p(D))return n;var S=s(P*u*.8,2),I=s(P*.8,2),T=s(P*1.6,2),M=s(P*4,2),z="A "+M+","+M+" 0 0 1 ";return A(D,R,"M"+S+",-"+I+z+"-"+S+",-"+I+z+"0,"+T+z+S+",-"+I+"Z")}},"star-square":{n:21,f:function(P,D,R){if(p(D))return n;var S=s(P*1.1,2),I=s(P*2,2),T="A "+I+","+I+" 0 0 1 ";return A(D,R,"M-"+S+",-"+S+T+"-"+S+","+S+T+S+","+S+T+S+",-"+S+T+"-"+S+",-"+S+"Z")}},"star-diamond":{n:22,f:function(P,D,R){if(p(D))return n;var S=s(P*1.4,2),I=s(P*1.9,2),T="A "+I+","+I+" 0 0 1 ";return A(D,R,"M-"+S+",0"+T+"0,"+S+T+S+",0"+T+"0,-"+S+T+"-"+S+",0Z")}},"diamond-tall":{n:23,f:function(P,D,R){if(p(D))return n;var S=s(P*.7,2),I=s(P*1.4,2);return A(D,R,"M0,"+I+"L"+S+",0L0,-"+I+"L-"+S+",0Z")}},"diamond-wide":{n:24,f:function(P,D,R){if(p(D))return n;var S=s(P*1.4,2),I=s(P*.7,2);return A(D,R,"M0,"+I+"L"+S+",0L0,-"+I+"L-"+S+",0Z")}},hourglass:{n:25,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M"+S+","+S+"H-"+S+"L"+S+",-"+S+"H-"+S+"Z")},noDot:!0},bowtie:{n:26,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M"+S+","+S+"V-"+S+"L-"+S+","+S+"V-"+S+"Z")},noDot:!0},"circle-cross":{n:27,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M0,"+S+"V-"+S+"M"+S+",0H-"+S+"M"+S+",0A"+S+","+S+" 0 1,1 0,-"+S+"A"+S+","+S+" 0 0,1 "+S+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I=s(P/l,2);return A(D,R,"M"+I+","+I+"L-"+I+",-"+I+"M"+I+",-"+I+"L-"+I+","+I+"M"+S+",0A"+S+","+S+" 0 1,1 0,-"+S+"A"+S+","+S+" 0 0,1 "+S+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M0,"+S+"V-"+S+"M"+S+",0H-"+S+"M"+S+","+S+"H-"+S+"V-"+S+"H"+S+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M"+S+","+S+"L-"+S+",-"+S+"M"+S+",-"+S+"L-"+S+","+S+"M"+S+","+S+"H-"+S+"V-"+S+"H"+S+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(P,D,R){if(p(D))return n;var S=s(P*1.3,2);return A(D,R,"M"+S+",0L0,"+S+"L-"+S+",0L0,-"+S+"ZM0,-"+S+"V"+S+"M-"+S+",0H"+S)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(P,D,R){if(p(D))return n;var S=s(P*1.3,2),I=s(P*.65,2);return A(D,R,"M"+S+",0L0,"+S+"L-"+S+",0L0,-"+S+"ZM-"+I+",-"+I+"L"+I+","+I+"M-"+I+","+I+"L"+I+",-"+I)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(P,D,R){if(p(D))return n;var S=s(P*1.4,2);return A(D,R,"M0,"+S+"V-"+S+"M"+S+",0H-"+S)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M"+S+","+S+"L-"+S+",-"+S+"M"+S+",-"+S+"L-"+S+","+S)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(P,D,R){if(p(D))return n;var S=s(P*1.2,2),I=s(P*.85,2);return A(D,R,"M0,"+S+"V-"+S+"M"+S+",0H-"+S+"M"+I+","+I+"L-"+I+",-"+I+"M"+I+",-"+I+"L-"+I+","+I)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(P,D,R){if(p(D))return n;var S=s(P/2,2),I=s(P,2);return A(D,R,"M"+S+","+I+"V-"+I+"M"+(S-I)+",-"+I+"V"+I+"M"+I+","+S+"H-"+I+"M-"+I+","+(S-I)+"H"+I)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(P,D,R){if(p(D))return n;var S=s(P*1.2,2),I=s(P*1.6,2),T=s(P*.8,2);return A(D,R,"M-"+S+","+T+"L0,0M"+S+","+T+"L0,0M0,-"+I+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(P,D,R){if(p(D))return n;var S=s(P*1.2,2),I=s(P*1.6,2),T=s(P*.8,2);return A(D,R,"M-"+S+",-"+T+"L0,0M"+S+",-"+T+"L0,0M0,"+I+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(P,D,R){if(p(D))return n;var S=s(P*1.2,2),I=s(P*1.6,2),T=s(P*.8,2);return A(D,R,"M"+T+","+S+"L0,0M"+T+",-"+S+"L0,0M-"+I+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(P,D,R){if(p(D))return n;var S=s(P*1.2,2),I=s(P*1.6,2),T=s(P*.8,2);return A(D,R,"M-"+T+","+S+"L0,0M-"+T+",-"+S+"L0,0M"+I+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(P,D,R){if(p(D))return n;var S=s(P*1.4,2);return A(D,R,"M"+S+",0H-"+S)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(P,D,R){if(p(D))return n;var S=s(P*1.4,2);return A(D,R,"M0,"+S+"V-"+S)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M"+S+",-"+S+"L-"+S+","+S)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(P,D,R){if(p(D))return n;var S=s(P,2);return A(D,R,"M"+S+","+S+"L-"+S+",-"+S)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I=s(P*2,2);return A(D,R,"M0,0L-"+S+","+I+"H"+S+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I=s(P*2,2);return A(D,R,"M0,0L-"+S+",-"+I+"H"+S+"Z")},noDot:!0},"arrow-left":{n:47,f:function(P,D,R){if(p(D))return n;var S=s(P*2,2),I=s(P,2);return A(D,R,"M0,0L"+S+",-"+I+"V"+I+"Z")},noDot:!0},"arrow-right":{n:48,f:function(P,D,R){if(p(D))return n;var S=s(P*2,2),I=s(P,2);return A(D,R,"M0,0L-"+S+",-"+I+"V"+I+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I=s(P*2,2);return A(D,R,"M-"+S+",0H"+S+"M0,0L-"+S+","+I+"H"+S+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(P,D,R){if(p(D))return n;var S=s(P,2),I=s(P*2,2);return A(D,R,"M-"+S+",0H"+S+"M0,0L-"+S+",-"+I+"H"+S+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(P,D,R){if(p(D))return n;var S=s(P*2,2),I=s(P,2);return A(D,R,"M0,-"+I+"V"+I+"M0,0L"+S+",-"+I+"V"+I+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(P,D,R){if(p(D))return n;var S=s(P*2,2),I=s(P,2);return A(D,R,"M0,-"+I+"V"+I+"M0,0L-"+S+",-"+I+"V"+I+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(P,D,R){if(p(D))return n;var S=h/2.5,I=2*P*v(S),T=2*P*d(S);return A(D,R,"M0,0L"+-I+","+T+"L"+I+","+T+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(P,D,R){if(p(D))return n;var S=h/4,I=2*P*v(S),T=2*P*d(S);return A(D,R,"M0,0L"+-I+","+T+"A "+2*P+","+2*P+" 0 0 1 "+I+","+T+"Z")},backoff:.4,noDot:!0}};function p(P){return P===null}var _,b,x,E;function A(P,D,R){if((!P||P%360===0)&&!D)return R;if(x===P&&E===D&&_===R)return b;x=P,E=D,_=R;function S(q,we){var ee=v(q),X=d(q),re=we[0],de=we[1]+(D||0);return[re*ee-de*X,re*X+de*ee]}for(var I=P/180*h,T=0,M=0,z=a(R),U="",F=0;F<z.length;F++){var V=z[F],j=V[0],H=T,Y=M;if(j==="M"||j==="L")T=+V[1],M=+V[2];else if(j==="m"||j==="l")T+=+V[1],M+=+V[2];else if(j==="H")T=+V[1];else if(j==="h")T+=+V[1];else if(j==="V")M=+V[1];else if(j==="v")M+=+V[1];else if(j==="A"){T=+V[1],M=+V[2];var J=S(I,[+V[6],+V[7]]);V[6]=J[0],V[7]=J[1],V[3]=+V[3]+P}(j==="H"||j==="V")&&(j="L"),(j==="h"||j==="v")&&(j="l"),(j==="m"||j==="l")&&(T-=H,M-=Y);var ne=S(I,[T,M]);(j==="H"||j==="V")&&(j="L"),(j==="M"||j==="L"||j==="m"||j==="l")&&(V[1]=ne[0],V[2]=ne[1]),V[0]=j,U+=V[0]+V.slice(1).join(",")}return b=U,U}},{"@plotly/d3":11,"parse-svg-path":56}],127:[function(e,i,o){i.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],128:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../registry"),n=e("../../plots/cartesian/axes"),l=e("../../lib"),u=e("./compute_error");i.exports=function(d){for(var p=d.calcdata,_=0;_<p.length;_++){var b=p[_],x=b[0].trace;if(x.visible===!0&&s.traceIs(x,"errorBarsOK")){var E=n.getFromId(d,x.xaxis),A=n.getFromId(d,x.yaxis);h(b,x,E,"x"),h(b,x,A,"y")}}};function h(v,d,p,_){var b=d["error_"+_]||{},x=b.visible&&["linear","log"].indexOf(p.type)!==-1,E=[];if(!!x){for(var A=u(b),P=0;P<v.length;P++){var D=v[P],R=D.i;if(R===void 0)R=P;else if(R===null)continue;var S=D[_];if(!!a(p.c2l(S))){var I=A(S,R);if(a(I[0])&&a(I[1])){var T=D[_+"s"]=S-I[0],M=D[_+"h"]=S+I[1];E.push(T,M)}}}var z=p._id,U=d._extremes[z],F=n.findExtremes(p,E,l.extendFlat({tozero:U.opts.tozero},{padded:!0}));U.min=U.min.concat(F.min),U.max=U.max.concat(F.max)}}},{"../../lib":244,"../../plots/cartesian/axes":291,"../../registry":327,"./compute_error":129,"fast-isnumeric":17}],129:[function(e,i,o){i.exports=function(n){var l=n.type,u=n.symmetric;if(l==="data"){var h=n.array||[];if(u)return function(b,x){var E=+h[x];return[E,E]};var v=n.arrayminus||[];return function(b,x){var E=+h[x],A=+v[x];return!isNaN(E)||!isNaN(A)?[A||0,E||0]:[NaN,NaN]}}else{var d=a(l,n.value),p=a(l,n.valueminus);return u||n.valueminus===void 0?function(b){var x=d(b);return[x,x]}:function(b){return[p(b),d(b)]}}};function a(s,n){if(s==="percent")return function(l){return Math.abs(l*n/100)};if(s==="constant")return function(){return Math.abs(n)};if(s==="sqrt")return function(l){return Math.sqrt(Math.abs(l))}}},{}],130:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../registry"),n=e("../../lib"),l=e("../../plot_api/plot_template"),u=e("./attributes");i.exports=function(h,v,d,p){var _="error_"+p.axis,b=l.newContainer(v,_),x=h[_]||{};function E(T,M){return n.coerce(x,b,u,T,M)}var A=x.array!==void 0||x.value!==void 0||x.type==="sqrt",P=E("visible",A);if(P!==!1){var D=E("type","array"in x?"data":"percent"),R=!0;D!=="sqrt"&&(R=E("symmetric",!((D==="data"?"arrayminus":"valueminus")in x))),D==="data"?(E("array"),E("traceref"),R||(E("arrayminus"),E("tracerefminus"))):(D==="percent"||D==="constant")&&(E("value"),R||E("valueminus"));var S="copy_"+p.inherit+"style";if(p.inherit){var I=v["error_"+p.inherit];(I||{}).visible&&E(S,!(x.color||a(x.thickness)||a(x.width)))}(!p.inherit||!b[S])&&(E("color",d),E("thickness"),E("width",s.traceIs(v,"gl3d")?0:4))}}},{"../../lib":244,"../../plot_api/plot_template":280,"../../registry":327,"./attributes":127,"fast-isnumeric":17}],131:[function(e,i,o){var a=e("../../lib"),s=e("../../plot_api/edit_types").overrideAll,n=e("./attributes"),l={error_x:a.extendFlat({},n),error_y:a.extendFlat({},n)};delete l.error_x.copy_zstyle,delete l.error_y.copy_zstyle,delete l.error_y.copy_ystyle;var u={error_x:a.extendFlat({},n),error_y:a.extendFlat({},n),error_z:a.extendFlat({},n)};delete u.error_x.copy_ystyle,delete u.error_y.copy_ystyle,delete u.error_z.copy_ystyle,delete u.error_z.copy_zstyle,i.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:l,bar:l,histogram:l,scatter3d:s(u,"calc","nested"),scattergl:s(l,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:h};function h(v,d,p){(d.error_y||{}).visible&&(p.yerr=v.yh-v.y,d.error_y.symmetric||(p.yerrneg=v.y-v.ys)),(d.error_x||{}).visible&&(p.xerr=v.xh-v.x,d.error_x.symmetric||(p.xerrneg=v.x-v.xs))}},{"../../lib":244,"../../plot_api/edit_types":273,"./attributes":127,"./calc":128,"./compute_error":129,"./defaults":130,"./plot":132,"./style":133}],132:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("../drawing"),l=e("../../traces/scatter/subtypes");i.exports=function(v,d,p,_){var b,x=p.xaxis,E=p.yaxis,A=_&&_.duration>0;d.each(function(P){var D=P[0].trace,R=D.error_x||{},S=D.error_y||{},I;D.ids&&(I=function(U){return U.id});var T=l.hasMarkers(D)&&D.marker.maxdisplayed>0;!S.visible&&!R.visible&&(P=[]);var M=a.select(this).selectAll("g.errorbar").data(P,I);if(M.exit().remove(),!!P.length){R.visible||M.selectAll("path.xerror").remove(),S.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var z=M.enter().append("g").classed("errorbar",!0);A&&z.style("opacity",0).transition().duration(_.duration).style("opacity",1),n.setClipUrl(M,p.layerClipId,v),M.each(function(U){var F=a.select(this),V=u(U,x,E);if(!(T&&!U.vis)){var j,H=F.select("path.yerror");if(S.visible&&s(V.x)&&s(V.yh)&&s(V.ys)){var Y=S.width;j="M"+(V.x-Y)+","+V.yh+"h"+2*Y+"m-"+Y+",0V"+V.ys,V.noYS||(j+="m-"+Y+",0h"+2*Y),b=!H.size(),b?H=F.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):A&&(H=H.transition().duration(_.duration).ease(_.easing)),H.attr("d",j)}else H.remove();var J=F.select("path.xerror");if(R.visible&&s(V.y)&&s(V.xh)&&s(V.xs)){var ne=(R.copy_ystyle?S:R).width;j="M"+V.xh+","+(V.y-ne)+"v"+2*ne+"m0,-"+ne+"H"+V.xs,V.noXS||(j+="m0,-"+ne+"v"+2*ne),b=!J.size(),b?J=F.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):A&&(J=J.transition().duration(_.duration).ease(_.easing)),J.attr("d",j)}else J.remove()}})}})};function u(h,v,d){var p={x:v.c2p(h.x),y:d.c2p(h.y)};return h.yh!==void 0&&(p.yh=d.c2p(h.yh),p.ys=d.c2p(h.ys),s(p.ys)||(p.noYS=!0,p.ys=d.c2p(h.ys,!0))),h.xh!==void 0&&(p.xh=v.c2p(h.xh),p.xs=v.c2p(h.xs),s(p.xs)||(p.noXS=!0,p.xs=v.c2p(h.xs,!0))),p}},{"../../traces/scatter/subtypes":392,"../drawing":125,"@plotly/d3":11,"fast-isnumeric":17}],133:[function(e,i,o){var a=e("@plotly/d3"),s=e("../color");i.exports=function(l){l.each(function(u){var h=u[0].trace,v=h.error_y||{},d=h.error_x||{},p=a.select(this);p.selectAll("path.yerror").style("stroke-width",v.thickness+"px").call(s.stroke,v.color),d.copy_ystyle&&(d=v),p.selectAll("path.xerror").style("stroke-width",d.thickness+"px").call(s.stroke,d.color)})}},{"../color":103,"@plotly/d3":11}],134:[function(e,i,o){var a=e("../../plots/font_attributes"),s=e("./layout_attributes").hoverlabel,n=e("../../lib/extend").extendFlat;i.exports={hoverlabel:{bgcolor:n({},s.bgcolor,{arrayOk:!0}),bordercolor:n({},s.bordercolor,{arrayOk:!0}),font:a({arrayOk:!0,editType:"none"}),align:n({},s.align,{arrayOk:!0}),namelength:n({},s.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":238,"../../plots/font_attributes":319,"./layout_attributes":144}],135:[function(e,i,o){var a=e("../../lib"),s=e("../../registry");i.exports=function(u){var h=u.calcdata,v=u._fullLayout;function d(E){return function(A){return a.coerceHoverinfo({hoverinfo:A},{_module:E._module},v)}}for(var p=0;p<h.length;p++){var _=h[p],b=_[0].trace;if(!s.traceIs(b,"pie-like")){var x=s.traceIs(b,"2dMap")?n:a.fillArray;x(b.hoverinfo,_,"hi",d(b)),b.hovertemplate&&x(b.hovertemplate,_,"ht"),b.hoverlabel&&(x(b.hoverlabel.bgcolor,_,"hbg"),x(b.hoverlabel.bordercolor,_,"hbc"),x(b.hoverlabel.font.size,_,"hts"),x(b.hoverlabel.font.color,_,"htc"),x(b.hoverlabel.font.family,_,"htf"),x(b.hoverlabel.namelength,_,"hnl"),x(b.hoverlabel.align,_,"hta"))}}};function n(l,u,h,v){v=v||a.identity,Array.isArray(l)&&(u[0][h]=v(l))}},{"../../lib":244,"../../registry":327}],136:[function(e,i,o){var a=e("../../registry"),s=e("./hover").hover;i.exports=function(l,u,h){var v=a.getComponentMethod("annotations","onClick")(l,l._hoverdata);h!==void 0&&s(l,u,h,!0);function d(){l.emit("plotly_click",{points:l._hoverdata,event:u})}l._hoverdata&&u&&u.target&&(v&&v.then?v.then(d):d(),u.stopImmediatePropagation&&u.stopImmediatePropagation())}},{"../../registry":327,"./hover":140}],137:[function(e,i,o){i.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],138:[function(e,i,o){var a=e("../../lib"),s=e("./attributes"),n=e("./hoverlabel_defaults");i.exports=function(u,h,v,d){function p(b,x){return a.coerce(u,h,s,b,x)}var _=a.extendFlat({},d.hoverlabel);h.hovertemplate&&(_.namelength=-1),n(u,h,p,_)}},{"../../lib":244,"./attributes":134,"./hoverlabel_defaults":141}],139:[function(e,i,o){var a=e("../../lib");o.getSubplot=function(v){return v.subplot||v.xaxis+v.yaxis||v.geo},o.isTraceInSubplots=function(v,d){if(v.type==="splom"){for(var p=v.xaxes||[],_=v.yaxes||[],b=0;b<p.length;b++)for(var x=0;x<_.length;x++)if(d.indexOf(p[b]+_[x])!==-1)return!0;return!1}return d.indexOf(o.getSubplot(v))!==-1},o.flat=function(v,d){for(var p=new Array(v.length),_=0;_<v.length;_++)p[_]=d;return p},o.p2c=function(v,d){for(var p=new Array(v.length),_=0;_<v.length;_++)p[_]=v[_].p2c(d);return p},o.getDistanceFunction=function(v,d,p,_){return v==="closest"?_||o.quadrature(d,p):v.charAt(0)==="x"?d:p},o.getClosest=function(v,d,p){if(p.index!==!1)p.index>=0&&p.index<v.length?p.distance=0:p.index=!1;else for(var _=0;_<v.length;_++){var b=d(v[_]);b<=p.distance&&(p.index=_,p.distance=b)}return p},o.inbox=function(v,d,p){return v*d<0||v===0?p:1/0},o.quadrature=function(v,d){return function(p){var _=v(p),b=d(p);return Math.sqrt(_*_+b*b)}},o.makeEventData=function(v,d,p){var _="index"in v?v.index:v.pointNumber,b={data:d._input,fullData:d,curveNumber:d.index,pointNumber:_};if(d._indexToPoints){var x=d._indexToPoints[_];x.length===1?b.pointIndex=x[0]:b.pointIndices=x}else b.pointIndex=_;return d._module.eventData?b=d._module.eventData(b,v,d,p,_):("xVal"in v?b.x=v.xVal:"x"in v&&(b.x=v.x),"yVal"in v?b.y=v.yVal:"y"in v&&(b.y=v.y),v.xa&&(b.xaxis=v.xa),v.ya&&(b.yaxis=v.ya),v.zLabelVal!==void 0&&(b.z=v.zLabelVal)),o.appendArrayPointValue(b,d,_),b},o.appendArrayPointValue=function(v,d,p){var _=d._arrayAttrs;if(!!_)for(var b=0;b<_.length;b++){var x=_[b],E=n(x);if(v[E]===void 0){var A=a.nestedProperty(d,x).get(),P=l(A,p);P!==void 0&&(v[E]=P)}}},o.appendArrayMultiPointValues=function(v,d,p){var _=d._arrayAttrs;if(!!_)for(var b=0;b<_.length;b++){var x=_[b],E=n(x);if(v[E]===void 0){for(var A=a.nestedProperty(d,x).get(),P=new Array(p.length),D=0;D<p.length;D++)P[D]=l(A,p[D]);v[E]=P}}};var s={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function n(v){return s[v]||v}function l(v,d){if(Array.isArray(d)){if(Array.isArray(v)&&Array.isArray(v[d[0]]))return v[d[0]][d[1]]}else return v[d]}var u={x:!0,y:!0},h={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(v){return typeof v!="string"?!1:!!h[v]},o.isXYhover=function(v){return typeof v!="string"?!1:!!u[v]}},{"../../lib":244}],140:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("tinycolor2"),l=e("../../lib"),u=l.strTranslate,h=l.strRotate,v=e("../../lib/events"),d=e("../../lib/svg_text_utils"),p=e("../../lib/override_cursor"),_=e("../drawing"),b=e("../color"),x=e("../dragelement"),E=e("../../plots/cartesian/axes"),A=e("../../registry"),P=e("./helpers"),D=e("./constants"),R=e("../legend/defaults"),S=e("../legend/draw"),I=D.YANGLE,T=Math.PI*I/180,M=1/Math.sin(T),z=Math.cos(T),U=Math.sin(T),F=D.HOVERARROWSIZE,V=D.HOVERTEXTPAD,j={box:!0,ohlc:!0,violin:!0,candlestick:!0},H={scatter:!0,scattergl:!0,splom:!0};o.hover=function(te,ie,ce,ae){te=l.getGraphDiv(te);var ve=ie.target;l.throttle(te._fullLayout._uid+D.HOVERID,D.HOVERMINTIME,function(){Y(te,ie,ce,ae,ve)})},o.loneHover=function(te,ie){var ce=!0;Array.isArray(te)||(ce=!1,te=[te]);var ae=ie.gd,ve=ke(ae),pe=$(ae),he=te.map(function(Ie){var Ke=Ie._x0||Ie.x0||Ie.x||0,Qe=Ie._x1||Ie.x1||Ie.x||0,it=Ie._y0||Ie.y0||Ie.y||0,Ne=Ie._y1||Ie.y1||Ie.y||0,ht=Ie.eventData;if(ht){var Tt=Math.min(Ke,Qe),Xt=Math.max(Ke,Qe),Nt=Math.min(it,Ne),Mt=Math.max(it,Ne),Vt=Ie.trace;if(A.traceIs(Vt,"gl3d")){var Yt=ae._fullLayout[Vt.scene]._scene.container,cr=Yt.offsetLeft,Nr=Yt.offsetTop;Tt+=cr,Xt+=cr,Nt+=Nr,Mt+=Nr}ht.bbox={x0:Tt+pe,x1:Xt+pe,y0:Nt+ve,y1:Mt+ve},ie.inOut_bbox&&ie.inOut_bbox.push(ht.bbox)}else ht=!1;return{color:Ie.color||b.defaultLine,x0:Ie.x0||Ie.x||0,x1:Ie.x1||Ie.x||0,y0:Ie.y0||Ie.y||0,y1:Ie.y1||Ie.y||0,xLabel:Ie.xLabel,yLabel:Ie.yLabel,zLabel:Ie.zLabel,text:Ie.text,name:Ie.name,idealAlign:Ie.idealAlign,borderColor:Ie.borderColor,fontFamily:Ie.fontFamily,fontSize:Ie.fontSize,fontColor:Ie.fontColor,nameLength:Ie.nameLength,textAlign:Ie.textAlign,trace:Ie.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ie.hovertemplate||!1,hovertemplateLabels:Ie.hovertemplateLabels||!1,eventData:ht}}),ye=!1,_e=q(he,{gd:ae,hovermode:"closest",rotateLabels:ye,bgColor:ie.bgColor||b.background,container:a.select(ie.container),outerContainer:ie.outerContainer||ie.container}),je=5,Je=0,nt=0;_e.sort(function(Ie,Ke){return Ie.y0-Ke.y0}).each(function(Ie,Ke){var Qe=Ie.y0-Ie.by/2;Qe-je<Je?Ie.offset=Je-Qe+je:Ie.offset=0,Je=Qe+Ie.by+Ie.offset,Ke===ie.anchorIndex&&(nt=Ie.offset)}).each(function(Ie){Ie.offset-=nt});var at=ae._fullLayout._invScaleX,Fe=ae._fullLayout._invScaleY;return X(_e,ye,at,Fe),ce?_e:_e.node()};function Y(K,te,ie,ce,ae){ie||(ie="xy");var ve=Array.isArray(ie)?ie:[ie],pe=K._fullLayout,he=pe._plots||[],ye=he[ie],_e=pe._has("cartesian");if(ye){var je=ye.overlays.map(function(Ur){return Ur.id});ve=ve.concat(je)}for(var Je=ve.length,nt=new Array(Je),at=new Array(Je),Fe=!1,Ie=0;Ie<Je;Ie++){var Ke=ve[Ie];if(he[Ke])Fe=!0,nt[Ie]=he[Ke].xaxis,at[Ie]=he[Ke].yaxis;else if(pe[Ke]&&pe[Ke]._subplot){var Qe=pe[Ke]._subplot;nt[Ie]=Qe.xaxis,at[Ie]=Qe.yaxis}else{l.warn("Unrecognized subplot: "+Ke);return}}var it=te.hovermode||pe.hovermode;if(it&&!Fe&&(it="closest"),["x","y","closest","x unified","y unified"].indexOf(it)===-1||!K.calcdata||K.querySelector(".zoombox")||K._dragging)return x.unhoverRaw(K,te);var Ne=pe.hoverdistance;Ne===-1&&(Ne=1/0);var ht=pe.spikedistance;ht===-1&&(ht=1/0);var Tt=[],Xt=[],Nt,Mt,Vt,Yt,cr,Nr,er,Wt,dr,zr,Dr,$e,pt,kt={hLinePoint:null,vLinePoint:null},Me=!1;if(Array.isArray(te))for(it="array",Vt=0;Vt<te.length;Vt++)cr=K.calcdata[te[Vt].curveNumber||0],cr&&(Nr=cr[0].trace,cr[0].trace.hoverinfo!=="skip"&&(Xt.push(cr),Nr.orientation==="h"&&(Me=!0)));else{for(Yt=0;Yt<K.calcdata.length;Yt++)cr=K.calcdata[Yt],Nr=cr[0].trace,Nr.hoverinfo!=="skip"&&P.isTraceInSubplots(Nr,ve)&&(Xt.push(cr),Nr.orientation==="h"&&(Me=!0));var rt=!ae,st,ft;if(rt)"xpx"in te?st=te.xpx:st=nt[0]._length/2,"ypx"in te?ft=te.ypx:ft=at[0]._length/2;else{if(v.triggerHandler(K,"plotly_beforehover",te)===!1)return;var zt=ae.getBoundingClientRect();st=te.clientX-zt.left,ft=te.clientY-zt.top,pe._calcInverseTransform(K);var Ue=l.apply3DTransform(pe._invTransform)(st,ft);if(st=Ue[0],ft=Ue[1],st<0||st>nt[0]._length||ft<0||ft>at[0]._length)return x.unhoverRaw(K,te)}if(te.pointerX=st+nt[0]._offset,te.pointerY=ft+at[0]._offset,"xval"in te?Nt=P.flat(ve,te.xval):Nt=P.p2c(nt,st),"yval"in te?Mt=P.flat(ve,te.yval):Mt=P.p2c(at,ft),!s(Nt[0])||!s(Mt[0]))return l.warn("Fx.hover failed",te,K),x.unhoverRaw(K,te)}var Ae=1/0;function Oe(Ur,Sn){for(Yt=0;Yt<Xt.length;Yt++)if(cr=Xt[Yt],!(!cr||!cr[0]||!cr[0].trace)&&(Nr=cr[0].trace,!(Nr.visible!==!0||Nr._length===0)&&["carpet","contourcarpet"].indexOf(Nr._module.name)===-1)){if(Nr.type==="splom"?(Wt=0,er=ve[Wt]):(er=P.getSubplot(Nr),Wt=ve.indexOf(er)),dr=it,P.isUnifiedHover(dr)&&(dr=dr.charAt(0)),$e={cd:cr,trace:Nr,xa:nt[Wt],ya:at[Wt],maxHoverDistance:Ne,maxSpikeDistance:ht,index:!1,distance:Math.min(Ae,Ne),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:b.defaultLine,name:Nr.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},pe[er]&&($e.subplot=pe[er]._subplot),pe._splomScenes&&pe._splomScenes[Nr.uid]&&($e.scene=pe._splomScenes[Nr.uid]),pt=Tt.length,dr==="array"){var wn=te[Yt];"pointNumber"in wn?($e.index=wn.pointNumber,dr="closest"):(dr="","xval"in wn&&(zr=wn.xval,dr="x"),"yval"in wn&&(Dr=wn.yval,dr=dr?"closest":"y"))}else Ur!==void 0&&Sn!==void 0?(zr=Ur,Dr=Sn):(zr=Nt[Wt],Dr=Mt[Wt]);if(Ne!==0)if(Nr._module&&Nr._module.hoverPoints){var hn=Nr._module.hoverPoints($e,zr,Dr,dr,{finiteRange:!0,hoverLayer:pe._hoverlayer});if(hn)for(var bn,mn=0;mn<hn.length;mn++)bn=hn[mn],s(bn.x0)&&s(bn.y0)&&Tt.push(re(bn,it))}else l.log("Unrecognized trace type in hover:",Nr);if(it==="closest"&&Tt.length>pt&&(Tt.splice(0,pt),Ae=Tt[0].distance),_e&&ht!==0&&Tt.length===0){$e.distance=ht,$e.index=!1;var Dn=Nr._module.hoverPoints($e,zr,Dr,"closest",{hoverLayer:pe._hoverlayer});if(Dn&&(Dn=Dn.filter(function(Ai){return Ai.spikeDistance<=ht})),Dn&&Dn.length){var Yn,hi=Dn.filter(function(Ai){return Ai.xa.showspikes&&Ai.xa.spikesnap!=="hovered data"});if(hi.length){var mi=hi[0];s(mi.x0)&&s(mi.y0)&&(Yn=Ve(mi),(!kt.vLinePoint||kt.vLinePoint.spikeDistance>Yn.spikeDistance)&&(kt.vLinePoint=Yn))}var Zi=Dn.filter(function(Ai){return Ai.ya.showspikes&&Ai.ya.spikesnap!=="hovered data"});if(Zi.length){var Bn=Zi[0];s(Bn.x0)&&s(Bn.y0)&&(Yn=Ve(Bn),(!kt.hLinePoint||kt.hLinePoint.spikeDistance>Yn.spikeDistance)&&(kt.hLinePoint=Yn))}}}}}Oe();function We(Ur,Sn,wn){for(var hn=null,bn=1/0,mn,Dn=0;Dn<Ur.length;Dn++)mn=Ur[Dn].spikeDistance,wn&&Dn===0&&(mn=-1/0),mn<=bn&&mn<=Sn&&(hn=Ur[Dn],bn=mn);return hn}function Ve(Ur){return Ur?{xa:Ur.xa,ya:Ur.ya,x:Ur.xSpike!==void 0?Ur.xSpike:(Ur.x0+Ur.x1)/2,y:Ur.ySpike!==void 0?Ur.ySpike:(Ur.y0+Ur.y1)/2,distance:Ur.distance,spikeDistance:Ur.spikeDistance,curveNumber:Ur.trace.index,color:Ur.color,pointNumber:Ur.index}:null}var lt={fullLayout:pe,container:pe._hoverlayer,event:te},mt=K._spikepoints,dt={vLinePoint:kt.vLinePoint,hLinePoint:kt.hLinePoint};K._spikepoints=dt;var At=function(){Tt.sort(function(Ur,Sn){return Ur.distance-Sn.distance}),Tt=Re(Tt,it)};At();var Bt=it.charAt(0),ir=(Bt==="x"||Bt==="y")&&Tt[0]&&H[Tt[0].trace.type];if(_e&&ht!==0&&Tt.length!==0){var tr=Tt.filter(function(Ur){return Ur.ya.showspikes}),vt=We(tr,ht,ir);kt.hLinePoint=Ve(vt);var pr=Tt.filter(function(Ur){return Ur.xa.showspikes}),Gt=We(pr,ht,ir);kt.vLinePoint=Ve(Gt)}if(Tt.length===0){var Mr=x.unhoverRaw(K,te);return _e&&(kt.hLinePoint!==null||kt.vLinePoint!==null)&&xe(mt)&&de(K,kt,lt),Mr}if(_e&&xe(mt)&&de(K,kt,lt),P.isXYhover(dr)&&Tt[0].length!==0&&Tt[0].trace.type!=="splom"){var Rr=Tt[0];j[Rr.trace.type]?Tt=Tt.filter(function(Ur){return Ur.trace.index===Rr.trace.index}):Tt=[Rr];var Yr=Tt.length,Kr=Ee("x",Rr,pe),vr=Ee("y",Rr,pe);Oe(Kr,vr);var Xr=[],$r={},Le=0,De=function(Ur){var Sn=j[Ur.trace.type]?J(Ur):Ur.trace.index;if(!$r[Sn])Le++,$r[Sn]=Le,Xr.push(Ur);else{var wn=$r[Sn]-1,hn=Xr[wn];wn>0&&Math.abs(Ur.distance)<Math.abs(hn.distance)&&(Xr[wn]=Ur)}},bt;for(bt=0;bt<Yr;bt++)De(Tt[bt]);for(bt=Tt.length-1;bt>Yr-1;bt--)De(Tt[bt]);Tt=Xr,At()}var xt=K._hoverdata,Ct=[],Rt=ke(K),Lt=$(K);for(Vt=0;Vt<Tt.length;Vt++){var Pt=Tt[Vt],nr=P.makeEventData(Pt,Pt.trace,Pt.cd);if(Pt.hovertemplate!==!1){var Tr=!1;Pt.cd[Pt.index]&&Pt.cd[Pt.index].ht&&(Tr=Pt.cd[Pt.index].ht),Pt.hovertemplate=Tr||Pt.trace.hovertemplate||!1}if(Pt.xa&&Pt.ya){var gr=Pt.x0+Pt.xa._offset,$t=Pt.x1+Pt.xa._offset,mr=Pt.y0+Pt.ya._offset,Pr=Pt.y1+Pt.ya._offset,wr=Math.min(gr,$t),fr=Math.max(gr,$t),Ir=Math.min(mr,Pr),Vr=Math.max(mr,Pr);nr.bbox={x0:wr+Lt,x1:fr+Lt,y0:Ir+Rt,y1:Vr+Rt}}Pt.eventData=[nr],Ct.push(nr)}K._hoverdata=Ct;var _r=it==="y"&&(Xt.length>1||Tt.length>1)||it==="closest"&&Me&&Tt.length>1,Gr=b.combine(pe.plot_bgcolor||b.background,pe.paper_bgcolor),qr=q(Tt,{gd:K,hovermode:it,rotateLabels:_r,bgColor:Gr,container:pe._hoverlayer,outerContainer:pe._paper.node(),commonLabelOpts:pe.hoverlabel,hoverdistance:pe.hoverdistance});if(P.isUnifiedHover(it)||(ee(qr,_r?"xa":"ya",pe),X(qr,_r,pe._invScaleX,pe._invScaleY)),ae&&ae.tagName){var tn=A.getComponentMethod("annotations","hasClickToShow")(K,Ct);p(a.select(ae),tn?"pointer":"")}!ae||ce||!me(K,te,xt)||(xt&&K.emit("plotly_unhover",{event:te,points:xt}),K.emit("plotly_hover",{event:te,points:K._hoverdata,xaxes:nt,yaxes:at,xvals:Nt,yvals:Mt}))}function J(K){return[K.trace.index,K.index,K.x0,K.y0,K.name,K.attr,K.xa?K.xa._id:"",K.ya?K.ya._id:""].join(",")}var ne=/<extra>([\s\S]*)<\/extra>/;function q(K,te){var ie=te.gd,ce=ie._fullLayout,ae=te.hovermode,ve=te.rotateLabels,pe=te.bgColor,he=te.container,ye=te.outerContainer,_e=te.commonLabelOpts||{};if(K.length===0)return[[]];var je=te.fontFamily||D.HOVERFONT,Je=te.fontSize||D.HOVERFONTSIZE,nt=K[0],at=nt.xa,Fe=nt.ya,Ie=ae.charAt(0),Ke=nt[Ie+"Label"],Qe=le(ie,ye),it=Qe.top,Ne=Qe.width,ht=Qe.height,Tt=Ke!==void 0&&nt.distance<=te.hoverdistance&&(ae==="x"||ae==="y");if(Tt){var Xt=!0,Nt,Mt;for(Nt=0;Nt<K.length;Nt++)if(Xt&&K[Nt].zLabel===void 0&&(Xt=!1),Mt=K[Nt].hoverinfo||K[Nt].trace.hoverinfo,Mt){var Vt=Array.isArray(Mt)?Mt:Mt.split("+");if(Vt.indexOf("all")===-1&&Vt.indexOf(ae)===-1){Tt=!1;break}}Xt&&(Tt=!1)}var Yt=he.selectAll("g.axistext").data(Tt?[0]:[]);if(Yt.enter().append("g").classed("axistext",!0),Yt.exit().remove(),Yt.each(function(){var Gt=a.select(this),Mr=l.ensureSingle(Gt,"path","",function(Pr){Pr.style({"stroke-width":"1px"})}),Rr=l.ensureSingle(Gt,"text","",function(Pr){Pr.attr("data-notex",1)}),Yr=_e.bgcolor||b.defaultLine,Kr=_e.bordercolor||b.contrast(Yr),vr=b.contrast(Yr),Xr={family:_e.font.family||je,size:_e.font.size||Je,color:_e.font.color||vr};Mr.style({fill:Yr,stroke:Kr}),Rr.text(Ke).call(_.font,Xr).call(d.positionText,0,0).call(d.convertToTspans,ie),Gt.attr("transform","");var $r=le(ie,Rr.node()),Le,De;if(ae==="x"){var bt=at.side==="top"?"-":"";Rr.attr("text-anchor","middle").call(d.positionText,0,at.side==="top"?it-$r.bottom-F-V:it-$r.top+F+V),Le=at._offset+(nt.x0+nt.x1)/2,De=Fe._offset+(at.side==="top"?0:Fe._length);var xt=$r.width/2+V;Le<xt?(Le=xt,Mr.attr("d","M-"+(xt-F)+",0L-"+(xt-F*2)+","+bt+F+"H"+(V+$r.width/2)+"v"+bt+(V*2+$r.height)+"H-"+xt+"V"+bt+F+"Z")):Le>ce.width-xt?(Le=ce.width-xt,Mr.attr("d","M"+(xt-F)+",0L"+xt+","+bt+F+"v"+bt+(V*2+$r.height)+"H-"+xt+"V"+bt+F+"H"+(xt-F*2)+"Z")):Mr.attr("d","M0,0L"+F+","+bt+F+"H"+(V+$r.width/2)+"v"+bt+(V*2+$r.height)+"H-"+(V+$r.width/2)+"V"+bt+F+"H-"+F+"Z")}else{var Ct,Rt,Lt;Fe.side==="right"?(Ct="start",Rt=1,Lt="",Le=at._offset+at._length):(Ct="end",Rt=-1,Lt="-",Le=at._offset),De=Fe._offset+(nt.y0+nt.y1)/2,Rr.attr("text-anchor",Ct),Mr.attr("d","M0,0L"+Lt+F+","+F+"V"+(V+$r.height/2)+"h"+Lt+(V*2+$r.width)+"V-"+(V+$r.height/2)+"H"+Lt+F+"V-"+F+"Z");var Pt=$r.height/2,nr=it-$r.top-Pt,Tr="clip"+ce._uid+"commonlabel"+Fe._id,gr;if(Le<$r.width+2*V+F){gr="M-"+(F+V)+"-"+Pt+"h-"+($r.width-V)+"V"+Pt+"h"+($r.width-V)+"Z";var $t=$r.width-Le+V;d.positionText(Rr,$t,nr),Ct==="end"&&Rr.selectAll("tspan").each(function(){var Pr=a.select(this),wr=_.tester.append("text").text(Pr.text()).call(_.font,Xr),fr=le(ie,wr.node());Math.round(fr.width)<Math.round($r.width)&&Pr.attr("x",$t-fr.width),wr.remove()})}else d.positionText(Rr,Rt*(V+F),nr),gr=null;var mr=ce._topclips.selectAll("#"+Tr).data(gr?[0]:[]);mr.enter().append("clipPath").attr("id",Tr).append("path"),mr.exit().remove(),mr.select("path").attr("d",gr),_.setClipUrl(Rr,gr?Tr:null,ie)}Gt.attr("transform",u(Le,De))}),P.isUnifiedHover(ae)){he.selectAll("g.hovertext").remove();var cr=K.filter(function(Gt){return Gt.hoverinfo!=="none"});if(cr.length===0)return;var Nr=ce.hoverlabel,er=Nr.font,Wt={showlegend:!0,legend:{title:{text:Ke,font:er},font:er,bgcolor:Nr.bgcolor,bordercolor:Nr.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ce.legend?ce.legend.traceorder:void 0,orientation:"v"}},dr={font:er};R(Wt,dr,ie._fullData);var zr=dr.legend;zr.entries=[];for(var Dr=0;Dr<cr.length;Dr++){var $e=cr[Dr];if($e.hoverinfo!=="none"){var pt=we($e,!0,ae,ce,Ke),kt=pt[0],Me=pt[1];$e.name=Me,Me!==""?$e.text=Me+" : "+kt:$e.text=kt;var rt=$e.cd[$e.index];rt&&(rt.mc&&($e.mc=rt.mc),rt.mcc&&($e.mc=rt.mcc),rt.mlc&&($e.mlc=rt.mlc),rt.mlcc&&($e.mlc=rt.mlcc),rt.mlw&&($e.mlw=rt.mlw),rt.mrc&&($e.mrc=rt.mrc),rt.dir&&($e.dir=rt.dir)),$e._distinct=!0,zr.entries.push([$e])}}zr.entries.sort(function(Gt,Mr){return Gt[0].trace.index-Mr[0].trace.index}),zr.layer=he,zr._inHover=!0,zr._groupTitleFont=Nr.grouptitlefont,S(ie,zr);var st=he.select("g.legend"),ft=le(ie,st.node()),zt=ft.width+2*V,Ue=ft.height+2*V,Ae=cr[0],Oe=(Ae.x0+Ae.x1)/2,We=(Ae.y0+Ae.y1)/2,Ve=!(A.traceIs(Ae.trace,"bar-like")||A.traceIs(Ae.trace,"box-violin")),lt,mt;Ie==="y"?Ve?(mt=We-V,lt=We+V):(mt=Math.min.apply(null,cr.map(function(Gt){return Math.min(Gt.y0,Gt.y1)})),lt=Math.max.apply(null,cr.map(function(Gt){return Math.max(Gt.y0,Gt.y1)}))):mt=lt=l.mean(cr.map(function(Gt){return(Gt.y0+Gt.y1)/2}))-Ue/2;var dt,At;Ie==="x"?Ve?(dt=Oe+V,At=Oe-V):(dt=Math.max.apply(null,cr.map(function(Gt){return Math.max(Gt.x0,Gt.x1)})),At=Math.min.apply(null,cr.map(function(Gt){return Math.min(Gt.x0,Gt.x1)}))):dt=At=l.mean(cr.map(function(Gt){return(Gt.x0+Gt.x1)/2}))-zt/2;var Bt=at._offset,ir=Fe._offset;lt+=ir,dt+=Bt,At+=Bt-zt,mt+=ir-Ue;var tr,vt;return dt+zt<Ne&&dt>=0?tr=dt:At+zt<Ne&&At>=0?tr=At:Bt+zt<Ne?tr=Bt:dt-Oe<Oe-At+zt?tr=Ne-zt:tr=0,tr+=V,lt+Ue<ht&&lt>=0?vt=lt:mt+Ue<ht&&mt>=0?vt=mt:ir+Ue<ht?vt=ir:lt-We<We-mt+Ue?vt=ht-Ue:vt=0,vt+=V,st.attr("transform",u(tr-1,vt-1)),st}var pr=he.selectAll("g.hovertext").data(K,function(Gt){return J(Gt)});return pr.enter().append("g").classed("hovertext",!0).each(function(){var Gt=a.select(this);Gt.append("rect").call(b.fill,b.addOpacity(pe,.8)),Gt.append("text").classed("name",!0),Gt.append("path").style("stroke-width","1px"),Gt.append("text").classed("nums",!0).call(_.font,je,Je)}),pr.exit().remove(),pr.each(function(Gt){var Mr=a.select(this).attr("transform",""),Rr=Gt.color;Array.isArray(Rr)&&(Rr=Rr[Gt.eventData[0].pointNumber]);var Yr=Gt.bgcolor||Rr,Kr=b.combine(b.opacity(Yr)?Yr:b.defaultLine,pe),vr=b.combine(b.opacity(Rr)?Rr:b.defaultLine,pe),Xr=Gt.borderColor||b.contrast(Kr),$r=we(Gt,Tt,ae,ce,Ke,Mr),Le=$r[0],De=$r[1],bt=Mr.select("text.nums").call(_.font,Gt.fontFamily||je,Gt.fontSize||Je,Gt.fontColor||Xr).text(Le).attr("data-notex",1).call(d.positionText,0,0).call(d.convertToTspans,ie),xt=Mr.select("text.name"),Ct=0,Rt=0;if(De&&De!==Le){xt.call(_.font,Gt.fontFamily||je,Gt.fontSize||Je,vr).text(De).attr("data-notex",1).call(d.positionText,0,0).call(d.convertToTspans,ie);var Lt=le(ie,xt.node());Ct=Lt.width+2*V,Rt=Lt.height+2*V}else xt.remove(),Mr.select("rect").remove();Mr.select("path").style({fill:Kr,stroke:Xr});var Pt=Gt.xa._offset+(Gt.x0+Gt.x1)/2,nr=Gt.ya._offset+(Gt.y0+Gt.y1)/2,Tr=Math.abs(Gt.x1-Gt.x0),gr=Math.abs(Gt.y1-Gt.y0),$t=le(ie,bt.node()),mr=$t.width/ce._invScaleX,Pr=$t.height/ce._invScaleY;Gt.ty0=(it-$t.top)/ce._invScaleY,Gt.bx=mr+2*V,Gt.by=Math.max(Pr+2*V,Rt),Gt.anchor="start",Gt.txwidth=mr,Gt.tx2width=Ct,Gt.offset=0;var wr=(mr+F+V+Ct)*ce._invScaleX,fr,Ir;if(ve)Gt.pos=Pt,fr=nr+gr/2+wr<=ht,Ir=nr-gr/2-wr>=0,(Gt.idealAlign==="top"||!fr)&&Ir?(nr-=gr/2,Gt.anchor="end"):fr?(nr+=gr/2,Gt.anchor="start"):Gt.anchor="middle";else if(Gt.pos=nr,fr=Pt+Tr/2+wr<=Ne,Ir=Pt-Tr/2-wr>=0,(Gt.idealAlign==="left"||!fr)&&Ir)Pt-=Tr/2,Gt.anchor="end";else if(fr)Pt+=Tr/2,Gt.anchor="start";else{Gt.anchor="middle";var Vr=wr/2,_r=Pt+Vr-Ne,Gr=Pt-Vr;_r>0&&(Pt-=_r),Gr<0&&(Pt+=-Gr)}bt.attr("text-anchor",Gt.anchor),Ct&&xt.attr("text-anchor",Gt.anchor),Mr.attr("transform",u(Pt,nr)+(ve?h(I):""))}),pr}function we(K,te,ie,ce,ae,ve){var pe="",he="";K.nameOverride!==void 0&&(K.name=K.nameOverride),K.name&&(K.trace._meta&&(K.name=l.templateString(K.name,K.trace._meta)),pe=He(K.name,K.nameLength));var ye=ie.charAt(0),_e=ye==="x"?"y":"x";K.zLabel!==void 0?(K.xLabel!==void 0&&(he+="x: "+K.xLabel+"<br>"),K.yLabel!==void 0&&(he+="y: "+K.yLabel+"<br>"),K.trace.type!=="choropleth"&&K.trace.type!=="choroplethmapbox"&&(he+=(he?"z: ":"")+K.zLabel)):te&&K[ye+"Label"]===ae?he=K[_e+"Label"]||"":K.xLabel===void 0?K.yLabel!==void 0&&K.trace.type!=="scattercarpet"&&(he=K.yLabel):K.yLabel===void 0?he=K.xLabel:he="("+K.xLabel+", "+K.yLabel+")",(K.text||K.text===0)&&!Array.isArray(K.text)&&(he+=(he?"<br>":"")+K.text),K.extraText!==void 0&&(he+=(he?"<br>":"")+K.extraText),ve&&he===""&&!K.hovertemplate&&(pe===""&&ve.remove(),he=pe);var je=K.hovertemplate||!1;if(je){var Je=K.hovertemplateLabels||K;K[ye+"Label"]!==ae&&(Je[ye+"other"]=Je[ye+"Val"],Je[ye+"otherLabel"]=Je[ye+"Label"]),he=l.hovertemplateString(je,Je,ce._d3locale,K.eventData[0]||{},K.trace._meta),he=he.replace(ne,function(nt,at){return pe=He(at,K.nameLength),""})}return[he,pe]}function ee(K,te,ie){var ce=0,ae=1,ve=K.size(),pe=new Array(ve),he=0;K.each(function(Nt){var Mt=Nt[te],Vt=Mt._id.charAt(0)==="x",Yt=Mt.range;he===0&&Yt&&Yt[0]>Yt[1]!==Vt&&(ae=-1),pe[he++]=[{datum:Nt,traceIndex:Nt.trace.index,dp:0,pos:Nt.pos,posref:Nt.posref,size:Nt.by*(Vt?M:1)/2,pmin:0,pmax:Vt?ie.width:ie.height}]}),pe.sort(function(Nt,Mt){return Nt[0].posref-Mt[0].posref||ae*(Mt[0].traceIndex-Nt[0].traceIndex)});var ye,_e,je,Je,nt,at,Fe;function Ie(Nt){var Mt=Nt[0],Vt=Nt[Nt.length-1];if(_e=Mt.pmin-Mt.pos-Mt.dp+Mt.size,je=Vt.pos+Vt.dp+Vt.size-Mt.pmax,_e>.01){for(nt=Nt.length-1;nt>=0;nt--)Nt[nt].dp+=_e;ye=!1}if(!(je<.01)){if(_e<-.01){for(nt=Nt.length-1;nt>=0;nt--)Nt[nt].dp-=je;ye=!1}if(!!ye){var Yt=0;for(Je=0;Je<Nt.length;Je++)at=Nt[Je],at.pos+at.dp+at.size>Mt.pmax&&Yt++;for(Je=Nt.length-1;Je>=0&&!(Yt<=0);Je--)at=Nt[Je],at.pos>Mt.pmax-1&&(at.del=!0,Yt--);for(Je=0;Je<Nt.length&&!(Yt<=0);Je++)if(at=Nt[Je],at.pos<Mt.pmin+1)for(at.del=!0,Yt--,je=at.size*2,nt=Nt.length-1;nt>=0;nt--)Nt[nt].dp-=je;for(Je=Nt.length-1;Je>=0&&!(Yt<=0);Je--)at=Nt[Je],at.pos+at.dp+at.size>Mt.pmax&&(at.del=!0,Yt--)}}}for(;!ye&&ce<=ve;){for(ce++,ye=!0,Je=0;Je<pe.length-1;){var Ke=pe[Je],Qe=pe[Je+1],it=Ke[Ke.length-1],Ne=Qe[0];if(_e=it.pos+it.dp+it.size-Ne.pos-Ne.dp+Ne.size,_e>.01&&it.pmin===Ne.pmin&&it.pmax===Ne.pmax){for(nt=Qe.length-1;nt>=0;nt--)Qe[nt].dp+=_e;for(Ke.push.apply(Ke,Qe),pe.splice(Je+1,1),Fe=0,nt=Ke.length-1;nt>=0;nt--)Fe+=Ke[nt].dp;for(je=Fe/Ke.length,nt=Ke.length-1;nt>=0;nt--)Ke[nt].dp-=je;ye=!1}else Je++}pe.forEach(Ie)}for(Je=pe.length-1;Je>=0;Je--){var ht=pe[Je];for(nt=ht.length-1;nt>=0;nt--){var Tt=ht[nt],Xt=Tt.datum;Xt.offset=Tt.dp,Xt.del=Tt.del}}}function X(K,te,ie,ce){var ae=function(pe){return pe*ie},ve=function(pe){return pe*ce};K.each(function(pe){var he=a.select(this);if(pe.del)return he.remove();var ye=he.select("text.nums"),_e=pe.anchor,je=_e==="end"?-1:1,Je={start:1,end:-1,middle:0}[_e],nt=Je*(F+V),at=nt+Je*(pe.txwidth+V),Fe=0,Ie=pe.offset,Ke=_e==="middle";Ke&&(nt-=pe.tx2width/2,at+=pe.txwidth/2+V),te&&(Ie*=-U,Fe=pe.offset*z),he.select("path").attr("d",Ke?"M-"+ae(pe.bx/2+pe.tx2width/2)+","+ve(Ie-pe.by/2)+"h"+ae(pe.bx)+"v"+ve(pe.by)+"h-"+ae(pe.bx)+"Z":"M0,0L"+ae(je*F+Fe)+","+ve(F+Ie)+"v"+ve(pe.by/2-F)+"h"+ae(je*pe.bx)+"v-"+ve(pe.by)+"H"+ae(je*F+Fe)+"V"+ve(Ie-F)+"Z");var Qe=Fe+nt,it=Ie+pe.ty0-pe.by/2+V,Ne=pe.textAlign||"auto";Ne!=="auto"&&(Ne==="left"&&_e!=="start"?(ye.attr("text-anchor","start"),Qe=Ke?-pe.bx/2-pe.tx2width/2+V:-pe.bx-V):Ne==="right"&&_e!=="end"&&(ye.attr("text-anchor","end"),Qe=Ke?pe.bx/2-pe.tx2width/2-V:pe.bx+V)),ye.call(d.positionText,ae(Qe),ve(it)),pe.tx2width&&(he.select("text.name").call(d.positionText,ae(at+Je*V+Fe),ve(Ie+pe.ty0-pe.by/2+V)),he.select("rect").call(_.setRect,ae(at+(Je-1)*pe.tx2width/2+Fe),ve(Ie-pe.by/2-1),ae(pe.tx2width),ve(pe.by+2)))})}function re(K,te){var ie=K.index,ce=K.trace||{},ae=K.cd[0],ve=K.cd[ie]||{};function pe(nt){return nt||s(nt)&&nt===0}var he=Array.isArray(ie)?function(nt,at){var Fe=l.castOption(ae,ie,nt);return pe(Fe)?Fe:l.extractOption({},ce,"",at)}:function(nt,at){return l.extractOption(ve,ce,nt,at)};function ye(nt,at,Fe){var Ie=he(at,Fe);pe(Ie)&&(K[nt]=Ie)}if(ye("hoverinfo","hi","hoverinfo"),ye("bgcolor","hbg","hoverlabel.bgcolor"),ye("borderColor","hbc","hoverlabel.bordercolor"),ye("fontFamily","htf","hoverlabel.font.family"),ye("fontSize","hts","hoverlabel.font.size"),ye("fontColor","htc","hoverlabel.font.color"),ye("nameLength","hnl","hoverlabel.namelength"),ye("textAlign","hta","hoverlabel.align"),K.posref=te==="y"||te==="closest"&&ce.orientation==="h"?K.xa._offset+(K.x0+K.x1)/2:K.ya._offset+(K.y0+K.y1)/2,K.x0=l.constrain(K.x0,0,K.xa._length),K.x1=l.constrain(K.x1,0,K.xa._length),K.y0=l.constrain(K.y0,0,K.ya._length),K.y1=l.constrain(K.y1,0,K.ya._length),K.xLabelVal!==void 0&&(K.xLabel="xLabel"in K?K.xLabel:E.hoverLabelText(K.xa,K.xLabelVal,ce.xhoverformat),K.xVal=K.xa.c2d(K.xLabelVal)),K.yLabelVal!==void 0&&(K.yLabel="yLabel"in K?K.yLabel:E.hoverLabelText(K.ya,K.yLabelVal,ce.yhoverformat),K.yVal=K.ya.c2d(K.yLabelVal)),K.zLabelVal!==void 0&&K.zLabel===void 0&&(K.zLabel=String(K.zLabelVal)),!isNaN(K.xerr)&&!(K.xa.type==="log"&&K.xerr<=0)){var _e=E.tickText(K.xa,K.xa.c2l(K.xerr),"hover").text;K.xerrneg!==void 0?K.xLabel+=" +"+_e+" / -"+E.tickText(K.xa,K.xa.c2l(K.xerrneg),"hover").text:K.xLabel+=" \xB1 "+_e,te==="x"&&(K.distance+=1)}if(!isNaN(K.yerr)&&!(K.ya.type==="log"&&K.yerr<=0)){var je=E.tickText(K.ya,K.ya.c2l(K.yerr),"hover").text;K.yerrneg!==void 0?K.yLabel+=" +"+je+" / -"+E.tickText(K.ya,K.ya.c2l(K.yerrneg),"hover").text:K.yLabel+=" \xB1 "+je,te==="y"&&(K.distance+=1)}var Je=K.hoverinfo||K.trace.hoverinfo;return Je&&Je!=="all"&&(Je=Array.isArray(Je)?Je:Je.split("+"),Je.indexOf("x")===-1&&(K.xLabel=void 0),Je.indexOf("y")===-1&&(K.yLabel=void 0),Je.indexOf("z")===-1&&(K.zLabel=void 0),Je.indexOf("text")===-1&&(K.text=void 0),Je.indexOf("name")===-1&&(K.name=void 0)),K}function de(K,te,ie){var ce=ie.container,ae=ie.fullLayout,ve=ae._size,pe=ie.event,he=!!te.hLinePoint,ye=!!te.vLinePoint,_e,je;if(ce.selectAll(".spikeline").remove(),!!(ye||he)){var Je=b.combine(ae.plot_bgcolor,ae.paper_bgcolor);if(he){var nt=te.hLinePoint,at,Fe;_e=nt&&nt.xa,je=nt&&nt.ya;var Ie=je.spikesnap;Ie==="cursor"?(at=pe.pointerX,Fe=pe.pointerY):(at=_e._offset+nt.x,Fe=je._offset+nt.y);var Ke=n.readability(nt.color,Je)<1.5?b.contrast(Je):nt.color,Qe=je.spikemode,it=je.spikethickness,Ne=je.spikecolor||Ke,ht=E.getPxPosition(K,je),Tt,Xt;if(Qe.indexOf("toaxis")!==-1||Qe.indexOf("across")!==-1){if(Qe.indexOf("toaxis")!==-1&&(Tt=ht,Xt=at),Qe.indexOf("across")!==-1){var Nt=je._counterDomainMin,Mt=je._counterDomainMax;je.anchor==="free"&&(Nt=Math.min(Nt,je.position),Mt=Math.max(Mt,je.position)),Tt=ve.l+Nt*ve.w,Xt=ve.l+Mt*ve.w}ce.insert("line",":first-child").attr({x1:Tt,x2:Xt,y1:Fe,y2:Fe,"stroke-width":it,stroke:Ne,"stroke-dasharray":_.dashStyle(je.spikedash,it)}).classed("spikeline",!0).classed("crisp",!0),ce.insert("line",":first-child").attr({x1:Tt,x2:Xt,y1:Fe,y2:Fe,"stroke-width":it+2,stroke:Je}).classed("spikeline",!0).classed("crisp",!0)}Qe.indexOf("marker")!==-1&&ce.insert("circle",":first-child").attr({cx:ht+(je.side!=="right"?it:-it),cy:Fe,r:it,fill:Ne}).classed("spikeline",!0)}if(ye){var Vt=te.vLinePoint,Yt,cr;_e=Vt&&Vt.xa,je=Vt&&Vt.ya;var Nr=_e.spikesnap;Nr==="cursor"?(Yt=pe.pointerX,cr=pe.pointerY):(Yt=_e._offset+Vt.x,cr=je._offset+Vt.y);var er=n.readability(Vt.color,Je)<1.5?b.contrast(Je):Vt.color,Wt=_e.spikemode,dr=_e.spikethickness,zr=_e.spikecolor||er,Dr=E.getPxPosition(K,_e),$e,pt;if(Wt.indexOf("toaxis")!==-1||Wt.indexOf("across")!==-1){if(Wt.indexOf("toaxis")!==-1&&($e=Dr,pt=cr),Wt.indexOf("across")!==-1){var kt=_e._counterDomainMin,Me=_e._counterDomainMax;_e.anchor==="free"&&(kt=Math.min(kt,_e.position),Me=Math.max(Me,_e.position)),$e=ve.t+(1-Me)*ve.h,pt=ve.t+(1-kt)*ve.h}ce.insert("line",":first-child").attr({x1:Yt,x2:Yt,y1:$e,y2:pt,"stroke-width":dr,stroke:zr,"stroke-dasharray":_.dashStyle(_e.spikedash,dr)}).classed("spikeline",!0).classed("crisp",!0),ce.insert("line",":first-child").attr({x1:Yt,x2:Yt,y1:$e,y2:pt,"stroke-width":dr+2,stroke:Je}).classed("spikeline",!0).classed("crisp",!0)}Wt.indexOf("marker")!==-1&&ce.insert("circle",":first-child").attr({cx:Yt,cy:Dr-(_e.side!=="top"?dr:-dr),r:dr,fill:zr}).classed("spikeline",!0)}}}function me(K,te,ie){if(!ie||ie.length!==K._hoverdata.length)return!0;for(var ce=ie.length-1;ce>=0;ce--){var ae=ie[ce],ve=K._hoverdata[ce];if(ae.curveNumber!==ve.curveNumber||String(ae.pointNumber)!==String(ve.pointNumber)||String(ae.pointNumbers)!==String(ve.pointNumbers))return!0}return!1}function xe(K,te){return!te||te.vLinePoint!==K._spikepoints.vLinePoint||te.hLinePoint!==K._spikepoints.hLinePoint}function He(K,te){return d.plainText(K||"",{len:te,allowedTags:["br","sub","sup","b","i","em"]})}function Re(K,te){for(var ie=te.charAt(0),ce=[],ae=[],ve=[],pe=0;pe<K.length;pe++){var he=K[pe];A.traceIs(he.trace,"bar-like")||A.traceIs(he.trace,"box-violin")?ve.push(he):he.trace[ie+"period"]?ae.push(he):ce.push(he)}return ce.concat(ae).concat(ve)}function Ee(K,te,ie){var ce=te[K+"a"],ae=te[K+"Val"],ve=te.cd[0];if(ce.type==="category")ae=ce._categoriesMap[ae];else if(ce.type==="date"){var pe=te.trace[K+"periodalignment"];if(pe){var he=te.cd[te.index],ye=he[K+"Start"];ye===void 0&&(ye=he[K]);var _e=he[K+"End"];_e===void 0&&(_e=he[K]);var je=_e-ye;pe==="end"?ae+=je:pe==="middle"&&(ae+=je/2)}ae=ce.d2c(ae)}return ve&&ve.t&&ve.t.posLetter===ce._id&&(ie.boxmode==="group"||ie.violinmode==="group")&&(ae+=ve.t.dPos),ae}function ke(K){return K.offsetTop+K.clientTop}function $(K){return K.offsetLeft+K.clientLeft}function le(K,te){var ie=K._fullLayout,ce=te.getBoundingClientRect(),ae=ce.x,ve=ce.y,pe=ae+ce.width,he=ve+ce.height,ye=l.apply3DTransform(ie._invTransform)(ae,ve),_e=l.apply3DTransform(ie._invTransform)(pe,he),je=ye[0],Je=ye[1],nt=_e[0],at=_e[1];return{x:je,y:Je,width:nt-je,height:at-Je,top:Math.min(Je,at),left:Math.min(je,nt),right:Math.max(je,nt),bottom:Math.max(Je,at)}}},{"../../lib":244,"../../lib/events":237,"../../lib/override_cursor":255,"../../lib/svg_text_utils":267,"../../plots/cartesian/axes":291,"../../registry":327,"../color":103,"../dragelement":122,"../drawing":125,"../legend/defaults":155,"../legend/draw":156,"./constants":137,"./helpers":139,"@plotly/d3":11,"fast-isnumeric":17,tinycolor2:68}],141:[function(e,i,o){var a=e("../../lib"),s=e("../color"),n=e("./helpers").isUnifiedHover;i.exports=function(u,h,v,d){d=d||{};var p=h.legend;function _(b){d.font[b]||(d.font[b]=p?h.legend.font[b]:h.font[b])}h&&n(h.hovermode)&&(d.font||(d.font={}),_("size"),_("family"),_("color"),p?(d.bgcolor||(d.bgcolor=s.combine(h.legend.bgcolor,h.paper_bgcolor)),d.bordercolor||(d.bordercolor=h.legend.bordercolor)):d.bgcolor||(d.bgcolor=h.paper_bgcolor)),v("hoverlabel.bgcolor",d.bgcolor),v("hoverlabel.bordercolor",d.bordercolor),v("hoverlabel.namelength",d.namelength),a.coerceFont(v,"hoverlabel.font",d.font),v("hoverlabel.align",d.align)}},{"../../lib":244,"../color":103,"./helpers":139}],142:[function(e,i,o){var a=e("../../lib"),s=e("./layout_attributes");i.exports=function(l,u){function h(v,d){return u[v]!==void 0?u[v]:a.coerce(l,u,s,v,d)}return h("clickmode"),h("hovermode")}},{"../../lib":244,"./layout_attributes":144}],143:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../lib"),n=e("../dragelement"),l=e("./helpers"),u=e("./layout_attributes"),h=e("./hover");i.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:u},attributes:e("./attributes"),layoutAttributes:u,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:l.getDistanceFunction,getClosest:l.getClosest,inbox:l.inbox,quadrature:l.quadrature,appendArrayPointValue:l.appendArrayPointValue,castHoverOption:d,castHoverinfo:p,hover:h.hover,unhover:n.unhover,loneHover:h.loneHover,loneUnhover:v,click:e("./click")};function v(_){var b=s.isD3Selection(_)?_:a.select(_);b.selectAll("g.hovertext").remove(),b.selectAll(".spikeline").remove()}function d(_,b,x){return s.castOption(_,b,"hoverlabel."+x)}function p(_,b,x){function E(A){return s.coerceHoverinfo({hoverinfo:A},{_module:_._module},b)}return s.castOption(_,x,"hoverinfo",E)}},{"../../lib":244,"../dragelement":122,"./attributes":134,"./calc":135,"./click":136,"./constants":137,"./defaults":138,"./helpers":139,"./hover":140,"./layout_attributes":144,"./layout_defaults":145,"./layout_global_defaults":146,"@plotly/d3":11}],144:[function(e,i,o){var a=e("./constants"),s=e("../../plots/font_attributes"),n=s({editType:"none"});n.family.dflt=a.HOVERFONT,n.size.dflt=a.HOVERFONTSIZE,i.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:n,grouptitlefont:s({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":319,"./constants":137}],145:[function(e,i,o){var a=e("../../lib"),s=e("./layout_attributes"),n=e("./hovermode_defaults"),l=e("./hoverlabel_defaults");i.exports=function(h,v){function d(A,P){return a.coerce(h,v,s,A,P)}var p=n(h,v);p&&(d("hoverdistance"),d("spikedistance"));var _=d("dragmode");_==="select"&&d("selectdirection");var b=v._has("mapbox"),x=v._has("geo"),E=v._basePlotModules.length;v.dragmode==="zoom"&&((b||x)&&E===1||b&&x&&E===2)&&(v.dragmode="pan"),l(h,v,d),a.coerceFont(d,"hoverlabel.grouptitlefont",v.hoverlabel.font)}},{"../../lib":244,"./hoverlabel_defaults":141,"./hovermode_defaults":142,"./layout_attributes":144}],146:[function(e,i,o){var a=e("../../lib"),s=e("./hoverlabel_defaults"),n=e("./layout_attributes");i.exports=function(u,h){function v(d,p){return a.coerce(u,h,n,d,p)}s(u,h,v)}},{"../../lib":244,"./hoverlabel_defaults":141,"./layout_attributes":144}],147:[function(e,i,o){var a=e("../../lib"),s=e("../../lib/regex").counter,n=e("../../plots/domain").attributes,l=e("../../plots/cartesian/constants").idRegex,u=e("../../plot_api/plot_template"),h={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[s("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:n({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function v(x,E,A){var P=E[A+"axes"],D=Object.keys((x._splomAxes||{})[A]||{});if(Array.isArray(P))return P;if(D.length)return D}function d(x,E){var A=x.grid||{},P=v(E,A,"x"),D=v(E,A,"y");if(!x.grid&&!P&&!D)return;var R=Array.isArray(A.subplots)&&Array.isArray(A.subplots[0]),S=Array.isArray(P),I=Array.isArray(D),T=S&&P!==A.xaxes&&I&&D!==A.yaxes,M,z;R?(M=A.subplots.length,z=A.subplots[0].length):(I&&(M=D.length),S&&(z=P.length));var U=u.newContainer(E,"grid");function F(X,re){return a.coerce(A,U,h,X,re)}var V=F("rows",M),j=F("columns",z);if(!(V*j>1)){delete E.grid;return}if(!R&&!S&&!I){var H=F("pattern")==="independent";H&&(R=!0)}U._hasSubplotGrid=R;var Y=F("roworder"),J=Y==="top to bottom",ne=R?.2:.1,q=R?.3:.1,we,ee;T&&E._splomGridDflt&&(we=E._splomGridDflt.xside,ee=E._splomGridDflt.yside),U._domains={x:p("x",F,ne,we,j),y:p("y",F,q,ee,V,J)}}function p(x,E,A,P,D,R){var S=E(x+"gap",A),I=E("domain."+x);E(x+"side",P);for(var T=new Array(D),M=I[0],z=(I[1]-M)/(D-S),U=z*(1-S),F=0;F<D;F++){var V=M+z*F;T[R?D-1-F:F]=[V,V+U]}return T}function _(x,E){var A=E.grid;if(!(!A||!A._domains)){var P=x.grid||{},D=E._subplots,R=A._hasSubplotGrid,S=A.rows,I=A.columns,T=A.pattern==="independent",M,z,U,F,V,j,H,Y=A._axisMap={};if(R){var J=P.subplots||[];j=A.subplots=new Array(S);var ne=1;for(M=0;M<S;M++){var q=j[M]=new Array(I),we=J[M]||[];for(z=0;z<I;z++)if(T?(V=ne===1?"xy":"x"+ne+"y"+ne,ne++):V=we[z],q[z]="",D.cartesian.indexOf(V)!==-1){if(H=V.indexOf("y"),U=V.slice(0,H),F=V.slice(H),Y[U]!==void 0&&Y[U]!==z||Y[F]!==void 0&&Y[F]!==M)continue;q[z]=V,Y[U]=z,Y[F]=M}}}else{var ee=v(E,P,"x"),X=v(E,P,"y");A.xaxes=b(ee,D.xaxis,I,Y,"x"),A.yaxes=b(X,D.yaxis,S,Y,"y")}var re=A._anchors={},de=A.roworder==="top to bottom";for(var me in Y){var xe=me.charAt(0),He=A[xe+"side"],Re,Ee,ke;if(He.length<8)re[me]="free";else if(xe==="x"){if(He.charAt(0)==="t"===de?(Re=0,Ee=1,ke=S):(Re=S-1,Ee=-1,ke=-1),R){var $=Y[me];for(M=Re;M!==ke;M+=Ee)if(V=j[M][$],!!V&&(H=V.indexOf("y"),V.slice(0,H)===me)){re[me]=V.slice(H);break}}else for(M=Re;M!==ke;M+=Ee)if(F=A.yaxes[M],D.cartesian.indexOf(me+F)!==-1){re[me]=F;break}}else if(He.charAt(0)==="l"?(Re=0,Ee=1,ke=I):(Re=I-1,Ee=-1,ke=-1),R){var le=Y[me];for(M=Re;M!==ke;M+=Ee)if(V=j[le][M],!!V&&(H=V.indexOf("y"),V.slice(H)===me)){re[me]=V.slice(0,H);break}}else for(M=Re;M!==ke;M+=Ee)if(U=A.xaxes[M],D.cartesian.indexOf(U+me)!==-1){re[me]=U;break}}}}function b(x,E,A,P,D){var R=new Array(A),S;function I(T,M){E.indexOf(M)!==-1&&P[M]===void 0?(R[T]=M,P[M]=T):R[T]=""}if(Array.isArray(x))for(S=0;S<A;S++)I(S,x[S]);else for(I(0,D),S=1;S<A;S++)I(S,D+(S+1));return R}i.exports={moduleType:"component",name:"grid",schema:{layout:{grid:h}},layoutAttributes:h,sizeDefaults:d,contentDefaults:_}},{"../../lib":244,"../../lib/regex":260,"../../plot_api/plot_template":280,"../../plots/cartesian/constants":298,"../../plots/domain":318}],148:[function(e,i,o){var a=e("../../plots/cartesian/constants"),s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),i.exports=s("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":220,"../../plot_api/plot_template":280,"../../plots/cartesian/constants":298}],149:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib/to_log_range");i.exports=function(l,u,h,v){u=u||{};var d=h==="log"&&u.type==="linear",p=h==="linear"&&u.type==="log";if(!!(d||p)){for(var _=l._fullLayout.images,b=u._id.charAt(0),x,E,A=0;A<_.length;A++)if(x=_[A],E="images["+A+"].",x[b+"ref"]===u._id){var P=x[b],D=x["size"+b],R=null,S=null;if(d){R=s(P,u.range);var I=D/Math.pow(10,R)/2;S=2*Math.log(I+Math.sqrt(1+I*I))/Math.LN10}else R=Math.pow(10,P),S=R*(Math.pow(10,D/2)-Math.pow(10,-D/2));a(R)?a(S)||(S=null):(R=null,S=null),v(E+b,R),v(E+"size"+b,S)}}}},{"../../lib/to_log_range":269,"fast-isnumeric":17}],150:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes"),n=e("../../plots/array_container_defaults"),l=e("./attributes"),u="images";i.exports=function(d,p){var _={name:u,handleItemDefaults:h};n(d,p,_)};function h(v,d,p){function _(I,T){return a.coerce(v,d,l,I,T)}var b=_("source"),x=_("visible",!!b);if(!x)return d;_("layer"),_("xanchor"),_("yanchor"),_("sizex"),_("sizey"),_("sizing"),_("opacity");for(var E={_fullLayout:p},A=["x","y"],P=0;P<2;P++){var D=A[P],R=s.coerceRef(v,d,E,D,"paper",void 0);if(R!=="paper"){var S=s.getFromId(E,R);S._imgIndices.push(d._index)}s.coercePosition(d,E,_,R,D,0)}return d}},{"../../lib":244,"../../plots/array_container_defaults":286,"../../plots/cartesian/axes":291,"./attributes":148}],151:[function(e,i,o){var a=e("@plotly/d3"),s=e("../drawing"),n=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/axis_ids"),u=e("../../constants/xmlns_namespaces");i.exports=function(v){var d=v._fullLayout,p=[],_={},b=[],x,E;for(E=0;E<d.images.length;E++){var A=d.images[E];if(A.visible)if(A.layer==="below"&&A.xref!=="paper"&&A.yref!=="paper"){x=l.ref2id(A.xref)+l.ref2id(A.yref);var P=d._plots[x];if(!P){b.push(A);continue}P.mainplot&&(x=P.mainplot.id),_[x]||(_[x]=[]),_[x].push(A)}else A.layer==="above"?p.push(A):b.push(A)}var D={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function R(F){var V=a.select(this);if(this._imgSrc!==F.source)if(V.attr("xmlns",u.svg),F.source&&F.source.slice(0,5)==="data:")V.attr("xlink:href",F.source),this._imgSrc=F.source;else{var j=new Promise(function(H){var Y=new Image;this.img=Y,Y.setAttribute("crossOrigin","anonymous"),Y.onerror=J,Y.onload=function(){var ne=document.createElement("canvas");ne.width=this.width,ne.height=this.height;var q=ne.getContext("2d",{willReadFrequently:!0});q.drawImage(this,0,0);var we=ne.toDataURL("image/png");V.attr("xlink:href",we),H()},V.on("error",J),Y.src=F.source,this._imgSrc=F.source;function J(){V.remove(),H()}}.bind(this));v._promises.push(j)}}function S(F){var V=a.select(this),j=n.getFromId(v,F.xref),H=n.getFromId(v,F.yref),Y=n.getRefType(F.xref)==="domain",J=n.getRefType(F.yref)==="domain",ne=d._size,q,we;j!==void 0?q=typeof F.xref=="string"&&Y?j._length*F.sizex:Math.abs(j.l2p(F.sizex)-j.l2p(0)):q=F.sizex*ne.w,H!==void 0?we=typeof F.yref=="string"&&J?H._length*F.sizey:Math.abs(H.l2p(F.sizey)-H.l2p(0)):we=F.sizey*ne.h;var ee=q*D.x[F.xanchor].offset,X=we*D.y[F.yanchor].offset,re=D.x[F.xanchor].sizing+D.y[F.yanchor].sizing,de,me;switch(j!==void 0?de=typeof F.xref=="string"&&Y?j._length*F.x+j._offset:j.r2p(F.x)+j._offset:de=F.x*ne.w+ne.l,de+=ee,H!==void 0?me=typeof F.yref=="string"&&J?H._length*(1-F.y)+H._offset:H.r2p(F.y)+H._offset:me=ne.h-F.y*ne.h+ne.t,me+=X,F.sizing){case"fill":re+=" slice";break;case"stretch":re="none";break}V.attr({x:de,y:me,width:q,height:we,preserveAspectRatio:re,opacity:F.opacity});var xe=j&&n.getRefType(F.xref)!=="domain"?j._id:"",He=H&&n.getRefType(F.yref)!=="domain"?H._id:"",Re=xe+He;s.setClipUrl(V,Re?"clip"+d._uid+Re:null,v)}var I=d._imageLowerLayer.selectAll("image").data(b),T=d._imageUpperLayer.selectAll("image").data(p);I.enter().append("image"),T.enter().append("image"),I.exit().remove(),T.exit().remove(),I.each(function(F){R.bind(this)(F),S.bind(this)(F)}),T.each(function(F){R.bind(this)(F),S.bind(this)(F)});var M=Object.keys(d._plots);for(E=0;E<M.length;E++){x=M[E];var z=d._plots[x];if(!!z.imagelayer){var U=z.imagelayer.selectAll("image").data(_[x]||[]);U.enter().append("image"),U.exit().remove(),U.each(function(F){R.bind(this)(F),S.bind(this)(F)})}}}},{"../../constants/xmlns_namespaces":225,"../../plots/cartesian/axes":291,"../../plots/cartesian/axis_ids":295,"../drawing":125,"@plotly/d3":11}],152:[function(e,i,o){i.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":302,"./attributes":148,"./convert_coords":149,"./defaults":150,"./draw":151}],153:[function(e,i,o){var a=e("../../plots/font_attributes"),s=e("../color/attributes");i.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:a({editType:"legend"}),grouptitlefont:a({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:a({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":319,"../color/attributes":102}],154:[function(e,i,o){i.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],155:[function(e,i,o){var a=e("../../registry"),s=e("../../lib"),n=e("../../plot_api/plot_template"),l=e("../../plots/attributes"),u=e("./attributes"),h=e("../../plots/layout_attributes"),v=e("./helpers");i.exports=function(p,_,b){var x=p.legend||{},E=n.newContainer(_,"legend");function A(we,ee){return s.coerce(x,E,u,we,ee)}for(var P,D=function(we,ee){var X=P._input,re=P;return s.coerce(X,re,l,we,ee)},R=_.font||{},S=s.coerceFont(A,"grouptitlefont",s.extendFlat({},R,{size:Math.round(R.size*1.1)})),I=0,T=!1,M="normal",z=0;z<b.length;z++)P=b[z],P.visible&&((P.showlegend||P._dfltShowLegend&&!(P._module&&P._module.attributes&&P._module.attributes.showlegend&&P._module.attributes.showlegend.dflt===!1))&&(I++,P.showlegend&&(T=!0,(a.traceIs(P,"pie-like")||P._input.showlegend===!0)&&I++),s.coerceFont(D,"legendgrouptitle.font",S)),(a.traceIs(P,"bar")&&_.barmode==="stack"||["tonextx","tonexty"].indexOf(P.fill)!==-1)&&(M=v.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),P.legendgroup!==void 0&&P.legendgroup!==""&&(M=v.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var U=s.coerce(p,_,h,"showlegend",T&&I>1);if(U===!1&&(_.legend=void 0),!(U===!1&&!x.uirevision)&&(A("uirevision",_.uirevision),U!==!1)){A("bgcolor",_.paper_bgcolor),A("bordercolor"),A("borderwidth");var F=s.coerceFont(A,"font",_.font),V=A("orientation"),j=V==="h",H,Y,J;j?(H=0,a.getComponentMethod("rangeslider","isVisible")(p.xaxis)?(Y=1.1,J="bottom"):(Y=-.1,J="top")):(H=1.02,Y=1,J="auto"),A("traceorder",M),v.isGrouped(_.legend)&&A("tracegroupgap"),A("entrywidth"),A("entrywidthmode"),A("itemsizing"),A("itemwidth"),A("itemclick"),A("itemdoubleclick"),A("groupclick"),A("x",H),A("xanchor"),A("y",Y),A("yanchor",J),A("valign"),s.noneOrAll(x,E,["x","y"]);var ne=A("title.text");if(ne){A("title.side",j?"left":"top");var q=s.extendFlat({},F,{size:s.bigFont(F.size)});s.coerceFont(A,"title.font",q)}}}},{"../../lib":244,"../../plot_api/plot_template":280,"../../plots/attributes":287,"../../plots/layout_attributes":323,"../../registry":327,"./attributes":153,"./helpers":159}],156:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../lib"),n=e("../../plots/plots"),l=e("../../registry"),u=e("../../lib/events"),h=e("../dragelement"),v=e("../drawing"),d=e("../color"),p=e("../../lib/svg_text_utils"),_=e("./handle_click"),b=e("./constants"),x=e("../../constants/alignment"),E=x.LINE_SPACING,A=x.FROM_TL,P=x.FROM_BR,D=e("./get_legend_data"),R=e("./style"),S=e("./helpers"),I=1;i.exports=function(X,re){return re||(re=X._fullLayout.legend||{}),T(X,re)};function T(ee,X){var re=ee._fullLayout,de="legend"+re._uid,me,xe=X._inHover;if(xe?(me=X.layer,de+="-hover"):me=re._infolayer,!!me){ee._legendMouseDownTime||(ee._legendMouseDownTime=0);var He;if(xe){if(!X.entries)return;He=D(X.entries,X)}else{if(!ee.calcdata)return;He=re.showlegend&&D(ee.calcdata,X)}var Re=re.hiddenlabels||[];if(!xe&&(!re.showlegend||!He.length))return me.selectAll(".legend").remove(),re._topdefs.select("#"+de).remove(),n.autoMargin(ee,"legend");var Ee=s.ensureSingle(me,"g","legend",function(ve){xe||ve.attr("pointer-events","all")}),ke=s.ensureSingleById(re._topdefs,"clipPath",de,function(ve){ve.append("rect")}),$=s.ensureSingle(Ee,"rect","bg",function(ve){ve.attr("shape-rendering","crispEdges")});$.call(d.stroke,X.bordercolor).call(d.fill,X.bgcolor).style("stroke-width",X.borderwidth+"px");var le=s.ensureSingle(Ee,"g","scrollbox"),K=X.title;if(X._titleWidth=0,X._titleHeight=0,K.text){var te=s.ensureSingle(le,"text","legendtitletext");te.attr("text-anchor","start").call(v.font,K.font).text(K.text),j(te,le,ee,X,I)}else le.selectAll(".legendtitletext").remove();var ie=s.ensureSingle(Ee,"rect","scrollbar",function(ve){ve.attr(b.scrollBarEnterAttrs).call(d.fill,b.scrollBarColor)}),ce=le.selectAll("g.groups").data(He);ce.enter().append("g").attr("class","groups"),ce.exit().remove();var ae=ce.selectAll("g.traces").data(s.identity);ae.enter().append("g").attr("class","traces"),ae.exit().remove(),ae.style("opacity",function(ve){var pe=ve[0].trace;return l.traceIs(pe,"pie-like")?Re.indexOf(ve[0].label)!==-1?.5:1:pe.visible==="legendonly"?.5:1}).each(function(){a.select(this).call(U,ee,X)}).call(R,ee,X).each(function(){xe||a.select(this).call(V,ee)}),s.syncOrAsync([n.previousPromises,function(){return J(ee,ce,ae,X)},function(){var ve=re._size,pe=X.borderwidth;if(!xe){var he=ne(ee);if(he)return;var ye=ve.l+ve.w*X.x-A[q(X)]*X._width,_e=ve.t+ve.h*(1-X.y)-A[we(X)]*X._effHeight;if(re.margin.autoexpand){var je=ye,Je=_e;ye=s.constrain(ye,0,re.width-X._width),_e=s.constrain(_e,0,re.height-X._effHeight),ye!==je&&s.log("Constrain legend.x to make legend fit inside graph"),_e!==Je&&s.log("Constrain legend.y to make legend fit inside graph")}v.setTranslate(Ee,ye,_e)}if(ie.on(".drag",null),Ee.on("wheel",null),xe||X._height<=X._maxHeight||ee._context.staticPlot){var nt=X._effHeight;xe&&(nt=X._height),$.attr({width:X._width-pe,height:nt-pe,x:pe/2,y:pe/2}),v.setTranslate(le,0,0),ke.select("rect").attr({width:X._width-2*pe,height:nt-2*pe,x:pe,y:pe}),v.setClipUrl(le,de,ee),v.setRect(ie,0,0,0,0),delete X._scrollY}else{var at=Math.max(b.scrollBarMinHeight,X._effHeight*X._effHeight/X._height),Fe=X._effHeight-at-2*b.scrollBarMargin,Ie=X._height-X._effHeight,Ke=Fe/Ie,Qe=Math.min(X._scrollY||0,Ie);$.attr({width:X._width-2*pe+b.scrollBarWidth+b.scrollBarMargin,height:X._effHeight-pe,x:pe/2,y:pe/2}),ke.select("rect").attr({width:X._width-2*pe+b.scrollBarWidth+b.scrollBarMargin,height:X._effHeight-2*pe,x:pe,y:pe+Qe}),v.setClipUrl(le,de,ee),Vt(Qe,at,Ke),Ee.on("wheel",function(){Qe=s.constrain(X._scrollY+a.event.deltaY/Fe*Ie,0,Ie),Vt(Qe,at,Ke),Qe!==0&&Qe!==Ie&&a.event.preventDefault()});var it,Ne,ht,Tt=function(Wt,dr,zr){var Dr=(zr-dr)/Ke+Wt;return s.constrain(Dr,0,Ie)},Xt=function(Wt,dr,zr){var Dr=(dr-zr)/Ke+Wt;return s.constrain(Dr,0,Ie)},Nt=a.behavior.drag().on("dragstart",function(){var Wt=a.event.sourceEvent;Wt.type==="touchstart"?it=Wt.changedTouches[0].clientY:it=Wt.clientY,ht=Qe}).on("drag",function(){var Wt=a.event.sourceEvent;Wt.buttons===2||Wt.ctrlKey||(Wt.type==="touchmove"?Ne=Wt.changedTouches[0].clientY:Ne=Wt.clientY,Qe=Tt(ht,it,Ne),Vt(Qe,at,Ke))});ie.call(Nt);var Mt=a.behavior.drag().on("dragstart",function(){var Wt=a.event.sourceEvent;Wt.type==="touchstart"&&(it=Wt.changedTouches[0].clientY,ht=Qe)}).on("drag",function(){var Wt=a.event.sourceEvent;Wt.type==="touchmove"&&(Ne=Wt.changedTouches[0].clientY,Qe=Xt(ht,it,Ne),Vt(Qe,at,Ke))});le.call(Mt)}function Vt(Wt,dr,zr){X._scrollY=ee._fullLayout.legend._scrollY=Wt,v.setTranslate(le,0,-Wt),v.setRect(ie,X._width,b.scrollBarMargin+Wt*zr,b.scrollBarWidth,dr),ke.select("rect").attr("y",pe+Wt)}if(ee._context.edits.legendPosition){var Yt,cr,Nr,er;Ee.classed("cursor-move",!0),h.init({element:Ee.node(),gd:ee,prepFn:function(){var Wt=v.getTranslate(Ee);Nr=Wt.x,er=Wt.y},moveFn:function(Wt,dr){var zr=Nr+Wt,Dr=er+dr;v.setTranslate(Ee,zr,Dr),Yt=h.align(zr,0,ve.l,ve.l+ve.w,X.xanchor),cr=h.align(Dr,0,ve.t+ve.h,ve.t,X.yanchor)},doneFn:function(){Yt!==void 0&&cr!==void 0&&l.call("_guiRelayout",ee,{"legend.x":Yt,"legend.y":cr})},clickFn:function(Wt,dr){var zr=me.selectAll("g.traces").filter(function(){var Dr=this.getBoundingClientRect();return dr.clientX>=Dr.left&&dr.clientX<=Dr.right&&dr.clientY>=Dr.top&&dr.clientY<=Dr.bottom});zr.size()>0&&z(ee,Ee,zr,Wt,dr)}})}}],ee)}}function M(ee,X,re){var de=ee[0],me=de.width,xe=X.entrywidthmode,He=de.trace.legendwidth||X.entrywidth;return xe==="fraction"?X._maxWidth*He:re+(He||me)}function z(ee,X,re,de,me){var xe=re.data()[0][0].trace,He={event:me,node:re.node(),curveNumber:xe.index,expandedIndex:xe._expandedIndex,data:ee.data,layout:ee.layout,frames:ee._transitionData._frames,config:ee._context,fullData:ee._fullData,fullLayout:ee._fullLayout};xe._group&&(He.group=xe._group),l.traceIs(xe,"pie-like")&&(He.label=re.datum()[0].label);var Re=u.triggerHandler(ee,"plotly_legendclick",He);if(Re!==!1){if(de===1)X._clickTimeout=setTimeout(function(){!ee._fullLayout||_(re,ee,de)},ee._context.doubleClickDelay);else if(de===2){X._clickTimeout&&clearTimeout(X._clickTimeout),ee._legendMouseDownTime=0;var Ee=u.triggerHandler(ee,"plotly_legenddoubleclick",He);Ee!==!1&&_(re,ee,de)}}}function U(ee,X,re){var de=ee.data()[0][0],me=de.trace,xe=l.traceIs(me,"pie-like"),He=!re._inHover&&X._context.edits.legendText&&!xe,Re=re._maxNameLength,Ee,ke;de.groupTitle?(Ee=de.groupTitle.text,ke=de.groupTitle.font):(ke=re.font,re.entries?Ee=de.text:(Ee=xe?de.label:me.name,me._meta&&(Ee=s.templateString(Ee,me._meta))));var $=s.ensureSingle(ee,"text","legendtext");$.attr("text-anchor","start").call(v.font,ke).text(He?F(Ee,Re):Ee);var le=re.itemwidth+b.itemGap*2;p.positionText($,le,0),He?$.call(p.makeEditable,{gd:X,text:Ee}).call(j,ee,X,re).on("edit",function(K){this.text(F(K,Re)).call(j,ee,X,re);var te=de.trace._fullInput||{},ie={};if(l.hasTransform(te,"groupby")){var ce=l.getTransformIndices(te,"groupby"),ae=ce[ce.length-1],ve=s.keyedContainer(te,"transforms["+ae+"].styles","target","value.name");ve.set(de.trace._group,K),ie=ve.constructUpdate()}else ie.name=K;return l.call("_guiRestyle",X,ie,me.index)}):j($,ee,X,re)}function F(ee,X){var re=Math.max(4,X);if(ee&&ee.trim().length>=re/2)return ee;ee=ee||"";for(var de=re-ee.length;de>0;de--)ee+=" ";return ee}function V(ee,X){var re=X._context.doubleClickDelay,de,me=1,xe=s.ensureSingle(ee,"rect","legendtoggle",function(He){X._context.staticPlot||He.style("cursor","pointer").attr("pointer-events","all"),He.call(d.fill,"rgba(0,0,0,0)")});X._context.staticPlot||(xe.on("mousedown",function(){de=new Date().getTime(),de-X._legendMouseDownTime<re?me+=1:(me=1,X._legendMouseDownTime=de)}),xe.on("mouseup",function(){if(!(X._dragged||X._editing)){var He=X._fullLayout.legend;new Date().getTime()-X._legendMouseDownTime>re&&(me=Math.max(me-1,1)),z(X,He,ee,me,a.event)}}))}function j(ee,X,re,de,me){de._inHover&&ee.attr("data-notex",!0),p.convertToTspans(ee,re,function(){H(X,re,de,me)})}function H(ee,X,re,de){var me=ee.data()[0][0];if(!re._inHover&&me&&!me.trace.showlegend){ee.remove();return}var xe=ee.select("g[class*=math-group]"),He=xe.node();re||(re=X._fullLayout.legend);var Re=re.borderwidth,Ee;de===I?Ee=re.title.font:me.groupTitle?Ee=me.groupTitle.font:Ee=re.font;var ke=Ee.size*E,$,le;if(He){var K=v.bBox(He);$=K.height,le=K.width,de===I?v.setTranslate(xe,Re,Re+$*.75):v.setTranslate(xe,0,$*.25)}else{var te=ee.select(de===I?".legendtitletext":".legendtext"),ie=p.lineCount(te),ce=te.node();if($=ke*ie,le=ce?v.bBox(ce).width:0,de===I)re.title.side==="left"&&(le+=b.itemGap*2),p.positionText(te,Re+b.titlePad,Re+ke);else{var ae=b.itemGap*2+re.itemwidth;me.groupTitle&&(ae=b.itemGap,le-=re.itemwidth),p.positionText(te,ae,-ke*((ie-1)/2-.3))}}de===I?(re._titleWidth=le,re._titleHeight=$):(me.lineHeight=ke,me.height=Math.max($,16)+3,me.width=le)}function Y(ee){var X=0,re=0,de=ee.title.side;return de&&(de.indexOf("left")!==-1&&(X=ee._titleWidth),de.indexOf("top")!==-1&&(re=ee._titleHeight)),[X,re]}function J(ee,X,re,de){var me=ee._fullLayout;de||(de=me.legend);var xe=me._size,He=S.isVertical(de),Re=S.isGrouped(de),Ee=de.entrywidthmode==="fraction",ke=de.borderwidth,$=2*ke,le=b.itemGap,K=de.itemwidth+le*2,te=2*(ke+le),ie=we(de),ce=de.y<0||de.y===0&&ie==="top",ae=de.y>1||de.y===1&&ie==="bottom",ve=de.tracegroupgap,pe={};de._maxHeight=Math.max(ce||ae?me.height/2:xe.h,30);var he=0;de._width=0,de._height=0;var ye=Y(de);if(He)re.each(function(Nr){var er=Nr[0].height;v.setTranslate(this,ke+ye[0],ke+ye[1]+de._height+er/2+le),de._height+=er,de._width=Math.max(de._width,Nr[0].width)}),he=K+de._width,de._width+=le+K+$,de._height+=te,Re&&(X.each(function(Nr,er){v.setTranslate(this,0,er*de.tracegroupgap)}),de._height+=(de._lgroupsLength-1)*de.tracegroupgap);else{var _e=q(de),je=de.x<0||de.x===0&&_e==="right",Je=de.x>1||de.x===1&&_e==="left",nt=ae||ce,at=me.width/2;de._maxWidth=Math.max(je?nt&&_e==="left"?xe.l+xe.w:at:Je?nt&&_e==="right"?xe.r+xe.w:at:xe.w,2*K);var Fe=0,Ie=0;re.each(function(Nr){var er=M(Nr,de,K);Fe=Math.max(Fe,er),Ie+=er}),he=null;var Ke=0;if(Re){var Qe=0,it=0,Ne=0;X.each(function(){var Nr=0,er=0;a.select(this).selectAll("g.traces").each(function(dr){var zr=M(dr,de,K),Dr=dr[0].height;v.setTranslate(this,ye[0],ye[1]+ke+le+Dr/2+er),er+=Dr,Nr=Math.max(Nr,zr),pe[dr[0].trace.legendgroup]=Nr});var Wt=Nr+le;it>0&&Wt+ke+it>de._maxWidth?(Ke=Math.max(Ke,it),it=0,Ne+=Qe+ve,Qe=er):Qe=Math.max(Qe,er),v.setTranslate(this,it,Ne),it+=Wt}),de._width=Math.max(Ke,it)+ke,de._height=Ne+Qe+te}else{var ht=re.size(),Tt=Ie+$+(ht-1)*le<de._maxWidth,Xt=0,Nt=0,Mt=0,Vt=0;re.each(function(Nr){var er=Nr[0].height,Wt=M(Nr,de,K),dr=Tt?Wt:Fe;Ee||(dr+=le),dr+ke+Nt-le>=de._maxWidth&&(Ke=Math.max(Ke,Vt),Nt=0,Mt+=Xt,de._height+=Xt,Xt=0),v.setTranslate(this,ye[0]+ke+Nt,ye[1]+ke+Mt+er/2+le),Vt=Nt+Wt+le,Nt+=dr,Xt=Math.max(Xt,er)}),Tt?(de._width=Nt+$,de._height=Xt+te):(de._width=Math.max(Ke,Vt)+$,de._height+=Xt+te)}}de._width=Math.ceil(Math.max(de._width+ye[0],de._titleWidth+2*(ke+b.titlePad))),de._height=Math.ceil(Math.max(de._height+ye[1],de._titleHeight+2*(ke+b.itemGap))),de._effHeight=Math.min(de._height,de._maxHeight);var Yt=ee._context.edits,cr=Yt.legendText||Yt.legendPosition;re.each(function(Nr){var er=a.select(this).select(".legendtoggle"),Wt=Nr[0].height,dr=Nr[0].trace.legendgroup,zr=M(Nr,de,K);Re&&dr!==""&&(zr=pe[dr]);var Dr=cr?K:he||zr;!He&&!Ee&&(Dr+=le/2),v.setRect(er,0,-Wt/2,Dr,Wt)})}function ne(ee){var X=ee._fullLayout,re=X.legend,de=q(re),me=we(re);return n.autoMargin(ee,"legend",{x:re.x,y:re.y,l:re._width*A[de],r:re._width*P[de],b:re._effHeight*P[me],t:re._effHeight*A[me]})}function q(ee){return s.isRightAnchor(ee)?"right":s.isCenterAnchor(ee)?"center":"left"}function we(ee){return s.isBottomAnchor(ee)?"bottom":s.isMiddleAnchor(ee)?"middle":"top"}},{"../../constants/alignment":219,"../../lib":244,"../../lib/events":237,"../../lib/svg_text_utils":267,"../../plots/plots":325,"../../registry":327,"../color":103,"../dragelement":122,"../drawing":125,"./constants":154,"./get_legend_data":157,"./handle_click":158,"./helpers":159,"./style":161,"@plotly/d3":11}],157:[function(e,i,o){var a=e("../../registry"),s=e("./helpers");i.exports=function(l,u){var h=u._inHover,v=s.isGrouped(u),d=s.isReversed(u),p={},_=[],b=!1,x={},E=0,A=0,P,D;function R(X,re){if(X===""||!s.isGrouped(u)){var de="~~i"+E;_.push(de),p[de]=[re],E++}else _.indexOf(X)===-1?(_.push(X),b=!0,p[X]=[re]):p[X].push(re)}for(P=0;P<l.length;P++){var S=l[P],I=S[0],T=I.trace,M=T.legendgroup;if(!(!h&&(!T.visible||!T.showlegend)))if(a.traceIs(T,"pie-like"))for(x[M]||(x[M]={}),D=0;D<S.length;D++){var z=S[D].label;x[M][z]||(R(M,{label:z,color:S[D].color,i:S[D].i,trace:T,pts:S[D].pts}),x[M][z]=!0,A=Math.max(A,(z||"").length))}else R(M,I),A=Math.max(A,(T.name||"").length)}if(!_.length)return[];var U=!b||!v,F=[];for(P=0;P<_.length;P++){var V=p[_[P]];U?F.push(V[0]):F.push(V)}for(U&&(F=[F]),P=0;P<F.length;P++){var j=1/0;for(D=0;D<F[P].length;D++){var H=F[P][D].trace.legendrank;j>H&&(j=H)}F[P][0]._groupMinRank=j,F[P][0]._preGroupSort=P}var Y=function(X,re){return X[0]._groupMinRank-re[0]._groupMinRank||X[0]._preGroupSort-re[0]._preGroupSort},J=function(X,re){return X.trace.legendrank-re.trace.legendrank||X._preSort-re._preSort};for(F.forEach(function(X,re){X[0]._preGroupSort=re}),F.sort(Y),P=0;P<F.length;P++){F[P].forEach(function(X,re){X._preSort=re}),F[P].sort(J);var ne=F[P][0].trace,q=null;for(D=0;D<F[P].length;D++){var we=F[P][D].trace.legendgrouptitle;if(we&&we.text){q=we,h&&(we.font=u._groupTitleFont);break}}if(d&&F[P].reverse(),q){var ee=!1;for(D=0;D<F[P].length;D++)if(a.traceIs(F[P][D].trace,"pie-like")){ee=!0;break}F[P].unshift({i:-1,groupTitle:q,noClick:ee,trace:{showlegend:ne.showlegend,legendgroup:ne.legendgroup,visible:u.groupclick==="toggleitem"?!0:ne.visible}})}for(D=0;D<F[P].length;D++)F[P][D]=[F[P][D]]}return u._lgroupsLength=F.length,u._maxNameLength=A,F}},{"../../registry":327,"./helpers":159}],158:[function(e,i,o){var a=e("../../lib"),s=e("../../registry"),n=!0;i.exports=function(u,h,v){var d=h._fullLayout;if(h._dragged||h._editing)return;var p=d.legend.itemclick,_=d.legend.itemdoubleclick,b=d.legend.groupclick;v===1&&p==="toggle"&&_==="toggleothers"&&n&&h.data&&h._context.showTips&&a.notifier(a._(h,"Double-click on legend to isolate one trace"),"long"),n=!1;var x;if(v===1?x=p:v===2&&(x=_),!x)return;var E=b==="togglegroup",A=d.hiddenlabels?d.hiddenlabels.slice():[],P=u.data()[0][0];if(P.groupTitle&&P.noClick)return;var D=h._fullData,R=P.trace,S=R.legendgroup,I,T,M,z,U,F,V={},j=[],H=[],Y=[];function J(le,K,te){var ie=j.indexOf(le),ce=V[K];return ce||(ce=V[K]=[]),j.indexOf(le)===-1&&(j.push(le),ie=j.length-1),ce[ie]=te,ie}function ne(le,K){if(!(P.groupTitle&&!E)){var te=le._fullInput;if(s.hasTransform(te,"groupby")){var ie=H[te.index];if(!ie){var ce=s.getTransformIndices(te,"groupby"),ae=ce[ce.length-1];ie=a.keyedContainer(te,"transforms["+ae+"].styles","target","value.visible"),H[te.index]=ie}var ve=ie.get(le._group);ve===void 0&&(ve=!0),ve!==!1&&ie.set(le._group,K),Y[te.index]=J(te.index,"visible",te.visible!==!1)}else{var pe=te.visible===!1?!1:K;J(te.index,"visible",pe)}}}if(s.traceIs(R,"pie-like")){var q=P.label,we=A.indexOf(q);x==="toggle"?we===-1?A.push(q):A.splice(we,1):x==="toggleothers"&&(A=[],h.calcdata[0].forEach(function(le){q!==le.label&&A.push(le.label)}),h._fullLayout.hiddenlabels&&h._fullLayout.hiddenlabels.length===A.length&&we===-1&&(A=[])),s.call("_guiRelayout",h,"hiddenlabels",A)}else{var ee=S&&S.length,X=[],re;if(ee)for(I=0;I<D.length;I++)re=D[I],!!re.visible&&re.legendgroup===S&&X.push(I);if(x==="toggle"){var de;switch(R.visible){case!0:de="legendonly";break;case!1:de=!1;break;case"legendonly":de=!0;break}if(ee)if(E)for(I=0;I<D.length;I++)D[I].visible!==!1&&D[I].legendgroup===S&&ne(D[I],de);else ne(R,de);else ne(R,de)}else if(x==="toggleothers"){var me,xe,He,Re,Ee=!0;for(I=0;I<D.length;I++)if(me=D[I]===R,He=D[I].showlegend!==!0,!(me||He)&&(xe=ee&&D[I].legendgroup===S,!xe&&D[I].visible===!0&&!s.traceIs(D[I],"notLegendIsolatable"))){Ee=!1;break}for(I=0;I<D.length;I++)if(D[I].visible!==!1&&!s.traceIs(D[I],"notLegendIsolatable"))switch(R.visible){case"legendonly":ne(D[I],!0);break;case!0:Re=Ee?!0:"legendonly",me=D[I]===R,He=D[I].showlegend!==!0&&!D[I].legendgroup,xe=me||ee&&D[I].legendgroup===S,ne(D[I],xe||He?!0:Re);break}}for(I=0;I<H.length;I++)if(M=H[I],!!M){var ke=M.constructUpdate(),$=Object.keys(ke);for(T=0;T<$.length;T++)z=$[T],F=V[z]=V[z]||[],F[Y[I]]=ke[z]}for(U=Object.keys(V),I=0;I<U.length;I++)for(z=U[I],T=0;T<j.length;T++)V[z].hasOwnProperty(T)||(V[z][T]=void 0);s.call("_guiRestyle",h,V,j)}}},{"../../lib":244,"../../registry":327}],159:[function(e,i,o){o.isGrouped=function(s){return(s.traceorder||"").indexOf("grouped")!==-1},o.isVertical=function(s){return s.orientation!=="h"},o.isReversed=function(s){return(s.traceorder||"").indexOf("reversed")!==-1}},{}],160:[function(e,i,o){i.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":153,"./defaults":155,"./draw":156,"./style":161}],161:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../registry"),n=e("../../lib"),l=n.strTranslate,u=e("../drawing"),h=e("../color"),v=e("../colorscale/helpers").extractOpts,d=e("../../traces/scatter/subtypes"),p=e("../../traces/pie/style_one"),_=e("../../traces/pie/helpers").castOption,b=e("./constants"),x=12,E=5,A=2,P=10,D=5;i.exports=function(M,z,U){var F=z._fullLayout;U||(U=F.legend);var V=U.itemsizing==="constant",j=U.itemwidth,H=(j+b.itemGap*2)/2,Y=l(H,0),J=function($,le,K,te){var ie;if($+1)ie=$;else if(le&&le.width>0)ie=le.width;else return 0;return V?te:Math.min(ie,K)};M.each(function($){var le=a.select(this),K=n.ensureSingle(le,"g","layers");K.style("opacity",$[0].trace.opacity);var te=U.valign,ie=$[0].lineHeight,ce=$[0].height;if(te==="middle"||!ie||!ce)K.attr("transform",null);else{var ae={top:1,bottom:-1}[te],ve=ae*(.5*(ie-ce+3));K.attr("transform",l(0,ve))}var pe=K.selectAll("g.legendfill").data([$]);pe.enter().append("g").classed("legendfill",!0);var he=K.selectAll("g.legendlines").data([$]);he.enter().append("g").classed("legendlines",!0);var ye=K.selectAll("g.legendsymbols").data([$]);ye.enter().append("g").classed("legendsymbols",!0),ye.selectAll("g.legendpoints").data([$]).enter().append("g").classed("legendpoints",!0)}).each(ke).each(we).each(X).each(ee).each(de).each(Re).each(He).each(ne).each(q).each(me).each(xe);function ne($){var le=S($),K=le.showFill,te=le.showLine,ie=le.showGradientLine,ce=le.showGradientFill,ae=le.anyFill,ve=le.anyLine,pe=$[0],he=pe.trace,ye,_e,je=v(he),Je=je.colorscale,nt=je.reversescale,at=function(ht){if(ht.size())if(K)u.fillGroupStyle(ht,z);else{var Tt="legendfill-"+he.uid;u.gradient(ht,z,Tt,R(nt),Je,"fill")}},Fe=function(ht){if(ht.size()){var Tt="legendline-"+he.uid;u.lineGroupStyle(ht),u.gradient(ht,z,Tt,R(nt),Je,"stroke")}},Ie=d.hasMarkers(he)||!ae?"M5,0":ve?"M5,-2":"M5,-3",Ke=a.select(this),Qe=Ke.select(".legendfill").selectAll("path").data(K||ce?[$]:[]);if(Qe.enter().append("path").classed("js-fill",!0),Qe.exit().remove(),Qe.attr("d",Ie+"h"+j+"v6h-"+j+"z").call(at),te||ie){var it=J(void 0,he.line,P,E);_e=n.minExtend(he,{line:{width:it}}),ye=[n.minExtend(pe,{trace:_e})]}var Ne=Ke.select(".legendlines").selectAll("path").data(te||ie?[ye]:[]);Ne.enter().append("path").classed("js-line",!0),Ne.exit().remove(),Ne.attr("d",Ie+(ie?"l"+j+",0.0001":"h"+j)).call(te?u.lineGroupStyle:Fe)}function q($){var le=S($),K=le.anyFill,te=le.anyLine,ie=le.showLine,ce=le.showMarker,ae=$[0],ve=ae.trace,pe=!ce&&!te&&!K&&d.hasText(ve),he,ye;function _e(Qe,it,Ne,ht){var Tt=n.nestedProperty(ve,Qe).get(),Xt=n.isArrayOrTypedArray(Tt)&&it?it(Tt):Tt;if(V&&Xt&&ht!==void 0&&(Xt=ht),Ne){if(Xt<Ne[0])return Ne[0];if(Xt>Ne[1])return Ne[1]}return Xt}function je(Qe){return ae._distinct&&ae.index&&Qe[ae.index]?Qe[ae.index]:Qe[0]}if(ce||pe||ie){var Je={},nt={};if(ce){Je.mc=_e("marker.color",je),Je.mx=_e("marker.symbol",je),Je.mo=_e("marker.opacity",n.mean,[.2,1]),Je.mlc=_e("marker.line.color",je),Je.mlw=_e("marker.line.width",n.mean,[0,5],A),nt.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var at=_e("marker.size",n.mean,[2,16],x);Je.ms=at,nt.marker.size=at}ie&&(nt.line={width:_e("line.width",je,[0,10],E)}),pe&&(Je.tx="Aa",Je.tp=_e("textposition",je),Je.ts=10,Je.tc=_e("textfont.color",je),Je.tf=_e("textfont.family",je)),he=[n.minExtend(ae,Je)],ye=n.minExtend(ve,nt),ye.selectedpoints=null,ye.texttemplate=null}var Fe=a.select(this).select("g.legendpoints"),Ie=Fe.selectAll("path.scatterpts").data(ce?he:[]);Ie.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",Y),Ie.exit().remove(),Ie.call(u.pointStyle,ye,z),ce&&(he[0].mrc=3);var Ke=Fe.selectAll("g.pointtext").data(pe?he:[]);Ke.enter().append("g").classed("pointtext",!0).append("text").attr("transform",Y),Ke.exit().remove(),Ke.selectAll("text").call(u.textPointStyle,ye,z)}function we($){var le=$[0].trace,K=le.type==="waterfall";if($[0]._distinct&&K){var te=$[0].trace[$[0].dir].marker;return $[0].mc=te.color,$[0].mlw=te.line.width,$[0].mlc=te.line.color,re($,this,"waterfall")}var ie=[];le.visible&&K&&(ie=$[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ce=a.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ie);ce.enter().append("path").classed("legendwaterfall",!0).attr("transform",Y).style("stroke-miterlimit",1),ce.exit().remove(),ce.each(function(ae){var ve=a.select(this),pe=le[ae[0]].marker,he=J(void 0,pe.line,D,A);ve.attr("d",ae[1]).style("stroke-width",he+"px").call(h.fill,pe.color),he&&ve.call(h.stroke,pe.line.color)})}function ee($){re($,this)}function X($){re($,this,"funnel")}function re($,le,K){var te=$[0].trace,ie=te.marker||{},ce=ie.line||{},ae=K?te.visible&&te.type===K:s.traceIs(te,"bar"),ve=a.select(le).select("g.legendpoints").selectAll("path.legend"+K).data(ae?[$]:[]);ve.enter().append("path").classed("legend"+K,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",Y),ve.exit().remove(),ve.each(function(pe){var he=a.select(this),ye=pe[0],_e=J(ye.mlw,ie.line,D,A);he.style("stroke-width",_e+"px");var je=ye.mcc;if(!U._inHover&&"mc"in ye){var Je=v(ie),nt=Je.mid;nt===void 0&&(nt=(Je.max+Je.min)/2),je=u.tryColorscale(ie,"")(nt)}var at=je||ye.mc||ie.color,Fe=ie.pattern,Ie=Fe&&u.getPatternAttr(Fe.shape,0,"");if(Ie){var Ke=u.getPatternAttr(Fe.bgcolor,0,null),Qe=u.getPatternAttr(Fe.fgcolor,0,null),it=Fe.fgopacity,Ne=I(Fe.size,8,10),ht=I(Fe.solidity,.5,1),Tt="legend-"+te.uid;he.call(u.pattern,"legend",z,Tt,Ie,Ne,ht,je,Fe.fillmode,Ke,Qe,it)}else he.call(h.fill,at);_e&&h.stroke(he,ye.mlc||ce.color)})}function de($){var le=$[0].trace,K=a.select(this).select("g.legendpoints").selectAll("path.legendbox").data(le.visible&&s.traceIs(le,"box-violin")?[$]:[]);K.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",Y),K.exit().remove(),K.each(function(){var te=a.select(this);if((le.boxpoints==="all"||le.points==="all")&&h.opacity(le.fillcolor)===0&&h.opacity((le.line||{}).color)===0){var ie=n.minExtend(le,{marker:{size:V?x:n.constrain(le.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});K.call(u.pointStyle,ie,z)}else{var ce=J(void 0,le.line,D,A);te.style("stroke-width",ce+"px").call(h.fill,le.fillcolor),ce&&h.stroke(te,le.line.color)}})}function me($){var le=$[0].trace,K=a.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(le.visible&&le.type==="candlestick"?[$,$]:[]);K.enter().append("path").classed("legendcandle",!0).attr("d",function(te,ie){return ie?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",Y).style("stroke-miterlimit",1),K.exit().remove(),K.each(function(te,ie){var ce=a.select(this),ae=le[ie?"increasing":"decreasing"],ve=J(void 0,ae.line,D,A);ce.style("stroke-width",ve+"px").call(h.fill,ae.fillcolor),ve&&h.stroke(ce,ae.line.color)})}function xe($){var le=$[0].trace,K=a.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(le.visible&&le.type==="ohlc"?[$,$]:[]);K.enter().append("path").classed("legendohlc",!0).attr("d",function(te,ie){return ie?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",Y).style("stroke-miterlimit",1),K.exit().remove(),K.each(function(te,ie){var ce=a.select(this),ae=le[ie?"increasing":"decreasing"],ve=J(void 0,ae.line,D,A);ce.style("fill","none").call(u.dashLine,ae.line.dash,ve),ve&&h.stroke(ce,ae.line.color)})}function He($){Ee($,this,"pie")}function Re($){Ee($,this,"funnelarea")}function Ee($,le,K){var te=$[0],ie=te.trace,ce=K?ie.visible&&ie.type===K:s.traceIs(ie,K),ae=a.select(le).select("g.legendpoints").selectAll("path.legend"+K).data(ce?[$]:[]);if(ae.enter().append("path").classed("legend"+K,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",Y),ae.exit().remove(),ae.size()){var ve=(ie.marker||{}).line,pe=J(_(ve.width,te.pts),ve,D,A),he=n.minExtend(ie,{marker:{line:{width:pe}}});he.marker.line.color=ve.color;var ye=n.minExtend(te,{trace:he});p(ae,ye,he)}}function ke($){var le=$[0].trace,K,te=[];if(le.visible)switch(le.type){case"histogram2d":case"heatmap":te=[["M-15,-2V4H15V-2Z"]],K=!0;break;case"choropleth":case"choroplethmapbox":te=[["M-6,-6V6H6V-6Z"]],K=!0;break;case"densitymapbox":te=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],K="radial";break;case"cone":te=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],K=!1;break;case"streamtube":te=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],K=!1;break;case"surface":te=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],K=!0;break;case"mesh3d":te=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],K=!1;break;case"volume":te=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],K=!0;break;case"isosurface":te=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],K=!1;break}var ie=a.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(te);ie.enter().append("path").classed("legend3dandfriends",!0).attr("transform",Y).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(ce,ae){var ve=a.select(this),pe=v(le),he=pe.colorscale,ye=pe.reversescale,_e=function(at){if(at.size()){var Fe="legendfill-"+le.uid;u.gradient(at,z,Fe,R(ye,K==="radial"),he,"fill")}},je;if(he){if(!K){var nt=he.length;je=ae===0?he[ye?nt-1:0][1]:ae===1?he[ye?0:nt-1][1]:he[Math.floor((nt-1)/2)][1]}}else{var Je=le.vertexcolor||le.facecolor||le.color;je=n.isArrayOrTypedArray(Je)?Je[ae]||Je[0]:Je}ve.attr("d",ce[0]),je?ve.call(h.fill,je):ve.call(_e)})}};function R(T,M){var z=M?"radial":"horizontal";return z+(T?"":"reversed")}function S(T){var M=T[0].trace,z=M.contours,U=d.hasLines(M),F=d.hasMarkers(M),V=M.visible&&M.fill&&M.fill!=="none",j=!1,H=!1;if(z){var Y=z.coloring;Y==="lines"?j=!0:U=Y==="none"||Y==="heatmap"||z.showlines,z.type==="constraint"?V=z._operation!=="=":(Y==="fill"||Y==="heatmap")&&(H=!0)}return{showMarker:F,showLine:U,showFill:V,showGradientLine:j,showGradientFill:H,anyLine:U||j,anyFill:V||H}}function I(T,M,z){return T&&n.isArrayOrTypedArray(T)?M:T>z?z:T}},{"../../lib":244,"../../registry":327,"../../traces/pie/helpers":359,"../../traces/pie/style_one":365,"../../traces/scatter/subtypes":392,"../color":103,"../colorscale/helpers":114,"../drawing":125,"./constants":154,"@plotly/d3":11}],162:[function(e,i,o){e("./constants"),i.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":164}],163:[function(e,i,o){var a=e("../../registry"),s=e("../../plots/plots"),n=e("../../plots/cartesian/axis_ids"),l=e("../../fonts/ploticon"),u=e("../shapes/draw").eraseActiveShape,h=e("../../lib"),v=h._,d=i.exports={};d.toImage={name:"toImage",title:function(T){var M=T._context.toImageButtonOptions||{},z=M.format||"png";return z==="png"?v(T,"Download plot as a png"):v(T,"Download plot")},icon:l.camera,click:function(T){var M=T._context.toImageButtonOptions,z={format:M.format||"png"};h.notifier(v(T,"Taking snapshot - this may take a few seconds"),"long"),z.format!=="svg"&&h.isIE()&&(h.notifier(v(T,"IE only supports svg.  Changing format to svg."),"long"),z.format="svg"),["filename","width","height","scale"].forEach(function(U){U in M&&(z[U]=M[U])}),a.call("downloadImage",T,z).then(function(U){h.notifier(v(T,"Snapshot succeeded")+" - "+U,"long")}).catch(function(){h.notifier(v(T,"Sorry, there was a problem downloading your snapshot!"),"long")})}},d.sendDataToCloud={name:"sendDataToCloud",title:function(T){return v(T,"Edit in Chart Studio")},icon:l.disk,click:function(T){s.sendDataToCloud(T)}},d.editInChartStudio={name:"editInChartStudio",title:function(T){return v(T,"Edit in Chart Studio")},icon:l.pencil,click:function(T){s.sendDataToCloud(T)}},d.zoom2d={name:"zoom2d",_cat:"zoom",title:function(T){return v(T,"Zoom")},attr:"dragmode",val:"zoom",icon:l.zoombox,click:p},d.pan2d={name:"pan2d",_cat:"pan",title:function(T){return v(T,"Pan")},attr:"dragmode",val:"pan",icon:l.pan,click:p},d.select2d={name:"select2d",_cat:"select",title:function(T){return v(T,"Box Select")},attr:"dragmode",val:"select",icon:l.selectbox,click:p},d.lasso2d={name:"lasso2d",_cat:"lasso",title:function(T){return v(T,"Lasso Select")},attr:"dragmode",val:"lasso",icon:l.lasso,click:p},d.drawclosedpath={name:"drawclosedpath",title:function(T){return v(T,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:l.drawclosedpath,click:p},d.drawopenpath={name:"drawopenpath",title:function(T){return v(T,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:l.drawopenpath,click:p},d.drawline={name:"drawline",title:function(T){return v(T,"Draw line")},attr:"dragmode",val:"drawline",icon:l.drawline,click:p},d.drawrect={name:"drawrect",title:function(T){return v(T,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:l.drawrect,click:p},d.drawcircle={name:"drawcircle",title:function(T){return v(T,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:l.drawcircle,click:p},d.eraseshape={name:"eraseshape",title:function(T){return v(T,"Erase active shape")},icon:l.eraseshape,click:u},d.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(T){return v(T,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:p},d.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(T){return v(T,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:p},d.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(T){return v(T,"Autoscale")},attr:"zoom",val:"auto",icon:l.autoscale,click:p},d.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(T){return v(T,"Reset axes")},attr:"zoom",val:"reset",icon:l.home,click:p},d.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(T){return v(T,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:p},d.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(T){return v(T,"Compare data on hover")},attr:"hovermode",val:function(T){return T._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:p};function p(T,M){var z=M.currentTarget,U=z.getAttribute("data-attr"),F=z.getAttribute("data-val")||!0,V=T._fullLayout,j={},H=n.list(T,null,!0),Y=V._cartesianSpikesEnabled,J,ne;if(U==="zoom"){var q=F==="in"?.5:2,we=(1+q)/2,ee=(1-q)/2,X;for(ne=0;ne<H.length;ne++)if(J=H[ne],!J.fixedrange)if(X=J._name,F==="auto")j[X+".autorange"]=!0;else if(F==="reset"){if(J._rangeInitial===void 0)j[X+".autorange"]=!0;else{var re=J._rangeInitial.slice();j[X+".range[0]"]=re[0],j[X+".range[1]"]=re[1]}J._showSpikeInitial!==void 0&&(j[X+".showspikes"]=J._showSpikeInitial,Y==="on"&&!J._showSpikeInitial&&(Y="off"))}else{var de=[J.r2l(J.range[0]),J.r2l(J.range[1])],me=[we*de[0]+ee*de[1],we*de[1]+ee*de[0]];j[X+".range[0]"]=J.l2r(me[0]),j[X+".range[1]"]=J.l2r(me[1])}}else U==="hovermode"&&(F==="x"||F==="y")&&(F=V._isHoriz?"y":"x",z.setAttribute("data-val",F)),j[U]=F;V._cartesianSpikesEnabled=Y,a.call("_guiRelayout",T,j)}d.zoom3d={name:"zoom3d",_cat:"zoom",title:function(T){return v(T,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:l.zoombox,click:_},d.pan3d={name:"pan3d",_cat:"pan",title:function(T){return v(T,"Pan")},attr:"scene.dragmode",val:"pan",icon:l.pan,click:_},d.orbitRotation={name:"orbitRotation",title:function(T){return v(T,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:l["3d_rotate"],click:_},d.tableRotation={name:"tableRotation",title:function(T){return v(T,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:l["z-axis"],click:_};function _(T,M){for(var z=M.currentTarget,U=z.getAttribute("data-attr"),F=z.getAttribute("data-val")||!0,V=T._fullLayout._subplots.gl3d||[],j={},H=U.split("."),Y=0;Y<V.length;Y++)j[V[Y]+"."+H[1]]=F;var J=F==="pan"?F:"zoom";j.dragmode=J,a.call("_guiRelayout",T,j)}d.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(T){return v(T,"Reset camera to default")},attr:"resetDefault",icon:l.home,click:b},d.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(T){return v(T,"Reset camera to last save")},attr:"resetLastSave",icon:l.movie,click:b};function b(T,M){for(var z=M.currentTarget,U=z.getAttribute("data-attr"),F=U==="resetLastSave",V=U==="resetDefault",j=T._fullLayout,H=j._subplots.gl3d||[],Y={},J=0;J<H.length;J++){var ne=H[J],q=ne+".camera",we=ne+".aspectratio",ee=ne+".aspectmode",X=j[ne]._scene,re;F?(Y[q+".up"]=X.viewInitial.up,Y[q+".eye"]=X.viewInitial.eye,Y[q+".center"]=X.viewInitial.center,re=!0):V&&(Y[q+".up"]=null,Y[q+".eye"]=null,Y[q+".center"]=null,re=!0),re&&(Y[we+".x"]=X.viewInitial.aspectratio.x,Y[we+".y"]=X.viewInitial.aspectratio.y,Y[we+".z"]=X.viewInitial.aspectratio.z,Y[ee]=X.viewInitial.aspectmode)}a.call("_guiRelayout",T,Y)}d.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(T){return v(T,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:E};function x(T,M){var z=M.currentTarget,U=z._previousVal,F=T._fullLayout,V=F._subplots.gl3d||[],j=["xaxis","yaxis","zaxis"],H={},Y={};if(U)Y=U,z._previousVal=null;else{for(var J=0;J<V.length;J++){var ne=V[J],q=F[ne],we=ne+".hovermode";H[we]=q.hovermode,Y[we]=!1;for(var ee=0;ee<3;ee++){var X=j[ee],re=ne+"."+X+".showspikes";Y[re]=!1,H[re]=q[X].showspikes}}z._previousVal=H}return Y}function E(T,M){var z=x(T,M);a.call("_guiRelayout",T,z)}d.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(T){return v(T,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:A},d.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(T){return v(T,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:A},d.resetGeo={name:"resetGeo",_cat:"reset",title:function(T){return v(T,"Reset")},attr:"reset",val:null,icon:l.autoscale,click:A},d.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(T){return v(T,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:D};function A(T,M){for(var z=M.currentTarget,U=z.getAttribute("data-attr"),F=z.getAttribute("data-val")||!0,V=T._fullLayout,j=V._subplots.geo||[],H=0;H<j.length;H++){var Y=j[H],J=V[Y];if(U==="zoom"){var ne=J.projection.scale,q=F==="in"?2*ne:.5*ne;a.call("_guiRelayout",T,Y+".projection.scale",q)}}U==="reset"&&I(T,"geo")}d.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(T){return v(T,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:D},d.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(T){return v(T,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:D};function P(T){var M=T._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function D(T){var M=P(T);a.call("_guiRelayout",T,"hovermode",M)}d.resetViewSankey={name:"resetSankeyGroup",title:function(T){return v(T,"Reset view")},icon:l.home,click:function(T){for(var M={"node.groups":[],"node.x":[],"node.y":[]},z=0;z<T._fullData.length;z++){var U=T._fullData[z]._viewInitial;M["node.groups"].push(U.node.groups.slice()),M["node.x"].push(U.node.x.slice()),M["node.y"].push(U.node.y.slice())}a.call("restyle",T,M)}},d.toggleHover={name:"toggleHover",title:function(T){return v(T,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(T,M){var z=x(T,M);z.hovermode=P(T),a.call("_guiRelayout",T,z)}},d.resetViews={name:"resetViews",title:function(T){return v(T,"Reset views")},icon:l.home,click:function(T,M){var z=M.currentTarget;z.setAttribute("data-attr","zoom"),z.setAttribute("data-val","reset"),p(T,M),z.setAttribute("data-attr","resetLastSave"),b(T,M),I(T,"geo"),I(T,"mapbox")}},d.toggleSpikelines={name:"toggleSpikelines",title:function(T){return v(T,"Toggle Spike Lines")},icon:l.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(T){var M=T._fullLayout,z=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=z==="on"?"off":"on",a.call("_guiRelayout",T,R(T))}};function R(T){for(var M=T._fullLayout,z=M._cartesianSpikesEnabled==="on",U=n.list(T,null,!0),F={},V=0;V<U.length;V++){var j=U[V];F[j._name+".showspikes"]=z?!0:j._showSpikeInitial}return F}d.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(T){return v(T,"Reset view")},attr:"reset",icon:l.home,click:function(T){I(T,"mapbox")}},d.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(T){return v(T,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:S},d.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(T){return v(T,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:S};function S(T,M){for(var z=M.currentTarget,U=z.getAttribute("data-val"),F=T._fullLayout,V=F._subplots.mapbox||[],j=1.05,H={},Y=0;Y<V.length;Y++){var J=V[Y],ne=F[J].zoom,q=U==="in"?j*ne:ne/j;H[J+".zoom"]=q}a.call("_guiRelayout",T,H)}function I(T,M){for(var z=T._fullLayout,U=z._subplots[M]||[],F={},V=0;V<U.length;V++)for(var j=U[V],H=z[j]._subplot,Y=H.viewInitial,J=Object.keys(Y),ne=0;ne<J.length;ne++){var q=J[ne];F[j+"."+q]=Y[q]}a.call("_guiRelayout",T,F)}},{"../../fonts/ploticon":227,"../../lib":244,"../../plots/cartesian/axis_ids":295,"../../plots/plots":325,"../../registry":327,"../shapes/draw":198}],164:[function(e,i,o){var a=e("./buttons"),s=Object.keys(a),n=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],l=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(n),u=[],h=function(v){if(l.indexOf(v._cat||v.name)===-1){var d=v.name,p=(v._cat||v.name).toLowerCase();u.indexOf(d)===-1&&u.push(d),u.indexOf(p)===-1&&u.push(p)}};s.forEach(function(v){h(a[v])}),u.sort(),i.exports={DRAW_MODES:n,backButtons:l,foreButtons:u}},{"./buttons":163}],165:[function(e,i,o){var a=e("../../lib"),s=e("../color"),n=e("../../plot_api/plot_template"),l=e("./attributes");i.exports=function(h,v){var d=h.modebar||{},p=n.newContainer(v,"modebar");function _(x,E){return a.coerce(d,p,l,x,E)}_("orientation"),_("bgcolor",s.addOpacity(v.paper_bgcolor,.5));var b=s.contrast(s.rgb(v.modebar.bgcolor));_("color",s.addOpacity(b,.3)),_("activecolor",s.addOpacity(b,.7)),_("uirevision",v.uirevision),_("add"),_("remove")}},{"../../lib":244,"../../plot_api/plot_template":280,"../color":103,"./attributes":162}],166:[function(e,i,o){i.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":162,"./defaults":165,"./manage":167}],167:[function(e,i,o){var a=e("../../plots/cartesian/axis_ids"),s=e("../../traces/scatter/subtypes"),n=e("../../registry"),l=e("../fx/helpers").isUnifiedHover,u=e("./modebar"),h=e("./buttons"),v=e("./constants").DRAW_MODES,d=e("../../lib").extendDeep;i.exports=function(D){var R=D._fullLayout,S=D._context,I=R._modeBar;if(!S.displayModeBar&&!S.watermark){I&&(I.destroy(),delete R._modeBar);return}if(!Array.isArray(S.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(S.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var T=S.modeBarButtons,M;Array.isArray(T)&&T.length?M=A(T):!S.displayModeBar&&S.watermark?M=[]:M=p(D),I?I.update(D,M):R._modeBar=u(D,M)};function p(P){var D=P._fullLayout,R=P._fullData,S=P._context;function I(ae,ve){if(typeof ve=="string"){if(ve.toLowerCase()===ae.toLowerCase())return!0}else{var pe=ve.name,he=ve._cat||ve.name;if(pe===ae||he===ae.toLowerCase())return!0}return!1}var T=D.modebar.add;typeof T=="string"&&(T=[T]);var M=D.modebar.remove;typeof M=="string"&&(M=[M]);var z=S.modeBarButtonsToAdd.concat(T.filter(function(ae){for(var ve=0;ve<S.modeBarButtonsToRemove.length;ve++)if(I(ae,S.modeBarButtonsToRemove[ve]))return!1;return!0})),U=S.modeBarButtonsToRemove.concat(M.filter(function(ae){for(var ve=0;ve<S.modeBarButtonsToAdd.length;ve++)if(I(ae,S.modeBarButtonsToAdd[ve]))return!1;return!0})),F=D._has("cartesian"),V=D._has("gl3d"),j=D._has("geo"),H=D._has("pie"),Y=D._has("funnelarea"),J=D._has("gl2d"),ne=D._has("ternary"),q=D._has("mapbox"),we=D._has("polar"),ee=D._has("smith"),X=D._has("sankey"),re=_(D),de=l(D.hovermode),me=[];function xe(ae){if(!!ae.length){for(var ve=[],pe=0;pe<ae.length;pe++){for(var he=ae[pe],ye=h[he],_e=ye.name.toLowerCase(),je=(ye._cat||ye.name).toLowerCase(),Je=!1,nt=0;nt<U.length;nt++){var at=U[nt].toLowerCase();if(at===_e||at===je){Je=!0;break}}Je||ve.push(h[he])}me.push(ve)}}var He=["toImage"];S.showEditInChartStudio?He.push("editInChartStudio"):S.showSendToCloud&&He.push("sendDataToCloud"),xe(He);var Re=[],Ee=[],ke=[],$=[];(F||J||H||Y||ne)+j+V+q+we+ee>1?(Ee=["toggleHover"],ke=["resetViews"]):j?(Re=["zoomInGeo","zoomOutGeo"],Ee=["hoverClosestGeo"],ke=["resetGeo"]):V?(Ee=["hoverClosest3d"],ke=["resetCameraDefault3d","resetCameraLastSave3d"]):q?(Re=["zoomInMapbox","zoomOutMapbox"],Ee=["toggleHover"],ke=["resetViewMapbox"]):J?Ee=["hoverClosestGl2d"]:H?Ee=["hoverClosestPie"]:X?(Ee=["hoverClosestCartesian","hoverCompareCartesian"],ke=["resetViewSankey"]):Ee=["toggleHover"],F&&(Ee=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(x(R)||de)&&(Ee=[]),(F||J)&&!re&&(Re=["zoomIn2d","zoomOut2d","autoScale2d"],ke[0]!=="resetViews"&&(ke=["resetScale2d"])),V?$=["zoom3d","pan3d","orbitRotation","tableRotation"]:(F||J)&&!re||ne?$=["zoom2d","pan2d"]:q||j?$=["pan2d"]:we&&($=["zoom2d"]),b(R)&&$.push("select2d","lasso2d");var le=[],K=function(ae){le.indexOf(ae)===-1&&Ee.indexOf(ae)!==-1&&le.push(ae)};if(Array.isArray(z)){for(var te=[],ie=0;ie<z.length;ie++){var ce=z[ie];typeof ce=="string"?(ce=ce.toLowerCase(),v.indexOf(ce)!==-1?(D._has("mapbox")||D._has("cartesian"))&&$.push(ce):ce==="togglespikelines"?K("toggleSpikelines"):ce==="togglehover"?K("toggleHover"):ce==="hovercompare"?K("hoverCompareCartesian"):ce==="hoverclosest"?(K("hoverClosestCartesian"),K("hoverClosestGeo"),K("hoverClosest3d"),K("hoverClosestGl2d"),K("hoverClosestPie")):ce==="v1hovermode"&&(K("toggleHover"),K("hoverClosestCartesian"),K("hoverCompareCartesian"),K("hoverClosestGeo"),K("hoverClosest3d"),K("hoverClosestGl2d"),K("hoverClosestPie"))):te.push(ce)}z=te}return xe($),xe(Re.concat(ke)),xe(le),E(me,z)}function _(P){for(var D=a.list({_fullLayout:P},null,!0),R=0;R<D.length;R++)if(!D[R].fixedrange)return!1;return!0}function b(P){for(var D=!1,R=0;R<P.length&&!D;R++){var S=P[R];!S._module||!S._module.selectPoints||(n.traceIs(S,"scatter-like")?(s.hasMarkers(S)||s.hasText(S))&&(D=!0):n.traceIs(S,"box-violin")?(S.boxpoints==="all"||S.points==="all")&&(D=!0):D=!0)}return D}function x(P){for(var D=0;D<P.length;D++)if(!n.traceIs(P[D],"noHover"))return!1;return!0}function E(P,D){if(D.length)if(Array.isArray(D[0]))for(var R=0;R<D.length;R++)P.push(D[R]);else P.push(D);return P}function A(P){for(var D=d([],P),R=0;R<D.length;R++)for(var S=D[R],I=0;I<S.length;I++){var T=S[I];if(typeof T=="string")if(h[T]!==void 0)D[R][I]=h[T];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return D}},{"../../lib":244,"../../plots/cartesian/axis_ids":295,"../../registry":327,"../../traces/scatter/subtypes":392,"../fx/helpers":139,"./buttons":163,"./constants":164,"./modebar":168}],168:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("../../lib"),l=e("../../fonts/ploticon"),u=e("../../version").version,h=new DOMParser;function v(b){this.container=b.container,this.element=document.createElement("div"),this.update(b.graphInfo,b.buttons),this.container.appendChild(this.element)}var d=v.prototype;d.update=function(b,x){this.graphInfo=b;var E=this.graphInfo._context,A=this.graphInfo._fullLayout,P="modebar-"+A._uid;this.element.setAttribute("id",P),this._uid=P,this.element.className="modebar",E.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),A.modebar.orientation==="v"&&(this.element.className+=" vertical",x=x.reverse());var D=A.modebar,R=E.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";n.deleteRelatedStyleRule(P),n.addRelatedStyleRule(P,R+"#"+P+" .modebar-group","background-color: "+D.bgcolor),n.addRelatedStyleRule(P,"#"+P+" .modebar-btn .icon path","fill: "+D.color),n.addRelatedStyleRule(P,"#"+P+" .modebar-btn:hover .icon path","fill: "+D.activecolor),n.addRelatedStyleRule(P,"#"+P+" .modebar-btn.active .icon path","fill: "+D.activecolor);var S=!this.hasButtons(x),I=this.hasLogo!==E.displaylogo,T=this.locale!==E.locale;if(this.locale=E.locale,(S||I||T)&&(this.removeAllButtons(),this.updateButtons(x),E.watermark||E.displaylogo)){var M=this.getLogo();E.watermark&&(M.className=M.className+" watermark"),A.modebar.orientation==="v"?this.element.insertBefore(M,this.element.childNodes[0]):this.element.appendChild(M),this.hasLogo=!0}this.updateActiveButton()},d.updateButtons=function(b){var x=this;this.buttons=b,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(E){var A=x.createGroup();E.forEach(function(P){var D=P.name;if(!D)throw new Error("must provide button 'name' in button config");if(x.buttonsNames.indexOf(D)!==-1)throw new Error("button name '"+D+"' is taken");x.buttonsNames.push(D);var R=x.createButton(P);x.buttonElements.push(R),A.appendChild(R)}),x.element.appendChild(A)})},d.createGroup=function(){var b=document.createElement("div");return b.className="modebar-group",b},d.createButton=function(b){var x=this,E=document.createElement("a");E.setAttribute("rel","tooltip"),E.className="modebar-btn";var A=b.title;A===void 0?A=b.name:typeof A=="function"&&(A=A(this.graphInfo)),(A||A===0)&&E.setAttribute("data-title",A),b.attr!==void 0&&E.setAttribute("data-attr",b.attr);var P=b.val;P!==void 0&&(typeof P=="function"&&(P=P(this.graphInfo)),E.setAttribute("data-val",P));var D=b.click;if(typeof D!="function")throw new Error("must provide button 'click' function in button config");E.addEventListener("click",function(S){b.click(x.graphInfo,S),x.updateActiveButton(S.currentTarget)}),E.setAttribute("data-toggle",b.toggle||!1),b.toggle&&a.select(E).classed("active",!0);var R=b.icon;return typeof R=="function"?E.appendChild(R()):E.appendChild(this.createIcon(R||l.question)),E.setAttribute("data-gravity",b.gravity||"n"),E},d.createIcon=function(b){var x=s(b.height)?Number(b.height):b.ascent-b.descent,E="http://www.w3.org/2000/svg",A;if(b.path){A=document.createElementNS(E,"svg"),A.setAttribute("viewBox",[0,0,b.width,x].join(" ")),A.setAttribute("class","icon");var P=document.createElementNS(E,"path");P.setAttribute("d",b.path),b.transform?P.setAttribute("transform",b.transform):b.ascent!==void 0&&P.setAttribute("transform","matrix(1 0 0 -1 0 "+b.ascent+")"),A.appendChild(P)}if(b.svg){var D=h.parseFromString(b.svg,"application/xml");A=D.childNodes[0]}return A.setAttribute("height","1em"),A.setAttribute("width","1em"),A},d.updateActiveButton=function(b){var x=this.graphInfo._fullLayout,E=b!==void 0?b.getAttribute("data-attr"):null;this.buttonElements.forEach(function(A){var P=A.getAttribute("data-val")||!0,D=A.getAttribute("data-attr"),R=A.getAttribute("data-toggle")==="true",S=a.select(A);if(R)D===E&&S.classed("active",!S.classed("active"));else{var I=D===null?D:n.nestedProperty(x,D).get();S.classed("active",I===P)}})},d.hasButtons=function(b){var x=this.buttons;if(!x||b.length!==x.length)return!1;for(var E=0;E<b.length;++E){if(b[E].length!==x[E].length)return!1;for(var A=0;A<b[E].length;A++)if(b[E][A].name!==x[E][A].name)return!1}return!0};function p(b){return b+" (v"+u+")"}d.getLogo=function(){var b=this.createGroup(),x=document.createElement("a");return x.href="https://plotly.com/",x.target="_blank",x.setAttribute("data-title",p(n._(this.graphInfo,"Produced with Plotly.js"))),x.className="modebar-btn plotlyjsicon modebar-btn--logo",x.appendChild(this.createIcon(l.newplotlylogo)),b.appendChild(x),b},d.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},d.destroy=function(){n.removeElement(this.container.querySelector(".modebar")),n.deleteRelatedStyleRule(this._uid)};function _(b,x){var E=b._fullLayout,A=new v({graphInfo:b,container:E._modebardiv.node(),buttons:x});return E._privateplot&&a.select(A.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),A}i.exports=_},{"../../fonts/ploticon":227,"../../lib":244,"../../version":400,"@plotly/d3":11,"fast-isnumeric":17}],169:[function(e,i,o){var a=e("../../plots/font_attributes"),s=e("../color/attributes"),n=e("../../plot_api/plot_template").templatedArray,l=n("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});i.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:a({editType:"plot"}),bgcolor:{valType:"color",dflt:s.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":280,"../../plots/font_attributes":319,"../color/attributes":102}],170:[function(e,i,o){i.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],171:[function(e,i,o){var a=e("../../lib"),s=e("../color"),n=e("../../plot_api/plot_template"),l=e("../../plots/array_container_defaults"),u=e("./attributes"),h=e("./constants");i.exports=function(_,b,x,E,A){var P=_.rangeselector||{},D=n.newContainer(b,"rangeselector");function R(z,U){return a.coerce(P,D,u,z,U)}var S=l(P,D,{name:"buttons",handleItemDefaults:v,calendar:A}),I=R("visible",S.length>0);if(I){var T=d(b,x,E);R("x",T[0]),R("y",T[1]),a.noneOrAll(_,b,["x","y"]),R("xanchor"),R("yanchor"),a.coerceFont(R,"font",x.font);var M=R("bgcolor");R("activecolor",s.contrast(M,h.lightAmount,h.darkAmount)),R("bordercolor"),R("borderwidth")}};function v(p,_,b,x){var E=x.calendar;function A(R,S){return a.coerce(p,_,u.buttons,R,S)}var P=A("visible");if(P){var D=A("step");D!=="all"&&(E&&E!=="gregorian"&&(D==="month"||D==="year")?_.stepmode="backward":A("stepmode"),A("count")),A("label")}}function d(p,_,b){for(var x=b.filter(function(D){return _[D].anchor===p._id}),E=0,A=0;A<x.length;A++){var P=_[x[A]].domain;P&&(E=Math.max(P[1],E))}return[p.domain[0],E+h.yPad]}},{"../../lib":244,"../../plot_api/plot_template":280,"../../plots/array_container_defaults":286,"../color":103,"./attributes":169,"./constants":170}],172:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../registry"),n=e("../../plots/plots"),l=e("../color"),u=e("../drawing"),h=e("../../lib"),v=h.strTranslate,d=e("../../lib/svg_text_utils"),p=e("../../plots/cartesian/axis_ids"),_=e("../../constants/alignment"),b=_.LINE_SPACING,x=_.FROM_TL,E=_.FROM_BR,A=e("./constants"),P=e("./get_update_object");i.exports=function(V){var j=V._fullLayout,H=j._infolayer.selectAll(".rangeselector").data(D(V),R);H.enter().append("g").classed("rangeselector",!0),H.exit().remove(),H.style({cursor:"pointer","pointer-events":"all"}),H.each(function(Y){var J=a.select(this),ne=Y,q=ne.rangeselector,we=J.selectAll("g.button").data(h.filterVisible(q.buttons));we.enter().append("g").classed("button",!0),we.exit().remove(),we.each(function(ee){var X=a.select(this),re=P(ne,ee);ee._isActive=S(ne,ee,re),X.call(I,q,ee),X.call(M,q,ee,V),X.on("click",function(){V._dragged||s.call("_guiRelayout",V,re)}),X.on("mouseover",function(){ee._isHovered=!0,X.call(I,q,ee)}),X.on("mouseout",function(){ee._isHovered=!1,X.call(I,q,ee)})}),U(V,we,q,ne._name,J)})};function D(F){for(var V=p.list(F,"x",!0),j=[],H=0;H<V.length;H++){var Y=V[H];Y.rangeselector&&Y.rangeselector.visible&&j.push(Y)}return j}function R(F){return F._id}function S(F,V,j){if(V.step==="all")return F.autorange===!0;var H=Object.keys(j);return F.range[0]===j[H[0]]&&F.range[1]===j[H[1]]}function I(F,V,j){var H=h.ensureSingle(F,"rect","selector-rect",function(Y){Y.attr("shape-rendering","crispEdges")});H.attr({rx:A.rx,ry:A.ry}),H.call(l.stroke,V.bordercolor).call(l.fill,T(V,j)).style("stroke-width",V.borderwidth+"px")}function T(F,V){return V._isActive||V._isHovered?F.activecolor:F.bgcolor}function M(F,V,j,H){function Y(ne){d.convertToTspans(ne,H)}var J=h.ensureSingle(F,"text","selector-text",function(ne){ne.attr("text-anchor","middle")});J.call(u.font,V.font).text(z(j,H._fullLayout._meta)).call(Y)}function z(F,V){return F.label?V?h.templateString(F.label,V):F.label:F.step==="all"?"all":F.count+F.step.charAt(0)}function U(F,V,j,H,Y){var J=0,ne=0,q=j.borderwidth;V.each(function(){var me=a.select(this),xe=me.select(".selector-text"),He=j.font.size*b,Re=Math.max(He*d.lineCount(xe),16)+3;ne=Math.max(ne,Re)}),V.each(function(){var me=a.select(this),xe=me.select(".selector-rect"),He=me.select(".selector-text"),Re=He.node()&&u.bBox(He.node()).width,Ee=j.font.size*b,ke=d.lineCount(He),$=Math.max(Re+10,A.minButtonWidth);me.attr("transform",v(q+J,q)),xe.attr({x:0,y:0,width:$,height:ne}),d.positionText(He,$/2,ne/2-(ke-1)*Ee/2+3),J+=$+5});var we=F._fullLayout._size,ee=we.l+we.w*j.x,X=we.t+we.h*(1-j.y),re="left";h.isRightAnchor(j)&&(ee-=J,re="right"),h.isCenterAnchor(j)&&(ee-=J/2,re="center");var de="top";h.isBottomAnchor(j)&&(X-=ne,de="bottom"),h.isMiddleAnchor(j)&&(X-=ne/2,de="middle"),J=Math.ceil(J),ne=Math.ceil(ne),ee=Math.round(ee),X=Math.round(X),n.autoMargin(F,H+"-range-selector",{x:j.x,y:j.y,l:J*x[re],r:J*E[re],b:ne*E[de],t:ne*x[de]}),Y.attr("transform",v(ee,X))}},{"../../constants/alignment":219,"../../lib":244,"../../lib/svg_text_utils":267,"../../plots/cartesian/axis_ids":295,"../../plots/plots":325,"../../registry":327,"../color":103,"../drawing":125,"./constants":170,"./get_update_object":173,"@plotly/d3":11}],173:[function(e,i,o){var a=e("d3-time"),s=e("../../lib").titleCase;i.exports=function(u,h){var v=u._name,d={};if(h.step==="all")d[v+".autorange"]=!0;else{var p=n(u,h);d[v+".range[0]"]=p[0],d[v+".range[1]"]=p[1]}return d};function n(l,u){var h=l.range,v=new Date(l.r2l(h[1])),d=u.step,p=a["utc"+s(d)],_=u.count,b;switch(u.stepmode){case"backward":b=l.l2r(+p.offset(v,-_));break;case"todate":var x=p.offset(v,-_);b=l.l2r(+p.ceil(x));break}var E=h[1];return[b,E]}},{"../../lib":244,"d3-time":16}],174:[function(e,i,o){i.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":169,"./defaults":171,"./draw":172}],175:[function(e,i,o){var a=e("../color/attributes");i.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":102}],176:[function(e,i,o){var a=e("../../plots/cartesian/axis_ids").list,s=e("../../plots/cartesian/autorange").getAutoRange,n=e("./constants");i.exports=function(u){for(var h=a(u,"x",!0),v=0;v<h.length;v++){var d=h[v],p=d[n.name];p&&p.visible&&p.autorange&&(p._input.autorange=!0,p._input.range=p.range=s(u,d))}}},{"../../plots/cartesian/autorange":290,"../../plots/cartesian/axis_ids":295,"./constants":177}],177:[function(e,i,o){i.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],178:[function(e,i,o){var a=e("../../lib"),s=e("../../plot_api/plot_template"),n=e("../../plots/cartesian/axis_ids"),l=e("./attributes"),u=e("./oppaxis_attributes");i.exports=function(v,d,p){var _=v[p],b=d[p];if(!(_.rangeslider||d._requestRangeslider[b._id]))return;a.isPlainObject(_.rangeslider)||(_.rangeslider={});var x=_.rangeslider,E=s.newContainer(b,"rangeslider");function A(H,Y){return a.coerce(x,E,l,H,Y)}var P,D;function R(H,Y){return a.coerce(P,D,u,H,Y)}var S=A("visible");if(!!S){A("bgcolor",d.plot_bgcolor),A("bordercolor"),A("borderwidth"),A("thickness"),A("autorange",!b.isValidRange(x.range)),A("range");var I=d._subplots;if(I)for(var T=I.cartesian.filter(function(H){return H.substr(0,H.indexOf("y"))===n.name2id(p)}).map(function(H){return H.substr(H.indexOf("y"),H.length)}),M=a.simpleMap(T,n.id2name),z=0;z<M.length;z++){var U=M[z];P=x[U]||{},D=s.newContainer(E,U,"yaxis");var F=d[U],V;P.range&&F.isValidRange(P.range)&&(V="fixed");var j=R("rangemode",V);j!=="match"&&R("range",F.range.slice())}E._input=x}}},{"../../lib":244,"../../plot_api/plot_template":280,"../../plots/cartesian/axis_ids":295,"./attributes":175,"./oppaxis_attributes":182}],179:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../registry"),n=e("../../plots/plots"),l=e("../../lib"),u=l.strTranslate,h=e("../drawing"),v=e("../color"),d=e("../titles"),p=e("../../plots/cartesian"),_=e("../../plots/cartesian/axis_ids"),b=e("../dragelement"),x=e("../../lib/setcursor"),E=e("./constants");i.exports=function(F){for(var V=F._fullLayout,j=V._rangeSliderData,H=0;H<j.length;H++){var Y=j[H][E.name];Y._clipId=Y._id+"-"+V._uid}function J(q){return q._name}var ne=V._infolayer.selectAll("g."+E.containerClassName).data(j,J);ne.exit().each(function(q){var we=q[E.name];V._topdefs.select("#"+we._clipId).remove()}).remove(),j.length!==0&&(ne.enter().append("g").classed(E.containerClassName,!0).attr("pointer-events","all"),ne.each(function(q){var we=a.select(this),ee=q[E.name],X=V[_.id2name(q.anchor)],re=ee[_.id2name(q.anchor)];if(ee.range){var de=l.simpleMap(ee.range,q.r2l),me=l.simpleMap(q.range,q.r2l),xe;me[0]<me[1]?xe=[Math.min(de[0],me[0]),Math.max(de[1],me[1])]:xe=[Math.max(de[0],me[0]),Math.min(de[1],me[1])],ee.range=ee._input.range=l.simpleMap(xe,q.l2r)}q.cleanRange("rangeslider.range");var He=V._size,Re=q.domain;ee._width=He.w*(Re[1]-Re[0]);var Ee=Math.round(He.l+He.w*Re[0]),ke=Math.round(He.t+He.h*(1-q._counterDomainMin)+(q.side==="bottom"?q._depth:0)+ee._offsetShift+E.extraPad);we.attr("transform",u(Ee,ke)),ee._rl=l.simpleMap(ee.range,q.r2l);var $=ee._rl[0],le=ee._rl[1],K=le-$;if(ee.p2d=function(je){return je/ee._width*K+$},ee.d2p=function(je){return(je-$)/K*ee._width},q.rangebreaks){var te=q.locateBreaks($,le);if(te.length){var ie,ce,ae=0;for(ie=0;ie<te.length;ie++)ce=te[ie],ae+=ce.max-ce.min;var ve=ee._width/(le-$-ae),pe=[-ve*$];for(ie=0;ie<te.length;ie++)ce=te[ie],pe.push(pe[pe.length-1]-ve*(ce.max-ce.min));for(ee.d2p=function(je){for(var Je=pe[0],nt=0;nt<te.length;nt++){var at=te[nt];if(je>=at.max)Je=pe[nt+1];else if(je<at.min)break}return Je+ve*je},ie=0;ie<te.length;ie++)ce=te[ie],ce.pmin=ee.d2p(ce.min),ce.pmax=ee.d2p(ce.max);ee.p2d=function(je){for(var Je=pe[0],nt=0;nt<te.length;nt++){var at=te[nt];if(je>=at.pmax)Je=pe[nt+1];else if(je<at.pmin)break}return(je-Je)/ve}}}if(re.rangemode!=="match"){var he=X.r2l(re.range[0]),ye=X.r2l(re.range[1]),_e=ye-he;ee.d2pOppAxis=function(je){return(je-he)/_e*ee._height}}we.call(R,F,q,ee).call(S,F,q,ee).call(I,F,q,ee).call(M,F,q,ee,re).call(z,F,q,ee).call(U,F,q,ee),A(we,F,q,ee),D(we,F,q,ee,X,re),q.side==="bottom"&&d.draw(F,q._id+"title",{propContainer:q,propName:q._name+".title",placeholder:V._dfltTitle.x,attributes:{x:q._offset+q._length/2,y:ke+ee._height+ee._offsetShift+10+1.5*q.title.font.size,"text-anchor":"middle"}})}))};function A(F,V,j,H){if(V._context.staticPlot)return;var Y=F.select("rect."+E.slideBoxClassName).node(),J=F.select("rect."+E.grabAreaMinClassName).node(),ne=F.select("rect."+E.grabAreaMaxClassName).node();function q(){var we=a.event,ee=we.target,X=we.clientX||we.touches[0].clientX,re=X-F.node().getBoundingClientRect().left,de=H.d2p(j._rl[0]),me=H.d2p(j._rl[1]),xe=b.coverSlip();this.addEventListener("touchmove",He),this.addEventListener("touchend",Re),xe.addEventListener("mousemove",He),xe.addEventListener("mouseup",Re);function He(Ee){var ke=Ee.clientX||Ee.touches[0].clientX,$=+ke-X,le,K,te;switch(ee){case Y:te="ew-resize",le=de+$,K=me+$;break;case J:te="col-resize",le=de+$,K=me;break;case ne:te="col-resize",le=de,K=me+$;break;default:te="ew-resize",le=re,K=re+$;break}if(K<le){var ie=K;K=le,le=ie}H._pixelMin=le,H._pixelMax=K,x(a.select(xe),te),P(F,V,j,H)}function Re(){xe.removeEventListener("mousemove",He),xe.removeEventListener("mouseup",Re),this.removeEventListener("touchmove",He),this.removeEventListener("touchend",Re),l.removeElement(xe)}}F.on("mousedown",q),F.on("touchstart",q)}function P(F,V,j,H){function Y(q){return j.l2r(l.constrain(q,H._rl[0],H._rl[1]))}var J=Y(H.p2d(H._pixelMin)),ne=Y(H.p2d(H._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",V,j._name+".range",[J,ne])})}function D(F,V,j,H,Y,J){var ne=E.handleWidth/2;function q(Ee){return l.constrain(Ee,0,H._width)}function we(Ee){return l.constrain(Ee,0,H._height)}function ee(Ee){return l.constrain(Ee,-ne,H._width+ne)}var X=q(H.d2p(j._rl[0])),re=q(H.d2p(j._rl[1]));if(F.select("rect."+E.slideBoxClassName).attr("x",X).attr("width",re-X),F.select("rect."+E.maskMinClassName).attr("width",X),F.select("rect."+E.maskMaxClassName).attr("x",re).attr("width",H._width-re),J.rangemode!=="match"){var de=H._height-we(H.d2pOppAxis(Y._rl[1])),me=H._height-we(H.d2pOppAxis(Y._rl[0]));F.select("rect."+E.maskMinOppAxisClassName).attr("x",X).attr("height",de).attr("width",re-X),F.select("rect."+E.maskMaxOppAxisClassName).attr("x",X).attr("y",me).attr("height",H._height-me).attr("width",re-X),F.select("rect."+E.slideBoxClassName).attr("y",de).attr("height",me-de)}var xe=.5,He=Math.round(ee(X-ne))-xe,Re=Math.round(ee(re-ne))+xe;F.select("g."+E.grabberMinClassName).attr("transform",u(He,xe)),F.select("g."+E.grabberMaxClassName).attr("transform",u(Re,xe))}function R(F,V,j,H){var Y=l.ensureSingle(F,"rect",E.bgClassName,function(we){we.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),J=H.borderwidth%2===0?H.borderwidth:H.borderwidth-1,ne=-H._offsetShift,q=h.crispRound(V,H.borderwidth);Y.attr({width:H._width+J,height:H._height+J,transform:u(ne,ne),"stroke-width":q}).call(v.stroke,H.bordercolor).call(v.fill,H.bgcolor)}function S(F,V,j,H){var Y=V._fullLayout,J=l.ensureSingleById(Y._topdefs,"clipPath",H._clipId,function(ne){ne.append("rect").attr({x:0,y:0})});J.select("rect").attr({width:H._width,height:H._height})}function I(F,V,j,H){var Y=V.calcdata,J=F.selectAll("g."+E.rangePlotClassName).data(j._subplotsWith,l.identity);J.enter().append("g").attr("class",function(q){return E.rangePlotClassName+" "+q}).call(h.setClipUrl,H._clipId,V),J.order(),J.exit().remove();var ne;J.each(function(q,we){var ee=a.select(this),X=we===0,re=_.getFromId(V,q,"y"),de=re._name,me=H[de],xe={data:[],layout:{xaxis:{type:j.type,domain:[0,1],range:H.range.slice(),calendar:j.calendar},width:H._width,height:H._height,margin:{t:0,b:0,l:0,r:0}},_context:V._context};j.rangebreaks&&(xe.layout.xaxis.rangebreaks=j.rangebreaks),xe.layout[de]={type:re.type,domain:[0,1],range:me.rangemode!=="match"?me.range.slice():re.range.slice(),calendar:re.calendar},re.rangebreaks&&(xe.layout[de].rangebreaks=re.rangebreaks),n.supplyDefaults(xe);var He=xe._fullLayout.xaxis,Re=xe._fullLayout[de];He.clearCalc(),He.setScale(),Re.clearCalc(),Re.setScale();var Ee={id:q,plotgroup:ee,xaxis:He,yaxis:Re,isRangePlot:!0};X?ne=Ee:(Ee.mainplot="xy",Ee.mainplotinfo=ne),p.rangePlot(V,Ee,T(Y,q))})}function T(F,V){for(var j=[],H=0;H<F.length;H++){var Y=F[H],J=Y[0].trace;J.xaxis+J.yaxis===V&&j.push(Y)}return j}function M(F,V,j,H,Y){var J=l.ensureSingle(F,"rect",E.maskMinClassName,function(ee){ee.attr({x:0,y:0,"shape-rendering":"crispEdges"})});J.attr("height",H._height).call(v.fill,E.maskColor);var ne=l.ensureSingle(F,"rect",E.maskMaxClassName,function(ee){ee.attr({y:0,"shape-rendering":"crispEdges"})});if(ne.attr("height",H._height).call(v.fill,E.maskColor),Y.rangemode!=="match"){var q=l.ensureSingle(F,"rect",E.maskMinOppAxisClassName,function(ee){ee.attr({y:0,"shape-rendering":"crispEdges"})});q.attr("width",H._width).call(v.fill,E.maskOppAxisColor);var we=l.ensureSingle(F,"rect",E.maskMaxOppAxisClassName,function(ee){ee.attr({y:0,"shape-rendering":"crispEdges"})});we.attr("width",H._width).style("border-top",E.maskOppBorder).call(v.fill,E.maskOppAxisColor)}}function z(F,V,j,H){if(!V._context.staticPlot){var Y=l.ensureSingle(F,"rect",E.slideBoxClassName,function(J){J.attr({y:0,cursor:E.slideBoxCursor,"shape-rendering":"crispEdges"})});Y.attr({height:H._height,fill:E.slideBoxFill})}}function U(F,V,j,H){var Y=l.ensureSingle(F,"g",E.grabberMinClassName),J=l.ensureSingle(F,"g",E.grabberMaxClassName),ne={x:0,width:E.handleWidth,rx:E.handleRadius,fill:v.background,stroke:v.defaultLine,"stroke-width":E.handleStrokeWidth,"shape-rendering":"crispEdges"},q={y:Math.round(H._height/4),height:Math.round(H._height/2)},we=l.ensureSingle(Y,"rect",E.handleMinClassName,function(me){me.attr(ne)});we.attr(q);var ee=l.ensureSingle(J,"rect",E.handleMaxClassName,function(me){me.attr(ne)});ee.attr(q);var X={width:E.grabAreaWidth,x:0,y:0,fill:E.grabAreaFill,cursor:V._context.staticPlot?void 0:E.grabAreaCursor},re=l.ensureSingle(Y,"rect",E.grabAreaMinClassName,function(me){me.attr(X)});re.attr("height",H._height);var de=l.ensureSingle(J,"rect",E.grabAreaMaxClassName,function(me){me.attr(X)});de.attr("height",H._height)}},{"../../lib":244,"../../lib/setcursor":264,"../../plots/cartesian":303,"../../plots/cartesian/axis_ids":295,"../../plots/plots":325,"../../registry":327,"../color":103,"../dragelement":122,"../drawing":125,"../titles":212,"./constants":177,"@plotly/d3":11}],180:[function(e,i,o){var a=e("../../plots/cartesian/axis_ids"),s=e("../../lib/svg_text_utils"),n=e("./constants"),l=e("../../constants/alignment").LINE_SPACING,u=n.name;function h(v){var d=v&&v[u];return d&&d.visible}o.isVisible=h,o.makeData=function(v){var d=a.list({_fullLayout:v},"x",!0),p=v.margin,_=[];if(!v._has("gl2d"))for(var b=0;b<d.length;b++){var x=d[b];if(h(x)){_.push(x);var E=x[u];E._id=u+x._id,E._height=(v.height-p.b-p.t)*E.thickness,E._offsetShift=Math.floor(E.borderwidth/2)}}v._rangeSliderData=_},o.autoMarginOpts=function(v,d){var p=v._fullLayout,_=d[u],b=d._id.charAt(0),x=0,E=0;if(d.side==="bottom"&&(x=d._depth,d.title.text!==p._dfltTitle[b])){E=1.5*d.title.font.size+10+_._offsetShift;var A=(d.title.text.match(s.BR_TAG_ALL)||[]).length;E+=A*d.title.font.size*l}return{x:0,y:d._counterDomainMin,l:0,r:0,t:0,b:_._height+x+Math.max(p.margin.b,E),pad:n.extraPad+_._offsetShift*2}}},{"../../constants/alignment":219,"../../lib/svg_text_utils":267,"../../plots/cartesian/axis_ids":295,"./constants":177}],181:[function(e,i,o){var a=e("../../lib"),s=e("./attributes"),n=e("./oppaxis_attributes"),l=e("./helpers");i.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a.extendFlat({},s,{yaxis:n})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:l.isVisible,makeData:l.makeData,autoMarginOpts:l.autoMarginOpts}},{"../../lib":244,"./attributes":175,"./calc_autorange":176,"./defaults":178,"./draw":179,"./helpers":180,"./oppaxis_attributes":182}],182:[function(e,i,o){i.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],183:[function(e,i,o){var a=e("../annotations/attributes"),s=e("../../traces/scatter/attributes").line,n=e("../drawing/attributes").dash,l=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,h=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),i.exports=u(h("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:l({},a.xref,{}),yref:l({},a.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:s.color,width:l({},s.width,{min:1,dflt:1}),dash:l({},n,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":220,"../../lib/extend":238,"../../plot_api/edit_types":273,"../../plot_api/plot_template":280,"../../traces/scatter/attributes":367,"../annotations/attributes":86,"../drawing/attributes":124}],184:[function(e,i,o){i.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],185:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes"),n=e("../../plots/array_container_defaults"),l=e("./attributes"),u=e("../shapes/helpers");i.exports=function(d,p){n(d,p,{name:"selections",handleItemDefaults:h});for(var _=p.selections,b=0;b<_.length;b++){var x=_[b];!x||x.path===void 0&&(x.x0===void 0||x.x1===void 0||x.y0===void 0||x.y1===void 0)&&(p.selections[b]=null)}};function h(v,d,p){function _(J,ne){return a.coerce(v,d,l,J,ne)}var b=_("path"),x=b?"path":"rect",E=_("type",x),A=E!=="path";A&&delete d.path,_("opacity"),_("line.color"),_("line.width"),_("line.dash");for(var P=["x","y"],D=0;D<2;D++){var R=P[D],S={_fullLayout:p},I,T,M,z=s.coerceRef(v,d,S,R);if(I=s.getFromId(S,z),I._selectionIndices.push(d._index),M=u.rangeToShapePosition(I),T=u.shapePositionToRange(I),A){var U=R+"0",F=R+"1",V=v[U],j=v[F];v[U]=T(v[U],!0),v[F]=T(v[F],!0),s.coercePosition(d,S,_,z,U),s.coercePosition(d,S,_,z,F);var H=d[U],Y=d[F];H!==void 0&&Y!==void 0&&(d[U]=M(H),d[F]=M(Y),v[U]=V,v[F]=j)}}A&&a.noneOrAll(v,d,["x0","x1","y0","y1"])}},{"../../lib":244,"../../plots/array_container_defaults":286,"../../plots/cartesian/axes":291,"../shapes/helpers":205,"./attributes":183}],186:[function(e,i,o){var a=e("../shapes/draw_newshape/helpers").readPaths,s=e("../shapes/display_outlines"),n=e("../shapes/handle_outline").clearOutlineControllers,l=e("../color"),u=e("../drawing"),h=e("../../plot_api/plot_template").arrayEditor,v=e("../shapes/helpers"),d=v.getPathString;i.exports={draw:p,drawOne:b,activateLastSelection:A};function p(D){var R=D._fullLayout;n(D),R._selectionLayer.selectAll("path").remove();for(var S in R._plots){var I=R._plots[S].selectionLayer;I&&I.selectAll("path").remove()}for(var T=0;T<R.selections.length;T++)b(D,T)}function _(D){return D._context.editSelection}function b(D,R){D._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+R+'"]').remove();var S=v.makeSelectionsOptionsAndPlotinfo(D,R),I=S.options,T=S.plotinfo;if(!I._input)return;M(D._fullLayout._selectionLayer);function M(z){var U=d(D,I),F={"data-index":R,"fill-rule":"evenodd",d:U},V=I.opacity,j="rgba(0,0,0,0)",H=I.line.color||l.contrast(D._fullLayout.plot_bgcolor),Y=I.line.width,J=I.line.dash;Y||(Y=5,J="solid");var ne=_(D)&&D._fullLayout._activeSelectionIndex===R;ne&&(j=D._fullLayout.activeselection.fillcolor,V=D._fullLayout.activeselection.opacity);for(var q=[],we=1;we>=0;we--){var ee=z.append("path").attr(F).style("opacity",we?.1:V).call(l.stroke,H).call(l.fill,j).call(u.dashLine,we?"solid":J,we?4+Y:Y);if(x(ee,D,I),ne){var X=h(D.layout,"selections",I);ee.style({cursor:"move"});var re={element:ee.node(),plotinfo:T,gd:D,editHelpers:X,isActiveSelection:!0},de=a(U,D);s(de,ee,re)}else ee.style("pointer-events",we?"all":"none");q[we]=ee}var me=q[0],xe=q[1];xe.node().addEventListener("click",function(){return E(D,me)})}}function x(D,R,S){var I=S.xref+S.yref;u.setClipUrl(D,"clip"+R._fullLayout._uid+I,R)}function E(D,R){if(!!_(D)){var S=R.node(),I=+S.getAttribute("data-index");if(I>=0){if(I===D._fullLayout._activeSelectionIndex){P(D);return}D._fullLayout._activeSelectionIndex=I,D._fullLayout._deactivateSelection=P,p(D)}}}function A(D){if(!!_(D)){var R=D._fullLayout.selections.length-1;D._fullLayout._activeSelectionIndex=R,D._fullLayout._deactivateSelection=P,p(D)}}function P(D){if(!!_(D)){var R=D._fullLayout._activeSelectionIndex;R>=0&&(n(D),delete D._fullLayout._activeSelectionIndex,p(D))}}},{"../../plot_api/plot_template":280,"../color":103,"../drawing":125,"../shapes/display_outlines":197,"../shapes/draw_newshape/helpers":202,"../shapes/handle_outline":204,"../shapes/helpers":205}],187:[function(e,i,o){var a=e("../../drawing/attributes").dash,s=e("../../../lib/extend").extendFlat;i.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:s({},a,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":238,"../../drawing/attributes":124}],188:[function(e,i,o){i.exports=function(s,n,l){l("newselection.mode");var u=l("newselection.line.width");u&&(l("newselection.line.color"),l("newselection.line.dash")),l("activeselection.fillcolor"),l("activeselection.opacity")}},{}],189:[function(e,i,o){var a=e("../../dragelement/helpers"),s=a.selectMode,n=e("../../shapes/handle_outline"),l=n.clearOutline,u=e("../../shapes/draw_newshape/helpers"),h=u.readPaths,v=u.writePaths,d=u.fixDatesForPaths;i.exports=function(_,b){if(!!_.length){var x=_[0][0];if(!!x){var E=x.getAttribute("d"),A=b.gd,P=A._fullLayout.newselection,D=b.plotinfo,R=D.xaxis,S=D.yaxis,I=b.isActiveSelection,T=b.dragmode,M=(A.layout||{}).selections||[];if(!s(T)&&I!==void 0){var z=A._fullLayout._activeSelectionIndex;if(z<M.length)switch(A._fullLayout.selections[z].type){case"rect":T="select";break;case"path":T="lasso";break}}var U=h(E,A,D,I),F={xref:R._id,yref:S._id,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}},V;U.length===1&&(V=U[0]),V&&V.length===5&&T==="select"?(F.type="rect",F.x0=V[0][1],F.y0=V[0][2],F.x1=V[2][1],F.y1=V[2][2]):(F.type="path",R&&S&&d(U,R,S),F.path=v(U),V=null),l(A);for(var j=b.editHelpers,H=(j||{}).modifyItem,Y=[],J=0;J<M.length;J++){var ne=A._fullLayout.selections[J];if(!ne){Y[J]=ne;continue}if(Y[J]=ne._input,I!==void 0&&J===A._fullLayout._activeSelectionIndex){var q=F;switch(ne.type){case"rect":H("x0",q.x0),H("x1",q.x1),H("y0",q.y0),H("y1",q.y1);break;case"path":H("path",q.path);break}}}return I===void 0?(Y.push(F),Y):j?j.getUpdateObj():{}}}}},{"../../dragelement/helpers":121,"../../shapes/draw_newshape/helpers":202,"../../shapes/handle_outline":204}],190:[function(e,i,o){var a=e("../../lib").strTranslate;function s(h,v){switch(h.type){case"log":return h.p2d(v);case"date":return h.p2r(v,0,h.calendar);default:return h.p2r(v)}}function n(h,v){switch(h.type){case"log":return h.d2p(v);case"date":return h.r2p(v,0,h.calendar);default:return h.r2p(v)}}function l(h){var v=h._id.charAt(0)==="y"?1:0;return function(d){return s(h,d[v])}}function u(h){return a(h.xaxis._offset,h.yaxis._offset)}i.exports={p2r:s,r2p:n,axValue:l,getTransform:u}},{"../../lib":244}],191:[function(e,i,o){var a=e("./draw"),s=e("./select");i.exports={moduleType:"component",name:"selections",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewSelectionDefaults:e("./draw_newselection/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("selections"),draw:a.draw,drawOne:a.drawOne,reselect:s.reselect,prepSelect:s.prepSelect,clearOutline:s.clearOutline,clearSelectionsCache:s.clearSelectionsCache,selectOnClick:s.selectOnClick}},{"../../plots/cartesian/include_components":302,"./attributes":183,"./defaults":185,"./draw":186,"./draw_newselection/defaults":188,"./select":192}],192:[function(e,i,o){var a=e("polybooljs"),s=e("point-in-polygon/nested"),n=e("../../registry"),l=e("../drawing").dashStyle,u=e("../color"),h=e("../fx"),v=e("../fx/helpers").makeEventData,d=e("../dragelement/helpers"),p=d.freeMode,_=d.rectMode,b=d.drawMode,x=d.openMode,E=d.selectMode,A=e("../shapes/helpers"),P=e("../shapes/constants"),D=e("../shapes/display_outlines"),R=e("../shapes/handle_outline").clearOutline,S=e("../shapes/draw_newshape/helpers"),I=S.handleEllipse,T=S.readPaths,M=e("../shapes/draw_newshape/newshapes"),z=e("./draw_newselection/newselections"),U=e("./draw").activateLastSelection,F=e("../../lib"),V=F.sorterAsc,j=e("../../lib/polygon"),H=e("../../lib/throttle"),Y=e("../../plots/cartesian/axis_ids").getFromId,J=e("../../lib/clear_gl_canvases"),ne=e("../../plot_api/subroutines").redrawReglTraces,q=e("./constants"),we=q.MINSELECT,ee=j.filter,X=j.tester,re=e("./helpers"),de=re.p2r,me=re.axValue,xe=re.getTransform;function He($e){return $e.subplot!==void 0}function Re($e,pt,kt,Me,rt){var st=!He(Me),ft=p(rt),zt=_(rt),Ue=x(rt),Ae=b(rt),Oe=E(rt),We=rt==="drawline",Ve=rt==="drawcircle",lt=We||Ve,mt=Me.gd,dt=mt._fullLayout,At=Oe&&dt.newselection.mode==="immediate"&&st,Bt=dt._zoomlayer,ir=Me.element.getBoundingClientRect(),tr=Me.plotinfo,vt=xe(tr),pr=pt-ir.left,Gt=kt-ir.top;dt._calcInverseTransform(mt);var Mr=F.apply3DTransform(dt._invTransform)(pr,Gt);pr=Mr[0],Gt=Mr[1];var Rr=dt._invScaleX,Yr=dt._invScaleY,Kr=pr,vr=Gt,Xr="M"+pr+","+Gt,$r=Me.xaxes[0],Le=Me.yaxes[0],De=$r._length,bt=Le._length,xt=$e.altKey&&!(b(rt)&&Ue),Ct,Rt,Lt,Pt,nr,Tr,gr;te($e,mt,Me),ft&&(Ct=ee([[pr,Gt]],q.BENDPX));var $t=Bt.selectAll("path.select-outline-"+tr.id).data([1]),mr=Ae?dt.newshape:dt.newselection,Pr=Ae&&!Ue?mr.fillcolor:"rgba(0,0,0,0)",wr=mr.line.color||(st?u.contrast(mt._fullLayout.plot_bgcolor):"#7f7f7f");$t.enter().append("path").attr("class","select-outline select-outline-"+tr.id).style({opacity:Ae?mr.opacity/2:1,"stroke-dasharray":l(mr.line.dash,mr.line.width),"stroke-width":mr.line.width+"px","shape-rendering":"crispEdges"}).call(u.stroke,wr).call(u.fill,Pr).attr("fill-rule","evenodd").classed("cursor-move",!!Ae).attr("transform",vt).attr("d",Xr+"Z");var fr=Bt.append("path").attr("class","zoombox-corners").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1}).attr("transform",vt).attr("d","M0,0Z"),Ir=dt._uid+q.SELECTID,Vr=[],_r=pe(mt,Me.xaxes,Me.yaxes,Me.subplot);At&&!$e.shiftKey&&(Me._clearSubplotSelections=function(){if(!!st){var qr=$r._id,tn=Le._id;Xt(mt,qr,tn,_r);for(var Ur=(mt.layout||{}).selections||[],Sn=[],wn=!1,hn=0;hn<Ur.length;hn++){var bn=dt.selections[hn];bn.xref!==qr||bn.yref!==tn?Sn.push(Ur[hn]):wn=!0}wn&&(mt._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",mt,{selections:Sn}))}});var Gr=Wt(Me);Me.moveFn=function(qr,tn){Me._clearSubplotSelections&&(Me._clearSubplotSelections(),Me._clearSubplotSelections=void 0),Kr=Math.max(0,Math.min(De,Rr*qr+pr)),vr=Math.max(0,Math.min(bt,Yr*tn+Gt));var Ur=Math.abs(Kr-pr),Sn=Math.abs(vr-Gt);if(zt){var wn,hn,bn;if(Oe){var mn=dt.selectdirection;switch(mn==="any"?Sn<Math.min(Ur*.6,we)?wn="h":Ur<Math.min(Sn*.6,we)?wn="v":wn="d":wn=mn,wn){case"h":hn=Ve?bt/2:0,bn=bt;break;case"v":hn=Ve?De/2:0,bn=De;break}}if(Ae)switch(dt.newshape.drawdirection){case"vertical":wn="h",hn=Ve?bt/2:0,bn=bt;break;case"horizontal":wn="v",hn=Ve?De/2:0,bn=De;break;case"ortho":Ur<Sn?(wn="h",hn=Gt,bn=vr):(wn="v",hn=pr,bn=Kr);break;default:wn="d"}wn==="h"?(Pt=lt?I(Ve,[Kr,hn],[Kr,bn]):[[pr,hn],[pr,bn],[Kr,bn],[Kr,hn]],Pt.xmin=lt?Kr:Math.min(pr,Kr),Pt.xmax=lt?Kr:Math.max(pr,Kr),Pt.ymin=Math.min(hn,bn),Pt.ymax=Math.max(hn,bn),fr.attr("d","M"+Pt.xmin+","+(Gt-we)+"h-4v"+2*we+"h4ZM"+(Pt.xmax-1)+","+(Gt-we)+"h4v"+2*we+"h-4Z")):wn==="v"?(Pt=lt?I(Ve,[hn,vr],[bn,vr]):[[hn,Gt],[hn,vr],[bn,vr],[bn,Gt]],Pt.xmin=Math.min(hn,bn),Pt.xmax=Math.max(hn,bn),Pt.ymin=lt?vr:Math.min(Gt,vr),Pt.ymax=lt?vr:Math.max(Gt,vr),fr.attr("d","M"+(pr-we)+","+Pt.ymin+"v-4h"+2*we+"v4ZM"+(pr-we)+","+(Pt.ymax-1)+"v4h"+2*we+"v-4Z")):wn==="d"&&(Pt=lt?I(Ve,[pr,Gt],[Kr,vr]):[[pr,Gt],[pr,vr],[Kr,vr],[Kr,Gt]],Pt.xmin=Math.min(pr,Kr),Pt.xmax=Math.max(pr,Kr),Pt.ymin=Math.min(Gt,vr),Pt.ymax=Math.max(Gt,vr),fr.attr("d","M0,0Z"))}else ft&&(Ct.addPt([Kr,vr]),Pt=Ct.filtered);if(Me.selectionDefs&&Me.selectionDefs.length?(Lt=Ie(Me.mergedPolygons,Pt,xt),Pt.subtract=xt,Rt=K(Me.selectionDefs.concat([Pt]))):(Lt=[Pt],Rt=X(Pt)),D(Qe(Lt,Ue),$t,Me),Oe){var Dn=Ne(mt,!1),Yn=Dn.eventData?Dn.eventData.points.slice():[];Dn=Ne(mt,!1,Rt,_r,Me),Rt=Dn.selectionTesters,gr=Dn.eventData;var hi;Ct?hi=Ct.filtered:hi=cr(Lt),H.throttle(Ir,q.SELECTDELAY,function(){Vr=it(Rt,_r);for(var mi=Vr.slice(),Zi=0;Zi<Yn.length;Zi++){for(var Bn=Yn[Zi],Ai=!1,vi=0;vi<mi.length;vi++)if(mi[vi].curveNumber===Bn.curveNumber&&mi[vi].pointNumber===Bn.pointNumber){Ai=!0;break}Ai||mi.push(Bn)}mi.length&&(gr||(gr={}),gr.points=mi),Gr(gr,hi),dr(mt,gr)})}},Me.clickFn=function(qr,tn){if(fr.remove(),mt._fullLayout._activeShapeIndex>=0){mt._fullLayout._deactivateShape(mt);return}if(!Ae){var Ur=dt.clickmode;H.done(Ir).then(function(){if(H.clear(Ir),qr===2){for($t.remove(),nr=0;nr<_r.length;nr++)Tr=_r[nr],Tr._module.selectPoints(Tr,!1);if(at(mt,_r),ae(Me),Dr(mt),_r.length){var Sn=_r[0].xaxis,wn=_r[0].yaxis;if(Sn&&wn){for(var hn=[],bn=mt._fullLayout.selections,mn=0;mn<bn.length;mn++){var Dn=bn[mn];!Dn||(Dn.xref!==Sn._id||Dn.yref!==wn._id)&&hn.push(Dn)}hn.length<bn.length&&(mt._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",mt,{selections:hn}))}}}else Ur.indexOf("select")>-1&&Ee(tn,mt,Me.xaxes,Me.yaxes,Me.subplot,Me,$t),Ur==="event"&&zr(mt,void 0);h.click(mt,tn)}).catch(F.error)}},Me.doneFn=function(){fr.remove(),H.done(Ir).then(function(){H.clear(Ir),!At&&Pt&&Me.selectionDefs&&(Pt.subtract=xt,Me.selectionDefs.push(Pt),Me.mergedPolygons.length=0,[].push.apply(Me.mergedPolygons,Lt)),(At||Ae)&&ae(Me,At),Me.doneFnCompleted&&Me.doneFnCompleted(Vr),Oe&&zr(mt,gr)}).catch(F.error)}}function Ee($e,pt,kt,Me,rt,st,ft){var zt=pt._hoverdata,Ue=pt._fullLayout,Ae=Ue.clickmode,Oe=Ae.indexOf("event")>-1,We=[],Ve,lt,mt,dt,At,Bt,ir,tr,vt,pr;if(ye(zt)){te($e,pt,st),Ve=pe(pt,kt,Me,rt);var Gt=_e(zt,Ve),Mr=Gt.pointNumbers.length>0;if(Mr?Je(Ve,Gt):nt(Ve)&&(ir=je(Gt))){for(ft&&ft.remove(),pr=0;pr<Ve.length;pr++)lt=Ve[pr],lt._module.selectPoints(lt,!1);at(pt,Ve),ae(st),Oe&&Dr(pt)}else{tr=$e.shiftKey&&(ir!==void 0?ir:je(Gt)),mt=ke(Gt.pointNumber,Gt.searchInfo,tr);var Rr=st.selectionDefs.concat([mt]);for(dt=K(Rr),pr=0;pr<Ve.length;pr++)if(At=Ve[pr]._module.selectPoints(Ve[pr],dt),Bt=Ke(At,Ve[pr]),We.length)for(var Yr=0;Yr<Bt.length;Yr++)We.push(Bt[Yr]);else We=Bt;if(vt={points:We},at(pt,Ve,vt),mt&&st&&st.selectionDefs.push(mt),ft){var Kr=st.mergedPolygons,vr=x(st.dragmode);D(Qe(Kr,vr),ft,st)}Oe&&zr(pt,vt)}}}function ke($e,pt,kt){return{pointNumber:$e,searchInfo:pt,subtract:!!kt}}function $($e){return"pointNumber"in $e&&"searchInfo"in $e}function le($e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(pt,kt,Me,rt){var st=$e.searchInfo.cd[0].trace._expandedIndex,ft=rt.cd[0].trace._expandedIndex;return ft===st&&Me===$e.pointNumber},isRect:!1,degenerate:!1,subtract:!!$e.subtract}}function K($e){if(!$e.length)return;for(var pt=[],kt=$($e[0])?0:$e[0][0][0],Me=kt,rt=$($e[0])?0:$e[0][0][1],st=rt,ft=0;ft<$e.length;ft++)if($($e[ft]))pt.push(le($e[ft]));else{var zt=X($e[ft]);zt.subtract=!!$e[ft].subtract,pt.push(zt),kt=Math.min(kt,zt.xmin),Me=Math.max(Me,zt.xmax),rt=Math.min(rt,zt.ymin),st=Math.max(st,zt.ymax)}function Ue(Ae,Oe,We,Ve){for(var lt=!1,mt=0;mt<pt.length;mt++)pt[mt].contains(Ae,Oe,We,Ve)&&(lt=!pt[mt].subtract);return lt}return{xmin:kt,xmax:Me,ymin:rt,ymax:st,pts:[],contains:Ue,isRect:!1,degenerate:!1}}function te($e,pt,kt){var Me=pt._fullLayout,rt=kt.plotinfo,st=kt.dragmode,ft=Me._lastSelectedSubplot&&Me._lastSelectedSubplot===rt.id,zt=($e.shiftKey||$e.altKey)&&!(b(st)&&x(st));ft&&zt&&rt.selection&&rt.selection.selectionDefs&&!kt.selectionDefs?(kt.selectionDefs=rt.selection.selectionDefs,kt.mergedPolygons=rt.selection.mergedPolygons):(!zt||!rt.selection)&&ae(kt),ft||(R(pt),Me._lastSelectedSubplot=rt.id)}function ie($e){return $e._fullLayout._activeShapeIndex>=0}function ce($e){return $e._fullLayout._activeSelectionIndex>=0}function ae($e,pt){var kt=$e.dragmode,Me=$e.plotinfo,rt=$e.gd;ie(rt)&&rt._fullLayout._deactivateShape(rt),ce(rt)&&rt._fullLayout._deactivateSelection(rt);var st=rt._fullLayout,ft=st._zoomlayer,zt=b(kt),Ue=E(kt);if(zt||Ue){var Ae=ft.selectAll(".select-outline-"+Me.id);if(Ae&&rt._fullLayout._outlining){var Oe;zt&&(Oe=M(Ae,$e)),Oe&&n.call("_guiRelayout",rt,{shapes:Oe});var We;Ue&&!He($e)&&(We=z(Ae,$e)),We&&(rt._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",rt,{selections:We}).then(function(){pt&&U(rt)})),rt._fullLayout._outlining=!1}}Me.selection={},Me.selection.selectionDefs=$e.selectionDefs=[],Me.selection.mergedPolygons=$e.mergedPolygons=[]}function ve($e){return $e._id}function pe($e,pt,kt,Me){if(!$e.calcdata)return[];var rt=[],st=pt.map(ve),ft=kt.map(ve),zt,Ue,Ae;for(Ae=0;Ae<$e.calcdata.length;Ae++)if(zt=$e.calcdata[Ae],Ue=zt[0].trace,!(Ue.visible!==!0||!Ue._module||!Ue._module.selectPoints))if(He({subplot:Me})&&(Ue.subplot===Me||Ue.geo===Me))rt.push(he(Ue._module,zt,pt[0],kt[0]));else if(Ue.type==="splom"){if(Ue._xaxes[st[0]]&&Ue._yaxes[ft[0]]){var Oe=he(Ue._module,zt,pt[0],kt[0]);Oe.scene=$e._fullLayout._splomScenes[Ue.uid],rt.push(Oe)}}else if(Ue.type==="sankey"){var We=he(Ue._module,zt,pt[0],kt[0]);rt.push(We)}else{if(st.indexOf(Ue.xaxis)===-1||ft.indexOf(Ue.yaxis)===-1)continue;rt.push(he(Ue._module,zt,Y($e,Ue.xaxis),Y($e,Ue.yaxis)))}return rt}function he($e,pt,kt,Me){return{_module:$e,cd:pt,xaxis:kt,yaxis:Me}}function ye($e){return $e&&Array.isArray($e)&&$e[0].hoverOnBox!==!0}function _e($e,pt){var kt=$e[0],Me=-1,rt=[],st,ft;for(ft=0;ft<pt.length;ft++)if(st=pt[ft],kt.fullData._expandedIndex===st.cd[0].trace._expandedIndex){if(kt.hoverOnBox===!0)break;kt.pointNumber!==void 0?Me=kt.pointNumber:kt.binNumber!==void 0&&(Me=kt.binNumber,rt=kt.pointNumbers);break}return{pointNumber:Me,pointNumbers:rt,searchInfo:st}}function je($e){var pt=$e.searchInfo.cd[0].trace,kt=$e.pointNumber,Me=$e.pointNumbers,rt=Me.length>0,st=rt?Me[0]:kt;return pt.selectedpoints?pt.selectedpoints.indexOf(st)>-1:!1}function Je($e,pt){var kt=[],Me,rt,st,ft;for(ft=0;ft<$e.length;ft++)Me=$e[ft],Me.cd[0].trace.selectedpoints&&Me.cd[0].trace.selectedpoints.length>0&&kt.push(Me);if(kt.length===1&&(st=kt[0]===pt.searchInfo,st&&(rt=pt.searchInfo.cd[0].trace,rt.selectedpoints.length===pt.pointNumbers.length))){for(ft=0;ft<pt.pointNumbers.length;ft++)if(rt.selectedpoints.indexOf(pt.pointNumbers[ft])<0)return!1;return!0}return!1}function nt($e){var pt=0,kt,Me,rt;for(rt=0;rt<$e.length;rt++)if(kt=$e[rt],Me=kt.cd[0].trace,Me.selectedpoints&&(Me.selectedpoints.length>1||(pt+=Me.selectedpoints.length,pt>1)))return!1;return pt===1}function at($e,pt,kt){var Me;for(Me=0;Me<pt.length;Me++){var rt=pt[Me].cd[0].trace._fullInput,st=$e._fullLayout._tracePreGUI[rt.uid]||{};st.selectedpoints===void 0&&(st.selectedpoints=rt._input.selectedpoints||null)}var ft;if(kt){var zt=kt.points||[];for(Me=0;Me<pt.length;Me++)ft=pt[Me].cd[0].trace,ft._input.selectedpoints=ft._fullInput.selectedpoints=[],ft._fullInput!==ft&&(ft.selectedpoints=[]);for(var Ue=0;Ue<zt.length;Ue++){var Ae=zt[Ue],Oe=Ae.data,We=Ae.fullData,Ve=Ae.pointIndex,lt=Ae.pointIndices;lt?([].push.apply(Oe.selectedpoints,lt),ft._fullInput!==ft&&[].push.apply(We.selectedpoints,lt)):(Oe.selectedpoints.push(Ve),ft._fullInput!==ft&&We.selectedpoints.push(Ve))}}else for(Me=0;Me<pt.length;Me++)ft=pt[Me].cd[0].trace,delete ft.selectedpoints,delete ft._input.selectedpoints,ft._fullInput!==ft&&delete ft._fullInput.selectedpoints;Fe($e,pt)}function Fe($e,pt){for(var kt=!1,Me=0;Me<pt.length;Me++){var rt=pt[Me],st=rt.cd;n.traceIs(st[0].trace,"regl")&&(kt=!0);var ft=rt._module,zt=ft.styleOnSelect||ft.style;zt&&(zt($e,st,st[0].node3),st[0].nodeRangePlot3&&zt($e,st,st[0].nodeRangePlot3))}kt&&(J($e),ne($e))}function Ie($e,pt,kt){for(var Me=kt?a.difference:a.union,rt=Me({regions:$e},{regions:[pt]}),st=rt.regions.reverse(),ft=0;ft<st.length;ft++){var zt=st[ft];zt.subtract=Vt(zt,st.slice(0,ft))}return st}function Ke($e,pt){if(Array.isArray($e))for(var kt=pt.cd,Me=pt.cd[0].trace,rt=0;rt<$e.length;rt++)$e[rt]=v($e[rt],Me,kt);return $e}function Qe($e,pt){for(var kt=[],Me=0;Me<$e.length;Me++){kt[Me]=[];for(var rt=0;rt<$e[Me].length;rt++){kt[Me][rt]=[],kt[Me][rt][0]=rt?"L":"M";for(var st=0;st<$e[Me][rt].length;st++)kt[Me][rt].push($e[Me][rt][st])}pt||kt[Me].push(["Z",kt[Me][0][1],kt[Me][0][2]])}return kt}function it($e,pt){for(var kt=[],Me,rt,st=0;st<pt.length;st++){var ft=pt[st];rt=ft._module.selectPoints(ft,$e),Me=Ke(rt,ft),kt=kt.concat(Me)}return kt}function Ne($e,pt,kt,Me,rt){var st=!!Me,ft,zt,Ue;rt&&(ft=rt.plotinfo,zt=rt.xaxes[0]._id,Ue=rt.yaxes[0]._id);var Ae=[],Oe=[],We=Mt($e),Ve=$e._fullLayout;if(ft){var lt=Ve._zoomlayer,mt=Ve.dragmode,dt=b(mt),At=E(mt);if(dt||At){var Bt=Y($e,zt,"x"),ir=Y($e,Ue,"y");if(Bt&&ir){var tr=lt.selectAll(".select-outline-"+ft.id);if(tr&&$e._fullLayout._outlining&&tr.length){for(var vt=tr[0][0],pr=vt.getAttribute("d"),Gt=T(pr,$e,ft),Mr=[],Rr=0;Rr<Gt.length;Rr++){for(var Yr=Gt[Rr],Kr=[],vr=0;vr<Yr.length;vr++)Kr.push([Yt(Bt,Yr[vr][1]),Yt(ir,Yr[vr][2])]);Kr.xref=zt,Kr.yref=Ue,Kr.subtract=Vt(Kr,Mr),Mr.push(Kr)}We=We.concat(Mr)}}}}var Xr=zt&&Ue?[zt+Ue]:Ve._subplots.cartesian;ht($e);for(var $r={},Le=0;Le<Xr.length;Le++){var De=Xr[Le],bt=De.indexOf("y"),xt=De.slice(0,bt),Ct=De.slice(bt),Rt=zt&&Ue?kt:void 0;if(Rt=Nt(We,xt,Ct,Rt),Rt){var Lt=Me;if(!st){var Pt=Y($e,xt,"x"),nr=Y($e,Ct,"y");Lt=pe($e,[Pt],[nr],De);for(var Tr=0;Tr<Lt.length;Tr++){var gr=Lt[Tr],$t=gr.cd[0],mr=$t.trace;if(gr._module.name==="scattergl"&&!$t.t.xpx){var Pr=mr.x,wr=mr.y,fr=mr._length;$t.t.xpx=[],$t.t.ypx=[];for(var Ir=0;Ir<fr;Ir++)$t.t.xpx[Ir]=Pt.c2p(Pr[Ir]),$t.t.ypx[Ir]=nr.c2p(wr[Ir])}gr._module.name==="splom"&&($r[mr.uid]||($r[mr.uid]=!0))}}var Vr=it(Rt,Lt);Ae=Ae.concat(Vr),Oe=Oe.concat(Lt)}}var _r={points:Ae};at($e,Oe,_r);var Gr=Ve.clickmode,qr=Gr.indexOf("event")>-1&&pt;if(!ft&&pt){var tn=Mt($e,!0);if(tn.length){var Ur=tn[0].xref,Sn=tn[0].yref;if(Ur&&Sn){var wn=cr(tn),hn=er([Y($e,Ur,"x"),Y($e,Sn,"y")]);hn(_r,wn)}}$e._fullLayout._noEmitSelectedAtStart?$e._fullLayout._noEmitSelectedAtStart=!1:qr&&zr($e,_r),Ve._reselect=!1}if(!ft&&Ve._deselect){var bn=Ve._deselect;zt=bn.xref,Ue=bn.yref,Tt(zt,Ue,Oe)||Xt($e,zt,Ue,Me),qr&&(_r.points.length?zr($e,_r):Dr($e)),Ve._deselect=!1}return{eventData:_r,selectionTesters:kt}}function ht($e){var pt=$e.calcdata;if(!!pt)for(var kt=0;kt<pt.length;kt++){var Me=pt[kt][0],rt=Me.trace,st=$e._fullLayout._splomScenes;if(st){var ft=st[rt.uid];ft&&(ft.selectBatch=[])}}}function Tt($e,pt,kt){for(var Me=0;Me<kt.length;Me++){var rt=kt[Me];if(rt.xaxis&&rt.xaxis._id===$e&&rt.yaxis&&rt.yaxis._id===pt)return!0}return!1}function Xt($e,pt,kt,Me){Me=pe($e,[Y($e,pt,"x")],[Y($e,kt,"y")],pt+kt);for(var rt=0;rt<Me.length;rt++){var st=Me[rt];st._module.selectPoints(st,!1)}at($e,Me)}function Nt($e,pt,kt,Me){for(var rt,st=0;st<$e.length;st++){var ft=$e[st];if(!(pt!==ft.xref||kt!==ft.yref))if(rt){var zt=!!ft.subtract;rt=Ie(rt,ft,zt),Me=K(rt)}else rt=[ft],Me=X(ft)}return Me}function Mt($e,pt){for(var kt=[],Me=$e._fullLayout,rt=Me.selections,st=rt.length,ft=0;ft<st;ft++)if(!(pt&&ft!==Me._activeSelectionIndex)){var zt=rt[ft];if(!!zt){var Ue=zt.xref,Ae=zt.yref,Oe=Y($e,Ue,"x"),We=Y($e,Ae,"y"),Ve,lt,mt,dt,At;if(zt.type==="rect"){At=[];var Bt=Yt(Oe,zt.x0),ir=Yt(Oe,zt.x1),tr=Yt(We,zt.y0),vt=Yt(We,zt.y1);At=[[Bt,tr],[Bt,vt],[ir,vt],[ir,tr]],Ve=Math.min(Bt,ir),lt=Math.max(Bt,ir),mt=Math.min(tr,vt),dt=Math.max(tr,vt),At.xmin=Ve,At.xmax=lt,At.ymin=mt,At.ymax=dt,At.xref=Ue,At.yref=Ae,At.subtract=!1,At.isRect=!0,kt.push(At)}else if(zt.type==="path")for(var pr=zt.path.split("Z"),Gt=[],Mr=0;Mr<pr.length;Mr++){var Rr=pr[Mr];if(!!Rr){Rr+="Z";var Yr=A.extractPathCoords(Rr,P.paramIsX,"raw"),Kr=A.extractPathCoords(Rr,P.paramIsY,"raw");Ve=1/0,lt=-1/0,mt=1/0,dt=-1/0,At=[];for(var vr=0;vr<Yr.length;vr++){var Xr=Yt(Oe,Yr[vr]),$r=Yt(We,Kr[vr]);At.push([Xr,$r]),Ve=Math.min(Xr,Ve),lt=Math.max(Xr,lt),mt=Math.min($r,mt),dt=Math.max($r,dt)}At.xmin=Ve,At.xmax=lt,At.ymin=mt,At.ymax=dt,At.xref=Ue,At.yref=Ae,At.subtract=Vt(At,Gt),Gt.push(At),kt.push(At)}}}}return kt}function Vt($e,pt){for(var kt=!1,Me=0;Me<pt.length;Me++)for(var rt=pt[Me],st=0;st<$e.length;st++)if(s($e[st],rt)){kt=!kt;break}return kt}function Yt($e,pt){return $e.type==="date"&&(pt=pt.replace("_"," ")),$e.type==="log"?$e.c2p(pt):$e.r2p(pt,null,$e.calendar)}function cr($e){for(var pt=$e.length,kt=[],Me=0;Me<pt;Me++){var rt=$e[Me];kt=kt.concat(rt),kt=kt.concat([rt[0]])}return Nr(kt)}function Nr($e){return $e.isRect=$e.length===5&&$e[0][0]===$e[4][0]&&$e[0][1]===$e[4][1]&&$e[0][0]===$e[1][0]&&$e[2][0]===$e[3][0]&&$e[0][1]===$e[3][1]&&$e[1][1]===$e[2][1]||$e[0][1]===$e[1][1]&&$e[2][1]===$e[3][1]&&$e[0][0]===$e[3][0]&&$e[1][0]===$e[2][0],$e.isRect&&($e.xmin=Math.min($e[0][0],$e[2][0]),$e.xmax=Math.max($e[0][0],$e[2][0]),$e.ymin=Math.min($e[0][1],$e[2][1]),$e.ymax=Math.max($e[0][1],$e[2][1])),$e}function er($e){return function(pt,kt){for(var Me,rt,st=0;st<$e.length;st++){var ft=$e[st],zt=ft._id,Ue=zt.charAt(0);if(kt.isRect){Me||(Me={});var Ae=kt[Ue+"min"],Oe=kt[Ue+"max"];Ae!==void 0&&Oe!==void 0&&(Me[zt]=[de(ft,Ae),de(ft,Oe)].sort(V))}else rt||(rt={}),rt[zt]=kt.map(me(ft))}Me&&(pt.range=Me),rt&&(pt.lassoPoints=rt)}}function Wt($e){var pt=$e.plotinfo;return pt.fillRangeItems||er($e.xaxes.concat($e.yaxes))}function dr($e,pt){$e.emit("plotly_selecting",pt)}function zr($e,pt){pt&&(pt.selections=($e.layout||{}).selections||[]),$e.emit("plotly_selected",pt)}function Dr($e){$e.emit("plotly_deselect",null)}i.exports={reselect:Ne,prepSelect:Re,clearOutline:R,clearSelectionsCache:ae,selectOnClick:Ee}},{"../../lib":244,"../../lib/clear_gl_canvases":232,"../../lib/polygon":256,"../../lib/throttle":268,"../../plot_api/subroutines":281,"../../plots/cartesian/axis_ids":295,"../../registry":327,"../color":103,"../dragelement/helpers":121,"../drawing":125,"../fx":143,"../fx/helpers":139,"../shapes/constants":195,"../shapes/display_outlines":197,"../shapes/draw_newshape/helpers":202,"../shapes/draw_newshape/newshapes":203,"../shapes/handle_outline":204,"../shapes/helpers":205,"./constants":184,"./draw":186,"./draw_newselection/newselections":189,"./helpers":190,"point-in-polygon/nested":57,polybooljs:58}],193:[function(e,i,o){var a=e("../annotations/attributes"),s=e("../../traces/scatter/attributes").line,n=e("../drawing/attributes").dash,l=e("../../lib/extend").extendFlat,u=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),i.exports=u("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:l({},a.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:l({},a.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:l({},s.color,{editType:"arraydraw"}),width:l({},s.width,{editType:"calc+arraydraw"}),dash:l({},n,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":220,"../../lib/extend":238,"../../plot_api/plot_template":280,"../../traces/scatter/attributes":367,"../annotations/attributes":86,"../drawing/attributes":124}],194:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes"),n=e("./constants"),l=e("./helpers");i.exports=function(_){var b=_._fullLayout,x=a.filterVisible(b.shapes);if(!(!x.length||!_._fullData.length))for(var E=0;E<x.length;E++){var A=x[E];A._extremes={};var P,D,R=s.getRefType(A.xref),S=s.getRefType(A.yref);if(A.xref!=="paper"&&R!=="domain"){var I=A.xsizemode==="pixel"?A.xanchor:A.x0,T=A.xsizemode==="pixel"?A.xanchor:A.x1;P=s.getFromId(_,A.xref),D=d(P,I,T,A.path,n.paramIsX),D&&(A._extremes[P._id]=s.findExtremes(P,D,u(A)))}if(A.yref!=="paper"&&S!=="domain"){var M=A.ysizemode==="pixel"?A.yanchor:A.y0,z=A.ysizemode==="pixel"?A.yanchor:A.y1;P=s.getFromId(_,A.yref),D=d(P,M,z,A.path,n.paramIsY),D&&(A._extremes[P._id]=s.findExtremes(P,D,h(A)))}}};function u(p){return v(p.line.width,p.xsizemode,p.x0,p.x1,p.path,!1)}function h(p){return v(p.line.width,p.ysizemode,p.y0,p.y1,p.path,!0)}function v(p,_,b,x,E,A){var P=p/2,D=A;if(_==="pixel"){var R=E?l.extractPathCoords(E,A?n.paramIsY:n.paramIsX):[b,x],S=a.aggNums(Math.max,null,R),I=a.aggNums(Math.min,null,R),T=I<0?Math.abs(I)+P:P,M=S>0?S+P:P;return{ppad:P,ppadplus:D?T:M,ppadminus:D?M:T}}else return{ppad:P}}function d(p,_,b,x,E){var A=p.type==="category"||p.type==="multicategory"?p.r2c:p.d2c;if(_!==void 0)return[A(_),A(b)];if(!!x){var P=1/0,D=-1/0,R=x.match(n.segmentRE),S,I,T,M,z;for(p.type==="date"&&(A=l.decodeDate(A)),S=0;S<R.length;S++)I=R[S],T=E[I.charAt(0)].drawn,T!==void 0&&(M=R[S].substr(1).match(n.paramRE),!(!M||M.length<T)&&(z=A(M[T]),z<P&&(P=z),z>D&&(D=z)));if(D>=P)return[P,D]}}},{"../../lib":244,"../../plots/cartesian/axes":291,"./constants":195,"./helpers":205}],195:[function(e,i,o){i.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],196:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/cartesian/axes"),n=e("../../plots/array_container_defaults"),l=e("./attributes"),u=e("./helpers");i.exports=function(d,p){n(d,p,{name:"shapes",handleItemDefaults:h})};function h(v,d,p){function _(me,xe){return a.coerce(v,d,l,me,xe)}var b=_("visible");if(!!b){var x=_("path"),E=x?"path":"rect",A=_("type",E),P=A!=="path";P&&delete d.path,_("editable"),_("layer"),_("opacity"),_("fillcolor"),_("fillrule");var D=_("line.width");D&&(_("line.color"),_("line.dash"));for(var R=_("xsizemode"),S=_("ysizemode"),I=["x","y"],T=0;T<2;T++){var M=I[T],z=M+"anchor",U=M==="x"?R:S,F={_fullLayout:p},V,j,H,Y=s.coerceRef(v,d,F,M,void 0,"paper"),J=s.getRefType(Y);if(J==="range"?(V=s.getFromId(F,Y),V._shapeIndices.push(d._index),H=u.rangeToShapePosition(V),j=u.shapePositionToRange(V)):j=H=a.identity,P){var ne=.25,q=.75,we=M+"0",ee=M+"1",X=v[we],re=v[ee];v[we]=j(v[we],!0),v[ee]=j(v[ee],!0),U==="pixel"?(_(we,0),_(ee,10)):(s.coercePosition(d,F,_,Y,we,ne),s.coercePosition(d,F,_,Y,ee,q)),d[we]=H(d[we]),d[ee]=H(d[ee]),v[we]=X,v[ee]=re}if(U==="pixel"){var de=v[z];v[z]=j(v[z],!0),s.coercePosition(d,F,_,Y,z,.25),d[z]=H(d[z]),v[z]=de}}P&&a.noneOrAll(v,d,["x0","x1","y0","y1"])}}},{"../../lib":244,"../../plots/array_container_defaults":286,"../../plots/cartesian/axes":291,"./attributes":193,"./helpers":205}],197:[function(e,i,o){var a=e("../../lib"),s=a.strTranslate,n=e("../dragelement"),l=e("../dragelement/helpers"),u=l.drawMode,h=l.selectMode,v=e("../../registry"),d=e("../color"),p=e("./draw_newshape/constants"),_=p.i000,b=p.i090,x=p.i180,E=p.i270,A=e("./handle_outline"),P=A.clearOutlineControllers,D=e("./draw_newshape/helpers"),R=D.pointsOnRectangle,S=D.pointsOnEllipse,I=D.writePaths,T=e("./draw_newshape/newshapes"),M=e("../selections/draw_newselection/newselections");i.exports=function V(j,H,Y,J){J||(J=0);var ne=Y.gd;function q(){V(j,H,Y,J++),S(j[0])&&we({redrawing:!0})}function we(Je){var nt={};Y.isActiveShape!==void 0&&(Y.isActiveShape=!1,nt=T(H,Y)),Y.isActiveSelection!==void 0&&(Y.isActiveSelection=!1,nt=M(H,Y),ne._fullLayout._reselect=!0),Object.keys(nt).length&&v.call((Je||{}).redrawing?"relayout":"_guiRelayout",ne,nt)}var ee=ne._fullLayout,X=ee._zoomlayer,re=Y.dragmode,de=u(re),me=h(re);(de||me)&&(ne._fullLayout._outlining=!0),P(ne),H.attr("d",I(j));var xe,He,Re,Ee,ke;if(!J&&(Y.isActiveShape||Y.isActiveSelection)){ke=z([],j);var $=X.append("g").attr("class","outline-controllers");ae($),je()}function le(Je){Re=+Je.srcElement.getAttribute("data-i"),Ee=+Je.srcElement.getAttribute("data-j"),xe[Re][Ee].moveFn=K}function K(Je,nt){if(!!j.length){var at=ke[Re][Ee][1],Fe=ke[Re][Ee][2],Ie=j[Re],Ke=Ie.length;if(R(Ie)){var Qe=Je,it=nt;if(Y.isActiveSelection){var Ne=U(Ie,Ee);Ne[1]===Ie[Ee][1]?it=0:Qe=0}for(var ht=0;ht<Ke;ht++)if(ht!==Ee){var Tt=Ie[ht];Tt[1]===Ie[Ee][1]&&(Tt[1]=at+Qe),Tt[2]===Ie[Ee][2]&&(Tt[2]=Fe+it)}if(Ie[Ee][1]=at+Qe,Ie[Ee][2]=Fe+it,!R(Ie))for(var Xt=0;Xt<Ke;Xt++)for(var Nt=0;Nt<Ie[Xt].length;Nt++)Ie[Xt][Nt]=ke[Re][Xt][Nt]}else Ie[Ee][1]=at+Je,Ie[Ee][2]=Fe+nt;q()}}function te(){we()}function ie(){if(!!j.length&&!!j[Re]&&!!j[Re].length){for(var Je=[],nt=0;nt<j[Re].length;nt++)nt!==Ee&&Je.push(j[Re][nt]);Je.length>1&&!(Je.length===2&&Je[1][0]==="Z")&&(Ee===0&&(Je[0][0]="M"),j[Re]=Je,q(),we())}}function ce(Je,nt){if(Je===2){Re=+nt.srcElement.getAttribute("data-i"),Ee=+nt.srcElement.getAttribute("data-j");var at=j[Re];!R(at)&&!S(at)&&ie()}}function ae(Je){xe=[];for(var nt=0;nt<j.length;nt++){var at=j[nt],Fe=R(at),Ie=!Fe&&S(at);xe[nt]=[];for(var Ke=at.length,Qe=0;Qe<Ke;Qe++)if(at[Qe][0]!=="Z"&&!(Ie&&Qe!==_&&Qe!==b&&Qe!==x&&Qe!==E)){var it=Fe&&Y.isActiveSelection,Ne;it&&(Ne=U(at,Qe));var ht=at[Qe][1],Tt=at[Qe][2],Xt=Je.append(it?"rect":"circle").attr("data-i",nt).attr("data-j",Qe).style({fill:d.background,stroke:d.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(it){var Nt=Ne[1]-ht,Mt=Ne[2]-Tt,Vt=Mt?5:Math.max(Math.min(25,Math.abs(Nt)-5),5),Yt=Nt?5:Math.max(Math.min(25,Math.abs(Mt)-5),5);Xt.classed(Mt?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Vt).attr("height",Yt).attr("x",ht-Vt/2).attr("y",Tt-Yt/2).attr("transform",s(Nt/2,Mt/2))}else Xt.classed("cursor-grab",!0).attr("r",5).attr("cx",ht).attr("cy",Tt);xe[nt][Qe]={element:Xt.node(),gd:ne,prepFn:le,doneFn:te,clickFn:ce},n.init(xe[nt][Qe])}}}function ve(Je,nt){if(!!j.length)for(var at=0;at<j.length;at++)for(var Fe=0;Fe<j[at].length;Fe++)for(var Ie=0;Ie+2<j[at][Fe].length;Ie+=2)j[at][Fe][Ie+1]=ke[at][Fe][Ie+1]+Je,j[at][Fe][Ie+2]=ke[at][Fe][Ie+2]+nt}function pe(Je,nt){ve(Je,nt),q()}function he(Je){Re=+Je.srcElement.getAttribute("data-i"),Re||(Re=0),He[Re].moveFn=pe}function ye(){we()}function _e(Je){Je===2&&F(ne)}function je(){if(He=[],!!j.length){var Je=0;He[Je]={element:H[0][0],gd:ne,prepFn:he,doneFn:ye,clickFn:_e},n.init(He[Je])}}};function z(V,j){for(var H=0;H<j.length;H++){var Y=j[H];V[H]=[];for(var J=0;J<Y.length;J++){V[H][J]=[];for(var ne=0;ne<Y[J].length;ne++)V[H][J][ne]=Y[J][ne]}}return V}function U(V,j){var H=V[j][1],Y=V[j][2],J=V.length,ne,q,we;return ne=(j+1)%J,q=V[ne][1],we=V[ne][2],q===H&&we===Y&&(ne=(j+2)%J,q=V[ne][1],we=V[ne][2]),[ne,q,we]}function F(V){if(!!h(V._fullLayout.dragmode)){P(V);var j=V._fullLayout._activeSelectionIndex,H=(V.layout||{}).selections||[];if(j<H.length){for(var Y=[],J=0;J<H.length;J++)J!==j&&Y.push(H[J]);delete V._fullLayout._activeSelectionIndex;var ne=V._fullLayout.selections[j];V._fullLayout._deselect={xref:ne.xref,yref:ne.yref},v.call("_guiRelayout",V,{selections:Y})}}}},{"../../lib":244,"../../registry":327,"../color":103,"../dragelement":122,"../dragelement/helpers":121,"../selections/draw_newselection/newselections":189,"./draw_newshape/constants":200,"./draw_newshape/helpers":202,"./draw_newshape/newshapes":203,"./handle_outline":204}],198:[function(e,i,o){var a=e("../../registry"),s=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("./draw_newshape/helpers").readPaths,u=e("./display_outlines"),h=e("./handle_outline").clearOutlineControllers,v=e("../color"),d=e("../drawing"),p=e("../../plot_api/plot_template").arrayEditor,_=e("../dragelement"),b=e("../../lib/setcursor"),x=e("./constants"),E=e("./helpers"),A=E.getPathString;i.exports={draw:P,drawOne:S,eraseActiveShape:F};function P(V){var j=V._fullLayout;j._shapeUpperLayer.selectAll("path").remove(),j._shapeLowerLayer.selectAll("path").remove();for(var H in j._plots){var Y=j._plots[H].shapelayer;Y&&Y.selectAll("path").remove()}for(var J=0;J<j.shapes.length;J++)j.shapes[J].visible&&S(V,J)}function D(V){return!!V._fullLayout._outlining}function R(V){return!V._context.edits.shapePosition}function S(V,j){V._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+j+'"]').remove();var H=E.makeShapesOptionsAndPlotinfo(V,j),Y=H.options,J=H.plotinfo;if(!Y._input||Y.visible===!1)return;if(Y.layer!=="below")q(V._fullLayout._shapeUpperLayer);else if(Y.xref==="paper"||Y.yref==="paper")q(V._fullLayout._shapeLowerLayer);else if(J._hadPlotinfo){var ne=J.mainplotinfo||J;q(ne.shapelayer)}else q(V._fullLayout._shapeLowerLayer);function q(we){var ee=A(V,Y),X={"data-index":j,"fill-rule":Y.fillrule,d:ee},re=Y.opacity,de=Y.fillcolor,me=Y.line.width?Y.line.color:"rgba(0,0,0,0)",xe=Y.line.width,He=Y.line.dash;!xe&&Y.editable===!0&&(xe=5,He="solid");var Re=ee[ee.length-1]!=="Z",Ee=R(V)&&Y.editable&&V._fullLayout._activeShapeIndex===j;Ee&&(de=Re?"rgba(0,0,0,0)":V._fullLayout.activeshape.fillcolor,re=V._fullLayout.activeshape.opacity);var ke=we.append("path").attr(X).style("opacity",re).call(v.stroke,me).call(v.fill,de).call(d.dashLine,He,xe);I(ke,V,Y);var $;if((Ee||V._context.edits.shapePosition)&&($=p(V.layout,"shapes",Y)),Ee){ke.style({cursor:"move"});var le={element:ke.node(),plotinfo:J,gd:V,editHelpers:$,isActiveShape:!0},K=l(ee,V);u(K,ke,le)}else V._context.edits.shapePosition?T(V,ke,Y,j,we,$):Y.editable===!0&&ke.style("pointer-events",Re||v.opacity(de)*re<=.5?"stroke":"all");ke.node().addEventListener("click",function(){return z(V,ke)})}}function I(V,j,H){var Y=(H.xref+H.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");d.setClipUrl(V,Y?"clip"+j._fullLayout._uid+Y:null,j)}function T(V,j,H,Y,J,ne){var q=10,we=10,ee=H.xsizemode==="pixel",X=H.ysizemode==="pixel",re=H.type==="line",de=H.type==="path",me=ne.modifyItem,xe,He,Re,Ee,ke,$,le,K,te,ie,ce,ae,ve,pe,he,ye=n.getFromId(V,H.xref),_e=n.getRefType(H.xref),je=n.getFromId(V,H.yref),Je=n.getRefType(H.yref),nt=E.getDataToPixel(V,ye,!1,_e),at=E.getDataToPixel(V,je,!0,Je),Fe=E.getPixelToData(V,ye,!1,_e),Ie=E.getPixelToData(V,je,!0,Je),Ke=Ne(),Qe={element:Ke.node(),gd:V,prepFn:Xt,doneFn:Nt,clickFn:Mt},it;_.init(Qe),Ke.node().onmousemove=Tt;function Ne(){return re?ht():j}function ht(){var Wt=10,dr=Math.max(H.line.width,Wt),zr=J.append("g").attr("data-index",Y);zr.append("path").attr("d",j.attr("d")).style({cursor:"move","stroke-width":dr,"stroke-opacity":"0"});var Dr={"fill-opacity":"0"},$e=Math.max(dr/2,Wt);return zr.append("circle").attr({"data-line-point":"start-point",cx:ee?nt(H.xanchor)+H.x0:nt(H.x0),cy:X?at(H.yanchor)-H.y0:at(H.y0),r:$e}).style(Dr).classed("cursor-grab",!0),zr.append("circle").attr({"data-line-point":"end-point",cx:ee?nt(H.xanchor)+H.x1:nt(H.x1),cy:X?at(H.yanchor)-H.y1:at(H.y1),r:$e}).style(Dr).classed("cursor-grab",!0),zr}function Tt(Wt){if(D(V)){it=null;return}if(re)Wt.target.tagName==="path"?it="move":it=Wt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var dr=Qe.element.getBoundingClientRect(),zr=dr.right-dr.left,Dr=dr.bottom-dr.top,$e=Wt.clientX-dr.left,pt=Wt.clientY-dr.top,kt=!de&&zr>q&&Dr>we&&!Wt.shiftKey?_.getCursor($e/zr,1-pt/Dr):"move";b(j,kt),it=kt.split("-")[0]}}function Xt(Wt){D(V)||(ee&&(ke=nt(H.xanchor)),X&&($=at(H.yanchor)),H.type==="path"?he=H.path:(xe=ee?H.x0:nt(H.x0),He=X?H.y0:at(H.y0),Re=ee?H.x1:nt(H.x1),Ee=X?H.y1:at(H.y1)),xe<Re?(te=xe,ve="x0",ie=Re,pe="x1"):(te=Re,ve="x1",ie=xe,pe="x0"),!X&&He<Ee||X&&He>Ee?(le=He,ce="y0",K=Ee,ae="y1"):(le=Ee,ce="y1",K=He,ae="y0"),Tt(Wt),cr(J,H),er(j,H,V),Qe.moveFn=it==="move"?Vt:Yt,Qe.altKey=Wt.altKey)}function Nt(){D(V)||(b(j),Nr(J),I(j,V,H),a.call("_guiRelayout",V,ne.getUpdateObj()))}function Mt(){D(V)||Nr(J)}function Vt(Wt,dr){if(H.type==="path"){var zr=function(pt){return pt},Dr=zr,$e=zr;ee?me("xanchor",H.xanchor=Fe(ke+Wt)):(Dr=function(kt){return Fe(nt(kt)+Wt)},ye&&ye.type==="date"&&(Dr=E.encodeDate(Dr))),X?me("yanchor",H.yanchor=Ie($+dr)):($e=function(kt){return Ie(at(kt)+dr)},je&&je.type==="date"&&($e=E.encodeDate($e))),me("path",H.path=M(he,Dr,$e))}else ee?me("xanchor",H.xanchor=Fe(ke+Wt)):(me("x0",H.x0=Fe(xe+Wt)),me("x1",H.x1=Fe(Re+Wt))),X?me("yanchor",H.yanchor=Ie($+dr)):(me("y0",H.y0=Ie(He+dr)),me("y1",H.y1=Ie(Ee+dr)));j.attr("d",A(V,H)),cr(J,H)}function Yt(Wt,dr){if(de){var zr=function(mt){return mt},Dr=zr,$e=zr;ee?me("xanchor",H.xanchor=Fe(ke+Wt)):(Dr=function(dt){return Fe(nt(dt)+Wt)},ye&&ye.type==="date"&&(Dr=E.encodeDate(Dr))),X?me("yanchor",H.yanchor=Ie($+dr)):($e=function(dt){return Ie(at(dt)+dr)},je&&je.type==="date"&&($e=E.encodeDate($e))),me("path",H.path=M(he,Dr,$e))}else if(re){if(it==="resize-over-start-point"){var pt=xe+Wt,kt=X?He-dr:He+dr;me("x0",H.x0=ee?pt:Fe(pt)),me("y0",H.y0=X?kt:Ie(kt))}else if(it==="resize-over-end-point"){var Me=Re+Wt,rt=X?Ee-dr:Ee+dr;me("x1",H.x1=ee?Me:Fe(Me)),me("y1",H.y1=X?rt:Ie(rt))}}else{var st=function(mt){return it.indexOf(mt)!==-1},ft=st("n"),zt=st("s"),Ue=st("w"),Ae=st("e"),Oe=ft?le+dr:le,We=zt?K+dr:K,Ve=Ue?te+Wt:te,lt=Ae?ie+Wt:ie;X&&(ft&&(Oe=le-dr),zt&&(We=K-dr)),(!X&&We-Oe>we||X&&Oe-We>we)&&(me(ce,H[ce]=X?Oe:Ie(Oe)),me(ae,H[ae]=X?We:Ie(We))),lt-Ve>q&&(me(ve,H[ve]=ee?Ve:Fe(Ve)),me(pe,H[pe]=ee?lt:Fe(lt)))}j.attr("d",A(V,H)),cr(J,H)}function cr(Wt,dr){(ee||X)&&zr();function zr(){var Dr=dr.type!=="path",$e=Wt.selectAll(".visual-cue").data([0]),pt=1;$e.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":pt}).classed("visual-cue",!0);var kt=nt(ee?dr.xanchor:s.midRange(Dr?[dr.x0,dr.x1]:E.extractPathCoords(dr.path,x.paramIsX))),Me=at(X?dr.yanchor:s.midRange(Dr?[dr.y0,dr.y1]:E.extractPathCoords(dr.path,x.paramIsY)));if(kt=E.roundPositionForSharpStrokeRendering(kt,pt),Me=E.roundPositionForSharpStrokeRendering(Me,pt),ee&&X){var rt="M"+(kt-1-pt)+","+(Me-1-pt)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";$e.attr("d",rt)}else if(ee){var st="M"+(kt-1-pt)+","+(Me-9-pt)+"v18 h2 v-18 Z";$e.attr("d",st)}else{var ft="M"+(kt-9-pt)+","+(Me-1-pt)+"h18 v2 h-18 Z";$e.attr("d",ft)}}}function Nr(Wt){Wt.selectAll(".visual-cue").remove()}function er(Wt,dr,zr){var Dr=dr.xref,$e=dr.yref,pt=n.getFromId(zr,Dr),kt=n.getFromId(zr,$e),Me="";Dr!=="paper"&&!pt.autorange&&(Me+=Dr),$e!=="paper"&&!kt.autorange&&(Me+=$e),d.setClipUrl(Wt,Me?"clip"+zr._fullLayout._uid+Me:null,zr)}}function M(V,j,H){return V.replace(x.segmentRE,function(Y){var J=0,ne=Y.charAt(0),q=x.paramIsX[ne],we=x.paramIsY[ne],ee=x.numParams[ne],X=Y.substr(1).replace(x.paramRE,function(re){return J>=ee||(q[J]?re=j(re):we[J]&&(re=H(re)),J++),re});return ne+X})}function z(V,j){if(!!R(V)){var H=j.node(),Y=+H.getAttribute("data-index");if(Y>=0){if(Y===V._fullLayout._activeShapeIndex){U(V);return}V._fullLayout._activeShapeIndex=Y,V._fullLayout._deactivateShape=U,P(V)}}}function U(V){if(!!R(V)){var j=V._fullLayout._activeShapeIndex;j>=0&&(h(V),delete V._fullLayout._activeShapeIndex,P(V))}}function F(V){if(!!R(V)){h(V);var j=V._fullLayout._activeShapeIndex,H=(V.layout||{}).shapes||[];if(j<H.length){for(var Y=[],J=0;J<H.length;J++)J!==j&&Y.push(H[J]);delete V._fullLayout._activeShapeIndex,a.call("_guiRelayout",V,{shapes:Y})}}}},{"../../lib":244,"../../lib/setcursor":264,"../../plot_api/plot_template":280,"../../plots/cartesian/axes":291,"../../registry":327,"../color":103,"../dragelement":122,"../drawing":125,"./constants":195,"./display_outlines":197,"./draw_newshape/helpers":202,"./handle_outline":204,"./helpers":205}],199:[function(e,i,o){var a=e("../../drawing/attributes").dash,s=e("../../../lib/extend").extendFlat;i.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:s({},a,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":238,"../../drawing/attributes":124}],200:[function(e,i,o){var a=32;i.exports={CIRCLE_SIDES:a,i000:0,i090:a/4,i180:a/2,i270:a/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],201:[function(e,i,o){var a=e("../../color");i.exports=function(n,l,u){u("newshape.drawdirection"),u("newshape.layer"),u("newshape.fillcolor"),u("newshape.fillrule"),u("newshape.opacity");var h=u("newshape.line.width");if(h){var v=(n||{}).plot_bgcolor||"#FFF";u("newshape.line.color",a.contrast(v)),u("newshape.line.dash")}u("activeshape.fillcolor"),u("activeshape.opacity")}},{"../../color":103}],202:[function(e,i,o){var a=e("parse-svg-path"),s=e("./constants"),n=s.CIRCLE_SIDES,l=s.SQRT2,u=e("../../selections/helpers"),h=u.p2r,v=u.r2p,d=[0,3,4,5,6,1,2],p=[0,3,4,1,2];o.writePaths=function(x){var E=x.length;if(!E)return"M0,0Z";for(var A="",P=0;P<E;P++)for(var D=x[P].length,R=0;R<D;R++){var S=x[P][R][0];if(S==="Z")A+="Z";else for(var I=x[P][R].length,T=0;T<I;T++){var M=T;S==="Q"||S==="S"?M=p[T]:S==="C"&&(M=d[T]),A+=x[P][R][M],T>0&&T<I-1&&(A+=",")}}return A},o.readPaths=function(x,E,A,P){var D=a(x),R=[],S=-1,I=function(){S++,R[S]=[]},T,M=0,z=0,U,F,V=function(){U=M,F=z};V();for(var j=0;j<D.length;j++){var H=[],Y,J,ne,q,we=D[j][0],ee=we;switch(we){case"M":I(),M=+D[j][1],z=+D[j][2],H.push([ee,M,z]),V();break;case"Q":case"S":Y=+D[j][1],ne=+D[j][2],M=+D[j][3],z=+D[j][4],H.push([ee,M,z,Y,ne]);break;case"C":Y=+D[j][1],ne=+D[j][2],J=+D[j][3],q=+D[j][4],M=+D[j][5],z=+D[j][6],H.push([ee,M,z,Y,ne,J,q]);break;case"T":case"L":M=+D[j][1],z=+D[j][2],H.push([ee,M,z]);break;case"H":ee="L",M=+D[j][1],H.push([ee,M,z]);break;case"V":ee="L",z=+D[j][1],H.push([ee,M,z]);break;case"A":ee="L";var X=+D[j][1],re=+D[j][2];+D[j][4]||(X=-X,re=-re);var de=M-X,me=z;for(T=1;T<=n/2;T++){var xe=2*Math.PI*T/n;H.push([ee,de+X*Math.cos(xe),me+re*Math.sin(xe)])}break;case"Z":(M!==U||z!==F)&&(M=U,z=F,H.push([ee,M,z]));break}for(var He=(A||{}).domain,Re=E._fullLayout._size,Ee=A&&A.xsizemode==="pixel",ke=A&&A.ysizemode==="pixel",$=P===!1,le=0;le<H.length;le++){for(T=0;T+2<7;T+=2){var K=H[le][T+1],te=H[le][T+2];K===void 0||te===void 0||(M=K,z=te,A&&(A.xaxis&&A.xaxis.p2r?($&&(K-=A.xaxis._offset),Ee?K=v(A.xaxis,A.xanchor)+K:K=h(A.xaxis,K)):($&&(K-=Re.l),He?K=He.x[0]+K/Re.w:K=K/Re.w),A.yaxis&&A.yaxis.p2r?($&&(te-=A.yaxis._offset),ke?te=v(A.yaxis,A.yanchor)-te:te=h(A.yaxis,te)):($&&(te-=Re.t),He?te=He.y[1]-te/Re.h:te=1-te/Re.h)),H[le][T+1]=K,H[le][T+2]=te)}R[S].push(H[le].slice())}}return R};function _(x,E){return Math.abs(x-E)<=1e-6}function b(x,E){var A=E[1]-x[1],P=E[2]-x[2];return Math.sqrt(A*A+P*P)}o.pointsOnRectangle=function(x){var E=x.length;if(E!==5)return!1;for(var A=1;A<3;A++){var P=x[0][A]-x[1][A],D=x[3][A]-x[2][A];if(!_(P,D))return!1;var R=x[0][A]-x[3][A],S=x[1][A]-x[2][A];if(!_(R,S))return!1}return!_(x[0][1],x[1][1])&&!_(x[0][1],x[3][1])?!1:!!(b(x[0],x[1])*b(x[0],x[3]))},o.pointsOnEllipse=function(x){var E=x.length;if(E!==n+1)return!1;E=n;for(var A=0;A<E;A++){var P=(E*2-A)%E,D=(E/2+P)%E,R=(E/2+A)%E;if(!_(b(x[A],x[R]),b(x[P],x[D])))return!1}return!0},o.handleEllipse=function(x,E,A){if(!x)return[E,A];var P=o.ellipseOver({x0:E[0],y0:E[1],x1:A[0],y1:A[1]}),D=(P.x1+P.x0)/2,R=(P.y1+P.y0)/2,S=(P.x1-P.x0)/2,I=(P.y1-P.y0)/2;S||(S=I=I/l),I||(I=S=S/l);for(var T=[],M=0;M<n;M++){var z=M*2*Math.PI/n;T.push([D+S*Math.cos(z),R+I*Math.sin(z)])}return T},o.ellipseOver=function(x){var E=x.x0,A=x.y0,P=x.x1,D=x.y1,R=P-E,S=D-A;E-=R,A-=S;var I=(E+P)/2,T=(A+D)/2,M=l;return R*=M,S*=M,{x0:I-R,y0:T-S,x1:I+R,y1:T+S}},o.fixDatesForPaths=function(x,E,A){var P=E.type==="date",D=A.type==="date";if(!P&&!D)return x;for(var R=0;R<x.length;R++)for(var S=0;S<x[R].length;S++)for(var I=0;I+2<x[R][S].length;I+=2)P&&(x[R][S][I+1]=x[R][S][I+1].replace(" ","_")),D&&(x[R][S][I+2]=x[R][S][I+2].replace(" ","_"));return x}},{"../../selections/helpers":190,"./constants":200,"parse-svg-path":56}],203:[function(e,i,o){var a=e("../../dragelement/helpers"),s=a.drawMode,n=a.openMode,l=e("./constants"),u=l.i000,h=l.i090,v=l.i180,d=l.i270,p=l.cos45,_=l.sin45,b=e("../../selections/helpers"),x=b.p2r,E=b.r2p,A=e(".././handle_outline"),P=A.clearOutline,D=e("./helpers"),R=D.readPaths,S=D.writePaths,I=D.ellipseOver,T=D.fixDatesForPaths;i.exports=function(z,U){if(!!z.length){var F=z[0][0];if(!!F){var V=F.getAttribute("d"),j=U.gd,H=j._fullLayout.newshape,Y=U.plotinfo,J=Y.xaxis,ne=Y.yaxis,q=!!Y.domain||!Y.xaxis,we=!!Y.domain||!Y.yaxis,ee=U.isActiveShape,X=U.dragmode,re=(j.layout||{}).shapes||[];if(!s(X)&&ee!==void 0){var de=j._fullLayout._activeShapeIndex;if(de<re.length)switch(j._fullLayout.shapes[de].type){case"rect":X="drawrect";break;case"circle":X="drawcircle";break;case"line":X="drawline";break;case"path":var me=re[de].path||"";me[me.length-1]==="Z"?X="drawclosedpath":X="drawopenpath";break}}var xe=n(X),He=R(V,j,Y,ee),Re={editable:!0,xref:q?"paper":J._id,yref:we?"paper":ne._id,layer:H.layer,opacity:H.opacity,line:{color:H.line.color,width:H.line.width,dash:H.line.dash}};xe||(Re.fillcolor=H.fillcolor,Re.fillrule=H.fillrule);var Ee;if(He.length===1&&(Ee=He[0]),Ee&&Ee.length===5&&X==="drawrect")Re.type="rect",Re.x0=Ee[0][1],Re.y0=Ee[0][2],Re.x1=Ee[2][1],Re.y1=Ee[2][2];else if(Ee&&X==="drawline")Re.type="line",Re.x0=Ee[0][1],Re.y0=Ee[0][2],Re.x1=Ee[1][1],Re.y1=Ee[1][2];else if(Ee&&X==="drawcircle"){Re.type="circle";var ke=Ee[u][1],$=Ee[h][1],le=Ee[v][1],K=Ee[d][1],te=Ee[u][2],ie=Ee[h][2],ce=Ee[v][2],ae=Ee[d][2],ve=Y.xaxis&&(Y.xaxis.type==="date"||Y.xaxis.type==="log"),pe=Y.yaxis&&(Y.yaxis.type==="date"||Y.yaxis.type==="log");ve&&(ke=E(Y.xaxis,ke),$=E(Y.xaxis,$),le=E(Y.xaxis,le),K=E(Y.xaxis,K)),pe&&(te=E(Y.yaxis,te),ie=E(Y.yaxis,ie),ce=E(Y.yaxis,ce),ae=E(Y.yaxis,ae));var he=($+K)/2,ye=(te+ce)/2,_e=(K-$+le-ke)/2,je=(ae-ie+ce-te)/2,Je=I({x0:he,y0:ye,x1:he+_e*p,y1:ye+je*_});ve&&(Je.x0=x(Y.xaxis,Je.x0),Je.x1=x(Y.xaxis,Je.x1)),pe&&(Je.y0=x(Y.yaxis,Je.y0),Je.y1=x(Y.yaxis,Je.y1)),Re.x0=Je.x0,Re.y0=Je.y0,Re.x1=Je.x1,Re.y1=Je.y1}else Re.type="path",J&&ne&&T(He,J,ne),Re.path=S(He),Ee=null;P(j);for(var nt=U.editHelpers,at=(nt||{}).modifyItem,Fe=[],Ie=0;Ie<re.length;Ie++){var Ke=j._fullLayout.shapes[Ie];if(Fe[Ie]=Ke._input,ee!==void 0&&Ie===j._fullLayout._activeShapeIndex){var Qe=Re;switch(Ke.type){case"line":case"rect":case"circle":at("x0",Qe.x0),at("x1",Qe.x1),at("y0",Qe.y0),at("y1",Qe.y1);break;case"path":at("path",Qe.path);break}}}return ee===void 0?(Fe.push(Re),Fe):nt?nt.getUpdateObj():{}}}}},{"../../dragelement/helpers":121,"../../selections/helpers":190,".././handle_outline":204,"./constants":200,"./helpers":202}],204:[function(e,i,o){function a(n){var l=n._fullLayout._zoomlayer;l&&l.selectAll(".outline-controllers").remove()}function s(n){var l=n._fullLayout._zoomlayer;l&&l.selectAll(".select-outline").remove(),n._fullLayout._outlining=!1}i.exports={clearOutlineControllers:a,clearOutline:s}},{}],205:[function(e,i,o){var a=e("./constants"),s=e("../../lib"),n=e("../../plots/cartesian/axes");o.rangeToShapePosition=function(u){return u.type==="log"?u.r2d:function(h){return h}},o.shapePositionToRange=function(u){return u.type==="log"?u.d2r:function(h){return h}},o.decodeDate=function(u){return function(h){return h.replace&&(h=h.replace("_"," ")),u(h)}},o.encodeDate=function(u){return function(h){return u(h).replace(" ","_")}},o.extractPathCoords=function(u,h,v){var d=[],p=u.match(a.segmentRE);return p.forEach(function(_){var b=h[_.charAt(0)].drawn;if(b!==void 0){var x=_.substr(1).match(a.paramRE);if(!(!x||x.length<b)){var E=x[b],A=v?E:s.cleanNumber(E);d.push(A)}}}),d},o.getDataToPixel=function(u,h,v,d){var p=u._fullLayout._size,_;if(h)if(d==="domain")_=function(x){return h._length*(v?1-x:x)+h._offset};else{var b=o.shapePositionToRange(h);_=function(x){return h._offset+h.r2p(b(x,!0))},h.type==="date"&&(_=o.decodeDate(_))}else v?_=function(x){return p.t+p.h*(1-x)}:_=function(x){return p.l+p.w*x};return _},o.getPixelToData=function(u,h,v,d){var p=u._fullLayout._size,_;if(h)if(d==="domain")_=function(x){var E=(x-h._offset)/h._length;return v?1-E:E};else{var b=o.rangeToShapePosition(h);_=function(x){return b(h.p2r(x-h._offset))}}else v?_=function(x){return 1-(x-p.t)/p.h}:_=function(x){return(x-p.l)/p.w};return _},o.roundPositionForSharpStrokeRendering=function(u,h){var v=Math.round(h%2)===1,d=Math.round(u);return v?d+.5:d},o.makeShapesOptionsAndPlotinfo=function(u,h){var v=u._fullLayout.shapes[h]||{},d=u._fullLayout._plots[v.xref+v.yref],p=!!d;return p?d._hadPlotinfo=!0:(d={},v.xref&&v.xref!=="paper"&&(d.xaxis=u._fullLayout[v.xref+"axis"]),v.yref&&v.yref!=="paper"&&(d.yaxis=u._fullLayout[v.yref+"axis"])),d.xsizemode=v.xsizemode,d.ysizemode=v.ysizemode,d.xanchor=v.xanchor,d.yanchor=v.yanchor,{options:v,plotinfo:d}},o.makeSelectionsOptionsAndPlotinfo=function(u,h){var v=u._fullLayout.selections[h]||{},d=u._fullLayout._plots[v.xref+v.yref],p=!!d;return p?d._hadPlotinfo=!0:(d={},v.xref&&(d.xaxis=u._fullLayout[v.xref+"axis"]),v.yref&&(d.yaxis=u._fullLayout[v.yref+"axis"])),{options:v,plotinfo:d}},o.getPathString=function(u,h){var v=h.type,d=n.getRefType(h.xref),p=n.getRefType(h.yref),_=n.getFromId(u,h.xref),b=n.getFromId(u,h.yref),x=u._fullLayout._size,E,A,P,D,R,S,I,T;if(_?d==="domain"?A=function(ne){return _._offset+_._length*ne}:(E=o.shapePositionToRange(_),A=function(ne){return _._offset+_.r2p(E(ne,!0))}):A=function(ne){return x.l+x.w*ne},b?p==="domain"?D=function(ne){return b._offset+b._length*(1-ne)}:(P=o.shapePositionToRange(b),D=function(ne){return b._offset+b.r2p(P(ne,!0))}):D=function(ne){return x.t+x.h*(1-ne)},v==="path")return _&&_.type==="date"&&(A=o.decodeDate(A)),b&&b.type==="date"&&(D=o.decodeDate(D)),l(h,A,D);if(h.xsizemode==="pixel"){var M=A(h.xanchor);R=M+h.x0,S=M+h.x1}else R=A(h.x0),S=A(h.x1);if(h.ysizemode==="pixel"){var z=D(h.yanchor);I=z-h.y0,T=z-h.y1}else I=D(h.y0),T=D(h.y1);if(v==="line")return"M"+R+","+I+"L"+S+","+T;if(v==="rect")return"M"+R+","+I+"H"+S+"V"+T+"H"+R+"Z";var U=(R+S)/2,F=(I+T)/2,V=Math.abs(U-R),j=Math.abs(F-I),H="A"+V+","+j,Y=U+V+","+F,J=U+","+(F-j);return"M"+Y+H+" 0 1,1 "+J+H+" 0 0,1 "+Y+"Z"};function l(u,h,v){var d=u.path,p=u.xsizemode,_=u.ysizemode,b=u.xanchor,x=u.yanchor;return d.replace(a.segmentRE,function(E){var A=0,P=E.charAt(0),D=a.paramIsX[P],R=a.paramIsY[P],S=a.numParams[P],I=E.substr(1).replace(a.paramRE,function(T){return D[A]?p==="pixel"?T=h(b)+Number(T):T=h(T):R[A]&&(_==="pixel"?T=v(x)-Number(T):T=v(T)),A++,A>S&&(T="X"),T});return A>S&&(I=I.replace(/[\s,]*X.*/,""),s.log("Ignoring extra params in segment "+E)),P+I})}},{"../../lib":244,"../../plots/cartesian/axes":291,"./constants":195}],206:[function(e,i,o){var a=e("./draw");i.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne}},{"../../plots/cartesian/include_components":302,"./attributes":193,"./calc_autorange":194,"./defaults":196,"./draw":198,"./draw_newshape/defaults":201}],207:[function(e,i,o){var a=e("../../plots/font_attributes"),s=e("../../plots/pad_attributes"),n=e("../../lib/extend").extendDeepAll,l=e("../../plot_api/edit_types").overrideAll,u=e("../../plots/animation_attributes"),h=e("../../plot_api/plot_template").templatedArray,v=e("./constants"),d=h("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});i.exports=l(h("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:d,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(s({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:u.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:a({})},font:a({}),activebgcolor:{valType:"color",dflt:v.gripBgActiveColor},bgcolor:{valType:"color",dflt:v.railBgColor},bordercolor:{valType:"color",dflt:v.railBorderColor},borderwidth:{valType:"number",min:0,dflt:v.railBorderWidth},ticklen:{valType:"number",min:0,dflt:v.tickLength},tickcolor:{valType:"color",dflt:v.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:v.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":238,"../../plot_api/edit_types":273,"../../plot_api/plot_template":280,"../../plots/animation_attributes":285,"../../plots/font_attributes":319,"../../plots/pad_attributes":324,"./constants":208}],208:[function(e,i,o){i.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],209:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/array_container_defaults"),n=e("./attributes"),l=e("./constants"),u=l.name,h=n.steps;i.exports=function(_,b){s(_,b,{name:u,handleItemDefaults:v})};function v(p,_,b){function x(T,M){return a.coerce(p,_,n,T,M)}for(var E=s(p,_,{name:"steps",handleItemDefaults:d}),A=0,P=0;P<E.length;P++)E[P].visible&&A++;var D;if(A<2?D=_.visible=!1:D=x("visible"),!!D){_._stepCount=A;var R=_._visibleSteps=a.filterVisible(E),S=x("active");(E[S]||{}).visible||(_.active=R[0]._index),x("x"),x("y"),a.noneOrAll(p,_,["x","y"]),x("xanchor"),x("yanchor"),x("len"),x("lenmode"),x("pad.t"),x("pad.r"),x("pad.b"),x("pad.l"),a.coerceFont(x,"font",b.font);var I=x("currentvalue.visible");I&&(x("currentvalue.xanchor"),x("currentvalue.prefix"),x("currentvalue.suffix"),x("currentvalue.offset"),a.coerceFont(x,"currentvalue.font",_.font)),x("transition.duration"),x("transition.easing"),x("bgcolor"),x("activebgcolor"),x("bordercolor"),x("borderwidth"),x("ticklen"),x("tickwidth"),x("tickcolor"),x("minorticklen")}}function d(p,_){function b(A,P){return a.coerce(p,_,h,A,P)}var x;if(p.method!=="skip"&&!Array.isArray(p.args)?x=_.visible=!1:x=b("visible"),x){b("method"),b("args");var E=b("label","step-"+_._index);b("value",E),b("execute")}}},{"../../lib":244,"../../plots/array_container_defaults":286,"./attributes":207,"./constants":208}],210:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../plots/plots"),n=e("../color"),l=e("../drawing"),u=e("../../lib"),h=u.strTranslate,v=e("../../lib/svg_text_utils"),d=e("../../plot_api/plot_template").arrayEditor,p=e("./constants"),_=e("../../constants/alignment"),b=_.LINE_SPACING,x=_.FROM_TL,E=_.FROM_BR;i.exports=function(X){var re=X._fullLayout,de=P(re,X),me=re._infolayer.selectAll("g."+p.containerClassName).data(de.length>0?[0]:[]);me.enter().append("g").classed(p.containerClassName,!0).style("cursor","ew-resize");function xe(ke){ke._commandObserver&&(ke._commandObserver.remove(),delete ke._commandObserver),s.autoMargin(X,A(ke))}if(me.exit().each(function(){a.select(this).selectAll("g."+p.groupClassName).each(xe)}).remove(),de.length!==0){var He=me.selectAll("g."+p.groupClassName).data(de,D);He.enter().append("g").classed(p.groupClassName,!0),He.exit().each(xe).remove();for(var Re=0;Re<de.length;Re++){var Ee=de[Re];R(X,Ee)}He.each(function(ke){var $=a.select(this);H(ke),s.manageCommandObserver(X,ke,ke._visibleSteps,function(le){var K=$.data()[0];K.active!==le.index&&(K._dragging||F(X,$,K,le.index,!1,!0))}),S(X,a.select(this),ke)})}};function A(ee){return p.autoMarginIdRoot+ee._index}function P(ee,X){for(var re=ee[p.name],de=[],me=0;me<re.length;me++){var xe=re[me];!xe.visible||(xe._gd=X,de.push(xe))}return de}function D(ee){return ee._index}function R(ee,X){var re=l.tester.selectAll("g."+p.labelGroupClass).data(X._visibleSteps);re.enter().append("g").classed(p.labelGroupClass,!0);var de=0,me=0;re.each(function(ie){var ce=a.select(this),ae=M(ce,{step:ie},X),ve=ae.node();if(ve){var pe=l.bBox(ve);me=Math.max(me,pe.height),de=Math.max(de,pe.width)}}),re.remove();var xe=X._dims={};xe.inputAreaWidth=Math.max(p.railWidth,p.gripHeight);var He=ee._fullLayout._size;xe.lx=He.l+He.w*X.x,xe.ly=He.t+He.h*(1-X.y),X.lenmode==="fraction"?xe.outerLength=Math.round(He.w*X.len):xe.outerLength=X.len,xe.inputAreaStart=0,xe.inputAreaLength=Math.round(xe.outerLength-X.pad.l-X.pad.r);var Re=xe.inputAreaLength-2*p.stepInset,Ee=Re/(X._stepCount-1),ke=de+p.labelPadding;if(xe.labelStride=Math.max(1,Math.ceil(ke/Ee)),xe.labelHeight=me,xe.currentValueMaxWidth=0,xe.currentValueHeight=0,xe.currentValueTotalHeight=0,xe.currentValueMaxLines=1,X.currentvalue.visible){var $=l.tester.append("g");re.each(function(ie){var ce=I($,X,ie.label),ae=ce.node()&&l.bBox(ce.node())||{width:0,height:0},ve=v.lineCount(ce);xe.currentValueMaxWidth=Math.max(xe.currentValueMaxWidth,Math.ceil(ae.width)),xe.currentValueHeight=Math.max(xe.currentValueHeight,Math.ceil(ae.height)),xe.currentValueMaxLines=Math.max(xe.currentValueMaxLines,ve)}),xe.currentValueTotalHeight=xe.currentValueHeight+X.currentvalue.offset,$.remove()}xe.height=xe.currentValueTotalHeight+p.tickOffset+X.ticklen+p.labelOffset+xe.labelHeight+X.pad.t+X.pad.b;var le="left";u.isRightAnchor(X)&&(xe.lx-=xe.outerLength,le="right"),u.isCenterAnchor(X)&&(xe.lx-=xe.outerLength/2,le="center");var K="top";u.isBottomAnchor(X)&&(xe.ly-=xe.height,K="bottom"),u.isMiddleAnchor(X)&&(xe.ly-=xe.height/2,K="middle"),xe.outerLength=Math.ceil(xe.outerLength),xe.height=Math.ceil(xe.height),xe.lx=Math.round(xe.lx),xe.ly=Math.round(xe.ly);var te={y:X.y,b:xe.height*E[K],t:xe.height*x[K]};X.lenmode==="fraction"?(te.l=0,te.xl=X.x-X.len*x[le],te.r=0,te.xr=X.x+X.len*E[le]):(te.x=X.x,te.l=xe.outerLength*x[le],te.r=xe.outerLength*E[le]),s.autoMargin(ee,A(X),te)}function S(ee,X,re){(re.steps[re.active]||{}).visible||(re.active=re._visibleSteps[0]._index),X.call(I,re).call(we,re).call(z,re).call(j,re).call(q,ee,re).call(T,ee,re);var de=re._dims;l.setTranslate(X,de.lx+re.pad.l,de.ly+re.pad.t),X.call(Y,re,!1),X.call(I,re)}function I(ee,X,re){if(!!X.currentvalue.visible){var de=X._dims,me,xe;switch(X.currentvalue.xanchor){case"right":me=de.inputAreaLength-p.currentValueInset-de.currentValueMaxWidth,xe="left";break;case"center":me=de.inputAreaLength*.5,xe="middle";break;default:me=p.currentValueInset,xe="left"}var He=u.ensureSingle(ee,"text",p.labelClass,function(K){K.attr({"text-anchor":xe,"data-notex":1})}),Re=X.currentvalue.prefix?X.currentvalue.prefix:"";if(typeof re=="string")Re+=re;else{var Ee=X.steps[X.active].label,ke=X._gd._fullLayout._meta;ke&&(Ee=u.templateString(Ee,ke)),Re+=Ee}X.currentvalue.suffix&&(Re+=X.currentvalue.suffix),He.call(l.font,X.currentvalue.font).text(Re).call(v.convertToTspans,X._gd);var $=v.lineCount(He),le=(de.currentValueMaxLines+1-$)*X.currentvalue.font.size*b;return v.positionText(He,me,le),He}}function T(ee,X,re){var de=u.ensureSingle(ee,"rect",p.gripRectClass,function(me){me.call(V,X,ee,re).style("pointer-events","all")});de.attr({width:p.gripWidth,height:p.gripHeight,rx:p.gripRadius,ry:p.gripRadius}).call(n.stroke,re.bordercolor).call(n.fill,re.bgcolor).style("stroke-width",re.borderwidth+"px")}function M(ee,X,re){var de=u.ensureSingle(ee,"text",p.labelClass,function(He){He.attr({"text-anchor":"middle","data-notex":1})}),me=X.step.label,xe=re._gd._fullLayout._meta;return xe&&(me=u.templateString(me,xe)),de.call(l.font,re.font).text(me).call(v.convertToTspans,re._gd),de}function z(ee,X){var re=u.ensureSingle(ee,"g",p.labelsClass),de=X._dims,me=re.selectAll("g."+p.labelGroupClass).data(de.labelSteps);me.enter().append("g").classed(p.labelGroupClass,!0),me.exit().remove(),me.each(function(xe){var He=a.select(this);He.call(M,xe,X),l.setTranslate(He,J(X,xe.fraction),p.tickOffset+X.ticklen+X.font.size*b+p.labelOffset+de.currentValueTotalHeight)})}function U(ee,X,re,de,me){var xe=Math.round(de*(re._stepCount-1)),He=re._visibleSteps[xe]._index;He!==re.active&&F(ee,X,re,He,!0,me)}function F(ee,X,re,de,me,xe){var He=re.active;re.active=de,d(ee.layout,p.name,re).applyUpdate("active",de);var Re=re.steps[re.active];X.call(Y,re,xe),X.call(I,re),ee.emit("plotly_sliderchange",{slider:re,step:re.steps[re.active],interaction:me,previousActive:He}),Re&&Re.method&&me&&(X._nextMethod?(X._nextMethod.step=Re,X._nextMethod.doCallback=me,X._nextMethod.doTransition=xe):(X._nextMethod={step:Re,doCallback:me,doTransition:xe},X._nextMethodRaf=window.requestAnimationFrame(function(){var Ee=X._nextMethod.step;!Ee.method||(Ee.execute&&s.executeAPICommand(ee,Ee.method,Ee.args),X._nextMethod=null,X._nextMethodRaf=null)})))}function V(ee,X,re){var de=re.node(),me=a.select(X);function xe(){return re.data()[0]}function He(){var Re=xe();X.emit("plotly_sliderstart",{slider:Re});var Ee=re.select("."+p.gripRectClass);a.event.stopPropagation(),a.event.preventDefault(),Ee.call(n.fill,Re.activebgcolor);var ke=ne(Re,a.mouse(de)[0]);U(X,re,Re,ke,!0),Re._dragging=!0;function $(){var K=xe(),te=ne(K,a.mouse(de)[0]);U(X,re,K,te,!1)}me.on("mousemove",$),me.on("touchmove",$);function le(){var K=xe();K._dragging=!1,Ee.call(n.fill,K.bgcolor),me.on("mouseup",null),me.on("mousemove",null),me.on("touchend",null),me.on("touchmove",null),X.emit("plotly_sliderend",{slider:K,step:K.steps[K.active]})}me.on("mouseup",le),me.on("touchend",le)}ee.on("mousedown",He),ee.on("touchstart",He)}function j(ee,X){var re=ee.selectAll("rect."+p.tickRectClass).data(X._visibleSteps),de=X._dims;re.enter().append("rect").classed(p.tickRectClass,!0),re.exit().remove(),re.attr({width:X.tickwidth+"px","shape-rendering":"crispEdges"}),re.each(function(me,xe){var He=xe%de.labelStride===0,Re=a.select(this);Re.attr({height:He?X.ticklen:X.minorticklen}).call(n.fill,X.tickcolor),l.setTranslate(Re,J(X,xe/(X._stepCount-1))-.5*X.tickwidth,(He?p.tickOffset:p.minorTickOffset)+de.currentValueTotalHeight)})}function H(ee){var X=ee._dims;X.labelSteps=[];for(var re=ee._stepCount,de=0;de<re;de+=X.labelStride)X.labelSteps.push({fraction:de/(re-1),step:ee._visibleSteps[de]})}function Y(ee,X,re){for(var de=ee.select("rect."+p.gripRectClass),me=0,xe=0;xe<X._stepCount;xe++)if(X._visibleSteps[xe]._index===X.active){me=xe;break}var He=J(X,me/(X._stepCount-1));if(!X._invokingCommand){var Re=de;re&&X.transition.duration>0&&(Re=Re.transition().duration(X.transition.duration).ease(X.transition.easing)),Re.attr("transform",h(He-p.gripWidth*.5,X._dims.currentValueTotalHeight))}}function J(ee,X){var re=ee._dims;return re.inputAreaStart+p.stepInset+(re.inputAreaLength-2*p.stepInset)*Math.min(1,Math.max(0,X))}function ne(ee,X){var re=ee._dims;return Math.min(1,Math.max(0,(X-p.stepInset-re.inputAreaStart)/(re.inputAreaLength-2*p.stepInset-2*re.inputAreaStart)))}function q(ee,X,re){var de=re._dims,me=u.ensureSingle(ee,"rect",p.railTouchRectClass,function(xe){xe.call(V,X,ee,re).style("pointer-events","all")});me.attr({width:de.inputAreaLength,height:Math.max(de.inputAreaWidth,p.tickOffset+re.ticklen+de.labelHeight)}).call(n.fill,re.bgcolor).attr("opacity",0),l.setTranslate(me,0,de.currentValueTotalHeight)}function we(ee,X){var re=X._dims,de=re.inputAreaLength-p.railInset*2,me=u.ensureSingle(ee,"rect",p.railRectClass);me.attr({width:de,height:p.railWidth,rx:p.railRadius,ry:p.railRadius,"shape-rendering":"crispEdges"}).call(n.stroke,X.bordercolor).call(n.fill,X.bgcolor).style("stroke-width",X.borderwidth+"px"),l.setTranslate(me,p.railInset,(re.inputAreaWidth-p.railWidth)*.5+re.currentValueTotalHeight)}},{"../../constants/alignment":219,"../../lib":244,"../../lib/svg_text_utils":267,"../../plot_api/plot_template":280,"../../plots/plots":325,"../color":103,"../drawing":125,"./constants":208,"@plotly/d3":11}],211:[function(e,i,o){var a=e("./constants");i.exports={moduleType:"component",name:a.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":207,"./constants":208,"./defaults":209,"./draw":210}],212:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("../../plots/plots"),l=e("../../registry"),u=e("../../lib"),h=u.strTranslate,v=e("../drawing"),d=e("../color"),p=e("../../lib/svg_text_utils"),_=e("../../constants/interactions"),b=e("../../constants/alignment").OPPOSITE_SIDE,x=/ [XY][0-9]* /;function E(A,P,D){var R=D.propContainer,S=D.propName,I=D.placeholder,T=D.traceIndex,M=D.avoid||{},z=D.attributes,U=D.transform,F=D.containerGroup,V=A._fullLayout,j=1,H=!1,Y=R.title,J=(Y&&Y.text?Y.text:"").trim(),ne=Y&&Y.font?Y.font:{},q=ne.family,we=ne.size,ee=ne.color,X;S==="title.text"?X="titleText":S.indexOf("axis")!==-1?X="axisTitleText":S.indexOf("colorbar"!==-1)&&(X="colorbarTitleText");var re=A._context.edits[X];J===""?j=0:J.replace(x," % ")===I.replace(x," % ")&&(j=.2,H=!0,re||(J="")),D._meta?J=u.templateString(J,D._meta):V._meta&&(J=u.templateString(J,V._meta));var de=J||re,me;F||(F=u.ensureSingle(V._infolayer,"g","g-"+P),me=V._hColorbarMoveTitle);var xe=F.selectAll("text").data(de?[0]:[]);if(xe.enter().append("text"),xe.text(J).attr("class",P),xe.exit().remove(),!de)return F;function He($){u.syncOrAsync([Re,Ee],$)}function Re($){var le;return!U&&me&&(U={}),U?(le="",U.rotate&&(le+="rotate("+[U.rotate,z.x,z.y]+")"),(U.offset||me)&&(le+=h(0,(U.offset||0)-(me||0)))):le=null,$.attr("transform",le),$.style({"font-family":q,"font-size":a.round(we,2)+"px",fill:d.rgb(ee),opacity:j*d.opacity(ee),"font-weight":n.fontWeight}).attr(z).call(p.convertToTspans,A),n.previousPromises(A)}function Ee($){var le=a.select($.node().parentNode);if(M&&M.selection&&M.side&&J){le.attr("transform",null);var K=b[M.side],te=M.side==="left"||M.side==="top"?-1:1,ie=s(M.pad)?M.pad:2,ce=v.bBox(le.node()),ae={left:0,top:0,right:V.width,bottom:V.height},ve=M.maxShift||te*(ae[M.side]-ce[M.side]),pe=0;if(ve<0)pe=ve;else{var he=M.offsetLeft||0,ye=M.offsetTop||0;ce.left-=he,ce.right-=he,ce.top-=ye,ce.bottom-=ye,M.selection.each(function(){var je=v.bBox(this);u.bBoxIntersect(ce,je,ie)&&(pe=Math.max(pe,te*(je[M.side]-ce[K])+ie))}),pe=Math.min(ve,pe)}if(pe>0||ve<0){var _e={left:[-pe,0],right:[pe,0],top:[0,-pe],bottom:[0,pe]}[M.side];le.attr("transform",h(_e[0],_e[1]))}}}xe.call(He);function ke(){j=0,H=!0,xe.text(I).on("mouseover.opacity",function(){a.select(this).transition().duration(_.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){a.select(this).transition().duration(_.HIDE_PLACEHOLDER).style("opacity",0)})}return re&&(J?xe.on(".opacity",null):ke(),xe.call(p.makeEditable,{gd:A}).on("edit",function($){T!==void 0?l.call("_guiRestyle",A,S,$,T):l.call("_guiRelayout",A,S,$)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(He)}).on("input",function($){this.text($||" ").call(p.positionText,z.x,z.y)})),xe.classed("js-placeholder",H),F}i.exports={draw:E}},{"../../constants/alignment":219,"../../constants/interactions":223,"../../lib":244,"../../lib/svg_text_utils":267,"../../plots/plots":325,"../../registry":327,"../color":103,"../drawing":125,"@plotly/d3":11,"fast-isnumeric":17}],213:[function(e,i,o){var a=e("../../plots/font_attributes"),s=e("../color/attributes"),n=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,u=e("../../plots/pad_attributes"),h=e("../../plot_api/plot_template").templatedArray,v=h("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});i.exports=l(h("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:v,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:n(u({editType:"arraydraw"}),{}),font:a({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:s.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":238,"../../plot_api/edit_types":273,"../../plot_api/plot_template":280,"../../plots/font_attributes":319,"../../plots/pad_attributes":324,"../color/attributes":102}],214:[function(e,i,o){i.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],215:[function(e,i,o){var a=e("../../lib"),s=e("../../plots/array_container_defaults"),n=e("./attributes"),l=e("./constants"),u=l.name,h=n.buttons;i.exports=function(_,b){var x={name:u,handleItemDefaults:v};s(_,b,x)};function v(p,_,b){function x(P,D){return a.coerce(p,_,n,P,D)}var E=s(p,_,{name:"buttons",handleItemDefaults:d}),A=x("visible",E.length>0);!A||(x("active"),x("direction"),x("type"),x("showactive"),x("x"),x("y"),a.noneOrAll(p,_,["x","y"]),x("xanchor"),x("yanchor"),x("pad.t"),x("pad.r"),x("pad.b"),x("pad.l"),a.coerceFont(x,"font",b.font),x("bgcolor",b.paper_bgcolor),x("bordercolor"),x("borderwidth"))}function d(p,_){function b(E,A){return a.coerce(p,_,h,E,A)}var x=b("visible",p.method==="skip"||Array.isArray(p.args));x&&(b("method"),b("args"),b("args2"),b("label"),b("execute"))}},{"../../lib":244,"../../plots/array_container_defaults":286,"./attributes":213,"./constants":214}],216:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../plots/plots"),n=e("../color"),l=e("../drawing"),u=e("../../lib"),h=e("../../lib/svg_text_utils"),v=e("../../plot_api/plot_template").arrayEditor,d=e("../../constants/alignment").LINE_SPACING,p=e("./constants"),_=e("./scrollbox");i.exports=function(ne){var q=ne._fullLayout,we=u.filterVisible(q[p.name]);function ee(Ee){s.autoMargin(ne,j(Ee))}var X=q._menulayer.selectAll("g."+p.containerClassName).data(we.length>0?[0]:[]);if(X.enter().append("g").classed(p.containerClassName,!0).style("cursor","pointer"),X.exit().each(function(){a.select(this).selectAll("g."+p.headerGroupClassName).each(ee)}).remove(),we.length!==0){var re=X.selectAll("g."+p.headerGroupClassName).data(we,b);re.enter().append("g").classed(p.headerGroupClassName,!0);for(var de=u.ensureSingle(X,"g",p.dropdownButtonGroupClassName,function(Ee){Ee.style("pointer-events","all")}),me=0;me<we.length;me++){var xe=we[me];V(ne,xe)}var He="updatemenus"+q._uid,Re=new _(ne,de,He);re.enter().size()&&(de.node().parentNode.appendChild(de.node()),de.call(Y)),re.exit().each(function(Ee){de.call(Y),ee(Ee)}).remove(),re.each(function(Ee){var ke=a.select(this),$=Ee.type==="dropdown"?de:null;s.manageCommandObserver(ne,Ee,Ee.buttons,function(le){A(ne,Ee,Ee.buttons[le.index],ke,$,Re,le.index,!0)}),Ee.type==="dropdown"?(P(ne,ke,de,Re,Ee),E(de,Ee)&&D(ne,ke,de,Re,Ee)):D(ne,ke,null,null,Ee)})}};function b(J){return J._index}function x(J){return+J.attr(p.menuIndexAttrName)==-1}function E(J,ne){return+J.attr(p.menuIndexAttrName)===ne._index}function A(J,ne,q,we,ee,X,re,de){ne.active=re,v(J.layout,p.name,ne).applyUpdate("active",re),ne.type==="buttons"?D(J,we,null,null,ne):ne.type==="dropdown"&&(ee.attr(p.menuIndexAttrName,"-1"),P(J,we,ee,X,ne),de||D(J,we,ee,X,ne))}function P(J,ne,q,we,ee){var X=u.ensureSingle(ne,"g",p.headerClassName,function(Ee){Ee.style("pointer-events","all")}),re=ee._dims,de=ee.active,me=ee.buttons[de]||p.blankHeaderOpts,xe={y:ee.pad.t,yPad:0,x:ee.pad.l,xPad:0,index:0},He={width:re.headerWidth,height:re.headerHeight};X.call(I,ee,me,J).call(H,ee,xe,He);var Re=u.ensureSingle(ne,"text",p.headerArrowClassName,function(Ee){Ee.attr("text-anchor","end").call(l.font,ee.font).text(p.arrowSymbol[ee.direction])});Re.attr({x:re.headerWidth-p.arrowOffsetX+ee.pad.l,y:re.headerHeight/2+p.textOffsetY+ee.pad.t}),X.on("click",function(){q.call(Y,String(E(q,ee)?-1:ee._index)),D(J,ne,q,we,ee)}),X.on("mouseover",function(){X.call(U)}),X.on("mouseout",function(){X.call(F,ee)}),l.setTranslate(ne,re.lx,re.ly)}function D(J,ne,q,we,ee){q||(q=ne,q.attr("pointer-events","all"));var X=!x(q)||ee.type==="buttons"?ee.buttons:[],re=ee.type==="dropdown"?p.dropdownButtonClassName:p.buttonClassName,de=q.selectAll("g."+re).data(u.filterVisible(X)),me=de.enter().append("g").classed(re,!0),xe=de.exit();ee.type==="dropdown"?(me.attr("opacity","0").transition().attr("opacity","1"),xe.transition().attr("opacity","0").remove()):xe.remove();var He=0,Re=0,Ee=ee._dims,ke=["up","down"].indexOf(ee.direction)!==-1;ee.type==="dropdown"&&(ke?Re=Ee.headerHeight+p.gapButtonHeader:He=Ee.headerWidth+p.gapButtonHeader),ee.type==="dropdown"&&ee.direction==="up"&&(Re=-p.gapButtonHeader+p.gapButton-Ee.openHeight),ee.type==="dropdown"&&ee.direction==="left"&&(He=-p.gapButtonHeader+p.gapButton-Ee.openWidth);var $={x:Ee.lx+He+ee.pad.l,y:Ee.ly+Re+ee.pad.t,yPad:p.gapButton,xPad:p.gapButton,index:0},le={l:$.x+ee.borderwidth,t:$.y+ee.borderwidth};de.each(function(K,te){var ie=a.select(this);ie.call(I,ee,K,J).call(H,ee,$),ie.on("click",function(){a.event.defaultPrevented||(K.execute&&(K.args2&&ee.active===te?(A(J,ee,K,ne,q,we,-1),s.executeAPICommand(J,K.method,K.args2)):(A(J,ee,K,ne,q,we,te),s.executeAPICommand(J,K.method,K.args))),J.emit("plotly_buttonclicked",{menu:ee,button:K,active:ee.active}))}),ie.on("mouseover",function(){ie.call(U)}),ie.on("mouseout",function(){ie.call(F,ee),de.call(z,ee)})}),de.call(z,ee),ke?(le.w=Math.max(Ee.openWidth,Ee.headerWidth),le.h=$.y-le.t):(le.w=$.x-le.l,le.h=Math.max(Ee.openHeight,Ee.headerHeight)),le.direction=ee.direction,we&&(de.size()?R(J,ne,q,we,ee,le):S(we))}function R(J,ne,q,we,ee,X){var re=ee.direction,de=re==="up"||re==="down",me=ee._dims,xe=ee.active,He,Re,Ee;if(de)for(Re=0,Ee=0;Ee<xe;Ee++)Re+=me.heights[Ee]+p.gapButton;else for(He=0,Ee=0;Ee<xe;Ee++)He+=me.widths[Ee]+p.gapButton;we.enable(X,He,Re),we.hbar&&we.hbar.attr("opacity","0").transition().attr("opacity","1"),we.vbar&&we.vbar.attr("opacity","0").transition().attr("opacity","1")}function S(J){var ne=!!J.hbar,q=!!J.vbar;ne&&J.hbar.transition().attr("opacity","0").each("end",function(){ne=!1,q||J.disable()}),q&&J.vbar.transition().attr("opacity","0").each("end",function(){q=!1,ne||J.disable()})}function I(J,ne,q,we){J.call(T,ne).call(M,ne,q,we)}function T(J,ne){var q=u.ensureSingle(J,"rect",p.itemRectClassName,function(we){we.attr({rx:p.rx,ry:p.ry,"shape-rendering":"crispEdges"})});q.call(n.stroke,ne.bordercolor).call(n.fill,ne.bgcolor).style("stroke-width",ne.borderwidth+"px")}function M(J,ne,q,we){var ee=u.ensureSingle(J,"text",p.itemTextClassName,function(de){de.attr({"text-anchor":"start","data-notex":1})}),X=q.label,re=we._fullLayout._meta;re&&(X=u.templateString(X,re)),ee.call(l.font,ne.font).text(X).call(h.convertToTspans,we)}function z(J,ne){var q=ne.active;J.each(function(we,ee){var X=a.select(this);ee===q&&ne.showactive&&X.select("rect."+p.itemRectClassName).call(n.fill,p.activeColor)})}function U(J){J.select("rect."+p.itemRectClassName).call(n.fill,p.hoverColor)}function F(J,ne){J.select("rect."+p.itemRectClassName).call(n.fill,ne.bgcolor)}function V(J,ne){var q=ne._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},we=l.tester.selectAll("g."+p.dropdownButtonClassName).data(u.filterVisible(ne.buttons));we.enter().append("g").classed(p.dropdownButtonClassName,!0);var ee=["up","down"].indexOf(ne.direction)!==-1;we.each(function(He,Re){var Ee=a.select(this);Ee.call(I,ne,He,J);var ke=Ee.select("."+p.itemTextClassName),$=ke.node()&&l.bBox(ke.node()).width,le=Math.max($+p.textPadX,p.minWidth),K=ne.font.size*d,te=h.lineCount(ke),ie=Math.max(K*te,p.minHeight)+p.textOffsetY;ie=Math.ceil(ie),le=Math.ceil(le),q.widths[Re]=le,q.heights[Re]=ie,q.height1=Math.max(q.height1,ie),q.width1=Math.max(q.width1,le),ee?(q.totalWidth=Math.max(q.totalWidth,le),q.openWidth=q.totalWidth,q.totalHeight+=ie+p.gapButton,q.openHeight+=ie+p.gapButton):(q.totalWidth+=le+p.gapButton,q.openWidth+=le+p.gapButton,q.totalHeight=Math.max(q.totalHeight,ie),q.openHeight=q.totalHeight)}),ee?q.totalHeight-=p.gapButton:q.totalWidth-=p.gapButton,q.headerWidth=q.width1+p.arrowPadX,q.headerHeight=q.height1,ne.type==="dropdown"&&(ee?(q.width1+=p.arrowPadX,q.totalHeight=q.height1):q.totalWidth=q.width1,q.totalWidth+=p.arrowPadX),we.remove();var X=q.totalWidth+ne.pad.l+ne.pad.r,re=q.totalHeight+ne.pad.t+ne.pad.b,de=J._fullLayout._size;q.lx=de.l+de.w*ne.x,q.ly=de.t+de.h*(1-ne.y);var me="left";u.isRightAnchor(ne)&&(q.lx-=X,me="right"),u.isCenterAnchor(ne)&&(q.lx-=X/2,me="center");var xe="top";u.isBottomAnchor(ne)&&(q.ly-=re,xe="bottom"),u.isMiddleAnchor(ne)&&(q.ly-=re/2,xe="middle"),q.totalWidth=Math.ceil(q.totalWidth),q.totalHeight=Math.ceil(q.totalHeight),q.lx=Math.round(q.lx),q.ly=Math.round(q.ly),s.autoMargin(J,j(ne),{x:ne.x,y:ne.y,l:X*({right:1,center:.5}[me]||0),r:X*({left:1,center:.5}[me]||0),b:re*({top:1,middle:.5}[xe]||0),t:re*({bottom:1,middle:.5}[xe]||0)})}function j(J){return p.autoMarginIdRoot+J._index}function H(J,ne,q,we){we=we||{};var ee=J.select("."+p.itemRectClassName),X=J.select("."+p.itemTextClassName),re=ne.borderwidth,de=q.index,me=ne._dims;l.setTranslate(J,re+q.x,re+q.y);var xe=["up","down"].indexOf(ne.direction)!==-1,He=we.height||(xe?me.heights[de]:me.height1);ee.attr({x:0,y:0,width:we.width||(xe?me.width1:me.widths[de]),height:He});var Re=ne.font.size*d,Ee=h.lineCount(X),ke=(Ee-1)*Re/2;h.positionText(X,p.textOffsetX,He/2-ke+p.textOffsetY),xe?q.y+=me.heights[de]+q.yPad:q.x+=me.widths[de]+q.xPad,q.index++}function Y(J,ne){J.attr(p.menuIndexAttrName,ne||"-1").selectAll("g."+p.dropdownButtonClassName).remove()}},{"../../constants/alignment":219,"../../lib":244,"../../lib/svg_text_utils":267,"../../plot_api/plot_template":280,"../../plots/plots":325,"../color":103,"../drawing":125,"./constants":214,"./scrollbox":218,"@plotly/d3":11}],217:[function(e,i,o){arguments[4][211][0].apply(o,arguments)},{"./attributes":213,"./constants":214,"./defaults":215,"./draw":216,dup:211}],218:[function(e,i,o){i.exports=u;var a=e("@plotly/d3"),s=e("../color"),n=e("../drawing"),l=e("../../lib");function u(h,v,d){this.gd=h,this.container=v,this.id=d,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}u.barWidth=2,u.barLength=20,u.barRadius=2,u.barPad=1,u.barColor="#808BA4",u.prototype.enable=function(v,d,p){var _=this.gd._fullLayout,b=_.width,x=_.height;this.position=v;var E=this.position.l,A=this.position.w,P=this.position.t,D=this.position.h,R=this.position.direction,S=R==="down",I=R==="left",T=R==="right",M=R==="up",z=A,U=D,F,V,j,H;!S&&!I&&!T&&!M&&(this.position.direction="down",S=!0);var Y=S||M;Y?(F=E,V=F+z,S?(j=P,H=Math.min(j+U,x),U=H-j):(H=P+U,j=Math.max(H-U,0),U=H-j)):(j=P,H=j+U,I?(V=E+z,F=Math.max(V-z,0),z=V-F):(F=E,V=Math.min(F+z,b),z=V-F)),this._box={l:F,t:j,w:z,h:U};var J=A>z,ne=u.barLength+2*u.barPad,q=u.barWidth+2*u.barPad,we=E,ee=P+D;ee+q>x&&(ee=x-q);var X=this.container.selectAll("rect.scrollbar-horizontal").data(J?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-horizontal",!0).call(s.fill,u.barColor),J?(this.hbar=X.attr({rx:u.barRadius,ry:u.barRadius,x:we,y:ee,width:ne,height:q}),this._hbarXMin=we+ne/2,this._hbarTranslateMax=z-ne):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var re=D>U,de=u.barWidth+2*u.barPad,me=u.barLength+2*u.barPad,xe=E+A,He=P;xe+de>b&&(xe=b-de);var Re=this.container.selectAll("rect.scrollbar-vertical").data(re?[0]:[]);Re.exit().on(".drag",null).remove(),Re.enter().append("rect").classed("scrollbar-vertical",!0).call(s.fill,u.barColor),re?(this.vbar=Re.attr({rx:u.barRadius,ry:u.barRadius,x:xe,y:He,width:de,height:me}),this._vbarYMin=He+me/2,this._vbarTranslateMax=U-me):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Ee=this.id,ke=F-.5,$=re?V+de+.5:V+.5,le=j-.5,K=J?H+q+.5:H+.5,te=_._topdefs.selectAll("#"+Ee).data(J||re?[0]:[]);if(te.exit().remove(),te.enter().append("clipPath").attr("id",Ee).append("rect"),J||re?(this._clipRect=te.select("rect").attr({x:Math.floor(ke),y:Math.floor(le),width:Math.ceil($)-Math.floor(ke),height:Math.ceil(K)-Math.floor(le)}),this.container.call(n.setClipUrl,Ee,this.gd),this.bg.attr({x:E,y:P,width:A,height:D})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(n.setClipUrl,null),delete this._clipRect),J||re){var ie=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ie);var ce=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault(),a.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));J&&this.hbar.on(".drag",null).call(ce),re&&this.vbar.on(".drag",null).call(ce)}this.setTranslate(d,p)},u.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(n.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},u.prototype._onBoxDrag=function(){var v=this.translateX,d=this.translateY;this.hbar&&(v-=a.event.dx),this.vbar&&(d-=a.event.dy),this.setTranslate(v,d)},u.prototype._onBoxWheel=function(){var v=this.translateX,d=this.translateY;this.hbar&&(v+=a.event.deltaY),this.vbar&&(d+=a.event.deltaY),this.setTranslate(v,d)},u.prototype._onBarDrag=function(){var v=this.translateX,d=this.translateY;if(this.hbar){var p=v+this._hbarXMin,_=p+this._hbarTranslateMax,b=l.constrain(a.event.x,p,_),x=(b-p)/(_-p),E=this.position.w-this._box.w;v=x*E}if(this.vbar){var A=d+this._vbarYMin,P=A+this._vbarTranslateMax,D=l.constrain(a.event.y,A,P),R=(D-A)/(P-A),S=this.position.h-this._box.h;d=R*S}this.setTranslate(v,d)},u.prototype.setTranslate=function(v,d){var p=this.position.w-this._box.w,_=this.position.h-this._box.h;if(v=l.constrain(v||0,0,p),d=l.constrain(d||0,0,_),this.translateX=v,this.translateY=d,this.container.call(n.setTranslate,this._box.l-this.position.l-v,this._box.t-this.position.t-d),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+v-.5),y:Math.floor(this.position.t+d-.5)}),this.hbar){var b=v/p;this.hbar.call(n.setTranslate,v+b*this._hbarTranslateMax,d)}if(this.vbar){var x=d/_;this.vbar.call(n.setTranslate,v,d+x*this._vbarTranslateMax)}}},{"../../lib":244,"../color":103,"../drawing":125,"@plotly/d3":11}],219:[function(e,i,o){i.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],220:[function(e,i,o){i.exports={axisRefDescription:function(a,s,n){return["If set to a",a,"axis id (e.g. *"+a+"* or","*"+a+"2*), the `"+a+"` position refers to a",a,"coordinate. If set to *paper*, the `"+a+"`","position refers to the distance from the",s,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",s,"("+n+"). If set to a",a,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",s,"of the domain of that axis: e.g.,","*"+a+"2 domain* refers to the domain of the second",a," axis and a",a,"position of 0.5 refers to the","point between the",s,"and the",n,"of the domain of the","second",a,"axis."].join(" ")}}},{}],221:[function(e,i,o){i.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],222:[function(e,i,o){i.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],223:[function(e,i,o){i.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],224:[function(e,i,o){i.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],225:[function(e,i,o){o.xmlns="http://www.w3.org/2000/xmlns/",o.svg="http://www.w3.org/2000/svg",o.xlink="http://www.w3.org/1999/xlink",o.svgAttrs={xmlns:o.svg,"xmlns:xlink":o.xlink}},{}],226:[function(e,i,o){o.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var a=e("./registry"),s=o.register=a.register,n=e("./plot_api"),l=Object.keys(n),u=0;u<l.length;u++){var h=l[u];h.charAt(0)!=="_"&&(o[h]=n[h]),s({moduleType:"apiMethod",name:h,fn:n[h]})}s(e("./traces/scatter")),s([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/selections"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),s([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(s(window.PlotlyLocales),delete window.PlotlyLocales),o.Icons=e("./fonts/ploticon");var v=e("./components/fx"),d=e("./plots/plots");o.Plots={resize:d.resize,graphJson:d.graphJson,sendDataToCloud:d.sendDataToCloud},o.Fx={hover:v.hover,unhover:v.unhover,loneHover:v.loneHover,loneUnhover:v.loneUnhover},o.Snapshot=e("./snapshot"),o.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":94,"./components/annotations3d":99,"./components/colorbar":109,"./components/colorscale":115,"./components/errorbars":131,"./components/fx":143,"./components/grid":147,"./components/images":152,"./components/legend":160,"./components/modebar":166,"./components/rangeselector":174,"./components/rangeslider":181,"./components/selections":191,"./components/shapes":206,"./components/sliders":211,"./components/updatemenus":217,"./fonts/ploticon":227,"./locale-en":271,"./locale-en-us":270,"./plot_api":275,"./plot_api/plot_schema":279,"./plots/plots":325,"./registry":327,"./snapshot":332,"./traces/scatter":379,"./version":400,"native-promise-only":54}],227:[function(e,i,o){i.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],228:[function(e,i,o){o.isLeftAnchor=function(s){return s.xanchor==="left"||s.xanchor==="auto"&&s.x<=1/3},o.isCenterAnchor=function(s){return s.xanchor==="center"||s.xanchor==="auto"&&s.x>1/3&&s.x<2/3},o.isRightAnchor=function(s){return s.xanchor==="right"||s.xanchor==="auto"&&s.x>=2/3},o.isTopAnchor=function(s){return s.yanchor==="top"||s.yanchor==="auto"&&s.y>=2/3},o.isMiddleAnchor=function(s){return s.yanchor==="middle"||s.yanchor==="auto"&&s.y>1/3&&s.y<2/3},o.isBottomAnchor=function(s){return s.yanchor==="bottom"||s.yanchor==="auto"&&s.y<=1/3}},{}],229:[function(e,i,o){var a=e("./mod"),s=a.mod,n=a.modHalf,l=Math.PI,u=2*l;function h(R){return R/180*l}function v(R){return R/l*180}function d(R){return Math.abs(R[1]-R[0])>u-1e-14}function p(R,S){return n(S-R,u)}function _(R,S){return Math.abs(p(R,S))}function b(R,S){if(d(S))return!0;var I,T;S[0]<S[1]?(I=S[0],T=S[1]):(I=S[1],T=S[0]),I=s(I,u),T=s(T,u),I>T&&(T+=u);var M=s(R,u),z=M+u;return M>=I&&M<=T||z>=I&&z<=T}function x(R,S,I,T){if(!b(S,T))return!1;var M,z;return I[0]<I[1]?(M=I[0],z=I[1]):(M=I[1],z=I[0]),R>=M&&R<=z}function E(R,S,I,T,M,z,U){M=M||0,z=z||0;var F=d([I,T]),V,j,H,Y,J;F?(V=0,j=l,H=u):I<T?(V=I,H=T):(V=T,H=I),R<S?(Y=R,J=S):(Y=S,J=R);function ne(X,re){return[X*Math.cos(re)+M,z-X*Math.sin(re)]}var q=Math.abs(H-V)<=l?0:1;function we(X,re,de){return"A"+[X,X]+" "+[0,q,de]+" "+ne(X,re)}var ee;return F?Y===null?ee="M"+ne(J,V)+we(J,j,0)+we(J,H,0)+"Z":ee="M"+ne(Y,V)+we(Y,j,0)+we(Y,H,0)+"ZM"+ne(J,V)+we(J,j,1)+we(J,H,1)+"Z":Y===null?(ee="M"+ne(J,V)+we(J,H,0),U&&(ee+="L0,0Z")):ee="M"+ne(Y,V)+"L"+ne(J,V)+we(J,H,0)+"L"+ne(Y,H)+we(Y,V,1)+"Z",ee}function A(R,S,I,T,M){return E(null,R,S,I,T,M,0)}function P(R,S,I,T,M){return E(null,R,S,I,T,M,1)}function D(R,S,I,T,M,z){return E(R,S,I,T,M,z,1)}i.exports={deg2rad:h,rad2deg:v,angleDelta:p,angleDist:_,isFullCircle:d,isAngleInsideSector:b,isPtInsideSector:x,pathArc:A,pathSector:P,pathAnnulus:D}},{"./mod":251}],230:[function(e,i,o){var a=Array.isArray,s=ArrayBuffer,n=DataView;function l(d){return s.isView(d)&&!(d instanceof n)}o.isTypedArray=l;function u(d){return a(d)||l(d)}o.isArrayOrTypedArray=u;function h(d){return!u(d[0])}o.isArray1D=h,o.ensureArray=function(d,p){return a(d)||(d=[]),d.length=p,d},o.concat=function(){var d=[],p=!0,_=0,b,x,E,A,P,D,R,S;for(E=0;E<arguments.length;E++)A=arguments[E],D=A.length,D&&(x?d.push(A):(x=A,P=D),a(A)?b=!1:(p=!1,_?b!==A.constructor&&(b=!1):b=A.constructor),_+=D);if(!_)return[];if(!d.length)return x;if(p)return x.concat.apply(x,d);if(b){for(R=new b(_),R.set(x),E=0;E<d.length;E++)A=d[E],R.set(A,P),P+=A.length;return R}for(R=new Array(_),S=0;S<x.length;S++)R[S]=x[S];for(E=0;E<d.length;E++){for(A=d[E],S=0;S<A.length;S++)R[P+S]=A[S];P+=S}return R},o.maxRowLength=function(d){return v(d,Math.max,0)},o.minRowLength=function(d){return v(d,Math.min,1/0)};function v(d,p,_){if(u(d))if(u(d[0])){for(var b=_,x=0;x<d.length;x++)b=p(b,d[x].length);return b}else return d.length;return 0}},{}],231:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../constants/numerical").BADNUM,n=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;i.exports=function(u){return typeof u=="string"&&(u=u.replace(n,"")),a(u)?Number(u):s}},{"../constants/numerical":224,"fast-isnumeric":17}],232:[function(e,i,o){i.exports=function(s){var n=s._fullLayout;n._glcanvas&&n._glcanvas.size()&&n._glcanvas.each(function(l){l.regl&&l.regl.clear({color:!0,depth:!0})})}},{}],233:[function(e,i,o){i.exports=function(s){s._responsiveChartHandler&&(window.removeEventListener("resize",s._responsiveChartHandler),delete s._responsiveChartHandler)}},{}],234:[function(e,i,o){var a=e("fast-isnumeric"),s=e("tinycolor2"),n=e("../plots/attributes"),l=e("../components/colorscale/scales"),u=e("../components/color"),h=e("../constants/interactions").DESELECTDIM,v=e("./nested_property"),d=e("./regex").counter,p=e("./mod").modHalf,_=e("./array").isArrayOrTypedArray;o.valObjectMeta={data_array:{coerceFunction:function(x,E,A){_(x)?E.set(x):A!==void 0&&E.set(A)}},enumerated:{coerceFunction:function(x,E,A,P){P.coerceNumber&&(x=+x),P.values.indexOf(x)===-1?E.set(A):E.set(x)},validateFunction:function(x,E){E.coerceNumber&&(x=+x);for(var A=E.values,P=0;P<A.length;P++){var D=String(A[P]);if(D.charAt(0)==="/"&&D.charAt(D.length-1)==="/"){var R=new RegExp(D.substr(1,D.length-2));if(R.test(x))return!0}else if(x===A[P])return!0}return!1}},boolean:{coerceFunction:function(x,E,A){x===!0||x===!1?E.set(x):E.set(A)}},number:{coerceFunction:function(x,E,A,P){!a(x)||P.min!==void 0&&x<P.min||P.max!==void 0&&x>P.max?E.set(A):E.set(+x)}},integer:{coerceFunction:function(x,E,A,P){x%1||!a(x)||P.min!==void 0&&x<P.min||P.max!==void 0&&x>P.max?E.set(A):E.set(+x)}},string:{coerceFunction:function(x,E,A,P){if(typeof x!="string"){var D=typeof x=="number";P.strict===!0||!D?E.set(A):E.set(String(x))}else P.noBlank&&!x?E.set(A):E.set(x)}},color:{coerceFunction:function(x,E,A){s(x).isValid()?E.set(x):E.set(A)}},colorlist:{coerceFunction:function(x,E,A){function P(D){return s(D).isValid()}!Array.isArray(x)||!x.length?E.set(A):x.every(P)?E.set(x):E.set(A)}},colorscale:{coerceFunction:function(x,E,A){E.set(l.get(x,A))}},angle:{coerceFunction:function(x,E,A){x==="auto"?E.set("auto"):a(x)?E.set(p(+x,360)):E.set(A)}},subplotid:{coerceFunction:function(x,E,A,P){var D=P.regex||d(A);if(typeof x=="string"&&D.test(x)){E.set(x);return}E.set(A)},validateFunction:function(x,E){var A=E.dflt;return x===A?!0:typeof x!="string"?!1:!!d(A).test(x)}},flaglist:{coerceFunction:function(x,E,A,P){if((P.extras||[]).indexOf(x)!==-1){E.set(x);return}if(typeof x!="string"){E.set(A);return}for(var D=x.split("+"),R=0;R<D.length;){var S=D[R];P.flags.indexOf(S)===-1||D.indexOf(S)<R?D.splice(R,1):R++}D.length?E.set(D.join("+")):E.set(A)}},any:{coerceFunction:function(x,E,A){x===void 0?E.set(A):E.set(x)}},info_array:{coerceFunction:function(x,E,A,P){function D(ne,q,we){var ee,X={set:function(re){ee=re}};return we===void 0&&(we=q.dflt),o.valObjectMeta[q.valType].coerceFunction(ne,X,we,q),ee}var R=P.dimensions===2||P.dimensions==="1-2"&&Array.isArray(x)&&Array.isArray(x[0]);if(!Array.isArray(x)){E.set(A);return}var S=P.items,I=[],T=Array.isArray(S),M=T&&R&&Array.isArray(S[0]),z=R&&T&&!M,U=T&&!z?S.length:x.length,F,V,j,H,Y,J;if(A=Array.isArray(A)?A:[],R)for(F=0;F<U;F++)for(I[F]=[],j=Array.isArray(x[F])?x[F]:[],z?Y=S.length:T?Y=S[F].length:Y=j.length,V=0;V<Y;V++)z?H=S[V]:T?H=S[F][V]:H=S,J=D(j[V],H,(A[F]||[])[V]),J!==void 0&&(I[F][V]=J);else for(F=0;F<U;F++)J=D(x[F],T?S[F]:S,A[F]),J!==void 0&&(I[F]=J);E.set(I)},validateFunction:function(x,E){if(!Array.isArray(x))return!1;var A=E.items,P=Array.isArray(A),D=E.dimensions===2;if(!E.freeLength&&x.length!==A.length)return!1;for(var R=0;R<x.length;R++)if(D){if(!Array.isArray(x[R])||!E.freeLength&&x[R].length!==A[R].length)return!1;for(var S=0;S<x[R].length;S++)if(!b(x[R][S],P?A[R][S]:A))return!1}else if(!b(x[R],P?A[R]:A))return!1;return!0}}},o.coerce=function(x,E,A,P,D){var R=v(A,P).get(),S=v(x,P),I=v(E,P),T=S.get(),M=E._template;if(T===void 0&&M&&(T=v(M,P).get(),M=0),D===void 0&&(D=R.dflt),R.arrayOk&&_(T))return I.set(T),T;var z=o.valObjectMeta[R.valType].coerceFunction;z(T,I,D,R);var U=I.get();return M&&U===D&&!b(T,R)&&(T=v(M,P).get(),z(T,I,D,R),U=I.get()),U},o.coerce2=function(x,E,A,P,D){var R=v(x,P),S=o.coerce(x,E,A,P,D),I=R.get();return I!=null?S:!1},o.coerceFont=function(x,E,A){var P={};return A=A||{},P.family=x(E+".family",A.family),P.size=x(E+".size",A.size),P.color=x(E+".color",A.color),P},o.coercePattern=function(x,E,A,P){var D=x(E+".shape");if(D){x(E+".solidity"),x(E+".size");var R=x(E+".fillmode"),S=R==="overlay";if(!P){var I=x(E+".bgcolor",S?A:void 0);x(E+".fgcolor",S?u.contrast(I):A)}x(E+".fgopacity",S?.5:1)}},o.coerceHoverinfo=function(x,E,A){var P=E._module.attributes,D=P.hoverinfo?P:n,R=D.hoverinfo,S;if(A._dataLength===1){var I=R.dflt==="all"?R.flags.slice():R.dflt.split("+");I.splice(I.indexOf("name"),1),S=I.join("+")}return o.coerce(x,E,D,"hoverinfo",S)},o.coerceSelectionMarkerOpacity=function(x,E){if(!!x.marker){var A=x.marker.opacity;if(A!==void 0){var P,D;!_(A)&&!x.selected&&!x.unselected&&(P=A,D=h*A),E("selected.marker.opacity",P),E("unselected.marker.opacity",D)}}};function b(x,E){var A=o.valObjectMeta[E.valType];if(E.arrayOk&&_(x))return!0;if(A.validateFunction)return A.validateFunction(x,E);var P={},D=P,R={set:function(S){D=S}};return A.coerceFunction(x,R,P,E),D!==P}o.validate=b},{"../components/color":103,"../components/colorscale/scales":118,"../constants/interactions":223,"../plots/attributes":287,"./array":230,"./mod":251,"./nested_property":252,"./regex":260,"fast-isnumeric":17,tinycolor2:68}],235:[function(e,i,o){var a=e("d3-time-format").timeFormat,s=e("fast-isnumeric"),n=e("./loggers"),l=e("./mod").mod,u=e("../constants/numerical"),h=u.BADNUM,v=u.ONEDAY,d=u.ONEHOUR,p=u.ONEMIN,_=u.ONESEC,b=u.EPOCHJD,x=e("../registry"),E=e("d3-time-format").utcFormat,A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,P=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,D=new Date().getFullYear()-70;function R(ee){return ee&&x.componentsRegistry.calendars&&typeof ee=="string"&&ee!=="gregorian"}o.dateTick0=function(ee,X){var re=S(ee,!!X);if(X<2)return re;var de=o.dateTime2ms(re,ee);return de+=v*(X-1),o.ms2DateTime(de,0,ee)};function S(ee,X){return R(ee)?X?x.getComponentMethod("calendars","CANONICAL_SUNDAY")[ee]:x.getComponentMethod("calendars","CANONICAL_TICK")[ee]:X?"2000-01-02":"2000-01-01"}o.dfltRange=function(ee){return R(ee)?x.getComponentMethod("calendars","DFLTRANGE")[ee]:["2000-01-01","2001-01-01"]},o.isJSDate=function(ee){return typeof ee=="object"&&ee!==null&&typeof ee.getTime=="function"};var I,T;o.dateTime2ms=function(ee,X){if(o.isJSDate(ee)){var re=ee.getTimezoneOffset()*p,de=(ee.getUTCMinutes()-ee.getMinutes())*p+(ee.getUTCSeconds()-ee.getSeconds())*_+(ee.getUTCMilliseconds()-ee.getMilliseconds());if(de){var me=3*p;re=re-me/2+l(de-re+me/2,me)}return ee=Number(ee)-re,ee>=I&&ee<=T?ee:h}if(typeof ee!="string"&&typeof ee!="number")return h;ee=String(ee);var xe=R(X),He=ee.charAt(0);xe&&(He==="G"||He==="g")&&(ee=ee.substr(1),X="");var Re=xe&&X.substr(0,7)==="chinese",Ee=ee.match(Re?P:A);if(!Ee)return h;var ke=Ee[1],$=Ee[3]||"1",le=Number(Ee[5]||1),K=Number(Ee[7]||0),te=Number(Ee[9]||0),ie=Number(Ee[11]||0);if(xe){if(ke.length===2)return h;ke=Number(ke);var ce;try{var ae=x.getComponentMethod("calendars","getCal")(X);if(Re){var ve=$.charAt($.length-1)==="i";$=parseInt($,10),ce=ae.newDate(ke,ae.toMonthIndex(ke,$,ve),le)}else ce=ae.newDate(ke,Number($),le)}catch{return h}return ce?(ce.toJD()-b)*v+K*d+te*p+ie*_:h}ke.length===2?ke=(Number(ke)+2e3-D)%100+D:ke=Number(ke),$-=1;var pe=new Date(Date.UTC(2e3,$,le,K,te));return pe.setUTCFullYear(ke),pe.getUTCMonth()!==$||pe.getUTCDate()!==le?h:pe.getTime()+ie*_},I=o.MIN_MS=o.dateTime2ms("-9999"),T=o.MAX_MS=o.dateTime2ms("9999-12-31 23:59:59.9999"),o.isDateTime=function(ee,X){return o.dateTime2ms(ee,X)!==h};function M(ee,X){return String(ee+Math.pow(10,X)).substr(1)}var z=90*v,U=3*d,F=5*p;o.ms2DateTime=function(ee,X,re){if(typeof ee!="number"||!(ee>=I&&ee<=T))return h;X||(X=0);var de=Math.floor(l(ee+.05,1)*10),me=Math.round(ee-de/10),xe,He,Re,Ee,ke,$;if(R(re)){var le=Math.floor(me/v)+b,K=Math.floor(l(ee,v));try{xe=x.getComponentMethod("calendars","getCal")(re).fromJD(le).formatDate("yyyy-mm-dd")}catch{xe=E("G%Y-%m-%d")(new Date(me))}if(xe.charAt(0)==="-")for(;xe.length<11;)xe="-0"+xe.substr(1);else for(;xe.length<10;)xe="0"+xe;He=X<z?Math.floor(K/d):0,Re=X<z?Math.floor(K%d/p):0,Ee=X<U?Math.floor(K%p/_):0,ke=X<F?K%_*10+de:0}else $=new Date(me),xe=E("%Y-%m-%d")($),He=X<z?$.getUTCHours():0,Re=X<z?$.getUTCMinutes():0,Ee=X<U?$.getUTCSeconds():0,ke=X<F?$.getUTCMilliseconds()*10+de:0;return V(xe,He,Re,Ee,ke)},o.ms2DateTimeLocal=function(ee){if(!(ee>=I+v&&ee<=T-v))return h;var X=Math.floor(l(ee+.05,1)*10),re=new Date(Math.round(ee-X/10)),de=a("%Y-%m-%d")(re),me=re.getHours(),xe=re.getMinutes(),He=re.getSeconds(),Re=re.getUTCMilliseconds()*10+X;return V(de,me,xe,He,Re)};function V(ee,X,re,de,me){if((X||re||de||me)&&(ee+=" "+M(X,2)+":"+M(re,2),(de||me)&&(ee+=":"+M(de,2),me))){for(var xe=4;me%10===0;)xe-=1,me/=10;ee+="."+M(me,xe)}return ee}o.cleanDate=function(ee,X,re){if(ee===h)return X;if(o.isJSDate(ee)||typeof ee=="number"&&isFinite(ee)){if(R(re))return n.error("JS Dates and milliseconds are incompatible with world calendars",ee),X;if(ee=o.ms2DateTimeLocal(+ee),!ee&&X!==void 0)return X}else if(!o.isDateTime(ee,re))return n.error("unrecognized date",ee),X;return ee};var j=/%\d?f/g,H=/%h/g,Y={1:"1",2:"1",3:"2",4:"2"};function J(ee,X,re,de){ee=ee.replace(j,function(xe){var He=Math.min(+xe.charAt(1)||6,6),Re=(X/1e3%1+2).toFixed(He).substr(2).replace(/0+$/,"")||"0";return Re});var me=new Date(Math.floor(X+.05));if(ee=ee.replace(H,function(){return Y[re("%q")(me)]}),R(de))try{ee=x.getComponentMethod("calendars","worldCalFmt")(ee,X,de)}catch{return"Invalid"}return re(ee)(me)}var ne=[59,59.9,59.99,59.999,59.9999];function q(ee,X){var re=l(ee+.05,v),de=M(Math.floor(re/d),2)+":"+M(l(Math.floor(re/p),60),2);if(X!=="M"){s(X)||(X=0);var me=Math.min(l(ee/_,60),ne[X]),xe=(100+me).toFixed(X).substr(1);X>0&&(xe=xe.replace(/0+$/,"").replace(/[\.]$/,"")),de+=":"+xe}return de}o.formatDate=function(ee,X,re,de,me,xe){if(me=R(me)&&me,!X)if(re==="y")X=xe.year;else if(re==="m")X=xe.month;else if(re==="d")X=xe.dayMonth+`
`+xe.year;else return q(ee,re)+`
`+J(xe.dayMonthYear,ee,de,me);return J(X,ee,de,me)};var we=3*v;o.incrementMonth=function(ee,X,re){re=R(re)&&re;var de=l(ee,v);if(ee=Math.round(ee-de),re)try{var me=Math.round(ee/v)+b,xe=x.getComponentMethod("calendars","getCal")(re),He=xe.fromJD(me);return X%12?xe.add(He,X,"m"):xe.add(He,X/12,"y"),(He.toJD()-b)*v+de}catch{n.error("invalid ms "+ee+" in calendar "+re)}var Re=new Date(ee+we);return Re.setUTCMonth(Re.getUTCMonth()+X)+de-we},o.findExactDates=function(ee,X){for(var re=0,de=0,me=0,xe=0,He,Re,Ee=R(X)&&x.getComponentMethod("calendars","getCal")(X),ke=0;ke<ee.length;ke++){if(Re=ee[ke],!s(Re)){xe++;continue}if(!(Re%v))if(Ee)try{He=Ee.fromJD(Re/v+b),He.day()===1?He.month()===1?re++:de++:me++}catch{}else He=new Date(Re),He.getUTCDate()===1?He.getUTCMonth()===0?re++:de++:me++}de+=re,me+=de;var $=ee.length-xe;return{exactYears:re/$,exactMonths:de/$,exactDays:me/$}}},{"../constants/numerical":224,"../registry":327,"./loggers":248,"./mod":251,"d3-time-format":14,"fast-isnumeric":17}],236:[function(e,i,o){var a=e("@plotly/d3"),s=e("./loggers"),n=e("./matrix"),l=e("gl-mat4");function u(D){var R;if(typeof D=="string"){if(R=document.getElementById(D),R===null)throw new Error("No DOM element with id '"+D+"' exists on the page.");return R}else if(D==null)throw new Error("DOM element provided is null or undefined");return D}function h(D){var R=a.select(D);return R.node()instanceof HTMLElement&&R.size()&&R.classed("js-plotly-plot")}function v(D){var R=D&&D.parentNode;R&&R.removeChild(D)}function d(D,R){p("global",D,R)}function p(D,R,S){var I="plotly.js-style-"+D,T=document.getElementById(I);T||(T=document.createElement("style"),T.setAttribute("id",I),T.appendChild(document.createTextNode("")),document.head.appendChild(T));var M=T.sheet;M.insertRule?M.insertRule(R+"{"+S+"}",0):M.addRule?M.addRule(R,S,0):s.warn("addStyleRule failed")}function _(D){var R="plotly.js-style-"+D,S=document.getElementById(R);S&&v(S)}function b(D){var R=E(D),S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return R.forEach(function(I){var T=x(I);if(T){var M=n.convertCssMatrix(T);S=l.multiply(S,S,M)}}),S}function x(D){var R=window.getComputedStyle(D,null),S=R.getPropertyValue("-webkit-transform")||R.getPropertyValue("-moz-transform")||R.getPropertyValue("-ms-transform")||R.getPropertyValue("-o-transform")||R.getPropertyValue("transform");return S==="none"?null:S.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(I){return+I})}function E(D){for(var R=[];A(D);)R.push(D),D=D.parentNode;return R}function A(D){return D&&(D instanceof Element||D instanceof HTMLElement)}function P(D,R){return D&&R&&D.x===R.x&&D.y===R.y&&D.top===R.top&&D.left===R.left&&D.right===R.right&&D.bottom===R.bottom}i.exports={getGraphDiv:u,isPlotDiv:h,removeElement:v,addStyleRule:d,addRelatedStyleRule:p,deleteRelatedStyleRule:_,getFullTransformMatrix:b,getElementTransformMatrix:x,getElementAndAncestors:E,equalDomRects:P}},{"./loggers":248,"./matrix":250,"@plotly/d3":11,"gl-mat4":33}],237:[function(e,i,o){var a=e("events").EventEmitter,s={init:function(n){if(n._ev instanceof a)return n;var l=new a,u=new a;return n._ev=l,n._internalEv=u,n.on=l.on.bind(l),n.once=l.once.bind(l),n.removeListener=l.removeListener.bind(l),n.removeAllListeners=l.removeAllListeners.bind(l),n._internalOn=u.on.bind(u),n._internalOnce=u.once.bind(u),n._removeInternalListener=u.removeListener.bind(u),n._removeAllInternalListeners=u.removeAllListeners.bind(u),n.emit=function(h,v){typeof jQuery<"u"&&jQuery(n).trigger(h,v),l.emit(h,v),u.emit(h,v)},n},triggerHandler:function(n,l,u){var h,v;typeof jQuery<"u"&&(h=jQuery(n).triggerHandler(l,u));var d=n._ev;if(!d)return h;var p=d._events[l];if(!p)return h;function _(x){if(x.listener){if(d.removeListener(l,x.listener),!x.fired)return x.fired=!0,x.listener.apply(d,[u])}else return x.apply(d,[u])}p=Array.isArray(p)?p:[p];var b;for(b=0;b<p.length-1;b++)_(p[b]);return v=_(p[b]),h!==void 0?h:v},purge:function(n){return delete n._ev,delete n.on,delete n.once,delete n.removeListener,delete n.removeAllListeners,delete n.emit,delete n._ev,delete n._internalEv,delete n._internalOn,delete n._internalOnce,delete n._removeInternalListener,delete n._removeAllInternalListeners,n}};i.exports=s},{events:12}],238:[function(e,i,o){var a=e("./is_plain_object.js"),s=Array.isArray;function n(u,h){var v,d;for(v=0;v<u.length;v++){if(d=u[v],d!==null&&typeof d=="object")return!1;d!==void 0&&(h[v]=d)}return!0}o.extendFlat=function(){return l(arguments,!1,!1,!1)},o.extendDeep=function(){return l(arguments,!0,!1,!1)},o.extendDeepAll=function(){return l(arguments,!0,!0,!1)},o.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)};function l(u,h,v,d){var p=u[0],_=u.length,b,x,E,A,P,D,R;if(_===2&&s(p)&&s(u[1])&&p.length===0){if(R=n(u[1],p),R)return p;p.splice(0,p.length)}for(var S=1;S<_;S++){b=u[S];for(x in b)E=p[x],A=b[x],d&&s(A)?p[x]=A:h&&A&&(a(A)||(P=s(A)))?(P?(P=!1,D=E&&s(E)?E:[]):D=E&&a(E)?E:{},p[x]=l([D,A],h,v,d)):(typeof A<"u"||v)&&(p[x]=A)}return p}},{"./is_plain_object.js":245}],239:[function(e,i,o){i.exports=function(s){for(var n={},l=[],u=0,h=0;h<s.length;h++){var v=s[h];n[v]!==1&&(n[v]=1,l[u++]=v)}return l}},{}],240:[function(e,i,o){i.exports=function(u){for(var h=n(u)?s:a,v=[],d=0;d<u.length;d++){var p=u[d];h(p)&&v.push(p)}return v};function a(l){return l.visible===!0}function s(l){var u=l[0].trace;return u.visible===!0&&u._length!==0}function n(l){return Array.isArray(l)&&Array.isArray(l[0])&&l[0][0]&&l[0][0].trace}},{}],241:[function(e,i,o){var a=e("./mod").mod;o.segmentsIntersect=s;function s(v,d,p,_,b,x,E,A){var P=p-v,D=b-v,R=E-b,S=_-d,I=x-d,T=A-x,M=P*T-R*S;if(M===0)return null;var z=(D*T-R*I)/M,U=(D*S-P*I)/M;return U<0||U>1||z<0||z>1?null:{x:v+P*z,y:d+S*z}}o.segmentDistance=function(d,p,_,b,x,E,A,P){if(s(d,p,_,b,x,E,A,P))return 0;var D=_-d,R=b-p,S=A-x,I=P-E,T=D*D+R*R,M=S*S+I*I,z=Math.min(n(D,R,T,x-d,E-p),n(D,R,T,A-d,P-p),n(S,I,M,d-x,p-E),n(S,I,M,_-x,b-E));return Math.sqrt(z)};function n(v,d,p,_,b){var x=_*v+b*d;if(x<0)return _*_+b*b;if(x>p){var E=_-v,A=b-d;return E*E+A*A}else{var P=_*d-b*v;return P*P/p}}var l,u,h;o.getTextLocation=function(d,p,_,b){if((d!==u||b!==h)&&(l={},u=d,h=b),l[_])return l[_];var x=d.getPointAtLength(a(_-b/2,p)),E=d.getPointAtLength(a(_+b/2,p)),A=Math.atan((E.y-x.y)/(E.x-x.x)),P=d.getPointAtLength(a(_,p)),D=(P.x*4+x.x+E.x)/6,R=(P.y*4+x.y+E.y)/6,S={x:D,y:R,theta:A};return l[_]=S,S},o.clearLocationCache=function(){u=null},o.getVisibleSegment=function(d,p,_){var b=p.left,x=p.right,E=p.top,A=p.bottom,P=0,D=d.getTotalLength(),R=D,S,I;function T(z){var U=d.getPointAtLength(z);z===0?S=U:z===D&&(I=U);var F=U.x<b?b-U.x:U.x>x?U.x-x:0,V=U.y<E?E-U.y:U.y>A?U.y-A:0;return Math.sqrt(F*F+V*V)}for(var M=T(P);M;){if(P+=M+_,P>R)return;M=T(P)}for(M=T(R);M;){if(R-=M+_,P>R)return;M=T(R)}return{min:P,max:R,len:R-P,total:D,isClosed:P===0&&R===D&&Math.abs(S.x-I.x)<.1&&Math.abs(S.y-I.y)<.1}},o.findPointOnPath=function(d,p,_,b){b=b||{};for(var x=b.pathLength||d.getTotalLength(),E=b.tolerance||.001,A=b.iterationLimit||30,P=d.getPointAtLength(0)[_]>d.getPointAtLength(x)[_]?-1:1,D=0,R=0,S=x,I,T,M;D<A;){if(I=(R+S)/2,T=d.getPointAtLength(I),M=T[_]-p,Math.abs(M)<E)return T;P*M>0?S=I:R=I,D++}return T}},{"./mod":251}],242:[function(e,i,o){i.exports=function(s){return s}},{}],243:[function(e,i,o){i.exports=function(s,n){if(!n)return s;var l=1/Math.abs(n),u=l>1?(l*s+l*n)/l:s+n,h=String(u).length;if(h>16){var v=String(n).length,d=String(s).length;if(h>=d+v){var p=parseFloat(u).toPrecision(12);p.indexOf("e+")===-1&&(u=+p)}}return u}},{}],244:[function(e,i,o){var a=e("@plotly/d3"),s=e("d3-time-format").utcFormat,n=e("d3-format").format,l=e("fast-isnumeric"),u=e("../constants/numerical"),h=u.FP_SAFE,v=-h,d=u.BADNUM,p=i.exports={};p.adjustFormat=function($){return!$||/^\d[.]\df/.test($)||/[.]\d%/.test($)?$:$==="0.f"?"~f":/^\d%/.test($)?"~%":/^\ds/.test($)?"~s":!/^[~,.0$]/.test($)&&/[&fps]/.test($)?"~"+$:$};var _={};p.warnBadFormat=function(ke){var $=String(ke);_[$]||(_[$]=1,p.warn('encountered bad format: "'+$+'"'))},p.noFormat=function(ke){return String(ke)},p.numberFormat=function(ke){var $;try{$=n(p.adjustFormat(ke))}catch{return p.warnBadFormat(ke),p.noFormat}return $},p.nestedProperty=e("./nested_property"),p.keyedContainer=e("./keyed_container"),p.relativeAttr=e("./relative_attr"),p.isPlainObject=e("./is_plain_object"),p.toLogRange=e("./to_log_range"),p.relinkPrivateKeys=e("./relink_private");var b=e("./array");p.isTypedArray=b.isTypedArray,p.isArrayOrTypedArray=b.isArrayOrTypedArray,p.isArray1D=b.isArray1D,p.ensureArray=b.ensureArray,p.concat=b.concat,p.maxRowLength=b.maxRowLength,p.minRowLength=b.minRowLength;var x=e("./mod");p.mod=x.mod,p.modHalf=x.modHalf;var E=e("./coerce");p.valObjectMeta=E.valObjectMeta,p.coerce=E.coerce,p.coerce2=E.coerce2,p.coerceFont=E.coerceFont,p.coercePattern=E.coercePattern,p.coerceHoverinfo=E.coerceHoverinfo,p.coerceSelectionMarkerOpacity=E.coerceSelectionMarkerOpacity,p.validate=E.validate;var A=e("./dates");p.dateTime2ms=A.dateTime2ms,p.isDateTime=A.isDateTime,p.ms2DateTime=A.ms2DateTime,p.ms2DateTimeLocal=A.ms2DateTimeLocal,p.cleanDate=A.cleanDate,p.isJSDate=A.isJSDate,p.formatDate=A.formatDate,p.incrementMonth=A.incrementMonth,p.dateTick0=A.dateTick0,p.dfltRange=A.dfltRange,p.findExactDates=A.findExactDates,p.MIN_MS=A.MIN_MS,p.MAX_MS=A.MAX_MS;var P=e("./search");p.findBin=P.findBin,p.sorterAsc=P.sorterAsc,p.sorterDes=P.sorterDes,p.distinctVals=P.distinctVals,p.roundUp=P.roundUp,p.sort=P.sort,p.findIndexOfMin=P.findIndexOfMin,p.sortObjectKeys=e("./sort_object_keys");var D=e("./stats");p.aggNums=D.aggNums,p.len=D.len,p.mean=D.mean,p.median=D.median,p.midRange=D.midRange,p.variance=D.variance,p.stdev=D.stdev,p.interp=D.interp;var R=e("./matrix");p.init2dArray=R.init2dArray,p.transposeRagged=R.transposeRagged,p.dot=R.dot,p.translationMatrix=R.translationMatrix,p.rotationMatrix=R.rotationMatrix,p.rotationXYMatrix=R.rotationXYMatrix,p.apply3DTransform=R.apply3DTransform,p.apply2DTransform=R.apply2DTransform,p.apply2DTransform2=R.apply2DTransform2,p.convertCssMatrix=R.convertCssMatrix,p.inverseTransformMatrix=R.inverseTransformMatrix;var S=e("./angles");p.deg2rad=S.deg2rad,p.rad2deg=S.rad2deg,p.angleDelta=S.angleDelta,p.angleDist=S.angleDist,p.isFullCircle=S.isFullCircle,p.isAngleInsideSector=S.isAngleInsideSector,p.isPtInsideSector=S.isPtInsideSector,p.pathArc=S.pathArc,p.pathSector=S.pathSector,p.pathAnnulus=S.pathAnnulus;var I=e("./anchor_utils");p.isLeftAnchor=I.isLeftAnchor,p.isCenterAnchor=I.isCenterAnchor,p.isRightAnchor=I.isRightAnchor,p.isTopAnchor=I.isTopAnchor,p.isMiddleAnchor=I.isMiddleAnchor,p.isBottomAnchor=I.isBottomAnchor;var T=e("./geometry2d");p.segmentsIntersect=T.segmentsIntersect,p.segmentDistance=T.segmentDistance,p.getTextLocation=T.getTextLocation,p.clearLocationCache=T.clearLocationCache,p.getVisibleSegment=T.getVisibleSegment,p.findPointOnPath=T.findPointOnPath;var M=e("./extend");p.extendFlat=M.extendFlat,p.extendDeep=M.extendDeep,p.extendDeepAll=M.extendDeepAll,p.extendDeepNoArrays=M.extendDeepNoArrays;var z=e("./loggers");p.log=z.log,p.warn=z.warn,p.error=z.error;var U=e("./regex");p.counterRegex=U.counter;var F=e("./throttle");p.throttle=F.throttle,p.throttleDone=F.done,p.clearThrottle=F.clear;var V=e("./dom");p.getGraphDiv=V.getGraphDiv,p.isPlotDiv=V.isPlotDiv,p.removeElement=V.removeElement,p.addStyleRule=V.addStyleRule,p.addRelatedStyleRule=V.addRelatedStyleRule,p.deleteRelatedStyleRule=V.deleteRelatedStyleRule,p.getFullTransformMatrix=V.getFullTransformMatrix,p.getElementTransformMatrix=V.getElementTransformMatrix,p.getElementAndAncestors=V.getElementAndAncestors,p.equalDomRects=V.equalDomRects,p.clearResponsive=e("./clear_responsive"),p.preserveDrawingBuffer=e("./preserve_drawing_buffer"),p.makeTraceGroups=e("./make_trace_groups"),p._=e("./localize"),p.notifier=e("./notifier"),p.filterUnique=e("./filter_unique"),p.filterVisible=e("./filter_visible"),p.pushUnique=e("./push_unique"),p.increment=e("./increment"),p.cleanNumber=e("./clean_number"),p.ensureNumber=function($){return l($)?($=Number($),$>h||$<v?d:$):d},p.isIndex=function(ke,$){return $!==void 0&&ke>=$?!1:l(ke)&&ke>=0&&ke%1===0},p.noop=e("./noop"),p.identity=e("./identity"),p.repeat=function(ke,$){for(var le=new Array($),K=0;K<$;K++)le[K]=ke;return le},p.swapAttrs=function(ke,$,le,K){le||(le="x"),K||(K="y");for(var te=0;te<$.length;te++){var ie=$[te],ce=p.nestedProperty(ke,ie.replace("?",le)),ae=p.nestedProperty(ke,ie.replace("?",K)),ve=ce.get();ce.set(ae.get()),ae.set(ve)}},p.raiseToTop=function($){$.parentNode.appendChild($)},p.cancelTransition=function(ke){return ke.transition().duration(0)},p.constrain=function(ke,$,le){return $>le?Math.max(le,Math.min($,ke)):Math.max($,Math.min(le,ke))},p.bBoxIntersect=function(ke,$,le){return le=le||0,ke.left<=$.right+le&&$.left<=ke.right+le&&ke.top<=$.bottom+le&&$.top<=ke.bottom+le},p.simpleMap=function(ke,$,le,K,te){for(var ie=ke.length,ce=new Array(ie),ae=0;ae<ie;ae++)ce[ae]=$(ke[ae],le,K,te);return ce},p.randstr=function ke($,le,K,te){if(K||(K=16),le===void 0&&(le=24),le<=0)return"0";var ie=Math.log(Math.pow(2,le))/Math.log(K),ce="",ae,ve,pe;for(ae=2;ie===1/0;ae*=2)ie=Math.log(Math.pow(2,le/ae))/Math.log(K)*ae;var he=ie-Math.floor(ie);for(ae=0;ae<Math.floor(ie);ae++)pe=Math.floor(Math.random()*K).toString(K),ce=pe+ce;he&&(ve=Math.pow(K,he),pe=Math.floor(Math.random()*ve).toString(K),ce=pe+ce);var ye=parseInt(ce,K);return $&&$[ce]||ye!==1/0&&ye>=Math.pow(2,le)?te>10?(p.warn("randstr failed uniqueness"),ce):ke($,le,K,(te||0)+1):ce},p.OptionControl=function(ke,$){ke||(ke={}),$||($="opt");var le={};return le.optionList=[],le._newoption=function(K){K[$]=ke,le[K.name]=K,le.optionList.push(K)},le["_"+$]=ke,le},p.smooth=function(ke,$){if($=Math.round($)||0,$<2)return ke;var le=ke.length,K=2*le,te=2*$-1,ie=new Array(te),ce=new Array(le),ae,ve,pe,he;for(ae=0;ae<te;ae++)ie[ae]=(1-Math.cos(Math.PI*(ae+1)/$))/(2*$);for(ae=0;ae<le;ae++){for(he=0,ve=0;ve<te;ve++)pe=ae+ve+1-$,pe<-le?pe-=K*Math.round(pe/K):pe>=K&&(pe-=K*Math.floor(pe/K)),pe<0?pe=-1-pe:pe>=le&&(pe=K-1-pe),he+=ke[pe]*ie[ve];ce[ae]=he}return ce},p.syncOrAsync=function(ke,$,le){var K,te;function ie(){return p.syncOrAsync(ke,$,le)}for(;ke.length;)if(te=ke.splice(0,1)[0],K=te($),K&&K.then)return K.then(ie);return le&&le($)},p.stripTrailingSlash=function(ke){return ke.substr(-1)==="/"?ke.substr(0,ke.length-1):ke},p.noneOrAll=function(ke,$,le){if(!!ke){var K=!1,te=!0,ie,ce;for(ie=0;ie<le.length;ie++)ce=ke[le[ie]],ce!=null?K=!0:te=!1;if(K&&!te)for(ie=0;ie<le.length;ie++)ke[le[ie]]=$[le[ie]]}},p.mergeArray=function(ke,$,le,K){var te=typeof K=="function";if(p.isArrayOrTypedArray(ke))for(var ie=Math.min(ke.length,$.length),ce=0;ce<ie;ce++){var ae=ke[ce];$[ce][le]=te?K(ae):ae}},p.mergeArrayCastPositive=function(ke,$,le){return p.mergeArray(ke,$,le,function(K){var te=+K;return isFinite(te)&&te>0?te:0})},p.fillArray=function(ke,$,le,K){if(K=K||p.identity,p.isArrayOrTypedArray(ke))for(var te=0;te<$.length;te++)$[te][le]=K(ke[te])},p.castOption=function(ke,$,le,K){K=K||p.identity;var te=p.nestedProperty(ke,le).get();return p.isArrayOrTypedArray(te)?Array.isArray($)&&p.isArrayOrTypedArray(te[$[0]])?K(te[$[0]][$[1]]):K(te[$]):te},p.extractOption=function(ke,$,le,K){if(le in ke)return ke[le];var te=p.nestedProperty($,K).get();if(!Array.isArray(te))return te};function j(ke){var $={};for(var le in ke)for(var K=ke[le],te=0;te<K.length;te++)$[K[te]]=+le;return $}p.tagSelected=function(ke,$,le){var K=$.selectedpoints,te=$._indexToPoints,ie;te&&(ie=j(te));function ce(ye){return ye!==void 0&&ye<ke.length}for(var ae=0;ae<K.length;ae++){var ve=K[ae];if(p.isIndex(ve)||p.isArrayOrTypedArray(ve)&&p.isIndex(ve[0])&&p.isIndex(ve[1])){var pe=ie?ie[ve]:ve,he=le?le[pe]:pe;ce(he)&&(ke[he].selected=1)}}},p.selIndices2selPoints=function(ke){var $=ke.selectedpoints,le=ke._indexToPoints;if(le){for(var K=j(le),te=[],ie=0;ie<$.length;ie++){var ce=$[ie];if(p.isIndex(ce)){var ae=K[ce];p.isIndex(ae)&&te.push(ae)}}return te}else return $},p.getTargetArray=function(ke,$){var le=$.target;if(typeof le=="string"&&le){var K=p.nestedProperty(ke,le).get();return Array.isArray(K)?K:!1}else if(Array.isArray(le))return le;return!1},p.minExtend=function(ke,$){var le={};typeof $!="object"&&($={});var K=3,te=Object.keys(ke),ie,ce,ae;for(ie=0;ie<te.length;ie++)ce=te[ie],ae=ke[ce],!(ce.charAt(0)==="_"||typeof ae=="function")&&(ce==="module"?le[ce]=ae:Array.isArray(ae)?ce==="colorscale"?le[ce]=ae.slice():le[ce]=ae.slice(0,K):p.isTypedArray(ae)?le[ce]=ae.subarray(0,K):ae&&typeof ae=="object"?le[ce]=p.minExtend(ke[ce],$[ce]):le[ce]=ae);for(te=Object.keys($),ie=0;ie<te.length;ie++)ce=te[ie],ae=$[ce],(typeof ae!="object"||!(ce in le)||typeof le[ce]!="object")&&(le[ce]=ae);return le},p.titleCase=function(ke){return ke.charAt(0).toUpperCase()+ke.substr(1)},p.containsAny=function(ke,$){for(var le=0;le<$.length;le++)if(ke.indexOf($[le])!==-1)return!0;return!1},p.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var H=/Version\/[\d\.]+.*Safari/;p.isSafari=function(){return H.test(window.navigator.userAgent)};var Y=/iPad|iPhone|iPod/;p.isIOS=function(){return Y.test(window.navigator.userAgent)};var J=/Firefox\/(\d+)\.\d+/;p.getFirefoxVersion=function(){var ke=J.exec(window.navigator.userAgent);if(ke&&ke.length===2){var $=parseInt(ke[1]);if(!isNaN($))return $}return null},p.isD3Selection=function(ke){return ke instanceof a.selection},p.ensureSingle=function(ke,$,le,K){var te=ke.select($+(le?"."+le:""));if(te.size())return te;var ie=ke.append($);return le&&ie.classed(le,!0),K&&ie.call(K),ie},p.ensureSingleById=function(ke,$,le,K){var te=ke.select($+"#"+le);if(te.size())return te;var ie=ke.append($).attr("id",le);return K&&ie.call(K),ie},p.objectFromPath=function(ke,$){for(var le=ke.split("."),K,te=K={},ie=0;ie<le.length;ie++){var ce=le[ie],ae=null,ve=le[ie].match(/(.*)\[([0-9]+)\]/);ve?(ce=ve[1],ae=ve[2],K=K[ce]=[],ie===le.length-1?K[ae]=$:K[ae]={},K=K[ae]):(ie===le.length-1?K[ce]=$:K[ce]={},K=K[ce])}return te};var ne=/^([^\[\.]+)\.(.+)?/,q=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;p.expandObjectPaths=function(ke){var $,le,K,te,ie,ce,ae;if(typeof ke=="object"&&!Array.isArray(ke))for(le in ke)ke.hasOwnProperty(le)&&(($=le.match(ne))?(te=ke[le],K=$[1],delete ke[le],ke[K]=p.extendDeepNoArrays(ke[K]||{},p.objectFromPath(le,p.expandObjectPaths(te))[K])):($=le.match(q))?(te=ke[le],K=$[1],ie=parseInt($[2]),delete ke[le],ke[K]=ke[K]||[],$[3]==="."?(ae=$[4],ce=ke[K][ie]=ke[K][ie]||{},p.extendDeepNoArrays(ce,p.objectFromPath(ae,p.expandObjectPaths(te)))):ke[K][ie]=p.expandObjectPaths(te)):ke[le]=p.expandObjectPaths(ke[le]));return ke},p.numSeparate=function(ke,$,le){if(le||(le=!1),typeof $!="string"||$.length===0)throw new Error("Separator string required for formatting!");typeof ke=="number"&&(ke=String(ke));var K=/(\d+)(\d{3})/,te=$.charAt(0),ie=$.charAt(1),ce=ke.split("."),ae=ce[0],ve=ce.length>1?te+ce[1]:"";if(ie&&(ce.length>1||ae.length>4||le))for(;K.test(ae);)ae=ae.replace(K,"$1"+ie+"$2");return ae+ve},p.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var we=/^\w*$/;p.templateString=function(ke,$){var le={};return ke.replace(p.TEMPLATE_STRING_REGEX,function(K,te){var ie;return we.test(te)?ie=$[te]:(le[te]=le[te]||p.nestedProperty($,te).get,ie=le[te]()),p.isValidTextValue(ie)?ie:""})};var ee={max:10,count:0,name:"hovertemplate"};p.hovertemplateString=function(){return de.apply(ee,arguments)};var X={max:10,count:0,name:"texttemplate"};p.texttemplateString=function(){return de.apply(X,arguments)};var re=/^[:|\|]/;function de(ke,$,le){var K=this,te=arguments;$||($={});var ie={};return ke.replace(p.TEMPLATE_STRING_REGEX,function(ce,ae,ve){var pe=ae==="xother"||ae==="yother",he=ae==="_xother"||ae==="_yother",ye=ae==="_xother_"||ae==="_yother_",_e=ae==="xother_"||ae==="yother_",je=pe||he||_e||ye,Je=ae;(he||ye)&&(Je=Je.substring(1)),(_e||ye)&&(Je=Je.substring(0,Je.length-1));var nt;if(je){if(nt=$[Je],nt===void 0)return""}else{var at,Fe;for(Fe=3;Fe<te.length;Fe++)if(at=te[Fe],!!at){if(at.hasOwnProperty(Je)){nt=at[Je];break}if(we.test(Je)||(nt=p.nestedProperty(at,Je).get(),nt=ie[Je]||p.nestedProperty(at,Je).get(),nt&&(ie[Je]=nt)),nt!==void 0)break}}if(nt===void 0&&K)return K.count<K.max&&(p.warn("Variable '"+Je+"' in "+K.name+" could not be found!"),nt=ce),K.count===K.max&&p.warn("Too many "+K.name+" warnings - additional warnings will be suppressed"),K.count++,ce;if(ve){var Ie;if(ve[0]===":"&&(Ie=le?le.numberFormat:p.numberFormat,nt=Ie(ve.replace(re,""))(nt)),ve[0]==="|"){Ie=le?le.timeFormat:s;var Ke=p.dateTime2ms(nt);nt=p.formatDate(Ke,ve.replace(re,""),!1,Ie)}}else{var Qe=Je+"Label";$.hasOwnProperty(Qe)&&(nt=$[Qe])}return je&&(nt="("+nt+")",(he||ye)&&(nt=" "+nt),(_e||ye)&&(nt=nt+" ")),nt})}var me=48,xe=57;p.subplotSort=function(ke,$){for(var le=Math.min(ke.length,$.length)+1,K=0,te=0,ie=0;ie<le;ie++){var ce=ke.charCodeAt(ie)||0,ae=$.charCodeAt(ie)||0,ve=ce>=me&&ce<=xe,pe=ae>=me&&ae<=xe;if(ve&&(K=10*K+ce-me),pe&&(te=10*te+ae-me),!ve||!pe){if(K!==te)return K-te;if(ce!==ae)return ce-ae}}return te-K};var He=2e9;p.seedPseudoRandom=function(){He=2e9},p.pseudoRandom=function(){var ke=He;return He=(69069*He+1)%4294967296,Math.abs(He-ke)<429496729?p.pseudoRandom():He/4294967296},p.fillText=function(ke,$,le){var K=Array.isArray(le)?function(ce){le.push(ce)}:function(ce){le.text=ce},te=p.extractOption(ke,$,"htx","hovertext");if(p.isValidTextValue(te))return K(te);var ie=p.extractOption(ke,$,"tx","text");if(p.isValidTextValue(ie))return K(ie)},p.isValidTextValue=function(ke){return ke||ke===0},p.formatPercent=function(ke,$){$=$||0;for(var le=(Math.round(100*ke*Math.pow(10,$))*Math.pow(.1,$)).toFixed($)+"%",K=0;K<$;K++)le.indexOf(".")!==-1&&(le=le.replace("0%","%"),le=le.replace(".%","%"));return le},p.isHidden=function(ke){var $=window.getComputedStyle(ke).display;return!$||$==="none"},p.strTranslate=function(ke,$){return ke||$?"translate("+ke+","+$+")":""},p.strRotate=function(ke){return ke?"rotate("+ke+")":""},p.strScale=function(ke){return ke!==1?"scale("+ke+")":""},p.getTextTransform=function(ke){var $=ke.noCenter,le=ke.textX,K=ke.textY,te=ke.targetX,ie=ke.targetY,ce=ke.anchorX||0,ae=ke.anchorY||0,ve=ke.rotate,pe=ke.scale;return pe?pe>1&&(pe=1):pe=0,p.strTranslate(te-pe*(le+ce),ie-pe*(K+ae))+p.strScale(pe)+(ve?"rotate("+ve+($?"":" "+le+" "+K)+")":"")},p.setTransormAndDisplay=function(ke,$){ke.attr("transform",p.getTextTransform($)),ke.style("display",$.scale?null:"none")},p.ensureUniformFontSize=function(ke,$){var le=p.extendFlat({},$);return le.size=Math.max($.size,ke._fullLayout.uniformtext.minsize||0),le},p.join2=function(ke,$,le){var K=ke.length;return K>1?ke.slice(0,-1).join($)+le+ke[K-1]:ke.join($)},p.bigFont=function(ke){return Math.round(1.2*ke)};var Re=p.getFirefoxVersion(),Ee=Re!==null&&Re<86;p.getPositionFromD3Event=function(){return Ee?[a.event.layerX,a.event.layerY]:[a.event.offsetX,a.event.offsetY]}},{"../constants/numerical":224,"./anchor_utils":228,"./angles":229,"./array":230,"./clean_number":231,"./clear_responsive":233,"./coerce":234,"./dates":235,"./dom":236,"./extend":238,"./filter_unique":239,"./filter_visible":240,"./geometry2d":241,"./identity":242,"./increment":243,"./is_plain_object":245,"./keyed_container":246,"./localize":247,"./loggers":248,"./make_trace_groups":249,"./matrix":250,"./mod":251,"./nested_property":252,"./noop":253,"./notifier":254,"./preserve_drawing_buffer":257,"./push_unique":258,"./regex":260,"./relative_attr":261,"./relink_private":262,"./search":263,"./sort_object_keys":265,"./stats":266,"./throttle":268,"./to_log_range":269,"@plotly/d3":11,"d3-format":13,"d3-time-format":14,"fast-isnumeric":17}],245:[function(e,i,o){i.exports=function(s){return window&&window.process&&window.process.versions?Object.prototype.toString.call(s)==="[object Object]":Object.prototype.toString.call(s)==="[object Object]"&&Object.getPrototypeOf(s).hasOwnProperty("hasOwnProperty")}},{}],246:[function(e,i,o){var a=e("./nested_property"),s=/^\w*$/,n=0,l=1,u=2,h=3,v=4;i.exports=function(p,_,b,x){b=b||"name",x=x||"value";var E,A,P,D={};_&&_.length?(P=a(p,_),A=P.get()):A=p,_=_||"";var R={};if(A)for(E=0;E<A.length;E++)R[A[E][b]]=E;var S=s.test(x),I={set:function(T,M){var z=M===null?v:n;if(!A){if(!P||z===v)return;A=[],P.set(A)}var U=R[T];if(U===void 0){if(z===v)return;z=z|h,U=A.length,R[T]=U}else M!==(S?A[U][x]:a(A[U],x).get())&&(z=z|u);var F=A[U]=A[U]||{};return F[b]=T,S?F[x]=M:a(F,x).set(M),M!==null&&(z=z&~v),D[U]=D[U]|z,I},get:function(T){if(!!A){var M=R[T];if(M!==void 0)return S?A[M][x]:a(A[M],x).get()}},rename:function(T,M){var z=R[T];return z===void 0||(D[z]=D[z]|l,R[M]=z,delete R[T],A[z][b]=M),I},remove:function(T){var M=R[T];if(M===void 0)return I;var z=A[M];if(Object.keys(z).length>2)return D[M]=D[M]|u,I.set(T,null);if(S){for(E=M;E<A.length;E++)D[E]=D[E]|h;for(E=M;E<A.length;E++)R[A[E][b]]--;A.splice(M,1),delete R[T]}else a(z,x).set(null),D[M]=D[M]|u|v;return I},constructUpdate:function(){for(var T,M,z={},U=Object.keys(D),F=0;F<U.length;F++)M=U[F],T=_+"["+M+"]",A[M]?(D[M]&l&&(z[T+"."+b]=A[M][b]),D[M]&u&&(S?z[T+"."+x]=D[M]&v?null:A[M][x]:z[T+"."+x]=D[M]&v?null:a(A[M],x).get())):z[T]=null;return z}};return I}},{"./nested_property":252}],247:[function(e,i,o){var a=e("../registry");i.exports=function(n,l){for(var u=n._context.locale,h=0;h<2;h++){for(var v=n._context.locales,d=0;d<2;d++){var p=(v[u]||{}).dictionary;if(p){var _=p[l];if(_)return _}v=a.localeRegistry}var b=u.split("-")[0];if(b===u)break;u=b}return l}},{"../registry":327}],248:[function(e,i,o){var a=e("../plot_api/plot_config").dfltConfig,s=e("./notifier"),n=i.exports={};n.log=function(){var l;if(a.logging>1){var u=["LOG:"];for(l=0;l<arguments.length;l++)u.push(arguments[l]);console.trace.apply(console,u)}if(a.notifyOnLogging>1){var h=[];for(l=0;l<arguments.length;l++)h.push(arguments[l]);s(h.join("<br>"),"long")}},n.warn=function(){var l;if(a.logging>0){var u=["WARN:"];for(l=0;l<arguments.length;l++)u.push(arguments[l]);console.trace.apply(console,u)}if(a.notifyOnLogging>0){var h=[];for(l=0;l<arguments.length;l++)h.push(arguments[l]);s(h.join("<br>"),"stick")}},n.error=function(){var l;if(a.logging>0){var u=["ERROR:"];for(l=0;l<arguments.length;l++)u.push(arguments[l]);console.error.apply(console,u)}if(a.notifyOnLogging>0){var h=[];for(l=0;l<arguments.length;l++)h.push(arguments[l]);s(h.join("<br>"),"stick")}}},{"../plot_api/plot_config":278,"./notifier":254}],249:[function(e,i,o){var a=e("@plotly/d3");i.exports=function(n,l,u){var h=n.selectAll("g."+u.replace(/\s/g,".")).data(l,function(d){return d[0].trace.uid});h.exit().remove(),h.enter().append("g").attr("class",u),h.order();var v=n.classed("rangeplot")?"nodeRangePlot3":"node3";return h.each(function(d){d[0][v]=a.select(this)}),h}},{"@plotly/d3":11}],250:[function(e,i,o){var a=e("gl-mat4");o.init2dArray=function(s,n){for(var l=new Array(s),u=0;u<s;u++)l[u]=new Array(n);return l},o.transposeRagged=function(s){var n=0,l=s.length,u,h;for(u=0;u<l;u++)n=Math.max(n,s[u].length);var v=new Array(n);for(u=0;u<n;u++)for(v[u]=new Array(l),h=0;h<l;h++)v[u][h]=s[h][u];return v},o.dot=function(s,n){if(!(s.length&&n.length)||s.length!==n.length)return null;var l=s.length,u,h;if(s[0].length)for(u=new Array(l),h=0;h<l;h++)u[h]=o.dot(s[h],n);else if(n[0].length){var v=o.transposeRagged(n);for(u=new Array(v.length),h=0;h<v.length;h++)u[h]=o.dot(s,v[h])}else for(u=0,h=0;h<l;h++)u+=s[h]*n[h];return u},o.translationMatrix=function(s,n){return[[1,0,s],[0,1,n],[0,0,1]]},o.rotationMatrix=function(s){var n=s*Math.PI/180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]},o.rotationXYMatrix=function(s,n,l){return o.dot(o.dot(o.translationMatrix(n,l),o.rotationMatrix(s)),o.translationMatrix(-n,-l))},o.apply3DTransform=function(s){return function(){var n=arguments,l=arguments.length===1?n[0]:[n[0],n[1],n[2]||0];return o.dot(s,[l[0],l[1],l[2],1]).slice(0,3)}},o.apply2DTransform=function(s){return function(){var n=arguments;n.length===3&&(n=n[0]);var l=arguments.length===1?n[0]:[n[0],n[1]];return o.dot(s,[l[0],l[1],1]).slice(0,2)}},o.apply2DTransform2=function(s){var n=o.apply2DTransform(s);return function(l){return n(l.slice(0,2)).concat(n(l.slice(2,4)))}},o.convertCssMatrix=function(s){if(s){var n=s.length;if(n===16)return s;if(n===6)return[s[0],s[1],0,0,s[2],s[3],0,0,0,0,1,0,s[4],s[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(s){var n=[];return a.invert(n,s),[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}},{"gl-mat4":33}],251:[function(e,i,o){function a(n,l){var u=n%l;return u<0?u+l:u}function s(n,l){return Math.abs(n)>l/2?n-Math.round(n/l)*l:n}i.exports={mod:a,modHalf:s}},{}],252:[function(e,i,o){var a=e("fast-isnumeric"),s=e("./array").isArrayOrTypedArray;i.exports=function(x,E){if(a(E))E=String(E);else if(typeof E!="string"||E.substr(E.length-4)==="[-1]")throw"bad property string";for(var A=0,P=E.split("."),D,R,S;A<P.length;){if(D=String(P[A]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),D){if(D[1])P[A]=D[1];else if(A===0)P.splice(0,1);else throw"bad property string";for(R=D[2].substr(1,D[2].length-2).split("]["),S=0;S<R.length;S++)A++,P.splice(A,0,Number(R[S]))}A++}return typeof x!="object"?_(x,E,P):{set:h(x,P,E),get:n(x,P),astr:E,parts:P,obj:x}};function n(b,x){return function(){var E=b,A,P,D,R,S;for(R=0;R<x.length-1;R++){if(A=x[R],A===-1){for(P=!0,D=[],S=0;S<E.length;S++)D[S]=n(E[S],x.slice(R+1))(),D[S]!==D[0]&&(P=!1);return P?D[0]:D}if(typeof A=="number"&&!s(E)||(E=E[A],typeof E!="object"||E===null))return}if(!(typeof E!="object"||E===null)&&(D=E[x[R]],D!==null))return D}}var l=/(^|\.)args\[/;function u(b,x){return b===void 0||b===null&&!x.match(l)}function h(b,x,E){return function(A){var P=b,D="",R=u(A,E),S,I;for(I=0;I<x.length-1;I++){if(S=x[I],typeof S=="number"&&!s(P))throw"array index but container is not an array";if(S===-1){if(R=!d(P,x.slice(I+1),A,E),R)break;return}if(!p(P,S,x[I+1],R))break;if(P=P[S],typeof P!="object"||P===null)throw"container is not an object";D=v(D,S)}if(R){if(I===x.length-1&&(delete P[x[I]],Array.isArray(P)&&+x[I]===P.length-1))for(;P.length&&P[P.length-1]===void 0;)P.pop()}else P[x[I]]=A}}function v(b,x){var E=x;return a(x)?E="["+x+"]":b&&(E="."+x),b+E}function d(b,x,E,A){var P=s(E),D=!0,R=E,S=A.replace("-1",0),I=P?!1:u(E,S),T=x[0],M;for(M=0;M<b.length;M++)S=A.replace("-1",M),P&&(R=E[M%E.length],I=u(R,S)),I&&(D=!1),p(b,M,T,I)&&h(b[M],x,A.replace("-1",M))(R);return D}function p(b,x,E,A){if(b[x]===void 0){if(A)return!1;typeof E=="number"?b[x]=[]:b[x]={}}return!0}function _(b,x,E){return{set:function(){throw"bad container"},get:function(){},astr:x,parts:E,obj:b}}},{"./array":230,"fast-isnumeric":17}],253:[function(e,i,o){i.exports=function(){}},{}],254:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=[];i.exports=function(l,u){if(n.indexOf(l)!==-1)return;n.push(l);var h=1e3;s(u)?h=u:u==="long"&&(h=3e3);var v=a.select("body").selectAll(".plotly-notifier").data([0]);v.enter().append("div").classed("plotly-notifier",!0);var d=v.selectAll(".notifier-note").data(n);function p(_){_.duration(700).style("opacity",0).each("end",function(b){var x=n.indexOf(b);x!==-1&&n.splice(x,1),a.select(this).remove()})}d.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(_){var b=a.select(this);b.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){b.transition().call(p)});for(var x=b.append("p"),E=_.split(/<br\s*\/?>/g),A=0;A<E.length;A++)A&&x.append("br"),x.append("span").text(E[A]);u==="stick"?b.transition().duration(350).style("opacity",1):b.transition().duration(700).style("opacity",1).transition().delay(h).call(p)})}},{"@plotly/d3":11,"fast-isnumeric":17}],255:[function(e,i,o){var a=e("./setcursor"),s="data-savedcursor",n="!!";i.exports=function(u,h){var v=u.attr(s);if(h){if(!v){for(var d=(u.attr("class")||"").split(" "),p=0;p<d.length;p++){var _=d[p];_.indexOf("cursor-")===0&&u.attr(s,_.substr(7)).classed(_,!1)}u.attr(s)||u.attr(s,n)}a(u,h)}else v&&(u.attr(s,null),v===n?a(u):a(u,v))}},{"./setcursor":264}],256:[function(e,i,o){var a=e("./matrix").dot,s=e("../constants/numerical").BADNUM,n=i.exports={};n.tester=function(u){var h=u.slice(),v=h[0][0],d=v,p=h[0][1],_=p,b;for((h[h.length-1][0]!==h[0][0]||h[h.length-1][1]!==h[0][1])&&h.push(h[0]),b=1;b<h.length;b++)v=Math.min(v,h[b][0]),d=Math.max(d,h[b][0]),p=Math.min(p,h[b][1]),_=Math.max(_,h[b][1]);var x=!1,E;h.length===5&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(x=!0,E=function(S){return S[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(x=!0,E=function(S){return S[1]===h[0][1]}));function A(S,I){var T=S[0],M=S[1];return!(T===s||T<v||T>d||M===s||M<p||M>_||I&&E(S))}function P(S,I){var T=S[0],M=S[1];if(T===s||T<v||T>d||M===s||M<p||M>_)return!1;var z=h.length,U=h[0][0],F=h[0][1],V=0,j,H,Y,J,ne;for(j=1;j<z;j++)if(H=U,Y=F,U=h[j][0],F=h[j][1],J=Math.min(H,U),!(T<J||T>Math.max(H,U)||M>Math.max(Y,F)))if(M<Math.min(Y,F))T!==J&&V++;else{if(U===H?ne=M:ne=Y+(T-H)*(F-Y)/(U-H),M===ne)return!(j===1&&I);M<=ne&&T!==J&&V++}return V%2===1}var D=!0,R=h[0];for(b=1;b<h.length;b++)if(R[0]!==h[b][0]||R[1]!==h[b][1]){D=!1;break}return{xmin:v,xmax:d,ymin:p,ymax:_,pts:h,contains:x?A:P,isRect:x,degenerate:D}},n.isSegmentBent=function(u,h,v,d){var p=u[h],_=[u[v][0]-p[0],u[v][1]-p[1]],b=a(_,_),x=Math.sqrt(b),E=[-_[1]/x,_[0]/x],A,P,D;for(A=h+1;A<v;A++)if(P=[u[A][0]-p[0],u[A][1]-p[1]],D=a(P,_),D<0||D>b||Math.abs(a(P,E))>d)return!0;return!1},n.filter=function(u,h){var v=[u[0]],d=0,p=0;function _(x){u.push(x);var E=v.length,A=d;v.splice(p+1);for(var P=A+1;P<u.length;P++)(P===u.length-1||n.isSegmentBent(u,A,P+1,h))&&(v.push(u[P]),v.length<E-2&&(d=P,p=v.length-1),A=P)}if(u.length>1){var b=u.pop();_(b)}return{addPt:_,raw:u,filtered:v}}},{"../constants/numerical":224,"./matrix":250}],257:[function(e,i,o){var a=e("fast-isnumeric"),s=e("is-mobile");i.exports=function(u){var h;if(u&&u.hasOwnProperty("userAgent")?h=u.userAgent:h=n(),typeof h!="string")return!0;var v=s({ua:{headers:{"user-agent":h}},tablet:!0,featureDetect:!1});if(!v)for(var d=h.split(" "),p=1;p<d.length;p++){var _=d[p];if(_.indexOf("Safari")!==-1)for(var b=p-1;b>-1;b--){var x=d[b];if(x.substr(0,8)==="Version/"){var E=x.substr(8).split(".")[0];if(a(E)&&(E=+E),E>=13)return!0}}}return v};function n(){var l;return typeof navigator<"u"&&(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),l}},{"fast-isnumeric":17,"is-mobile":51}],258:[function(e,i,o){i.exports=function(s,n){if(n instanceof RegExp){for(var l=n.toString(),u=0;u<s.length;u++)if(s[u]instanceof RegExp&&s[u].toString()===l)return s;s.push(n)}else(n||n===0)&&s.indexOf(n)===-1&&s.push(n);return s}},{}],259:[function(e,i,o){var a=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;function n(u,h){for(var v=[],d,p=0;p<h.length;p++)d=h[p],d===u?v[p]=d:typeof d=="object"?v[p]=Array.isArray(d)?a.extendDeep([],d):a.extendDeepAll({},d):v[p]=d;return v}var l={};l.add=function(u,h,v,d,p){var _,b;if(u.undoQueue=u.undoQueue||{index:0,queue:[],sequence:!1},b=u.undoQueue.index,u.autoplay){u.undoQueue.inSequence||(u.autoplay=!1);return}!u.undoQueue.sequence||u.undoQueue.beginSequence?(_={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},u.undoQueue.queue.splice(b,u.undoQueue.queue.length-b,_),u.undoQueue.index+=1):_=u.undoQueue.queue[b-1],u.undoQueue.beginSequence=!1,_&&(_.undo.calls.unshift(h),_.undo.args.unshift(v),_.redo.calls.push(d),_.redo.args.push(p)),u.undoQueue.queue.length>s.queueLength&&(u.undoQueue.queue.shift(),u.undoQueue.index--)},l.startSequence=function(u){u.undoQueue=u.undoQueue||{index:0,queue:[],sequence:!1},u.undoQueue.sequence=!0,u.undoQueue.beginSequence=!0},l.stopSequence=function(u){u.undoQueue=u.undoQueue||{index:0,queue:[],sequence:!1},u.undoQueue.sequence=!1,u.undoQueue.beginSequence=!1},l.undo=function(h){var v,d;if(!(h.undoQueue===void 0||isNaN(h.undoQueue.index)||h.undoQueue.index<=0)){for(h.undoQueue.index--,v=h.undoQueue.queue[h.undoQueue.index],h.undoQueue.inSequence=!0,d=0;d<v.undo.calls.length;d++)l.plotDo(h,v.undo.calls[d],v.undo.args[d]);h.undoQueue.inSequence=!1,h.autoplay=!1}},l.redo=function(h){var v,d;if(!(h.undoQueue===void 0||isNaN(h.undoQueue.index)||h.undoQueue.index>=h.undoQueue.queue.length)){for(v=h.undoQueue.queue[h.undoQueue.index],h.undoQueue.inSequence=!0,d=0;d<v.redo.calls.length;d++)l.plotDo(h,v.redo.calls[d],v.redo.args[d]);h.undoQueue.inSequence=!1,h.autoplay=!1,h.undoQueue.index++}},l.plotDo=function(u,h,v){u.autoplay=!0,v=n(u,v),h.apply(null,v)},i.exports=l},{"../lib":244,"../plot_api/plot_config":278}],260:[function(e,i,o){o.counter=function(a,s,n,l){var u=(s||"")+(n?"":"$"),h=l===!1?"":"^";return a==="xy"?new RegExp(h+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+u):new RegExp(h+a+"([2-9]|[1-9][0-9]+)?"+u)}},{}],261:[function(e,i,o){var a=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,s=/^[^\.\[\]]+$/;i.exports=function(n,l){for(;l;){var u=n.match(a);if(u)n=u[1];else if(n.match(s))n="";else throw new Error("bad relativeAttr call:"+[n,l]);if(l.charAt(0)==="^")l=l.slice(1);else break}return n&&l.charAt(0)!=="["?n+"."+l:n+l}},{}],262:[function(e,i,o){var a=e("./array").isArrayOrTypedArray,s=e("./is_plain_object");i.exports=function n(l,u){for(var h in u){var v=u[h],d=l[h];if(d!==v)if(h.charAt(0)==="_"||typeof v=="function"){if(h in l)continue;l[h]=v}else if(a(v)&&a(d)&&s(v[0])){if(h==="customdata"||h==="ids")continue;for(var p=Math.min(v.length,d.length),_=0;_<p;_++)d[_]!==v[_]&&s(v[_])&&s(d[_])&&n(d[_],v[_])}else s(v)&&s(d)&&(n(d,v),Object.keys(d).length||delete l[h])}}},{"./array":230,"./is_plain_object":245}],263:[function(e,i,o){var a=e("fast-isnumeric"),s=e("./loggers"),n=e("./identity"),l=e("../constants/numerical").BADNUM,u=1e-9;o.findBin=function(_,b,x){if(a(b.start))return x?Math.ceil((_-b.start)/b.size-u)-1:Math.floor((_-b.start)/b.size+u);var E=0,A=b.length,P=0,D=A>1?(b[A-1]-b[0])/(A-1):1,R,S;for(D>=0?S=x?h:v:S=x?p:d,_+=D*u*(x?-1:1)*(D>=0?1:-1);E<A&&P++<100;)R=Math.floor((E+A)/2),S(b[R],_)?E=R+1:A=R;return P>90&&s.log("Long binary search..."),E-1};function h(_,b){return _<b}function v(_,b){return _<=b}function d(_,b){return _>b}function p(_,b){return _>=b}o.sorterAsc=function(_,b){return _-b},o.sorterDes=function(_,b){return b-_},o.distinctVals=function(_){var b=_.slice();b.sort(o.sorterAsc);var x;for(x=b.length-1;x>-1&&b[x]===l;x--);for(var E=b[x]-b[0]||1,A=E/(x||1)/1e4,P=[],D,R=0;R<=x;R++){var S=b[R],I=S-D;D===void 0?(P.push(S),D=S):I>A&&(E=Math.min(E,I),P.push(S),D=S)}return{vals:P,minDiff:E}},o.roundUp=function(_,b,x){for(var E=0,A=b.length-1,P,D=0,R=x?0:1,S=x?1:0,I=x?Math.ceil:Math.floor;E<A&&D++<100;)P=I((E+A)/2),b[P]<=_?E=P+R:A=P-S;return b[E]},o.sort=function(_,b){for(var x=0,E=0,A=1;A<_.length;A++){var P=b(_[A],_[A-1]);if(P<0?x=1:P>0&&(E=1),x&&E)return _.sort(b)}return E?_:_.reverse()},o.findIndexOfMin=function(_,b){b=b||n;for(var x=1/0,E,A=0;A<_.length;A++){var P=b(_[A]);P<x&&(x=P,E=A)}return E}},{"../constants/numerical":224,"./identity":242,"./loggers":248,"fast-isnumeric":17}],264:[function(e,i,o){i.exports=function(s,n){(s.attr("class")||"").split(" ").forEach(function(l){l.indexOf("cursor-")===0&&s.classed(l,!1)}),n&&s.classed("cursor-"+n,!0)}},{}],265:[function(e,i,o){i.exports=function(s){return Object.keys(s).sort()}},{}],266:[function(e,i,o){var a=e("fast-isnumeric"),s=e("./array").isArrayOrTypedArray;o.aggNums=function(n,l,u,h){var v,d;if((!h||h>u.length)&&(h=u.length),a(l)||(l=!1),s(u[0])){for(d=new Array(h),v=0;v<h;v++)d[v]=o.aggNums(n,l,u[v]);u=d}for(v=0;v<h;v++)a(l)?a(u[v])&&(l=n(+l,+u[v])):l=u[v];return l},o.len=function(n){return o.aggNums(function(l){return l+1},0,n)},o.mean=function(n,l){return l||(l=o.len(n)),o.aggNums(function(u,h){return u+h},0,n)/l},o.midRange=function(n){if(!(n===void 0||n.length===0))return(o.aggNums(Math.max,null,n)+o.aggNums(Math.min,null,n))/2},o.variance=function(n,l,u){return l||(l=o.len(n)),a(u)||(u=o.mean(n,l)),o.aggNums(function(h,v){return h+Math.pow(v-u,2)},0,n)/l},o.stdev=function(n,l,u){return Math.sqrt(o.variance(n,l,u))},o.median=function(n){var l=n.slice().sort();return o.interp(l,.5)},o.interp=function(n,l){if(!a(l))throw"n should be a finite number";if(l=l*n.length-.5,l<0)return n[0];if(l>n.length-1)return n[n.length-1];var u=l%1;return u*n[Math.ceil(l)]+(1-u)*n[Math.floor(l)]}},{"./array":230,"fast-isnumeric":17}],267:[function(e,i,o){var a=e("@plotly/d3"),s=e("../lib"),n=s.strTranslate,l=e("../constants/xmlns_namespaces"),u=e("../constants/alignment").LINE_SPACING,h=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;o.convertToTspans=function(re,de,me){var xe=re.text(),He=!re.attr("data-notex")&&de&&de._context.typesetMath&&typeof MathJax<"u"&&xe.match(h),Re=a.select(re.node().parentNode);if(Re.empty())return;var Ee=re.attr("class")?re.attr("class").split(" ")[0]:"text";Ee+="-math",Re.selectAll("svg."+Ee).remove(),Re.selectAll("g."+Ee+"-group").remove(),re.style("display",null).attr({"data-unformatted":xe,"data-math":"N"});function ke(){Re.empty()||(Ee=re.attr("class")+"-math",Re.select("svg."+Ee).remove()),re.text("").style("white-space","pre");var $=q(re.node(),xe);$&&re.style("pointer-events","all"),o.positionText(re),me&&me.call(re)}return He?(de&&de._promises||[]).push(new Promise(function($){re.style("display","none");var le=parseInt(re.node().style.fontSize,10),K={fontSize:le};b(He[2],K,function(te,ie,ce){Re.selectAll("svg."+Ee).remove(),Re.selectAll("g."+Ee+"-group").remove();var ae=te&&te.select("svg");if(!ae||!ae.node()){ke(),$();return}var ve=Re.append("g").classed(Ee+"-group",!0).attr({"pointer-events":"none","data-unformatted":xe,"data-math":"Y"});ve.node().appendChild(ae.node()),ie&&ie.node()&&ae.node().insertBefore(ie.node().cloneNode(!0),ae.node().firstChild);var pe=ce.width,he=ce.height;ae.attr({class:Ee,height:he,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ye=re.node().style.fill||"black",_e=ae.select("g");_e.attr({fill:ye,stroke:ye});var je=_e.node().getBoundingClientRect(),Je=je.width,nt=je.height;(Je>pe||nt>he)&&(ae.style("overflow","hidden"),je=ae.node().getBoundingClientRect(),Je=je.width,nt=je.height);var at=+re.attr("x"),Fe=+re.attr("y"),Ie=le||re.node().getBoundingClientRect().height,Ke=-Ie/4;if(Ee[0]==="y")ve.attr({transform:"rotate("+[-90,at,Fe]+")"+n(-Je/2,Ke-nt/2)});else if(Ee[0]==="l")Fe=Ke-nt/2;else if(Ee[0]==="a"&&Ee.indexOf("atitle")!==0)at=0,Fe=Ke;else{var Qe=re.attr("text-anchor");at=at-Je*(Qe==="middle"?.5:Qe==="end"?1:0),Fe=Fe+Ke-nt/2}ae.attr({x:at,y:Fe}),me&&me.call(re,ve),$(ve)})})):ke(),re};var v=/(<|&lt;|&#60;)/g,d=/(>|&gt;|&#62;)/g;function p(re){return re.replace(v,"\\lt ").replace(d,"\\gt ")}var _=[["$","$"],["\\(","\\)"]];function b(re,de,me){var xe=parseInt((MathJax.version||"").split(".")[0]);if(xe!==2&&xe!==3){s.warn("No MathJax version:",MathJax.version);return}var He,Re,Ee,ke,$=function(){return Re=s.extendDeepAll({},MathJax.Hub.config),Ee=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:_},displayAlign:"left"})},le=function(){Re=s.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=_},K=function(){if(He=MathJax.Hub.config.menuSettings.renderer,He!=="SVG")return MathJax.Hub.setRenderer("SVG")},te=function(){He=MathJax.config.startup.output,He!=="svg"&&(MathJax.config.startup.output="svg")},ie=function(){var ye="math-output-"+s.randstr({},64);ke=a.select("body").append("div").attr({id:ye}).style({visibility:"hidden",position:"absolute","font-size":de.fontSize+"px"}).text(p(re));var _e=ke.node();return xe===2?MathJax.Hub.Typeset(_e):MathJax.typeset([_e])},ce=function(){var ye=ke.select(xe===2?".MathJax_SVG":".MathJax"),_e=!ye.empty()&&ke.select("svg").node();if(!_e)s.log("There was an error in the tex syntax.",re),me();else{var je=_e.getBoundingClientRect(),Je;xe===2?Je=a.select("body").select("#MathJax_SVG_glyphs"):Je=ye.select("defs"),me(ye,Je,je)}ke.remove()},ae=function(){if(He!=="SVG")return MathJax.Hub.setRenderer(He)},ve=function(){He!=="svg"&&(MathJax.config.startup.output=He)},pe=function(){return Ee!==void 0&&(MathJax.Hub.processSectionDelay=Ee),MathJax.Hub.Config(Re)},he=function(){MathJax.config=Re};xe===2?MathJax.Hub.Queue($,K,ie,ce,ae,pe):xe===3&&(le(),te(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ie(),ce(),ve(),he()}))}var x={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},E={sub:"0.3em",sup:"-0.6em"},A={sub:"-0.21em",sup:"0.42em"},P="\u200B",D=["http:","https:","mailto:","",void 0,":"],R=o.NEWLINES=/(\r\n?|\n)/g,S=/(<[^<>]*>)/,I=/<(\/?)([^ >]*)(\s+(.*))?>/i,T=/<br(\s+.*)?>/i;o.BR_TAG_ALL=/<br(\s+.*)?>/gi;var M=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,z=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,U=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,F=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function V(re,de){if(!re)return null;var me=re.match(de),xe=me&&(me[3]||me[4]);return xe&&J(xe)}var j=/(^|;)\s*color:/;o.plainText=function(re,de){de=de||{};for(var me=de.len!==void 0&&de.len!==-1?de.len:1/0,xe=de.allowedTags!==void 0?de.allowedTags:["br"],He="...",Re=He.length,Ee=re.split(S),ke=[],$="",le=0,K=0;K<Ee.length;K++){var te=Ee[K],ie=te.match(I),ce=ie&&ie[2].toLowerCase();if(ce)xe.indexOf(ce)!==-1&&(ke.push(te),$=ce);else{var ae=te.length;if(le+ae<me)ke.push(te),le+=ae;else if(le<me){var ve=me-le;$&&($!=="br"||ve<=Re||ae<=Re)&&ke.pop(),me>Re?ke.push(te.substr(0,ve-Re)+He):ke.push(te.substr(0,ve));break}$=""}}return ke.join("")};var H={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},Y=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function J(re){return re.replace(Y,function(de,me){var xe;return me.charAt(0)==="#"?xe=ne(me.charAt(1)==="x"?parseInt(me.substr(2),16):parseInt(me.substr(1),10)):xe=H[me],xe||de})}o.convertEntities=J;function ne(re){if(!(re>1114111)){var de=String.fromCodePoint;if(de)return de(re);var me=String.fromCharCode;return re<=65535?me(re):me((re>>10)+55232,re%1024+56320)}}function q(re,de){de=de.replace(R," ");var me=!1,xe=[],He,Re=-1;function Ee(){Re++;var nt=document.createElementNS(l.svg,"tspan");a.select(nt).attr({class:"line",dy:Re*u+"em"}),re.appendChild(nt),He=nt;var at=xe;if(xe=[{node:nt}],at.length>1)for(var Fe=1;Fe<at.length;Fe++)ke(at[Fe])}function ke(nt){var at=nt.type,Fe={},Ie;if(at==="a"){Ie="a";var Ke=nt.target,Qe=nt.href,it=nt.popup;Qe&&(Fe={"xlink:xlink:show":Ke==="_blank"||Ke.charAt(0)!=="_"?"new":"replace",target:Ke,"xlink:xlink:href":Qe},it&&(Fe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+it+'");return false;'))}else Ie="tspan";nt.style&&(Fe.style=nt.style);var Ne=document.createElementNS(l.svg,Ie);if(at==="sup"||at==="sub"){$(He,P),He.appendChild(Ne);var ht=document.createElementNS(l.svg,"tspan");$(ht,P),a.select(ht).attr("dy",A[at]),Fe.dy=E[at],He.appendChild(Ne),He.appendChild(ht)}else He.appendChild(Ne);a.select(Ne).attr(Fe),He=nt.node=Ne,xe.push(nt)}function $(nt,at){nt.appendChild(document.createTextNode(at))}function le(nt){if(xe.length===1){s.log("Ignoring unexpected end tag </"+nt+">.",de);return}var at=xe.pop();nt!==at.type&&s.log("Start tag <"+at.type+"> doesnt match end tag <"+nt+">. Pretending it did match.",de),He=xe[xe.length-1].node}var K=T.test(de);K?Ee():(He=re,xe=[{node:re}]);for(var te=de.split(S),ie=0;ie<te.length;ie++){var ce=te[ie],ae=ce.match(I),ve=ae&&ae[2].toLowerCase(),pe=x[ve];if(ve==="br")Ee();else if(pe===void 0)$(He,J(ce));else if(ae[1])le(ve);else{var he=ae[4],ye={type:ve},_e=V(he,M);if(_e?(_e=_e.replace(j,"$1 fill:"),pe&&(_e+=";"+pe)):pe&&(_e=pe),_e&&(ye.style=_e),ve==="a"){me=!0;var je=V(he,z);if(je){var Je=we(je);Je&&(ye.href=Je,ye.target=V(he,U)||"_blank",ye.popup=V(he,F))}}ke(ye)}}return me}function we(re){var de=encodeURI(decodeURI(re)),me=document.createElement("a"),xe=document.createElement("a");me.href=re,xe.href=de;var He=me.protocol,Re=xe.protocol;return D.indexOf(He)!==-1&&D.indexOf(Re)!==-1?de:""}o.sanitizeHTML=function(de){de=de.replace(R," ");for(var me=document.createElement("p"),xe=me,He=[],Re=de.split(S),Ee=0;Ee<Re.length;Ee++){var ke=Re[Ee],$=ke.match(I),le=$&&$[2].toLowerCase();if(le in x)if($[1])He.length&&(xe=He.pop());else{var K=$[4],te=V(K,M),ie=te?{style:te}:{};if(le==="a"){var ce=V(K,z);if(ce){var ae=we(ce);if(ae){ie.href=ae;var ve=V(K,U);ve&&(ie.target=ve)}}}var pe=document.createElement(le);xe.appendChild(pe),a.select(pe).attr(ie),xe=pe,He.push(pe)}else xe.appendChild(document.createTextNode(J(ke)))}var he="innerHTML";return me[he]},o.lineCount=function(de){return de.selectAll("tspan.line").size()||1},o.positionText=function(de,me,xe){return de.each(function(){var He=a.select(this);function Re($,le){return le===void 0?(le=He.attr($),le===null&&(He.attr($,0),le=0)):He.attr($,le),le}var Ee=Re("x",me),ke=Re("y",xe);this.nodeName==="text"&&He.selectAll("tspan.line").attr({x:Ee,y:ke})})};function ee(re,de,me){var xe=me.horizontalAlign,He=me.verticalAlign||"top",Re=re.node().getBoundingClientRect(),Ee=de.node().getBoundingClientRect(),ke,$,le;return He==="bottom"?$=function(){return Re.bottom-ke.height}:He==="middle"?$=function(){return Re.top+(Re.height-ke.height)/2}:$=function(){return Re.top},xe==="right"?le=function(){return Re.right-ke.width}:xe==="center"?le=function(){return Re.left+(Re.width-ke.width)/2}:le=function(){return Re.left},function(){ke=this.node().getBoundingClientRect();var K=le()-Ee.left,te=$()-Ee.top,ie=me.gd||{};if(me.gd){ie._fullLayout._calcInverseTransform(ie);var ce=s.apply3DTransform(ie._fullLayout._invTransform)(K,te);K=ce[0],te=ce[1]}return this.style({top:te+"px",left:K+"px","z-index":1e3}),this}}var X="1px ";o.makeTextShadow=function(re){var de=X,me=X,xe=X;return de+me+xe+re+", -"+de+"-"+me+xe+re+", "+de+"-"+me+xe+re+", -"+de+me+xe+re},o.makeEditable=function(re,de){var me=de.gd,xe=de.delegate,He=a.dispatch("edit","input","cancel"),Re=xe||re;if(re.style({"pointer-events":xe?"none":"all"}),re.size()!==1)throw new Error("boo");function Ee(){$(),re.style({opacity:0});var le=Re.attr("class"),K;le?K="."+le.split(" ")[0]+"-math-group":K="[class*=-math-group]",K&&a.select(re.node().parentNode).select(K).style({opacity:0})}function ke(le){var K=le.node(),te=document.createRange();te.selectNodeContents(K);var ie=window.getSelection();ie.removeAllRanges(),ie.addRange(te),K.focus()}function $(){var le=a.select(me),K=le.select(".svg-container"),te=K.append("div"),ie=re.node().style,ce=parseFloat(ie.fontSize||12),ae=de.text;ae===void 0&&(ae=re.attr("data-unformatted")),te.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ie.fontFamily||"Arial","font-size":ce,color:de.fill||ie.fill||"black",opacity:1,"background-color":de.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ce/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ae).call(ee(re,K,de)).on("blur",function(){me._editing=!1,re.text(this.textContent).style({opacity:1});var ve=a.select(this).attr("class"),pe;ve?pe="."+ve.split(" ")[0]+"-math-group":pe="[class*=-math-group]",pe&&a.select(re.node().parentNode).select(pe).style({opacity:0});var he=this.textContent;a.select(this).transition().duration(0).remove(),a.select(document).on("mouseup",null),He.edit.call(re,he)}).on("focus",function(){var ve=this;me._editing=!0,a.select(document).on("mouseup",function(){if(a.event.target===ve)return!1;document.activeElement===te.node()&&te.node().blur()})}).on("keyup",function(){a.event.which===27?(me._editing=!1,re.style({opacity:1}),a.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),He.cancel.call(re,this.textContent)):(He.input.call(re,this.textContent),a.select(this).call(ee(re,K,de)))}).on("keydown",function(){a.event.which===13&&this.blur()}).call(ke)}return de.immediate?Ee():Re.on("click",Ee),a.rebind(re,He,"on")}},{"../constants/alignment":219,"../constants/xmlns_namespaces":225,"../lib":244,"@plotly/d3":11}],268:[function(e,i,o){var a={};o.throttle=function(l,u,h){var v=a[l],d=Date.now();if(!v){for(var p in a)a[p].ts<d-6e4&&delete a[p];v=a[l]={ts:0,timer:null}}s(v);function _(){h(),v.ts=Date.now(),v.onDone&&(v.onDone(),v.onDone=null)}if(d>v.ts+u){_();return}v.timer=setTimeout(function(){_(),v.timer=null},u)},o.done=function(n){var l=a[n];return!l||!l.timer?Promise.resolve():new Promise(function(u){var h=l.onDone;l.onDone=function(){h&&h(),u(),l.onDone=null}})},o.clear=function(n){if(n)s(a[n]),delete a[n];else for(var l in a)o.clear(l)};function s(n){n&&n.timer!==null&&(clearTimeout(n.timer),n.timer=null)}},{}],269:[function(e,i,o){var a=e("fast-isnumeric");i.exports=function(n,l){if(n>0)return Math.log(n)/Math.LN10;var u=Math.log(Math.min(l[0],l[1]))/Math.LN10;return a(u)||(u=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),u}},{"fast-isnumeric":17}],270:[function(e,i,o){i.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],271:[function(e,i,o){i.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],272:[function(e,i,o){var a=e("../registry");i.exports=function(n){for(var l=a.layoutArrayContainers,u=a.layoutArrayRegexes,h=n.split("[")[0],v,d,p=0;p<u.length;p++)if(d=n.match(u[p]),d&&d.index===0){v=d[0];break}if(v||(v=l[l.indexOf(h)]),!v)return!1;var _=n.substr(v.length);return _?(d=_.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),d?{array:v,index:Number(d[1]),property:d[3]||""}:!1):{array:v,index:"",property:""}}},{"../registry":327}],273:[function(e,i,o){var a=e("../lib"),s=a.extendFlat,n=a.isPlainObject,l={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},u={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},h=l.flags.slice().concat(["fullReplot"]),v=u.flags.slice().concat("layoutReplot");i.exports={traces:l,layout:u,traceFlags:function(){return d(h)},layoutFlags:function(){return d(v)},update:function(b,x){var E=x.editType;if(E&&E!=="none")for(var A=E.split("+"),P=0;P<A.length;P++)b[A[P]]=!0},overrideAll:p};function d(b){for(var x={},E=0;E<b.length;E++)x[b[E]]=!1;return x}function p(b,x,E){var A=s({},b);for(var P in A){var D=A[P];n(D)&&(A[P]=_(D,x,E,P))}return E==="from-root"&&(A.editType=x),A}function _(b,x,E,A){if(b.valType){var P=s({},b);if(P.editType=x,Array.isArray(b.items)){P.items=new Array(b.items.length);for(var D=0;D<b.items.length;D++)P.items[D]=_(b.items[D],x)}return P}else return p(b,x,A.charAt(0)==="_"?"nested":"from-root")}},{"../lib":244}],274:[function(e,i,o){var a=e("fast-isnumeric"),s=e("gl-mat4/fromQuat"),n=e("../registry"),l=e("../lib"),u=e("../plots/plots"),h=e("../plots/cartesian/axis_ids"),v=e("../components/color"),d=h.cleanId,p=h.getFromTrace,_=n.traceIs;o.clearPromiseQueue=function(T){Array.isArray(T._promises)&&T._promises.length>0&&l.log("Clearing previous rejected promises from queue."),T._promises=[]},o.cleanLayout=function(T){var M,z;T||(T={}),T.xaxis1&&(T.xaxis||(T.xaxis=T.xaxis1),delete T.xaxis1),T.yaxis1&&(T.yaxis||(T.yaxis=T.yaxis1),delete T.yaxis1),T.scene1&&(T.scene||(T.scene=T.scene1),delete T.scene1);var U=(u.subplotsRegistry.cartesian||{}).attrRegex,F=(u.subplotsRegistry.polar||{}).attrRegex,V=(u.subplotsRegistry.ternary||{}).attrRegex,j=(u.subplotsRegistry.gl3d||{}).attrRegex,H=Object.keys(T);for(M=0;M<H.length;M++){var Y=H[M];if(U&&U.test(Y)){var J=T[Y];J.anchor&&J.anchor!=="free"&&(J.anchor=d(J.anchor)),J.overlaying&&(J.overlaying=d(J.overlaying)),J.type||(J.isdate?J.type="date":J.islog?J.type="log":J.isdate===!1&&J.islog===!1&&(J.type="linear")),(J.autorange==="withzero"||J.autorange==="tozero")&&(J.autorange=!0,J.rangemode="tozero"),delete J.islog,delete J.isdate,delete J.categories,D(J,"domain")&&delete J.domain,J.autotick!==void 0&&(J.tickmode===void 0&&(J.tickmode=J.autotick?"auto":"linear"),delete J.autotick),x(J)}else if(F&&F.test(Y)){var ne=T[Y];x(ne.radialaxis)}else if(V&&V.test(Y)){var q=T[Y];x(q.aaxis),x(q.baxis),x(q.caxis)}else if(j&&j.test(Y)){var we=T[Y],ee=we.cameraposition;if(Array.isArray(ee)&&ee[0].length===4){var X=ee[0],re=ee[1],de=ee[2],me=s([],X),xe=[];for(z=0;z<3;++z)xe[z]=re[z]+de*me[2+4*z];we.camera={eye:{x:xe[0],y:xe[1],z:xe[2]},center:{x:re[0],y:re[1],z:re[2]},up:{x:0,y:0,z:1}},delete we.cameraposition}x(we.xaxis),x(we.yaxis),x(we.zaxis)}}var He=Array.isArray(T.annotations)?T.annotations.length:0;for(M=0;M<He;M++){var Re=T.annotations[M];!l.isPlainObject(Re)||(Re.ref&&(Re.ref==="paper"?(Re.xref="paper",Re.yref="paper"):Re.ref==="data"&&(Re.xref="x",Re.yref="y"),delete Re.ref),b(Re,"xref"),b(Re,"yref"))}var Ee=Array.isArray(T.shapes)?T.shapes.length:0;for(M=0;M<Ee;M++){var ke=T.shapes[M];!l.isPlainObject(ke)||(b(ke,"xref"),b(ke,"yref"))}var $=Array.isArray(T.images)?T.images.length:0;for(M=0;M<$;M++){var le=T.images[M];!l.isPlainObject(le)||(b(le,"xref"),b(le,"yref"))}var K=T.legend;return K&&(K.x>3?(K.x=1.02,K.xanchor="left"):K.x<-2&&(K.x=-.02,K.xanchor="right"),K.y>3?(K.y=1.02,K.yanchor="bottom"):K.y<-2&&(K.y=-.02,K.yanchor="top")),x(T),T.dragmode==="rotate"&&(T.dragmode="orbit"),v.clean(T),T.template&&T.template.layout&&o.cleanLayout(T.template.layout),T};function b(T,M){var z=T[M],U=M.charAt(0);z&&z!=="paper"&&(T[M]=d(z,U,!0))}function x(T){T&&((typeof T.title=="string"||typeof T.title=="number")&&(T.title={text:T.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(z,U){var F=T[z],V=T.title&&T.title[U];F&&!V&&(T.title||(T.title={}),T.title[U]=T[z],delete T[z])}}o.cleanData=function(T){for(var M=0;M<T.length;M++){var z=T[M],U;if(z.type==="histogramy"&&"xbins"in z&&!("ybins"in z)&&(z.ybins=z.xbins,delete z.xbins),z.error_y&&"opacity"in z.error_y){var F=v.defaults,V=z.error_y.color||(_(z,"bar")?v.defaultLine:F[M%F.length]);z.error_y.color=v.addOpacity(v.rgb(V),v.opacity(V)*z.error_y.opacity),delete z.error_y.opacity}if("bardir"in z&&(z.bardir==="h"&&(_(z,"bar")||z.type.substr(0,9)==="histogram")&&(z.orientation="h",o.swapXYData(z)),delete z.bardir),z.type==="histogramy"&&o.swapXYData(z),(z.type==="histogramx"||z.type==="histogramy")&&(z.type="histogram"),"scl"in z&&!("colorscale"in z)&&(z.colorscale=z.scl,delete z.scl),"reversescl"in z&&!("reversescale"in z)&&(z.reversescale=z.reversescl,delete z.reversescl),z.xaxis&&(z.xaxis=d(z.xaxis,"x")),z.yaxis&&(z.yaxis=d(z.yaxis,"y")),_(z,"gl3d")&&z.scene&&(z.scene=u.subplotsRegistry.gl3d.cleanId(z.scene)),!_(z,"pie-like")&&!_(z,"bar-like"))if(Array.isArray(z.textposition))for(U=0;U<z.textposition.length;U++)z.textposition[U]=P(z.textposition[U]);else z.textposition&&(z.textposition=P(z.textposition));var j=n.getModule(z);if(j&&j.colorbar){var H=j.colorbar.container,Y=H?z[H]:z;Y&&Y.colorscale&&(Y.colorscale==="YIGnBu"&&(Y.colorscale="YlGnBu"),Y.colorscale==="YIOrRd"&&(Y.colorscale="YlOrRd"))}if(z.type==="surface"&&l.isPlainObject(z.contours)){var J=["x","y","z"];for(U=0;U<J.length;U++){var ne=z.contours[J[U]];!l.isPlainObject(ne)||(ne.highlightColor&&(ne.highlightcolor=ne.highlightColor,delete ne.highlightColor),ne.highlightWidth&&(ne.highlightwidth=ne.highlightWidth,delete ne.highlightWidth))}}if(z.type==="candlestick"||z.type==="ohlc"){var q=(z.increasing||{}).showlegend!==!1,we=(z.decreasing||{}).showlegend!==!1,ee=E(z.increasing),X=E(z.decreasing);if(ee!==!1&&X!==!1){var re=A(ee,X,q,we);re&&(z.name=re)}else(ee||X)&&!z.name&&(z.name=ee||X)}if(Array.isArray(z.transforms)){var de=z.transforms;for(U=0;U<de.length;U++){var me=de[U];if(!!l.isPlainObject(me))switch(me.type){case"filter":me.filtersrc&&(me.target=me.filtersrc,delete me.filtersrc),me.calendar&&(me.valuecalendar||(me.valuecalendar=me.calendar),delete me.calendar);break;case"groupby":if(me.styles=me.styles||me.style,me.styles&&!Array.isArray(me.styles)){var xe=me.styles,He=Object.keys(xe);me.styles=[];for(var Re=0;Re<He.length;Re++)me.styles.push({target:He[Re],value:xe[He[Re]]})}break}}}D(z,"line")&&delete z.line,"marker"in z&&(D(z.marker,"line")&&delete z.marker.line,D(z,"marker")&&delete z.marker),v.clean(z),z.autobinx&&(delete z.autobinx,delete z.xbins),z.autobiny&&(delete z.autobiny,delete z.ybins),x(z),z.colorbar&&x(z.colorbar),z.marker&&z.marker.colorbar&&x(z.marker.colorbar),z.line&&z.line.colorbar&&x(z.line.colorbar),z.aaxis&&x(z.aaxis),z.baxis&&x(z.baxis)}};function E(T){if(!l.isPlainObject(T))return!1;var M=T.name;return delete T.name,delete T.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function A(T,M,z,U){if(z&&!U)return T;if(U&&!z||!T.trim())return M;if(!M.trim())return T;var F=Math.min(T.length,M.length),V;for(V=0;V<F&&T.charAt(V)===M.charAt(V);V++);var j=T.substr(0,V);return j.trim()}function P(T){var M="middle",z="center";return typeof T=="string"&&(T.indexOf("top")!==-1?M="top":T.indexOf("bottom")!==-1&&(M="bottom"),T.indexOf("left")!==-1?z="left":T.indexOf("right")!==-1&&(z="right")),M+" "+z}function D(T,M){return M in T&&typeof T[M]=="object"&&Object.keys(T[M]).length===0}o.swapXYData=function(T){var M;if(l.swapAttrs(T,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(T.z)&&Array.isArray(T.z[0])&&(T.transpose?delete T.transpose:T.transpose=!0),T.error_x&&T.error_y){var z=T.error_y,U="copy_ystyle"in z?z.copy_ystyle:!(z.color||z.thickness||z.width);l.swapAttrs(T,["error_?.copy_ystyle"]),U&&l.swapAttrs(T,["error_?.color","error_?.thickness","error_?.width"])}if(typeof T.hoverinfo=="string"){var F=T.hoverinfo.split("+");for(M=0;M<F.length;M++)F[M]==="x"?F[M]="y":F[M]==="y"&&(F[M]="x");T.hoverinfo=F.join("+")}},o.coerceTraceIndices=function(T,M){if(a(M))return[M];if(!Array.isArray(M)||!M.length)return T.data.map(function(F,V){return V});if(Array.isArray(M)){for(var z=[],U=0;U<M.length;U++)l.isIndex(M[U],T.data.length)?z.push(M[U]):l.warn("trace index (",M[U],") is not a number or is out of bounds");return z}return M},o.manageArrayContainers=function(T,M,z){var U=T.obj,F=T.parts,V=F.length,j=F[V-1],H=a(j);if(H&&M===null){var Y=F.slice(0,V-1).join("."),J=l.nestedProperty(U,Y).get();J.splice(j,1)}else H&&T.get()===void 0&&T.get()===void 0&&(z[T.astr]=null),T.set(M)};var R=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function S(T){var M=T.search(R);if(M>0)return T.substr(0,M)}o.hasParent=function(T,M){for(var z=S(M);z;){if(z in T)return!0;z=S(z)}return!1};var I=["x","y","z"];o.clearAxisTypes=function(T,M,z){for(var U=0;U<M.length;U++)for(var F=T._fullData[U],V=0;V<3;V++){var j=p(T,F,I[V]);if(j&&j.type!=="log"){var H=j._name,Y=j._id.substr(1);if(Y.substr(0,5)==="scene"){if(z[Y]!==void 0)continue;H=Y+"."+H}var J=H+".type";z[H]===void 0&&z[J]===void 0&&l.nestedProperty(T.layout,J).set(null)}}}},{"../components/color":103,"../lib":244,"../plots/cartesian/axis_ids":295,"../plots/plots":325,"../registry":327,"fast-isnumeric":17,"gl-mat4/fromQuat":23}],275:[function(e,i,o){var a=e("./plot_api");o._doPlot=a._doPlot,o.newPlot=a.newPlot,o.restyle=a.restyle,o.relayout=a.relayout,o.redraw=a.redraw,o.update=a.update,o._guiRestyle=a._guiRestyle,o._guiRelayout=a._guiRelayout,o._guiUpdate=a._guiUpdate,o._storeDirectGUIEdit=a._storeDirectGUIEdit,o.react=a.react,o.extendTraces=a.extendTraces,o.prependTraces=a.prependTraces,o.addTraces=a.addTraces,o.deleteTraces=a.deleteTraces,o.moveTraces=a.moveTraces,o.purge=a.purge,o.addFrames=a.addFrames,o.deleteFrames=a.deleteFrames,o.animate=a.animate,o.setPlotConfig=a.setPlotConfig,o.toImage=e("./to_image"),o.validate=e("./validate"),o.downloadImage=e("../snapshot/download");var s=e("./template_api");o.makeTemplate=s.makeTemplate,o.validateTemplate=s.validateTemplate},{"../snapshot/download":329,"./plot_api":277,"./template_api":282,"./to_image":283,"./validate":284}],276:[function(e,i,o){var a=e("../lib/is_plain_object"),s=e("../lib/noop"),n=e("../lib/loggers"),l=e("../lib/search").sorterAsc,u=e("../registry");o.containerArrayMatch=e("./container_array_match");var h=o.isAddVal=function(p){return p==="add"||a(p)},v=o.isRemoveVal=function(p){return p===null||p==="remove"};o.applyContainerArrayChanges=function(p,_,b,x,E){var A=_.astr,P=u.getComponentMethod(A,"supplyLayoutDefaults"),D=u.getComponentMethod(A,"draw"),R=u.getComponentMethod(A,"drawOne"),S=x.replot||x.recalc||P===s||D===s,I=p.layout,T=p._fullLayout;if(b[""]){Object.keys(b).length>1&&n.warn("Full array edits are incompatible with other edits",A);var M=b[""][""];if(v(M))_.set(null);else if(Array.isArray(M))_.set(M);else return n.warn("Unrecognized full array edit value",A,M),!0;return S?!1:(P(I,T),D(p),!0)}var z=Object.keys(b).map(Number).sort(l),U=_.get(),F=U||[],V=E(T,A).get(),j=[],H=-1,Y=F.length,J,ne,q,we,ee,X,re,de;for(J=0;J<z.length;J++){if(q=z[J],we=b[q],ee=Object.keys(we),X=we[""],re=h(X),q<0||q>F.length-(re?0:1)){n.warn("index out of range",A,q);continue}if(X!==void 0)ee.length>1&&n.warn("Insertion & removal are incompatible with edits to the same index.",A,q),v(X)?j.push(q):re?(X==="add"&&(X={}),F.splice(q,0,X),V&&V.splice(q,0,{})):n.warn("Unrecognized full object edit value",A,q,X),H===-1&&(H=q);else for(ne=0;ne<ee.length;ne++)de=A+"["+q+"].",E(F[q],ee[ne],de).set(we[ee[ne]])}for(J=j.length-1;J>=0;J--)F.splice(j[J],1),V&&V.splice(j[J],1);if(F.length?U||_.set(F):_.set(null),S)return!1;if(P(I,T),R!==s){var me;if(H===-1)me=z;else{for(Y=Math.max(F.length,Y),me=[],J=0;J<z.length&&(q=z[J],!(q>=H));J++)me.push(q);for(J=H;J<Y;J++)me.push(J)}for(J=0;J<me.length;J++)R(p,me[J])}else D(p);return!0}},{"../lib/is_plain_object":245,"../lib/loggers":248,"../lib/noop":253,"../lib/search":263,"../registry":327,"./container_array_match":272}],277:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("has-hover"),l=e("../lib"),u=l.nestedProperty,h=e("../lib/events"),v=e("../lib/queue"),d=e("../registry"),p=e("./plot_schema"),_=e("../plots/plots"),b=e("../plots/cartesian/axes"),x=e("../components/drawing"),E=e("../components/color"),A=e("../plots/cartesian/graph_interact").initInteractions,P=e("../constants/xmlns_namespaces"),D=e("../components/selections").clearOutline,R=e("./plot_config").dfltConfig,S=e("./manage_arrays"),I=e("./helpers"),T=e("./subroutines"),M=e("./edit_types"),z=e("../plots/cartesian/constants").AX_NAME_PATTERN,U=0,F=5;function V(Me,rt,st,ft){var zt;if(Me=l.getGraphDiv(Me),h.init(Me),l.isPlainObject(rt)){var Ue=rt;rt=Ue.data,st=Ue.layout,ft=Ue.config,zt=Ue.frames}var Ae=h.triggerHandler(Me,"plotly_beforeplot",[rt,st,ft]);if(Ae===!1)return Promise.reject();!rt&&!st&&!l.isPlotDiv(Me)&&l.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Me);function Oe(){if(zt)return o.addFrames(Me,zt)}ne(Me,ft),st||(st={}),a.select(Me).classed("js-plotly-plot",!0),x.makeTester(),Array.isArray(Me._promises)||(Me._promises=[]);var We=(Me.data||[]).length===0&&Array.isArray(rt);Array.isArray(rt)&&(I.cleanData(rt),We?Me.data=rt:Me.data.push.apply(Me.data,rt),Me.empty=!1),(!Me.layout||We)&&(Me.layout=I.cleanLayout(st)),_.supplyDefaults(Me);var Ve=Me._fullLayout,lt=Ve._has("cartesian");Ve._replotting=!0,(We||Ve._shouldCreateBgLayer)&&(kt(Me),Ve._shouldCreateBgLayer&&delete Ve._shouldCreateBgLayer),x.initGradients(Me),x.initPatterns(Me),We&&b.saveShowSpikeInitial(Me);var mt=!Me.calcdata||Me.calcdata.length!==(Me._fullData||[]).length;mt&&_.doCalcdata(Me);for(var dt=0;dt<Me.calcdata.length;dt++)Me.calcdata[dt][0].trace=Me._fullData[dt];Me._context.responsive?Me._responsiveChartHandler||(Me._responsiveChartHandler=function(){l.isHidden(Me)||_.resize(Me)},window.addEventListener("resize",Me._responsiveChartHandler)):l.clearResponsive(Me);var At=l.extendFlat({},Ve._size),Bt=0;function ir(){for(var vr=Ve._basePlotModules,Xr=0;Xr<vr.length;Xr++)vr[Xr].drawFramework&&vr[Xr].drawFramework(Me);!Ve._glcanvas&&Ve._has("gl")&&(Ve._glcanvas=Ve._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(bt){return bt.key}),Ve._glcanvas.enter().append("canvas").attr("class",function(bt){return"gl-canvas gl-canvas-"+bt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var $r=Me._context.plotGlPixelRatio;if(Ve._glcanvas){Ve._glcanvas.attr("width",Ve.width*$r).attr("height",Ve.height*$r).style("width",Ve.width+"px").style("height",Ve.height+"px");var Le=Ve._glcanvas.data()[0].regl;if(Le&&(Math.floor(Ve.width*$r)!==Le._gl.drawingBufferWidth||Math.floor(Ve.height*$r)!==Le._gl.drawingBufferHeight)){var De="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Bt)l.error(De);else return l.log(De+" Clearing graph and plotting again."),_.cleanPlot([],{},Me._fullData,Ve),_.supplyDefaults(Me),Ve=Me._fullLayout,_.doCalcdata(Me),Bt++,ir()}}return Ve.modebar.orientation==="h"?Ve._modebardiv.style("height",null).style("width","100%"):Ve._modebardiv.style("width",null).style("height",Ve.height+"px"),_.previousPromises(Me)}function tr(){if(_.clearAutoMarginIds(Me),T.drawMarginPushers(Me),b.allowAutoMargin(Me),Ve._has("pie"))for(var vr=Me._fullData,Xr=0;Xr<vr.length;Xr++){var $r=vr[Xr];$r.type==="pie"&&$r.automargin&&_.allowAutoMargin(Me,"pie."+$r.uid+".automargin")}return _.doAutoMargin(Me),_.previousPromises(Me)}function vt(){if(!!_.didMarginChange(At,Ve._size))return l.syncOrAsync([tr,T.layoutStyles],Me)}function pr(){if(!mt){Gt();return}return l.syncOrAsync([d.getComponentMethod("shapes","calcAutorange"),d.getComponentMethod("annotations","calcAutorange"),Gt],Me)}function Gt(){Me._transitioning||(T.doAutoRangeAndConstraints(Me),We&&b.saveRangeInitial(Me),d.getComponentMethod("rangeslider","calcAutorange")(Me))}function Mr(){return b.draw(Me,We?"":"redraw")}var Rr=[_.previousPromises,Oe,ir,tr,vt];lt&&Rr.push(pr),Rr.push(T.layoutStyles),lt&&Rr.push(Mr,function(Xr){Xr._fullLayout._insideTickLabelsAutorange&&ye(Xr,Xr._fullLayout._insideTickLabelsAutorange).then(function(){Xr._fullLayout._insideTickLabelsAutorange=void 0})}),Rr.push(T.drawData,T.finalDraw,A,_.addLinks,_.rehover,_.redrag,_.reselect,_.doAutoMargin,Yr,_.previousPromises);function Yr(vr){vr._fullLayout._insideTickLabelsAutorange&&We&&b.saveRangeInitial(vr,!0)}var Kr=l.syncOrAsync(Rr,Me);return(!Kr||!Kr.then)&&(Kr=Promise.resolve()),Kr.then(function(){return j(Me),Me})}function j(Me){var rt=Me._fullLayout;rt._redrawFromAutoMarginCount?rt._redrawFromAutoMarginCount--:Me.emit("plotly_afterplot")}function H(Me){return l.extendFlat(R,Me)}function Y(Me,rt){try{Me._fullLayout._paper.style("background",rt)}catch(st){l.error(st)}}function J(Me,rt){var st=E.combine(rt,"white");Y(Me,st)}function ne(Me,rt){if(!Me._context){Me._context=l.extendDeep({},R);var st=a.select("base");Me._context._baseUrl=st.size()&&st.attr("href")?window.location.href.split("#")[0]:""}var ft=Me._context,zt,Ue,Ae;if(rt){for(Ue=Object.keys(rt),zt=0;zt<Ue.length;zt++)Ae=Ue[zt],!(Ae==="editable"||Ae==="edits")&&Ae in ft&&(Ae==="setBackground"&&rt[Ae]==="opaque"?ft[Ae]=J:ft[Ae]=rt[Ae]);rt.plot3dPixelRatio&&!ft.plotGlPixelRatio&&(ft.plotGlPixelRatio=ft.plot3dPixelRatio);var Oe=rt.editable;if(Oe!==void 0)for(ft.editable=Oe,Ue=Object.keys(ft.edits),zt=0;zt<Ue.length;zt++)ft.edits[Ue[zt]]=Oe;if(rt.edits)for(Ue=Object.keys(rt.edits),zt=0;zt<Ue.length;zt++)Ae=Ue[zt],Ae in ft.edits&&(ft.edits[Ae]=rt.edits[Ae]);ft._exportedPlot=rt._exportedPlot}ft.staticPlot&&(ft.editable=!1,ft.edits={},ft.autosizable=!1,ft.scrollZoom=!1,ft.doubleClick=!1,ft.showTips=!1,ft.showLink=!1,ft.displayModeBar=!1),ft.displayModeBar==="hover"&&!n&&(ft.displayModeBar=!0),(ft.setBackground==="transparent"||typeof ft.setBackground!="function")&&(ft.setBackground=Y),ft._hasZeroHeight=ft._hasZeroHeight||Me.clientHeight===0,ft._hasZeroWidth=ft._hasZeroWidth||Me.clientWidth===0;var We=ft.scrollZoom,Ve=ft._scrollZoom={};if(We===!0)Ve.cartesian=1,Ve.gl3d=1,Ve.geo=1,Ve.mapbox=1;else if(typeof We=="string"){var lt=We.split("+");for(zt=0;zt<lt.length;zt++)Ve[lt[zt]]=1}else We!==!1&&(Ve.gl3d=1,Ve.geo=1,Ve.mapbox=1)}function q(Me){if(Me=l.getGraphDiv(Me),!l.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);return I.cleanData(Me.data),I.cleanLayout(Me.layout),Me.calcdata=void 0,o._doPlot(Me).then(function(){return Me.emit("plotly_redraw"),Me})}function we(Me,rt,st,ft){return Me=l.getGraphDiv(Me),_.cleanPlot([],{},Me._fullData||[],Me._fullLayout||{}),_.purge(Me),o._doPlot(Me,rt,st,ft)}function ee(Me,rt){var st=rt+1,ft=[],zt,Ue;for(zt=0;zt<Me.length;zt++)Ue=Me[zt],Ue<0?ft.push(st+Ue):ft.push(Ue);return ft}function X(Me,rt,st){var ft,zt;for(ft=0;ft<rt.length;ft++){if(zt=rt[ft],zt!==parseInt(zt,10))throw new Error("all values in "+st+" must be integers");if(zt>=Me.data.length||zt<-Me.data.length)throw new Error(st+" must be valid indices for gd.data.");if(rt.indexOf(zt,ft+1)>-1||zt>=0&&rt.indexOf(-Me.data.length+zt)>-1||zt<0&&rt.indexOf(Me.data.length+zt)>-1)throw new Error("each index in "+st+" must be unique.")}}function re(Me,rt,st){if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof rt>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(rt)||(rt=[rt]),X(Me,rt,"currentIndices"),typeof st<"u"&&!Array.isArray(st)&&(st=[st]),typeof st<"u"&&X(Me,st,"newIndices"),typeof st<"u"&&rt.length!==st.length)throw new Error("current and new indices must be of equal length.")}function de(Me,rt,st){var ft,zt;if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof rt>"u")throw new Error("traces must be defined.");for(Array.isArray(rt)||(rt=[rt]),ft=0;ft<rt.length;ft++)if(zt=rt[ft],typeof zt!="object"||Array.isArray(zt)||zt===null)throw new Error("all values in traces array must be non-array objects");if(typeof st<"u"&&!Array.isArray(st)&&(st=[st]),typeof st<"u"&&st.length!==rt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function me(Me,rt,st,ft){var zt=l.isPlainObject(ft);if(!Array.isArray(Me.data))throw new Error("gd.data must be an array");if(!l.isPlainObject(rt))throw new Error("update must be a key:value object");if(typeof st>"u")throw new Error("indices must be an integer or array of integers");X(Me,st,"indices");for(var Ue in rt){if(!Array.isArray(rt[Ue])||rt[Ue].length!==st.length)throw new Error("attribute "+Ue+" must be an array of length equal to indices array length");if(zt&&(!(Ue in ft)||!Array.isArray(ft[Ue])||ft[Ue].length!==rt[Ue].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function xe(Me,rt,st,ft){var zt=l.isPlainObject(ft),Ue=[],Ae,Oe,We,Ve,lt;Array.isArray(st)||(st=[st]),st=ee(st,Me.data.length-1);for(var mt in rt)for(var dt=0;dt<st.length;dt++){if(Ae=Me.data[st[dt]],We=u(Ae,mt),Oe=We.get(),Ve=rt[mt][dt],!l.isArrayOrTypedArray(Ve))throw new Error("attribute: "+mt+" index: "+dt+" must be an array");if(!l.isArrayOrTypedArray(Oe))throw new Error("cannot extend missing or non-array attribute: "+mt);if(Oe.constructor!==Ve.constructor)throw new Error("cannot extend array with an array of a different type: "+mt);lt=zt?ft[mt][dt]:ft,s(lt)||(lt=-1),Ue.push({prop:We,target:Oe,insert:Ve,maxp:Math.floor(lt)})}return Ue}function He(Me,rt,st,ft,zt){me(Me,rt,st,ft);for(var Ue=xe(Me,rt,st,ft),Ae={},Oe={},We=0;We<Ue.length;We++){var Ve=Ue[We].prop,lt=Ue[We].maxp,mt=zt(Ue[We].target,Ue[We].insert,lt);Ve.set(mt[0]),Array.isArray(Ae[Ve.astr])||(Ae[Ve.astr]=[]),Ae[Ve.astr].push(mt[1]),Array.isArray(Oe[Ve.astr])||(Oe[Ve.astr]=[]),Oe[Ve.astr].push(Ue[We].target.length)}return{update:Ae,maxPoints:Oe}}function Re(Me,rt){var st=new Me.constructor(Me.length+rt.length);return st.set(Me),st.set(rt,Me.length),st}function Ee(Me,rt,st,ft){Me=l.getGraphDiv(Me);function zt(We,Ve,lt){var mt,dt;if(l.isTypedArray(We))if(lt<0){var At=new We.constructor(0),Bt=Re(We,Ve);lt<0?(mt=Bt,dt=At):(mt=At,dt=Bt)}else if(mt=new We.constructor(lt),dt=new We.constructor(We.length+Ve.length-lt),lt===Ve.length)mt.set(Ve),dt.set(We);else if(lt<Ve.length){var ir=Ve.length-lt;mt.set(Ve.subarray(ir)),dt.set(We),dt.set(Ve.subarray(0,ir),We.length)}else{var tr=lt-Ve.length,vt=We.length-tr;mt.set(We.subarray(vt)),mt.set(Ve,tr),dt.set(We.subarray(0,vt))}else mt=We.concat(Ve),dt=lt>=0&&lt<mt.length?mt.splice(0,mt.length-lt):[];return[mt,dt]}var Ue=He(Me,rt,st,ft,zt),Ae=o.redraw(Me),Oe=[Me,Ue.update,st,Ue.maxPoints];return v.add(Me,o.prependTraces,Oe,Ee,arguments),Ae}function ke(Me,rt,st,ft){Me=l.getGraphDiv(Me);function zt(We,Ve,lt){var mt,dt;if(l.isTypedArray(We))if(lt<=0){var At=new We.constructor(0),Bt=Re(Ve,We);lt<0?(mt=Bt,dt=At):(mt=At,dt=Bt)}else if(mt=new We.constructor(lt),dt=new We.constructor(We.length+Ve.length-lt),lt===Ve.length)mt.set(Ve),dt.set(We);else if(lt<Ve.length){var ir=Ve.length-lt;mt.set(Ve.subarray(0,ir)),dt.set(Ve.subarray(ir)),dt.set(We,ir)}else{var tr=lt-Ve.length;mt.set(Ve),mt.set(We.subarray(0,tr),Ve.length),dt.set(We.subarray(tr))}else mt=Ve.concat(We),dt=lt>=0&&lt<mt.length?mt.splice(lt,mt.length):[];return[mt,dt]}var Ue=He(Me,rt,st,ft,zt),Ae=o.redraw(Me),Oe=[Me,Ue.update,st,Ue.maxPoints];return v.add(Me,o.extendTraces,Oe,ke,arguments),Ae}function $(Me,rt,st){Me=l.getGraphDiv(Me);var ft=[],zt=o.deleteTraces,Ue=$,Ae=[Me,ft],Oe=[Me,rt],We,Ve;for(de(Me,rt,st),Array.isArray(rt)||(rt=[rt]),rt=rt.map(function(lt){return l.extendFlat({},lt)}),I.cleanData(rt),We=0;We<rt.length;We++)Me.data.push(rt[We]);for(We=0;We<rt.length;We++)ft.push(-rt.length+We);if(typeof st>"u")return Ve=o.redraw(Me),v.add(Me,zt,Ae,Ue,Oe),Ve;Array.isArray(st)||(st=[st]);try{re(Me,ft,st)}catch(lt){throw Me.data.splice(Me.data.length-rt.length,rt.length),lt}return v.startSequence(Me),v.add(Me,zt,Ae,Ue,Oe),Ve=o.moveTraces(Me,ft,st),v.stopSequence(Me),Ve}function le(Me,rt){Me=l.getGraphDiv(Me);var st=[],ft=o.addTraces,zt=le,Ue=[Me,st,rt],Ae=[Me,rt],Oe,We;if(typeof rt>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(rt)||(rt=[rt]),X(Me,rt,"indices"),rt=ee(rt,Me.data.length-1),rt.sort(l.sorterDes),Oe=0;Oe<rt.length;Oe+=1)We=Me.data.splice(rt[Oe],1)[0],st.push(We);var Ve=o.redraw(Me);return v.add(Me,ft,Ue,zt,Ae),Ve}function K(Me,rt,st){Me=l.getGraphDiv(Me);var ft=[],zt=[],Ue=K,Ae=K,Oe=[Me,st,rt],We=[Me,rt,st],Ve;if(re(Me,rt,st),rt=Array.isArray(rt)?rt:[rt],typeof st>"u")for(st=[],Ve=0;Ve<rt.length;Ve++)st.push(-rt.length+Ve);for(st=Array.isArray(st)?st:[st],rt=ee(rt,Me.data.length-1),st=ee(st,Me.data.length-1),Ve=0;Ve<Me.data.length;Ve++)rt.indexOf(Ve)===-1&&ft.push(Me.data[Ve]);for(Ve=0;Ve<rt.length;Ve++)zt.push({newIndex:st[Ve],trace:Me.data[rt[Ve]]});for(zt.sort(function(mt,dt){return mt.newIndex-dt.newIndex}),Ve=0;Ve<zt.length;Ve+=1)ft.splice(zt[Ve].newIndex,0,zt[Ve].trace);Me.data=ft;var lt=o.redraw(Me);return v.add(Me,Ue,Oe,Ae,We),lt}function te(Me,rt,st,ft){Me=l.getGraphDiv(Me),I.clearPromiseQueue(Me);var zt={};if(typeof rt=="string")zt[rt]=st;else if(l.isPlainObject(rt))zt=l.extendFlat({},rt),ft===void 0&&(ft=st);else return l.warn("Restyle fail.",rt,st,ft),Promise.reject();Object.keys(zt).length&&(Me.changed=!0);var Ue=I.coerceTraceIndices(Me,ft),Ae=pe(Me,zt,Ue),Oe=Ae.flags;Oe.calc&&(Me.calcdata=void 0),Oe.clearAxisTypes&&I.clearAxisTypes(Me,Ue,{});var We=[];Oe.fullReplot?We.push(o._doPlot):(We.push(_.previousPromises),_.supplyDefaults(Me),Oe.markerSize&&(_.doCalcdata(Me),je(We)),Oe.style&&We.push(T.doTraceStyle),Oe.colorbars&&We.push(T.doColorBars),We.push(j)),We.push(_.rehover,_.redrag,_.reselect),v.add(Me,te,[Me,Ae.undoit,Ae.traces],te,[Me,Ae.redoit,Ae.traces]);var Ve=l.syncOrAsync(We,Me);return(!Ve||!Ve.then)&&(Ve=Promise.resolve()),Ve.then(function(){return Me.emit("plotly_restyle",Ae.eventData),Me})}function ie(Me){return Me===void 0?null:Me}function ce(Me,rt){return rt?function(st,ft,zt){var Ue=u(st,ft),Ae=Ue.set;return Ue.set=function(Oe){var We=(zt||"")+ft;ae(We,Ue.get(),Oe,Me),Ae(Oe)},Ue}:u}function ae(Me,rt,st,ft){if(Array.isArray(rt)||Array.isArray(st))for(var zt=Array.isArray(rt)?rt:[],Ue=Array.isArray(st)?st:[],Ae=Math.max(zt.length,Ue.length),Oe=0;Oe<Ae;Oe++)ae(Me+"["+Oe+"]",zt[Oe],Ue[Oe],ft);else if(l.isPlainObject(rt)||l.isPlainObject(st)){var We=l.isPlainObject(rt)?rt:{},Ve=l.isPlainObject(st)?st:{},lt=l.extendFlat({},We,Ve);for(var mt in lt)ae(Me+"."+mt,We[mt],Ve[mt],ft)}else ft[Me]===void 0&&(ft[Me]=ie(rt))}function ve(Me,rt,st){for(var ft in st){var zt=u(Me,ft);ae(ft,zt.get(),st[ft],rt)}}function pe(Me,rt,st){var ft=Me._fullLayout,zt=Me._fullData,Ue=Me.data,Ae=ft._guiEditing,Oe=ce(ft._preGUI,Ae),We=l.extendDeepAll({},rt),Ve;he(rt);var lt=M.traceFlags(),mt={},dt={},At;function Bt(){return st.map(function(){})}function ir(tn){var Ur=b.id2name(tn);At.indexOf(Ur)===-1&&At.push(Ur)}function tr(tn){return"LAYOUT"+tn+".autorange"}function vt(tn){return"LAYOUT"+tn+".range"}function pr(tn){for(var Ur=tn;Ur<zt.length;Ur++)if(zt[Ur]._input===Ue[tn])return zt[Ur]}function Gt(tn,Ur,Sn){if(Array.isArray(tn)){tn.forEach(function(mn){Gt(mn,Ur,Sn)});return}if(!(tn in rt||I.hasParent(rt,tn))){var wn;if(tn.substr(0,6)==="LAYOUT")wn=Oe(Me.layout,tn.replace("LAYOUT",""));else{var hn=st[Sn],bn=ft._tracePreGUI[pr(hn)._fullInput.uid];wn=ce(bn,Ae)(Ue[hn],tn)}tn in dt||(dt[tn]=Bt()),dt[tn][Sn]===void 0&&(dt[tn][Sn]=ie(wn.get())),Ur!==void 0&&wn.set(Ur)}}function Mr(tn){return function(Ur){return zt[Ur][tn]}}function Rr(tn){return function(Ur,Sn){return Ur===!1?zt[st[Sn]][tn]:null}}for(var Yr in rt){if(I.hasParent(rt,Yr))throw new Error("cannot set "+Yr+" and a parent attribute simultaneously");var Kr=rt[Yr],vr,Xr,$r,Le,De,bt;if((Yr==="autobinx"||Yr==="autobiny")&&(Yr=Yr.charAt(Yr.length-1)+"bins",Array.isArray(Kr)?Kr=Kr.map(Rr(Yr)):Kr===!1?Kr=st.map(Mr(Yr)):Kr=null),mt[Yr]=Kr,Yr.substr(0,6)==="LAYOUT"){$r=Oe(Me.layout,Yr.replace("LAYOUT","")),dt[Yr]=[ie($r.get())],$r.set(Array.isArray(Kr)?Kr[0]:Kr),lt.calc=!0;continue}for(dt[Yr]=Bt(),Ve=0;Ve<st.length;Ve++){vr=Ue[st[Ve]],Xr=pr(st[Ve]);var xt=ft._tracePreGUI[Xr._fullInput.uid];if($r=ce(xt,Ae)(vr,Yr),Le=$r.get(),De=Array.isArray(Kr)?Kr[Ve%Kr.length]:Kr,De!==void 0){var Ct=$r.parts[$r.parts.length-1],Rt=Yr.substr(0,Yr.length-Ct.length-1),Lt=Rt?Rt+".":"",Pt=Rt?u(Xr,Rt).get():Xr;if(bt=p.getTraceValObject(Xr,$r.parts),bt&&bt.impliedEdits&&De!==null)for(var nr in bt.impliedEdits)Gt(l.relativeAttr(Yr,nr),bt.impliedEdits[nr],Ve);else if((Ct==="thicknessmode"||Ct==="lenmode")&&Le!==De&&(De==="fraction"||De==="pixels")&&Pt){var Tr=ft._size,gr=Pt.orient,$t=gr==="top"||gr==="bottom";if(Ct==="thicknessmode"){var mr=$t?Tr.h:Tr.w;Gt(Lt+"thickness",Pt.thickness*(De==="fraction"?1/mr:mr),Ve)}else{var Pr=$t?Tr.w:Tr.h;Gt(Lt+"len",Pt.len*(De==="fraction"?1/Pr:Pr),Ve)}}else if(Yr==="type"&&(De==="pie"!=(Le==="pie")||De==="funnelarea"!=(Le==="funnelarea"))){var wr="x",fr="y";(De==="bar"||Le==="bar")&&vr.orientation==="h"&&(wr="y",fr="x"),l.swapAttrs(vr,["?","?src"],"labels",wr),l.swapAttrs(vr,["d?","?0"],"label",wr),l.swapAttrs(vr,["?","?src"],"values",fr),Le==="pie"||Le==="funnelarea"?(u(vr,"marker.color").set(u(vr,"marker.colors").get()),ft._pielayer.selectAll("g.trace").remove()):d.traceIs(vr,"cartesian")&&u(vr,"marker.colors").set(u(vr,"marker.color").get())}dt[Yr][Ve]=ie(Le);var Ir=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Ir.indexOf(Yr)!==-1){if(Yr==="orientation"){$r.set(De);var Vr=vr.x&&!vr.y?"h":"v";if(($r.get()||Vr)===Xr.orientation)continue}else Yr==="orientationaxes"&&(vr.orientation={v:"h",h:"v"}[Xr.orientation]);I.swapXYData(vr),lt.calc=lt.clearAxisTypes=!0}else _.dataArrayContainers.indexOf($r.parts[0])!==-1?(I.manageArrayContainers($r,De,dt),lt.calc=!0):(bt?bt.arrayOk&&!d.traceIs(Xr,"regl")&&(l.isArrayOrTypedArray(De)||l.isArrayOrTypedArray(Le))?lt.calc=!0:M.update(lt,bt):lt.calc=!0,$r.set(De))}}if(["swapxyaxes","orientationaxes"].indexOf(Yr)!==-1&&b.swap(Me,st),Yr==="orientationaxes"){var _r=u(Me.layout,"hovermode"),Gr=_r.get();Gr==="x"?_r.set("y"):Gr==="y"?_r.set("x"):Gr==="x unified"?_r.set("y unified"):Gr==="y unified"&&_r.set("x unified")}if(["orientation","type"].indexOf(Yr)!==-1){for(At=[],Ve=0;Ve<st.length;Ve++){var qr=Ue[st[Ve]];d.traceIs(qr,"cartesian")&&(ir(qr.xaxis||"x"),ir(qr.yaxis||"y"))}Gt(At.map(tr),!0,0),Gt(At.map(vt),[0,1],0)}}return(lt.calc||lt.plot)&&(lt.fullReplot=!0),{flags:lt,undoit:dt,redoit:mt,traces:st,eventData:l.extendDeepNoArrays([],[We,st])}}function he(Me){var rt=l.counterRegex("axis",".title",!1,!1),st=/colorbar\.title$/,ft=Object.keys(Me),zt,Ue,Ae;for(zt=0;zt<ft.length;zt++)Ue=ft[zt],Ae=Me[Ue],(Ue==="title"||rt.test(Ue)||st.test(Ue))&&(typeof Ae=="string"||typeof Ae=="number")?Oe(Ue,Ue.replace("title","title.text")):Ue.indexOf("titlefont")>-1&&Ue.indexOf("grouptitlefont")===-1?Oe(Ue,Ue.replace("titlefont","title.font")):Ue.indexOf("titleposition")>-1?Oe(Ue,Ue.replace("titleposition","title.position")):Ue.indexOf("titleside")>-1?Oe(Ue,Ue.replace("titleside","title.side")):Ue.indexOf("titleoffset")>-1&&Oe(Ue,Ue.replace("titleoffset","title.offset"));function Oe(We,Ve){Me[Ve]=Me[We],delete Me[We]}}function ye(Me,rt,st){Me=l.getGraphDiv(Me),I.clearPromiseQueue(Me);var ft={};if(typeof rt=="string")ft[rt]=st;else if(l.isPlainObject(rt))ft=l.extendFlat({},rt);else return l.warn("Relayout fail.",rt,st),Promise.reject();Object.keys(ft).length&&(Me.changed=!0);var zt=Fe(Me,ft),Ue=zt.flags;Ue.calc&&(Me.calcdata=void 0);var Ae=[_.previousPromises];Ue.layoutReplot?Ae.push(T.layoutReplot):Object.keys(ft).length&&(_e(Me,Ue,zt)||_.supplyDefaults(Me),Ue.legend&&Ae.push(T.doLegend),Ue.layoutstyle&&Ae.push(T.layoutStyles),Ue.axrange&&je(Ae,zt.rangesAltered),Ue.ticks&&Ae.push(T.doTicksRelayout),Ue.modebar&&Ae.push(T.doModeBar),Ue.camera&&Ae.push(T.doCamera),Ue.colorbars&&Ae.push(T.doColorBars),Ae.push(j)),Ae.push(_.rehover,_.redrag,_.reselect),v.add(Me,ye,[Me,zt.undoit],ye,[Me,zt.redoit]);var Oe=l.syncOrAsync(Ae,Me);return(!Oe||!Oe.then)&&(Oe=Promise.resolve(Me)),Oe.then(function(){return Me.emit("plotly_relayout",zt.eventData),Me})}function _e(Me,rt,st){var ft=Me._fullLayout;if(!rt.axrange)return!1;for(var zt in rt)if(zt!=="axrange"&&rt[zt])return!1;for(var Ue in st.rangesAltered){var Ae=b.id2name(Ue),Oe=Me.layout[Ae],We=ft[Ae];if(We.autorange=Oe.autorange,Oe.range&&(We.range=Oe.range.slice()),We.cleanRange(),We._matchGroup){for(var Ve in We._matchGroup)if(Ve!==Ue){var lt=ft[b.id2name(Ve)];lt.autorange=We.autorange,lt.range=We.range.slice(),lt._input.range=We.range.slice()}}}return!0}function je(Me,rt){var st=rt?function(ft){var zt=[],Ue=!0;for(var Ae in rt){var Oe=b.getFromId(ft,Ae);if(zt.push(Ae),(Oe.ticklabelposition||"").indexOf("inside")!==-1&&Oe._anchorAxis&&zt.push(Oe._anchorAxis._id),Oe._matchGroup)for(var We in Oe._matchGroup)rt[We]||zt.push(We)}return b.draw(ft,zt,{skipTitle:Ue})}:function(ft){return b.draw(ft,"redraw")};Me.push(D,T.doAutoRangeAndConstraints,st,T.drawData,T.finalDraw)}var Je=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,nt=/^[xyz]axis[0-9]*\.autorange$/,at=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Fe(Me,rt){var st=Me.layout,ft=Me._fullLayout,zt=ft._guiEditing,Ue=ce(ft._preGUI,zt),Ae=Object.keys(rt),Oe=b.list(Me),We=l.extendDeepAll({},rt),Ve={},lt,mt,dt;for(he(rt),Ae=Object.keys(rt),mt=0;mt<Ae.length;mt++)if(Ae[mt].indexOf("allaxes")===0){for(dt=0;dt<Oe.length;dt++){var At=Oe[dt]._id.substr(1),Bt=At.indexOf("scene")!==-1?At+".":"",ir=Ae[mt].replace("allaxes",Bt+Oe[dt]._name);rt[ir]||(rt[ir]=rt[Ae[mt]])}delete rt[Ae[mt]]}var tr=M.layoutFlags(),vt={},pr={};function Gt(hn,bn){if(Array.isArray(hn)){hn.forEach(function(Dn){Gt(Dn,bn)});return}if(!(hn in rt||I.hasParent(rt,hn))){var mn=Ue(st,hn);hn in pr||(pr[hn]=ie(mn.get())),bn!==void 0&&mn.set(bn)}}var Mr={},Rr;function Yr(hn){var bn=b.name2id(hn.split(".")[0]);return Mr[bn]=1,bn}for(var Kr in rt){if(I.hasParent(rt,Kr))throw new Error("cannot set "+Kr+" and a parent attribute simultaneously");for(var vr=Ue(st,Kr),Xr=rt[Kr],$r=vr.parts.length,Le=$r-1;Le>0&&typeof vr.parts[Le]!="string";)Le--;var De=vr.parts[Le],bt=vr.parts[Le-1]+"."+De,xt=vr.parts.slice(0,Le).join("."),Ct=u(Me.layout,xt).get(),Rt=u(ft,xt).get(),Lt=vr.get();if(Xr!==void 0){vt[Kr]=Xr,pr[Kr]=De==="reverse"?Xr:ie(Lt);var Pt=p.getLayoutValObject(ft,vr.parts);if(Pt&&Pt.impliedEdits&&Xr!==null)for(var nr in Pt.impliedEdits)Gt(l.relativeAttr(Kr,nr),Pt.impliedEdits[nr]);if(["width","height"].indexOf(Kr)!==-1)if(Xr){Gt("autosize",null);var Tr=Kr==="height"?"width":"height";Gt(Tr,ft[Tr])}else ft[Kr]=Me._initialAutoSize[Kr];else if(Kr==="autosize")Gt("width",Xr?null:ft.width),Gt("height",Xr?null:ft.height);else if(bt.match(Je))Yr(bt),u(ft,xt+"._inputRange").set(null);else if(bt.match(nt)){Yr(bt),u(ft,xt+"._inputRange").set(null);var gr=u(ft,xt).get();gr._inputDomain&&(gr._input.domain=gr._inputDomain.slice())}else bt.match(at)&&u(ft,xt+"._inputDomain").set(null);if(De==="type"){Rr=Ct;var $t=Rt.type==="linear"&&Xr==="log",mr=Rt.type==="log"&&Xr==="linear";if($t||mr){if(!Rr||!Rr.range)Gt(xt+".autorange",!0);else if(Rt.autorange)$t&&(Rr.range=Rr.range[1]>Rr.range[0]?[1,2]:[2,1]);else{var Pr=Rr.range[0],wr=Rr.range[1];$t?(Pr<=0&&wr<=0&&Gt(xt+".autorange",!0),Pr<=0?Pr=wr/1e6:wr<=0&&(wr=Pr/1e6),Gt(xt+".range[0]",Math.log(Pr)/Math.LN10),Gt(xt+".range[1]",Math.log(wr)/Math.LN10)):(Gt(xt+".range[0]",Math.pow(10,Pr)),Gt(xt+".range[1]",Math.pow(10,wr)))}Array.isArray(ft._subplots.polar)&&ft._subplots.polar.length&&ft[vr.parts[0]]&&vr.parts[1]==="radialaxis"&&delete ft[vr.parts[0]]._subplot.viewInitial["radialaxis.range"],d.getComponentMethod("annotations","convertCoords")(Me,Rt,Xr,Gt),d.getComponentMethod("images","convertCoords")(Me,Rt,Xr,Gt)}else Gt(xt+".autorange",!0),Gt(xt+".range",null);u(ft,xt+"._inputRange").set(null)}else if(De.match(z)){var fr=u(ft,Kr).get(),Ir=(Xr||{}).type;(!Ir||Ir==="-")&&(Ir="linear"),d.getComponentMethod("annotations","convertCoords")(Me,fr,Ir,Gt),d.getComponentMethod("images","convertCoords")(Me,fr,Ir,Gt)}var Vr=S.containerArrayMatch(Kr);if(Vr){lt=Vr.array,mt=Vr.index;var _r=Vr.property,Gr=Pt||{editType:"calc"};mt!==""&&_r===""&&(S.isAddVal(Xr)?pr[Kr]=null:S.isRemoveVal(Xr)?pr[Kr]=(u(st,lt).get()||[])[mt]:l.warn("unrecognized full object value",rt)),M.update(tr,Gr),Ve[lt]||(Ve[lt]={});var qr=Ve[lt][mt];qr||(qr=Ve[lt][mt]={}),qr[_r]=Xr,delete rt[Kr]}else De==="reverse"?(Ct.range?Ct.range.reverse():(Gt(xt+".autorange",!0),Ct.range=[1,0]),Rt.autorange?tr.calc=!0:tr.plot=!0):(Kr==="dragmode"&&(Xr===!1&&Lt!==!1||Xr!==!1&&Lt===!1)||ft._has("scatter-like")&&ft._has("regl")&&Kr==="dragmode"&&(Xr==="lasso"||Xr==="select")&&!(Lt==="lasso"||Lt==="select")||ft._has("gl2d")?tr.plot=!0:Pt?M.update(tr,Pt):tr.calc=!0,vr.set(Xr))}}for(lt in Ve){var tn=S.applyContainerArrayChanges(Me,Ue(st,lt),Ve[lt],tr,Ue);tn||(tr.plot=!0)}for(var Ur in Mr){Rr=b.getFromId(Me,Ur);var Sn=Rr&&Rr._constraintGroup;if(Sn){tr.calc=!0;for(var wn in Sn)Mr[wn]||(b.getFromId(Me,wn)._constraintShrinkable=!0)}}return(Ie(Me)||rt.height||rt.width)&&(tr.plot=!0),(tr.plot||tr.calc)&&(tr.layoutReplot=!0),{flags:tr,rangesAltered:Mr,undoit:pr,redoit:vt,eventData:We}}function Ie(Me){var rt=Me._fullLayout,st=rt.width,ft=rt.height;return Me.layout.autosize&&_.plotAutoSize(Me,Me.layout,rt),rt.width!==st||rt.height!==ft}function Ke(Me,rt,st,ft){Me=l.getGraphDiv(Me),I.clearPromiseQueue(Me),l.isPlainObject(rt)||(rt={}),l.isPlainObject(st)||(st={}),Object.keys(rt).length&&(Me.changed=!0),Object.keys(st).length&&(Me.changed=!0);var zt=I.coerceTraceIndices(Me,ft),Ue=pe(Me,l.extendFlat({},rt),zt),Ae=Ue.flags,Oe=Fe(Me,l.extendFlat({},st)),We=Oe.flags;(Ae.calc||We.calc)&&(Me.calcdata=void 0),Ae.clearAxisTypes&&I.clearAxisTypes(Me,zt,st);var Ve=[];We.layoutReplot?Ve.push(T.layoutReplot):Ae.fullReplot?Ve.push(o._doPlot):(Ve.push(_.previousPromises),_e(Me,We,Oe)||_.supplyDefaults(Me),Ae.style&&Ve.push(T.doTraceStyle),(Ae.colorbars||We.colorbars)&&Ve.push(T.doColorBars),We.legend&&Ve.push(T.doLegend),We.layoutstyle&&Ve.push(T.layoutStyles),We.axrange&&je(Ve,Oe.rangesAltered),We.ticks&&Ve.push(T.doTicksRelayout),We.modebar&&Ve.push(T.doModeBar),We.camera&&Ve.push(T.doCamera),Ve.push(j)),Ve.push(_.rehover,_.redrag,_.reselect),v.add(Me,Ke,[Me,Ue.undoit,Oe.undoit,Ue.traces],Ke,[Me,Ue.redoit,Oe.redoit,Ue.traces]);var lt=l.syncOrAsync(Ve,Me);return(!lt||!lt.then)&&(lt=Promise.resolve(Me)),lt.then(function(){return Me.emit("plotly_update",{data:Ue.eventData,layout:Oe.eventData}),Me})}function Qe(Me){return function(st){st._fullLayout._guiEditing=!0;var ft=Me.apply(null,arguments);return st._fullLayout._guiEditing=!1,ft}}var it=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ne=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ht(Me,rt){for(var st=0;st<rt.length;st++){var ft=rt[st],zt=Me.match(ft.pattern);if(zt){var Ue=zt[1]||"";return{head:Ue,tail:Me.substr(Ue.length+1),attr:ft.attr}}}}function Tt(Me,rt){var st=u(rt,Me).get();if(st!==void 0)return st;var ft=Me.split(".");for(ft.pop();ft.length>1;)if(ft.pop(),st=u(rt,ft.join(".")+".uirevision").get(),st!==void 0)return st;return rt.uirevision}function Xt(Me,rt){for(var st=0;st<rt.length;st++)if(rt[st]._fullInput.uid===Me)return st;return-1}function Nt(Me,rt,st){for(var ft=0;ft<rt.length;ft++)if(rt[ft].uid===Me)return ft;return!rt[st]||rt[st].uid?-1:st}function Mt(Me,rt){var st=l.isPlainObject(Me),ft=Array.isArray(Me);return st||ft?(st&&l.isPlainObject(rt)||ft&&Array.isArray(rt))&&JSON.stringify(Me)===JSON.stringify(rt):Me===rt}function Vt(Me,rt,st,ft){var zt=ft._preGUI,Ue,Ae,Oe,We,Ve,lt,mt,dt,At,Bt,ir=[],tr={},vt={};for(Ue in zt){if(Ve=ht(Ue,it),Ve){if(At=Ve.head,Bt=Ve.tail,Ae=Ve.attr||At+".uirevision",Oe=u(ft,Ae).get(),We=Oe&&Tt(Ae,rt),We&&We===Oe){if(lt=zt[Ue],lt===null&&(lt=void 0),mt=u(rt,Ue),dt=mt.get(),Mt(dt,lt)){dt===void 0&&Bt==="autorange"&&ir.push(At),mt.set(ie(u(ft,Ue).get()));continue}else if(Bt==="autorange"||Bt.substr(0,6)==="range["){var pr=zt[At+".range[0]"],Gt=zt[At+".range[1]"],Mr=zt[At+".autorange"];if(Mr||Mr===null&&pr===null&&Gt===null){if(!(At in tr)){var Rr=u(rt,At).get();tr[At]=Rr&&(Rr.autorange||Rr.autorange!==!1&&(!Rr.range||Rr.range.length!==2))}if(tr[At]){mt.set(ie(u(ft,Ue).get()));continue}}}}}else l.warn("unrecognized GUI edit: "+Ue);delete zt[Ue],Ve&&Ve.tail.substr(0,6)==="range["&&(vt[Ve.head]=1)}for(var Yr=0;Yr<ir.length;Yr++){var Kr=ir[Yr];if(vt[Kr]){var vr=u(rt,Kr).get();vr&&delete vr.autorange}}var Xr=ft._tracePreGUI;for(var $r in Xr){var Le=Xr[$r],De=null,bt;for(Ue in Le){if(!De){var xt=Xt($r,st);if(xt<0){delete Xr[$r];break}var Ct=st[xt];bt=Ct._fullInput;var Rt=Nt($r,Me,bt.index);if(Rt<0){delete Xr[$r];break}De=Me[Rt]}if(Ve=ht(Ue,Ne),Ve){if(Ve.attr?(Oe=u(ft,Ve.attr).get(),We=Oe&&Tt(Ve.attr,rt)):(Oe=bt.uirevision,We=De.uirevision,We===void 0&&(We=rt.uirevision)),We&&We===Oe&&(lt=Le[Ue],lt===null&&(lt=void 0),mt=u(De,Ue),dt=mt.get(),Mt(dt,lt))){mt.set(ie(u(bt,Ue).get()));continue}}else l.warn("unrecognized GUI edit: "+Ue+" in trace uid "+$r);delete Le[Ue]}}}function Yt(Me,rt,st,ft){var zt,Ue;function Ae(){return o.addFrames(Me,zt)}Me=l.getGraphDiv(Me),I.clearPromiseQueue(Me);var Oe=Me._fullData,We=Me._fullLayout;if(!l.isPlotDiv(Me)||!Oe||!We)Ue=o.newPlot(Me,rt,st,ft);else{if(l.isPlainObject(rt)){var Ve=rt;rt=Ve.data,st=Ve.layout,ft=Ve.config,zt=Ve.frames}var lt=!1;if(ft){var mt=l.extendDeep({},Me._context);Me._context=void 0,ne(Me,ft),lt=Wt(mt,Me._context)}Me.data=rt||[],I.cleanData(Me.data),Me.layout=st||{},I.cleanLayout(Me.layout),Vt(Me.data,Me.layout,Oe,We),_.supplyDefaults(Me,{skipUpdateCalc:!0});var dt=Me._fullData,At=Me._fullLayout,Bt=At.datarevision===void 0,ir=At.transition,tr=Nr(Me,We,At,Bt,ir),vt=tr.newDataRevision,pr=cr(Me,Oe,dt,Bt,ir,vt);if(Ie(Me)&&(tr.layoutReplot=!0),pr.calc||tr.calc){Me.calcdata=void 0;for(var Gt=Object.getOwnPropertyNames(At),Mr=0;Mr<Gt.length;Mr++){var Rr=Gt[Mr],Yr=Rr.substring(0,5);if(Yr==="xaxis"||Yr==="yaxis"){var Kr=At[Rr]._emptyCategories;Kr&&Kr()}}}else _.supplyDefaultsUpdateCalc(Me.calcdata,dt);var vr=[];if(zt&&(Me._transitionData={},_.createTransitionData(Me),vr.push(Ae)),At.transition&&!lt&&(pr.anim||tr.anim))tr.ticks&&vr.push(T.doTicksRelayout),_.doCalcdata(Me),T.doAutoRangeAndConstraints(Me),vr.push(function(){return _.transitionFromReact(Me,pr,tr,We)});else if(pr.fullReplot||tr.layoutReplot||lt)Me._fullLayout._skipDefaults=!0,vr.push(o._doPlot);else{for(var Xr in tr.arrays){var $r=tr.arrays[Xr];if($r.length){var Le=d.getComponentMethod(Xr,"drawOne");if(Le!==l.noop)for(var De=0;De<$r.length;De++)Le(Me,$r[De]);else{var bt=d.getComponentMethod(Xr,"draw");if(bt===l.noop)throw new Error("cannot draw components: "+Xr);bt(Me)}}}vr.push(_.previousPromises),pr.style&&vr.push(T.doTraceStyle),(pr.colorbars||tr.colorbars)&&vr.push(T.doColorBars),tr.legend&&vr.push(T.doLegend),tr.layoutstyle&&vr.push(T.layoutStyles),tr.axrange&&je(vr),tr.ticks&&vr.push(T.doTicksRelayout),tr.modebar&&vr.push(T.doModeBar),tr.camera&&vr.push(T.doCamera),vr.push(j)}vr.push(_.rehover,_.redrag,_.reselect),Ue=l.syncOrAsync(vr,Me),(!Ue||!Ue.then)&&(Ue=Promise.resolve(Me))}return Ue.then(function(){return Me.emit("plotly_react",{data:rt,layout:st}),Me})}function cr(Me,rt,st,ft,zt,Ue){var Ae=rt.length===st.length;if(!zt&&!Ae)return{fullReplot:!0,calc:!0};var Oe=M.traceFlags();Oe.arrays={},Oe.nChanges=0,Oe.nChangesAnim=0;var We,Ve;function lt(At){var Bt=p.getTraceValObject(Ve,At);return!Ve._module.animatable&&Bt.anim&&(Bt.anim=!1),Bt}var mt={getValObject:lt,flags:Oe,immutable:ft,transition:zt,newDataRevision:Ue,gd:Me},dt={};for(We=0;We<rt.length;We++)if(st[We]){if(Ve=st[We]._fullInput,_.hasMakesDataTransform(Ve)&&(Ve=st[We]),dt[Ve.uid])continue;dt[Ve.uid]=1,er(rt[We]._fullInput,Ve,[],mt)}return(Oe.calc||Oe.plot)&&(Oe.fullReplot=!0),zt&&Oe.nChanges&&Oe.nChangesAnim&&(Oe.anim=Oe.nChanges===Oe.nChangesAnim&&Ae?"all":"some"),Oe}function Nr(Me,rt,st,ft,zt){var Ue=M.layoutFlags();Ue.arrays={},Ue.rangesAltered={},Ue.nChanges=0,Ue.nChangesAnim=0;function Ae(We){return p.getLayoutValObject(st,We)}var Oe={getValObject:Ae,flags:Ue,immutable:ft,transition:zt,gd:Me};return er(rt,st,[],Oe),(Ue.plot||Ue.calc)&&(Ue.layoutReplot=!0),zt&&Ue.nChanges&&Ue.nChangesAnim&&(Ue.anim=Ue.nChanges===Ue.nChangesAnim?"all":"some"),Ue}function er(Me,rt,st,ft){var zt,Ue,Ae,Oe=ft.getValObject,We=ft.flags,Ve=ft.immutable,lt=ft.inArray,mt=ft.arrayIndex;function dt(){var xt=zt.editType;if(lt&&xt.indexOf("arraydraw")!==-1){l.pushUnique(We.arrays[lt],mt);return}M.update(We,zt),xt!=="none"&&We.nChanges++,ft.transition&&zt.anim&&We.nChangesAnim++,(Je.test(Ae)||nt.test(Ae))&&(We.rangesAltered[st[0]]=1),at.test(Ae)&&u(rt,"_inputDomain").set(null),Ue==="datarevision"&&(We.newDataRevision=1)}function At(xt){return xt.valType==="data_array"||xt.arrayOk}for(Ue in Me){if(We.calc&&!ft.transition)return;var Bt=Me[Ue],ir=rt[Ue],tr=st.concat(Ue);if(Ae=tr.join("."),!(Ue.charAt(0)==="_"||typeof Bt=="function"||Bt===ir)){if((Ue==="tick0"||Ue==="dtick")&&st[0]!=="geo"){var vt=rt.tickmode;if(vt==="auto"||vt==="array"||!vt)continue}if(!(Ue==="range"&&rt.autorange)&&!((Ue==="zmin"||Ue==="zmax")&&rt.type==="contourcarpet")&&(zt=Oe(tr),!!zt&&!(zt._compareAsJSON&&JSON.stringify(Bt)===JSON.stringify(ir)))){var pr=zt.valType,Gt,Mr=At(zt),Rr=Array.isArray(Bt),Yr=Array.isArray(ir);if(Rr&&Yr){var Kr="_input_"+Ue,vr=Me[Kr],Xr=rt[Kr];if(Array.isArray(vr)&&vr===Xr)continue}if(ir===void 0)Mr&&Rr?We.calc=!0:dt();else if(zt._isLinkedToArray){var $r=[],Le=!1;lt||(We.arrays[Ue]=$r);var De=Math.min(Bt.length,ir.length),bt=Math.max(Bt.length,ir.length);if(De!==bt)if(zt.editType==="arraydraw")Le=!0;else{dt();continue}for(Gt=0;Gt<De;Gt++)er(Bt[Gt],ir[Gt],tr.concat(Gt),l.extendFlat({inArray:Ue,arrayIndex:Gt},ft));if(Le)for(Gt=De;Gt<bt;Gt++)$r.push(Gt)}else!pr&&l.isPlainObject(Bt)?er(Bt,ir,tr,ft):Mr?Rr&&Yr?(Ve&&(We.calc=!0),(Ve||ft.newDataRevision)&&dt()):Rr!==Yr?We.calc=!0:dt():Rr&&Yr?(Bt.length!==ir.length||String(Bt)!==String(ir))&&dt():dt()}}}for(Ue in rt)if(!(Ue in Me||Ue.charAt(0)==="_"||typeof rt[Ue]=="function"))if(zt=Oe(st.concat(Ue)),At(zt)&&Array.isArray(rt[Ue])){We.calc=!0;return}else dt()}function Wt(Me,rt){var st;for(st in Me)if(st.charAt(0)!=="_"){var ft=Me[st],zt=rt[st];if(ft!==zt)if(l.isPlainObject(ft)&&l.isPlainObject(zt)){if(Wt(ft,zt))return!0}else if(Array.isArray(ft)&&Array.isArray(zt)){if(ft.length!==zt.length)return!0;for(var Ue=0;Ue<ft.length;Ue++)if(ft[Ue]!==zt[Ue])if(l.isPlainObject(ft[Ue])&&l.isPlainObject(zt[Ue])){if(Wt(ft[Ue],zt[Ue]))return!0}else return!0}else return!0}}function dr(Me,rt,st){if(Me=l.getGraphDiv(Me),!l.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ft=Me._transitionData;ft._frameQueue||(ft._frameQueue=[]),st=_.supplyAnimationDefaults(st);var zt=st.transition,Ue=st.frame;ft._frameWaitingCnt===void 0&&(ft._frameWaitingCnt=0);function Ae(Ve){return Array.isArray(zt)?Ve>=zt.length?zt[0]:zt[Ve]:zt}function Oe(Ve){return Array.isArray(Ue)?Ve>=Ue.length?Ue[0]:Ue[Ve]:Ue}function We(Ve,lt){var mt=0;return function(){if(Ve&&++mt===lt)return Ve()}}return new Promise(function(Ve,lt){function mt(){if(ft._frameQueue.length!==0){for(;ft._frameQueue.length;){var De=ft._frameQueue.pop();De.onInterrupt&&De.onInterrupt()}Me.emit("plotly_animationinterrupted",[])}}function dt(De){if(De.length!==0){for(var bt=0;bt<De.length;bt++){var xt;De[bt].type==="byname"?xt=_.computeFrame(Me,De[bt].name):xt=De[bt].data;var Ct=Oe(bt),Rt=Ae(bt);Rt.duration=Math.min(Rt.duration,Ct.duration);var Lt={frame:xt,name:De[bt].name,frameOpts:Ct,transitionOpts:Rt};bt===De.length-1&&(Lt.onComplete=We(Ve,2),Lt.onInterrupt=lt),ft._frameQueue.push(Lt)}st.mode==="immediate"&&(ft._lastFrameAt=-1/0),ft._animationRaf||ir()}}function At(){Me.emit("plotly_animated"),window.cancelAnimationFrame(ft._animationRaf),ft._animationRaf=null}function Bt(){ft._currentFrame&&ft._currentFrame.onComplete&&ft._currentFrame.onComplete();var De=ft._currentFrame=ft._frameQueue.shift();if(De){var bt=De.name?De.name.toString():null;Me._fullLayout._currentFrame=bt,ft._lastFrameAt=Date.now(),ft._timeToNext=De.frameOpts.duration,_.transition(Me,De.frame.data,De.frame.layout,I.coerceTraceIndices(Me,De.frame.traces),De.frameOpts,De.transitionOpts).then(function(){De.onComplete&&De.onComplete()}),Me.emit("plotly_animatingframe",{name:bt,frame:De.frame,animation:{frame:De.frameOpts,transition:De.transitionOpts}})}else At()}function ir(){Me.emit("plotly_animating"),ft._lastFrameAt=-1/0,ft._timeToNext=0,ft._runningTransitions=0,ft._currentFrame=null;var De=function(){ft._animationRaf=window.requestAnimationFrame(De),Date.now()-ft._lastFrameAt>ft._timeToNext&&Bt()};De()}var tr=0;function vt(De){return Array.isArray(zt)?tr>=zt.length?De.transitionOpts=zt[tr]:De.transitionOpts=zt[0]:De.transitionOpts=zt,tr++,De}var pr,Gt,Mr=[],Rr=rt==null,Yr=Array.isArray(rt),Kr=!Rr&&!Yr&&l.isPlainObject(rt);if(Kr)Mr.push({type:"object",data:vt(l.extendFlat({},rt))});else if(Rr||["string","number"].indexOf(typeof rt)!==-1)for(pr=0;pr<ft._frames.length;pr++)Gt=ft._frames[pr],!!Gt&&(Rr||String(Gt.group)===String(rt))&&Mr.push({type:"byname",name:String(Gt.name),data:vt({name:Gt.name})});else if(Yr)for(pr=0;pr<rt.length;pr++){var vr=rt[pr];["number","string"].indexOf(typeof vr)!==-1?(vr=String(vr),Mr.push({type:"byname",name:vr,data:vt({name:vr})})):l.isPlainObject(vr)&&Mr.push({type:"object",data:vt(l.extendFlat({},vr))})}for(pr=0;pr<Mr.length;pr++)if(Gt=Mr[pr],Gt.type==="byname"&&!ft._frameHash[Gt.data.name]){l.warn('animate failure: frame not found: "'+Gt.data.name+'"'),lt();return}["next","immediate"].indexOf(st.mode)!==-1&&mt(),st.direction==="reverse"&&Mr.reverse();var Xr=Me._fullLayout._currentFrame;if(Xr&&st.fromcurrent){var $r=-1;for(pr=0;pr<Mr.length;pr++)if(Gt=Mr[pr],Gt.type==="byname"&&Gt.name===Xr){$r=pr;break}if($r>0&&$r<Mr.length-1){var Le=[];for(pr=0;pr<Mr.length;pr++)Gt=Mr[pr],(Mr[pr].type!=="byname"||pr>$r)&&Le.push(Gt);Mr=Le}}Mr.length>0?dt(Mr):(Me.emit("plotly_animated"),Ve())})}function zr(Me,rt,st){if(Me=l.getGraphDiv(Me),rt==null)return Promise.resolve();if(!l.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ft,zt,Ue,Ae,Oe=Me._transitionData._frames,We=Me._transitionData._frameHash;if(!Array.isArray(rt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+rt);var Ve=Oe.length+rt.length*2,lt=[],mt={};for(ft=rt.length-1;ft>=0;ft--)if(!!l.isPlainObject(rt[ft])){var dt=rt[ft].name,At=(We[dt]||mt[dt]||{}).name,Bt=rt[ft].name,ir=We[At]||mt[At];At&&Bt&&typeof Bt=="number"&&ir&&U<F&&(U++,l.warn('addFrames: overwriting frame "'+(We[At]||mt[At]).name+'" with a frame whose name of type "number" also equates to "'+At+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),U===F&&l.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),mt[dt]={name:dt},lt.push({frame:_.supplyFrameDefaults(rt[ft]),index:st&&st[ft]!==void 0&&st[ft]!==null?st[ft]:Ve+ft})}lt.sort(function(Kr,vr){return Kr.index>vr.index?-1:Kr.index<vr.index?1:0});var tr=[],vt=[],pr=Oe.length;for(ft=lt.length-1;ft>=0;ft--){if(zt=lt[ft].frame,typeof zt.name=="number"&&l.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!zt.name)for(;We[zt.name="frame "+Me._transitionData._counter++];);if(We[zt.name]){for(Ue=0;Ue<Oe.length&&(Oe[Ue]||{}).name!==zt.name;Ue++);tr.push({type:"replace",index:Ue,value:zt}),vt.unshift({type:"replace",index:Ue,value:Oe[Ue]})}else Ae=Math.max(0,Math.min(lt[ft].index,pr)),tr.push({type:"insert",index:Ae,value:zt}),vt.unshift({type:"delete",index:Ae}),pr++}var Gt=_.modifyFrames,Mr=_.modifyFrames,Rr=[Me,vt],Yr=[Me,tr];return v&&v.add(Me,Gt,Rr,Mr,Yr),_.modifyFrames(Me,tr)}function Dr(Me,rt){if(Me=l.getGraphDiv(Me),!l.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);var st,ft,zt=Me._transitionData._frames,Ue=[],Ae=[];if(!rt)for(rt=[],st=0;st<zt.length;st++)rt.push(st);for(rt=rt.slice(),rt.sort(),st=rt.length-1;st>=0;st--)ft=rt[st],Ue.push({type:"delete",index:ft}),Ae.unshift({type:"insert",index:ft,value:zt[ft]});var Oe=_.modifyFrames,We=_.modifyFrames,Ve=[Me,Ae],lt=[Me,Ue];return v&&v.add(Me,Oe,Ve,We,lt),_.modifyFrames(Me,Ue)}function $e(Me){Me=l.getGraphDiv(Me);var rt=Me._fullLayout||{},st=Me._fullData||[];return _.cleanPlot([],{},st,rt),_.purge(Me),h.purge(Me),rt._container&&rt._container.remove(),delete Me._context,Me}function pt(Me){var rt=Me._fullLayout,st=Me.getBoundingClientRect();if(!l.equalDomRects(st,rt._lastBBox)){var ft=rt._invTransform=l.inverseTransformMatrix(l.getFullTransformMatrix(Me));rt._invScaleX=Math.sqrt(ft[0][0]*ft[0][0]+ft[0][1]*ft[0][1]+ft[0][2]*ft[0][2]),rt._invScaleY=Math.sqrt(ft[1][0]*ft[1][0]+ft[1][1]*ft[1][1]+ft[1][2]*ft[1][2]),rt._lastBBox=st}}function kt(Me){var rt=a.select(Me),st=Me._fullLayout;if(st._calcInverseTransform=pt,st._calcInverseTransform(Me),st._container=rt.selectAll(".plot-container").data([0]),st._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),st._paperdiv=st._container.selectAll(".svg-container").data([0]),st._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),st._glcontainer=st._paperdiv.selectAll(".gl-container").data([{}]),st._glcontainer.enter().append("div").classed("gl-container",!0),st._paperdiv.selectAll(".main-svg").remove(),st._paperdiv.select(".modebar-container").remove(),st._paper=st._paperdiv.insert("svg",":first-child").classed("main-svg",!0),st._toppaper=st._paperdiv.append("svg").classed("main-svg",!0),st._modebardiv=st._paperdiv.append("div"),delete st._modeBar,st._hoverpaper=st._paperdiv.append("svg").classed("main-svg",!0),!st._uid){var ft={};a.selectAll("defs").each(function(){this.id&&(ft[this.id.split("-")[1]]=1)}),st._uid=l.randstr(ft)}st._paperdiv.selectAll(".main-svg").attr(P.svgAttrs),st._defs=st._paper.append("defs").attr("id","defs-"+st._uid),st._clips=st._defs.append("g").classed("clips",!0),st._topdefs=st._toppaper.append("defs").attr("id","topdefs-"+st._uid),st._topclips=st._topdefs.append("g").classed("clips",!0),st._bgLayer=st._paper.append("g").classed("bglayer",!0),st._draggers=st._paper.append("g").classed("draglayer",!0);var zt=st._paper.append("g").classed("layer-below",!0);st._imageLowerLayer=zt.append("g").classed("imagelayer",!0),st._shapeLowerLayer=zt.append("g").classed("shapelayer",!0),st._cartesianlayer=st._paper.append("g").classed("cartesianlayer",!0),st._polarlayer=st._paper.append("g").classed("polarlayer",!0),st._smithlayer=st._paper.append("g").classed("smithlayer",!0),st._ternarylayer=st._paper.append("g").classed("ternarylayer",!0),st._geolayer=st._paper.append("g").classed("geolayer",!0),st._funnelarealayer=st._paper.append("g").classed("funnelarealayer",!0),st._pielayer=st._paper.append("g").classed("pielayer",!0),st._iciclelayer=st._paper.append("g").classed("iciclelayer",!0),st._treemaplayer=st._paper.append("g").classed("treemaplayer",!0),st._sunburstlayer=st._paper.append("g").classed("sunburstlayer",!0),st._indicatorlayer=st._toppaper.append("g").classed("indicatorlayer",!0),st._glimages=st._paper.append("g").classed("glimages",!0);var Ue=st._toppaper.append("g").classed("layer-above",!0);st._imageUpperLayer=Ue.append("g").classed("imagelayer",!0),st._shapeUpperLayer=Ue.append("g").classed("shapelayer",!0),st._selectionLayer=st._toppaper.append("g").classed("selectionlayer",!0),st._infolayer=st._toppaper.append("g").classed("infolayer",!0),st._menulayer=st._toppaper.append("g").classed("menulayer",!0),st._zoomlayer=st._toppaper.append("g").classed("zoomlayer",!0),st._hoverlayer=st._hoverpaper.append("g").classed("hoverlayer",!0),st._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Me.emit("plotly_framework")}o.animate=dr,o.addFrames=zr,o.deleteFrames=Dr,o.addTraces=$,o.deleteTraces=le,o.extendTraces=Ee,o.moveTraces=K,o.prependTraces=ke,o.newPlot=we,o._doPlot=V,o.purge=$e,o.react=Yt,o.redraw=q,o.relayout=ye,o.restyle=te,o.setPlotConfig=H,o.update=Ke,o._guiRelayout=Qe(ye),o._guiRestyle=Qe(te),o._guiUpdate=Qe(Ke),o._storeDirectGUIEdit=ve},{"../components/color":103,"../components/drawing":125,"../components/selections":191,"../constants/xmlns_namespaces":225,"../lib":244,"../lib/events":237,"../lib/queue":259,"../plots/cartesian/axes":291,"../plots/cartesian/constants":298,"../plots/cartesian/graph_interact":301,"../plots/plots":325,"../registry":327,"./edit_types":273,"./helpers":274,"./manage_arrays":276,"./plot_config":278,"./plot_schema":279,"./subroutines":281,"@plotly/d3":11,"fast-isnumeric":17,"has-hover":48}],278:[function(e,i,o){var a={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},s={};function n(l,u){for(var h in l){var v=l[h];v.valType?u[h]=v.dflt:(u[h]||(u[h]={}),n(v,u[h]))}}n(a,s),i.exports={configAttributes:a,dfltConfig:s}},{}],279:[function(e,i,o){var a=e("../registry"),s=e("../lib"),n=e("../plots/attributes"),l=e("../plots/layout_attributes"),u=e("../plots/frame_attributes"),h=e("../plots/animation_attributes"),v=e("./plot_config").configAttributes,d=e("./edit_types"),p=s.extendDeepAll,_=s.isPlainObject,b=s.isArrayOrTypedArray,x=s.nestedProperty,E=s.valObjectMeta,A="_isSubplotObj",P="_isLinkedToArray",D="_arrayAttrRegexps",R="_deprecated",S=[A,P,D,R];o.IS_SUBPLOT_OBJ=A,o.IS_LINKED_TO_ARRAY=P,o.DEPRECATED=R,o.UNDERSCORE_ATTRS=S,o.get=function(){var we={};a.allTypes.forEach(function(X){we[X]=z(X)});var ee={};return Object.keys(a.transformsRegistry).forEach(function(X){ee[X]=F(X)}),{defs:{valObjects:E,metaKeys:S.concat(["description","role","editType","impliedEdits"]),editType:{traces:d.traces,layout:d.layout},impliedEdits:{}},traces:we,layout:U(),transforms:ee,frames:V(),animation:j(h),config:j(v)}},o.crawl=function(we,ee,X,re){var de=X||0;re=re||"",Object.keys(we).forEach(function(me){var xe=we[me];if(S.indexOf(me)===-1){var He=(re?re+".":"")+me;ee(xe,me,we,de,He),!o.isValObject(xe)&&_(xe)&&me!=="impliedEdits"&&o.crawl(xe,ee,de+1,He)}})},o.isValObject=function(we){return we&&we.valType!==void 0},o.findArrayAttributes=function(we){var ee=[],X=[],re=[],de,me;function xe(le,K,te,ie){X=X.slice(0,ie).concat([K]),re=re.slice(0,ie).concat([le&&le._isLinkedToArray]);var ce=le&&(le.valType==="data_array"||le.arrayOk===!0)&&!(X[ie-1]==="colorbar"&&(K==="ticktext"||K==="tickvals"));!ce||He(de,0,"")}function He(le,K,te){var ie=le[X[K]],ce=te+X[K];if(K===X.length-1)b(ie)&&ee.push(me+ce);else if(re[K]){if(Array.isArray(ie))for(var ae=0;ae<ie.length;ae++)_(ie[ae])&&He(ie[ae],K+1,ce+"["+ae+"].")}else _(ie)&&He(ie,K+1,ce+".")}de=we,me="",o.crawl(n,xe),we._module&&we._module.attributes&&o.crawl(we._module.attributes,xe);var Re=we.transforms;if(Re)for(var Ee=0;Ee<Re.length;Ee++){var ke=Re[Ee],$=ke._module;$&&(me="transforms["+Ee+"].",de=ke,o.crawl($.attributes,xe))}return ee},o.getTraceValObject=function(we,ee){var X=ee[0],re=1,de,me;if(X==="transforms"){if(ee.length===1)return n.transforms;var xe=we.transforms;if(!Array.isArray(xe)||!xe.length)return!1;var He=ee[1];if(!M(He)||He>=xe.length)return!1;de=(a.transformsRegistry[xe[He].type]||{}).attributes,me=de&&de[ee[2]],re=3}else{var Re=we._module;if(Re||(Re=(a.modules[we.type||n.type.dflt]||{})._module),!Re)return!1;if(de=Re.attributes,me=de&&de[X],!me){var Ee=Re.basePlotModule;Ee&&Ee.attributes&&(me=Ee.attributes[X])}me||(me=n[X])}return T(me,ee,re)},o.getLayoutValObject=function(we,ee){var X=I(we,ee[0]);return T(X,ee,1)};function I(we,ee){var X,re,de,me,xe=we._basePlotModules;if(xe){var He;for(X=0;X<xe.length;X++){if(de=xe[X],de.attrRegex&&de.attrRegex.test(ee)){if(de.layoutAttrOverrides)return de.layoutAttrOverrides;!He&&de.layoutAttributes&&(He=de.layoutAttributes)}var Re=de.baseLayoutAttrOverrides;if(Re&&ee in Re)return Re[ee]}if(He)return He}var Ee=we._modules;if(Ee){for(X=0;X<Ee.length;X++)if(me=Ee[X].layoutAttributes,me&&ee in me)return me[ee]}for(re in a.componentsRegistry){if(de=a.componentsRegistry[re],de.name==="colorscale"&&ee.indexOf("coloraxis")===0)return de.layoutAttributes[ee];if(!de.schema&&ee===de.name)return de.layoutAttributes}return ee in l?l[ee]:!1}function T(we,ee,X){if(!we)return!1;if(we._isLinkedToArray){if(M(ee[X]))X++;else if(X<ee.length)return!1}for(;X<ee.length;X++){var re=we[ee[X]];if(_(re))we=re;else break;if(X===ee.length-1)break;if(we._isLinkedToArray){if(X++,!M(ee[X]))return!1}else if(we.valType==="info_array"){X++;var de=ee[X];if(!M(de))return!1;var me=we.items;if(Array.isArray(me)){if(de>=me.length)return!1;if(we.dimensions===2){if(X++,ee.length===X)return we;var xe=ee[X];if(!M(xe))return!1;we=me[de][xe]}else we=me[de]}else we=me}}return we}function M(we){return we===Math.round(we)&&we>=0}function z(we){var ee,X;ee=a.modules[we]._module,X=ee.basePlotModule;var re={};re.type=null;var de=p({},n),me=p({},ee.attributes);o.crawl(me,function(Re,Ee,ke,$,le){x(de,le).set(void 0),Re===void 0&&x(me,le).set(void 0)}),p(re,de),a.traceIs(we,"noOpacity")&&delete re.opacity,a.traceIs(we,"showLegend")||(delete re.showlegend,delete re.legendgroup),a.traceIs(we,"noHover")&&(delete re.hoverinfo,delete re.hoverlabel),ee.selectPoints||delete re.selectedpoints,p(re,me),X.attributes&&p(re,X.attributes),re.type=we;var xe={meta:ee.meta||{},categories:ee.categories||{},animatable:Boolean(ee.animatable),type:we,attributes:j(re)};if(ee.layoutAttributes){var He={};p(He,ee.layoutAttributes),xe.layoutAttributes=j(He)}return ee.animatable||o.crawl(xe,function(Re){o.isValObject(Re)&&"anim"in Re&&delete Re.anim}),xe}function U(){var we={},ee,X;p(we,l);for(ee in a.subplotsRegistry)if(X=a.subplotsRegistry[ee],!!X.layoutAttributes)if(Array.isArray(X.attr))for(var re=0;re<X.attr.length;re++)ne(we,X,X.attr[re]);else{var de=X.attr==="subplot"?X.name:X.attr;ne(we,X,de)}for(ee in a.componentsRegistry){X=a.componentsRegistry[ee];var me=X.schema;if(me&&(me.subplots||me.layout)){var xe=me.subplots;if(xe&&xe.xaxis&&!xe.yaxis)for(var He in xe.xaxis)delete we.yaxis[He]}else X.name==="colorscale"?p(we,X.layoutAttributes):X.layoutAttributes&&q(we,X.layoutAttributes,X.name)}return{layoutAttributes:j(we)}}function F(we){var ee=a.transformsRegistry[we],X=p({},ee.attributes);return Object.keys(a.componentsRegistry).forEach(function(re){var de=a.componentsRegistry[re];de.schema&&de.schema.transforms&&de.schema.transforms[we]&&Object.keys(de.schema.transforms[we]).forEach(function(me){q(X,de.schema.transforms[we][me],me)})}),{attributes:j(X)}}function V(){var we={frames:p({},u)};return j(we),we.frames}function j(we){return H(we),Y(we),J(we),we}function H(we){function ee(re){return{valType:"string",editType:"none"}}function X(re,de,me){o.isValObject(re)?(re.arrayOk===!0||re.valType==="data_array")&&(me[de+"src"]=ee()):_(re)&&(re.role="object")}o.crawl(we,X)}function Y(we){function ee(X,re,de){if(!!X){var me=X[P];!me||(delete X[P],de[re]={items:{}},de[re].items[me]=X,de[re].role="object")}}o.crawl(we,ee)}function J(we){function ee(X){for(var re in X)if(_(X[re]))ee(X[re]);else if(Array.isArray(X[re]))for(var de=0;de<X[re].length;de++)ee(X[re][de]);else X[re]instanceof RegExp&&(X[re]=X[re].toString())}ee(we)}function ne(we,ee,X){var re=x(we,X),de=p({},ee.layoutAttributes);de[A]=!0,re.set(de)}function q(we,ee,X){var re=x(we,X);re.set(p(re.get()||{},ee))}},{"../lib":244,"../plots/animation_attributes":285,"../plots/attributes":287,"../plots/frame_attributes":320,"../plots/layout_attributes":323,"../registry":327,"./edit_types":273,"./plot_config":278}],280:[function(e,i,o){var a=e("../lib"),s=e("../plots/attributes"),n="templateitemname",l={name:{valType:"string",editType:"none"}};l[n]={valType:"string",editType:"calc"},o.templatedArray=function(v,d){return d._isLinkedToArray=v,d.name=l.name,d[n]=l[n],d},o.traceTemplater=function(v){var d={},p,_;for(p in v)_=v[p],Array.isArray(_)&&_.length&&(d[p]=0);function b(x){p=a.coerce(x,{},s,"type");var E={type:p,_template:null};if(p in d){_=v[p];var A=d[p]%_.length;d[p]++,E._template=_[A]}return E}return{newTrace:b}},o.newContainer=function(v,d,p){var _=v._template,b=_&&(_[d]||p&&_[p]);a.isPlainObject(b)||(b=null);var x=v[d]={_template:b};return x},o.arrayTemplater=function(v,d,p){var _=v._template,b=_&&_[h(d)],x=_&&_[d];(!Array.isArray(x)||!x.length)&&(x=[]);var E={};function A(D){var R={name:D.name,_input:D},S=R[n]=D[n];if(!u(S))return R._template=b,R;for(var I=0;I<x.length;I++){var T=x[I];if(T.name===S)return E[S]=1,R._template=T,R}return R[p]=D[p]||!1,R._template=!1,R}function P(){for(var D=[],R=0;R<x.length;R++){var S=x[R],I=S.name;if(u(I)&&!E[I]){var T={_template:S,name:I,_input:{_templateitemname:I}};T[n]=S[n],D.push(T),E[I]=1}}return D}return{newItem:A,defaultItems:P}};function u(v){return v&&typeof v=="string"}function h(v){var d=v.length-1;return v.charAt(d)!=="s"&&a.warn("bad argument to arrayDefaultKey: "+v),v.substr(0,v.length-1)+"defaults"}o.arrayDefaultKey=h,o.arrayEditor=function(v,d,p){var _=(a.nestedProperty(v,d).get()||[]).length,b=p._index,x=b>=_&&(p._input||{})._templateitemname;x&&(b=_);var E=d+"["+b+"]",A;function P(){A={},x&&(A[E]={},A[E][n]=x)}P();function D(T,M){A[T]=M}function R(T,M){x?a.nestedProperty(A[E],T).set(M):A[E+"."+T]=M}function S(){var T=A;return P(),T}function I(T,M){T&&R(T,M);var z=S();for(var U in z)a.nestedProperty(v,U).set(z[U])}return{modifyBase:D,modifyItem:R,getUpdateObj:S,applyUpdate:I}}},{"../lib":244,"../plots/attributes":287}],281:[function(e,i,o){var a=e("@plotly/d3"),s=e("../registry"),n=e("../plots/plots"),l=e("../lib"),u=e("../lib/clear_gl_canvases"),h=e("../components/color"),v=e("../components/drawing"),d=e("../components/titles"),p=e("../components/modebar"),_=e("../plots/cartesian/axes"),b=e("../constants/alignment"),x=e("../plots/cartesian/constraints"),E=x.enforce,A=x.clean,P=e("../plots/cartesian/autorange").doAutoRange,D="start",R="middle",S="end";o.layoutStyles=function(Y){return l.syncOrAsync([n.doAutoMargin,T],Y)};function I(Y,J,ne){for(var q=0;q<ne.length;q++){var we=ne[q][0],ee=ne[q][1];if(!(we[0]>=Y[1]||we[1]<=Y[0])&&ee[0]<J[1]&&ee[1]>J[0])return!0}return!1}function T(Y){var J=Y._fullLayout,ne=J._size,q=ne.p,we=_.list(Y,"",!0),ee,X,re,de,me,xe;if(J._paperdiv.style({width:Y._context.responsive&&J.autosize&&!Y._context._hasZeroWidth&&!Y.layout.width?"100%":J.width+"px",height:Y._context.responsive&&J.autosize&&!Y._context._hasZeroHeight&&!Y.layout.height?"100%":J.height+"px"}).selectAll(".main-svg").call(v.setSize,J.width,J.height),Y._context.setBackground(Y,J.paper_bgcolor),o.drawMainTitle(Y),p.manage(Y),!J._has("cartesian"))return n.previousPromises(Y);function He(Wt,dr,zr){var Dr=Wt._lw/2;if(Wt._id.charAt(0)==="x"){if(dr){if(zr==="top")return dr._offset-q-Dr}else return ne.t+ne.h*(1-(Wt.position||0))+Dr%1;return dr._offset+dr._length+q+Dr}if(dr){if(zr==="right")return dr._offset+dr._length+q+Dr}else return ne.l+ne.w*(Wt.position||0)+Dr%1;return dr._offset-q-Dr}for(ee=0;ee<we.length;ee++){de=we[ee];var Re=de._anchorAxis;de._linepositions={},de._lw=v.crispRound(Y,de.linewidth,1),de._mainLinePosition=He(de,Re,de.side),de._mainMirrorPosition=de.mirror&&Re?He(de,Re,b.OPPOSITE_SIDE[de.side]):null}var Ee=[],ke=[],$=[],le=h.opacity(J.paper_bgcolor)===1&&h.opacity(J.plot_bgcolor)===1&&J.paper_bgcolor===J.plot_bgcolor;for(X in J._plots)if(re=J._plots[X],re.mainplot)re.bg&&re.bg.remove(),re.bg=void 0;else{var K=re.xaxis.domain,te=re.yaxis.domain,ie=re.plotgroup;if(I(K,te,$)){var ce=ie.node(),ae=re.bg=l.ensureSingle(ie,"rect","bg");ce.insertBefore(ae.node(),ce.childNodes[0]),ke.push(X)}else ie.select("rect.bg").remove(),$.push([K,te]),le||(Ee.push(X),ke.push(X))}var ve=J._bgLayer.selectAll(".bg").data(Ee);for(ve.enter().append("rect").classed("bg",!0),ve.exit().remove(),ve.each(function(Wt){J._plots[Wt].bg=a.select(this)}),ee=0;ee<ke.length;ee++)re=J._plots[ke[ee]],me=re.xaxis,xe=re.yaxis,re.bg&&me._offset!==void 0&&xe._offset!==void 0&&re.bg.call(v.setRect,me._offset-q,xe._offset-q,me._length+2*q,xe._length+2*q).call(h.fill,J.plot_bgcolor).style("stroke-width",0);if(!J._hasOnlyLargeSploms)for(X in J._plots){re=J._plots[X],me=re.xaxis,xe=re.yaxis;var pe=re.clipId="clip"+J._uid+X+"plot",he=l.ensureSingleById(J._clips,"clipPath",pe,function(Wt){Wt.classed("plotclip",!0).append("rect")});re.clipRect=he.select("rect").attr({width:me._length,height:xe._length}),v.setTranslate(re.plot,me._offset,xe._offset);var ye,_e;re._hasClipOnAxisFalse?(ye=null,_e=pe):(ye=pe,_e=null),v.setClipUrl(re.plot,ye,Y),re.layerClipId=_e}var je,Je,nt,at,Fe,Ie,Ke,Qe,it,Ne,ht,Tt,Xt;function Nt(Wt){return"M"+je+","+Wt+"H"+Je}function Mt(Wt){return"M"+me._offset+","+Wt+"h"+me._length}function Vt(Wt){return"M"+Wt+","+Qe+"V"+Ke}function Yt(Wt){return"M"+Wt+","+xe._offset+"v"+xe._length}function cr(Wt,dr,zr){if(!Wt.showline||X!==Wt._mainSubplot)return"";if(!Wt._anchorAxis)return zr(Wt._mainLinePosition);var Dr=dr(Wt._mainLinePosition);return Wt.mirror&&(Dr+=dr(Wt._mainMirrorPosition)),Dr}for(X in J._plots){re=J._plots[X],me=re.xaxis,xe=re.yaxis;var Nr="M0,0";M(me,X)&&(Fe=U(me,"left",xe,we),je=me._offset-(Fe?q+Fe:0),Ie=U(me,"right",xe,we),Je=me._offset+me._length+(Ie?q+Ie:0),nt=He(me,xe,"bottom"),at=He(me,xe,"top"),Xt=!me._anchorAxis||X!==me._mainSubplot,Xt&&(me.mirror==="allticks"||me.mirror==="all")&&(me._linepositions[X]=[nt,at]),Nr=cr(me,Nt,Mt),Xt&&me.showline&&(me.mirror==="all"||me.mirror==="allticks")&&(Nr+=Nt(nt)+Nt(at)),re.xlines.style("stroke-width",me._lw+"px").call(h.stroke,me.showline?me.linecolor:"rgba(0,0,0,0)")),re.xlines.attr("d",Nr);var er="M0,0";M(xe,X)&&(ht=U(xe,"bottom",me,we),Ke=xe._offset+xe._length+(ht?q:0),Tt=U(xe,"top",me,we),Qe=xe._offset-(Tt?q:0),it=He(xe,me,"left"),Ne=He(xe,me,"right"),Xt=!xe._anchorAxis||X!==xe._mainSubplot,Xt&&(xe.mirror==="allticks"||xe.mirror==="all")&&(xe._linepositions[X]=[it,Ne]),er=cr(xe,Vt,Yt),Xt&&xe.showline&&(xe.mirror==="all"||xe.mirror==="allticks")&&(er+=Vt(it)+Vt(Ne)),re.ylines.style("stroke-width",xe._lw+"px").call(h.stroke,xe.showline?xe.linecolor:"rgba(0,0,0,0)")),re.ylines.attr("d",er)}return _.makeClipPaths(Y),n.previousPromises(Y)}function M(Y,J){return(Y.ticks||Y.showline)&&(J===Y._mainSubplot||Y.mirror==="all"||Y.mirror==="allticks")}function z(Y,J,ne){if(!ne.showline||!ne._lw)return!1;if(ne.mirror==="all"||ne.mirror==="allticks")return!0;var q=ne._anchorAxis;if(!q)return!1;var we=b.FROM_BL[J];return ne.side===J?q.domain[we]===Y.domain[we]:ne.mirror&&q.domain[1-we]===Y.domain[1-we]}function U(Y,J,ne,q){if(z(Y,J,ne))return ne._lw;for(var we=0;we<q.length;we++){var ee=q[we];if(ee._mainAxis===ne._mainAxis&&z(Y,J,ee))return ee._lw}return 0}o.drawMainTitle=function(Y){var J=Y._fullLayout,ne=j(J),q=H(J);d.draw(Y,"gtitle",{propContainer:J,propName:"title.text",placeholder:J._dfltTitle.plot,attributes:{x:F(J,ne),y:V(J,q),"text-anchor":ne,dy:q}})};function F(Y,J){var ne=Y.title,q=Y._size,we=0;switch(J===D?we=ne.pad.l:J===S&&(we=-ne.pad.r),ne.xref){case"paper":return q.l+q.w*ne.x+we;case"container":default:return Y.width*ne.x+we}}function V(Y,J){var ne=Y.title,q=Y._size,we=0;if(J==="0em"||!J?we=-ne.pad.b:J===b.CAP_SHIFT+"em"&&(we=ne.pad.t),ne.y==="auto")return q.t/2;switch(ne.yref){case"paper":return q.t+q.h-q.h*ne.y+we;case"container":default:return Y.height-Y.height*ne.y+we}}function j(Y){var J=Y.title,ne=R;return l.isRightAnchor(J)?ne=S:l.isLeftAnchor(J)&&(ne=D),ne}function H(Y){var J=Y.title,ne="0em";return l.isTopAnchor(J)?ne=b.CAP_SHIFT+"em":l.isMiddleAnchor(J)&&(ne=b.MID_SHIFT+"em"),ne}o.doTraceStyle=function(Y){var J=Y.calcdata,ne=[],q;for(q=0;q<J.length;q++){var we=J[q],ee=we[0]||{},X=ee.trace||{},re=X._module||{},de=re.arraysToCalcdata;de&&de(we,X);var me=re.editStyle;me&&ne.push({fn:me,cd0:ee})}if(ne.length){for(q=0;q<ne.length;q++){var xe=ne[q];xe.fn(Y,xe.cd0)}u(Y),o.redrawReglTraces(Y)}return n.style(Y),s.getComponentMethod("legend","draw")(Y),n.previousPromises(Y)},o.doColorBars=function(Y){return s.getComponentMethod("colorbar","draw")(Y),n.previousPromises(Y)},o.layoutReplot=function(Y){var J=Y.layout;return Y.layout=void 0,s.call("_doPlot",Y,"",J)},o.doLegend=function(Y){return s.getComponentMethod("legend","draw")(Y),n.previousPromises(Y)},o.doTicksRelayout=function(Y){return _.draw(Y,"redraw"),Y._fullLayout._hasOnlyLargeSploms&&(s.subplotsRegistry.splom.updateGrid(Y),u(Y),o.redrawReglTraces(Y)),o.drawMainTitle(Y),n.previousPromises(Y)},o.doModeBar=function(Y){var J=Y._fullLayout;p.manage(Y);for(var ne=0;ne<J._basePlotModules.length;ne++){var q=J._basePlotModules[ne].updateFx;q&&q(Y)}return n.previousPromises(Y)},o.doCamera=function(Y){for(var J=Y._fullLayout,ne=J._subplots.gl3d,q=0;q<ne.length;q++){var we=J[ne[q]],ee=we._scene;ee.setViewport(we)}},o.drawData=function(Y){var J=Y._fullLayout;u(Y);for(var ne=J._basePlotModules,q=0;q<ne.length;q++)ne[q].plot(Y);return o.redrawReglTraces(Y),n.style(Y),s.getComponentMethod("selections","draw")(Y),s.getComponentMethod("shapes","draw")(Y),s.getComponentMethod("annotations","draw")(Y),s.getComponentMethod("images","draw")(Y),J._replotting=!1,n.previousPromises(Y)},o.redrawReglTraces=function(Y){var J=Y._fullLayout;if(J._has("regl")){var ne=Y._fullData,q=[],we=[],ee,X;for(J._hasOnlyLargeSploms&&J._splomGrid.draw(),ee=0;ee<ne.length;ee++){var re=ne[ee];re.visible===!0&&re._length!==0&&(re.type==="splom"?J._splomScenes[re.uid].draw():re.type==="scattergl"?l.pushUnique(q,re.xaxis+re.yaxis):re.type==="scatterpolargl"&&l.pushUnique(we,re.subplot))}for(ee=0;ee<q.length;ee++)X=J._plots[q[ee]],X._scene&&X._scene.draw();for(ee=0;ee<we.length;ee++)X=J[we[ee]]._subplot,X._scene&&X._scene.draw()}},o.doAutoRangeAndConstraints=function(Y){for(var J=_.list(Y,"",!0),ne,q={},we=0;we<J.length;we++)if(ne=J[we],!q[ne._id]){q[ne._id]=1,A(Y,ne),P(Y,ne);var ee=ne._matchGroup;if(ee)for(var X in ee){var re=_.getFromId(Y,X);P(Y,re,ne.range),q[X]=1}}E(Y)},o.finalDraw=function(Y){s.getComponentMethod("rangeslider","draw")(Y),s.getComponentMethod("rangeselector","draw")(Y)},o.drawMarginPushers=function(Y){s.getComponentMethod("legend","draw")(Y),s.getComponentMethod("rangeselector","draw")(Y),s.getComponentMethod("sliders","draw")(Y),s.getComponentMethod("updatemenus","draw")(Y),s.getComponentMethod("colorbar","draw")(Y)}},{"../components/color":103,"../components/drawing":125,"../components/modebar":166,"../components/titles":212,"../constants/alignment":219,"../lib":244,"../lib/clear_gl_canvases":232,"../plots/cartesian/autorange":290,"../plots/cartesian/axes":291,"../plots/cartesian/constraints":299,"../plots/plots":325,"../registry":327,"@plotly/d3":11}],282:[function(e,i,o){var a=e("../lib"),s=a.isPlainObject,n=e("./plot_schema"),l=e("../plots/plots"),u=e("../plots/attributes"),h=e("./plot_template"),v=e("./plot_config").dfltConfig;o.makeTemplate=function(D){D=a.isPlainObject(D)?D:a.getGraphDiv(D),D=a.extendDeep({_context:v},{data:D.data,layout:D.layout}),l.supplyDefaults(D);var R=D.data||[],S=D.layout||{};S._basePlotModules=D._fullLayout._basePlotModules,S._modules=D._fullLayout._modules;var I={data:{},layout:{}};R.forEach(function(J){var ne={};_(J,ne,x.bind(null,J));var q=a.coerce(J,{},u,"type"),we=I.data[q];we||(we=I.data[q]=[]),we.push(ne)}),_(S,I.layout,b.bind(null,S)),delete I.layout.template;var T=S.template;if(s(T)){var M=T.layout,z,U,F,V,j,H;s(M)&&d(M,I.layout);var Y=T.data;if(s(Y)){for(U in I.data)if(F=Y[U],Array.isArray(F)){for(j=I.data[U],H=j.length,V=F.length,z=0;z<H;z++)d(F[z%V],j[z]);for(z=H;z<V;z++)j.push(a.extendDeep({},F[z]))}for(U in Y)U in I.data||(I.data[U]=a.extendDeep([],Y[U]))}}return I};function d(D,R){D=a.extendDeep({},D);var S=Object.keys(D).sort(),I,T;function M(j,H,Y){if(s(H)&&s(j))d(j,H);else if(Array.isArray(H)&&Array.isArray(j)){var J=h.arrayTemplater({_template:D},Y);for(T=0;T<H.length;T++){var ne=H[T],q=J.newItem(ne)._template;q&&d(q,ne)}var we=J.defaultItems();for(T=0;T<we.length;T++)H.push(we[T]._template);for(T=0;T<H.length;T++)delete H[T].templateitemname}}for(I=0;I<S.length;I++){var z=S[I],U=D[z];if(z in R?M(U,R[z],z):R[z]=U,p(z)===z)for(var F in R){var V=p(F);F!==V&&V===z&&!(F in D)&&M(U,R[F],z)}}}function p(D){return D.replace(/[0-9]+$/,"")}function _(D,R,S,I,T){var M=T&&S(T);for(var z in D){var U=D[z],F=E(D,z,I),V=E(D,z,T),j=S(V);if(!j){var H=p(z);H!==z&&(V=E(D,H,T),j=S(V))}if(!(M&&M===j)&&!(!j||j._noTemplating||j.valType==="data_array"||j.arrayOk&&Array.isArray(U)))if(!j.valType&&s(U))_(U,R,S,F,V);else if(j._isLinkedToArray&&Array.isArray(U))for(var Y=!1,J=0,ne={},q=0;q<U.length;q++){var we=U[q];if(s(we)){var ee=we.name;if(ee)ne[ee]||(_(we,R,S,E(U,J,F),E(U,J,V)),J++,ne[ee]=1);else if(!Y){var X=h.arrayDefaultKey(z),re=E(D,X,I),de=E(U,J,F);_(we,R,S,de,E(U,J,V));var me=a.nestedProperty(R,de),xe=a.nestedProperty(R,re);xe.set(me.get()),me.set(null),Y=!0}}}else{var He=a.nestedProperty(R,F);He.set(U)}}}function b(D,R){return n.getLayoutValObject(D,a.nestedProperty({},R).parts)}function x(D,R){return n.getTraceValObject(D,a.nestedProperty({},R).parts)}function E(D,R,S){var I;return S?Array.isArray(D)?I=S+"["+R+"]":I=S+"."+R:I=R,I}o.validateTemplate=function(D,R){var S=a.extendDeep({},{_context:v,data:D.data,layout:D.layout}),I=S.layout||{};s(R)||(R=I.template||{});var T=R.layout,M=R.data,z=[];S.layout=I,S.layout.template=R,l.supplyDefaults(S);var U=S._fullLayout,F=S._fullData,V={};function j(re,de){for(var me in re)if(me.charAt(0)!=="_"&&s(re[me])){var xe=p(me),He=[],Re;for(Re=0;Re<de.length;Re++)He.push(E(re,me,de[Re])),xe!==me&&He.push(E(re,xe,de[Re]));for(Re=0;Re<He.length;Re++)V[He[Re]]=1;j(re[me],He)}}function H(re,de){for(var me in re)if(me.indexOf("defaults")===-1&&s(re[me])){var xe=E(re,me,de);V[xe]?H(re[me],xe):z.push({code:"unused",path:xe})}}if(s(T)?(j(U,["layout"]),H(T,"layout")):z.push({code:"layout"}),!s(M))z.push({code:"data"});else{for(var Y={},J,ne=0;ne<F.length;ne++){var q=F[ne];J=q.type,Y[J]=(Y[J]||0)+1,q._fullInput._template||z.push({code:"missing",index:q._fullInput.index,traceType:J})}for(J in M){var we=M[J].length,ee=Y[J]||0;we>ee?z.push({code:"unused",traceType:J,templateCount:we,dataCount:ee}):ee>we&&z.push({code:"reused",traceType:J,templateCount:we,dataCount:ee})}}function X(re,de){for(var me in re)if(me.charAt(0)!=="_"){var xe=re[me],He=E(re,me,de);s(xe)?(Array.isArray(re)&&xe._template===!1&&xe.templateitemname&&z.push({code:"missing",path:He,templateitemname:xe.templateitemname}),X(xe,He)):Array.isArray(xe)&&A(xe)&&X(xe,He)}}if(X({data:F,layout:U},""),z.length)return z.map(P)};function A(D){for(var R=0;R<D.length;R++)if(s(D[R]))return!0}function P(D){var R;switch(D.code){case"data":R="The template has no key data.";break;case"layout":R="The template has no key layout.";break;case"missing":D.path?R="There are no templates for item "+D.path+" with name "+D.templateitemname:R="There are no templates for trace "+D.index+", of type "+D.traceType+".";break;case"unused":D.path?R="The template item at "+D.path+" was not used in constructing the plot.":D.dataCount?R="Some of the templates of type "+D.traceType+" were not used. The template has "+D.templateCount+" traces, the data only has "+D.dataCount+" of this type.":R="The template has "+D.templateCount+" traces of type "+D.traceType+" but there are none in the data.";break;case"reused":R="Some of the templates of type "+D.traceType+" were used more than once. The template has "+D.templateCount+" traces, the data has "+D.dataCount+" of this type.";break}return D.msg=R,D}},{"../lib":244,"../plots/attributes":287,"../plots/plots":325,"./plot_config":278,"./plot_schema":279,"./plot_template":280}],283:[function(e,i,o){var a=e("fast-isnumeric"),s=e("./plot_api"),n=e("../plots/plots"),l=e("../lib"),u=e("../snapshot/helpers"),h=e("../snapshot/tosvg"),v=e("../snapshot/svgtoimg"),d=e("../version").version,p={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function _(b,x){x=x||{};var E,A,P,D;l.isPlainObject(b)?(E=b.data||[],A=b.layout||{},P=b.config||{},D={}):(b=l.getGraphDiv(b),E=l.extendDeep([],b.data),A=l.extendDeep({},b.layout),P=b._context,D=b._fullLayout||{});function R(ee){return!(ee in x)||l.validate(x[ee],p[ee])}if(!R("width")&&x.width!==null||!R("height")&&x.height!==null)throw new Error("Height and width should be pixel values.");if(!R("format"))throw new Error("Export format is not "+l.join2(p.format.values,", "," or ")+".");var S={};function I(ee,X){return l.coerce(x,S,p,ee,X)}var T=I("format"),M=I("width"),z=I("height"),U=I("scale"),F=I("setBackground"),V=I("imageDataOnly"),j=document.createElement("div");j.style.position="absolute",j.style.left="-5000px",document.body.appendChild(j);var H=l.extendFlat({},A);M?H.width=M:x.width===null&&a(D.width)&&(H.width=D.width),z?H.height=z:x.height===null&&a(D.height)&&(H.height=D.height);var Y=l.extendFlat({},P,{_exportedPlot:!0,staticPlot:!0,setBackground:F}),J=u.getRedrawFunc(j);function ne(){return new Promise(function(ee){setTimeout(ee,u.getDelay(j._fullLayout))})}function q(){return new Promise(function(ee,X){var re=h(j,T,U),de=j._fullLayout.width,me=j._fullLayout.height;function xe(){s.purge(j),document.body.removeChild(j)}if(T==="full-json"){var He=n.graphJson(j,!1,"keepdata","object",!0,!0);return He.version=d,He=JSON.stringify(He),xe(),ee(V?He:u.encodeJSON(He))}if(xe(),T==="svg")return ee(V?re:u.encodeSVG(re));var Re=document.createElement("canvas");Re.id=l.randstr(),v({format:T,width:de,height:me,scale:U,canvas:Re,svg:re,promise:!0}).then(ee).catch(X)})}function we(ee){return V?ee.replace(u.IMAGE_URL_PREFIX,""):ee}return new Promise(function(ee,X){s.newPlot(j,E,H,Y).then(J).then(ne).then(q).then(function(re){ee(we(re))}).catch(function(re){X(re)})})}i.exports=_},{"../lib":244,"../plots/plots":325,"../snapshot/helpers":331,"../snapshot/svgtoimg":333,"../snapshot/tosvg":335,"../version":400,"./plot_api":277,"fast-isnumeric":17}],284:[function(e,i,o){var a=e("../lib"),s=e("../plots/plots"),n=e("./plot_schema"),l=e("./plot_config").dfltConfig,u=a.isPlainObject,h=Array.isArray,v=a.isArrayOrTypedArray;i.exports=function(I,T){I===void 0&&(I=[]),T===void 0&&(T={});var M=n.get(),z=[],U={_context:a.extendFlat({},l)},F,V;h(I)?(U.data=a.extendDeep([],I),F=I):(U.data=[],F=[],z.push(x("array","data"))),u(T)?(U.layout=a.extendDeep({},T),V=T):(U.layout={},V={},arguments.length>1&&z.push(x("object","layout"))),s.supplyDefaults(U);for(var j=U._fullData,H=F.length,Y=0;Y<H;Y++){var J=F[Y],ne=["data",Y];if(!u(J)){z.push(x("object",ne));continue}var q=j[Y],we=q.type,ee=M.traces[we].attributes;ee.type={valType:"enumerated",values:[we]},q.visible===!1&&J.visible!==!1&&z.push(x("invisible",ne)),d(J,q,ee,z,ne);var X=J.transforms,re=q.transforms;if(X){h(X)||z.push(x("array",ne,["transforms"])),ne.push("transforms");for(var de=0;de<X.length;de++){var me=["transforms",de],xe=X[de].type;if(!u(X[de])){z.push(x("object",ne,me));continue}var He=M.transforms[xe]?M.transforms[xe].attributes:{};He.type={valType:"enumerated",values:Object.keys(M.transforms)},d(X[de],re[de],He,z,ne,me)}}}var Re=U._fullLayout,Ee=p(M,j);return d(V,Re,Ee,z,"layout"),z.length===0?void 0:z};function d(S,I,T,M,z,U){U=U||[];for(var F=Object.keys(S),V=0;V<F.length;V++){var j=F[V];if(j!=="transforms"){var H=U.slice();H.push(j);var Y=S[j],J=I[j],ne=A(T,j),q=(ne||{}).valType,we=q==="info_array",ee=q==="colorscale",X=(ne||{}).items;if(!E(T,j))M.push(x("schema",z,H));else if(u(Y)&&u(J)&&q!=="any")d(Y,J,ne,M,z,H);else if(we&&h(Y)){Y.length>J.length&&M.push(x("unused",z,H.concat(J.length)));var re=J.length,de=Array.isArray(X);de&&(re=Math.min(re,X.length));var me,xe,He,Re,Ee;if(ne.dimensions===2)for(xe=0;xe<re;xe++)if(h(Y[xe])){Y[xe].length>J[xe].length&&M.push(x("unused",z,H.concat(xe,J[xe].length)));var ke=J[xe].length;for(me=0;me<(de?Math.min(ke,X[xe].length):ke);me++)He=de?X[xe][me]:X,Re=Y[xe][me],Ee=J[xe][me],a.validate(Re,He)?Ee!==Re&&Ee!==+Re&&M.push(x("dynamic",z,H.concat(xe,me),Re,Ee)):M.push(x("value",z,H.concat(xe,me),Re))}else M.push(x("array",z,H.concat(xe),Y[xe]));else for(xe=0;xe<re;xe++)He=de?X[xe]:X,Re=Y[xe],Ee=J[xe],a.validate(Re,He)?Ee!==Re&&Ee!==+Re&&M.push(x("dynamic",z,H.concat(xe),Re,Ee)):M.push(x("value",z,H.concat(xe),Re))}else if(ne.items&&!we&&h(Y)){var $=X[Object.keys(X)[0]],le=[],K,te;for(K=0;K<J.length;K++){var ie=J[K]._index||K;if(te=H.slice(),te.push(ie),u(Y[ie])&&u(J[K])){le.push(ie);var ce=Y[ie],ae=J[K];u(ce)&&ce.visible!==!1&&ae.visible===!1?M.push(x("invisible",z,te)):d(ce,ae,$,M,z,te)}}for(K=0;K<Y.length;K++)te=H.slice(),te.push(K),u(Y[K])?le.indexOf(K)===-1&&M.push(x("unused",z,te)):M.push(x("object",z,te,Y[K]))}else!u(Y)&&u(J)?M.push(x("object",z,H,Y)):!v(Y)&&v(J)&&!we&&!ee?M.push(x("array",z,H,Y)):j in I?a.validate(Y,ne)?ne.valType==="enumerated"&&(ne.coerceNumber&&Y!==+J||Y!==J)&&M.push(x("dynamic",z,H,Y,J)):M.push(x("value",z,H,Y)):M.push(x("unused",z,H,Y))}}return M}function p(S,I){for(var T=S.layout.layoutAttributes,M=0;M<I.length;M++){var z=I[M],U=S.traces[z.type],F=U.layoutAttributes;F&&(z.subplot?a.extendFlat(T[U.attributes.subplot.dflt],F):a.extendFlat(T,F))}return T}var _={object:function(S,I){var T;return S==="layout"&&I===""?T="The layout argument":S[0]==="data"&&I===""?T="Trace "+S[1]+" in the data argument":T=b(S)+"key "+I,T+" must be linked to an object container"},array:function(S,I){var T;return S==="data"?T="The data argument":T=b(S)+"key "+I,T+" must be linked to an array container"},schema:function(S,I){return b(S)+"key "+I+" is not part of the schema"},unused:function(S,I,T){var M=u(T)?"container":"key";return b(S)+M+" "+I+" did not get coerced"},dynamic:function(S,I,T,M){return[b(S)+"key",I,"(set to '"+T+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(S,I){return(I?b(S)+"item "+I:"Trace "+S[1])+" got defaulted to be not visible"},value:function(S,I,T){return[b(S)+"key "+I,"is set to an invalid value ("+T+")"].join(" ")}};function b(S){return h(S)?"In data trace "+S[1]+", ":"In "+S+", "}function x(S,I,T,M,z){T=T||"";var U,F;h(I)?(U=I[0],F=I[1]):(U=I,F=null);var V=R(T),j=_[S](I,V,M,z);return a.log(j),{code:S,container:U,trace:F,path:T,astr:V,msg:j}}function E(S,I){var T=D(I),M=T.keyMinusId,z=T.id;return M in S&&S[M]._isSubplotObj&&z?!0:I in S}function A(S,I){if(I in S)return S[I];var T=D(I);return S[T.keyMinusId]}var P=a.counterRegex("([a-z]+)");function D(S){var I=S.match(P);return{keyMinusId:I&&I[1],id:I&&I[2]}}function R(S){if(!h(S))return String(S);for(var I="",T=0;T<S.length;T++){var M=S[T];typeof M=="number"?I=I.substr(0,I.length-1)+"["+M+"]":I+=M,T<S.length-1&&(I+=".")}return I}},{"../lib":244,"../plots/plots":325,"./plot_config":278,"./plot_schema":279}],285:[function(e,i,o){i.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],286:[function(e,i,o){var a=e("../lib"),s=e("../plot_api/plot_template");i.exports=function(l,u,h){var v=h.name,d=h.inclusionAttr||"visible",p=u[v],_=a.isArrayOrTypedArray(l[v])?l[v]:[],b=u[v]=[],x=s.arrayTemplater(u,v,d),E,A;for(E=0;E<_.length;E++){var P=_[E];a.isPlainObject(P)?A=x.newItem(P):(A=x.newItem({}),A[d]=!1),A._index=E,A[d]!==!1&&h.handleItemDefaults(P,A,u,h),b.push(A)}var D=x.defaultItems();for(E=0;E<D.length;E++)A=D[E],A._index=b.length,h.handleItemDefaults({},A,u,h,{}),b.push(A);if(a.isArrayOrTypedArray(p)){var R=Math.min(p.length,b.length);for(E=0;E<R;E++)a.relinkPrivateKeys(b[E],p[E])}return b}},{"../lib":244,"../plot_api/plot_template":280}],287:[function(e,i,o){var a=e("./font_attributes"),s=e("../components/fx/attributes");i.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:a({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:s.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":134,"./font_attributes":319}],288:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib"),n=s.dateTime2ms,l=s.incrementMonth,u=e("../../constants/numerical"),h=u.ONEAVGMONTH;i.exports=function(d,p,_,b){if(p.type!=="date")return{vals:b};var x=d[_+"periodalignment"];if(!x)return{vals:b};var E=d[_+"period"],A;if(a(E)){if(E=+E,E<=0)return{vals:b}}else if(typeof E=="string"&&E.charAt(0)==="M"){var P=+E.substring(1);if(P>0&&Math.round(P)===P)A=P;else return{vals:b}}for(var D=p.calendar,R=x==="start",S=x==="end",I=d[_+"period0"],T=n(I,D)||0,M=[],z=[],U=[],F=b.length,V=0;V<F;V++){var j=b[V],H,Y,J;if(A){for(H=Math.round((j-T)/(A*h)),J=l(T,A*H,D);J>j;)J=l(J,-A,D);for(;J<=j;)J=l(J,A,D);Y=l(J,-A,D)}else{for(H=Math.round((j-T)/E),J=T+H*E;J>j;)J-=E;for(;J<=j;)J+=E;Y=J-E}M[V]=R?Y:S?J:(Y+J)/2,z[V]=Y,U[V]=J}return{vals:M,starts:z,ends:U}}},{"../../constants/numerical":224,"../../lib":244,"fast-isnumeric":17}],289:[function(e,i,o){i.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],290:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("../../lib"),l=e("../../constants/numerical").FP_SAFE,u=e("../../registry"),h=e("../../components/drawing"),v=e("./axis_ids"),d=v.getFromId,p=v.isLinked;i.exports={getAutoRange:_,makePadFn:x,doAutoRange:D,findExtremes:R,concatExtremes:P};function _(F,V){var j,H,Y=[],J=F._fullLayout,ne=x(J,V,0),q=x(J,V,1),we=P(F,V),ee=we.min,X=we.max;if(ee.length===0||X.length===0)return n.simpleMap(V.range,V.r2l);var re=ee[0].val,de=X[0].val;for(j=1;j<ee.length&&re===de;j++)re=Math.min(re,ee[j].val);for(j=1;j<X.length&&re===de;j++)de=Math.max(de,X[j].val);var me=!1;if(V.range){var xe=n.simpleMap(V.range,V.r2l);me=xe[1]<xe[0]}V.autorange==="reversed"&&(me=!0,V.autorange=!0);var He=V.rangemode,Re=He==="tozero",Ee=He==="nonnegative",ke=V._length,$=ke/10,le=0,K,te,ie,ce,ae,ve;for(j=0;j<ee.length;j++)for(K=ee[j],H=0;H<X.length;H++)te=X[H],ve=te.val-K.val-b(V,K.val,te.val),ve>0&&(ae=ke-ne(K)-q(te),ae>$?ve/ae>le&&(ie=K,ce=te,le=ve/ae):ve/ke>le&&(ie={val:K.val,nopad:1},ce={val:te.val,nopad:1},le=ve/ke));function pe(Je,nt){return Math.max(Je,q(nt))}if(re===de){var he=re-1,ye=re+1;if(Re)if(re===0)Y=[0,1];else{var _e=(re>0?X:ee).reduce(pe,0),je=re/(1-Math.min(.5,_e/ke));Y=re>0?[0,je]:[je,0]}else Ee?Y=[Math.max(0,he),Math.max(1,ye)]:Y=[he,ye]}else Re?(ie.val>=0&&(ie={val:0,nopad:1}),ce.val<=0&&(ce={val:0,nopad:1})):Ee&&(ie.val-le*ne(ie)<0&&(ie={val:0,nopad:1}),ce.val<=0&&(ce={val:1,nopad:1})),le=(ce.val-ie.val-b(V,K.val,te.val))/(ke-ne(ie)-q(ce)),Y=[ie.val-le*ne(ie),ce.val+le*q(ce)];return me&&Y.reverse(),n.simpleMap(Y,V.l2r||Number)}function b(F,V,j){var H=0;if(F.rangebreaks)for(var Y=F.locateBreaks(V,j),J=0;J<Y.length;J++){var ne=Y[J];H+=ne.max-ne.min}return H}function x(F,V,j){var H=.05*V._length,Y=V._anchorAxis||{};if((V.ticklabelposition||"").indexOf("inside")!==-1||(Y.ticklabelposition||"").indexOf("inside")!==-1){var J=V.autorange==="reversed";if(!J){var ne=n.simpleMap(V.range,V.r2l);J=ne[1]<ne[0]}J&&(j=!j)}var q=0;return p(F,V._id)||(q=A(F,V,j)),H=Math.max(q,H),V.constrain==="domain"&&V._inputDomain&&(H*=(V._inputDomain[1]-V._inputDomain[0])/(V.domain[1]-V.domain[0])),function(ee){return ee.nopad?0:ee.pad+(ee.extrapad?H:q)}}var E=3;function A(F,V,j){var H=0,Y=V._id.charAt(0)==="x";for(var J in F._plots){var ne=F._plots[J];if(!(V._id!==ne.xaxis._id&&V._id!==ne.yaxis._id)){var q=(Y?ne.yaxis:ne.xaxis)||{};if((q.ticklabelposition||"").indexOf("inside")!==-1&&(!j&&(q.side==="left"||q.side==="bottom")||j&&(q.side==="top"||q.side==="right"))){if(q._vals){var we=n.deg2rad(q._tickAngles[q._id+"tick"]||0),ee=Math.abs(Math.cos(we)),X=Math.abs(Math.sin(we));if(!q._vals[0].bb){var re=q._id+"tick",de=q._selections[re];de.each(function(ke){var $=a.select(this),le=$.select(".text-math-group");le.empty()&&(ke.bb=h.bBox($.node()))})}for(var me=0;me<q._vals.length;me++){var xe=q._vals[me],He=xe.bb;if(He){var Re=2*E+He.width,Ee=2*E+He.height;H=Math.max(H,Y?Math.max(Re*ee,Ee*X):Math.max(Ee*ee,Re*X))}}}q.ticks==="inside"&&q.ticklabelposition==="inside"&&(H+=q.ticklen||0)}}}return H}function P(F,V,j){var H=V._id,Y=F._fullData,J=F._fullLayout,ne=[],q=[],we,ee,X;function re(Re,Ee){for(we=0;we<Ee.length;we++){var ke=Re[Ee[we]],$=(ke._extremes||{})[H];if(ke.visible===!0&&$){for(ee=0;ee<$.min.length;ee++)X=$.min[ee],S(ne,X.val,X.pad,{extrapad:X.extrapad});for(ee=0;ee<$.max.length;ee++)X=$.max[ee],I(q,X.val,X.pad,{extrapad:X.extrapad})}}}if(re(Y,V._traceIndices),re(J.annotations||[],V._annIndices||[]),re(J.shapes||[],V._shapeIndices||[]),V._matchGroup&&!j){for(var de in V._matchGroup)if(de!==V._id){var me=d(F,de),xe=P(F,me,!0),He=V._length/me._length;for(ee=0;ee<xe.min.length;ee++)X=xe.min[ee],S(ne,X.val,X.pad*He,{extrapad:X.extrapad});for(ee=0;ee<xe.max.length;ee++)X=xe.max[ee],I(q,X.val,X.pad*He,{extrapad:X.extrapad})}}return{min:ne,max:q}}function D(F,V,j){if(V.setScale(),V.autorange){V.range=j?j.slice():_(F,V),V._r=V.range.slice(),V._rl=n.simpleMap(V._r,V.r2l);var H=V._input,Y={};Y[V._attr+".range"]=V.range,Y[V._attr+".autorange"]=V.autorange,u.call("_storeDirectGUIEdit",F.layout,F._fullLayout._preGUI,Y),H.range=V.range.slice(),H.autorange=V.autorange}var J=V._anchorAxis;if(J&&J.rangeslider){var ne=J.rangeslider[V._name];ne&&ne.rangemode==="auto"&&(ne.range=_(F,V)),J._input.rangeslider[V._name]=n.extendFlat({},ne)}}function R(F,V,j){j||(j={}),F._m||F.setScale();var H=[],Y=[],J=V.length,ne=j.padded||!1,q=j.tozero&&(F.type==="linear"||F.type==="-"),we=F.type==="log",ee=!1,X=j.vpadLinearized||!1,re,de,me,xe,He,Re,Ee,ke,$;function le(he){if(Array.isArray(he))return ee=!0,function(_e){return Math.max(Number(he[_e]||0),0)};var ye=Math.max(Number(he||0),0);return function(){return ye}}var K=le((F._m>0?j.ppadplus:j.ppadminus)||j.ppad||0),te=le((F._m>0?j.ppadminus:j.ppadplus)||j.ppad||0),ie=le(j.vpadplus||j.vpad),ce=le(j.vpadminus||j.vpad);if(!ee){if(ke=1/0,$=-1/0,we)for(re=0;re<J;re++)de=V[re],de<ke&&de>0&&(ke=de),de>$&&de<l&&($=de);else for(re=0;re<J;re++)de=V[re],de<ke&&de>-l&&(ke=de),de>$&&de<l&&($=de);V=[ke,$],J=2}var ae={tozero:q,extrapad:ne};function ve(he){me=V[he],s(me)&&(Re=K(he),Ee=te(he),X?(xe=F.c2l(me)-ce(he),He=F.c2l(me)+ie(he)):(ke=me-ce(he),$=me+ie(he),we&&ke<$/10&&(ke=$/10),xe=F.c2l(ke),He=F.c2l($)),q&&(xe=Math.min(0,xe),He=Math.max(0,He)),M(xe)&&S(H,xe,Ee,ae),M(He)&&I(Y,He,Re,ae))}var pe=Math.min(6,J);for(re=0;re<pe;re++)ve(re);for(re=J-1;re>=pe;re--)ve(re);return{min:H,max:Y,opts:j}}function S(F,V,j,H){T(F,V,j,H,z)}function I(F,V,j,H){T(F,V,j,H,U)}function T(F,V,j,H,Y){for(var J=H.tozero,ne=H.extrapad,q=!0,we=0;we<F.length&&q;we++){var ee=F[we];if(Y(ee.val,V)&&ee.pad>=j&&(ee.extrapad||!ne)){q=!1;break}else Y(V,ee.val)&&ee.pad<=j&&(ne||!ee.extrapad)&&(F.splice(we,1),we--)}if(q){var X=J&&V===0;F.push({val:V,pad:X?0:j,extrapad:X?!1:ne})}}function M(F){return s(F)&&Math.abs(F)<l}function z(F,V){return F<=V}function U(F,V){return F>=V}},{"../../components/drawing":125,"../../constants/numerical":224,"../../lib":244,"../../registry":327,"./axis_ids":295,"@plotly/d3":11,"fast-isnumeric":17}],291:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("../../plots/plots"),l=e("../../registry"),u=e("../../lib"),h=u.strTranslate,v=e("../../lib/svg_text_utils"),d=e("../../components/titles"),p=e("../../components/color"),_=e("../../components/drawing"),b=e("./layout_attributes"),x=e("./clean_ticks"),E=e("../../constants/numerical"),A=E.ONEMAXYEAR,P=E.ONEAVGYEAR,D=E.ONEMINYEAR,R=E.ONEMAXQUARTER,S=E.ONEAVGQUARTER,I=E.ONEMINQUARTER,T=E.ONEMAXMONTH,M=E.ONEAVGMONTH,z=E.ONEMINMONTH,U=E.ONEWEEK,F=E.ONEDAY,V=F/2,j=E.ONEHOUR,H=E.ONEMIN,Y=E.ONESEC,J=E.MINUS_SIGN,ne=E.BADNUM,q={K:"zeroline"},we={K:"gridline",L:"path"},ee={K:"minor-gridline",L:"path"},X={K:"tick",L:"path"},re={K:"tick",L:"text"},de={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},me=e("../../constants/alignment"),xe=me.MID_SHIFT,He=me.CAP_SHIFT,Re=me.LINE_SPACING,Ee=me.OPPOSITE_SIDE,ke=3,$=i.exports={};$.setConvert=e("./set_convert");var le=e("./axis_autotype"),K=e("./axis_ids"),te=K.idSort,ie=K.isLinked;$.id2name=K.id2name,$.name2id=K.name2id,$.cleanId=K.cleanId,$.list=K.list,$.listIds=K.listIds,$.getFromId=K.getFromId,$.getFromTrace=K.getFromTrace;var ce=e("./autorange");$.getAutoRange=ce.getAutoRange,$.findExtremes=ce.findExtremes;var ae=1e-4;function ve(Le){var De=(Le[1]-Le[0])*ae;return[Le[0]-De,Le[1]+De]}$.coerceRef=function(Le,De,bt,xt,Ct,Rt){var Lt=xt.charAt(xt.length-1),Pt=bt._fullLayout._subplots[Lt+"axis"],nr=xt+"ref",Tr={};return Ct||(Ct=Pt[0]||(typeof Rt=="string"?Rt:Rt[0])),Rt||(Rt=Ct),Pt=Pt.concat(Pt.map(function(gr){return gr+" domain"})),Tr[nr]={valType:"enumerated",values:Pt.concat(Rt?typeof Rt=="string"?[Rt]:Rt:[]),dflt:Ct},u.coerce(Le,De,Tr,nr)},$.getRefType=function(Le){return Le===void 0?Le:Le==="paper"?"paper":Le==="pixel"?"pixel":/( domain)$/.test(Le)?"domain":"range"},$.coercePosition=function(Le,De,bt,xt,Ct,Rt){var Lt,Pt,nr=$.getRefType(xt);if(nr!=="range")Lt=u.ensureNumber,Pt=bt(Ct,Rt);else{var Tr=$.getFromId(De,xt);Rt=Tr.fraction2r(Rt),Pt=bt(Ct,Rt),Lt=Tr.cleanPos}Le[Ct]=Lt(Pt)},$.cleanPosition=function(Le,De,bt){var xt=bt==="paper"||bt==="pixel"?u.ensureNumber:$.getFromId(De,bt).cleanPos;return xt(Le)},$.redrawComponents=function(Le,De){De=De||$.listIds(Le);var bt=Le._fullLayout;function xt(Ct,Rt,Lt,Pt){for(var nr=l.getComponentMethod(Ct,Rt),Tr={},gr=0;gr<De.length;gr++)for(var $t=bt[$.id2name(De[gr])],mr=$t[Lt],Pr=0;Pr<mr.length;Pr++){var wr=mr[Pr];if(!Tr[wr]&&(nr(Le,wr),Tr[wr]=1,Pt))return}}xt("annotations","drawOne","_annIndices"),xt("shapes","drawOne","_shapeIndices"),xt("images","draw","_imgIndices",!0),xt("selections","drawOne","_selectionIndices")};var pe=$.getDataConversions=function(Le,De,bt,xt){var Ct,Rt=bt==="x"||bt==="y"||bt==="z"?bt:xt;if(Array.isArray(Rt)){if(Ct={type:le(xt,void 0,{autotypenumbers:Le._fullLayout.autotypenumbers}),_categories:[]},$.setConvert(Ct),Ct.type==="category")for(var Lt=0;Lt<xt.length;Lt++)Ct.d2c(xt[Lt])}else Ct=$.getFromTrace(Le,De,Rt);return Ct?{d2c:Ct.d2c,c2d:Ct.c2d}:Rt==="ids"?{d2c:ye,c2d:ye}:{d2c:he,c2d:he}};function he(Le){return+Le}function ye(Le){return String(Le)}$.getDataToCoordFunc=function(Le,De,bt,xt){return pe(Le,De,bt,xt).d2c},$.counterLetter=function(Le){var De=Le.charAt(0);if(De==="x")return"y";if(De==="y")return"x"},$.minDtick=function(Le,De,bt,xt){["log","category","multicategory"].indexOf(Le.type)!==-1||!xt?Le._minDtick=0:Le._minDtick===void 0?(Le._minDtick=De,Le._forceTick0=bt):Le._minDtick&&((Le._minDtick/De+1e-6)%1<2e-6&&((bt-Le._forceTick0)/De%1+1.000001)%1<2e-6?(Le._minDtick=De,Le._forceTick0=bt):((De/Le._minDtick+1e-6)%1>2e-6||((bt-Le._forceTick0)/Le._minDtick%1+1.000001)%1>2e-6)&&(Le._minDtick=0))},$.saveRangeInitial=function(Le,De){for(var bt=$.list(Le,"",!0),xt=!1,Ct=0;Ct<bt.length;Ct++){var Rt=bt[Ct],Lt=Rt._rangeInitial===void 0,Pt=Lt||!(Rt.range[0]===Rt._rangeInitial[0]&&Rt.range[1]===Rt._rangeInitial[1]);(Lt&&Rt.autorange===!1||De&&Pt)&&(Rt._rangeInitial=Rt.range.slice(),xt=!0)}return xt},$.saveShowSpikeInitial=function(Le,De){for(var bt=$.list(Le,"",!0),xt=!1,Ct="on",Rt=0;Rt<bt.length;Rt++){var Lt=bt[Rt],Pt=Lt._showSpikeInitial===void 0,nr=Pt||Lt.showspikes!==Lt._showspikes;(Pt||De&&nr)&&(Lt._showSpikeInitial=Lt.showspikes,xt=!0),Ct==="on"&&!Lt.showspikes&&(Ct="off")}return Le._fullLayout._cartesianSpikesEnabled=Ct,xt},$.autoBin=function(Le,De,bt,xt,Ct,Rt){var Lt=u.aggNums(Math.min,null,Le),Pt=u.aggNums(Math.max,null,Le);if(De.type==="category"||De.type==="multicategory")return{start:Lt-.5,end:Pt+.5,size:Math.max(1,Math.round(Rt)||1),_dataSpan:Pt-Lt};Ct||(Ct=De.calendar);var nr;if(De.type==="log"?nr={type:"linear",range:[Lt,Pt]}:nr={type:De.type,range:u.simpleMap([Lt,Pt],De.c2r,0,Ct),calendar:Ct},$.setConvert(nr),Rt=Rt&&x.dtick(Rt,nr.type),Rt)nr.dtick=Rt,nr.tick0=x.tick0(void 0,nr.type,Ct);else{var Tr;if(bt)Tr=(Pt-Lt)/bt;else{var gr=u.distinctVals(Le),$t=Math.pow(10,Math.floor(Math.log(gr.minDiff)/Math.LN10)),mr=$t*u.roundUp(gr.minDiff/$t,[.9,1.9,4.9,9.9],!0);Tr=Math.max(mr,2*u.stdev(Le)/Math.pow(Le.length,xt?.25:.4)),s(Tr)||(Tr=1)}$.autoTicks(nr,Tr)}var Pr=nr.dtick,wr=$.tickIncrement($.tickFirst(nr),Pr,"reverse",Ct),fr,Ir;if(typeof Pr=="number")wr=_e(wr,Le,nr,Lt,Pt),Ir=1+Math.floor((Pt-wr)/Pr),fr=wr+Ir*Pr;else for(nr.dtick.charAt(0)==="M"&&(wr=je(wr,Le,Pr,Lt,Ct)),fr=wr,Ir=0;fr<=Pt;)fr=$.tickIncrement(fr,Pr,!1,Ct),Ir++;return{start:De.c2r(wr,0,Ct),end:De.c2r(fr,0,Ct),size:Pr,_dataSpan:Pt-Lt}};function _e(Le,De,bt,xt,Ct){var Rt=0,Lt=0,Pt=0,nr=0;function Tr(Pr){return(1+(Pr-Le)*100/bt.dtick)%100<2}for(var gr=0;gr<De.length;gr++)De[gr]%1===0?Pt++:s(De[gr])||nr++,Tr(De[gr])&&Rt++,Tr(De[gr]+bt.dtick/2)&&Lt++;var $t=De.length-nr;if(Pt===$t&&bt.type!=="date")bt.dtick<1?Le=xt-.5*bt.dtick:(Le-=.5,Le+bt.dtick<xt&&(Le+=bt.dtick));else if(Lt<$t*.1&&(Rt>$t*.3||Tr(xt)||Tr(Ct))){var mr=bt.dtick/2;Le+=Le+mr<xt?mr:-mr}return Le}function je(Le,De,bt,xt,Ct){var Rt=u.findExactDates(De,Ct),Lt=.8;if(Rt.exactDays>Lt){var Pt=Number(bt.substr(1));Rt.exactYears>Lt&&Pt%12===0?Le=$.tickIncrement(Le,"M6","reverse")+F*1.5:Rt.exactMonths>Lt?Le=$.tickIncrement(Le,"M1","reverse")+F*15.5:Le-=V;var nr=$.tickIncrement(Le,bt);if(nr<=xt)return nr}return Le}$.prepMinorTicks=function(Le,De,bt){if(!De.minor.dtick){delete Le.dtick;var xt=De.dtick&&s(De._tmin),Ct;if(xt){var Rt=$.tickIncrement(De._tmin,De.dtick,!0);Ct=[De._tmin,Rt*.99+De._tmin*.01]}else{var Lt=u.simpleMap(De.range,De.r2l);Ct=[Lt[0],.8*Lt[0]+.2*Lt[1]]}if(Le.range=u.simpleMap(Ct,De.l2r),Le._isMinor=!0,$.prepTicks(Le,bt),xt){var Pt=s(De.dtick),nr=s(Le.dtick),Tr=Pt?De.dtick:+De.dtick.substring(1),gr=nr?Le.dtick:+Le.dtick.substring(1);Pt&&nr?Je(Tr,gr)?Tr===2*U&&gr===2*F&&(Le.dtick=U):Tr===2*U&&gr===3*F?Le.dtick=U:Tr===U&&!(De._input.minor||{}).nticks?Le.dtick=F:nt(Tr/gr,2.5)?Le.dtick=Tr/2:Le.dtick=Tr:String(De.dtick).charAt(0)==="M"?nr?Le.dtick="M1":Je(Tr,gr)?Tr>=12&&gr===2&&(Le.dtick="M3"):Le.dtick=De.dtick:String(Le.dtick).charAt(0)==="L"?String(De.dtick).charAt(0)==="L"?Je(Tr,gr)||(Le.dtick=nt(Tr/gr,2.5)?De.dtick/2:De.dtick):Le.dtick="D1":Le.dtick==="D2"&&+De.dtick>1&&(Le.dtick=1)}Le.range=De.range}De.minor._tick0Init===void 0&&(Le.tick0=De.tick0)};function Je(Le,De){return Math.abs((Le/De+.5)%1-.5)<.001}function nt(Le,De){return Math.abs(Le/De-1)<.001}$.prepTicks=function(Le,De){var bt=u.simpleMap(Le.range,Le.r2l,void 0,void 0,De);if(Le.tickmode==="auto"||!Le.dtick){var xt=Le.nticks,Ct;xt||(Le.type==="category"||Le.type==="multicategory"?(Ct=Le.tickfont?u.bigFont(Le.tickfont.size||12):15,xt=Le._length/Ct):(Ct=Le._id.charAt(0)==="y"?40:80,xt=u.constrain(Le._length/Ct,4,9)+1),Le._name==="radialaxis"&&(xt*=2)),Le.minor&&Le.minor.tickmode!=="array"||Le.tickmode==="array"&&(xt*=100),Le._roughDTick=Math.abs(bt[1]-bt[0])/xt,$.autoTicks(Le,Le._roughDTick),Le._minDtick>0&&Le.dtick<Le._minDtick*2&&(Le.dtick=Le._minDtick,Le.tick0=Le.l2r(Le._forceTick0))}Le.ticklabelmode==="period"&&Fe(Le),Le.tick0||(Le.tick0=Le.type==="date"?"2000-01-01":0),Le.type==="date"&&Le.dtick<.1&&(Le.dtick=.1),Vt(Le)};function at(Le){return+Le.substring(1)}function Fe(Le){var De;function bt(){return!(s(Le.dtick)||Le.dtick.charAt(0)!=="M")}var xt=bt(),Ct=$.getTickFormat(Le);if(Ct){var Rt=Le._dtickInit!==Le.dtick;/%[fLQsSMX]/.test(Ct)||(/%[HI]/.test(Ct)?(De=j,Rt&&!xt&&Le.dtick<j&&(Le.dtick=j)):/%p/.test(Ct)?(De=V,Rt&&!xt&&Le.dtick<V&&(Le.dtick=V)):/%[Aadejuwx]/.test(Ct)?(De=F,Rt&&!xt&&Le.dtick<F&&(Le.dtick=F)):/%[UVW]/.test(Ct)?(De=U,Rt&&!xt&&Le.dtick<U&&(Le.dtick=U)):/%[Bbm]/.test(Ct)?(De=M,Rt&&(xt?at(Le.dtick)<1:Le.dtick<z)&&(Le.dtick="M1")):/%[q]/.test(Ct)?(De=S,Rt&&(xt?at(Le.dtick)<3:Le.dtick<I)&&(Le.dtick="M3")):/%[Yy]/.test(Ct)&&(De=P,Rt&&(xt?at(Le.dtick)<12:Le.dtick<D)&&(Le.dtick="M12")))}xt=bt(),xt&&Le.tick0===Le._dowTick0&&(Le.tick0=Le._rawTick0),Le._definedDelta=De}function Ie(Le,De,bt){for(var xt=0;xt<Le.length;xt++){var Ct=Le[xt].value,Rt=xt,Lt=xt+1;xt<Le.length-1?(Rt=xt,Lt=xt+1):xt>0?(Rt=xt-1,Lt=xt):(Rt=xt,Lt=xt);var Pt=Le[Rt].value,nr=Le[Lt].value,Tr=Math.abs(nr-Pt),gr=bt||Tr,$t=0;gr>=D?Tr>=D&&Tr<=A?$t=Tr:$t=P:bt===S&&gr>=I?Tr>=I&&Tr<=R?$t=Tr:$t=S:gr>=z?Tr>=z&&Tr<=T?$t=Tr:$t=M:bt===U&&gr>=U?$t=U:gr>=F?$t=F:bt===V&&gr>=V?$t=V:bt===j&&gr>=j&&($t=j);var mr;$t>=Tr&&($t=Tr,mr=!0);var Pr=Ct+$t;if(De.rangebreaks&&$t>0){for(var wr=84,fr=0,Ir=0;Ir<wr;Ir++){var Vr=(Ir+.5)/wr;De.maskBreaks(Ct*(1-Vr)+Vr*Pr)!==ne&&fr++}$t*=fr/wr,$t||(Le[xt].drop=!0),mr&&Tr>U&&($t=Tr)}($t>0||xt===0)&&(Le[xt].periodX=Ct+$t/2)}}$.calcTicks=function(De,bt){for(var xt=De.type,Ct=De.calendar,Rt=De.ticklabelstep,Lt=De.ticklabelmode==="period",Pt=u.simpleMap(De.range,De.r2l,void 0,void 0,bt),nr=Pt[1]<Pt[0],Tr=Math.min(Pt[0],Pt[1]),gr=Math.max(Pt[0],Pt[1]),$t=Math.max(1e3,De._length||0),mr=[],Pr=[],wr=[],fr=[],Ir=De.minor&&(De.minor.ticks||De.minor.showgrid),Vr=1;Vr>=(Ir?0:1);Vr--){var _r=!Vr;Vr?(De._dtickInit=De.dtick,De._tick0Init=De.tick0):(De.minor._dtickInit=De.minor.dtick,De.minor._tick0Init=De.minor.tick0);var Gr=Vr?De:u.extendFlat({},De,De.minor);if(_r?$.prepMinorTicks(Gr,De,bt):$.prepTicks(Gr,bt),Gr.tickmode==="array"){Vr?(wr=[],mr=Ke(De)):(fr=[],Pr=Ke(De));continue}var qr=ve(Pt),tn=qr[0],Ur=qr[1],Sn=s(Gr.dtick),wn=xt==="log"&&!(Sn||Gr.dtick.charAt(0)==="L"),hn=$.tickFirst(Gr,bt);if(Vr){if(De._tmin=hn,hn<tn!==nr)break;(xt==="category"||xt==="multicategory")&&(Ur=nr?Math.max(-.5,Ur):Math.min(De._categories.length-.5,Ur))}var bn=null,mn=hn,Dn;if(Vr){var Yn;Sn?Yn=De.dtick:xt==="date"?typeof De.dtick=="string"&&De.dtick.charAt(0)==="M"&&(Yn=M*De.dtick.substring(1)):Yn=De._roughDTick,Dn=Math.round((De.r2l(mn)-De.r2l(De.tick0))/Yn)-1}var hi=Gr.dtick;for(Gr.rangebreaks&&Gr._tick0Init!==Gr.tick0&&(mn=vr(mn,De),nr||(mn=$.tickIncrement(mn,hi,!nr,Ct))),Vr&&Lt&&(mn=$.tickIncrement(mn,hi,!nr,Ct),Dn--);nr?mn>=Ur:mn<=Ur;mn=$.tickIncrement(mn,hi,nr,Ct)){if(Vr&&Dn++,Gr.rangebreaks&&!nr){if(mn<tn)continue;if(Gr.maskBreaks(mn)===ne&&vr(mn,Gr)>=gr)break}if(wr.length>$t||mn===bn)break;bn=mn;var mi={value:mn};Vr?(wn&&mn!==(mn|0)&&(mi.simpleLabel=!0),Rt>1&&Dn%Rt&&(mi.skipLabel=!0),wr.push(mi)):(mi.minor=!0,fr.push(mi))}}if(Ir){var Zi=De.minor.ticks==="inside"&&De.ticks==="outside"||De.minor.ticks==="outside"&&De.ticks==="inside";if(!Zi){for(var Bn=wr.map(function(Ta){return Ta.value}),Ai=[],vi=0;vi<fr.length;vi++){var Mo=fr[vi],sa=Mo.value;if(Bn.indexOf(sa)===-1){for(var Ea=!1,Oa=0;!Ea&&Oa<wr.length;Oa++)1e7+wr[Oa].value===1e7+sa&&(Ea=!0);Ea||Ai.push(Mo)}}fr=Ai}}Lt&&Ie(wr,De,De._definedDelta);var Kn;if(De.rangebreaks){var ko=De._id.charAt(0)==="y",to=1;De.tickmode==="auto"&&(to=De.tickfont?De.tickfont.size:12);var Wi=NaN;for(Kn=wr.length-1;Kn>-1;Kn--){if(wr[Kn].drop){wr.splice(Kn,1);continue}wr[Kn].value=vr(wr[Kn].value,De);var ro=De.c2p(wr[Kn].value);(ko?Wi>ro-to:Wi<ro+to)?wr.splice(nr?Kn+1:Kn,1):Wi=ro}}Kr(De)&&Math.abs(Pt[1]-Pt[0])===360&&wr.pop(),De._tmax=(wr[wr.length-1]||{}).value,De._prevDateHead="",De._inCalcTicks=!0;var Ts,ya=function(Ta){Ta.text="",De._prevDateHead=Ts};wr=wr.concat(fr);var Io,za;for(Kn=0;Kn<wr.length;Kn++){var us=wr[Kn].minor,Jo=wr[Kn].value;us?Pr.push({x:Jo,minor:!0}):(Ts=De._prevDateHead,Io=$.tickText(De,Jo,!1,wr[Kn].simpleLabel),za=wr[Kn].periodX,za!==void 0&&(Io.periodX=za,(za>gr||za<Tr)&&(za>gr&&(Io.periodX=gr),za<Tr&&(Io.periodX=Tr),ya(Io))),wr[Kn].skipLabel&&ya(Io),mr.push(Io))}return mr=mr.concat(Pr),De._inCalcTicks=!1,Lt&&mr.length&&(mr[0].noTick=!0),mr};function Ke(Le){var De=u.simpleMap(Le.range,Le.r2l),bt=ve(De),xt=Math.min(bt[0],bt[1]),Ct=Math.max(bt[0],bt[1]),Rt=Le.type==="category"?Le.d2l_noadd:Le.d2l;Le.type==="log"&&String(Le.dtick).charAt(0)!=="L"&&(Le.dtick="L"+Math.pow(10,Math.floor(Math.min(Le.range[0],Le.range[1]))-1));for(var Lt=[],Pt=0;Pt<=1;Pt++)if(!(Pt&&!Le.minor)){var nr=Pt?Le.minor.tickvals:Le.tickvals,Tr=Pt?[]:Le.ticktext;if(!!nr){Array.isArray(Tr)||(Tr=[]);for(var gr=0;gr<nr.length;gr++){var $t=Rt(nr[gr]);if($t>xt&&$t<Ct){var mr=Tr[gr]===void 0?$.tickText(Le,$t):Yt(Le,$t,String(Tr[gr]));Pt&&(mr.minor=!0,mr.text=""),Lt.push(mr)}}}}return Le.rangebreaks&&(Lt=Lt.filter(function(Pr){return Le.maskBreaks(Pr.x)!==ne})),Lt}var Qe=[2,5,10],it=[1,2,3,6,12],Ne=[1,2,5,10,15,30],ht=[1,2,3,7,14],Tt=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Xt=[-.301,0,.301,.699,1],Nt=[15,30,45,90,180];function Mt(Le,De,bt){return De*u.roundUp(Le/De,bt)}$.autoTicks=function(Le,De,bt){var xt;function Ct($t){return Math.pow($t,Math.floor(Math.log(De)/Math.LN10))}if(Le.type==="date"){Le.tick0=u.dateTick0(Le.calendar,0);var Rt=2*De;if(Rt>P)De/=P,xt=Ct(10),Le.dtick="M"+12*Mt(De,xt,Qe);else if(Rt>M)De/=M,Le.dtick="M"+Mt(De,1,it);else if(Rt>F){if(Le.dtick=Mt(De,F,Le._hasDayOfWeekBreaks?[1,2,7,14]:ht),!bt){var Lt=$.getTickFormat(Le),Pt=Le.ticklabelmode==="period";Pt&&(Le._rawTick0=Le.tick0),/%[uVW]/.test(Lt)?Le.tick0=u.dateTick0(Le.calendar,2):Le.tick0=u.dateTick0(Le.calendar,1),Pt&&(Le._dowTick0=Le.tick0)}}else Rt>j?Le.dtick=Mt(De,j,it):Rt>H?Le.dtick=Mt(De,H,Ne):Rt>Y?Le.dtick=Mt(De,Y,Ne):(xt=Ct(10),Le.dtick=Mt(De,xt,Qe))}else if(Le.type==="log"){Le.tick0=0;var nr=u.simpleMap(Le.range,Le.r2l);if(Le._isMinor&&(De*=1.5),De>.7)Le.dtick=Math.ceil(De);else if(Math.abs(nr[1]-nr[0])<1){var Tr=1.5*Math.abs((nr[1]-nr[0])/De);De=Math.abs(Math.pow(10,nr[1])-Math.pow(10,nr[0]))/Tr,xt=Ct(10),Le.dtick="L"+Mt(De,xt,Qe)}else Le.dtick=De>.3?"D2":"D1"}else Le.type==="category"||Le.type==="multicategory"?(Le.tick0=0,Le.dtick=Math.ceil(Math.max(De,1))):Kr(Le)?(Le.tick0=0,xt=1,Le.dtick=Mt(De,xt,Nt)):(Le.tick0=0,xt=Ct(10),Le.dtick=Mt(De,xt,Qe));if(Le.dtick===0&&(Le.dtick=1),!s(Le.dtick)&&typeof Le.dtick!="string"){var gr=Le.dtick;throw Le.dtick=1,"ax.dtick error: "+String(gr)}};function Vt(Le){var De=Le.dtick;if(Le._tickexponent=0,!s(De)&&typeof De!="string"&&(De=1),(Le.type==="category"||Le.type==="multicategory")&&(Le._tickround=null),Le.type==="date"){var bt=Le.r2l(Le.tick0),xt=Le.l2r(bt).replace(/(^-|i)/g,""),Ct=xt.length;if(String(De).charAt(0)==="M")Ct>10||xt.substr(5)!=="01-01"?Le._tickround="d":Le._tickround=+De.substr(1)%12===0?"y":"m";else if(De>=F&&Ct<=10||De>=F*15)Le._tickround="d";else if(De>=H&&Ct<=16||De>=j)Le._tickround="M";else if(De>=Y&&Ct<=19||De>=H)Le._tickround="S";else{var Rt=Le.l2r(bt+De).replace(/^-/,"").length;Le._tickround=Math.max(Ct,Rt)-20,Le._tickround<0&&(Le._tickround=4)}}else if(s(De)||De.charAt(0)==="L"){var Lt=Le.range.map(Le.r2d||Number);s(De)||(De=Number(De.substr(1))),Le._tickround=2-Math.floor(Math.log(De)/Math.LN10+.01);var Pt=Math.max(Math.abs(Lt[0]),Math.abs(Lt[1])),nr=Math.floor(Math.log(Pt)/Math.LN10+.01),Tr=Le.minexponent===void 0?3:Le.minexponent;Math.abs(nr)>Tr&&(pt(Le.exponentformat)&&!kt(nr)?Le._tickexponent=3*Math.round((nr-1)/3):Le._tickexponent=nr)}else Le._tickround=null}$.tickIncrement=function(Le,De,bt,xt){var Ct=bt?-1:1;if(s(De))return u.increment(Le,Ct*De);var Rt=De.charAt(0),Lt=Ct*Number(De.substr(1));if(Rt==="M")return u.incrementMonth(Le,Lt,xt);if(Rt==="L")return Math.log(Math.pow(10,Le)+Lt)/Math.LN10;if(Rt==="D"){var Pt=De==="D2"?Xt:Tt,nr=Le+Ct*.01,Tr=u.roundUp(u.mod(nr,1),Pt,bt);return Math.floor(nr)+Math.log(a.round(Math.pow(10,Tr),1))/Math.LN10}throw"unrecognized dtick "+String(De)},$.tickFirst=function(Le,De){var bt=Le.r2l||Number,xt=u.simpleMap(Le.range,bt,void 0,void 0,De),Ct=xt[1]<xt[0],Rt=Ct?Math.floor:Math.ceil,Lt=ve(xt)[0],Pt=Le.dtick,nr=bt(Le.tick0);if(s(Pt)){var Tr=Rt((Lt-nr)/Pt)*Pt+nr;return(Le.type==="category"||Le.type==="multicategory")&&(Tr=u.constrain(Tr,0,Le._categories.length-1)),Tr}var gr=Pt.charAt(0),$t=Number(Pt.substr(1));if(gr==="M"){for(var mr=0,Pr=nr,wr,fr,Ir;mr<10;){if(wr=$.tickIncrement(Pr,Pt,Ct,Le.calendar),(wr-Lt)*(Pr-Lt)<=0)return Ct?Math.min(Pr,wr):Math.max(Pr,wr);fr=(Lt-(Pr+wr)/2)/(wr-Pr),Ir=gr+(Math.abs(Math.round(fr))||1)*$t,Pr=$.tickIncrement(Pr,Ir,fr<0?!Ct:Ct,Le.calendar),mr++}return u.error("tickFirst did not converge",Le),Pr}else{if(gr==="L")return Math.log(Rt((Math.pow(10,Lt)-nr)/$t)*$t+nr)/Math.LN10;if(gr==="D"){var Vr=Pt==="D2"?Xt:Tt,_r=u.roundUp(u.mod(Lt,1),Vr,Ct);return Math.floor(Lt)+Math.log(a.round(Math.pow(10,_r),1))/Math.LN10}else throw"unrecognized dtick "+String(Pt)}},$.tickText=function(Le,De,bt,xt){var Ct=Yt(Le,De),Rt=Le.tickmode==="array",Lt=bt||Rt,Pt=Le.type,nr=Pt==="category"?Le.d2l_noadd:Le.d2l,Tr;if(Rt&&Array.isArray(Le.ticktext)){var gr=u.simpleMap(Le.range,Le.r2l),$t=(Math.abs(gr[1]-gr[0])-(Le._lBreaks||0))/1e4;for(Tr=0;Tr<Le.ticktext.length&&!(Math.abs(De-nr(Le.tickvals[Tr]))<$t);Tr++);if(Tr<Le.ticktext.length)return Ct.text=String(Le.ticktext[Tr]),Ct}function mr(fr){if(fr===void 0)return!0;if(bt)return fr==="none";var Ir={first:Le._tmin,last:Le._tmax}[fr];return fr!=="all"&&De!==Ir}var Pr=bt?"never":Le.exponentformat!=="none"&&mr(Le.showexponent)?"hide":"";if(Pt==="date"?cr(Le,Ct,bt,Lt):Pt==="log"?Nr(Le,Ct,bt,Lt,Pr):Pt==="category"?er(Le,Ct):Pt==="multicategory"?Wt(Le,Ct,bt):Kr(Le)?zr(Le,Ct,bt,Lt,Pr):dr(Le,Ct,bt,Lt,Pr),xt||(Le.tickprefix&&!mr(Le.showtickprefix)&&(Ct.text=Le.tickprefix+Ct.text),Le.ticksuffix&&!mr(Le.showticksuffix)&&(Ct.text+=Le.ticksuffix)),Le.tickson==="boundaries"||Le.showdividers){var wr=function(fr){var Ir=Le.l2p(fr);return Ir>=0&&Ir<=Le._length?fr:null};Ct.xbnd=[wr(Ct.x-.5),wr(Ct.x+Le.dtick-.5)]}return Ct},$.hoverLabelText=function(Le,De,bt){bt&&(Le=u.extendFlat({},Le,{hoverformat:bt}));var xt=Array.isArray(De)?De[0]:De,Ct=Array.isArray(De)?De[1]:void 0;if(Ct!==void 0&&Ct!==xt)return $.hoverLabelText(Le,xt,bt)+" - "+$.hoverLabelText(Le,Ct,bt);var Rt=Le.type==="log"&&xt<=0,Lt=$.tickText(Le,Le.c2l(Rt?-xt:xt),"hover").text;return Rt?xt===0?"0":J+Lt:Lt};function Yt(Le,De,bt){var xt=Le.tickfont||{};return{x:De,dx:0,dy:0,text:bt||"",fontSize:xt.size,font:xt.family,fontColor:xt.color}}function cr(Le,De,bt,xt){var Ct=Le._tickround,Rt=bt&&Le.hoverformat||$.getTickFormat(Le);xt&&(s(Ct)?Ct=4:Ct={y:"m",m:"d",d:"M",M:"S",S:4}[Ct]);var Lt=u.formatDate(De.x,Rt,Ct,Le._dateFormat,Le.calendar,Le._extraFormat),Pt,nr=Lt.indexOf(`
`);if(nr!==-1&&(Pt=Lt.substr(nr+1),Lt=Lt.substr(0,nr)),xt&&(Lt==="00:00:00"||Lt==="00:00"?(Lt=Pt,Pt=""):Lt.length===8&&(Lt=Lt.replace(/:00$/,""))),Pt)if(bt)Ct==="d"?Lt+=", "+Pt:Lt=Pt+(Lt?", "+Lt:"");else if(!Le._inCalcTicks||Le._prevDateHead!==Pt)Le._prevDateHead=Pt,Lt+="<br>"+Pt;else{var Tr=Xr(Le),gr=Le._trueSide||Le.side;(!Tr&&gr==="top"||Tr&&gr==="bottom")&&(Lt+="<br> ")}De.text=Lt}function Nr(Le,De,bt,xt,Ct){var Rt=Le.dtick,Lt=De.x,Pt=Le.tickformat,nr=typeof Rt=="string"&&Rt.charAt(0);if(Ct==="never"&&(Ct=""),xt&&nr!=="L"&&(Rt="L3",nr="L"),Pt||nr==="L")De.text=Me(Math.pow(10,Lt),Le,Ct,xt);else if(s(Rt)||nr==="D"&&u.mod(Lt+.01,1)<.1){var Tr=Math.round(Lt),gr=Math.abs(Tr),$t=Le.exponentformat;$t==="power"||pt($t)&&kt(Tr)?(Tr===0?De.text=1:Tr===1?De.text="10":De.text="10<sup>"+(Tr>1?"":J)+gr+"</sup>",De.fontSize*=1.25):($t==="e"||$t==="E")&&gr>2?De.text="1"+$t+(Tr>0?"+":J)+gr:(De.text=Me(Math.pow(10,Lt),Le,"","fakehover"),Rt==="D1"&&Le._id.charAt(0)==="y"&&(De.dy-=De.fontSize/6))}else if(nr==="D")De.text=String(Math.round(Math.pow(10,u.mod(Lt,1)))),De.fontSize*=.75;else throw"unrecognized dtick "+String(Rt);if(Le.dtick==="D1"){var mr=String(De.text).charAt(0);(mr==="0"||mr==="1")&&(Le._id.charAt(0)==="y"?De.dx-=De.fontSize/4:(De.dy+=De.fontSize/2,De.dx+=(Le.range[1]>Le.range[0]?1:-1)*De.fontSize*(Lt<0?.5:.25)))}}function er(Le,De){var bt=Le._categories[Math.round(De.x)];bt===void 0&&(bt=""),De.text=String(bt)}function Wt(Le,De,bt){var xt=Math.round(De.x),Ct=Le._categories[xt]||[],Rt=Ct[1]===void 0?"":String(Ct[1]),Lt=Ct[0]===void 0?"":String(Ct[0]);bt?De.text=Lt+" - "+Rt:(De.text=Rt,De.text2=Lt)}function dr(Le,De,bt,xt,Ct){Ct==="never"?Ct="":Le.showexponent==="all"&&Math.abs(De.x/Le.dtick)<1e-6&&(Ct="hide"),De.text=Me(De.x,Le,Ct,xt)}function zr(Le,De,bt,xt,Ct){if(Le.thetaunit==="radians"&&!bt){var Rt=De.x/180;if(Rt===0)De.text="0";else{var Lt=Dr(Rt);if(Lt[1]>=100)De.text=Me(u.deg2rad(De.x),Le,Ct,xt);else{var Pt=De.x<0;Lt[1]===1?Lt[0]===1?De.text="\u03C0":De.text=Lt[0]+"\u03C0":De.text=["<sup>",Lt[0],"</sup>","\u2044","<sub>",Lt[1],"</sub>","\u03C0"].join(""),Pt&&(De.text=J+De.text)}}}else De.text=Me(De.x,Le,Ct,xt)}function Dr(Le){function De(Pt,nr){return Math.abs(Pt-nr)<=1e-6}function bt(Pt,nr){return De(nr,0)?Pt:bt(nr,Pt%nr)}function xt(Pt){for(var nr=1;!De(Math.round(Pt*nr)/nr,Pt);)nr*=10;return nr}var Ct=xt(Le),Rt=Le*Ct,Lt=Math.abs(bt(Rt,Ct));return[Math.round(Rt/Lt),Math.round(Ct/Lt)]}var $e=["f","p","n","\u03BC","m","","k","M","G","T"];function pt(Le){return Le==="SI"||Le==="B"}function kt(Le){return Le>14||Le<-15}function Me(Le,De,bt,xt){var Ct=Le<0,Rt=De._tickround,Lt=bt||De.exponentformat||"B",Pt=De._tickexponent,nr=$.getTickFormat(De),Tr=De.separatethousands;if(xt){var gr={exponentformat:Lt,minexponent:De.minexponent,dtick:De.showexponent==="none"?De.dtick:s(Le)&&Math.abs(Le)||1,range:De.showexponent==="none"?De.range.map(De.r2d):[0,Le||1]};Vt(gr),Rt=(Number(gr._tickround)||0)+4,Pt=gr._tickexponent,De.hoverformat&&(nr=De.hoverformat)}if(nr)return De._numFormat(nr)(Le).replace(/-/g,J);var $t=Math.pow(10,-Rt)/2;if(Lt==="none"&&(Pt=0),Le=Math.abs(Le),Le<$t)Le="0",Ct=!1;else{if(Le+=$t,Pt&&(Le*=Math.pow(10,-Pt),Rt+=Pt),Rt===0)Le=String(Math.floor(Le));else if(Rt<0){Le=String(Math.round(Le)),Le=Le.substr(0,Le.length+Rt);for(var mr=Rt;mr<0;mr++)Le+="0"}else{Le=String(Le);var Pr=Le.indexOf(".")+1;Pr&&(Le=Le.substr(0,Pr+Rt).replace(/\.?0+$/,""))}Le=u.numSeparate(Le,De._separators,Tr)}if(Pt&&Lt!=="hide"){pt(Lt)&&kt(Pt)&&(Lt="power");var wr;Pt<0?wr=J+-Pt:Lt!=="power"?wr="+"+Pt:wr=String(Pt),Lt==="e"||Lt==="E"?Le+=Lt+wr:Lt==="power"?Le+="\xD710<sup>"+wr+"</sup>":Lt==="B"&&Pt===9?Le+="B":pt(Lt)&&(Le+=$e[Pt/3+5])}return Ct?J+Le:Le}$.getTickFormat=function(Le){var De;function bt(nr){return typeof nr!="string"?nr:Number(nr.replace("M",""))*M}function xt(nr,Tr){var gr=["L","D"];if(typeof nr==typeof Tr){if(typeof nr=="number")return nr-Tr;var $t=gr.indexOf(nr.charAt(0)),mr=gr.indexOf(Tr.charAt(0));return $t===mr?Number(nr.replace(/(L|D)/g,""))-Number(Tr.replace(/(L|D)/g,"")):$t-mr}else return typeof nr=="number"?1:-1}function Ct(nr,Tr,gr){var $t=gr||function(wr){return wr},mr=Tr[0],Pr=Tr[1];return(!mr&&typeof mr!="number"||$t(mr)<=$t(nr))&&(!Pr&&typeof Pr!="number"||$t(Pr)>=$t(nr))}function Rt(nr,Tr){var gr=Tr[0]===null,$t=Tr[1]===null,mr=xt(nr,Tr[0])>=0,Pr=xt(nr,Tr[1])<=0;return(gr||mr)&&($t||Pr)}var Lt,Pt;if(Le.tickformatstops&&Le.tickformatstops.length>0)switch(Le.type){case"date":case"linear":{for(De=0;De<Le.tickformatstops.length;De++)if(Pt=Le.tickformatstops[De],Pt.enabled&&Ct(Le.dtick,Pt.dtickrange,bt)){Lt=Pt;break}break}case"log":{for(De=0;De<Le.tickformatstops.length;De++)if(Pt=Le.tickformatstops[De],Pt.enabled&&Rt(Le.dtick,Pt.dtickrange)){Lt=Pt;break}break}}return Lt?Lt.value:Le.tickformat},$.getSubplots=function(Le,De){var bt=Le._fullLayout._subplots,xt=bt.cartesian.concat(bt.gl2d||[]),Ct=De?$.findSubplotsWithAxis(xt,De):xt;return Ct.sort(function(Rt,Lt){var Pt=Rt.substr(1).split("y"),nr=Lt.substr(1).split("y");return Pt[0]===nr[0]?+Pt[1]-+nr[1]:+Pt[0]-+nr[0]}),Ct},$.findSubplotsWithAxis=function(Le,De){for(var bt=new RegExp(De._id.charAt(0)==="x"?"^"+De._id+"y":De._id+"$"),xt=[],Ct=0;Ct<Le.length;Ct++){var Rt=Le[Ct];bt.test(Rt)&&xt.push(Rt)}return xt},$.makeClipPaths=function(Le){var De=Le._fullLayout;if(!De._hasOnlyLargeSploms){var bt={_offset:0,_length:De.width,_id:""},xt={_offset:0,_length:De.height,_id:""},Ct=$.list(Le,"x",!0),Rt=$.list(Le,"y",!0),Lt=[],Pt,nr;for(Pt=0;Pt<Ct.length;Pt++)for(Lt.push({x:Ct[Pt],y:xt}),nr=0;nr<Rt.length;nr++)Pt===0&&Lt.push({x:bt,y:Rt[nr]}),Lt.push({x:Ct[Pt],y:Rt[nr]});var Tr=De._clips.selectAll(".axesclip").data(Lt,function(gr){return gr.x._id+gr.y._id});Tr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(gr){return"clip"+De._uid+gr.x._id+gr.y._id}).append("rect"),Tr.exit().remove(),Tr.each(function(gr){a.select(this).select("rect").attr({x:gr.x._offset||0,y:gr.y._offset||0,width:gr.x._length||1,height:gr.y._length||1})})}},$.draw=function(Le,De,bt){var xt=Le._fullLayout;De==="redraw"&&xt._paper.selectAll("g.subplot").each(function(Rt){var Lt=Rt[0],Pt=xt._plots[Lt];if(Pt){var nr=Pt.xaxis,Tr=Pt.yaxis;Pt.xaxislayer.selectAll("."+nr._id+"tick").remove(),Pt.yaxislayer.selectAll("."+Tr._id+"tick").remove(),Pt.xaxislayer.selectAll("."+nr._id+"tick2").remove(),Pt.yaxislayer.selectAll("."+Tr._id+"tick2").remove(),Pt.xaxislayer.selectAll("."+nr._id+"divider").remove(),Pt.yaxislayer.selectAll("."+Tr._id+"divider").remove(),Pt.minorGridlayer&&Pt.minorGridlayer.selectAll("path").remove(),Pt.gridlayer&&Pt.gridlayer.selectAll("path").remove(),Pt.zerolinelayer&&Pt.zerolinelayer.selectAll("path").remove(),xt._infolayer.select(".g-"+nr._id+"title").remove(),xt._infolayer.select(".g-"+Tr._id+"title").remove()}});var Ct=!De||De==="redraw"?$.listIds(Le):De;return u.syncOrAsync(Ct.map(function(Rt){return function(){if(!!Rt){var Lt=$.getFromId(Le,Rt),Pt=$.drawOne(Le,Lt,bt);return Lt._r=Lt.range.slice(),Lt._rl=u.simpleMap(Lt._r,Lt.r2l),Pt}}}))},$.drawOne=function(Le,De,bt){bt=bt||{};var xt,Ct,Rt;De.setScale();var Lt=Le._fullLayout,Pt=De._id,nr=Pt.charAt(0),Tr=$.counterLetter(Pt),gr=Lt._plots[De._mainSubplot];if(!gr)return;var $t=gr[nr+"axislayer"],mr=De._mainLinePosition,Pr=De._mainMirrorPosition,wr=De._vals=$.calcTicks(De),fr=[De.mirror,mr,Pr].join("_");for(xt=0;xt<wr.length;xt++)wr[xt].axInfo=fr;De._selections={},De._tickAngles&&(De._prevTickAngles=De._tickAngles),De._tickAngles={},De._depth=null;var Ir={};function Vr(Ta){var di=Pt+(Ta||"tick");return Ir[di]||(Ir[di]=Ue(De,di)),Ir[di]}if(!!De.visible){var _r=$.makeTransTickFn(De),Gr=$.makeTransTickLabelFn(De),qr,tn,Ur=De.ticks==="inside",Sn=De.ticks==="outside";if(De.tickson==="boundaries"){var wn=st(De,wr);tn=$.clipEnds(De,wn),qr=Ur?tn:wn}else tn=$.clipEnds(De,wr),qr=Ur&&De.ticklabelmode!=="period"?tn:wr;var hn=De._gridVals=tn,bn=zt(De,wr);if(!Lt._hasOnlyLargeSploms){var mn=De._subplotsWith,Dn={};for(xt=0;xt<mn.length;xt++){Ct=mn[xt],Rt=Lt._plots[Ct];var Yn=Rt[Tr+"axis"],hi=Yn._mainAxis._id;if(!Dn[hi]){Dn[hi]=1;var mi=nr==="x"?"M0,"+Yn._offset+"v"+Yn._length:"M"+Yn._offset+",0h"+Yn._length;$.drawGrid(Le,De,{vals:hn,counterAxis:Yn,layer:Rt.gridlayer.select("."+Pt),minorLayer:Rt.minorGridlayer.select("."+Pt),path:mi,transFn:_r}),$.drawZeroLine(Le,De,{counterAxis:Yn,layer:Rt.zerolinelayer,path:mi,transFn:_r})}}}var Zi,Bn=$.getTickSigns(De),Ai=$.getTickSigns(De,"minor");if(De.ticks||De.minor&&De.minor.ticks){var vi=$.makeTickPath(De,mr,Bn[2]),Mo=$.makeTickPath(De,mr,Ai[2],{minor:!0}),sa,Ea,Oa,Kn;if(De._anchorAxis&&De.mirror&&De.mirror!==!0?(sa=$.makeTickPath(De,Pr,Bn[3]),Ea=$.makeTickPath(De,Pr,Ai[3],{minor:!0}),Oa=vi+sa,Kn=Mo+Ea):(sa="",Ea="",Oa=vi,Kn=Mo),De.showdividers&&Sn&&De.tickson==="boundaries"){var ko={};for(xt=0;xt<bn.length;xt++)ko[bn[xt].x]=1;Zi=function(Ta){return ko[Ta.x]?sa:Oa}}else Zi=function(Ta){return Ta.minor?Kn:Oa}}if($.drawTicks(Le,De,{vals:qr,layer:$t,path:Zi,transFn:_r}),De.mirror==="allticks"){var to=Object.keys(De._linepositions||{});for(xt=0;xt<to.length;xt++){Ct=to[xt],Rt=Lt._plots[Ct];var Wi=De._linepositions[Ct]||[],ro=Wi[0],Ts=Wi[1],ya=Wi[2],Io=$.makeTickPath(De,ro,ya?Bn[0]:Ai[0],{minor:ya})+$.makeTickPath(De,Ts,ya?Bn[1]:Ai[1],{minor:ya});$.drawTicks(Le,De,{vals:qr,layer:Rt[nr+"axislayer"],path:Io,transFn:_r})}}var za=[];if(za.push(function(){return $.drawLabels(Le,De,{vals:wr,layer:$t,plotinfo:Rt,transFn:Gr,labelFns:$.makeLabelFns(De,mr)})}),De.type==="multicategory"){var us={x:2,y:10}[nr];za.push(function(){var Ta={x:"height",y:"width"}[nr],di=Vr()[Ta]+us+(De._tickAngles[Pt+"tick"]?De.tickfont.size*Re:0);return $.drawLabels(Le,De,{vals:ft(De,wr),layer:$t,cls:Pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:_r,labelFns:$.makeLabelFns(De,mr+di*Bn[4])})}),za.push(function(){return De._depth=Bn[4]*(Vr("tick2")[De.side]-mr),Ve(Le,De,{vals:bn,layer:$t,path:$.makeTickPath(De,mr,Bn[4],{len:De._depth}),transFn:_r})})}else De.title.hasOwnProperty("standoff")&&za.push(function(){De._depth=Bn[4]*(Vr()[De.side]-mr)});var Jo=l.getComponentMethod("rangeslider","isVisible")(De);return za.push(function(){var Ta=De.side.charAt(0),di=Ee[De.side].charAt(0),zs=$.getPxPosition(Le,De),Ya=Sn?De.ticklen:0,_a,Ba,cs,fs;if((De.automargin||Jo)&&(De.type==="multicategory"?_a=Vr("tick2"):(_a=Vr(),nr==="x"&&Ta==="b"&&(De._depth=Math.max(_a.width>0?_a.bottom-zs:0,Ya)))),De.automargin){Ba={x:0,y:0,r:0,l:0,t:0,b:0};var $o=[0,1];if(nr==="x"){if(Ta==="b"?Ba[Ta]=De._depth:(Ba[Ta]=De._depth=Math.max(_a.width>0?zs-_a.top:0,Ya),$o.reverse()),_a.width>0){var As=_a.right-(De._offset+De._length);As>0&&(Ba.xr=1,Ba.r=As);var Fu=De._offset-_a.left;Fu>0&&(Ba.xl=0,Ba.l=Fu)}}else if(Ta==="l"?Ba[Ta]=De._depth=Math.max(_a.height>0?zs-_a.left:0,Ya):(Ba[Ta]=De._depth=Math.max(_a.height>0?_a.right-zs:0,Ya),$o.reverse()),_a.height>0){var Ou=_a.bottom-(De._offset+De._length);Ou>0&&(Ba.yb=0,Ba.b=Ou);var Vl=De._offset-_a.top;Vl>0&&(Ba.yt=1,Ba.t=Vl)}Ba[Tr]=De.anchor==="free"?De.position:De._anchorAxis.domain[$o[0]],De.title.text!==Lt._dfltTitle[nr]&&(Ba[Ta]+=lt(De)+(De.title.standoff||0)),De.mirror&&De.anchor!=="free"&&(cs={x:0,y:0,r:0,l:0,t:0,b:0},cs[di]=De.linewidth,De.mirror&&De.mirror!==!0&&(cs[di]+=Ya),De.mirror===!0||De.mirror==="ticks"?cs[Tr]=De._anchorAxis.domain[$o[1]]:(De.mirror==="all"||De.mirror==="allticks")&&(cs[Tr]=[De._counterDomainMin,De._counterDomainMax][$o[1]]))}Jo&&(fs=l.getComponentMethod("rangeslider","autoMarginOpts")(Le,De)),typeof De.automargin=="string"&&(rt(Ba,De.automargin),rt(cs,De.automargin)),n.autoMargin(Le,tr(De),Ba),n.autoMargin(Le,vt(De),cs),n.autoMargin(Le,pr(De),fs)}),!bt.skipTitle&&!(Jo&&De.side==="bottom")&&za.push(function(){return mt(Le,De)}),u.syncOrAsync(za)}};function rt(Le,De){if(!!Le){var bt=Object.keys(de).reduce(function(xt,Ct){return De.indexOf(Ct)!==-1&&de[Ct].forEach(function(Rt){xt[Rt]=1}),xt},{});Object.keys(Le).forEach(function(xt){bt[xt]||(xt.length===1?Le[xt]=0:delete Le[xt])})}}function st(Le,De){var bt=[],xt,Ct=function(Rt,Lt){var Pt=Rt.xbnd[Lt];Pt!==null&&bt.push(u.extendFlat({},Rt,{x:Pt}))};if(De.length){for(xt=0;xt<De.length;xt++)Ct(De[xt],0);Ct(De[xt-1],1)}return bt}function ft(Le,De){for(var bt=[],xt={},Ct=0;Ct<De.length;Ct++){var Rt=De[Ct];xt[Rt.text2]?xt[Rt.text2].push(Rt.x):xt[Rt.text2]=[Rt.x]}for(var Lt in xt)bt.push(Yt(Le,u.interp(xt[Lt],.5),Lt));return bt}function zt(Le,De){var bt=[],xt,Ct,Rt=De.length&&De[De.length-1].x<De[0].x,Lt=function(nr,Tr){var gr=nr.xbnd[Tr];gr!==null&&bt.push(u.extendFlat({},nr,{x:gr}))};if(Le.showdividers&&De.length){for(xt=0;xt<De.length;xt++){var Pt=De[xt];Pt.text2!==Ct&&Lt(Pt,Rt?1:0),Ct=Pt.text2}Lt(De[xt-1],Rt?0:1)}return bt}function Ue(Le,De){var bt,xt,Ct,Rt;return Le._selections[De].size()?(bt=1/0,xt=-1/0,Ct=1/0,Rt=-1/0,Le._selections[De].each(function(){var Lt=ir(this),Pt=_.bBox(Lt.node().parentNode);bt=Math.min(bt,Pt.top),xt=Math.max(xt,Pt.bottom),Ct=Math.min(Ct,Pt.left),Rt=Math.max(Rt,Pt.right)})):(bt=0,xt=0,Ct=0,Rt=0),{top:bt,bottom:xt,left:Ct,right:Rt,height:xt-bt,width:Rt-Ct}}$.getTickSigns=function(Le,De){var bt=Le._id.charAt(0),xt={x:"top",y:"right"}[bt],Ct=Le.side===xt?1:-1,Rt=[-1,1,Ct,-Ct],Lt=De?(Le.minor||{}).ticks:Le.ticks;return Lt!=="inside"==(bt==="x")&&(Rt=Rt.map(function(Pt){return-Pt})),Le.side&&Rt.push({l:-1,t:-1,r:1,b:1}[Le.side.charAt(0)]),Rt},$.makeTransTickFn=function(Le){return Le._id.charAt(0)==="x"?function(De){return h(Le._offset+Le.l2p(De.x),0)}:function(De){return h(0,Le._offset+Le.l2p(De.x))}},$.makeTransTickLabelFn=function(Le){var De=Oe(Le),bt=De[0],xt=De[1];return Le._id.charAt(0)==="x"?function(Ct){return h(bt+Le._offset+Le.l2p(Ae(Ct)),xt)}:function(Ct){return h(xt,bt+Le._offset+Le.l2p(Ae(Ct)))}};function Ae(Le){return Le.periodX!==void 0?Le.periodX:Le.x}function Oe(Le){var De=Le.ticklabelposition||"",bt=function(Pr){return De.indexOf(Pr)!==-1},xt=bt("top"),Ct=bt("left"),Rt=bt("right"),Lt=bt("bottom"),Pt=bt("inside"),nr=Lt||Ct||xt||Rt;if(!nr&&!Pt)return[0,0];var Tr=Le.side,gr=nr?(Le.tickwidth||0)/2:0,$t=ke,mr=Le.tickfont?Le.tickfont.size:12;return(Lt||xt)&&(gr+=mr*He,$t+=(Le.linewidth||0)/2),(Ct||Rt)&&(gr+=(Le.linewidth||0)/2,$t+=ke),Pt&&Tr==="top"&&($t-=mr*(1-He)),(Ct||xt)&&(gr=-gr),(Tr==="bottom"||Tr==="right")&&($t=-$t),[nr?gr:0,Pt?$t:0]}$.makeTickPath=function(Le,De,bt,xt){xt||(xt={});var Ct=xt.minor;if(Ct&&!Le.minor)return"";var Rt=xt.len!==void 0?xt.len:Ct?Le.minor.ticklen:Le.ticklen,Lt=Le._id.charAt(0),Pt=(Le.linewidth||1)/2;return Lt==="x"?"M0,"+(De+Pt*bt)+"v"+Rt*bt:"M"+(De+Pt*bt)+",0h"+Rt*bt},$.makeLabelFns=function(Le,De,bt){var xt=Le.ticklabelposition||"",Ct=function(Dn){return xt.indexOf(Dn)!==-1},Rt=Ct("top"),Lt=Ct("left"),Pt=Ct("right"),nr=Ct("bottom"),Tr=nr||Lt||Rt||Pt,gr=Ct("inside"),$t=xt==="inside"&&Le.ticks==="inside"||!gr&&Le.ticks==="outside"&&Le.tickson!=="boundaries",mr=0,Pr=0,wr=$t?Le.ticklen:0;if(gr?wr*=-1:Tr&&(wr=0),$t&&(mr+=wr,bt)){var fr=u.deg2rad(bt);mr=wr*Math.cos(fr)+1,Pr=wr*Math.sin(fr)}Le.showticklabels&&($t||Le.showline)&&(mr+=.2*Le.tickfont.size),mr+=(Le.linewidth||1)/2*(gr?-1:1);var Ir={labelStandoff:mr,labelShift:Pr},Vr,_r,Gr,qr,tn=0,Ur=Le.side,Sn=Le._id.charAt(0),wn=Le.tickangle,hn;if(Sn==="x")hn=!gr&&Ur==="bottom"||gr&&Ur==="top",qr=hn?1:-1,gr&&(qr*=-1),Vr=Pr*qr,_r=De+mr*qr,Gr=hn?1:-.2,Math.abs(wn)===90&&(gr?Gr+=xe:wn===-90&&Ur==="bottom"?Gr=He:wn===90&&Ur==="top"?Gr=xe:Gr=.5,tn=xe/2*(wn/90)),Ir.xFn=function(Dn){return Dn.dx+Vr+tn*Dn.fontSize},Ir.yFn=function(Dn){return Dn.dy+_r+Dn.fontSize*Gr},Ir.anchorFn=function(Dn,Yn){if(Tr){if(Lt)return"end";if(Pt)return"start"}return!s(Yn)||Yn===0||Yn===180?"middle":Yn*qr<0!==gr?"end":"start"},Ir.heightFn=function(Dn,Yn,hi){return Yn<-60||Yn>60?-.5*hi:Le.side==="top"!==gr?-hi:0};else if(Sn==="y"){if(hn=!gr&&Ur==="left"||gr&&Ur==="right",qr=hn?1:-1,gr&&(qr*=-1),Vr=mr,_r=Pr*qr,Gr=0,!gr&&Math.abs(wn)===90&&(wn===-90&&Ur==="left"||wn===90&&Ur==="right"?Gr=He:Gr=.5),gr){var bn=s(wn)?+wn:0;if(bn!==0){var mn=u.deg2rad(bn);tn=Math.abs(Math.sin(mn))*He*qr,Gr=0}}Ir.xFn=function(Dn){return Dn.dx+De-(Vr+Dn.fontSize*Gr)*qr+tn*Dn.fontSize},Ir.yFn=function(Dn){return Dn.dy+_r+Dn.fontSize*xe},Ir.anchorFn=function(Dn,Yn){return s(Yn)&&Math.abs(Yn)===90?"middle":hn?"end":"start"},Ir.heightFn=function(Dn,Yn,hi){return Le.side==="right"&&(Yn*=-1),Yn<-30?-hi:Yn<30?-.5*hi:0}}return Ir};function We(Le){return[Le.text,Le.x,Le.axInfo,Le.font,Le.fontSize,Le.fontColor].join("_")}$.drawTicks=function(Le,De,bt){bt=bt||{};var xt=De._id+"tick",Ct=[].concat(De.minor&&De.minor.ticks?bt.vals.filter(function(Lt){return Lt.minor&&!Lt.noTick}):[]).concat(De.ticks?bt.vals.filter(function(Lt){return!Lt.minor&&!Lt.noTick}):[]),Rt=bt.layer.selectAll("path."+xt).data(Ct,We);Rt.exit().remove(),Rt.enter().append("path").classed(xt,1).classed("ticks",1).classed("crisp",bt.crisp!==!1).each(function(Lt){return p.stroke(a.select(this),Lt.minor?De.minor.tickcolor:De.tickcolor)}).style("stroke-width",function(Lt){return _.crispRound(Le,Lt.minor?De.minor.tickwidth:De.tickwidth,1)+"px"}).attr("d",bt.path).style("display",null),$r(De,[X]),Rt.attr("transform",bt.transFn)},$.drawGrid=function(Le,De,bt){bt=bt||{};var xt=De._id+"grid",Ct=De.minor&&De.minor.showgrid,Rt=Ct?bt.vals.filter(function(Vr){return Vr.minor}):[],Lt=De.showgrid?bt.vals.filter(function(Vr){return!Vr.minor}):[],Pt=bt.counterAxis;if(Pt&&$.shouldShowZeroLine(Le,De,Pt))for(var nr=De.tickmode==="array",Tr=0;Tr<Lt.length;Tr++){var gr=Lt[Tr].x;if(nr?!gr:Math.abs(gr)<De.dtick/100)if(Lt=Lt.slice(0,Tr).concat(Lt.slice(Tr+1)),nr)Tr--;else break}De._gw=_.crispRound(Le,De.gridwidth,1);for(var $t=Ct?_.crispRound(Le,De.minor.gridwidth,1):0,mr=bt.layer,Pr=bt.minorLayer,wr=1;wr>=0;wr--){var fr=wr?mr:Pr;if(!!fr){var Ir=fr.selectAll("path."+xt).data(wr?Lt:Rt,We);Ir.exit().remove(),Ir.enter().append("path").classed(xt,1).classed("crisp",bt.crisp!==!1),Ir.attr("transform",bt.transFn).attr("d",bt.path).each(function(Vr){return p.stroke(a.select(this),Vr.minor?De.minor.gridcolor:De.gridcolor||"#ddd")}).style("stroke-dasharray",function(Vr){return _.dashStyle(Vr.minor?De.minor.griddash:De.griddash,Vr.minor?De.minor.gridwidth:De.gridwidth)}).style("stroke-width",function(Vr){return(Vr.minor?$t:De._gw)+"px"}).style("display",null),typeof bt.path=="function"&&Ir.attr("d",bt.path)}}$r(De,[we,ee])},$.drawZeroLine=function(Le,De,bt){bt=bt||bt;var xt=De._id+"zl",Ct=$.shouldShowZeroLine(Le,De,bt.counterAxis),Rt=bt.layer.selectAll("path."+xt).data(Ct?[{x:0,id:De._id}]:[]);Rt.exit().remove(),Rt.enter().append("path").classed(xt,1).classed("zl",1).classed("crisp",bt.crisp!==!1).each(function(){bt.layer.selectAll("path").sort(function(Lt,Pt){return te(Lt.id,Pt.id)})}),Rt.attr("transform",bt.transFn).attr("d",bt.path).call(p.stroke,De.zerolinecolor||p.defaultLine).style("stroke-width",_.crispRound(Le,De.zerolinewidth,De._gw||1)+"px").style("display",null),$r(De,[q])},$.drawLabels=function(Le,De,bt){bt=bt||{};var xt=Le._fullLayout,Ct=De._id,Rt=Ct.charAt(0),Lt=bt.cls||Ct+"tick",Pt=bt.vals.filter(function(qr){return qr.text}),nr=bt.labelFns,Tr=bt.secondary?0:De.tickangle,gr=(De._prevTickAngles||{})[Lt],$t=bt.layer.selectAll("g."+Lt).data(De.showticklabels?Pt:[],We),mr=[];$t.enter().append("g").classed(Lt,1).append("text").attr("text-anchor","middle").each(function(qr){var tn=a.select(this),Ur=Le._promises.length;tn.call(v.positionText,nr.xFn(qr),nr.yFn(qr)).call(_.font,qr.font,qr.fontSize,qr.fontColor).text(qr.text).call(v.convertToTspans,Le),Le._promises[Ur]?mr.push(Le._promises.pop().then(function(){Pr(tn,Tr)})):Pr(tn,Tr)}),$r(De,[re]),$t.exit().remove(),bt.repositionOnUpdate&&$t.each(function(qr){a.select(this).select("text").call(v.positionText,nr.xFn(qr),nr.yFn(qr))});function Pr(qr,tn){qr.each(function(Ur){var Sn=a.select(this),wn=Sn.select(".text-math-group"),hn=nr.anchorFn(Ur,tn),bn=bt.transFn.call(Sn.node(),Ur)+(s(tn)&&+tn!=0?" rotate("+tn+","+nr.xFn(Ur)+","+(nr.yFn(Ur)-Ur.fontSize/2)+")":""),mn=v.lineCount(Sn),Dn=Re*Ur.fontSize,Yn=nr.heightFn(Ur,s(tn)?+tn:0,(mn-1)*Dn);if(Yn&&(bn+=h(0,Yn)),wn.empty()){var hi=Sn.select("text");hi.attr({transform:bn,"text-anchor":hn}),hi.style("opacity",1),De._adjustTickLabelsOverflow&&De._adjustTickLabelsOverflow()}else{var mi=_.bBox(wn.node()).width,Zi=mi*{end:-.5,start:.5}[hn];wn.attr("transform",bn+h(Zi,0))}})}De._adjustTickLabelsOverflow=function(){var qr=De.ticklabeloverflow;if(!(!qr||qr==="allow")){var tn=qr.indexOf("hide")!==-1,Ur=De._id.charAt(0)==="x",Sn=0,wn=Ur?Le._fullLayout.width:Le._fullLayout.height;if(qr.indexOf("domain")!==-1){var hn=u.simpleMap(De.range,De.r2l);Sn=De.l2p(hn[0])+De._offset,wn=De.l2p(hn[1])+De._offset}var bn=Math.min(Sn,wn),mn=Math.max(Sn,wn),Dn=De.side,Yn=1/0,hi=-1/0;$t.each(function(Ai){var vi=a.select(this),Mo=vi.select(".text-math-group");if(Mo.empty()){var sa=_.bBox(vi.node()),Ea=0;Ur?(sa.right>mn||sa.left<bn)&&(Ea=1):(sa.bottom>mn||sa.top+(De.tickangle?0:Ai.fontSize/4)<bn)&&(Ea=1);var Oa=vi.select("text");Ea?tn&&Oa.style("opacity",0):(Oa.style("opacity",1),Dn==="bottom"||Dn==="right"?Yn=Math.min(Yn,Ur?sa.top:sa.left):Yn=-1/0,Dn==="top"||Dn==="left"?hi=Math.max(hi,Ur?sa.bottom:sa.right):hi=1/0)}});for(var mi in xt._plots){var Zi=xt._plots[mi];if(!(De._id!==Zi.xaxis._id&&De._id!==Zi.yaxis._id)){var Bn=Ur?Zi.yaxis:Zi.xaxis;Bn&&(Bn["_visibleLabelMin_"+De._id]=Yn,Bn["_visibleLabelMax_"+De._id]=hi)}}}},De._hideCounterAxisInsideTickLabels=function(qr){var tn=De._id.charAt(0)==="x",Ur=[];for(var Sn in xt._plots){var wn=xt._plots[Sn];De._id!==wn.xaxis._id&&De._id!==wn.yaxis._id||Ur.push(tn?wn.yaxis:wn.xaxis)}Ur.forEach(function(hn,bn){hn&&Xr(hn)&&(qr||[q,ee,we,X,re]).forEach(function(mn){var Dn=mn.K==="tick"&&mn.L==="text"&&De.ticklabelmode==="period",Yn=xt._plots[De._mainSubplot],hi;mn.K===q.K?hi=Yn.zerolinelayer.selectAll("."+De._id+"zl"):mn.K===ee.K?hi=Yn.minorGridlayer.selectAll("."+De._id):mn.K===we.K?hi=Yn.gridlayer.selectAll("."+De._id):hi=Yn[De._id.charAt(0)+"axislayer"],hi.each(function(){var mi=a.select(this);mn.L&&(mi=mi.selectAll(mn.L)),mi.each(function(Zi){var Bn=De.l2p(Dn?Ae(Zi):Zi.x)+De._offset,Ai=a.select(this);Bn<De["_visibleLabelMax_"+hn._id]&&Bn>De["_visibleLabelMin_"+hn._id]?Ai.style("display","none"):mn.K==="tick"&&!bn&&Ai.style("display",null)})})})})},Pr($t,gr+1?gr:Tr);function wr(){return mr.length&&Promise.all(mr)}var fr=null;function Ir(){if(Pr($t,Tr),Pt.length&&Rt==="x"&&!s(Tr)&&(De.type!=="log"||String(De.dtick).charAt(0)!=="D")){fr=0;var qr=0,tn=[],Ur;if($t.each(function(sa){qr=Math.max(qr,sa.fontSize);var Ea=De.l2p(sa.x),Oa=ir(this),Kn=_.bBox(Oa.node());tn.push({top:0,bottom:10,height:10,left:Ea-Kn.width/2,right:Ea+Kn.width/2+2,width:Kn.width+2})}),(De.tickson==="boundaries"||De.showdividers)&&!bt.secondary){var Sn=2;for(De.ticks&&(Sn+=De.tickwidth/2),Ur=0;Ur<tn.length;Ur++){var wn=Pt[Ur].xbnd,hn=tn[Ur];if(wn[0]!==null&&hn.left-De.l2p(wn[0])<Sn||wn[1]!==null&&De.l2p(wn[1])-hn.right<Sn){fr=90;break}}}else{var bn=Pt.length,mn=Math.abs((Pt[bn-1].x-Pt[0].x)*De._m)/(bn-1),Dn=De.ticklabelposition||"",Yn=function(sa){return Dn.indexOf(sa)!==-1},hi=Yn("top"),mi=Yn("left"),Zi=Yn("right"),Bn=Yn("bottom"),Ai=Bn||mi||hi||Zi,vi=Ai?(De.tickwidth||0)+2*ke:0,Mo=mn<qr*2.5||De.type==="multicategory"||De._name==="realaxis";for(Ur=0;Ur<tn.length-1;Ur++)if(u.bBoxIntersect(tn[Ur],tn[Ur+1],vi)){fr=Mo?90:30;break}}fr&&Pr($t,fr)}}De._selections&&(De._selections[Lt]=$t);var Vr=[wr];De.automargin&&xt._redrawFromAutoMarginCount&&gr===90?(fr=90,Vr.push(function(){Pr($t,gr)})):Vr.push(Ir),De._tickAngles&&Vr.push(function(){De._tickAngles[Lt]=fr===null?s(Tr)?Tr:0:fr});var _r=De._anchorAxis;_r&&_r.autorange&&Xr(De)&&!ie(xt,De._id)&&(xt._insideTickLabelsAutorange||(xt._insideTickLabelsAutorange={}),xt._insideTickLabelsAutorange[_r._name+".autorange"]=_r.autorange,Vr.push(function(){$t.each(function(tn,Ur){var Sn=ir(this),wn=Sn.select(".text-math-group");wn.empty()&&(De._vals[Ur].bb=_.bBox(Sn.node()))})}));var Gr=u.syncOrAsync(Vr);return Gr&&Gr.then&&Le._promises.push(Gr),Gr};function Ve(Le,De,bt){var xt=De._id+"divider",Ct=bt.vals,Rt=bt.layer.selectAll("path."+xt).data(Ct,We);Rt.exit().remove(),Rt.enter().insert("path",":first-child").classed(xt,1).classed("crisp",1).call(p.stroke,De.dividercolor).style("stroke-width",_.crispRound(Le,De.dividerwidth,1)+"px"),Rt.attr("transform",bt.transFn).attr("d",bt.path)}$.getPxPosition=function(Le,De){var bt=Le._fullLayout._size,xt=De._id.charAt(0),Ct=De.side,Rt;if(De.anchor!=="free"?Rt=De._anchorAxis:xt==="x"?Rt={_offset:bt.t+(1-(De.position||0))*bt.h,_length:0}:xt==="y"&&(Rt={_offset:bt.l+(De.position||0)*bt.w,_length:0}),Ct==="top"||Ct==="left")return Rt._offset;if(Ct==="bottom"||Ct==="right")return Rt._offset+Rt._length};function lt(Le){var De=Le.title.font.size,bt=(Le.title.text.match(v.BR_TAG_ALL)||[]).length;return Le.title.hasOwnProperty("standoff")?bt?De*(He+bt*Re):De*He:bt?De*(bt+1)*Re:De}function mt(Le,De){var bt=Le._fullLayout,xt=De._id,Ct=xt.charAt(0),Rt=De.title.font.size,Lt;if(De.title.hasOwnProperty("standoff"))Lt=De._depth+De.title.standoff+lt(De);else{var Pt=Xr(De);if(De.type==="multicategory")Lt=De._depth;else{var nr=1.5*Rt;Pt&&(nr=.5*Rt,De.ticks==="outside"&&(nr+=De.ticklen)),Lt=10+nr+(De.linewidth?De.linewidth-1:0)}Pt||(Ct==="x"?Lt+=De.side==="top"?Rt*(De.showticklabels?1:0):Rt*(De.showticklabels?1.5:.5):Lt+=De.side==="right"?Rt*(De.showticklabels?1:.5):Rt*(De.showticklabels?.5:0))}var Tr=$.getPxPosition(Le,De),gr,$t,mr;Ct==="x"?($t=De._offset+De._length/2,mr=De.side==="top"?Tr-Lt:Tr+Lt):(mr=De._offset+De._length/2,$t=De.side==="right"?Tr+Lt:Tr-Lt,gr={rotate:"-90",offset:0});var Pr;if(De.type!=="multicategory"){var wr=De._selections[De._id+"tick"];if(Pr={selection:wr,side:De.side},wr&&wr.node()&&wr.node().parentNode){var fr=_.getTranslate(wr.node().parentNode);Pr.offsetLeft=fr.x,Pr.offsetTop=fr.y}De.title.hasOwnProperty("standoff")&&(Pr.pad=0)}return d.draw(Le,xt+"title",{propContainer:De,propName:De._name+".title.text",placeholder:bt._dfltTitle[Ct],avoid:Pr,transform:gr,attributes:{x:$t,y:mr,"text-anchor":"middle"}})}$.shouldShowZeroLine=function(Le,De,bt){var xt=u.simpleMap(De.range,De.r2l);return xt[0]*xt[1]<=0&&De.zeroline&&(De.type==="linear"||De.type==="-")&&!(De.rangebreaks&&De.maskBreaks(0)===ne)&&(dt(De,0)||!At(Le,De,bt,xt)||Bt(Le,De))},$.clipEnds=function(Le,De){return De.filter(function(bt){return dt(Le,bt.x)})};function dt(Le,De){var bt=Le.l2p(De);return bt>1&&bt<Le._length-1}function At(Le,De,bt,xt){var Ct=bt._mainAxis;if(!Ct)return;var Rt=Le._fullLayout,Lt=De._id.charAt(0),Pt=$.counterLetter(De._id),nr=De._offset+(Math.abs(xt[0])<Math.abs(xt[1])==(Lt==="x")?0:De._length);function Tr(wr){if(!wr.showline||!wr.linewidth)return!1;var fr=Math.max((wr.linewidth+De.zerolinewidth)/2,1);function Ir(Gr){return typeof Gr=="number"&&Math.abs(Gr-nr)<fr}if(Ir(wr._mainLinePosition)||Ir(wr._mainMirrorPosition))return!0;var Vr=wr._linepositions||{};for(var _r in Vr)if(Ir(Vr[_r][0])||Ir(Vr[_r][1]))return!0}var gr=Rt._plots[bt._mainSubplot];if(!(gr.mainplotinfo||gr).overlays.length)return Tr(bt);for(var $t=$.list(Le,Pt),mr=0;mr<$t.length;mr++){var Pr=$t[mr];if(Pr._mainAxis===Ct&&Tr(Pr))return!0}}function Bt(Le,De){for(var bt=Le._fullData,xt=De._mainSubplot,Ct=De._id.charAt(0),Rt=0;Rt<bt.length;Rt++){var Lt=bt[Rt];if(Lt.visible===!0&&Lt.xaxis+Lt.yaxis===xt&&(l.traceIs(Lt,"bar-like")&&Lt.orientation==={x:"h",y:"v"}[Ct]||Lt.fill&&Lt.fill.charAt(Lt.fill.length-1)===Ct))return!0}return!1}function ir(Le){var De=a.select(Le),bt=De.select(".text-math-group");return bt.empty()?De.select("text"):bt}$.allowAutoMargin=function(Le){for(var De=$.list(Le,"",!0),bt=0;bt<De.length;bt++){var xt=De[bt];xt.automargin&&(n.allowAutoMargin(Le,tr(xt)),xt.mirror&&n.allowAutoMargin(Le,vt(xt))),l.getComponentMethod("rangeslider","isVisible")(xt)&&n.allowAutoMargin(Le,pr(xt))}};function tr(Le){return Le._id+".automargin"}function vt(Le){return tr(Le)+".mirror"}function pr(Le){return Le._id+".rangeslider"}$.swap=function(Le,De){for(var bt=Gt(Le,De),xt=0;xt<bt.length;xt++)Rr(Le,bt[xt].x,bt[xt].y)};function Gt(Le,De){var bt=[],xt,Ct;for(xt=0;xt<De.length;xt++){var Rt=[],Lt=Le._fullData[De[xt]].xaxis,Pt=Le._fullData[De[xt]].yaxis;if(!(!Lt||!Pt)){for(Ct=0;Ct<bt.length;Ct++)(bt[Ct].x.indexOf(Lt)!==-1||bt[Ct].y.indexOf(Pt)!==-1)&&Rt.push(Ct);if(!Rt.length){bt.push({x:[Lt],y:[Pt]});continue}var nr=bt[Rt[0]],Tr;if(Rt.length>1)for(Ct=1;Ct<Rt.length;Ct++)Tr=bt[Rt[Ct]],Mr(nr.x,Tr.x),Mr(nr.y,Tr.y);Mr(nr.x,[Lt]),Mr(nr.y,[Pt])}}return bt}function Mr(Le,De){for(var bt=0;bt<De.length;bt++)Le.indexOf(De[bt])===-1&&Le.push(De[bt])}function Rr(Le,De,bt){var xt=[],Ct=[],Rt=Le.layout,Lt,Pt;for(Lt=0;Lt<De.length;Lt++)xt.push($.getFromId(Le,De[Lt]));for(Lt=0;Lt<bt.length;Lt++)Ct.push($.getFromId(Le,bt[Lt]));var nr=Object.keys(b),Tr=["anchor","domain","overlaying","position","side","tickangle","editType"],gr=["linear","log"];for(Lt=0;Lt<nr.length;Lt++){var $t=nr[Lt],mr=xt[0][$t],Pr=Ct[0][$t],wr=!0,fr=!1,Ir=!1;if(!($t.charAt(0)==="_"||typeof mr=="function"||Tr.indexOf($t)!==-1)){for(Pt=1;Pt<xt.length&&wr;Pt++){var Vr=xt[Pt][$t];$t==="type"&&gr.indexOf(mr)!==-1&&gr.indexOf(Vr)!==-1&&mr!==Vr?fr=!0:Vr!==mr&&(wr=!1)}for(Pt=1;Pt<Ct.length&&wr;Pt++){var _r=Ct[Pt][$t];$t==="type"&&gr.indexOf(Pr)!==-1&&gr.indexOf(_r)!==-1&&Pr!==_r?Ir=!0:Ct[Pt][$t]!==Pr&&(wr=!1)}wr&&(fr&&(Rt[xt[0]._name].type="linear"),Ir&&(Rt[Ct[0]._name].type="linear"),Yr(Rt,$t,xt,Ct,Le._fullLayout._dfltTitle))}}for(Lt=0;Lt<Le._fullLayout.annotations.length;Lt++){var Gr=Le._fullLayout.annotations[Lt];De.indexOf(Gr.xref)!==-1&&bt.indexOf(Gr.yref)!==-1&&u.swapAttrs(Rt.annotations[Lt],["?"])}}function Yr(Le,De,bt,xt,Ct){var Rt=u.nestedProperty,Lt=Rt(Le[bt[0]._name],De).get(),Pt=Rt(Le[xt[0]._name],De).get(),nr;for(De==="title"&&(Lt&&Lt.text===Ct.x&&(Lt.text=Ct.y),Pt&&Pt.text===Ct.y&&(Pt.text=Ct.x)),nr=0;nr<bt.length;nr++)Rt(Le,bt[nr]._name+"."+De).set(Pt);for(nr=0;nr<xt.length;nr++)Rt(Le,xt[nr]._name+"."+De).set(Lt)}function Kr(Le){return Le._id==="angularaxis"}function vr(Le,De){for(var bt=De._rangebreaks.length,xt=0;xt<bt;xt++){var Ct=De._rangebreaks[xt];if(Le>=Ct.min&&Le<Ct.max)return Ct.max}return Le}function Xr(Le){return(Le.ticklabelposition||"").indexOf("inside")!==-1}function $r(Le,De){Xr(Le._anchorAxis||{})&&Le._hideCounterAxisInsideTickLabels&&Le._hideCounterAxisInsideTickLabels(De)}},{"../../components/color":103,"../../components/drawing":125,"../../components/titles":212,"../../constants/alignment":219,"../../constants/numerical":224,"../../lib":244,"../../lib/svg_text_utils":267,"../../plots/plots":325,"../../registry":327,"./autorange":290,"./axis_autotype":292,"./axis_ids":295,"./clean_ticks":297,"./layout_attributes":304,"./set_convert":310,"@plotly/d3":11,"fast-isnumeric":17}],292:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib"),n=e("../../constants/numerical").BADNUM,l=s.isArrayOrTypedArray,u=s.isDateTime,h=s.cleanNumber,v=Math.round;i.exports=function(P,D,R){var S=P,I=R.noMultiCategory;if(l(S)&&!S.length)return"-";if(!I&&E(S))return"multicategory";if(I&&Array.isArray(S[0])){for(var T=[],M=0;M<S.length;M++)if(l(S[M]))for(var z=0;z<S[M].length;z++)T.push(S[M][z]);S=T}if(_(S,D))return"date";var U=R.autotypenumbers!=="strict";return x(S,U)?"category":p(S,U)?"linear":"-"};function d(A,P){return P?a(A):typeof A=="number"}function p(A,P){for(var D=A.length,R=0;R<D;R++)if(d(A[R],P))return!0;return!1}function _(A,P){for(var D=A.length,R=b(D),S=0,I=0,T={},M=0;M<D;M+=R){var z=v(M),U=A[z],F=String(U);T[F]||(T[F]=1,u(U,P)&&S++,a(U)&&I++)}return S>I*2}function b(A){return Math.max(1,(A-1)/1e3)}function x(A,P){for(var D=A.length,R=b(D),S=0,I=0,T={},M=0;M<D;M+=R){var z=v(M),U=A[z],F=String(U);if(!T[F]){T[F]=1;var V=typeof U;V==="boolean"?I++:(P?h(U)!==n:V==="number")?S++:V==="string"&&I++}}return I>S*2}function E(A){return l(A[0])&&l(A[1])}},{"../../constants/numerical":224,"../../lib":244,"fast-isnumeric":17}],293:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../registry"),n=e("../../lib"),l=e("../../plot_api/plot_template"),u=e("../array_container_defaults"),h=e("./layout_attributes"),v=e("./tick_value_defaults"),d=e("./tick_mark_defaults"),p=e("./tick_label_defaults"),_=e("./prefix_suffix_defaults"),b=e("./category_order_defaults"),x=e("./line_grid_defaults"),E=e("./set_convert"),A=e("./constants").WEEKDAY_PATTERN,P=e("./constants").HOUR_PATTERN;i.exports=function(T,M,z,U,F){var V=U.letter,j=U.font||{},H=U.splomStash||{},Y=z("visible",!U.visibleDflt),J=M._template||{},ne=M.type||J.type||"-",q;if(ne==="date"){var we=s.getComponentMethod("calendars","handleDefaults");we(T,M,"calendar",U.calendar),U.noTicklabelmode||(q=z("ticklabelmode"))}var ee="";(!U.noTicklabelposition||ne==="multicategory")&&(ee=n.coerce(T,M,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:q==="period"?["outside","inside"]:V==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),U.noTicklabeloverflow||z("ticklabeloverflow",ee.indexOf("inside")!==-1?"hide past domain":ne==="category"||ne==="multicategory"?"allow":"hide past div"),E(M,F);var X=!M.isValidRange(T.range);X&&U.reverseDflt&&(X="reversed");var re=z("autorange",X);re&&(ne==="linear"||ne==="-")&&z("rangemode"),z("range"),M.cleanRange(),b(T,M,z,U),ne!=="category"&&!U.noHover&&z("hoverformat");var de=z("color"),me=de!==h.color.dflt?de:j.color,xe=H.label||F._dfltTitle[V];if(_(T,M,z,ne,U),!Y)return M;z("title.text",xe),n.coerceFont(z,"title.font",{family:j.family,size:n.bigFont(j.size),color:me}),v(T,M,z,ne);var He=U.hasMinor;if(He&&(l.newContainer(M,"minor"),v(T,M,z,ne,{isMinor:!0})),p(T,M,z,ne,U),d(T,M,z,U),He){var Re=U.isMinor;U.isMinor=!0,d(T,M,z,U),U.isMinor=Re}x(T,M,z,{dfltColor:de,bgColor:U.bgColor,showGrid:U.showGrid,hasMinor:He,attributes:h}),He&&!M.minor.ticks&&!M.minor.showgrid&&delete M.minor,(M.showline||M.ticks)&&z("mirror"),U.automargin&&z("automargin");var Ee=ne==="multicategory";if(!U.noTickson&&(ne==="category"||Ee)&&(M.ticks||M.showgrid)){var ke;Ee&&(ke="boundaries");var $=z("tickson",ke);$==="boundaries"&&delete M.ticklabelposition}if(Ee){var le=z("showdividers");le&&(z("dividercolor"),z("dividerwidth"))}if(ne==="date")if(u(T,M,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:D}),!M.rangebreaks.length)delete M.rangebreaks;else{for(var K=0;K<M.rangebreaks.length;K++)if(M.rangebreaks[K].pattern===A){M._hasDayOfWeekBreaks=!0;break}if(E(M,F),F._has("scattergl")||F._has("splom"))for(var te=0;te<U.data.length;te++){var ie=U.data[te];(ie.type==="scattergl"||ie.type==="splom")&&(ie.visible=!1,n.warn(ie.type+" traces do not work on axes with rangebreaks. Setting trace "+ie.index+" to `visible: false`."))}}return M};function D(I,T,M){function z(q,we){return n.coerce(I,T,h.rangebreaks,q,we)}var U=z("enabled");if(U){var F=z("bounds");if(F&&F.length>=2){var V="",j,H;if(F.length===2){for(j=0;j<2;j++)if(H=S(F[j]),H){V=A;break}}var Y=z("pattern",V);if(Y===A)for(j=0;j<2;j++)H=S(F[j]),H&&(T.bounds[j]=F[j]=H-1);if(Y)for(j=0;j<2;j++)switch(H=F[j],Y){case A:if(!a(H)){T.enabled=!1;return}if(H=+H,H!==Math.floor(H)||H<0||H>=7){T.enabled=!1;return}T.bounds[j]=F[j]=H;break;case P:if(!a(H)){T.enabled=!1;return}if(H=+H,H<0||H>24){T.enabled=!1;return}T.bounds[j]=F[j]=H;break}if(M.autorange===!1){var J=M.range;if(J[0]<J[1]){if(F[0]<J[0]&&F[1]>J[1]){T.enabled=!1;return}}else if(F[0]>J[0]&&F[1]<J[1]){T.enabled=!1;return}}}else{var ne=z("values");if(ne&&ne.length)z("dvalue");else{T.enabled=!1;return}}}}var R={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function S(I){if(typeof I=="string")return R[I.substr(0,3).toLowerCase()]}},{"../../lib":244,"../../plot_api/plot_template":280,"../../registry":327,"../array_container_defaults":286,"./category_order_defaults":296,"./constants":298,"./layout_attributes":304,"./line_grid_defaults":306,"./prefix_suffix_defaults":308,"./set_convert":310,"./tick_label_defaults":312,"./tick_mark_defaults":313,"./tick_value_defaults":314,"fast-isnumeric":17}],294:[function(e,i,o){var a=e("../../constants/docs"),s=a.FORMAT_LINK,n=a.DATE_FORMAT_LINK;function l(v,d){return{valType:"string",dflt:"",editType:"none",description:(d?u:h)("hover text",v)+["By default the values are formatted using "+(d?"generic number format":"`"+v+"axis.hoverformat`")+"."].join(" ")}}function u(v,d){return["Sets the "+v+" formatting rule"+(d?"for `"+d+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+s+"."].join(" ")}function h(v,d){return u(v,d)+[" And for dates see: "+n+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}i.exports={axisHoverFormat:l,descriptionOnlyNumbers:u,descriptionWithDates:h}},{"../../constants/docs":221}],295:[function(e,i,o){var a=e("../../registry"),s=e("./constants");o.id2name=function(u){if(!(typeof u!="string"||!u.match(s.AX_ID_PATTERN))){var h=u.split(" ")[0].substr(1);return h==="1"&&(h=""),u.charAt(0)+"axis"+h}},o.name2id=function(u){if(!!u.match(s.AX_NAME_PATTERN)){var h=u.substr(5);return h==="1"&&(h=""),u.charAt(0)+h}},o.cleanId=function(u,h,v){var d=/( domain)$/.test(u);if(!(typeof u!="string"||!u.match(s.AX_ID_PATTERN))&&!(h&&u.charAt(0)!==h)&&!(d&&!v)){var p=u.split(" ")[0].substr(1).replace(/^0+/,"");return p==="1"&&(p=""),u.charAt(0)+p+(d&&v?" domain":"")}},o.list=function(l,u,h){var v=l._fullLayout;if(!v)return[];var d=o.listIds(l,u),p=new Array(d.length),_;for(_=0;_<d.length;_++){var b=d[_];p[_]=v[b.charAt(0)+"axis"+b.substr(1)]}if(!h){var x=v._subplots.gl3d||[];for(_=0;_<x.length;_++){var E=v[x[_]];u?p.push(E[u+"axis"]):p.push(E.xaxis,E.yaxis,E.zaxis)}}return p},o.listIds=function(l,u){var h=l._fullLayout;if(!h)return[];var v=h._subplots;return u?v[u+"axis"]:v.xaxis.concat(v.yaxis)},o.getFromId=function(l,u,h){var v=l._fullLayout;return u=u===void 0||typeof u!="string"?u:u.replace(" domain",""),h==="x"?u=u.replace(/y[0-9]*/,""):h==="y"&&(u=u.replace(/x[0-9]*/,"")),v[o.id2name(u)]},o.getFromTrace=function(l,u,h){var v=l._fullLayout,d=null;if(a.traceIs(u,"gl3d")){var p=u.scene;p.substr(0,5)==="scene"&&(d=v[p][h+"axis"])}else d=o.getFromId(l,u[h+"axis"]||h);return d},o.idSort=function(l,u){var h=l.charAt(0),v=u.charAt(0);return h!==v?h>v?1:-1:+(l.substr(1)||1)-+(u.substr(1)||1)},o.ref2id=function(l){return/^[xyz]/.test(l)?l.split(" ")[0]:!1};function n(l,u){if(u&&u.length){for(var h=0;h<u.length;h++)if(u[h][l])return!0}return!1}o.isLinked=function(l,u){return n(u,l._axisMatchGroups)||n(u,l._axisConstraintGroups)}},{"../../registry":327,"./constants":298}],296:[function(e,i,o){function a(s,n){var l=n.dataAttr||s._id.charAt(0),u={},h,v,d;if(n.axData)h=n.axData;else for(h=[],v=0;v<n.data.length;v++){var p=n.data[v];p[l+"axis"]===s._id&&h.push(p)}for(v=0;v<h.length;v++){var _=h[v][l];for(d=0;d<_.length;d++){var b=_[d];b!=null&&(u[b]=1)}}return Object.keys(u)}i.exports=function(n,l,u,h){if(l.type==="category"){var v=n.categoryarray,d=Array.isArray(v)&&v.length>0,p;d&&(p="array");var _=u("categoryorder",p),b;_==="array"&&(b=u("categoryarray")),!d&&_==="array"&&(_=l.categoryorder="trace"),_==="trace"?l._initialCategories=[]:_==="array"?l._initialCategories=b.slice():(b=a(l,h).sort(),_==="category ascending"?l._initialCategories=b:_==="category descending"&&(l._initialCategories=b.reverse()))}}},{}],297:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib"),n=e("../../constants/numerical"),l=n.ONEDAY,u=n.ONEWEEK;o.dtick=function(h,v){var d=v==="log",p=v==="date",_=v==="category",b=p?l:1;if(!h)return b;if(a(h))return h=Number(h),h<=0?b:_?Math.max(1,Math.round(h)):p?Math.max(.1,h):h;if(typeof h!="string"||!(p||d))return b;var x=h.charAt(0),E=h.substr(1);return E=a(E)?Number(E):0,E<=0||!(p&&x==="M"&&E===Math.round(E)||d&&x==="L"||d&&x==="D"&&(E===1||E===2))?b:h},o.tick0=function(h,v,d,p){if(v==="date")return s.cleanDate(h,s.dateTick0(d,p%u===0?1:0));if(!(p==="D1"||p==="D2"))return a(h)?Number(h):0}},{"../../constants/numerical":224,"../../lib":244,"fast-isnumeric":17}],298:[function(e,i,o){var a=e("../../lib/regex").counter;i.exports={idRegex:{x:a("x","( domain)?"),y:a("y","( domain)?")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":260}],299:[function(e,i,o){var a=e("../../lib"),s=e("./autorange"),n=e("./axis_ids").id2name,l=e("./layout_attributes"),u=e("./scale_zoom"),h=e("./set_convert"),v=e("../../constants/numerical").ALMOST_EQUAL,d=e("../../constants/alignment").FROM_BL;o.handleDefaults=function(D,R,S){var I=S.axIds,T=S.axHasImage,M=R._axisConstraintGroups=[],z=R._axisMatchGroups=[],U,F,V,j,H,Y,J,ne;for(U=0;U<I.length;U++)j=n(I[U]),H=D[j],Y=R[j],p(H,Y,{axIds:I,layoutOut:R,hasImage:T[j]});function q(Re,Ee){for(U=0;U<Re.length;U++){F=Re[U];for(V in F)R[n(V)][Ee]=F}}for(q(z,"_matchGroup"),U=0;U<M.length;U++){F=M[U];for(V in F)if(Y=R[n(V)],Y.fixedrange){for(var we in F){var ee=n(we);(D[ee]||{}).fixedrange===!1&&a.warn("fixedrange was specified as false for axis "+ee+" but was overridden because another axis in its constraint group has fixedrange true"),R[ee].fixedrange=!0}break}}for(U=0;U<M.length;){F=M[U];for(V in F){Y=R[n(V)],Y._matchGroup&&Object.keys(Y._matchGroup).length===Object.keys(F).length&&(M.splice(U,1),U--);break}U++}q(M,"_constraintGroup");var X=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],re=!1,de=!1;function me(){ne=Y[J],J==="rangebreaks"&&(de=Y._hasDayOfWeekBreaks)}for(U=0;U<z.length;U++){F=z[U];for(var xe=0;xe<X.length;xe++){J=X[xe],ne=null;var He;for(V in F)if(j=n(V),H=D[j],Y=R[j],J in Y){if(!Y.matches&&(He=Y,J in H)){me();break}ne===null&&J in H&&me()}if(J==="range"&&ne&&(re=!0),J==="autorange"&&ne===null&&re&&(ne=!1),ne===null&&J in He&&(ne=He[J]),ne!==null)for(V in F)Y=R[n(V)],Y[J]=J==="range"?ne.slice():ne,J==="rangebreaks"&&(Y._hasDayOfWeekBreaks=de,h(Y,R))}}};function p(D,R,S){var I=S.axIds,T=S.layoutOut,M=S.hasImage,z=T._axisConstraintGroups,U=T._axisMatchGroups,F=R._id,V=F.charAt(0),j=((T._splomAxes||{})[V]||{})[F]||{},H=R._id,Y=H.charAt(0)==="x";R._matchGroup=null,R._constraintGroup=null;function J(le,K){return a.coerce(D,R,l,le,K)}J("constrain",M?"domain":"range"),a.coerce(D,R,{constraintoward:{valType:"enumerated",values:Y?["left","center","right"]:["bottom","middle","top"],dflt:Y?"center":"middle"}},"constraintoward");var ne=R.type,q,we,ee=[];for(q=0;q<I.length;q++)if(we=I[q],we!==H){var X=T[n(we)];X.type===ne&&ee.push(we)}var re=b(z,H);if(re){var de=[];for(q=0;q<ee.length;q++)we=ee[q],re[we]||de.push(we);ee=de}var me=ee.length,xe,He;me&&(D.matches||j.matches)&&(xe=a.coerce(D,R,{matches:{valType:"enumerated",values:ee,dflt:ee.indexOf(j.matches)!==-1?j.matches:void 0}},"matches"));var Re=M&&!Y?R.anchor:void 0;if(me&&!xe&&(D.scaleanchor||Re)&&(He=a.coerce(D,R,{scaleanchor:{valType:"enumerated",values:ee}},"scaleanchor",Re)),xe){R._matchGroup=x(U,H,xe,1);var Ee=T[n(xe)],ke=_(T,R)/_(T,Ee);Y!==(xe.charAt(0)==="x")&&(ke=(Y?"x":"y")+ke),x(z,H,xe,ke)}else D.matches&&I.indexOf(D.matches)!==-1&&a.warn("ignored "+R._name+'.matches: "'+D.matches+'" to avoid an infinite loop');if(He){var $=J("scaleratio");$||($=R.scaleratio=1),x(z,H,He,$)}else D.scaleanchor&&I.indexOf(D.scaleanchor)!==-1&&a.warn("ignored "+R._name+'.scaleanchor: "'+D.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function _(D,R){var S=R.domain;return S||(S=D[n(R.overlaying)].domain),S[1]-S[0]}function b(D,R){for(var S=0;S<D.length;S++)if(D[S][R])return D[S];return null}function x(D,R,S,I){var T,M,z,U,F,V=b(D,R);V===null?(V={},V[R]=1,F=D.length,D.push(V)):F=D.indexOf(V);var j=Object.keys(V);for(T=0;T<D.length;T++)if(z=D[T],T!==F&&z[S]){var H=z[S];for(M=0;M<j.length;M++)U=j[M],z[U]=E(H,E(I,V[U]));D.splice(F,1);return}if(I!==1)for(M=0;M<j.length;M++){var Y=j[M];V[Y]=E(I,V[Y])}V[S]=1}function E(D,R){var S="",I="",T,M;typeof D=="string"&&(S=D.match(/^[xy]*/)[0],T=S.length,D=+D.substr(T)),typeof R=="string"&&(I=R.match(/^[xy]*/)[0],M=I.length,R=+R.substr(M));var z=D*R;return!T&&!M?z:!T||!M||S.charAt(0)===I.charAt(0)?S+I+D*R:T===M?z:(T>M?S.substr(M):I.substr(T))+z}function A(D,R){for(var S=R._size,I=S.h/S.w,T={},M=Object.keys(D),z=0;z<M.length;z++){var U=M[z],F=D[U];if(typeof F=="string"){var V=F.match(/^[xy]*/)[0],j=V.length;F=+F.substr(j);for(var H=V.charAt(0)==="y"?I:1/I,Y=0;Y<j;Y++)F*=H}T[U]=F}return T}o.enforce=function(R){var S=R._fullLayout,I=S._axisConstraintGroups||[],T,M,z,U,F,V,j,H;for(T=0;T<I.length;T++){z=A(I[T],S);var Y=Object.keys(z),J=1/0,ne=0,q=1/0,we={},ee={},X=!1;for(M=0;M<Y.length;M++)U=Y[M],ee[U]=F=S[n(U)],F._inputDomain?F.domain=F._inputDomain.slice():F._inputDomain=F.domain.slice(),F._inputRange||(F._inputRange=F.range.slice()),F.setScale(),we[U]=V=Math.abs(F._m)/z[U],J=Math.min(J,V),(F.constrain==="domain"||!F._constraintShrinkable)&&(q=Math.min(q,V)),delete F._constraintShrinkable,ne=Math.max(ne,V),F.constrain==="domain"&&(X=!0);if(!(J>v*ne&&!X)){for(M=0;M<Y.length;M++)if(U=Y[M],V=we[U],F=ee[U],j=F.constrain,V!==q||j==="domain")if(H=V/q,j==="range")u(F,H);else{var re=F._inputDomain,de=(F.domain[1]-F.domain[0])/(re[1]-re[0]),me=(F.r2l(F.range[1])-F.r2l(F.range[0]))/(F.r2l(F._inputRange[1])-F.r2l(F._inputRange[0]));if(H/=de,H*me<1){F.domain=F._input.domain=re.slice(),u(F,H);continue}if(me<1&&(F.range=F._input.range=F._inputRange.slice(),H*=me),F.autorange){var xe=F.r2l(F.range[0]),He=F.r2l(F.range[1]),Re=(xe+He)/2,Ee=Re,ke=Re,$=Math.abs(He-Re),le=Re-$*H*1.0001,K=Re+$*H*1.0001,te=s.makePadFn(S,F,0),ie=s.makePadFn(S,F,1);P(F,H);var ce=Math.abs(F._m),ae=s.concatExtremes(R,F),ve=ae.min,pe=ae.max,he,ye;for(ye=0;ye<ve.length;ye++)he=ve[ye].val-te(ve[ye])/ce,he>le&&he<Ee&&(Ee=he);for(ye=0;ye<pe.length;ye++)he=pe[ye].val+ie(pe[ye])/ce,he<K&&he>ke&&(ke=he);var _e=(ke-Ee)/(2*$);H/=_e,Ee=F.l2r(Ee),ke=F.l2r(ke),F.range=F._input.range=xe<He?[Ee,ke]:[ke,Ee]}P(F,H)}}}},o.getAxisGroup=function(R,S){for(var I=R._axisMatchGroups,T=0;T<I.length;T++){var M=I[T];if(M[S])return"g"+T}return S},o.clean=function(R,S){if(S._inputDomain){for(var I=!1,T=S._id,M=R._fullLayout._axisConstraintGroups,z=0;z<M.length;z++)if(M[z][T]){I=!0;break}(!I||S.constrain!=="domain")&&(S._input.domain=S.domain=S._inputDomain,delete S._inputDomain)}};function P(D,R){var S=D._inputDomain,I=d[D.constraintoward],T=S[0]+(S[1]-S[0])*I;D.domain=D._input.domain=[T+(S[0]-T)/R,T+(S[1]-T)/R],D.setScale()}},{"../../constants/alignment":219,"../../constants/numerical":224,"../../lib":244,"./autorange":290,"./axis_ids":295,"./layout_attributes":304,"./scale_zoom":309,"./set_convert":310}],300:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../lib"),n=s.numberFormat,l=e("tinycolor2"),u=e("has-passive-events"),h=e("../../registry"),v=s.strTranslate,d=e("../../lib/svg_text_utils"),p=e("../../components/color"),_=e("../../components/drawing"),b=e("../../components/fx"),x=e("./axes"),E=e("../../lib/setcursor"),A=e("../../components/dragelement"),P=e("../../components/dragelement/helpers"),D=P.selectingOrDrawing,R=P.freeMode,S=e("../../constants/alignment").FROM_TL,I=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,M=e("../plots"),z=e("./axis_ids").getFromId,U=e("../../components/selections").prepSelect,F=e("../../components/selections").clearOutline,V=e("../../components/selections").selectOnClick,j=e("./scale_zoom"),H=e("./constants"),Y=H.MINDRAG,J=H.MINZOOM,ne=!0;function q(he,ye,_e,je,Je,nt,at,Fe){var Ie=he._fullLayout._zoomlayer,Ke=at+Fe==="nsew",Qe=(at+Fe).length===1,it,Ne,ht,Tt,Xt,Nt,Mt,Vt,Yt,cr,Nr,er,Wt,dr,zr,Dr,$e,pt,kt,Me,rt,st,ft;function zt(){if(it=ye.xaxis,Ne=ye.yaxis,Yt=it._length,cr=Ne._length,Mt=it._offset,Vt=Ne._offset,ht={},ht[it._id]=it,Tt={},Tt[Ne._id]=Ne,at&&Fe)for(var $t=ye.overlays,mr=0;mr<$t.length;mr++){var Pr=$t[mr].xaxis;ht[Pr._id]=Pr;var wr=$t[mr].yaxis;Tt[wr._id]=wr}Xt=pe(ht),Nt=pe(Tt),Wt=X(Xt,Fe),dr=X(Nt,at),zr=!dr&&!Wt,er=ae(he,he._fullLayout._axisMatchGroups,ht,Tt),Nr=ae(he,he._fullLayout._axisConstraintGroups,ht,Tt,er);var fr=Nr.isSubplotConstrained||er.isSubplotConstrained;Dr=Fe||fr,$e=at||fr;var Ir=he._fullLayout;pt=Ir._has("scattergl"),kt=Ir._has("splom"),Me=Ir._has("svg")}zt();var Ue=He(dr+Wt,he._fullLayout.dragmode,Ke),Ae=ee(ye,at+Fe+"drag",Ue,_e,je,Je,nt);if(zr&&!Ke)return Ae.onmousedown=null,Ae.style.pointerEvents="none",Ae;var Oe={element:Ae,gd:he,plotinfo:ye};Oe.prepFn=function($t,mr,Pr){var wr=Oe.dragmode,fr=he._fullLayout.dragmode;fr!==wr&&(Oe.dragmode=fr),zt(),st=he._fullLayout._invScaleX,ft=he._fullLayout._invScaleY,zr||(Ke?$t.shiftKey?fr==="pan"?fr="zoom":D(fr)||(fr="pan"):$t.ctrlKey&&(fr="pan"):fr="pan"),R(fr)?Oe.minDrag=1:Oe.minDrag=void 0,D(fr)?(Oe.xaxes=Xt,Oe.yaxes=Nt,U($t,mr,Pr,Oe,fr)):(Oe.clickFn=Ve,D(wr)&&We(),zr||(fr==="zoom"?(Oe.moveFn=Rr,Oe.doneFn=Kr,Oe.minDrag=1,Mr($t,mr,Pr)):fr==="pan"&&(Oe.moveFn=bt,Oe.doneFn=Lt))),he._fullLayout._redrag=function(){var Ir=he._dragdata;if(Ir&&Ir.element===Ae){var Vr=he._fullLayout.dragmode;D(Vr)||(zt(),Pt([0,0,Yt,cr]),Oe.moveFn(Ir.dx,Ir.dy))}}};function We(){Oe.plotinfo.selection=!1,F(he)}function Ve($t,mr){var Pr=Oe.gd;if(Pr._fullLayout._activeShapeIndex>=0){Pr._fullLayout._deactivateShape(Pr);return}var wr=Pr._fullLayout.clickmode;if(le(Pr),$t===2&&!Qe&&Rt(),Ke)wr.indexOf("select")>-1&&V(mr,Pr,Xt,Nt,ye.id,Oe),wr.indexOf("event")>-1&&b.click(Pr,mr,ye.id);else if($t===1&&Qe){var fr=at?Ne:it,Ir=at==="s"||Fe==="w"?0:1,Vr=fr._name+".range["+Ir+"]",_r=re(fr,Ir),Gr="left",qr="middle";if(fr.fixedrange)return;at?(qr=at==="n"?"top":"bottom",fr.side==="right"&&(Gr="right")):Fe==="e"&&(Gr="right"),Pr._context.showAxisRangeEntryBoxes&&a.select(Ae).call(d.makeEditable,{gd:Pr,immediate:!0,background:Pr._fullLayout.paper_bgcolor,text:String(_r),fill:fr.tickfont?fr.tickfont.color:"#444",horizontalAlign:Gr,verticalAlign:qr}).on("edit",function(tn){var Ur=fr.d2r(tn);Ur!==void 0&&h.call("_guiRelayout",Pr,Vr,Ur)})}}A.init(Oe);var lt,mt,dt,At,Bt,ir,tr,vt,pr,Gt;function Mr($t,mr,Pr){var wr=Ae.getBoundingClientRect();lt=mr-wr.left,mt=Pr-wr.top,he._fullLayout._calcInverseTransform(he);var fr=s.apply3DTransform(he._fullLayout._invTransform)(lt,mt);lt=fr[0],mt=fr[1],dt={l:lt,r:lt,w:0,t:mt,b:mt,h:0},At=he._hmpixcount?he._hmlumcount/he._hmpixcount:l(he._fullLayout.plot_bgcolor).getLuminance(),Bt="M0,0H"+Yt+"V"+cr+"H0V0",ir=!1,tr="xy",Gt=!1,vt=Re(Ie,At,Mt,Vt,Bt),pr=Ee(Ie,Mt,Vt)}function Rr($t,mr){if(he._transitioningWithDuration)return!1;var Pr=Math.max(0,Math.min(Yt,st*$t+lt)),wr=Math.max(0,Math.min(cr,ft*mr+mt)),fr=Math.abs(Pr-lt),Ir=Math.abs(wr-mt);dt.l=Math.min(lt,Pr),dt.r=Math.max(lt,Pr),dt.t=Math.min(mt,wr),dt.b=Math.max(mt,wr);function Vr(){tr="",dt.r=dt.l,dt.t=dt.b,pr.attr("d","M0,0Z")}if(Nr.isSubplotConstrained)fr>J||Ir>J?(tr="xy",fr/Yt>Ir/cr?(Ir=fr*cr/Yt,mt>wr?dt.t=mt-Ir:dt.b=mt+Ir):(fr=Ir*Yt/cr,lt>Pr?dt.l=lt-fr:dt.r=lt+fr),pr.attr("d",ce(dt))):Vr();else if(er.isSubplotConstrained)if(fr>J||Ir>J){tr="xy";var _r=Math.min(dt.l/Yt,(cr-dt.b)/cr),Gr=Math.max(dt.r/Yt,(cr-dt.t)/cr);dt.l=_r*Yt,dt.r=Gr*Yt,dt.b=(1-_r)*cr,dt.t=(1-Gr)*cr,pr.attr("d",ce(dt))}else Vr();else!dr||Ir<Math.min(Math.max(fr*.6,Y),J)?fr<Y||!Wt?Vr():(dt.t=0,dt.b=cr,tr="x",pr.attr("d",te(dt,mt))):!Wt||fr<Math.min(Ir*.6,J)?(dt.l=0,dt.r=Yt,tr="y",pr.attr("d",ie(dt,lt))):(tr="xy",pr.attr("d",ce(dt)));dt.w=dt.r-dt.l,dt.h=dt.b-dt.t,tr&&(Gt=!0),he._dragged=Gt,ke(vt,pr,dt,Bt,ir,At),Yr(),he.emit("plotly_relayouting",rt),ir=!0}function Yr(){rt={},(tr==="xy"||tr==="x")&&(de(Xt,dt.l/Yt,dt.r/Yt,rt,Nr.xaxes),xt("x",rt)),(tr==="xy"||tr==="y")&&(de(Nt,(cr-dt.b)/cr,(cr-dt.t)/cr,rt,Nr.yaxes),xt("y",rt))}function Kr(){Yr(),le(he),Lt(),K(he)}var vr=[0,0,Yt,cr],Xr=null,$r=H.REDRAWDELAY,Le=ye.mainplot?he._fullLayout._plots[ye.mainplot]:ye;function De($t){if(!he._context._scrollZoom.cartesian&&!he._fullLayout._enablescrollzoom)return;if(We(),he._transitioningWithDuration){$t.preventDefault(),$t.stopPropagation();return}zt(),clearTimeout(Xr);var mr=-$t.deltaY;if(isFinite(mr)||(mr=$t.wheelDelta/10),!isFinite(mr)){s.log("Did not find wheel motion attributes: ",$t);return}var Pr=Math.exp(-Math.min(Math.max(mr,-20),20)/200),wr=Le.draglayer.select(".nsewdrag").node().getBoundingClientRect(),fr=($t.clientX-wr.left)/wr.width,Ir=(wr.bottom-$t.clientY)/wr.height,Vr;function _r(Gr,qr,tn){if(Gr.fixedrange)return;var Ur=s.simpleMap(Gr.range,Gr.r2l),Sn=Ur[0]+(Ur[1]-Ur[0])*qr;function wn(hn){return Gr.l2r(Sn+(hn-Sn)*tn)}Gr.range=Ur.map(wn)}if(Dr){for(Fe||(fr=.5),Vr=0;Vr<Xt.length;Vr++)_r(Xt[Vr],fr,Pr);xt("x"),vr[2]*=Pr,vr[0]+=vr[2]*fr*(1/Pr-1)}if($e){for(at||(Ir=.5),Vr=0;Vr<Nt.length;Vr++)_r(Nt[Vr],Ir,Pr);xt("y"),vr[3]*=Pr,vr[1]+=vr[3]*(1-Ir)*(1/Pr-1)}Pt(vr),Ct(),he.emit("plotly_relayouting",rt),Xr=setTimeout(function(){!he._fullLayout||(vr=[0,0,Yt,cr],Lt())},$r),$t.preventDefault()}at.length*Fe.length!==1&&ve(Ae,De);function bt($t,mr){if($t=$t*st,mr=mr*ft,he._transitioningWithDuration)return;if(he._fullLayout._replotting=!0,Wt==="ew"||dr==="ns"){var Pr=Wt?-$t:0,wr=dr?-mr:0;if(er.isSubplotConstrained){if(Wt&&dr){var fr=($t/Yt-mr/cr)/2;$t=fr*Yt,mr=-fr*cr,Pr=-$t,wr=-mr}dr?Pr=-wr*Yt/cr:wr=-Pr*cr/Yt}Wt&&(me(Xt,$t),xt("x")),dr&&(me(Nt,mr),xt("y")),Pt([Pr,wr,Yt,cr]),Ct(),he.emit("plotly_relayouting",rt);return}function Ir(wn,hn,bn){for(var mn=1-hn,Dn,Yn,hi=0;hi<wn.length;hi++){var mi=wn[hi];if(!mi.fixedrange){Dn=mi,Yn=mi._rl[mn]+(mi._rl[hn]-mi._rl[mn])/xe(bn/mi._length);var Zi=mi.l2r(Yn);Zi!==!1&&Zi!==void 0&&(mi.range[hn]=Zi)}}return Dn._length*(Dn._rl[hn]-Yn)/(Dn._rl[hn]-Dn._rl[mn])}var Vr=Wt==="w"==(dr==="n")?1:-1;if(Wt&&dr&&(Nr.isSubplotConstrained||er.isSubplotConstrained)){var _r=($t/Yt+Vr*mr/cr)/2;$t=_r*Yt,mr=Vr*_r*cr}var Gr,qr;if(Wt==="w"?$t=Ir(Xt,0,$t):Wt==="e"?$t=Ir(Xt,1,-$t):Wt||($t=0),dr==="n"?mr=Ir(Nt,1,mr):dr==="s"?mr=Ir(Nt,0,-mr):dr||(mr=0),Gr=Wt==="w"?$t:0,qr=dr==="n"?mr:0,Nr.isSubplotConstrained&&!er.isSubplotConstrained||er.isSubplotConstrained&&Wt&&dr&&Vr>0){var tn;if(er.isSubplotConstrained||!Wt&&dr.length===1){for(tn=0;tn<Xt.length;tn++)Xt[tn].range=Xt[tn]._r.slice(),j(Xt[tn],1-mr/cr);$t=mr*Yt/cr,Gr=$t/2}if(er.isSubplotConstrained||!dr&&Wt.length===1){for(tn=0;tn<Nt.length;tn++)Nt[tn].range=Nt[tn]._r.slice(),j(Nt[tn],1-$t/Yt);mr=$t*cr/Yt,qr=mr/2}}(!er.isSubplotConstrained||!dr)&&xt("x"),(!er.isSubplotConstrained||!Wt)&&xt("y");var Ur=Yt-$t,Sn=cr-mr;er.isSubplotConstrained&&!(Wt&&dr)&&(Wt?(qr=Gr?0:$t*cr/Yt,Sn=Ur*cr/Yt):(Gr=qr?0:mr*Yt/cr,Ur=Sn*Yt/cr)),Pt([Gr,qr,Ur,Sn]),Ct(),he.emit("plotly_relayouting",rt)}function xt($t,mr){for(var Pr=er.isSubplotConstrained?{x:Nt,y:Xt}[$t]:er[$t+"axes"],wr=er.isSubplotConstrained?{x:Xt,y:Nt}[$t]:[],fr=0;fr<Pr.length;fr++){var Ir=Pr[fr],Vr=Ir._id,_r=er.xLinks[Vr]||er.yLinks[Vr],Gr=wr[0]||ht[_r]||Tt[_r];Gr&&(mr?(mr[Ir._name+".range[0]"]=mr[Gr._name+".range[0]"],mr[Ir._name+".range[1]"]=mr[Gr._name+".range[1]"]):Ir.range=Gr.range.slice())}}function Ct(){var $t=[],mr;function Pr(Ir){for(mr=0;mr<Ir.length;mr++)Ir[mr].fixedrange||$t.push(Ir[mr]._id)}for(Dr&&(Pr(Xt),Pr(Nr.xaxes),Pr(er.xaxes)),$e&&(Pr(Nt),Pr(Nr.yaxes),Pr(er.yaxes)),rt={},mr=0;mr<$t.length;mr++){var wr=$t[mr],fr=z(he,wr);x.drawOne(he,fr,{skipTitle:!0}),rt[fr._name+".range[0]"]=fr.range[0],rt[fr._name+".range[1]"]=fr.range[1]}x.redrawComponents(he,$t)}function Rt(){if(!he._transitioningWithDuration){var $t=he._context.doubleClick,mr=[];Wt&&(mr=mr.concat(Xt)),dr&&(mr=mr.concat(Nt)),er.xaxes&&(mr=mr.concat(er.xaxes)),er.yaxes&&(mr=mr.concat(er.yaxes));var Pr={},wr,fr,Ir;if($t==="reset+autosize"){for($t="autosize",fr=0;fr<mr.length;fr++)if(wr=mr[fr],wr._rangeInitial&&(wr.range[0]!==wr._rangeInitial[0]||wr.range[1]!==wr._rangeInitial[1])||!wr._rangeInitial&&!wr.autorange){$t="reset";break}}if($t==="autosize")for(fr=0;fr<mr.length;fr++)wr=mr[fr],wr.fixedrange||(Pr[wr._name+".autorange"]=!0);else if($t==="reset")for((Wt||Nr.isSubplotConstrained)&&(mr=mr.concat(Nr.xaxes)),dr&&!Nr.isSubplotConstrained&&(mr=mr.concat(Nr.yaxes)),Nr.isSubplotConstrained&&(Wt?dr||(mr=mr.concat(Nt)):mr=mr.concat(Xt)),fr=0;fr<mr.length;fr++)wr=mr[fr],wr.fixedrange||(wr._rangeInitial?(Ir=wr._rangeInitial,Pr[wr._name+".range[0]"]=Ir[0],Pr[wr._name+".range[1]"]=Ir[1]):Pr[wr._name+".autorange"]=!0);he.emit("plotly_doubleclick",null),h.call("_guiRelayout",he,Pr)}}function Lt(){Pt([0,0,Yt,cr]),s.syncOrAsync([M.previousPromises,function(){he._fullLayout._replotting=!1,h.call("_guiRelayout",he,rt)}],he)}function Pt($t){var mr=he._fullLayout,Pr=mr._plots,wr=mr._subplots.cartesian,fr,Ir,Vr,_r;if(kt&&h.subplotsRegistry.splom.drag(he),pt){for(fr=0;fr<wr.length;fr++)if(Ir=Pr[wr[fr]],Vr=Ir.xaxis,_r=Ir.yaxis,Ir._scene){var Gr=s.simpleMap(Vr.range,Vr.r2l),qr=s.simpleMap(_r.range,_r.r2l);Ir._scene.update({range:[Gr[0],qr[0],Gr[1],qr[1]]})}}if((kt||pt)&&(I(he),T(he)),Me){var tn=$t[2]/it._length,Ur=$t[3]/Ne._length;for(fr=0;fr<wr.length;fr++){Ir=Pr[wr[fr]],Vr=Ir.xaxis,_r=Ir.yaxis;var Sn=(Dr||er.isSubplotConstrained)&&!Vr.fixedrange&&ht[Vr._id],wn=($e||er.isSubplotConstrained)&&!_r.fixedrange&&Tt[_r._id],hn,bn,mn,Dn;if(Sn?(hn=tn,mn=Fe||er.isSubplotConstrained?$t[0]:gr(Vr,hn)):er.xaHash[Vr._id]?(hn=tn,mn=$t[0]*Vr._length/it._length):er.yaHash[Vr._id]?(hn=Ur,mn=dr==="ns"?-$t[1]*Vr._length/Ne._length:gr(Vr,hn,{n:"top",s:"bottom"}[dr])):(hn=nr(Vr,tn,Ur),mn=Tr(Vr,hn)),wn?(bn=Ur,Dn=at||er.isSubplotConstrained?$t[1]:gr(_r,bn)):er.yaHash[_r._id]?(bn=Ur,Dn=$t[1]*_r._length/Ne._length):er.xaHash[_r._id]?(bn=tn,Dn=Wt==="ew"?-$t[0]*_r._length/it._length:gr(_r,bn,{e:"right",w:"left"}[Wt])):(bn=nr(_r,tn,Ur),Dn=Tr(_r,bn)),!(!hn&&!bn)){hn||(hn=1),bn||(bn=1);var Yn=Vr._offset-mn/hn,hi=_r._offset-Dn/bn;Ir.clipRect.call(_.setTranslate,mn,Dn).call(_.setScale,hn,bn),Ir.plot.call(_.setTranslate,Yn,hi).call(_.setScale,1/hn,1/bn),(hn!==Ir.xScaleFactor||bn!==Ir.yScaleFactor)&&(_.setPointGroupScale(Ir.zoomScalePts,hn,bn),_.setTextPointsScale(Ir.zoomScaleTxt,hn,bn)),_.hideOutsideRangePoints(Ir.clipOnAxisFalseTraces,Ir),Ir.xScaleFactor=hn,Ir.yScaleFactor=bn}}}}function nr($t,mr,Pr){return $t.fixedrange?0:Dr&&Nr.xaHash[$t._id]?mr:$e&&(Nr.isSubplotConstrained?Nr.xaHash:Nr.yaHash)[$t._id]?Pr:0}function Tr($t,mr){return mr?($t.range=$t._r.slice(),j($t,mr),gr($t,mr)):0}function gr($t,mr,Pr){return $t._length*(1-mr)*S[Pr||$t.constraintoward||"middle"]}return Ae}function we(he,ye,_e,je){var Je=s.ensureSingle(he.draglayer,ye,_e,function(nt){nt.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",he.id)});return Je.call(E,je),Je.node()}function ee(he,ye,_e,je,Je,nt,at){var Fe=we(he,"rect",ye,_e);return a.select(Fe).call(_.setRect,je,Je,nt,at),Fe}function X(he,ye){for(var _e=0;_e<he.length;_e++)if(!he[_e].fixedrange)return ye;return""}function re(he,ye){var _e=he.range[ye],je=Math.abs(_e-he.range[1-ye]),Je;return he.type==="date"?_e:he.type==="log"?(Je=Math.ceil(Math.max(0,-Math.log(je)/Math.LN10))+3,n("."+Je+"g")(Math.pow(10,_e))):(Je=Math.floor(Math.log(Math.abs(_e))/Math.LN10)-Math.floor(Math.log(je)/Math.LN10)+4,n("."+String(Je)+"g")(_e))}function de(he,ye,_e,je,Je){for(var nt=0;nt<he.length;nt++){var at=he[nt];if(!at.fixedrange)if(at.rangebreaks){var Fe=at._id.charAt(0)==="y",Ie=Fe?1-ye:ye,Ke=Fe?1-_e:_e;je[at._name+".range[0]"]=at.l2r(at.p2l(Ie*at._length)),je[at._name+".range[1]"]=at.l2r(at.p2l(Ke*at._length))}else{var Qe=at._rl[0],it=at._rl[1]-Qe;je[at._name+".range[0]"]=at.l2r(Qe+it*ye),je[at._name+".range[1]"]=at.l2r(Qe+it*_e)}}if(Je&&Je.length){var Ne=(ye+(1-_e))/2;de(Je,Ne,1-Ne,je,[])}}function me(he,ye){for(var _e=0;_e<he.length;_e++){var je=he[_e];if(!je.fixedrange)if(je.rangebreaks){var Je=0,nt=je._length,at=je.p2l(Je+ye)-je.p2l(Je),Fe=je.p2l(nt+ye)-je.p2l(nt),Ie=(at+Fe)/2;je.range=[je.l2r(je._rl[0]-Ie),je.l2r(je._rl[1]-Ie)]}else je.range=[je.l2r(je._rl[0]-ye/je._m),je.l2r(je._rl[1]-ye/je._m)]}}function xe(he){return 1-(he>=0?Math.min(he,.9):1/(1/Math.max(he,-.3)+3.222))}function He(he,ye,_e){return he?he==="nsew"?_e?"":ye==="pan"?"move":"crosshair":he.toLowerCase()+"-resize":"pointer"}function Re(he,ye,_e,je,Je){return he.append("path").attr("class","zoombox").style({fill:ye>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",v(_e,je)).attr("d",Je+"Z")}function Ee(he,ye,_e){return he.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("transform",v(ye,_e)).attr("d","M0,0Z")}function ke(he,ye,_e,je,Je,nt){he.attr("d",je+"M"+_e.l+","+_e.t+"v"+_e.h+"h"+_e.w+"v-"+_e.h+"h-"+_e.w+"Z"),$(he,ye,Je,nt)}function $(he,ye,_e,je){_e||(he.transition().style("fill",je>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ye.transition().style("opacity",1).duration(200))}function le(he){a.select(he).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function K(he){ne&&he.data&&he._context.showTips&&(s.notifier(s._(he,"Double-click to zoom back out"),"long"),ne=!1)}function te(he,ye){return"M"+(he.l-.5)+","+(ye-J-.5)+"h-3v"+(2*J+1)+"h3ZM"+(he.r+.5)+","+(ye-J-.5)+"h3v"+(2*J+1)+"h-3Z"}function ie(he,ye){return"M"+(ye-J-.5)+","+(he.t-.5)+"v-3h"+(2*J+1)+"v3ZM"+(ye-J-.5)+","+(he.b+.5)+"v3h"+(2*J+1)+"v-3Z"}function ce(he){var ye=Math.floor(Math.min(he.b-he.t,he.r-he.l,J)/2);return"M"+(he.l-3.5)+","+(he.t-.5+ye)+"h3v"+-ye+"h"+ye+"v-3h-"+(ye+3)+"ZM"+(he.r+3.5)+","+(he.t-.5+ye)+"h-3v"+-ye+"h"+-ye+"v-3h"+(ye+3)+"ZM"+(he.r+3.5)+","+(he.b+.5-ye)+"h-3v"+ye+"h"+-ye+"v3h"+(ye+3)+"ZM"+(he.l-3.5)+","+(he.b+.5-ye)+"h3v"+ye+"h"+ye+"v3h-"+(ye+3)+"Z"}function ae(he,ye,_e,je,Je){for(var nt=!1,at={},Fe={},Ie,Ke,Qe,it,Ne=(Je||{}).xaHash,ht=(Je||{}).yaHash,Tt=0;Tt<ye.length;Tt++){var Xt=ye[Tt];for(Ie in _e)if(Xt[Ie]){for(Qe in Xt)!(Je&&(Ne[Qe]||ht[Qe]))&&!(Qe.charAt(0)==="x"?_e:je)[Qe]&&(at[Qe]=Ie);for(Ke in je)!(Je&&(Ne[Ke]||ht[Ke]))&&Xt[Ke]&&(nt=!0)}for(Ke in je)if(Xt[Ke])for(it in Xt)!(Je&&(Ne[it]||ht[it]))&&!(it.charAt(0)==="x"?_e:je)[it]&&(Fe[it]=Ke)}nt&&(s.extendFlat(at,Fe),Fe={});var Nt={},Mt=[];for(Qe in at){var Vt=z(he,Qe);Mt.push(Vt),Nt[Vt._id]=Vt}var Yt={},cr=[];for(it in Fe){var Nr=z(he,it);cr.push(Nr),Yt[Nr._id]=Nr}return{xaHash:Nt,yaHash:Yt,xaxes:Mt,yaxes:cr,xLinks:at,yLinks:Fe,isSubplotConstrained:nt}}function ve(he,ye){if(!u)he.onwheel!==void 0?he.onwheel=ye:he.onmousewheel!==void 0?he.onmousewheel=ye:he.isAddedWheelEvent||(he.isAddedWheelEvent=!0,he.addEventListener("wheel",ye,{passive:!1}));else{var _e=he.onwheel!==void 0?"wheel":"mousewheel";he._onwheel&&he.removeEventListener(_e,he._onwheel),he._onwheel=ye,he.addEventListener(_e,ye,{passive:!1})}}function pe(he){var ye=[];for(var _e in he)ye.push(he[_e]);return ye}i.exports={makeDragBox:q,makeDragger:we,makeRectDragger:ee,makeZoombox:Re,makeCorners:Ee,updateZoombox:ke,xyCorners:ce,transitionZoombox:$,removeZoombox:le,showDoubleClickNotifier:K,attachWheelEventHandler:ve}},{"../../components/color":103,"../../components/dragelement":122,"../../components/dragelement/helpers":121,"../../components/drawing":125,"../../components/fx":143,"../../components/selections":191,"../../constants/alignment":219,"../../lib":244,"../../lib/clear_gl_canvases":232,"../../lib/setcursor":264,"../../lib/svg_text_utils":267,"../../plot_api/subroutines":281,"../../registry":327,"../plots":325,"./axes":291,"./axis_ids":295,"./constants":298,"./scale_zoom":309,"@plotly/d3":11,"has-passive-events":49,tinycolor2:68}],301:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../components/fx"),n=e("../../components/dragelement"),l=e("../../lib/setcursor"),u=e("./dragbox").makeDragBox,h=e("./constants").DRAGGERSIZE;o.initInteractions=function(d){var p=d._fullLayout;if(d._context.staticPlot){a.select(d).selectAll(".drag").remove();return}if(!(!p._has("cartesian")&&!p._has("splom"))){var _=Object.keys(p._plots||{}).sort(function(x,E){if((p._plots[x].mainplot&&!0)===(p._plots[E].mainplot&&!0)){var A=x.split("y"),P=E.split("y");return A[0]===P[0]?Number(A[1]||1)-Number(P[1]||1):Number(A[0]||1)-Number(P[0]||1)}return p._plots[x].mainplot?1:-1});_.forEach(function(x){var E=p._plots[x],A=E.xaxis,P=E.yaxis;if(!E.mainplot){var D=u(d,E,A._offset,P._offset,A._length,P._length,"ns","ew");D.onmousemove=function(I){d._fullLayout._rehover=function(){d._fullLayout._hoversubplot===x&&d._fullLayout._plots[x]&&s.hover(d,I,x)},s.hover(d,I,x),d._fullLayout._lasthover=D,d._fullLayout._hoversubplot=x},D.onmouseout=function(I){d._dragging||(d._fullLayout._hoversubplot=null,n.unhover(d,I))},d._context.showAxisDragHandles&&(u(d,E,A._offset-h,P._offset-h,h,h,"n","w"),u(d,E,A._offset+A._length,P._offset-h,h,h,"n","e"),u(d,E,A._offset-h,P._offset+P._length,h,h,"s","w"),u(d,E,A._offset+A._length,P._offset+P._length,h,h,"s","e"))}if(d._context.showAxisDragHandles){if(x===A._mainSubplot){var R=A._mainLinePosition;A.side==="top"&&(R-=h),u(d,E,A._offset+A._length*.1,R,A._length*.8,h,"","ew"),u(d,E,A._offset,R,A._length*.1,h,"","w"),u(d,E,A._offset+A._length*.9,R,A._length*.1,h,"","e")}if(x===P._mainSubplot){var S=P._mainLinePosition;P.side!=="right"&&(S-=h),u(d,E,S,P._offset+P._length*.1,h,P._length*.8,"ns",""),u(d,E,S,P._offset+P._length*.9,h,P._length*.1,"s",""),u(d,E,S,P._offset,h,P._length*.1,"n","")}}});var b=p._hoverlayer.node();b.onmousemove=function(x){x.target=d._fullLayout._lasthover,s.hover(d,x,p._hoversubplot)},b.onclick=function(x){x.target=d._fullLayout._lasthover,s.click(d,x)},b.onmousedown=function(x){d._fullLayout._lasthover.onmousedown(x)},o.updateFx(d)}},o.updateFx=function(v){var d=v._fullLayout,p=d.dragmode==="pan"?"move":"crosshair";l(d._draggers,p)}},{"../../components/dragelement":122,"../../components/fx":143,"../../lib/setcursor":264,"./constants":298,"./dragbox":300,"@plotly/d3":11}],302:[function(e,i,o){var a=e("../../registry"),s=e("../../lib"),n=e("./axis_ids");i.exports=function(u){return function(v,d){var p=v[u];if(!!Array.isArray(p))for(var _=a.subplotsRegistry.cartesian,b=_.idRegex,x=d._subplots,E=x.xaxis,A=x.yaxis,P=x.cartesian,D=d._has("cartesian")||d._has("gl2d"),R=0;R<p.length;R++){var S=p[R];if(!!s.isPlainObject(S)){var I=n.cleanId(S.xref,"x",!1),T=n.cleanId(S.yref,"y",!1),M=b.x.test(I),z=b.y.test(T);if(M||z){D||s.pushUnique(d._basePlotModules,_);var U=!1;M&&E.indexOf(I)===-1&&(E.push(I),U=!0),z&&A.indexOf(T)===-1&&(A.push(T),U=!0),U&&M&&z&&P.push(I+T)}}}}}},{"../../lib":244,"../../registry":327,"./axis_ids":295}],303:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../registry"),n=e("../../lib"),l=e("../plots"),u=e("../../components/drawing"),h=e("../get_data").getModuleCalcData,v=e("./axis_ids"),d=e("./constants"),p=e("../../constants/xmlns_namespaces"),_=n.ensureSingle;function b(R,S,I){return n.ensureSingle(R,S,I,function(T){T.datum(I)})}o.name="cartesian",o.attr=["xaxis","yaxis"],o.idRoot=["x","y"],o.idRegex=d.idRegex,o.attrRegex=d.attrRegex,o.attributes=e("./attributes"),o.layoutAttributes=e("./layout_attributes"),o.supplyLayoutDefaults=e("./layout_defaults"),o.transitionAxes=e("./transition_axes"),o.finalizeSubplots=function(R,S){var I=S._subplots,T=I.xaxis,M=I.yaxis,z=I.cartesian,U=z.concat(I.gl2d||[]),F={},V={},j,H,Y;for(j=0;j<U.length;j++){var J=U[j].split("y");F[J[0]]=1,V["y"+J[1]]=1}for(j=0;j<T.length;j++)H=T[j],F[H]||(Y=(R[v.id2name(H)]||{}).anchor,d.idRegex.y.test(Y)||(Y="y"),z.push(H+Y),U.push(H+Y),V[Y]||(V[Y]=1,n.pushUnique(M,Y)));for(j=0;j<M.length;j++)Y=M[j],V[Y]||(H=(R[v.id2name(Y)]||{}).anchor,d.idRegex.x.test(H)||(H="x"),z.push(H+Y),U.push(H+Y),F[H]||(F[H]=1,n.pushUnique(T,H)));if(!U.length){H="",Y="";for(var ne in R)if(d.attrRegex.test(ne)){var q=ne.charAt(0);q==="x"?(!H||+ne.substr(5)<+H.substr(5))&&(H=ne):(!Y||+ne.substr(5)<+Y.substr(5))&&(Y=ne)}H=H?v.name2id(H):"x",Y=Y?v.name2id(Y):"y",T.push(H),M.push(Y),z.push(H+Y)}},o.plot=function(R,S,I,T){var M=R._fullLayout,z=M._subplots.cartesian,U=R.calcdata,F;if(!Array.isArray(S))for(S=[],F=0;F<U.length;F++)S.push(F);for(F=0;F<z.length;F++){for(var V=z[F],j=M._plots[V],H=[],Y,J=0;J<U.length;J++){var ne=U[J],q=ne[0].trace;q.xaxis+q.yaxis===V&&((S.indexOf(q.index)!==-1||q.carpet)&&(Y&&Y[0].trace.xaxis+Y[0].trace.yaxis===V&&["tonextx","tonexty","tonext"].indexOf(q.fill)!==-1&&H.indexOf(Y)===-1&&H.push(Y),H.push(ne)),Y=ne)}x(R,j,H,I,T)}};function x(R,S,I,T,M){for(var z=d.traceLayerClasses,U=R._fullLayout,F=U._modules,V,j,H,Y=[],J=[],ne=0;ne<F.length;ne++){V=F[ne];var q=V.name,we=s.modules[q].categories;if(we.svg){var ee=V.layerName||q+"layer",X=V.plot;j=h(I,X),H=j[0],I=j[1],H.length&&Y.push({i:z.indexOf(ee),className:ee,plotMethod:X,cdModule:H}),we.zoomScale&&J.push("."+ee)}}Y.sort(function(me,xe){return me.i-xe.i});var re=S.plot.selectAll("g.mlayer").data(Y,function(me){return me.className});if(re.enter().append("g").attr("class",function(me){return me.className}).classed("mlayer",!0).classed("rangeplot",S.isRangePlot),re.exit().remove(),re.order(),re.each(function(me){var xe=a.select(this),He=me.className;me.plotMethod(R,S,me.cdModule,xe,T,M),d.clipOnAxisFalseQuery.indexOf("."+He)===-1&&u.setClipUrl(xe,S.layerClipId,R)}),U._has("scattergl")&&(V=s.getModule("scattergl"),H=h(I,V)[0],V.plot(R,S,H)),!R._context.staticPlot&&(S._hasClipOnAxisFalse&&(S.clipOnAxisFalseTraces=S.plot.selectAll(d.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),J.length)){var de=S.plot.selectAll(J.join(",")).selectAll(".trace");S.zoomScalePts=de.selectAll("path.point"),S.zoomScaleTxt=de.selectAll(".textpoint")}}o.clean=function(R,S,I,T){var M=T._plots||{},z=S._plots||{},U=T._subplots||{},F,V,j;if(T._hasOnlyLargeSploms&&!S._hasOnlyLargeSploms)for(j in M)F=M[j],F.plotgroup&&F.plotgroup.remove();var H=T._has&&T._has("gl"),Y=S._has&&S._has("gl");if(H&&!Y)for(j in M)F=M[j],F._scene&&F._scene.destroy();if(U.xaxis&&U.yaxis){var J=v.listIds({_fullLayout:T});for(V=0;V<J.length;V++){var ne=J[V];S[v.id2name(ne)]||T._infolayer.selectAll(".g-"+ne+"title").remove()}}var q=T._has&&T._has("cartesian"),we=S._has&&S._has("cartesian");if(q&&!we)P(T._cartesianlayer.selectAll(".subplot"),T),T._defs.selectAll(".axesclip").remove(),delete T._axisConstraintGroups,delete T._axisMatchGroups;else if(U.cartesian)for(V=0;V<U.cartesian.length;V++){var ee=U.cartesian[V];if(!z[ee]){var X="."+ee+",."+ee+"-x,."+ee+"-y";T._cartesianlayer.selectAll(X).remove(),D(ee,T)}}},o.drawFramework=function(R){var S=R._fullLayout,I=E(R),T=S._cartesianlayer.selectAll(".subplot").data(I,String);T.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),T.order(),T.exit().call(P,S),T.each(function(M){var z=M[0],U=S._plots[z];U.plotgroup=a.select(this),A(R,U),U.draglayer=_(S._draggers,"g",z)})},o.rangePlot=function(R,S,I){A(R,S),x(R,S,I),l.style(R)};function E(R){var S=R._fullLayout,I=S._subplots.cartesian,T=I.length,M,z,U,F,V,j,H=[],Y=[];for(M=0;M<T;M++){U=I[M],F=S._plots[U],V=F.xaxis,j=F.yaxis;var J=V._mainAxis,ne=j._mainAxis,q=J._id+ne._id,we=S._plots[q];F.overlays=[],q!==U&&we?(F.mainplot=q,F.mainplotinfo=we,Y.push(U)):(F.mainplot=void 0,F.mainplotinfo=void 0,H.push(U))}for(M=0;M<Y.length;M++)U=Y[M],F=S._plots[U],F.mainplotinfo.overlays.push(F);var ee=H.concat(Y),X=new Array(T);for(M=0;M<T;M++){U=ee[M],F=S._plots[U],V=F.xaxis,j=F.yaxis;var re=[U,V.layer,j.layer,V.overlaying||"",j.overlaying||""];for(z=0;z<F.overlays.length;z++)re.push(F.overlays[z].id);X[M]=re}return X}function A(R,S){var I=S.plotgroup,T=S.id,M=d.layerValue2layerClass[S.xaxis.layer],z=d.layerValue2layerClass[S.yaxis.layer],U=R._fullLayout._hasOnlyLargeSploms;if(S.mainplot){var V=S.mainplotinfo,j=V.plotgroup,H=T+"-x",Y=T+"-y";S.minorGridlayer=V.minorGridlayer,S.gridlayer=V.gridlayer,S.zerolinelayer=V.zerolinelayer,_(V.overlinesBelow,"path",H),_(V.overlinesBelow,"path",Y),_(V.overaxesBelow,"g",H),_(V.overaxesBelow,"g",Y),S.plot=_(V.overplot,"g",T),_(V.overlinesAbove,"path",H),_(V.overlinesAbove,"path",Y),_(V.overaxesAbove,"g",H),_(V.overaxesAbove,"g",Y),S.xlines=j.select(".overlines-"+M).select("."+H),S.ylines=j.select(".overlines-"+z).select("."+Y),S.xaxislayer=j.select(".overaxes-"+M).select("."+H),S.yaxislayer=j.select(".overaxes-"+z).select("."+Y)}else if(U)S.xlines=_(I,"path","xlines-above"),S.ylines=_(I,"path","ylines-above"),S.xaxislayer=_(I,"g","xaxislayer-above"),S.yaxislayer=_(I,"g","yaxislayer-above");else{var F=_(I,"g","layer-subplot");S.shapelayer=_(F,"g","shapelayer"),S.imagelayer=_(F,"g","imagelayer"),S.minorGridlayer=_(I,"g","minor-gridlayer"),S.gridlayer=_(I,"g","gridlayer"),S.zerolinelayer=_(I,"g","zerolinelayer"),_(I,"path","xlines-below"),_(I,"path","ylines-below"),S.overlinesBelow=_(I,"g","overlines-below"),_(I,"g","xaxislayer-below"),_(I,"g","yaxislayer-below"),S.overaxesBelow=_(I,"g","overaxes-below"),S.plot=_(I,"g","plot"),S.overplot=_(I,"g","overplot"),S.xlines=_(I,"path","xlines-above"),S.ylines=_(I,"path","ylines-above"),S.overlinesAbove=_(I,"g","overlines-above"),_(I,"g","xaxislayer-above"),_(I,"g","yaxislayer-above"),S.overaxesAbove=_(I,"g","overaxes-above"),S.xlines=I.select(".xlines-"+M),S.ylines=I.select(".ylines-"+z),S.xaxislayer=I.select(".xaxislayer-"+M),S.yaxislayer=I.select(".yaxislayer-"+z)}U||(b(S.minorGridlayer,"g",S.xaxis._id),b(S.minorGridlayer,"g",S.yaxis._id),S.minorGridlayer.selectAll("g").map(function(J){return J[0]}).sort(v.idSort),b(S.gridlayer,"g",S.xaxis._id),b(S.gridlayer,"g",S.yaxis._id),S.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(v.idSort)),S.xlines.style("fill","none").classed("crisp",!0),S.ylines.style("fill","none").classed("crisp",!0)}function P(R,S){if(!!R){var I={};R.each(function(V){var j=V[0],H=a.select(this);H.remove(),D(j,S),I[j]=!0});for(var T in S._plots)for(var M=S._plots[T],z=M.overlays||[],U=0;U<z.length;U++){var F=z[U];I[F.id]&&F.plot.selectAll(".trace").remove()}}}function D(R,S){S._draggers.selectAll("g."+R).remove(),S._defs.select("#clip"+S._uid+R+"plot").remove()}o.toSVG=function(R){var S=R._fullLayout._glimages,I=a.select(R).selectAll(".svg-container"),T=I.filter(function(z,U){return U===I.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var z=this,U=z.toDataURL("image/png"),F=S.append("svg:image");F.attr({xmlns:p.svg,"xlink:href":U,preserveAspectRatio:"none",x:0,y:0,width:z.style.width,height:z.style.height})}T.each(M)},o.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":125,"../../constants/xmlns_namespaces":225,"../../lib":244,"../../registry":327,"../get_data":321,"../plots":325,"./attributes":289,"./axis_ids":295,"./constants":298,"./graph_interact":301,"./layout_attributes":304,"./layout_defaults":305,"./transition_axes":315,"@plotly/d3":11}],304:[function(e,i,o){var a=e("../font_attributes"),s=e("../../components/color/attributes"),n=e("../../components/drawing/attributes").dash,l=e("../../lib/extend").extendFlat,u=e("../../plot_api/plot_template").templatedArray,h=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,v=e("../../constants/numerical").ONEDAY,d=e("./constants"),p=d.HOUR_PATTERN,_=d.WEEKDAY_PATTERN,b={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function x(F){return{valType:"integer",min:0,dflt:F?5:0,editType:"ticks"}}var E={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},A={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},P={valType:"data_array",editType:"ticks"},D={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function R(F){var V={valType:"number",min:0,editType:"ticks"};return F||(V.dflt=5),V}function S(F){var V={valType:"number",min:0,editType:"ticks"};return F||(V.dflt=1),V}var I={valType:"color",dflt:s.defaultLine,editType:"ticks"},T={valType:"color",dflt:s.lightLine,editType:"ticks"};function M(F){var V={valType:"number",min:0,editType:"ticks"};return F||(V.dflt=1),V}var z=l({},n,{editType:"ticks"}),U={valType:"boolean",editType:"ticks"};i.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:s.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:a({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"calc"},rangebreaks:u("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[_,p,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:v},editType:"calc"}),tickmode:b,nticks:x(),tick0:E,dtick:A,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:P,ticktext:{valType:"data_array",editType:"ticks"},ticks:D,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:R(),tickwidth:S(),tickcolor:I,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:l({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:a({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:h("tick label")},tickformatstops:u("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:h("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:s.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:U,gridcolor:T,gridwidth:M(),griddash:z,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"plot"},minor:{tickmode:b,nticks:x("minor"),tick0:E,dtick:A,tickvals:P,ticks:D,ticklen:R("minor"),tickwidth:S("minor"),tickcolor:I,gridcolor:T,gridwidth:M("minor"),griddash:z,showgrid:U,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:a({editType:"ticks"})}}},{"../../components/color/attributes":102,"../../components/drawing/attributes":124,"../../constants/numerical":224,"../../lib/extend":238,"../../plot_api/plot_template":280,"../../plots/cartesian/axis_format_attributes":294,"../font_attributes":319,"./constants":298}],305:[function(e,i,o){var a=e("../../lib"),s=e("../../components/color"),n=e("../../components/fx/helpers").isUnifiedHover,l=e("../../components/fx/hovermode_defaults"),u=e("../../plot_api/plot_template"),h=e("../layout_attributes"),v=e("./layout_attributes"),d=e("./type_defaults"),p=e("./axis_defaults"),_=e("./constraints"),b=e("./position_defaults"),x=e("./axis_ids"),E=x.id2name,A=x.name2id,P=e("./constants").AX_ID_PATTERN,D=e("../../registry"),R=D.traceIs,S=D.getComponentMethod;function I(T,M,z){Array.isArray(T[M])?T[M].push(z):T[M]=[z]}i.exports=function(M,z,U){var F=z.autotypenumbers,V={},j={},H={},Y={},J={},ne={},q={},we={},ee={},X={},re,de;for(re=0;re<U.length;re++){var me=U[re];if(!(!R(me,"cartesian")&&!R(me,"gl2d"))){var xe;if(me.xaxis)xe=E(me.xaxis),I(V,xe,me);else if(me.xaxes)for(de=0;de<me.xaxes.length;de++)I(V,E(me.xaxes[de]),me);var He;if(me.yaxis)He=E(me.yaxis),I(V,He,me);else if(me.yaxes)for(de=0;de<me.yaxes.length;de++)I(V,E(me.yaxes[de]),me);if(me.type==="funnel"?me.orientation==="h"?(xe&&(j[xe]=!0),He&&(q[He]=!0)):He&&(H[He]=!0):me.type==="image"?(He&&(we[He]=!0),xe&&(we[xe]=!0)):(He&&(J[He]=!0,ne[He]=!0),(!R(me,"carpet")||me.type==="carpet"&&!me._cheater)&&xe&&(Y[xe]=!0)),me.type==="carpet"&&me._cheater&&xe&&(j[xe]=!0),R(me,"2dMap")&&(ee[xe]=!0,ee[He]=!0),R(me,"oriented")){var Re=me.orientation==="h"?He:xe;X[Re]=!0}}}var Ee=z._subplots,ke=Ee.xaxis,$=Ee.yaxis,le=a.simpleMap(ke,E),K=a.simpleMap($,E),te=le.concat(K),ie=s.background;ke.length&&$.length&&(ie=a.coerce(M,z,h,"plot_bgcolor"));var ce=s.combine(ie,z.paper_bgcolor),ae,ve,pe,he,ye;function _e(){var kt=V[ae]||[];ye._traceIndices=kt.map(function(Me){return Me._expandedIndex}),ye._annIndices=[],ye._shapeIndices=[],ye._selectionIndices=[],ye._imgIndices=[],ye._subplotsWith=[],ye._counterAxes=[],ye._name=ye._attr=ae,ye._id=ve}function je(kt,Me){return a.coerce(he,ye,v,kt,Me)}function Je(kt,Me){return a.coerce2(he,ye,v,kt,Me)}function nt(kt){return kt==="x"?$:ke}function at(kt,Me){for(var rt=kt==="x"?le:K,st=[],ft=0;ft<rt.length;ft++){var zt=rt[ft];zt!==Me&&!(M[zt]||{}).overlaying&&st.push(A(zt))}return st}var Fe={x:nt("x"),y:nt("y")},Ie=Fe.x.concat(Fe.y),Ke={},Qe=[];function it(){var kt=he.matches;P.test(kt)&&Ie.indexOf(kt)===-1&&(Ke[kt]=he.type,Qe=Object.keys(Ke))}var Ne=l(M,z),ht=n(Ne);for(re=0;re<te.length;re++){ae=te[re],ve=A(ae),pe=ae.charAt(0),a.isPlainObject(M[ae])||(M[ae]={}),he=M[ae],ye=u.newContainer(z,ae,pe+"axis"),_e();var Tt=pe==="x"&&!Y[ae]&&j[ae]||pe==="y"&&!J[ae]&&H[ae],Xt=pe==="y"&&(!ne[ae]&&q[ae]||we[ae]),Nt={hasMinor:!0,letter:pe,font:z.font,outerTicks:ee[ae],showGrid:!X[ae],data:V[ae]||[],bgColor:ce,calendar:z.calendar,automargin:!0,visibleDflt:Tt,reverseDflt:Xt,autotypenumbersDflt:F,splomStash:((z._splomAxes||{})[pe]||{})[ve]};je("uirevision",z.uirevision),d(he,ye,je,Nt),p(he,ye,je,Nt,z);var Mt=ht&&pe===Ne.charAt(0),Vt=Je("spikecolor",ht?ye.color:void 0),Yt=Je("spikethickness",ht?1.5:void 0),cr=Je("spikedash",ht?"dot":void 0),Nr=Je("spikemode",ht?"across":void 0),er=Je("spikesnap"),Wt=je("showspikes",!!Mt||!!Vt||!!Yt||!!cr||!!Nr||!!er);Wt||(delete ye.spikecolor,delete ye.spikethickness,delete ye.spikedash,delete ye.spikemode,delete ye.spikesnap),b(he,ye,je,{letter:pe,counterAxes:Fe[pe],overlayableAxes:at(pe,ae),grid:z.grid}),je("title.standoff"),it(),ye._input=he}for(re=0;re<Qe.length;){ve=Qe[re++],ae=E(ve),pe=ae.charAt(0),a.isPlainObject(M[ae])||(M[ae]={}),he=M[ae],ye=u.newContainer(z,ae,pe+"axis"),_e();var dr={letter:pe,font:z.font,outerTicks:ee[ae],showGrid:!X[ae],data:[],bgColor:ce,calendar:z.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:F,splomStash:((z._splomAxes||{})[pe]||{})[ve]};je("uirevision",z.uirevision),ye.type=Ke[ve]||"linear",p(he,ye,je,dr,z),b(he,ye,je,{letter:pe,counterAxes:Fe[pe],overlayableAxes:at(pe,ae),grid:z.grid}),je("fixedrange"),it(),ye._input=he}var zr=S("rangeslider","handleDefaults"),Dr=S("rangeselector","handleDefaults");for(re=0;re<le.length;re++)ae=le[re],he=M[ae],ye=z[ae],zr(M,z,ae),ye.type==="date"&&Dr(he,ye,z,K,ye.calendar),je("fixedrange");for(re=0;re<K.length;re++){ae=K[re],he=M[ae],ye=z[ae];var $e=z[E(ye.anchor)],pt=S("rangeslider","isVisible")($e);je("fixedrange",pt)}_.handleDefaults(M,z,{axIds:Ie.concat(Qe).sort(x.idSort),axHasImage:we})}},{"../../components/color":103,"../../components/fx/helpers":139,"../../components/fx/hovermode_defaults":142,"../../lib":244,"../../plot_api/plot_template":280,"../../registry":327,"../layout_attributes":323,"./axis_defaults":293,"./axis_ids":295,"./constants":298,"./constraints":299,"./layout_attributes":304,"./position_defaults":307,"./type_defaults":316}],306:[function(e,i,o){var a=e("tinycolor2").mix,s=e("../../components/color/attributes"),n=e("../../lib");i.exports=function(u,h,v,d){d=d||{};var p=d.dfltColor;function _(H,Y){return n.coerce2(u,h,d.attributes,H,Y)}var b=_("linecolor",p),x=_("linewidth"),E=v("showline",d.showLine||!!b||!!x);E||(delete h.linecolor,delete h.linewidth);var A=a(p,d.bgColor,d.blend||s.lightFraction).toRgbString(),P=_("gridcolor",A),D=_("gridwidth"),R=_("griddash"),S=v("showgrid",d.showGrid||!!P||!!D||!!R);if(S||(delete h.gridcolor,delete h.gridwidth,delete h.griddash),d.hasMinor){var I=a(h.gridcolor,d.bgColor,67).toRgbString(),T=_("minor.gridcolor",I),M=_("minor.gridwidth",h.gridwidth||1),z=_("minor.griddash",h.griddash||"solid"),U=v("minor.showgrid",!!T||!!M||!!z);U||(delete h.minor.gridcolor,delete h.minor.gridwidth,delete h.minor.griddash)}if(!d.noZeroLine){var F=_("zerolinecolor",p),V=_("zerolinewidth"),j=v("zeroline",d.showGrid||!!F||!!V);j||(delete h.zerolinecolor,delete h.zerolinewidth)}}},{"../../components/color/attributes":102,"../../lib":244,tinycolor2:68}],307:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib");i.exports=function(l,u,h,v){var d=v.counterAxes||[],p=v.overlayableAxes||[],_=v.letter,b=v.grid,x,E,A,P;b&&(E=b._domains[_][b._axisMap[u._id]],x=b._anchors[u._id],E&&(A=b[_+"side"].split(" ")[0],P=b.domain[_][A==="right"||A==="top"?1:0])),E=E||[0,1],x=x||(a(l.position)?"free":d[0]||"free"),A=A||(_==="x"?"bottom":"left"),P=P||0;var D=s.coerce(l,u,{anchor:{valType:"enumerated",values:["free"].concat(d),dflt:x}},"anchor");D==="free"&&h("position",P),s.coerce(l,u,{side:{valType:"enumerated",values:_==="x"?["bottom","top"]:["left","right"],dflt:A}},"side");var R=!1;if(p.length&&(R=s.coerce(l,u,{overlaying:{valType:"enumerated",values:[!1].concat(p),dflt:!1}},"overlaying")),!R){var S=h("domain",E);S[0]>S[1]-1/4096&&(u.domain=E),s.noneOrAll(l.domain,u.domain,E)}return h("layer"),u}},{"../../lib":244,"fast-isnumeric":17}],308:[function(e,i,o){var a=e("./show_dflt");i.exports=function(n,l,u,h,v){v||(v={});var d=v.tickSuffixDflt,p=a(n),_=u("tickprefix");_&&u("showtickprefix",p);var b=u("ticksuffix",d);b&&u("showticksuffix",p)}},{"./show_dflt":311}],309:[function(e,i,o){var a=e("../../constants/alignment").FROM_BL;i.exports=function(n,l,u){u===void 0&&(u=a[n.constraintoward||"center"]);var h=[n.r2l(n.range[0]),n.r2l(n.range[1])],v=h[0]+(h[1]-h[0])*u;n.range=n._input.range=[n.l2r(v+(h[0]-v)*l),n.l2r(v+(h[1]-v)*l)],n.setScale()}},{"../../constants/alignment":219}],310:[function(e,i,o){var a=e("@plotly/d3"),s=e("d3-time-format").utcFormat,n=e("../../lib"),l=n.numberFormat,u=e("fast-isnumeric"),h=n.cleanNumber,v=n.ms2DateTime,d=n.dateTime2ms,p=n.ensureNumber,_=n.isArrayOrTypedArray,b=e("../../constants/numerical"),x=b.FP_SAFE,E=b.BADNUM,A=b.LOG_CLIP,P=b.ONEWEEK,D=b.ONEDAY,R=b.ONEHOUR,S=b.ONEMIN,I=b.ONESEC,T=e("./axis_ids"),M=e("./constants"),z=M.HOUR_PATTERN,U=M.WEEKDAY_PATTERN;function F(j){return Math.pow(10,j)}function V(j){return j!=null}i.exports=function(H,Y){Y=Y||{};var J=H._id||"x",ne=J.charAt(0);function q(te,ie){if(te>0)return Math.log(te)/Math.LN10;if(te<=0&&ie&&H.range&&H.range.length===2){var ce=H.range[0],ae=H.range[1];return .5*(ce+ae-2*A*Math.abs(ce-ae))}else return E}function we(te,ie,ce,ae){if((ae||{}).msUTC&&u(te))return+te;var ve=d(te,ce||H.calendar);if(ve===E)if(u(te)){te=+te;var pe=Math.floor(n.mod(te+.05,1)*10),he=Math.round(te-pe/10);ve=d(new Date(he))+pe/10}else return E;return ve}function ee(te,ie,ce){return v(te,ie,ce||H.calendar)}function X(te){return H._categories[Math.round(te)]}function re(te){if(V(te)){if(H._categoriesMap===void 0&&(H._categoriesMap={}),H._categoriesMap[te]!==void 0)return H._categoriesMap[te];H._categories.push(typeof te=="number"?String(te):te);var ie=H._categories.length-1;return H._categoriesMap[te]=ie,ie}return E}function de(te,ie){for(var ce=new Array(ie),ae=0;ae<ie;ae++){var ve=(te[0]||[])[ae],pe=(te[1]||[])[ae];ce[ae]=me([ve,pe])}return ce}function me(te){if(H._categoriesMap)return H._categoriesMap[te]}function xe(te){var ie=me(te);if(ie!==void 0)return ie;if(u(te))return+te}function He(te){return u(te)?+te:me(te)}function Re(te,ie,ce){return a.round(ce+ie*te,2)}function Ee(te,ie,ce){return(te-ce)/ie}var ke=function(ie){return u(ie)?Re(ie,H._m,H._b):E},$=function(te){return Ee(te,H._m,H._b)};if(H.rangebreaks){var le=ne==="y";ke=function(te){if(!u(te))return E;var ie=H._rangebreaks.length;if(!ie)return Re(te,H._m,H._b);var ce=le;H.range[0]>H.range[1]&&(ce=!ce);for(var ae=ce?-1:1,ve=ae*te,pe=0,he=0;he<ie;he++){var ye=ae*H._rangebreaks[he].min,_e=ae*H._rangebreaks[he].max;if(ve<ye)break;if(ve>_e)pe=he+1;else{pe=ve<(ye+_e)/2?he:he+1;break}}var je=H._B[pe]||0;return isFinite(je)?Re(te,H._m2,je):0},$=function(te){var ie=H._rangebreaks.length;if(!ie)return Ee(te,H._m,H._b);for(var ce=0,ae=0;ae<ie&&!(te<H._rangebreaks[ae].pmin);ae++)te>H._rangebreaks[ae].pmax&&(ce=ae+1);return Ee(te,H._m2,H._B[ce])}}H.c2l=H.type==="log"?q:p,H.l2c=H.type==="log"?F:p,H.l2p=ke,H.p2l=$,H.c2p=H.type==="log"?function(te,ie){return ke(q(te,ie))}:ke,H.p2c=H.type==="log"?function(te){return F($(te))}:$,["linear","-"].indexOf(H.type)!==-1?(H.d2r=H.r2d=H.d2c=H.r2c=H.d2l=H.r2l=h,H.c2d=H.c2r=H.l2d=H.l2r=p,H.d2p=H.r2p=function(te){return H.l2p(h(te))},H.p2d=H.p2r=$,H.cleanPos=p):H.type==="log"?(H.d2r=H.d2l=function(te,ie){return q(h(te),ie)},H.r2d=H.r2c=function(te){return F(h(te))},H.d2c=H.r2l=h,H.c2d=H.l2r=p,H.c2r=q,H.l2d=F,H.d2p=function(te,ie){return H.l2p(H.d2r(te,ie))},H.p2d=function(te){return F($(te))},H.r2p=function(te){return H.l2p(h(te))},H.p2r=$,H.cleanPos=p):H.type==="date"?(H.d2r=H.r2d=n.identity,H.d2c=H.r2c=H.d2l=H.r2l=we,H.c2d=H.c2r=H.l2d=H.l2r=ee,H.d2p=H.r2p=function(te,ie,ce){return H.l2p(we(te,0,ce))},H.p2d=H.p2r=function(te,ie,ce){return ee($(te),ie,ce)},H.cleanPos=function(te){return n.cleanDate(te,E,H.calendar)}):H.type==="category"?(H.d2c=H.d2l=re,H.r2d=H.c2d=H.l2d=X,H.d2r=H.d2l_noadd=xe,H.r2c=function(te){var ie=He(te);return ie!==void 0?ie:H.fraction2r(.5)},H.l2r=H.c2r=p,H.r2l=He,H.d2p=function(te){return H.l2p(H.r2c(te))},H.p2d=function(te){return X($(te))},H.r2p=H.d2p,H.p2r=$,H.cleanPos=function(te){return typeof te=="string"&&te!==""?te:p(te)}):H.type==="multicategory"&&(H.r2d=H.c2d=H.l2d=X,H.d2r=H.d2l_noadd=xe,H.r2c=function(te){var ie=xe(te);return ie!==void 0?ie:H.fraction2r(.5)},H.r2c_just_indices=me,H.l2r=H.c2r=p,H.r2l=xe,H.d2p=function(te){return H.l2p(H.r2c(te))},H.p2d=function(te){return X($(te))},H.r2p=H.d2p,H.p2r=$,H.cleanPos=function(te){return Array.isArray(te)||typeof te=="string"&&te!==""?te:p(te)},H.setupMultiCategory=function(te){var ie=H._traceIndices,ce,ae,ve=H._matchGroup;if(ve&&H._categories.length===0){for(var pe in ve)if(pe!==J){var he=Y[T.id2name(pe)];ie=ie.concat(he._traceIndices)}}var ye=[[0,{}],[0,{}]],_e=[];for(ce=0;ce<ie.length;ce++){var je=te[ie[ce]];if(ne in je){var Je=je[ne],nt=je._length||n.minRowLength(Je);if(_(Je[0])&&_(Je[1]))for(ae=0;ae<nt;ae++){var at=Je[0][ae],Fe=Je[1][ae];V(at)&&V(Fe)&&(_e.push([at,Fe]),at in ye[0][1]||(ye[0][1][at]=ye[0][0]++),Fe in ye[1][1]||(ye[1][1][Fe]=ye[1][0]++))}}}for(_e.sort(function(Ie,Ke){var Qe=ye[0][1],it=Qe[Ie[0]]-Qe[Ke[0]];if(it)return it;var Ne=ye[1][1];return Ne[Ie[1]]-Ne[Ke[1]]}),ce=0;ce<_e.length;ce++)re(_e[ce])}),H.fraction2r=function(te){var ie=H.r2l(H.range[0]),ce=H.r2l(H.range[1]);return H.l2r(ie+te*(ce-ie))},H.r2fraction=function(te){var ie=H.r2l(H.range[0]),ce=H.r2l(H.range[1]);return(H.r2l(te)-ie)/(ce-ie)},H.cleanRange=function(te,ie){ie||(ie={}),te||(te="range");var ce=n.nestedProperty(H,te).get(),ae,ve;if(H.type==="date"?ve=n.dfltRange(H.calendar):ne==="y"?ve=M.DFLTRANGEY:H._name==="realaxis"?ve=[0,1]:ve=ie.dfltRange||M.DFLTRANGEX,ve=ve.slice(),(H.rangemode==="tozero"||H.rangemode==="nonnegative")&&(ve[0]=0),!ce||ce.length!==2){n.nestedProperty(H,te).set(ve);return}for(H.type==="date"&&!H.autorange&&(ce[0]=n.cleanDate(ce[0],E,H.calendar),ce[1]=n.cleanDate(ce[1],E,H.calendar)),ae=0;ae<2;ae++)if(H.type==="date"){if(!n.isDateTime(ce[ae],H.calendar)){H[te]=ve;break}if(H.r2l(ce[0])===H.r2l(ce[1])){var pe=n.constrain(H.r2l(ce[0]),n.MIN_MS+1e3,n.MAX_MS-1e3);ce[0]=H.l2r(pe-1e3),ce[1]=H.l2r(pe+1e3);break}}else{if(!u(ce[ae]))if(u(ce[1-ae]))ce[ae]=ce[1-ae]*(ae?10:.1);else{H[te]=ve;break}if(ce[ae]<-x?ce[ae]=-x:ce[ae]>x&&(ce[ae]=x),ce[0]===ce[1]){var he=Math.max(1,Math.abs(ce[0]*1e-6));ce[0]-=he,ce[1]+=he}}},H.setScale=function(te){var ie=Y._size;if(H.overlaying){var ce=T.getFromId({_fullLayout:Y},H.overlaying);H.domain=ce.domain}var ae=te&&H._r?"_r":"range",ve=H.calendar;H.cleanRange(ae);var pe=H.r2l(H[ae][0],ve),he=H.r2l(H[ae][1],ve),ye=ne==="y";if(ye?(H._offset=ie.t+(1-H.domain[1])*ie.h,H._length=ie.h*(H.domain[1]-H.domain[0]),H._m=H._length/(pe-he),H._b=-H._m*he):(H._offset=ie.l+H.domain[0]*ie.w,H._length=ie.w*(H.domain[1]-H.domain[0]),H._m=H._length/(he-pe),H._b=-H._m*pe),H._rangebreaks=[],H._lBreaks=0,H._m2=0,H._B=[],H.rangebreaks){var _e,je;if(H._rangebreaks=H.locateBreaks(Math.min(pe,he),Math.max(pe,he)),H._rangebreaks.length){for(_e=0;_e<H._rangebreaks.length;_e++)je=H._rangebreaks[_e],H._lBreaks+=Math.abs(je.max-je.min);var Je=ye;pe>he&&(Je=!Je),Je&&H._rangebreaks.reverse();var nt=Je?-1:1;for(H._m2=nt*H._length/(Math.abs(he-pe)-H._lBreaks),H._B.push(-H._m2*(ye?he:pe)),_e=0;_e<H._rangebreaks.length;_e++)je=H._rangebreaks[_e],H._B.push(H._B[H._B.length-1]-nt*H._m2*(je.max-je.min));for(_e=0;_e<H._rangebreaks.length;_e++)je=H._rangebreaks[_e],je.pmin=ke(je.min),je.pmax=ke(je.max)}}if(!isFinite(H._m)||!isFinite(H._b)||H._length<0)throw Y._replotting=!1,new Error("Something went wrong with axis scaling")},H.maskBreaks=function(te){var ie=H.rangebreaks||[],ce,ae,ve,pe,he;ie._cachedPatterns||(ie._cachedPatterns=ie.map(function(Qe){return Qe.enabled&&Qe.bounds?n.simpleMap(Qe.bounds,Qe.pattern?h:H.d2c):null})),ie._cachedValues||(ie._cachedValues=ie.map(function(Qe){return Qe.enabled&&Qe.values?n.simpleMap(Qe.values,H.d2c).sort(n.sorterAsc):null}));for(var ye=0;ye<ie.length;ye++){var _e=ie[ye];if(_e.enabled){if(_e.bounds){var je=_e.pattern;switch(ce=ie._cachedPatterns[ye],ae=ce[0],ve=ce[1],je){case U:he=new Date(te),pe=he.getUTCDay(),ae>ve&&(ve+=7,pe<ae&&(pe+=7));break;case z:he=new Date(te);var Je=he.getUTCHours(),nt=he.getUTCMinutes(),at=he.getUTCSeconds(),Fe=he.getUTCMilliseconds();pe=Je+(nt/60+at/3600+Fe/36e5),ae>ve&&(ve+=24,pe<ae&&(pe+=24));break;case"":pe=te;break}if(pe>=ae&&pe<ve)return E}else for(var Ie=ie._cachedValues[ye],Ke=0;Ke<Ie.length;Ke++)if(ae=Ie[Ke],ve=ae+_e.dvalue,te>=ae&&te<ve)return E}}return te},H.locateBreaks=function(te,ie){var ce,ae,ve,pe,he=[];if(!H.rangebreaks)return he;var ye=H.rangebreaks.slice().sort(function(Ne,ht){return Ne.pattern===U&&ht.pattern===z?-1:ht.pattern===U&&Ne.pattern===z?1:0}),_e=function(Ne,ht){if(Ne=n.constrain(Ne,te,ie),ht=n.constrain(ht,te,ie),Ne!==ht){for(var Tt=!0,Xt=0;Xt<he.length;Xt++){var Nt=he[Xt];Ne<Nt.max&&ht>=Nt.min&&(Ne<Nt.min&&(Nt.min=Ne),ht>Nt.max&&(Nt.max=ht),Tt=!1)}Tt&&he.push({min:Ne,max:ht})}};for(ce=0;ce<ye.length;ce++){var je=ye[ce];if(je.enabled)if(je.bounds){var Je=te,nt=ie;je.pattern&&(Je=Math.floor(Je)),ae=n.simpleMap(je.bounds,je.pattern?h:H.r2l),ve=ae[0],pe=ae[1];var at=new Date(Je),Fe,Ie;switch(je.pattern){case U:Ie=P,Fe=((pe<ve?7:0)+(pe-ve))*D,Je+=ve*D-(at.getUTCDay()*D+at.getUTCHours()*R+at.getUTCMinutes()*S+at.getUTCSeconds()*I+at.getUTCMilliseconds());break;case z:Ie=D,Fe=((pe<ve?24:0)+(pe-ve))*R,Je+=ve*R-(at.getUTCHours()*R+at.getUTCMinutes()*S+at.getUTCSeconds()*I+at.getUTCMilliseconds());break;default:Je=Math.min(ae[0],ae[1]),nt=Math.max(ae[0],ae[1]),Ie=nt-Je,Fe=Ie}for(var Ke=Je;Ke<nt;Ke+=Ie)_e(Ke,Ke+Fe)}else for(var Qe=n.simpleMap(je.values,H.d2c),it=0;it<Qe.length;it++)ve=Qe[it],pe=ve+je.dvalue,_e(ve,pe)}return he.sort(function(Ne,ht){return Ne.min-ht.min}),he},H.makeCalcdata=function(te,ie,ce){var ae,ve,pe,he,ye=H.type,_e=ye==="date"&&te[ie+"calendar"];if(ie in te){if(ae=te[ie],he=te._length||n.minRowLength(ae),n.isTypedArray(ae)&&(ye==="linear"||ye==="log")){if(he===ae.length)return ae;if(ae.subarray)return ae.subarray(0,he)}if(ye==="multicategory")return de(ae,he);for(ve=new Array(he),pe=0;pe<he;pe++)ve[pe]=H.d2c(ae[pe],0,_e,ce)}else{var je=ie+"0"in te?H.d2c(te[ie+"0"],0,_e):0,Je=te["d"+ie]?Number(te["d"+ie]):1;for(ae=te[{x:"y",y:"x"}[ie]],he=te._length||ae.length,ve=new Array(he),pe=0;pe<he;pe++)ve[pe]=je+pe*Je}if(H.rangebreaks)for(pe=0;pe<he;pe++)ve[pe]=H.maskBreaks(ve[pe]);return ve},H.isValidRange=function(te){return Array.isArray(te)&&te.length===2&&u(H.r2l(te[0]))&&u(H.r2l(te[1]))},H.isPtWithinRange=function(te,ie){var ce=H.c2l(te[ne],null,ie),ae=H.r2l(H.range[0]),ve=H.r2l(H.range[1]);return ae<ve?ae<=ce&&ce<=ve:ve<=ce&&ce<=ae},H._emptyCategories=function(){H._categories=[],H._categoriesMap={}},H.clearCalc=function(){var te=H._matchGroup;if(te){var ie=null,ce=null;for(var ae in te){var ve=Y[T.id2name(ae)];if(ve._categories){ie=ve._categories,ce=ve._categoriesMap;break}}ie&&ce?(H._categories=ie,H._categoriesMap=ce):H._emptyCategories()}else H._emptyCategories();if(H._initialCategories)for(var pe=0;pe<H._initialCategories.length;pe++)re(H._initialCategories[pe])},H.sortByInitialCategories=function(){var te=[];if(H._emptyCategories(),H._initialCategories)for(var ie=0;ie<H._initialCategories.length;ie++)re(H._initialCategories[ie]);te=te.concat(H._traceIndices);var ce=H._matchGroup;for(var ae in ce)if(J!==ae){var ve=Y[T.id2name(ae)];ve._categories=H._categories,ve._categoriesMap=H._categoriesMap,te=te.concat(ve._traceIndices)}return te};var K=Y._d3locale;H.type==="date"&&(H._dateFormat=K?K.timeFormat:s,H._extraFormat=Y._extraFormat),H._separators=Y.separators,H._numFormat=K?K.numberFormat:l,delete H._minDtick,delete H._forceTick0}},{"../../constants/numerical":224,"../../lib":244,"./axis_ids":295,"./constants":298,"@plotly/d3":11,"d3-time-format":14,"fast-isnumeric":17}],311:[function(e,i,o){i.exports=function(s){var n=["showexponent","showtickprefix","showticksuffix"],l=n.filter(function(h){return s[h]!==void 0}),u=function(h){return s[h]===s[l[0]]};if(l.every(u)||l.length===1)return s[l[0]]}},{}],312:[function(e,i,o){var a=e("../../lib"),s=e("../../components/color").contrast,n=e("./layout_attributes"),l=e("./show_dflt"),u=e("../array_container_defaults");i.exports=function(d,p,_,b,x){x||(x={});var E=l(d),A=_("showticklabels");if(A){var P=x.font||{},D=p.color,R=p.ticklabelposition||"",S=R.indexOf("inside")!==-1?s(x.bgColor):D&&D!==n.color.dflt?D:P.color;if(a.coerceFont(_,"tickfont",{family:P.family,size:P.size,color:S}),!x.noTicklabelstep&&b!=="multicategory"&&b!=="log"&&_("ticklabelstep"),x.noAng||_("tickangle"),b!=="category"){var I=_("tickformat");u(d,p,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:h}),p.tickformatstops.length||delete p.tickformatstops,!x.noExp&&!I&&b!=="date"&&(_("showexponent",E),_("exponentformat"),_("minexponent"),_("separatethousands"))}}};function h(v,d){function p(b,x){return a.coerce(v,d,n.tickformatstops,b,x)}var _=p("enabled");_&&(p("dtickrange"),p("value"))}},{"../../components/color":103,"../../lib":244,"../array_container_defaults":286,"./layout_attributes":304,"./show_dflt":311}],313:[function(e,i,o){var a=e("../../lib"),s=e("./layout_attributes");i.exports=function(l,u,h,v){var d=v.isMinor,p=d?l.minor||{}:l,_=d?u.minor:u,b=d?s.minor:s,x=d?"minor.":"",E=a.coerce2(p,_,b,"ticklen",d?(u.ticklen||5)*.6:void 0),A=a.coerce2(p,_,b,"tickwidth",d?u.tickwidth||1:void 0),P=a.coerce2(p,_,b,"tickcolor",(d?u.tickcolor:void 0)||_.color),D=h(x+"ticks",!d&&v.outerTicks||E||A||P?"outside":"");D||(delete _.ticklen,delete _.tickwidth,delete _.tickcolor)}},{"../../lib":244,"./layout_attributes":304}],314:[function(e,i,o){var a=e("./clean_ticks"),s=e("../../lib").isArrayOrTypedArray;i.exports=function(l,u,h,v,d){d||(d={});var p=d.isMinor,_=p?l.minor||{}:l,b=p?u.minor:u,x=p?"minor.":"";function E(M){var z=_[M];return z!==void 0?z:(b._template||{})[M]}var A=E("tick0"),P=E("dtick"),D=E("tickvals"),R=s(D)?"array":P?"linear":"auto",S=h(x+"tickmode",R);if(S==="auto")h(x+"nticks");else if(S==="linear"){var I=b.dtick=a.dtick(P,v);b.tick0=a.tick0(A,v,u.calendar,I)}else if(v!=="multicategory"){var T=h(x+"tickvals");T===void 0?b.tickmode="auto":p||h("ticktext")}}},{"../../lib":244,"./clean_ticks":297}],315:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../registry"),n=e("../../lib"),l=e("../../components/drawing"),u=e("./axes");i.exports=function(v,d,p,_){var b=v._fullLayout;if(d.length===0){u.redrawComponents(v);return}function x(z){var U=z.xaxis,F=z.yaxis;b._defs.select("#"+z.clipId+"> rect").call(l.setTranslate,0,0).call(l.setScale,1,1),z.plot.call(l.setTranslate,U._offset,F._offset).call(l.setScale,1,1);var V=z.plot.selectAll(".scatterlayer .trace");V.selectAll(".point").call(l.setPointGroupScale,1,1),V.selectAll(".textpoint").call(l.setTextPointsScale,1,1),V.call(l.hideOutsideRangePoints,z)}function E(z,U){var F=z.plotinfo,V=F.xaxis,j=F.yaxis,H=V._length,Y=j._length,J=!!z.xr1,ne=!!z.yr1,q=[];if(J){var we=n.simpleMap(z.xr0,V.r2l),ee=n.simpleMap(z.xr1,V.r2l),X=we[1]-we[0],re=ee[1]-ee[0];q[0]=(we[0]*(1-U)+U*ee[0]-we[0])/(we[1]-we[0])*H,q[2]=H*(1-U+U*re/X),V.range[0]=V.l2r(we[0]*(1-U)+U*ee[0]),V.range[1]=V.l2r(we[1]*(1-U)+U*ee[1])}else q[0]=0,q[2]=H;if(ne){var de=n.simpleMap(z.yr0,j.r2l),me=n.simpleMap(z.yr1,j.r2l),xe=de[1]-de[0],He=me[1]-me[0];q[1]=(de[1]*(1-U)+U*me[1]-de[1])/(de[0]-de[1])*Y,q[3]=Y*(1-U+U*He/xe),j.range[0]=V.l2r(de[0]*(1-U)+U*me[0]),j.range[1]=j.l2r(de[1]*(1-U)+U*me[1])}else q[1]=0,q[3]=Y;u.drawOne(v,V,{skipTitle:!0}),u.drawOne(v,j,{skipTitle:!0}),u.redrawComponents(v,[V._id,j._id]);var Re=J?H/q[2]:1,Ee=ne?Y/q[3]:1,ke=J?q[0]:0,$=ne?q[1]:0,le=J?q[0]/q[2]*H:0,K=ne?q[1]/q[3]*Y:0,te=V._offset-le,ie=j._offset-K;F.clipRect.call(l.setTranslate,ke,$).call(l.setScale,1/Re,1/Ee),F.plot.call(l.setTranslate,te,ie).call(l.setScale,Re,Ee),l.setPointGroupScale(F.zoomScalePts,1/Re,1/Ee),l.setTextPointsScale(F.zoomScaleTxt,1/Re,1/Ee)}var A;_&&(A=_());function P(){for(var z={},U=0;U<d.length;U++){var F=d[U],V=F.plotinfo.xaxis,j=F.plotinfo.yaxis;F.xr1&&(z[V._name+".range"]=F.xr1.slice()),F.yr1&&(z[j._name+".range"]=F.yr1.slice())}return A&&A(),s.call("relayout",v,z).then(function(){for(var H=0;H<d.length;H++)x(d[H].plotinfo)})}function D(){for(var z={},U=0;U<d.length;U++){var F=d[U],V=F.plotinfo.xaxis,j=F.plotinfo.yaxis;F.xr0&&(z[V._name+".range"]=F.xr0.slice()),F.yr0&&(z[j._name+".range"]=F.yr0.slice())}return s.call("relayout",v,z).then(function(){for(var H=0;H<d.length;H++)x(d[H].plotinfo)})}var R,S,I,T=a.ease(p.easing);v._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(I),I=null,D()});function M(){S=Date.now();for(var z=Math.min(1,(S-R)/p.duration),U=T(z),F=0;F<d.length;F++)E(d[F],U);S-R>p.duration?(P(),I=window.cancelAnimationFrame(M)):I=window.requestAnimationFrame(M)}return R=Date.now(),I=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":125,"../../lib":244,"../../registry":327,"./axes":291,"@plotly/d3":11}],316:[function(e,i,o){var a=e("../../registry").traceIs,s=e("./axis_autotype");i.exports=function(d,p,_,b){_("autotypenumbers",b.autotypenumbersDflt);var x=_("type",(b.splomStash||{}).type);x==="-"&&(n(p,b.data),p.type==="-"?p.type="linear":d.type=p.type)};function n(v,d){if(v.type==="-"){var p=v._id,_=p.charAt(0),b;p.indexOf("scene")!==-1&&(p=_);var x=l(d,p,_);if(!!x){if(x.type==="histogram"&&_==={v:"y",h:"x"}[x.orientation||"v"]){v.type="linear";return}var E=_+"calendar",A=x[E],P={noMultiCategory:!a(x,"cartesian")||a(x,"noMultiCategory")};if(x.type==="box"&&x._hasPreCompStats&&_==={h:"x",v:"y"}[x.orientation||"v"]&&(P.noMultiCategory=!0),P.autotypenumbers=v.autotypenumbers,h(x,_)){var D=u(x),R=[];for(b=0;b<d.length;b++){var S=d[b];!a(S,"box-violin")||(S[_+"axis"]||_)!==p||(S[D]!==void 0?R.push(S[D][0]):S.name!==void 0?R.push(S.name):R.push("text"),S[E]!==A&&(A=void 0))}v.type=s(R,A,P)}else if(x.type==="splom"){var I=x.dimensions,T=I[x._axesDim[p]];T.visible&&(v.type=s(T.values,A,P))}else v.type=s(x[_]||[x[_+"0"]],A,P)}}}function l(v,d,p){for(var _=0;_<v.length;_++){var b=v[_];if(b.type==="splom"&&b._length>0&&(b["_"+p+"axes"]||{})[d])return b;if((b[p+"axis"]||p)===d){if(h(b,p))return b;if((b[p]||[]).length||b[p+"0"])return b}}}function u(v){return{v:"x",h:"y"}[v.orientation||"v"]}function h(v,d){var p=u(v),_=a(v,"box-violin"),b=a(v._fullInput||{},"candlestick");return _&&!b&&d===p&&v[p]===void 0&&v[p+"0"]===void 0}},{"../../registry":327,"./axis_autotype":292}],317:[function(e,i,o){var a=e("../registry"),s=e("../lib");o.manageCommandObserver=function(d,p,_,b){var x={},E=!0;p&&p._commandObserver&&(x=p._commandObserver),x.cache||(x.cache={}),x.lookupTable={};var A=o.hasSimpleAPICommandBindings(d,_,x.lookupTable);if(p&&p._commandObserver){if(A)return x;if(p._commandObserver.remove)return p._commandObserver.remove(),p._commandObserver=null,x}if(A){n(d,A,x.cache),x.check=function(){if(!!E){var S=n(d,A,x.cache);return S.changed&&b&&x.lookupTable[S.value]!==void 0&&(x.disable(),Promise.resolve(b({value:S.value,type:A.type,prop:A.prop,traces:A.traces,index:x.lookupTable[S.value]})).then(x.enable,x.enable)),S.changed}};for(var P=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],D=0;D<P.length;D++)d._internalOn(P[D],x.check);x.remove=function(){for(var R=0;R<P.length;R++)d._removeInternalListener(P[R],x.check)}}else s.log("Unable to automatically bind plot updates to API command"),x.lookupTable={},x.remove=function(){};return x.disable=function(){E=!1},x.enable=function(){E=!0},p&&(p._commandObserver=x),x},o.hasSimpleAPICommandBindings=function(d,p,_){var b,x=p.length,E;for(b=0;b<x;b++){var A,P=p[b],D=P.method,R=P.args;if(Array.isArray(R)||(R=[]),!D)return!1;var S=o.computeAPICommandBindings(d,D,R);if(S.length!==1)return!1;if(!E)E=S[0],Array.isArray(E.traces)&&E.traces.sort();else{if(A=S[0],A.type!==E.type||A.prop!==E.prop)return!1;if(Array.isArray(E.traces))if(Array.isArray(A.traces)){A.traces.sort();for(var I=0;I<E.traces.length;I++)if(E.traces[I]!==A.traces[I])return!1}else return!1;else if(A.prop!==E.prop)return!1}A=S[0];var T=A.value;if(Array.isArray(T))if(T.length===1)T=T[0];else return!1;_&&(_[T]=b)}return E};function n(d,p,_){var b,x,E,A=!1;if(p.type==="data")b=d._fullData[p.traces!==null?p.traces[0]:0];else if(p.type==="layout")b=d._fullLayout;else return!1;return x=s.nestedProperty(b,p.prop).get(),E=_[p.type]=_[p.type]||{},E.hasOwnProperty(p.prop)&&E[p.prop]!==x&&(A=!0),E[p.prop]=x,{changed:A,value:x}}o.executeAPICommand=function(d,p,_){if(p==="skip")return Promise.resolve();var b=a.apiMethodRegistry[p],x=[d];Array.isArray(_)||(_=[]);for(var E=0;E<_.length;E++)x.push(_[E]);return b.apply(null,x).catch(function(A){return s.warn("API call to Plotly."+p+" rejected.",A),Promise.reject(A)})},o.computeAPICommandBindings=function(d,p,_){var b;switch(Array.isArray(_)||(_=[]),p){case"restyle":b=h(d,_);break;case"relayout":b=u(d,_);break;case"update":b=h(d,[_[0],_[2]]).concat(u(d,[_[1]]));break;case"animate":b=l(d,_);break;default:b=[]}return b};function l(d,p){return Array.isArray(p[0])&&p[0].length===1&&["string","number"].indexOf(typeof p[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:p[0][0].toString()}]:[]}function u(d,p){var _=[],b=p[0],x={};if(typeof b=="string")x[b]=p[1];else if(s.isPlainObject(b))x=b;else return _;return v(x,function(E,A,P){_.push({type:"layout",prop:E,value:P})},"",0),_}function h(d,p){var _,b,x,E,A=[];if(b=p[0],x=p[1],_=p[2],E={},typeof b=="string")E[b]=x;else if(s.isPlainObject(b))E=b,_===void 0&&(_=x);else return A;return _===void 0&&(_=null),v(E,function(P,D,R){var S,I;if(Array.isArray(R)){I=R.slice();var T=Math.min(I.length,d.data.length);_&&(T=Math.min(T,_.length)),S=[];for(var M=0;M<T;M++)S[M]=_?_[M]:M}else I=R,S=_?_.slice():null;if(S===null)Array.isArray(I)&&(I=I[0]);else if(Array.isArray(S)){if(!Array.isArray(I)){var z=I;I=[];for(var U=0;U<S.length;U++)I[U]=z}I.length=Math.min(S.length,I.length)}A.push({type:"data",prop:P,traces:S,value:I})},"",0),A}function v(d,p,_,b){Object.keys(d).forEach(function(x){var E=d[x];if(x[0]!=="_"){var A=_+(b>0?".":"")+x;s.isPlainObject(E)?v(E,p,A,b+1):p(A,x,E)}})}},{"../lib":244,"../registry":327}],318:[function(e,i,o){var a=e("../lib/extend").extendFlat;o.attributes=function(s,n){s=s||{},n=n||{};var l={valType:"info_array",editType:s.editType,items:[{valType:"number",min:0,max:1,editType:s.editType},{valType:"number",min:0,max:1,editType:s.editType}],dflt:[0,1]};s.name&&s.name+"",s.trace,n.description&&""+n.description;var u={x:a({},l,{}),y:a({},l,{}),editType:s.editType};return s.noGridCell||(u.row={valType:"integer",min:0,dflt:0,editType:s.editType},u.column={valType:"integer",min:0,dflt:0,editType:s.editType}),u},o.defaults=function(s,n,l,u){var h=u&&u.x||[0,1],v=u&&u.y||[0,1],d=n.grid;if(d){var p=l("domain.column");p!==void 0&&(p<d.columns?h=d._domains.x[p]:delete s.domain.column);var _=l("domain.row");_!==void 0&&(_<d.rows?v=d._domains.y[_]:delete s.domain.row)}var b=l("domain.x",h),x=l("domain.y",v);b[0]<b[1]||(s.domain.x=h.slice()),x[0]<x[1]||(s.domain.y=v.slice())}},{"../lib/extend":238}],319:[function(e,i,o){i.exports=function(a){var s=a.editType,n=a.colorEditType;n===void 0&&(n=s);var l={family:{valType:"string",noBlank:!0,strict:!0,editType:s},size:{valType:"number",min:1,editType:s},color:{valType:"color",editType:n},editType:s};return a.autoSize&&(l.size.dflt="auto"),a.autoColor&&(l.color.dflt="auto"),a.arrayOk&&(l.family.arrayOk=!0,l.size.arrayOk=!0,l.color.arrayOk=!0),l}},{}],320:[function(e,i,o){i.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],321:[function(e,i,o){var a=e("../registry"),s=e("./cartesian/constants").SUBPLOT_PATTERN;o.getSubplotCalcData=function(n,l,u){var h=a.subplotsRegistry[l];if(!h)return[];for(var v=h.attr,d=[],p=0;p<n.length;p++){var _=n[p],b=_[0].trace;b[v]===u&&d.push(_)}return d},o.getModuleCalcData=function(n,l){var u=[],h=[],v;if(typeof l=="string"?v=a.getModule(l).plot:typeof l=="function"?v=l:v=l.plot,!v)return[u,n];for(var d=0;d<n.length;d++){var p=n[d],_=p[0].trace;_.visible!==!0||_._length===0||(_._module.plot===v?u.push(p):h.push(p))}return[u,h]},o.getSubplotData=function(l,u,h){if(!a.subplotsRegistry[u])return[];var v=a.subplotsRegistry[u].attr,d=[],p,_,b;if(u==="gl2d"){var x=h.match(s);_="x"+x[1],b="y"+x[2]}for(var E=0;E<l.length;E++)p=l[E],u==="gl2d"&&a.traceIs(p,"gl2d")?p[v[0]]===_&&p[v[1]]===b&&d.push(p):p[v]===h&&d.push(p);return d}},{"../registry":327,"./cartesian/constants":298}],322:[function(e,i,o){function a(n,l){var u=[0,0,0,0],h,v;for(h=0;h<4;++h)for(v=0;v<4;++v)u[v]+=n[4*h+v]*l[h];return u}function s(n,l){var u=a(n.projection,a(n.view,a(n.model,[l[0],l[1],l[2],1])));return u}i.exports=s},{}],323:[function(e,i,o){var a=e("./font_attributes"),s=e("./animation_attributes"),n=e("../components/color/attributes"),l=e("../components/shapes/draw_newshape/attributes"),u=e("../components/selections/draw_newselection/attributes"),h=e("./pad_attributes"),v=e("../lib/extend").extendFlat,d=a({editType:"calc"});d.family.dflt='"Open Sans", verdana, arial, sans-serif',d.size.dflt=12,d.color.dflt=n.defaultLine,i.exports={font:d,title:{text:{valType:"string",editType:"layoutstyle"},font:a({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:v(h({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:n.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:l.newshape,activeshape:l.activeshape,newselection:u.newselection,activeselection:u.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:v({},s.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:a({editType:"layoutstyle"})}}},{"../components/color/attributes":102,"../components/selections/draw_newselection/attributes":187,"../components/shapes/draw_newshape/attributes":199,"../lib/extend":238,"./animation_attributes":285,"./font_attributes":319,"./pad_attributes":324}],324:[function(e,i,o){i.exports=function(a){var s=a.editType;return{t:{valType:"number",dflt:0,editType:s},r:{valType:"number",dflt:0,editType:s},b:{valType:"number",dflt:0,editType:s},l:{valType:"number",dflt:0,editType:s},editType:s}}},{}],325:[function(e,i,o){var a=e("@plotly/d3"),s=e("d3-time-format").timeFormatLocale,n=e("d3-format").formatLocale,l=e("fast-isnumeric"),u=e("../registry"),h=e("../plot_api/plot_schema"),v=e("../plot_api/plot_template"),d=e("../lib"),p=e("../components/color"),_=e("../constants/numerical").BADNUM,b=e("./cartesian/axis_ids"),x=e("../components/shapes/handle_outline").clearOutline,E=e("./animation_attributes"),A=e("./frame_attributes"),P=e("../plots/get_data").getModuleCalcData,D=d.relinkPrivateKeys,R=d._,S=i.exports={};d.extendFlat(S,u),S.attributes=e("./attributes"),S.attributes.type.values=S.allTypes,S.fontAttrs=e("./font_attributes"),S.layoutAttributes=e("./layout_attributes"),S.fontWeight="normal";var I=S.transformsRegistry,T=e("./command");S.executeAPICommand=T.executeAPICommand,S.computeAPICommandBindings=T.computeAPICommandBindings,S.manageCommandObserver=T.manageCommandObserver,S.hasSimpleAPICommandBindings=T.hasSimpleAPICommandBindings,S.redrawText=function($){return $=d.getGraphDiv($),new Promise(function(le){setTimeout(function(){!$._fullLayout||(u.getComponentMethod("annotations","draw")($),u.getComponentMethod("legend","draw")($),u.getComponentMethod("colorbar","draw")($),le(S.previousPromises($)))},300)})},S.resize=function($){$=d.getGraphDiv($);var le,K=new Promise(function(te,ie){(!$||d.isHidden($))&&ie(new Error("Resize must be passed a displayed plot div element.")),$._redrawTimer&&clearTimeout($._redrawTimer),$._resolveResize&&(le=$._resolveResize),$._resolveResize=te,$._redrawTimer=setTimeout(function(){if(!$.layout||$.layout.width&&$.layout.height||d.isHidden($)){te($);return}delete $.layout.width,delete $.layout.height;var ce=$.changed;$.autoplay=!0,u.call("relayout",$,{autosize:!0}).then(function(){$.changed=ce,$._resolveResize===te&&(delete $._resolveResize,te($))})},100)});return le&&le(K),K},S.previousPromises=function($){if(($._promises||[]).length)return Promise.all($._promises).then(function(){$._promises=[]})},S.addLinks=function($){if(!(!$._context.showLink&&!$._context.showSources)){var le=$._fullLayout,K=d.ensureSingle(le._paper,"text","js-plot-link-container",function(pe){pe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:p.defaultLine,"pointer-events":"all"}).each(function(){var he=a.select(this);he.append("tspan").classed("js-link-to-tool",!0),he.append("tspan").classed("js-link-spacer",!0),he.append("tspan").classed("js-sourcelinks",!0)})}),te=K.node(),ie={y:le._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=le.width-20?(ie["text-anchor"]="start",ie.x=5):(ie["text-anchor"]="end",ie.x=le._paper.attr("width")-7),K.attr(ie);var ce=K.select(".js-link-to-tool"),ae=K.select(".js-link-spacer"),ve=K.select(".js-sourcelinks");$._context.showSources&&$._context.showSources($),$._context.showLink&&M($,ce),ae.text(ce.text()&&ve.text()?" - ":"")}};function M($,le){le.text("");var K=le.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text($._context.linkText+" "+String.fromCharCode(187));if($._context.sendData)K.on("click",function(){S.sendDataToCloud($)});else{var te=window.location.pathname.split("/"),ie=window.location.search;K.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+te[2].split(".")[0]+"/"+te[1]+ie})}}S.sendDataToCloud=function($){var le=(window.PLOTLYENV||{}).BASE_URL||$._context.plotlyServerURL;if(!!le){$.emit("plotly_beforeexport");var K=a.select($).append("div").attr("id","hiddenform").style("display","none"),te=K.append("form").attr({action:le+"/external",method:"post",target:"_blank"}),ie=te.append("input").attr({type:"text",name:"data"});return ie.node().value=S.graphJson($,!1,"keepdata"),te.node().submit(),K.remove(),$.emit("plotly_afterexport"),!1}};var z=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],U=["year","month","dayMonth","dayMonthYear"];S.supplyDefaults=function($,le){var K=le&&le.skipUpdateCalc,te=$._fullLayout||{};if(te._skipDefaults){delete te._skipDefaults;return}var ie=$._fullLayout={},ce=$.layout||{},ae=$._fullData||[],ve=$._fullData=[],pe=$.data||[],he=$.calcdata||[],ye=$._context||{},_e;$._transitionData||S.createTransitionData($),ie._dfltTitle={plot:R($,"Click to enter Plot title"),x:R($,"Click to enter X axis title"),y:R($,"Click to enter Y axis title"),colorbar:R($,"Click to enter Colorscale title"),annotation:R($,"new text")},ie._traceWord=R($,"trace");var je=j($,z);if(ie._mapboxAccessToken=ye.mapboxAccessToken,te._initialAutoSizeIsDone){var Je=te.width,nt=te.height;S.supplyLayoutGlobalDefaults(ce,ie,je),ce.width||(ie.width=Je),ce.height||(ie.height=nt),S.sanitizeMargins(ie)}else{S.supplyLayoutGlobalDefaults(ce,ie,je);var at=!ce.width||!ce.height,Fe=ie.autosize,Ie=ye.autosizable,Ke=at&&(Fe||Ie);Ke?S.plotAutoSize($,ce,ie):at&&S.sanitizeMargins(ie),!Fe&&at&&(ce.width=ie.width,ce.height=ie.height)}ie._d3locale=H(je,ie.separators),ie._extraFormat=j($,U),ie._initialAutoSizeIsDone=!0,ie._dataLength=pe.length,ie._modules=[],ie._visibleModules=[],ie._basePlotModules=[];var Qe=ie._subplots=V(),it=ie._splomAxes={x:{},y:{}},Ne=ie._splomSubplots={};ie._splomGridDflt={},ie._scatterStackOpts={},ie._firstScatter={},ie._alignmentOpts={},ie._colorAxes={},ie._requestRangeslider={},ie._traceUids=F(ae,pe),ie._globalTransforms=($._context||{}).globalTransforms,S.supplyDataDefaults(pe,ve,ce,ie);var ht=Object.keys(it.x),Tt=Object.keys(it.y);if(ht.length>1&&Tt.length>1){for(u.getComponentMethod("grid","sizeDefaults")(ce,ie),_e=0;_e<ht.length;_e++)d.pushUnique(Qe.xaxis,ht[_e]);for(_e=0;_e<Tt.length;_e++)d.pushUnique(Qe.yaxis,Tt[_e]);for(var Xt in Ne)d.pushUnique(Qe.cartesian,Xt)}if(ie._has=S._hasPlotType.bind(ie),ae.length===ve.length)for(_e=0;_e<ve.length;_e++)D(ve[_e],ae[_e]);S.supplyLayoutModuleDefaults(ce,ie,ve,$._transitionData);var Nt=ie._visibleModules,Mt=[];for(_e=0;_e<Nt.length;_e++){var Vt=Nt[_e].crossTraceDefaults;Vt&&d.pushUnique(Mt,Vt)}for(_e=0;_e<Mt.length;_e++)Mt[_e](ve,ie);ie._hasOnlyLargeSploms=ie._basePlotModules.length===1&&ie._basePlotModules[0].name==="splom"&&ht.length>15&&Tt.length>15&&ie.shapes.length===0&&ie.images.length===0,S.linkSubplots(ve,ie,ae,te),S.cleanPlot(ve,ie,ae,te);var Yt=!!(te._has&&te._has("gl2d")),cr=!!(ie._has&&ie._has("gl2d")),Nr=!!(te._has&&te._has("cartesian")),er=!!(ie._has&&ie._has("cartesian")),Wt=Nr||Yt,dr=er||cr;Wt&&!dr?te._bgLayer.remove():dr&&!Wt&&(ie._shouldCreateBgLayer=!0),te._zoomlayer&&!$._dragging&&x({_fullLayout:te}),Y(ve,ie),D(ie,te),u.getComponentMethod("colorscale","crossTraceDefaults")(ve,ie),ie._preGUI||(ie._preGUI={}),ie._tracePreGUI||(ie._tracePreGUI={});var zr=ie._tracePreGUI,Dr={},$e;for($e in zr)Dr[$e]="old";for(_e=0;_e<ve.length;_e++)$e=ve[_e]._fullInput.uid,Dr[$e]||(zr[$e]={}),Dr[$e]="new";for($e in Dr)Dr[$e]==="old"&&delete zr[$e];ee(ie),u.getComponentMethod("rangeslider","makeData")(ie),!K&&he.length===ve.length&&S.supplyDefaultsUpdateCalc(he,ve)},S.supplyDefaultsUpdateCalc=function($,le){for(var K=0;K<le.length;K++){var te=le[K],ie=($[K]||[])[0];if(ie&&ie.trace){var ce=ie.trace;if(ce._hasCalcTransform){var ae=ce._arrayAttrs,ve,pe,he;for(ve=0;ve<ae.length;ve++)pe=ae[ve],he=d.nestedProperty(ce,pe).get().slice(),d.nestedProperty(te,pe).set(he)}ie.trace=te}}};function F($,le){var K=le.length,te=[],ie,ce;for(ie=0;ie<$.length;ie++){var ae=$[ie]._fullInput;ae!==ce&&te.push(ae),ce=ae}var ve=te.length,pe=new Array(K),he={};function ye(Je,nt){pe[nt]=Je,he[Je]=1}function _e(Je,nt){if(Je&&typeof Je=="string"&&!he[Je])return ye(Je,nt),!0}for(ie=0;ie<K;ie++){var je=le[ie].uid;typeof je=="number"&&(je=String(je)),!_e(je,ie)&&(ie<ve&&_e(te[ie].uid,ie)||ye(d.randstr(he),ie))}return pe}function V(){var $=u.collectableSubplotTypes,le={},K,te;if(!$){$=[];var ie=u.subplotsRegistry;for(var ce in ie){var ae=ie[ce],ve=ae.attr;if(ve&&($.push(ce),Array.isArray(ve)))for(te=0;te<ve.length;te++)d.pushUnique($,ve[te])}}for(K=0;K<$.length;K++)le[$[K]]=[];return le}function j($,le){var K=$._context.locale;K||(K="en-US");var te=!1,ie={};function ce(_e){for(var je=!0,Je=0;Je<le.length;Je++){var nt=le[Je];ie[nt]||(_e[nt]?ie[nt]=_e[nt]:je=!1)}je&&(te=!0)}for(var ae=0;ae<2;ae++){for(var ve=$._context.locales,pe=0;pe<2;pe++){var he=(ve[K]||{}).format;if(he&&(ce(he),te))break;ve=u.localeRegistry}var ye=K.split("-")[0];if(te||ye===K)break;K=ye}return te||ce(u.localeRegistry.en.format),ie}function H($,le){return $.decimal=le.charAt(0),$.thousands=le.charAt(1),{numberFormat:function(K){try{K=n($).format(d.adjustFormat(K))}catch{return d.warnBadFormat(K),d.noFormat}return K},timeFormat:s($).utcFormat}}function Y($,le){var K,te=[];le.meta&&(K=le._meta={meta:le.meta,layout:{meta:le.meta}});for(var ie=0;ie<$.length;ie++){var ce=$[ie];ce.meta?te[ce.index]=ce._meta={meta:ce.meta}:le.meta&&(ce._meta={meta:le.meta}),le.meta&&(ce._meta.layout={meta:le.meta})}te.length&&(K||(K=le._meta={}),K.data=te)}S.createTransitionData=function($){$._transitionData||($._transitionData={}),$._transitionData._frames||($._transitionData._frames=[]),$._transitionData._frameHash||($._transitionData._frameHash={}),$._transitionData._counter||($._transitionData._counter=0),$._transitionData._interruptCallbacks||($._transitionData._interruptCallbacks=[])},S._hasPlotType=function($){var le,K=this._basePlotModules||[];for(le=0;le<K.length;le++)if(K[le].name===$)return!0;var te=this._modules||[];for(le=0;le<te.length;le++){var ie=te[le].name;if(ie===$)return!0;var ce=u.modules[ie];if(ce&&ce.categories[$])return!0}return!1},S.cleanPlot=function($,le,K,te){var ie,ce,ae=te._basePlotModules||[];for(ie=0;ie<ae.length;ie++){var ve=ae[ie];ve.clean&&ve.clean($,le,K,te)}var pe=te._has&&te._has("gl"),he=le._has&&le._has("gl");pe&&!he&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var ye=!!te._infolayer;e:for(ie=0;ie<K.length;ie++){var _e=K[ie],je=_e.uid;for(ce=0;ce<$.length;ce++){var Je=$[ce];if(je===Je.uid)continue e}ye&&te._infolayer.select(".cb"+je).remove()}},S.linkSubplots=function($,le,K,te){var ie,ce,ae=te._plots||{},ve=le._plots={},pe=le._subplots,he={_fullData:$,_fullLayout:le},ye=pe.cartesian.concat(pe.gl2d||[]);for(ie=0;ie<ye.length;ie++){var _e=ye[ie],je=ae[_e],Je=b.getFromId(he,_e,"x"),nt=b.getFromId(he,_e,"y"),at;for(je?at=ve[_e]=je:(at=ve[_e]={},at.id=_e),Je._counterAxes.push(nt._id),nt._counterAxes.push(Je._id),Je._subplotsWith.push(_e),nt._subplotsWith.push(_e),at.xaxis=Je,at.yaxis=nt,at._hasClipOnAxisFalse=!1,ce=0;ce<$.length;ce++){var Fe=$[ce];if(Fe.xaxis===at.xaxis._id&&Fe.yaxis===at.yaxis._id&&Fe.cliponaxis===!1){at._hasClipOnAxisFalse=!0;break}}}var Ie=b.list(he,null,!0),Ke;for(ie=0;ie<Ie.length;ie++){Ke=Ie[ie];var Qe=null;Ke.overlaying&&(Qe=b.getFromId(he,Ke.overlaying),Qe&&Qe.overlaying&&(Ke.overlaying=!1,Qe=null)),Ke._mainAxis=Qe||Ke,Qe&&(Ke.domain=Qe.domain.slice()),Ke._anchorAxis=Ke.anchor==="free"?null:b.getFromId(he,Ke.anchor)}for(ie=0;ie<Ie.length;ie++)if(Ke=Ie[ie],Ke._counterAxes.sort(b.idSort),Ke._subplotsWith.sort(d.subplotSort),Ke._mainSubplot=J(Ke,le),Ke._counterAxes.length&&(Ke.spikemode&&Ke.spikemode.indexOf("across")!==-1||Ke.automargin&&Ke.mirror&&Ke.anchor!=="free"||u.getComponentMethod("rangeslider","isVisible")(Ke))){var it=1,Ne=0;for(ce=0;ce<Ke._counterAxes.length;ce++){var ht=b.getFromId(he,Ke._counterAxes[ce]);it=Math.min(it,ht.domain[0]),Ne=Math.max(Ne,ht.domain[1])}it<Ne&&(Ke._counterDomainMin=it,Ke._counterDomainMax=Ne)}};function J($,le){var K={_fullLayout:le},te=$._id.charAt(0)==="x",ie=$._mainAxis._anchorAxis,ce="",ae="",ve="";if(ie&&(ve=ie._mainAxis._id,ce=te?$._id+ve:ve+$._id),!ce||!le._plots[ce]){ce="";for(var pe=$._counterAxes,he=0;he<pe.length;he++){var ye=pe[he],_e=te?$._id+ye:ye+$._id;ae||(ae=_e);var je=b.getFromId(K,ye);if(ve&&je.overlaying===ve){ce=_e;break}}}return ce||ae}S.clearExpandedTraceDefaultColors=function($){var le,K,te;function ie(ae,ve,pe,he){K[he]=ve,K.length=he+1,ae.valType==="color"&&ae.dflt===void 0&&le.push(K.join("."))}for(K=[],le=$._module._colorAttrs,le||($._module._colorAttrs=le=[],h.crawl($._module.attributes,ie)),te=0;te<le.length;te++){var ce=d.nestedProperty($,"_input."+le[te]);ce.get()||d.nestedProperty($,le[te]).set(null)}},S.supplyDataDefaults=function($,le,K,te){var ie=te._modules,ce=te._visibleModules,ae=te._basePlotModules,ve=0,pe=0,he,ye,_e;te._transformModules=[];function je(Tt){le.push(Tt);var Xt=Tt._module;!Xt||(d.pushUnique(ie,Xt),Tt.visible===!0&&d.pushUnique(ce,Xt),d.pushUnique(ae,Tt._module.basePlotModule),ve++,Tt._input.visible!==!1&&pe++)}var Je={},nt=[],at=(K.template||{}).data||{},Fe=v.traceTemplater(at);for(he=0;he<$.length;he++){if(_e=$[he],ye=Fe.newTrace(_e),ye.uid=te._traceUids[he],S.supplyTraceDefaults(_e,ye,pe,te,he),ye.index=he,ye._input=_e,ye._expandedIndex=ve,ye.transforms&&ye.transforms.length)for(var Ie=_e.visible!==!1&&ye.visible===!1,Ke=q(ye,le,K,te),Qe=0;Qe<Ke.length;Qe++){var it=Ke[Qe],Ne={_template:ye._template,type:ye.type,uid:ye.uid+Qe};Ie&&it.visible===!1&&delete it.visible,S.supplyTraceDefaults(it,Ne,ve,te,he),D(Ne,it),Ne.index=he,Ne._input=_e,Ne._fullInput=ye,Ne._expandedIndex=ve,Ne._expandedInput=it,je(Ne)}else ye._fullInput=ye,ye._expandedInput=ye,je(ye);u.traceIs(ye,"carpetAxis")&&(Je[ye.carpet]=ye),u.traceIs(ye,"carpetDependent")&&nt.push(he)}for(he=0;he<nt.length;he++)if(ye=le[nt[he]],!!ye.visible){var ht=Je[ye.carpet];if(ye._carpet=ht,!ht||!ht.visible){ye.visible=!1;continue}ye.xaxis=ht.xaxis,ye.yaxis=ht.yaxis}},S.supplyAnimationDefaults=function($){$=$||{};var le,K={};function te(ie,ce){return d.coerce($||{},K,E,ie,ce)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray($.frame))for(K.frame=[],le=0;le<$.frame.length;le++)K.frame[le]=S.supplyAnimationFrameDefaults($.frame[le]||{});else K.frame=S.supplyAnimationFrameDefaults($.frame||{});if(Array.isArray($.transition))for(K.transition=[],le=0;le<$.transition.length;le++)K.transition[le]=S.supplyAnimationTransitionDefaults($.transition[le]||{});else K.transition=S.supplyAnimationTransitionDefaults($.transition||{});return K},S.supplyAnimationFrameDefaults=function($){var le={};function K(te,ie){return d.coerce($||{},le,E.frame,te,ie)}return K("duration"),K("redraw"),le},S.supplyAnimationTransitionDefaults=function($){var le={};function K(te,ie){return d.coerce($||{},le,E.transition,te,ie)}return K("duration"),K("easing"),le},S.supplyFrameDefaults=function($){var le={};function K(te,ie){return d.coerce($,le,A,te,ie)}return K("group"),K("name"),K("traces"),K("baseframe"),K("data"),K("layout"),le},S.supplyTraceDefaults=function($,le,K,te,ie){var ce=te.colorway||p.defaults,ae=ce[K%ce.length],ve;function pe(Ke,Qe){return d.coerce($,le,S.attributes,Ke,Qe)}var he=pe("visible");pe("type"),pe("name",te._traceWord+" "+ie),pe("uirevision",te.uirevision);var ye=S.getModule(le);if(le._module=ye,ye){var _e=ye.basePlotModule,je=_e.attr,Je=_e.attributes;if(je&&Je){var nt=te._subplots,at="";if(he||_e.name!=="gl2d"){if(Array.isArray(je))for(ve=0;ve<je.length;ve++){var Fe=je[ve],Ie=d.coerce($,le,Je,Fe);nt[Fe]&&d.pushUnique(nt[Fe],Ie),at+=Ie}else at=d.coerce($,le,Je,je);nt[_e.name]&&d.pushUnique(nt[_e.name],at)}}}return he&&(pe("customdata"),pe("ids"),pe("meta"),u.traceIs(le,"showLegend")?(d.coerce($,le,ye.attributes.showlegend?ye.attributes:S.attributes,"showlegend"),pe("legendwidth"),pe("legendgroup"),pe("legendgrouptitle.text"),pe("legendrank"),le._dfltShowLegend=!0):le._dfltShowLegend=!1,ye&&ye.supplyDefaults($,le,ae,te),u.traceIs(le,"noOpacity")||pe("opacity"),u.traceIs(le,"notLegendIsolatable")&&(le.visible=!!le.visible),u.traceIs(le,"noHover")||(le.hovertemplate||d.coerceHoverinfo($,le,te),le.type!=="parcats"&&u.getComponentMethod("fx","supplyDefaults")($,le,ae,te)),ye&&ye.selectPoints&&pe("selectedpoints"),S.supplyTransformDefaults($,le,te)),le};function ne($){var le=$.transforms;if(Array.isArray(le)&&le.length)for(var K=0;K<le.length;K++){var te=le[K],ie=te._module||I[te.type];if(ie&&ie.makesData)return!0}return!1}S.hasMakesDataTransform=ne,S.supplyTransformDefaults=function($,le,K){if(!!(le._length||ne($))){var te=K._globalTransforms||[],ie=K._transformModules||[];if(!(!Array.isArray($.transforms)&&te.length===0))for(var ce=$.transforms||[],ae=te.concat(ce),ve=le.transforms=[],pe=0;pe<ae.length;pe++){var he=ae[pe],ye=he.type,_e=I[ye],je,Je=!(he._module&&he._module===_e),nt=_e&&typeof _e.transform=="function";_e||d.warn("Unrecognized transform type "+ye+"."),_e&&_e.supplyDefaults&&(Je||nt)?(je=_e.supplyDefaults(he,le,K,$),je.type=ye,je._module=_e,d.pushUnique(ie,_e)):je=d.extendFlat({},he),ve.push(je)}}};function q($,le,K,te){for(var ie=$.transforms,ce=[$],ae=0;ae<ie.length;ae++){var ve=ie[ae],pe=I[ve.type];pe&&pe.transform&&(ce=pe.transform(ce,{transform:ve,fullTrace:$,fullData:le,layout:K,fullLayout:te,transformIndex:ae}))}return ce}S.supplyLayoutGlobalDefaults=function($,le,K){function te(he,ye){return d.coerce($,le,S.layoutAttributes,he,ye)}var ie=$.template;d.isPlainObject(ie)&&(le.template=ie,le._template=ie.layout,le._dataTemplate=ie.data),te("autotypenumbers");var ce=d.coerceFont(te,"font"),ae=ce.size;d.coerceFont(te,"title.font",d.extendFlat({},ce,{size:Math.round(ae*1.4)})),te("title.text",le._dfltTitle.plot),te("title.xref"),te("title.yref"),te("title.x"),te("title.y"),te("title.xanchor"),te("title.yanchor"),te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var ve=te("uniformtext.mode");ve&&te("uniformtext.minsize"),te("autosize",!($.width&&$.height)),te("width"),te("height"),te("minreducedwidth"),te("minreducedheight"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),$.width&&$.height&&S.sanitizeMargins(le),u.getComponentMethod("grid","sizeDefaults")($,le),te("paper_bgcolor"),te("separators",K.decimal+K.thousands),te("hidesources"),te("colorway"),te("datarevision");var pe=te("uirevision");te("editrevision",pe),te("selectionrevision",pe),u.getComponentMethod("modebar","supplyLayoutDefaults")($,le),u.getComponentMethod("shapes","supplyDrawNewShapeDefaults")($,le,te),u.getComponentMethod("selections","supplyDrawNewSelectionDefaults")($,le,te),te("meta"),d.isPlainObject($.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),u.getComponentMethod("calendars","handleDefaults")($,le,"calendar"),u.getComponentMethod("fx","supplyLayoutGlobalDefaults")($,le,te)};function we($){return typeof $=="string"&&$.substr($.length-2)==="px"&&parseFloat($)}S.plotAutoSize=function(le,K,te){var ie=le._context||{},ce=ie.frameMargins,ae,ve,pe=d.isPlotDiv(le);if(pe&&le.emit("plotly_autosize"),ie.fillFrame)ae=window.innerWidth,ve=window.innerHeight,document.body.style.overflow="hidden";else{var he=pe?window.getComputedStyle(le):{};if(ae=we(he.width)||we(he.maxWidth)||te.width,ve=we(he.height)||we(he.maxHeight)||te.height,l(ce)&&ce>0){var ye=1-2*ce;ae=Math.round(ye*ae),ve=Math.round(ye*ve)}}var _e=S.layoutAttributes.width.min,je=S.layoutAttributes.height.min;ae<_e&&(ae=_e),ve<je&&(ve=je);var Je=!K.width&&Math.abs(te.width-ae)>1,nt=!K.height&&Math.abs(te.height-ve)>1;(nt||Je)&&(Je&&(te.width=ae),nt&&(te.height=ve)),le._initialAutoSize||(le._initialAutoSize={width:ae,height:ve}),S.sanitizeMargins(te)},S.supplyLayoutModuleDefaults=function($,le,K,te){var ie=u.componentsRegistry,ce=le._basePlotModules,ae,ve,pe,he=u.subplotsRegistry.cartesian;for(ae in ie)pe=ie[ae],pe.includeBasePlot&&pe.includeBasePlot($,le);ce.length||ce.push(he),le._has("cartesian")&&(u.getComponentMethod("grid","contentDefaults")($,le),he.finalizeSubplots($,le));for(var ye in le._subplots)le._subplots[ye].sort(d.subplotSort);for(ve=0;ve<ce.length;ve++)pe=ce[ve],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults($,le,K);var _e=le._modules;for(ve=0;ve<_e.length;ve++)pe=_e[ve],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults($,le,K);var je=le._transformModules;for(ve=0;ve<je.length;ve++)pe=je[ve],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults($,le,K,te);for(ae in ie)pe=ie[ae],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults($,le,K)},S.purge=function($){var le=$._fullLayout||{};le._glcontainer!==void 0&&(le._glcontainer.selectAll(".gl-canvas").remove(),le._glcontainer.remove(),le._glcanvas=null),le._modeBar&&le._modeBar.destroy(),$._transitionData&&($._transitionData._interruptCallbacks&&($._transitionData._interruptCallbacks.length=0),$._transitionData._animationRaf&&window.cancelAnimationFrame($._transitionData._animationRaf)),d.clearThrottle(),d.clearResponsive($),delete $.data,delete $.layout,delete $._fullData,delete $._fullLayout,delete $.calcdata,delete $.empty,delete $.fid,delete $.undoqueue,delete $.undonum,delete $.autoplay,delete $.changed,delete $._promises,delete $._redrawTimer,delete $._hmlumcount,delete $._hmpixcount,delete $._transitionData,delete $._transitioning,delete $._initialAutoSize,delete $._transitioningWithDuration,delete $._dragging,delete $._dragged,delete $._dragdata,delete $._hoverdata,delete $._snapshotInProgress,delete $._editing,delete $._mouseDownTime,delete $._legendMouseDownTime,$.removeAllListeners&&$.removeAllListeners()},S.style=function($){var le=$._fullLayout._visibleModules,K=[],te;for(te=0;te<le.length;te++){var ie=le[te];ie.style&&d.pushUnique(K,ie.style)}for(te=0;te<K.length;te++)K[te]($)},S.sanitizeMargins=function($){if(!(!$||!$.margin)){var le=$.width,K=$.height,te=$.margin,ie=le-(te.l+te.r),ce=K-(te.t+te.b),ae;ie<0&&(ae=(le-1)/(te.l+te.r),te.l=Math.floor(ae*te.l),te.r=Math.floor(ae*te.r)),ce<0&&(ae=(K-1)/(te.t+te.b),te.t=Math.floor(ae*te.t),te.b=Math.floor(ae*te.b))}},S.clearAutoMarginIds=function($){$._fullLayout._pushmarginIds={}},S.allowAutoMargin=function($,le){$._fullLayout._pushmarginIds[le]=1};function ee($){var le=$.margin;if(!$._size){var K=$._size={l:Math.round(le.l),r:Math.round(le.r),t:Math.round(le.t),b:Math.round(le.b),p:Math.round(le.pad)};K.w=Math.round($.width)-K.l-K.r,K.h=Math.round($.height)-K.t-K.b}$._pushmargin||($._pushmargin={}),$._pushmarginIds||($._pushmarginIds={})}var X=2,re=2;S.autoMargin=function($,le,K){var te=$._fullLayout,ie=te.width,ce=te.height,ae=te.margin,ve=te.minreducedwidth,pe=te.minreducedheight,he=d.constrain(ie-ae.l-ae.r,X,ve),ye=d.constrain(ce-ae.t-ae.b,re,pe),_e=Math.max(0,ie-he),je=Math.max(0,ce-ye),Je=te._pushmargin,nt=te._pushmarginIds;if(ae.autoexpand!==!1){if(!K)delete Je[le],delete nt[le];else{var at=K.pad;if(at===void 0&&(at=Math.min(12,ae.l,ae.r,ae.t,ae.b)),_e){var Fe=(K.l+K.r)/_e;Fe>1&&(K.l/=Fe,K.r/=Fe)}if(je){var Ie=(K.t+K.b)/je;Ie>1&&(K.t/=Ie,K.b/=Ie)}var Ke=K.xl!==void 0?K.xl:K.x,Qe=K.xr!==void 0?K.xr:K.x,it=K.yt!==void 0?K.yt:K.y,Ne=K.yb!==void 0?K.yb:K.y;Je[le]={l:{val:Ke,size:K.l+at},r:{val:Qe,size:K.r+at},b:{val:Ne,size:K.b+at},t:{val:it,size:K.t+at}},nt[le]=1}if(!te._replotting)return S.doAutoMargin($)}},S.doAutoMargin=function($){var le=$._fullLayout,K=le.width,te=le.height;le._size||(le._size={}),ee(le);var ie=le._size,ce=le.margin,ae=d.extendFlat({},ie),ve=ce.l,pe=ce.r,he=ce.t,ye=ce.b,_e=le._pushmargin,je=le._pushmarginIds,Je=le.minreducedwidth,nt=le.minreducedheight;if(le.margin.autoexpand!==!1){for(var at in _e)je[at]||delete _e[at];_e.base={l:{val:0,size:ve},r:{val:1,size:pe},t:{val:1,size:he},b:{val:0,size:ye}};for(var Fe in _e){var Ie=_e[Fe].l||{},Ke=_e[Fe].b||{},Qe=Ie.val,it=Ie.size,Ne=Ke.val,ht=Ke.size;for(var Tt in _e){if(l(it)&&_e[Tt].r){var Xt=_e[Tt].r.val,Nt=_e[Tt].r.size;if(Xt>Qe){var Mt=(it*Xt+(Nt-K)*Qe)/(Xt-Qe),Vt=(Nt*(1-Qe)+(it-K)*(1-Xt))/(Xt-Qe);Mt+Vt>ve+pe&&(ve=Mt,pe=Vt)}}if(l(ht)&&_e[Tt].t){var Yt=_e[Tt].t.val,cr=_e[Tt].t.size;if(Yt>Ne){var Nr=(ht*Yt+(cr-te)*Ne)/(Yt-Ne),er=(cr*(1-Ne)+(ht-te)*(1-Yt))/(Yt-Ne);Nr+er>ye+he&&(ye=Nr,he=er)}}}}}var Wt=d.constrain(K-ce.l-ce.r,X,Je),dr=d.constrain(te-ce.t-ce.b,re,nt),zr=Math.max(0,K-Wt),Dr=Math.max(0,te-dr);if(zr){var $e=(ve+pe)/zr;$e>1&&(ve/=$e,pe/=$e)}if(Dr){var pt=(ye+he)/Dr;pt>1&&(ye/=pt,he/=pt)}if(ie.l=Math.round(ve),ie.r=Math.round(pe),ie.t=Math.round(he),ie.b=Math.round(ye),ie.p=Math.round(ce.pad),ie.w=Math.round(K)-ie.l-ie.r,ie.h=Math.round(te)-ie.t-ie.b,!le._replotting&&S.didMarginChange(ae,ie)){"_redrawFromAutoMarginCount"in le?le._redrawFromAutoMarginCount++:le._redrawFromAutoMarginCount=1;var kt=3*(1+Object.keys(je).length);if(le._redrawFromAutoMarginCount<kt)return u.call("_doPlot",$);le._size=ae,d.warn("Too many auto-margin redraws.")}de($)};function de($){var le=b.list($,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(K){for(var te=0;te<le.length;te++){var ie=le[te][K];ie&&ie()}})}var me=["l","r","t","b","p","w","h"];S.didMarginChange=function($,le){for(var K=0;K<me.length;K++){var te=me[K],ie=$[te],ce=le[te];if(!l(ie)||Math.abs(ce-ie)>1)return!0}return!1},S.graphJson=function($,le,K,te,ie,ce){(ie&&le&&!$._fullData||ie&&!le&&!$._fullLayout)&&S.supplyDefaults($);var ae=ie?$._fullData:$.data,ve=ie?$._fullLayout:$.layout,pe=($._transitionData||{})._frames;function he(je,Je){if(typeof je=="function")return Je?"_function_":null;if(d.isPlainObject(je)){var nt={},at;return Object.keys(je).sort().forEach(function(Fe){if(["_","["].indexOf(Fe.charAt(0))===-1){if(typeof je[Fe]=="function"){Je&&(nt[Fe]="_function");return}if(K==="keepdata"){if(Fe.substr(Fe.length-3)==="src")return}else if(K==="keepstream"){if(at=je[Fe+"src"],typeof at=="string"&&at.indexOf(":")>0&&!d.isPlainObject(je.stream))return}else if(K!=="keepall"&&(at=je[Fe+"src"],typeof at=="string"&&at.indexOf(":")>0))return;nt[Fe]=he(je[Fe],Je)}}),nt}return Array.isArray(je)?je.map(function(Fe){return he(Fe,Je)}):d.isTypedArray(je)?d.simpleMap(je,d.identity):d.isJSDate(je)?d.ms2DateTimeLocal(+je):je}var ye={data:(ae||[]).map(function(je){var Je=he(je);return le&&delete Je.fit,Je})};if(!le&&(ye.layout=he(ve),ie)){var _e=ve._size;ye.layout.computed={margin:{b:_e.b,l:_e.l,r:_e.r,t:_e.t}}}return pe&&(ye.frames=he(pe)),ce&&(ye.config=he($._context,!0)),te==="object"?ye:JSON.stringify(ye)},S.modifyFrames=function($,le){var K,te,ie,ce=$._transitionData._frames,ae=$._transitionData._frameHash;for(K=0;K<le.length;K++)switch(te=le[K],te.type){case"replace":ie=te.value;var ve=(ce[te.index]||{}).name,pe=ie.name;ce[te.index]=ae[pe]=ie,pe!==ve&&(delete ae[ve],ae[pe]=ie);break;case"insert":ie=te.value,ae[ie.name]=ie,ce.splice(te.index,0,ie);break;case"delete":ie=ce[te.index],delete ae[ie.name],ce.splice(te.index,1);break}return Promise.resolve()},S.computeFrame=function($,le){var K=$._transitionData._frameHash,te,ie,ce,ae;if(!le)throw new Error("computeFrame must be given a string frame name");var ve=K[le.toString()];if(!ve)return!1;for(var pe=[ve],he=[ve.name];ve.baseframe&&(ve=K[ve.baseframe.toString()])&&he.indexOf(ve.name)===-1;)pe.push(ve),he.push(ve.name);for(var ye={};ve=pe.pop();)if(ve.layout&&(ye.layout=S.extendLayout(ye.layout,ve.layout)),ve.data){if(ye.data||(ye.data=[]),ie=ve.traces,!ie)for(ie=[],te=0;te<ve.data.length;te++)ie[te]=te;for(ye.traces||(ye.traces=[]),te=0;te<ve.data.length;te++)ce=ie[te],ce!=null&&(ae=ye.traces.indexOf(ce),ae===-1&&(ae=ye.data.length,ye.traces[ae]=ce),ye.data[ae]=S.extendTrace(ye.data[ae],ve.data[te]))}return ye},S.recomputeFrameHash=function($){for(var le=$._transitionData._frameHash={},K=$._transitionData._frames,te=0;te<K.length;te++){var ie=K[te];ie&&ie.name&&(le[ie.name]=ie)}},S.extendObjectWithContainers=function($,le,K){var te,ie,ce,ae,ve,pe,he,ye,_e=d.extendDeepNoArrays({},le||{}),je=d.expandObjectPaths(_e),Je={};if(K&&K.length)for(ce=0;ce<K.length;ce++)te=d.nestedProperty(je,K[ce]),ie=te.get(),ie===void 0?d.nestedProperty(Je,K[ce]).set(null):(te.set(null),d.nestedProperty(Je,K[ce]).set(ie));if($=d.extendDeepNoArrays($||{},je),K&&K.length){for(ce=0;ce<K.length;ce++)if(ve=d.nestedProperty(Je,K[ce]),he=ve.get(),!!he){for(pe=d.nestedProperty($,K[ce]),ye=pe.get(),Array.isArray(ye)||(ye=[],pe.set(ye)),ae=0;ae<he.length;ae++){var nt=he[ae];nt===null?ye[ae]=null:ye[ae]=S.extendObjectWithContainers(ye[ae],nt)}pe.set(ye)}}return $},S.dataArrayContainers=["transforms","dimensions"],S.layoutArrayContainers=u.layoutArrayContainers,S.extendTrace=function($,le){return S.extendObjectWithContainers($,le,S.dataArrayContainers)},S.extendLayout=function($,le){return S.extendObjectWithContainers($,le,S.layoutArrayContainers)},S.transition=function($,le,K,te,ie,ce){var ae={redraw:ie.redraw},ve={},pe=[];return ae.prepareFn=function(){for(var he=Array.isArray(le)?le.length:0,ye=te.slice(0,he),_e=0;_e<ye.length;_e++){var je=ye[_e],Je=$._fullData[je],nt=Je._module;if(!!nt){if(nt.animatable){var at=nt.basePlotModule.name;ve[at]||(ve[at]=[]),ve[at].push(je)}$.data[ye[_e]]=S.extendTrace($.data[ye[_e]],le[_e])}}var Fe=d.expandObjectPaths(d.extendDeepNoArrays({},K)),Ie=/^[xy]axis[0-9]*$/;for(var Ke in Fe)!Ie.test(Ke)||delete Fe[Ke].range;S.extendLayout($.layout,Fe),delete $.calcdata,S.supplyDefaults($),S.doCalcdata($);var Qe=d.expandObjectPaths(K);if(Qe){var it=$._fullLayout._plots;for(var Ne in it){var ht=it[Ne],Tt=ht.xaxis,Xt=ht.yaxis,Nt=Tt.range.slice(),Mt=Xt.range.slice(),Vt=null,Yt=null,cr=null,Nr=null;Array.isArray(Qe[Tt._name+".range"])?Vt=Qe[Tt._name+".range"].slice():Array.isArray((Qe[Tt._name]||{}).range)&&(Vt=Qe[Tt._name].range.slice()),Array.isArray(Qe[Xt._name+".range"])?Yt=Qe[Xt._name+".range"].slice():Array.isArray((Qe[Xt._name]||{}).range)&&(Yt=Qe[Xt._name].range.slice()),Nt&&Vt&&(Tt.r2l(Nt[0])!==Tt.r2l(Vt[0])||Tt.r2l(Nt[1])!==Tt.r2l(Vt[1]))&&(cr={xr0:Nt,xr1:Vt}),Mt&&Yt&&(Xt.r2l(Mt[0])!==Xt.r2l(Yt[0])||Xt.r2l(Mt[1])!==Xt.r2l(Yt[1]))&&(Nr={yr0:Mt,yr1:Yt}),(cr||Nr)&&pe.push(d.extendFlat({plotinfo:ht},cr,Nr))}}return Promise.resolve()},ae.runFn=function(he){var ye,_e=$._fullLayout._basePlotModules,je=pe.length,Je;if(K)for(Je=0;Je<_e.length;Je++)_e[Je].transitionAxes&&_e[Je].transitionAxes($,pe,ce,he);je?(ye=d.extendFlat({},ce),ye.duration=0,delete ve.cartesian):ye=ce;for(var nt in ve){var at=ve[nt],Fe=$._fullData[at[0]]._module;Fe.basePlotModule.plot($,at,ye,he)}},xe($,ce,ae)},S.transitionFromReact=function($,le,K,te){var ie=$._fullLayout,ce=ie.transition,ae={},ve=[];return ae.prepareFn=function(){var pe=ie._plots;ae.redraw=!1,le.anim==="some"&&(ae.redraw=!0),K.anim==="some"&&(ae.redraw=!0);for(var he in pe){var ye=pe[he],_e=ye.xaxis,je=ye.yaxis,Je=te[_e._name].range.slice(),nt=te[je._name].range.slice(),at=_e.range.slice(),Fe=je.range.slice();_e.setScale(),je.setScale();var Ie=null,Ke=null;(_e.r2l(Je[0])!==_e.r2l(at[0])||_e.r2l(Je[1])!==_e.r2l(at[1]))&&(Ie={xr0:Je,xr1:at}),(je.r2l(nt[0])!==je.r2l(Fe[0])||je.r2l(nt[1])!==je.r2l(Fe[1]))&&(Ke={yr0:nt,yr1:Fe}),(Ie||Ke)&&ve.push(d.extendFlat({plotinfo:ye},Ie,Ke))}return Promise.resolve()},ae.runFn=function(pe){for(var he=$._fullData,ye=$._fullLayout,_e=ye._basePlotModules,je,Je,nt,at=[],Fe=0;Fe<he.length;Fe++)at.push(Fe);function Ie(){if(!!$._fullLayout)for(var Qe=0;Qe<_e.length;Qe++)_e[Qe].transitionAxes&&_e[Qe].transitionAxes($,ve,je,pe)}function Ke(){if(!!$._fullLayout)for(var Qe=0;Qe<_e.length;Qe++)_e[Qe].plot($,nt,Je,pe)}ve.length&&le.anim?ce.ordering==="traces first"?(je=d.extendFlat({},ce,{duration:0}),nt=at,Je=ce,setTimeout(Ie,ce.duration),Ke()):(je=ce,nt=null,Je=d.extendFlat({},ce,{duration:0}),setTimeout(Ke,je.duration),Ie()):ve.length?(je=ce,Ie()):le.anim&&(nt=at,Je=ce,Ke())},xe($,ce,ae)};function xe($,le,K){var te=!1;function ie(_e){var je=Promise.resolve();if(!_e)return je;for(;_e.length;)je=je.then(_e.shift());return je}function ce(_e){if(!!_e)for(;_e.length;)_e.shift()}function ae(){return $.emit("plotly_transitioning",[]),new Promise(function(_e){$._transitioning=!0,le.duration>0&&($._transitioningWithDuration=!0),$._transitionData._interruptCallbacks.push(function(){te=!0}),K.redraw&&$._transitionData._interruptCallbacks.push(function(){return u.call("redraw",$)}),$._transitionData._interruptCallbacks.push(function(){$.emit("plotly_transitioninterrupted",[])});var je=0,Je=0;function nt(){return je++,function(){Je++,!te&&Je===je&&ve(_e)}}K.runFn(nt),setTimeout(nt())})}function ve(_e){if(!!$._transitionData)return ce($._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(K.redraw)return u.call("redraw",$)}).then(function(){$._transitioning=!1,$._transitioningWithDuration=!1,$.emit("plotly_transitioned",[])}).then(_e)}function pe(){if(!!$._transitionData)return $._transitioning=!1,ie($._transitionData._interruptCallbacks)}var he=[S.previousPromises,pe,K.prepareFn,S.rehover,S.reselect,ae],ye=d.syncOrAsync(he,$);return(!ye||!ye.then)&&(ye=Promise.resolve()),ye.then(function(){return $})}S.doCalcdata=function($,le){var K=b.list($),te=$._fullData,ie=$._fullLayout,ce,ae,ve,pe,he=new Array(te.length),ye=($.calcdata||[]).slice();for($.calcdata=he,ie._numBoxes=0,ie._numViolins=0,ie._violinScaleGroupStats={},$._hmpixcount=0,$._hmlumcount=0,ie._piecolormap={},ie._sunburstcolormap={},ie._treemapcolormap={},ie._iciclecolormap={},ie._funnelareacolormap={},ve=0;ve<te.length;ve++)if(Array.isArray(le)&&le.indexOf(ve)===-1){he[ve]=ye[ve];continue}for(ve=0;ve<te.length;ve++)ce=te[ve],ce._arrayAttrs=h.findArrayAttributes(ce),ce._extremes={};var _e=ie._subplots.polar||[];for(ve=0;ve<_e.length;ve++)K.push(ie[_e[ve]].radialaxis,ie[_e[ve]].angularaxis);for(var je in ie._colorAxes){var Je=ie[je];Je.cauto!==!1&&(delete Je.cmin,delete Je.cmax)}var nt=!1;function at(Ke){if(ce=te[Ke],ae=ce._module,ce.visible===!0&&ce.transforms){if(ae&&ae.calc){var Qe=ae.calc($,ce);Qe[0]&&Qe[0].t&&Qe[0].t._scene&&delete Qe[0].t._scene.dirty}for(pe=0;pe<ce.transforms.length;pe++){var it=ce.transforms[pe];ae=I[it.type],ae&&ae.calcTransform&&(ce._hasCalcTransform=!0,nt=!0,ae.calcTransform($,ce,it))}}}function Fe(Ke,Qe){if(ce=te[Ke],ae=ce._module,!!ae.isContainer===Qe){var it=[];if(ce.visible===!0&&ce._length!==0){delete ce._indexToPoints;var Ne=ce.transforms||[];for(pe=Ne.length-1;pe>=0;pe--)if(Ne[pe].enabled){ce._indexToPoints=Ne[pe]._indexToPoints;break}ae&&ae.calc&&(it=ae.calc($,ce))}(!Array.isArray(it)||!it[0])&&(it=[{x:_,y:_}]),it[0].t||(it[0].t={}),it[0].trace=ce,he[Ke]=it}}for(Ee(K,te,ie),ve=0;ve<te.length;ve++)Fe(ve,!0);for(ve=0;ve<te.length;ve++)at(ve);for(nt&&Ee(K,te,ie),ve=0;ve<te.length;ve++)Fe(ve,!0);for(ve=0;ve<te.length;ve++)Fe(ve,!1);ke($);var Ie=Re(K,$);if(Ie.length){for(ie._numBoxes=0,ie._numViolins=0,ve=0;ve<Ie.length;ve++)Fe(Ie[ve],!0);for(ve=0;ve<Ie.length;ve++)Fe(Ie[ve],!1);ke($)}u.getComponentMethod("fx","calc")($),u.getComponentMethod("errorbars","calc")($)};var He=/(total|sum|min|max|mean|median) (ascending|descending)/;function Re($,le){var K=[],te,ie,ce,ae,ve;function pe(Wt,dr,zr){var Dr=dr._id.charAt(0);if(Wt==="histogram2dcontour"){var $e=dr._counterAxes[0],pt=b.getFromId(le,$e),kt=Dr==="x"||$e==="x"&&pt.type==="category",Me=Dr==="y"||$e==="y"&&pt.type==="category";return function(rt,st){return rt===0||st===0||kt&&rt===zr[st].length-1||Me&&st===zr.length-1?-1:(Dr==="y"?st:rt)-1}}else return function(rt,st){return Dr==="y"?st:rt}}var he={min:function(Wt){return d.aggNums(Math.min,null,Wt)},max:function(Wt){return d.aggNums(Math.max,null,Wt)},sum:function(Wt){return d.aggNums(function(dr,zr){return dr+zr},null,Wt)},total:function(Wt){return d.aggNums(function(dr,zr){return dr+zr},null,Wt)},mean:function(Wt){return d.mean(Wt)},median:function(Wt){return d.median(Wt)}};for(te=0;te<$.length;te++){var ye=$[te];if(ye.type==="category"){var _e=ye.categoryorder.match(He);if(_e){var je=_e[1],Je=_e[2],nt=ye._id.charAt(0),at=nt==="x",Fe=[];for(ie=0;ie<ye._categories.length;ie++)Fe.push([ye._categories[ie],[]]);for(ie=0;ie<ye._traceIndices.length;ie++){var Ie=ye._traceIndices[ie],Ke=le._fullData[Ie];if(Ke.visible===!0){var Qe=Ke.type;u.traceIs(Ke,"histogram")&&(delete Ke._xautoBinFinished,delete Ke._yautoBinFinished);var it=Qe==="splom",Ne=Qe==="scattergl",ht=le.calcdata[Ie];for(ce=0;ce<ht.length;ce++){var Tt=ht[ce],Xt,Nt;if(it){var Mt=Ke._axesDim[ye._id];if(!at){var Vt=Ke._diag[Mt][0];Vt&&(ye=le._fullLayout[b.id2name(Vt)])}var Yt=Tt.trace.dimensions[Mt].values;for(ae=0;ae<Yt.length;ae++)for(Xt=ye._categoriesMap[Yt[ae]],ve=0;ve<Tt.trace.dimensions.length;ve++)if(ve!==Mt){var cr=Tt.trace.dimensions[ve];Fe[Xt][1].push(cr.values[ae])}}else if(Ne){for(ae=0;ae<Tt.t.x.length;ae++)at?(Xt=Tt.t.x[ae],Nt=Tt.t.y[ae]):(Xt=Tt.t.y[ae],Nt=Tt.t.x[ae]),Fe[Xt][1].push(Nt);Tt.t&&Tt.t._scene&&delete Tt.t._scene.dirty}else if(Tt.hasOwnProperty("z")){Nt=Tt.z;var Nr=pe(Ke.type,ye,Nt);for(ae=0;ae<Nt.length;ae++)for(ve=0;ve<Nt[ae].length;ve++)Xt=Nr(ve,ae),Xt+1&&Fe[Xt][1].push(Nt[ae][ve])}else for(Xt=Tt.p,Xt===void 0&&(Xt=Tt[nt]),Nt=Tt.s,Nt===void 0&&(Nt=Tt.v),Nt===void 0&&(Nt=at?Tt.y:Tt.x),Array.isArray(Nt)||(Nt===void 0?Nt=[]:Nt=[Nt]),ae=0;ae<Nt.length;ae++)Fe[Xt][1].push(Nt[ae])}}}ye._categoriesValue=Fe;var er=[];for(ie=0;ie<Fe.length;ie++)er.push([Fe[ie][0],he[je](Fe[ie][1])]);er.sort(function(Wt,dr){return Wt[1]-dr[1]}),ye._categoriesAggregatedValue=er,ye._initialCategories=er.map(function(Wt){return Wt[0]}),Je==="descending"&&ye._initialCategories.reverse(),K=K.concat(ye.sortByInitialCategories())}}}return K}function Ee($,le,K){var te={};function ie(pe){pe.clearCalc(),pe.type==="multicategory"&&pe.setupMultiCategory(le),te[pe._id]=1}d.simpleMap($,ie);for(var ce=K._axisMatchGroups||[],ae=0;ae<ce.length;ae++)for(var ve in ce[ae])te[ve]||ie(K[b.id2name(ve)])}function ke($){var le=$._fullLayout,K=le._visibleModules,te={},ie,ce,ae;for(ce=0;ce<K.length;ce++){var ve=K[ce],pe=ve.crossTraceCalc;if(pe){var he=ve.basePlotModule.name;te[he]?d.pushUnique(te[he],pe):te[he]=[pe]}}for(ae in te){var ye=te[ae],_e=le._subplots[ae];if(Array.isArray(_e))for(ie=0;ie<_e.length;ie++){var je=_e[ie],Je=ae==="cartesian"?le._plots[je]:le[je];for(ce=0;ce<ye.length;ce++)ye[ce]($,Je,je)}else for(ce=0;ce<ye.length;ce++)ye[ce]($)}}S.rehover=function($){$._fullLayout._rehover&&$._fullLayout._rehover()},S.redrag=function($){$._fullLayout._redrag&&$._fullLayout._redrag()},S.reselect=function($){var le=$._fullLayout,K=($.layout||{}).selections,te=le._previousSelections;le._previousSelections=K;var ie=le._reselect||JSON.stringify(K)!==JSON.stringify(te);u.getComponentMethod("selections","reselect")($,ie)},S.generalUpdatePerTraceModule=function($,le,K,te){var ie=le.traceHash,ce={},ae;for(ae=0;ae<K.length;ae++){var ve=K[ae],pe=ve[0].trace;pe.visible&&(ce[pe.type]=ce[pe.type]||[],ce[pe.type].push(ve))}for(var he in ie)if(!ce[he]){var ye=ie[he][0],_e=ye[0].trace;_e.visible=!1,ce[he]=[ye]}for(var je in ce){var Je=ce[je],nt=Je[0][0].trace._module;nt.plot($,le,d.filterVisible(Je),te)}le.traceHash=ce},S.plotBasePlot=function($,le,K,te,ie){var ce=u.getModule($),ae=P(le.calcdata,ce)[0];ce.plot(le,ae,te,ie)},S.cleanBasePlot=function($,le,K,te,ie){var ce=ie._has&&ie._has($),ae=K._has&&K._has($);ce&&!ae&&ie["_"+$+"layer"].selectAll("g.trace").remove()}},{"../components/color":103,"../components/shapes/handle_outline":204,"../constants/numerical":224,"../lib":244,"../plot_api/plot_schema":279,"../plot_api/plot_template":280,"../plots/get_data":321,"../registry":327,"./animation_attributes":285,"./attributes":287,"./cartesian/axis_ids":295,"./command":317,"./font_attributes":319,"./frame_attributes":320,"./layout_attributes":323,"@plotly/d3":11,"d3-format":13,"d3-time-format":14,"fast-isnumeric":17}],326:[function(e,i,o){var a=e("../constants/docs");a.FORMAT_LINK,a.DATE_FORMAT_LINK;function s(n){var l=n.description?" "+n.description:"",u=n.keys||[];if(u.length>0){for(var h=[],v=0;v<u.length;v++)h[v]="`"+u[v]+"`";l=l+"Finally, the template string has access to ",u.length===1?l="variable "+h[0]:l="variables "+h.slice(0,-1).join(", ")+" and "+h.slice(-1)+"."}return l}o.hovertemplateAttrs=function(n,l){n=n||{},l=l||{},s(l);var u={valType:"string",dflt:"",editType:n.editType||"none"};return n.arrayOk!==!1&&(u.arrayOk=!0),u},o.texttemplateAttrs=function(n,l){n=n||{},l=l||{},s(l);var u={valType:"string",dflt:"",editType:n.editType||"calc"};return n.arrayOk!==!1&&(u.arrayOk=!0),u}},{"../constants/docs":221}],327:[function(e,i,o){var a=e("./lib/loggers"),s=e("./lib/noop"),n=e("./lib/push_unique"),l=e("./lib/is_plain_object"),u=e("./lib/dom").addStyleRule,h=e("./lib/extend"),v=e("./plots/attributes"),d=e("./plots/layout_attributes"),p=h.extendFlat,_=h.extendDeepAll;o.modules={},o.allCategories={},o.allTypes=[],o.subplotsRegistry={},o.transformsRegistry={},o.componentsRegistry={},o.layoutArrayContainers=[],o.layoutArrayRegexes=[],o.traceLayoutAttributes={},o.localeRegistry={},o.apiMethodRegistry={},o.collectableSubplotTypes=null,o.register=function(z){if(o.collectableSubplotTypes=null,z)z&&!Array.isArray(z)&&(z=[z]);else throw new Error("No argument passed to Plotly.register.");for(var U=0;U<z.length;U++){var F=z[U];if(!F)throw new Error("Invalid module was attempted to be registered!");switch(F.moduleType){case"trace":b(F);break;case"transform":A(F);break;case"component":E(F);break;case"locale":P(F);break;case"apiMethod":var V=F.name;o.apiMethodRegistry[V]=F.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},o.getModule=function(M){var z=o.modules[T(M)];return z?z._module:!1},o.traceIs=function(M,z){if(M=T(M),M==="various")return!1;var U=o.modules[M];return U||(M&&a.log("Unrecognized trace type "+M+"."),U=o.modules[v.type.dflt]),!!U.categories[z]},o.getTransformIndices=function(M,z){for(var U=[],F=M.transforms||[],V=0;V<F.length;V++)F[V].type===z&&U.push(V);return U},o.hasTransform=function(M,z){for(var U=M.transforms||[],F=0;F<U.length;F++)if(U[F].type===z)return!0;return!1},o.getComponentMethod=function(M,z){var U=o.componentsRegistry[M];return U&&U[z]||s},o.call=function(){var M=arguments[0],z=[].slice.call(arguments,1);return o.apiMethodRegistry[M].apply(null,z)};function b(M){var z=M.name,U=M.categories,F=M.meta;if(o.modules[z]){a.log("Type "+z+" already registered");return}o.subplotsRegistry[M.basePlotModule.name]||x(M.basePlotModule);for(var V={},j=0;j<U.length;j++)V[U[j]]=!0,o.allCategories[U[j]]=!0;o.modules[z]={_module:M,categories:V},F&&Object.keys(F).length&&(o.modules[z].meta=F),o.allTypes.push(z);for(var H in o.componentsRegistry)R(H,z);M.layoutAttributes&&p(o.traceLayoutAttributes,M.layoutAttributes);var Y=M.basePlotModule,J=Y.name;if(J==="mapbox"){var ne=Y.constants.styleRules;for(var q in ne)u(".js-plotly-plot .plotly .mapboxgl-"+q,ne[q])}(J==="geo"||J==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function x(M){var z=M.name;if(o.subplotsRegistry[z]){a.log("Plot type "+z+" already registered.");return}D(M),o.subplotsRegistry[z]=M;for(var U in o.componentsRegistry)I(U,M.name)}function E(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var z=M.name;o.componentsRegistry[z]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&n(o.layoutArrayContainers,z),D(M));for(var U in o.modules)R(z,U);for(var F in o.subplotsRegistry)I(z,F);for(var V in o.transformsRegistry)S(z,V);M.schema&&M.schema.layout&&_(d,M.schema.layout)}function A(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var z="Transform module "+M.name,U=typeof M.transform=="function",F=typeof M.calcTransform=="function";if(!U&&!F)throw new Error(z+" is missing a *transform* or *calcTransform* method.");U&&F&&a.log([z+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),l(M.attributes)||a.log(z+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&a.log(z+" registered without a *supplyDefaults* method."),o.transformsRegistry[M.name]=M;for(var V in o.componentsRegistry)S(V,M.name)}function P(M){var z=M.name,U=z.split("-")[0],F=M.dictionary,V=M.format,j=F&&Object.keys(F).length,H=V&&Object.keys(V).length,Y=o.localeRegistry,J=Y[z];if(J||(Y[z]=J={}),U!==z){var ne=Y[U];ne||(Y[U]=ne={}),j&&ne.dictionary===J.dictionary&&(ne.dictionary=F),H&&ne.format===J.format&&(ne.format=V)}j&&(J.dictionary=F),H&&(J.format=V)}function D(M){if(M.layoutAttributes){var z=M.layoutAttributes._arrayAttrRegexps;if(z)for(var U=0;U<z.length;U++)n(o.layoutArrayRegexes,z[U])}}function R(M,z){var U=o.componentsRegistry[M].schema;if(!(!U||!U.traces)){var F=U.traces[z];F&&_(o.modules[z]._module.attributes,F)}}function S(M,z){var U=o.componentsRegistry[M].schema;if(!(!U||!U.transforms)){var F=U.transforms[z];F&&_(o.transformsRegistry[z].attributes,F)}}function I(M,z){var U=o.componentsRegistry[M].schema;if(!(!U||!U.subplots)){var F=o.subplotsRegistry[z],V=F.layoutAttributes,j=F.attr==="subplot"?F.name:F.attr;Array.isArray(j)&&(j=j[0]);var H=U.subplots[j];V&&H&&_(V,H)}}function T(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":236,"./lib/extend":238,"./lib/is_plain_object":245,"./lib/loggers":248,"./lib/noop":253,"./lib/push_unique":258,"./plots/attributes":287,"./plots/layout_attributes":323}],328:[function(e,i,o){var a=e("../registry"),s=e("../lib"),n=s.extendFlat,l=s.extendDeep;function u(v){var d;switch(v){case"themes__thumb":d={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":d={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:d={}}return d}function h(v){var d=["xaxis","yaxis","zaxis"];return d.indexOf(v.slice(0,5))>-1}i.exports=function(d,p){var _,b=d.data,x=d.layout,E=l([],b),A=l({},x,u(p.tileClass)),P=d._context||{};if(p.width&&(A.width=p.width),p.height&&(A.height=p.height),p.tileClass==="thumbnail"||p.tileClass==="themes__thumb"){A.annotations=[];var D=Object.keys(A);for(_=0;_<D.length;_++)h(D[_])&&(A[D[_]].title={text:""});for(_=0;_<E.length;_++){var R=E[_];R.showscale=!1,R.marker&&(R.marker.showscale=!1),a.traceIs(R,"pie-like")&&(R.textposition="none")}}if(Array.isArray(p.annotations))for(_=0;_<p.annotations.length;_++)A.annotations.push(p.annotations[_]);var S=Object.keys(A).filter(function(U){return U.match(/^scene\d*$/)});if(S.length){var I={};for(p.tileClass==="thumbnail"&&(I={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),_=0;_<S.length;_++){var T=A[S[_]];T.xaxis||(T.xaxis={}),T.yaxis||(T.yaxis={}),T.zaxis||(T.zaxis={}),n(T.xaxis,I),n(T.yaxis,I),n(T.zaxis,I),T._scene=null}}var M=document.createElement("div");p.tileClass&&(M.className=p.tileClass);var z={gd:M,td:M,layout:A,data:E,config:{staticPlot:p.staticPlot===void 0?!0:p.staticPlot,plotGlPixelRatio:p.plotGlPixelRatio===void 0?2:p.plotGlPixelRatio,displaylogo:p.displaylogo||!1,showLink:p.showLink||!1,showTips:p.showTips||!1,mapboxAccessToken:P.mapboxAccessToken}};return p.setBackground!=="transparent"&&(z.config.setBackground=p.setBackground||"opaque"),z.gd.defaultLayout=u(p.tileClass),z}},{"../lib":244,"../registry":327}],329:[function(e,i,o){var a=e("../lib"),s=e("../plot_api/to_image"),n=e("./filesaver"),l=e("./helpers");function u(h,v){var d;return a.isPlainObject(h)||(d=a.getGraphDiv(h)),v=v||{},v.format=v.format||"png",v.width=v.width||null,v.height=v.height||null,v.imageDataOnly=!0,new Promise(function(p,_){d&&d._snapshotInProgress&&_(new Error("Snapshotting already in progress.")),a.isIE()&&v.format!=="svg"&&_(new Error(l.MSG_IE_BAD_FORMAT)),d&&(d._snapshotInProgress=!0);var b=s(h,v),x=v.filename||h.fn||"newplot";x+="."+v.format.replace("-","."),b.then(function(E){return d&&(d._snapshotInProgress=!1),n(E,x,v.format)}).then(function(E){p(E)}).catch(function(E){d&&(d._snapshotInProgress=!1),_(E)})})}i.exports=u},{"../lib":244,"../plot_api/to_image":283,"./filesaver":330,"./helpers":331}],330:[function(e,i,o){var a=e("../lib"),s=e("./helpers");function n(l,u,h){var v=document.createElement("a"),d="download"in v,p=new Promise(function(_,b){var x,E;if(a.isIE())return x=s.createBlob(l,"svg"),window.navigator.msSaveBlob(x,u),x=null,_(u);if(d)return x=s.createBlob(l,h),E=s.createObjectURL(x),v.href=E,v.download=u,document.body.appendChild(v),v.click(),document.body.removeChild(v),s.revokeObjectURL(E),x=null,_(u);if(a.isSafari()){var A=h==="svg"?",":";base64,";return s.octetStream(A+encodeURIComponent(l)),_(u)}b(new Error("download error"))});return p}i.exports=n},{"../lib":244,"./helpers":331}],331:[function(e,i,o){var a=e("../registry");o.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},o.getRedrawFunc=function(l){return function(){a.getComponentMethod("colorbar","draw")(l)}},o.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},o.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var s=window.URL||window.webkitURL;o.createObjectURL=function(l){return s.createObjectURL(l)},o.revokeObjectURL=function(l){return s.revokeObjectURL(l)},o.createBlob=function(l,u){if(u==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(u==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var h=n(window.atob(l));return new window.Blob([h],{type:"image/"+u})},o.octetStream=function(l){document.location.href="data:application/octet-stream"+l};function n(l){for(var u=l.length,h=new ArrayBuffer(u),v=new Uint8Array(h),d=0;d<u;d++)v[d]=l.charCodeAt(d);return h}o.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,o.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":327}],332:[function(e,i,o){var a=e("./helpers"),s={getDelay:a.getDelay,getRedrawFunc:a.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};i.exports=s},{"./cloneplot":328,"./download":329,"./helpers":331,"./svgtoimg":333,"./toimage":334,"./tosvg":335}],333:[function(e,i,o){var a=e("../lib"),s=e("events").EventEmitter,n=e("./helpers");function l(u){var h=u.emitter||new s,v=new Promise(function(d,p){var _=window.Image,b=u.svg,x=u.format||"png";if(a.isIE()&&x!=="svg"){var E=new Error(n.MSG_IE_BAD_FORMAT);return p(E),u.promise?v:h.emit("error",E)}var A=u.canvas,P=u.scale||1,D=u.width||300,R=u.height||150,S=P*D,I=P*R,T=A.getContext("2d",{willReadFrequently:!0}),M=new _,z,U;x==="svg"||a.isSafari()?U=n.encodeSVG(b):(z=n.createBlob(b,"svg"),U=n.createObjectURL(z)),A.width=S,A.height=I,M.onload=function(){var F;switch(z=null,n.revokeObjectURL(U),x!=="svg"&&T.drawImage(M,0,0,S,I),x){case"jpeg":F=A.toDataURL("image/jpeg");break;case"png":F=A.toDataURL("image/png");break;case"webp":F=A.toDataURL("image/webp");break;case"svg":F=U;break;default:var V="Image format is not jpeg, png, svg or webp.";if(p(new Error(V)),!u.promise)return h.emit("error",V)}d(F),u.promise||h.emit("success",F)},M.onerror=function(F){if(z=null,n.revokeObjectURL(U),p(F),!u.promise)return h.emit("error",F)},M.src=U});return u.promise?v:h}i.exports=l},{"../lib":244,"./helpers":331,events:12}],334:[function(e,i,o){var a=e("events").EventEmitter,s=e("../registry"),n=e("../lib"),l=e("./helpers"),u=e("./cloneplot"),h=e("./tosvg"),v=e("./svgtoimg");function d(p,_){var b=new a,x=u(p,{format:"png"}),E=x.gd;E.style.position="absolute",E.style.left="-5000px",document.body.appendChild(E);function A(){var D=l.getDelay(E._fullLayout);setTimeout(function(){var R=h(E),S=document.createElement("canvas");S.id=n.randstr(),b=v({format:_.format,width:E._fullLayout.width,height:E._fullLayout.height,canvas:S,emitter:b,svg:R}),b.clean=function(){E&&document.body.removeChild(E)}},D)}var P=l.getRedrawFunc(E);return s.call("_doPlot",E,x.data,x.layout,x.config).then(P).then(A).catch(function(D){b.emit("error",D)}),b}i.exports=d},{"../lib":244,"../registry":327,"./cloneplot":328,"./helpers":331,"./svgtoimg":333,"./tosvg":335,events:12}],335:[function(e,i,o){var a=e("@plotly/d3"),s=e("../lib"),n=e("../components/drawing"),l=e("../components/color"),u=e("../constants/xmlns_namespaces"),h=/"/g,v="TOBESTRIPPED",d=new RegExp('("'+v+")|("+v+'")',"g");function p(b){var x=a.select("body").append("div").style({display:"none"}).html(""),E=b.replace(/(&[^;]*;)/gi,function(A){return A==="&lt;"?"&#60;":A==="&rt;"?"&#62;":A.indexOf("<")!==-1||A.indexOf(">")!==-1?"":x.html(A).text()});return x.remove(),E}function _(b){return b.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}i.exports=function(x,E,A){var P=x._fullLayout,D=P._paper,R=P._toppaper,S=P.width,I=P.height,T;D.insert("rect",":first-child").call(n.setRect,0,0,S,I).call(l.fill,P.paper_bgcolor);var M=P._basePlotModules||[];for(T=0;T<M.length;T++){var z=M[T];z.toSVG&&z.toSVG(x)}if(R){var U=R.node().childNodes,F=Array.prototype.slice.call(U);for(T=0;T<F.length;T++){var V=F[T];V.childNodes.length&&D.node().appendChild(V)}}P._draggers&&P._draggers.remove(),D.node().style.background="",D.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var H=a.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){H.remove();return}else H.style({visibility:null,display:null});var Y=this.style.fontFamily;Y&&Y.indexOf('"')!==-1&&H.style("font-family",Y.replace(h,v))}),D.selectAll(".gradient_filled,.pattern_filled").each(function(){var H=a.select(this),Y=this.style.fill;Y&&Y.indexOf("url(")!==-1&&H.style("fill",Y.replace(h,v));var J=this.style.stroke;J&&J.indexOf("url(")!==-1&&H.style("stroke",J.replace(h,v))}),(E==="pdf"||E==="eps")&&D.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),D.node().setAttributeNS(u.xmlns,"xmlns",u.svg),D.node().setAttributeNS(u.xmlns,"xmlns:xlink",u.xlink),E==="svg"&&A&&(D.attr("width",A*S),D.attr("height",A*I),D.attr("viewBox","0 0 "+S+" "+I));var j=new window.XMLSerializer().serializeToString(D.node());return j=p(j),j=_(j),j=j.replace(d,"'"),s.isIE()&&(j=j.replace(/"/gi,"'"),j=j.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),j=j.replace(/(\\')/gi,'"')),j}},{"../components/color":103,"../components/drawing":125,"../constants/xmlns_namespaces":225,"../lib":244,"@plotly/d3":11}],336:[function(e,i,o){var a=e("../../lib");i.exports=function(n,l){for(var u=0;u<n.length;u++)n[u].i=u;a.mergeArray(l.text,n,"tx"),a.mergeArray(l.hovertext,n,"htx");var h=l.marker;if(h){a.mergeArray(h.opacity,n,"mo",!0),a.mergeArray(h.color,n,"mc");var v=h.line;v&&(a.mergeArray(v.color,n,"mlc"),a.mergeArrayCastPositive(v.width,n,"mlw"))}}},{"../../lib":244}],337:[function(e,i,o){var a=e("../scatter/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,u=e("../../components/colorscale/attributes"),h=e("../../plots/font_attributes"),v=e("./constants"),d=e("../../components/drawing/attributes").pattern,p=e("../../lib/extend").extendFlat,_=h({editType:"calc",arrayOk:!0,colorEditType:"style"}),b=a.marker,x=b.line,E=p({},x.width,{dflt:0}),A=p({width:E,editType:"calc"},u("marker.line")),P=p({line:A,editType:"calc"},u("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:d});i.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),text:a.text,texttemplate:l({editType:"plot"},{keys:v.eventDataKeys}),hovertext:a.hovertext,hovertemplate:n({},{keys:v.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:p({},_,{}),insidetextfont:p({},_,{}),outsidetextfont:p({},_,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:p({},a.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:P,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:a.selected.marker.opacity,color:a.selected.marker.color,editType:"style"},textfont:a.selected.textfont,editType:"style"},unselected:{marker:{opacity:a.unselected.marker.opacity,color:a.unselected.marker.color,editType:"style"},textfont:a.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":110,"../../components/drawing/attributes":124,"../../lib/extend":238,"../../plots/cartesian/axis_format_attributes":294,"../../plots/font_attributes":319,"../../plots/template_attributes":326,"../scatter/attributes":367,"./constants":339}],338:[function(e,i,o){var a=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/align_period"),n=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/calc"),u=e("./arrays_to_calcdata"),h=e("../scatter/calc_selection");i.exports=function(d,p){var _=a.getFromId(d,p.xaxis||"x"),b=a.getFromId(d,p.yaxis||"y"),x,E,A,P,D,R,S={msUTC:!!(p.base||p.base===0)};p.orientation==="h"?(x=_.makeCalcdata(p,"x",S),A=b.makeCalcdata(p,"y"),P=s(p,b,"y",A),D=!!p.yperiodalignment,R="y"):(x=b.makeCalcdata(p,"y",S),A=_.makeCalcdata(p,"x"),P=s(p,_,"x",A),D=!!p.xperiodalignment,R="x"),E=P.vals;for(var I=Math.min(E.length,x.length),T=new Array(I),M=0;M<I;M++)T[M]={p:E[M],s:x[M]},D&&(T[M].orig_p=A[M],T[M][R+"End"]=P.ends[M],T[M][R+"Start"]=P.starts[M]),p.ids&&(T[M].id=String(p.ids[M]));return n(p,"marker")&&l(d,p,{vals:p.marker.color,containerStr:"marker",cLetter:"c"}),n(p,"marker.line")&&l(d,p,{vals:p.marker.line.color,containerStr:"marker.line",cLetter:"c"}),u(T,p),h(T,p),T}},{"../../components/colorscale/calc":111,"../../components/colorscale/helpers":114,"../../plots/cartesian/align_period":288,"../../plots/cartesian/axes":291,"../scatter/calc_selection":369,"./arrays_to_calcdata":336}],339:[function(e,i,o){i.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],340:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib").isArrayOrTypedArray,n=e("../../constants/numerical").BADNUM,l=e("../../registry"),u=e("../../plots/cartesian/axes"),h=e("../../plots/cartesian/constraints").getAxisGroup,v=e("./sieve.js");function d(j,H){for(var Y=H.xaxis,J=H.yaxis,ne=j._fullLayout,q=j._fullData,we=j.calcdata,ee=[],X=[],re=0;re<q.length;re++){var de=q[re];if(de.visible===!0&&l.traceIs(de,"bar")&&de.xaxis===Y._id&&de.yaxis===J._id&&(de.orientation==="h"?ee.push(we[re]):X.push(we[re]),de._computePh))for(var me=j.calcdata[re],xe=0;xe<me.length;xe++)typeof me[xe].ph0=="function"&&(me[xe].ph0=me[xe].ph0()),typeof me[xe].ph1=="function"&&(me[xe].ph1=me[xe].ph1())}var He={xCat:Y.type==="category"||Y.type==="multicategory",yCat:J.type==="category"||J.type==="multicategory",mode:ne.barmode,norm:ne.barnorm,gap:ne.bargap,groupgap:ne.bargroupgap};p(j,Y,J,X,He),p(j,J,Y,ee,He)}function p(j,H,Y,J,ne){if(!!J.length){var q,we,ee,X,re;switch(_(Y,J),ne.mode){case"overlay":b(H,Y,J,ne);break;case"group":for(q=[],we=[],ee=0;ee<J.length;ee++)X=J[ee],re=X[0].trace,re.offset===void 0?we.push(X):q.push(X);we.length&&x(j,H,Y,we,ne),q.length&&b(H,Y,q,ne);break;case"stack":case"relative":for(q=[],we=[],ee=0;ee<J.length;ee++)X=J[ee],re=X[0].trace,re.base===void 0?we.push(X):q.push(X);we.length&&E(j,H,Y,we,ne),q.length&&b(H,Y,q,ne);break}F(J,H)}}function _(j,H){var Y,J;for(Y=0;Y<H.length;Y++){var ne=H[Y],q=ne[0].trace,we=q.type==="funnel"?q._base:q.base,ee,X=q.orientation==="h"?q.xcalendar:q.ycalendar,re=j.type==="category"||j.type==="multicategory"?function(){return null}:j.d2c;if(s(we)){for(J=0;J<Math.min(we.length,ne.length);J++)ee=re(we[J],0,X),a(ee)?(ne[J].b=+ee,ne[J].hasB=1):ne[J].b=0;for(;J<ne.length;J++)ne[J].b=0}else{ee=re(we,0,X);var de=a(ee);for(ee=de?ee:0,J=0;J<ne.length;J++)ne[J].b=ee,de&&(ne[J].hasB=1)}}}function b(j,H,Y,J){for(var ne=0;ne<Y.length;ne++){var q=Y[ne],we=new v([q],{posAxis:j,sepNegVal:!1,overlapNoMerge:!J.norm});A(j,we,J),J.norm?(M(we),U(H,we,J)):I(H,we)}}function x(j,H,Y,J,ne){var q=new v(J,{posAxis:H,sepNegVal:!1,overlapNoMerge:!ne.norm});P(j,H,q,ne),z(q,H),ne.norm?(M(q),U(Y,q,ne)):I(Y,q)}function E(j,H,Y,J,ne){var q=new v(J,{posAxis:H,sepNegVal:ne.mode==="relative",overlapNoMerge:!(ne.norm||ne.mode==="stack"||ne.mode==="relative")});A(H,q,ne),T(Y,q,ne);for(var we=0;we<J.length;we++)for(var ee=J[we],X=0;X<ee.length;X++){var re=ee[X];if(re.s!==n){var de=re.b+re.s===q.get(re.p,re.s);de&&(re._outmost=!0)}}ne.norm&&U(Y,q,ne)}function A(j,H,Y){for(var J=H.minDiff,ne=H.traces,q=J*(1-Y.gap),we=q,ee=we*(1-(Y.groupgap||0)),X=-ee/2,re=0;re<ne.length;re++){var de=ne[re],me=de[0].t;me.barwidth=ee,me.poffset=X,me.bargroupwidth=q,me.bardelta=J}H.binWidth=ne[0][0].t.barwidth/100,D(H),R(j,H),S(j,H)}function P(j,H,Y,J){for(var ne=j._fullLayout,q=Y.positions,we=Y.distinctPositions,ee=Y.minDiff,X=Y.traces,re=X.length,de=q.length!==we.length,me=ee*(1-J.gap),xe=h(ne,H._id)+X[0][0].trace.orientation,He=ne._alignmentOpts[xe]||{},Re=0;Re<re;Re++){var Ee=X[Re],ke=Ee[0].trace,$=He[ke.alignmentgroup]||{},le=Object.keys($.offsetGroups||{}).length,K;le?K=me/le:K=de?me/re:me;var te=K*(1-(J.groupgap||0)),ie;le?ie=((2*ke._offsetIndex+1-le)*K-te)/2:ie=de?((2*Re+1-re)*K-te)/2:-te/2;var ce=Ee[0].t;ce.barwidth=te,ce.poffset=ie,ce.bargroupwidth=me,ce.bardelta=ee}Y.binWidth=X[0][0].t.barwidth/100,D(Y),R(H,Y),S(H,Y,de)}function D(j){var H=j.traces,Y,J;for(Y=0;Y<H.length;Y++){var ne=H[Y],q=ne[0],we=q.trace,ee=q.t,X=we._offset||we.offset,re=ee.poffset,de;if(s(X)){for(de=Array.prototype.slice.call(X,0,ne.length),J=0;J<de.length;J++)a(de[J])||(de[J]=re);for(J=de.length;J<ne.length;J++)de.push(re);ee.poffset=de}else X!==void 0&&(ee.poffset=X);var me=we._width||we.width,xe=ee.barwidth;if(s(me)){var He=Array.prototype.slice.call(me,0,ne.length);for(J=0;J<He.length;J++)a(He[J])||(He[J]=xe);for(J=He.length;J<ne.length;J++)He.push(xe);if(ee.barwidth=He,X===void 0){for(de=[],J=0;J<ne.length;J++)de.push(re+(xe-He[J])/2);ee.poffset=de}}else me!==void 0&&(ee.barwidth=me,X===void 0&&(ee.poffset=re+(xe-me)/2))}}function R(j,H){for(var Y=H.traces,J=V(j),ne=0;ne<Y.length;ne++)for(var q=Y[ne],we=q[0].t,ee=we.poffset,X=Array.isArray(ee),re=we.barwidth,de=Array.isArray(re),me=0;me<q.length;me++){var xe=q[me],He=xe.w=de?re[me]:re;xe[J]=xe.p+(X?ee[me]:ee)+He/2}}function S(j,H,Y){var J=H.traces,ne=H.minDiff,q=ne/2;u.minDtick(j,H.minDiff,H.distinctPositions[0],Y);for(var we=0;we<J.length;we++){var ee=J[we],X=ee[0],re=X.trace,de=[],me,xe,He,Re;for(Re=0;Re<ee.length;Re++)me=ee[Re],xe=me.p-q,He=me.p+q,de.push(xe,He);if(re.width||re.offset){var Ee=X.t,ke=Ee.poffset,$=Ee.barwidth,le=Array.isArray(ke),K=Array.isArray($);for(Re=0;Re<ee.length;Re++){me=ee[Re];var te=le?ke[Re]:ke,ie=K?$[Re]:$;xe=me.p+te,He=xe+ie,de.push(xe,He)}}re._extremes[j._id]=u.findExtremes(j,de,{padded:!1})}}function I(j,H){for(var Y=H.traces,J=V(j),ne=0;ne<Y.length;ne++){for(var q=Y[ne],we=q[0].trace,ee=[],X=!1,re=0;re<q.length;re++){var de=q[re],me=de.b,xe=me+de.s;de[J]=xe,ee.push(xe),de.hasB&&ee.push(me),(!de.hasB||!de.b)&&(X=!0)}we._extremes[j._id]=u.findExtremes(j,ee,{tozero:X,padded:!0})}}function T(j,H,Y){var J=V(j),ne=H.traces,q,we,ee,X,re,de;for(X=0;X<ne.length;X++)if(q=ne[X],we=q[0].trace,we.type==="funnel")for(re=0;re<q.length;re++)de=q[re],de.s!==n&&H.put(de.p,-.5*de.s);for(X=0;X<ne.length;X++){q=ne[X],we=q[0].trace,ee=we.type==="funnel";var me=[];for(re=0;re<q.length;re++)if(de=q[re],de.s!==n){var xe;ee?xe=de.s:xe=de.s+de.b;var He=H.put(de.p,xe),Re=He+xe;de.b=He,de[J]=Re,Y.norm||(me.push(Re),de.hasB&&me.push(He))}Y.norm||(we._extremes[j._id]=u.findExtremes(j,me,{tozero:!0,padded:!0}))}}function M(j){for(var H=j.traces,Y=0;Y<H.length;Y++)for(var J=H[Y],ne=0;ne<J.length;ne++){var q=J[ne];q.s!==n&&j.put(q.p,q.b+q.s)}}function z(j,H){for(var Y=j.traces,J=0;J<Y.length;J++){var ne=Y[J],q=ne[0].trace;if(q.base===void 0)for(var we=new v([ne],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),ee=0;ee<ne.length;ee++){var X=ne[ee];if(X.p!==n){var re=we.put(X.p,X.b+X.s);re&&(X.b=re)}}}}function U(j,H,Y){var J=H.traces,ne=V(j),q=Y.norm==="fraction"?1:100,we=q/1e9,ee=j.l2c(j.c2l(0)),X=Y.mode==="stack"?q:ee;function re(ie){return a(j.c2l(ie))&&(ie<ee-we||ie>X+we||!a(ee))}for(var de=0;de<J.length;de++){for(var me=J[de],xe=me[0].trace,He=[],Re=!1,Ee=!1,ke=0;ke<me.length;ke++){var $=me[ke];if($.s!==n){var le=Math.abs(q/H.get($.p,$.s));$.b*=le,$.s*=le;var K=$.b,te=K+$.s;$[ne]=te,He.push(te),Ee=Ee||re(te),$.hasB&&(He.push(K),Ee=Ee||re(K)),(!$.hasB||!$.b)&&(Re=!0)}}xe._extremes[j._id]=u.findExtremes(j,He,{tozero:Re,padded:Ee})}}function F(j,H){var Y=V(H),J={},ne,q,we,ee=1/0,X=-1/0;for(ne=0;ne<j.length;ne++)for(we=j[ne],q=0;q<we.length;q++){var re=we[q].p;a(re)&&(ee=Math.min(ee,re),X=Math.max(X,re))}var de=1e4/(X-ee),me=J.round=function(le){return String(Math.round(de*(le-ee)))};for(ne=0;ne<j.length;ne++){we=j[ne],we[0].t.extents=J;var xe=we[0].t.poffset,He=Array.isArray(xe);for(q=0;q<we.length;q++){var Re=we[q],Ee=Re[Y]-Re.w/2;if(a(Ee)){var ke=Re[Y]+Re.w/2,$=me(Re.p);J[$]?J[$]=[Math.min(Ee,J[$][0]),Math.max(ke,J[$][1])]:J[$]=[Ee,ke]}Re.p0=Re.p+(He?xe[q]:xe),Re.p1=Re.p0+Re.w,Re.s0=Re.b,Re.s1=Re.s0+Re.s}}}function V(j){return j._id.charAt(0)}i.exports={crossTraceCalc:d,setGroupPositions:p}},{"../../constants/numerical":224,"../../lib":244,"../../plots/cartesian/axes":291,"../../plots/cartesian/constraints":299,"../../registry":327,"./sieve.js":350,"fast-isnumeric":17}],341:[function(e,i,o){var a=e("../../lib"),s=e("../../components/color"),n=e("../../registry"),l=e("../scatter/xy_defaults"),u=e("../scatter/period_defaults"),h=e("./style_defaults"),v=e("../../plots/cartesian/constraints").getAxisGroup,d=e("./attributes"),p=a.coerceFont;function _(A,P,D,R){function S(U,F){return a.coerce(A,P,d,U,F)}var I=l(A,P,R,S);if(!I){P.visible=!1;return}u(A,P,R,S),S("xhoverformat"),S("yhoverformat"),S("orientation",P.x&&!P.y?"h":"v"),S("base"),S("offset"),S("width"),S("text"),S("hovertext"),S("hovertemplate");var T=S("textposition");E(A,P,R,S,T,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h(A,P,S,D,R);var M=(P.marker.line||{}).color,z=n.getComponentMethod("errorbars","supplyDefaults");z(A,P,M||s.defaultLine,{axis:"y"}),z(A,P,M||s.defaultLine,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(P,S)}function b(A,P,D,R){var S=P.orientation,I=P[{v:"x",h:"y"}[S]+"axis"],T=v(D,I)+S,M=D._alignmentOpts||{},z=R("alignmentgroup"),U=M[T];U||(U=M[T]={});var F=U[z];F?F.traces.push(P):F=U[z]={traces:[P],alignmentIndex:Object.keys(U).length,offsetGroups:{}};var V=R("offsetgroup"),j=F.offsetGroups,H=j[V];V&&(H||(H=j[V]={offsetIndex:Object.keys(j).length}),P._offsetIndex=H.offsetIndex)}function x(A,P){var D,R;function S(T){return a.coerce(R._input,R,d,T)}if(P.barmode==="group")for(var I=0;I<A.length;I++)R=A[I],R.type==="bar"&&(D=R._input,b(D,R,P,S))}function E(A,P,D,R,S,I){I=I||{};var T=I.moduleHasSelected!==!1,M=I.moduleHasUnselected!==!1,z=I.moduleHasConstrain!==!1,U=I.moduleHasCliponaxis!==!1,F=I.moduleHasTextangle!==!1,V=I.moduleHasInsideanchor!==!1,j=!!I.hasPathbar,H=Array.isArray(S)||S==="auto",Y=H||S==="inside",J=H||S==="outside";if(Y||J){var ne=p(R,"textfont",D.font),q=a.extendFlat({},ne),we=A.textfont&&A.textfont.color,ee=!we;if(ee&&delete q.color,p(R,"insidetextfont",q),j){var X=a.extendFlat({},ne);ee&&delete X.color,p(R,"pathbar.textfont",X)}J&&p(R,"outsidetextfont",ne),T&&R("selected.textfont.color"),M&&R("unselected.textfont.color"),z&&R("constraintext"),U&&R("cliponaxis"),F&&R("textangle"),R("texttemplate")}Y&&V&&R("insidetextanchor")}i.exports={supplyDefaults:_,crossTraceDefaults:x,handleGroupingDefaults:b,handleText:E}},{"../../components/color":103,"../../lib":244,"../../plots/cartesian/constraints":299,"../../registry":327,"../scatter/period_defaults":387,"../scatter/xy_defaults":394,"./attributes":337,"./style_defaults":352}],342:[function(e,i,o){i.exports=function(s,n,l){return s.x="xVal"in n?n.xVal:n.x,s.y="yVal"in n?n.yVal:n.y,n.xa&&(s.xaxis=n.xa),n.ya&&(s.yaxis=n.ya),l.orientation==="h"?(s.label=s.y,s.value=s.x):(s.label=s.x,s.value=s.y),s}},{}],343:[function(e,i,o){var a=e("fast-isnumeric"),s=e("tinycolor2"),n=e("../../lib").isArrayOrTypedArray;o.coerceString=function(l,u,h){if(typeof u=="string"){if(u||!l.noBlank)return u}else if((typeof u=="number"||u===!0)&&!l.strict)return String(u);return h!==void 0?h:l.dflt},o.coerceNumber=function(l,u,h){if(a(u)){u=+u;var v=l.min,d=l.max,p=v!==void 0&&u<v||d!==void 0&&u>d;if(!p)return u}return h!==void 0?h:l.dflt},o.coerceColor=function(l,u,h){return s(u).isValid()?u:h!==void 0?h:l.dflt},o.coerceEnumerated=function(l,u,h){return l.coerceNumber&&(u=+u),l.values.indexOf(u)!==-1?u:h!==void 0?h:l.dflt},o.getValue=function(l,u){var h;return Array.isArray(l)?u<l.length&&(h=l[u]):h=l,h},o.getLineWidth=function(l,u){var h=0<u.mlw?u.mlw:n(l.marker.line.width)?0:l.marker.line.width;return h}},{"../../lib":244,"fast-isnumeric":17,tinycolor2:68}],344:[function(e,i,o){var a=e("../../components/fx"),s=e("../../registry"),n=e("../../components/color"),l=e("../../lib").fillText,u=e("./helpers").getLineWidth,h=e("../../plots/cartesian/axes").hoverLabelText,v=e("../../constants/numerical").BADNUM;function d(b,x,E,A,P){var D=p(b,x,E,A,P);if(D){var R=D.cd,S=R[0].trace,I=R[D.index];return D.color=_(S,I),s.getComponentMethod("errorbars","hoverInfo")(I,S,D),[D]}}function p(b,x,E,A,P){var D=b.cd,R=D[0].trace,S=D[0].t,I=A==="closest",T=R.type==="waterfall",M=b.maxHoverDistance,z=b.maxSpikeDistance,U,F,V,j,H,Y,J;R.orientation==="h"?(U=E,F=x,V="y",j="x",H=ke,Y=He):(U=x,F=E,V="x",j="y",Y=ke,H=He);var ne=R[V+"period"],q=I||ne;function we(ye){return X(ye,-1)}function ee(ye){return X(ye,1)}function X(ye,_e){var je=ye.w;return ye[V]+_e*je/2}function re(ye){return ye[V+"End"]-ye[V+"Start"]}var de=I?we:ne?function(ye){return ye.p-re(ye)/2}:function(ye){return Math.min(we(ye),ye.p-S.bardelta/2)},me=I?ee:ne?function(ye){return ye.p+re(ye)/2}:function(ye){return Math.max(ee(ye),ye.p+S.bardelta/2)};function xe(ye,_e,je){return P.finiteRange&&(je=0),a.inbox(ye-U,_e-U,je+Math.min(1,Math.abs(_e-ye)/J)-1)}function He(ye){return xe(de(ye),me(ye),M)}function Re(ye){return xe(we(ye),ee(ye),z)}function Ee(ye){var _e=ye[j];if(T){var je=Math.abs(ye.rawS)||0;F>0?_e+=je:F<0&&(_e-=je)}return _e}function ke(ye){var _e=F,je=ye.b,Je=Ee(ye);return a.inbox(je-_e,Je-_e,M+(Je-_e)/(Je-je)-1)}function $(ye){var _e=F,je=ye.b,Je=Ee(ye);return a.inbox(je-_e,Je-_e,z+(Je-_e)/(Je-je)-1)}var le=b[V+"a"],K=b[j+"a"];J=Math.abs(le.r2c(le.range[1])-le.r2c(le.range[0]));function te(ye){return(H(ye)+Y(ye))/2}var ie=a.getDistanceFunction(A,H,Y,te);if(a.getClosest(D,ie,b),b.index!==!1&&D[b.index].p!==v){q||(de=function(ye){return Math.min(we(ye),ye.p-S.bargroupwidth/2)},me=function(ye){return Math.max(ee(ye),ye.p+S.bargroupwidth/2)});var ce=b.index,ae=D[ce],ve=R.base?ae.b+ae.s:ae.s;b[j+"0"]=b[j+"1"]=K.c2p(ae[j],!0),b[j+"LabelVal"]=ve;var pe=S.extents[S.extents.round(ae.p)];b[V+"0"]=le.c2p(I?de(ae):pe[0],!0),b[V+"1"]=le.c2p(I?me(ae):pe[1],!0);var he=ae.orig_p!==void 0;return b[V+"LabelVal"]=he?ae.orig_p:ae.p,b.labelLabel=h(le,b[V+"LabelVal"],R[V+"hoverformat"]),b.valueLabel=h(K,b[j+"LabelVal"],R[j+"hoverformat"]),b.baseLabel=h(K,ae.b,R[j+"hoverformat"]),b.spikeDistance=($(ae)+Re(ae))/2,b[V+"Spike"]=le.c2p(ae.p,!0),l(ae,R,b),b.hovertemplate=R.hovertemplate,b}}function _(b,x){var E=x.mcc||b.marker.color,A=x.mlcc||b.marker.line.color,P=u(b,x);if(n.opacity(E))return E;if(n.opacity(A)&&P)return A}i.exports={hoverPoints:d,hoverOnBars:p,getTraceColor:_}},{"../../components/color":103,"../../components/fx":143,"../../constants/numerical":224,"../../lib":244,"../../plots/cartesian/axes":291,"../../registry":327,"./helpers":343}],345:[function(e,i,o){i.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":303,"../scatter/marker_colorbar":385,"./arrays_to_calcdata":336,"./attributes":337,"./calc":338,"./cross_trace_calc":340,"./defaults":341,"./event_data":342,"./hover":344,"./layout_attributes":346,"./layout_defaults":347,"./plot":348,"./select":349,"./style":351}],346:[function(e,i,o){i.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],347:[function(e,i,o){var a=e("../../registry"),s=e("../../plots/cartesian/axes"),n=e("../../lib"),l=e("./layout_attributes");i.exports=function(u,h,v){function d(S,I){return n.coerce(u,h,l,S,I)}for(var p=!1,_=!1,b=!1,x={},E=d("barmode"),A=0;A<v.length;A++){var P=v[A];if(a.traceIs(P,"bar")&&P.visible)p=!0;else continue;if(E==="group"){var D=P.xaxis+P.yaxis;x[D]&&(b=!0),x[D]=!0}if(P.visible&&P.type==="histogram"){var R=s.getFromId({_fullLayout:h},P[P.orientation==="v"?"xaxis":"yaxis"]);R.type!=="category"&&(_=!0)}}if(!p){delete h.barmode;return}E!=="overlay"&&d("barnorm"),d("bargap",_&&!b?0:.2),d("bargroupgap")}},{"../../lib":244,"../../plots/cartesian/axes":291,"../../registry":327,"./layout_attributes":346}],348:[function(e,i,o){var a=e("@plotly/d3"),s=e("fast-isnumeric"),n=e("../../lib"),l=e("../../lib/svg_text_utils"),u=e("../../components/color"),h=e("../../components/drawing"),v=e("../../registry"),d=e("../../plots/cartesian/axes").tickText,p=e("./uniform_text"),_=p.recordMinTextSize,b=p.clearMinTextSize,x=e("./style"),E=e("./helpers"),A=e("./constants"),P=e("./attributes"),D=P.text,R=P.textposition,S=e("../../components/fx/helpers").appendArrayPointValue,I=A.TEXTPAD;function T(de){return de.id}function M(de){if(de.ids)return T}function z(de,me){return de<me?1:-1}function U(de,me,xe,He){var Re=[],Ee=[],ke=He?me:xe,$=He?xe:me;return Re[0]=ke.c2p(de.s0,!0),Ee[0]=$.c2p(de.p0,!0),Re[1]=ke.c2p(de.s1,!0),Ee[1]=$.c2p(de.p1,!0),He?[Re,Ee]:[Ee,Re]}function F(de,me,xe,He){if(!me.uniformtext.mode&&V(xe)){var Re;return He&&(Re=He()),de.transition().duration(xe.duration).ease(xe.easing).each("end",function(){Re&&Re()}).each("interrupt",function(){Re&&Re()})}else return de}function V(de){return de&&de.duration>0}function j(de,me,xe,He,Re,Ee){var ke=me.xaxis,$=me.yaxis,le=de._fullLayout;Re||(Re={mode:le.barmode,norm:le.barmode,gap:le.bargap,groupgap:le.bargroupgap},b("bar",le));var K=n.makeTraceGroups(He,xe,"trace bars").each(function(te){var ie=a.select(this),ce=te[0].trace,ae=ce.type==="waterfall",ve=ce.type==="funnel",pe=ce.type==="bar",he=pe||ve,ye=0;ae&&ce.connector.visible&&ce.connector.mode==="between"&&(ye=ce.connector.line.width/2);var _e=ce.orientation==="h",je=V(Re),Je=n.ensureSingle(ie,"g","points"),nt=M(ce),at=Je.selectAll("g.point").data(n.identity,nt);at.enter().append("g").classed("point",!0),at.exit().remove(),at.each(function(Ie,Ke){var Qe=a.select(this),it=U(Ie,ke,$,_e),Ne=it[0][0],ht=it[0][1],Tt=it[1][0],Xt=it[1][1],Nt=(_e?ht-Ne:Xt-Tt)===0;Nt&&he&&E.getLineWidth(ce,Ie)&&(Nt=!1),Nt||(Nt=!s(Ne)||!s(ht)||!s(Tt)||!s(Xt)),Ie.isBlank=Nt,Nt&&(_e?ht=Ne:Xt=Tt),ye&&!Nt&&(_e?(Ne-=z(Ne,ht)*ye,ht+=z(Ne,ht)*ye):(Tt-=z(Tt,Xt)*ye,Xt+=z(Tt,Xt)*ye));var Mt,Vt;if(ce.type==="waterfall"){if(!Nt){var Yt=ce[Ie.dir].marker;Mt=Yt.line.width,Vt=Yt.color}}else Mt=E.getLineWidth(ce,Ie),Vt=Ie.mc||ce.marker.color;function cr(Dr){var $e=a.round(Mt/2%1,2);return Re.gap===0&&Re.groupgap===0?a.round(Math.round(Dr)-$e,2):Dr}function Nr(Dr,$e,pt){return pt&&Dr===$e?Dr:Math.abs(Dr-$e)>=2?cr(Dr):Dr>$e?Math.ceil(Dr):Math.floor(Dr)}if(!de._context.staticPlot){var er=u.opacity(Vt),Wt=er<1||Mt>.01?cr:Nr;Ne=Wt(Ne,ht,_e),ht=Wt(ht,Ne,_e),Tt=Wt(Tt,Xt,!_e),Xt=Wt(Xt,Tt,!_e)}var dr=F(n.ensureSingle(Qe,"path"),le,Re,Ee);if(dr.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ht-Ne)*(Xt-Tt))||Nt&&de._context.staticPlot?"M0,0Z":"M"+Ne+","+Tt+"V"+Xt+"H"+ht+"V"+Tt+"Z").call(h.setClipUrl,me.layerClipId,de),!le.uniformtext.mode&&je){var zr=h.makePointStyleFns(ce);h.singlePointStyle(Ie,dr,ce,zr,de)}H(de,me,Qe,te,Ke,Ne,ht,Tt,Xt,Re,Ee),me.layerClipId&&h.hideOutsideRangePoint(Ie,Qe.select("text"),ke,$,ce.xcalendar,ce.ycalendar)});var Fe=ce.cliponaxis===!1;h.setClipUrl(ie,Fe?null:me.layerClipId,de)});v.getComponentMethod("errorbars","plot")(de,K,me,Re)}function H(de,me,xe,He,Re,Ee,ke,$,le,K,te){var ie=me.xaxis,ce=me.yaxis,ae=de._fullLayout,ve;function pe($e,pt,kt){var Me=n.ensureSingle($e,"text").text(pt).attr({class:"bartext bartext-"+ve,"text-anchor":"middle","data-notex":1}).call(h.font,kt).call(l.convertToTspans,de);return Me}var he=He[0].trace,ye=he.orientation==="h",_e=we(ae,He,Re,ie,ce);ve=ee(he,Re);var je=K.mode==="stack"||K.mode==="relative",Je=He[Re],nt=!je||Je._outmost;if(!_e||ve==="none"||(Je.isBlank||Ee===ke||$===le)&&(ve==="auto"||ve==="inside")){xe.select("text").remove();return}var at=ae.font,Fe=x.getBarColor(He[Re],he),Ie=x.getInsideTextFont(he,Re,at,Fe),Ke=x.getOutsideTextFont(he,Re,at),Qe=xe.datum();ye?ie.type==="log"&&Qe.s0<=0&&(ie.range[0]<ie.range[1]?Ee=0:Ee=ie._length):ce.type==="log"&&Qe.s0<=0&&(ce.range[0]<ce.range[1]?$=ce._length:$=0);var it=Math.abs(ke-Ee)-2*I,Ne=Math.abs(le-$)-2*I,ht,Tt,Xt,Nt,Mt;if(ve==="outside"&&!nt&&!Je.hasB&&(ve="inside"),ve==="auto")if(nt){ve="inside",Mt=n.ensureUniformFontSize(de,Ie),ht=pe(xe,_e,Mt),Tt=h.bBox(ht.node()),Xt=Tt.width,Nt=Tt.height;var Vt=Xt>0&&Nt>0,Yt=Xt<=it&&Nt<=Ne,cr=Xt<=Ne&&Nt<=it,Nr=ye?it>=Xt*(Ne/Nt):Ne>=Nt*(it/Xt);Vt&&(Yt||cr||Nr)?ve="inside":(ve="outside",ht.remove(),ht=null)}else ve="inside";if(!ht){Mt=n.ensureUniformFontSize(de,ve==="outside"?Ke:Ie),ht=pe(xe,_e,Mt);var er=ht.attr("transform");if(ht.attr("transform",""),Tt=h.bBox(ht.node()),Xt=Tt.width,Nt=Tt.height,ht.attr("transform",er),Xt<=0||Nt<=0){ht.remove();return}}var Wt=he.textangle,dr,zr;ve==="outside"?(zr=he.constraintext==="both"||he.constraintext==="outside",dr=q(Ee,ke,$,le,Tt,{isHorizontal:ye,constrained:zr,angle:Wt})):(zr=he.constraintext==="both"||he.constraintext==="inside",dr=ne(Ee,ke,$,le,Tt,{isHorizontal:ye,constrained:zr,angle:Wt,anchor:he.insidetextanchor})),dr.fontSize=Mt.size,_(he.type==="histogram"?"bar":he.type,dr,ae),Je.transform=dr;var Dr=F(ht,ae,K,te);n.setTransormAndDisplay(Dr,dr)}function Y(de){return de==="auto"?0:de}function J(de,me){var xe=Math.PI/180*me,He=Math.abs(Math.sin(xe)),Re=Math.abs(Math.cos(xe));return{x:de.width*Re+de.height*He,y:de.width*He+de.height*Re}}function ne(de,me,xe,He,Re,Ee){var ke=!!Ee.isHorizontal,$=!!Ee.constrained,le=Ee.angle||0,K=Ee.anchor||"end",te=K==="end",ie=K==="start",ce=Ee.leftToRight||0,ae=(ce+1)/2,ve=1-ae,pe=Re.width,he=Re.height,ye=Math.abs(me-de),_e=Math.abs(He-xe),je=ye>2*I&&_e>2*I?I:0;ye-=2*je,_e-=2*je;var Je=Y(le);le==="auto"&&!(pe<=ye&&he<=_e)&&(pe>ye||he>_e)&&(!(pe>_e||he>ye)||pe<he!=ye<_e)&&(Je+=90);var nt=J(Re,Je),at=1;$&&(at=Math.min(1,ye/nt.x,_e/nt.y));var Fe=Re.left*ve+Re.right*ae,Ie=(Re.top+Re.bottom)/2,Ke=(de+I)*ve+(me-I)*ae,Qe=(xe+He)/2,it=0,Ne=0;if(ie||te){var ht=(ke?nt.x:nt.y)/2,Tt=ke?z(de,me):z(xe,He);ke?ie?(Ke=de+Tt*je,it=-Tt*ht):(Ke=me-Tt*je,it=Tt*ht):ie?(Qe=xe+Tt*je,Ne=-Tt*ht):(Qe=He-Tt*je,Ne=Tt*ht)}return{textX:Fe,textY:Ie,targetX:Ke,targetY:Qe,anchorX:it,anchorY:Ne,scale:at,rotate:Je}}function q(de,me,xe,He,Re,Ee){var ke=!!Ee.isHorizontal,$=!!Ee.constrained,le=Ee.angle||0,K=Re.width,te=Re.height,ie=Math.abs(me-de),ce=Math.abs(He-xe),ae;ke?ae=ce>2*I?I:0:ae=ie>2*I?I:0;var ve=1;$&&(ve=ke?Math.min(1,ce/te):Math.min(1,ie/K));var pe=Y(le),he=J(Re,pe),ye=(ke?he.x:he.y)/2,_e=(Re.left+Re.right)/2,je=(Re.top+Re.bottom)/2,Je=(de+me)/2,nt=(xe+He)/2,at=0,Fe=0,Ie=ke?z(me,de):z(xe,He);return ke?(Je=me-Ie*ae,at=Ie*ye):(nt=He+Ie*ae,Fe=-Ie*ye),{textX:_e,textY:je,targetX:Je,targetY:nt,anchorX:at,anchorY:Fe,scale:ve,rotate:pe}}function we(de,me,xe,He,Re){var Ee=me[0].trace,ke=Ee.texttemplate,$;return ke?$=X(de,me,xe,He,Re):Ee.textinfo?$=re(me,xe,He,Re):$=E.getValue(Ee.text,xe),E.coerceString(D,$)}function ee(de,me){var xe=E.getValue(de.textposition,me);return E.coerceEnumerated(R,xe)}function X(de,me,xe,He,Re){var Ee=me[0].trace,ke=n.castOption(Ee,xe,"texttemplate");if(!ke)return"";var $=Ee.type==="histogram",le=Ee.type==="waterfall",K=Ee.type==="funnel",te=Ee.orientation==="h",ie,ce,ae,ve;te?(ie="y",ce=Re,ae="x",ve=He):(ie="x",ce=He,ae="y",ve=Re);function pe(at){return d(ce,ce.c2l(at),!0).text}function he(at){return d(ve,ve.c2l(at),!0).text}var ye=me[xe],_e={};_e.label=ye.p,_e.labelLabel=_e[ie+"Label"]=pe(ye.p);var je=n.castOption(Ee,ye.i,"text");(je===0||je)&&(_e.text=je),_e.value=ye.s,_e.valueLabel=_e[ae+"Label"]=he(ye.s);var Je={};S(Je,Ee,ye.i),($||Je.x===void 0)&&(Je.x=te?_e.value:_e.label),($||Je.y===void 0)&&(Je.y=te?_e.label:_e.value),($||Je.xLabel===void 0)&&(Je.xLabel=te?_e.valueLabel:_e.labelLabel),($||Je.yLabel===void 0)&&(Je.yLabel=te?_e.labelLabel:_e.valueLabel),le&&(_e.delta=+ye.rawS||ye.s,_e.deltaLabel=he(_e.delta),_e.final=ye.v,_e.finalLabel=he(_e.final),_e.initial=_e.final-_e.delta,_e.initialLabel=he(_e.initial)),K&&(_e.value=ye.s,_e.valueLabel=he(_e.value),_e.percentInitial=ye.begR,_e.percentInitialLabel=n.formatPercent(ye.begR),_e.percentPrevious=ye.difR,_e.percentPreviousLabel=n.formatPercent(ye.difR),_e.percentTotal=ye.sumR,_e.percenTotalLabel=n.formatPercent(ye.sumR));var nt=n.castOption(Ee,ye.i,"customdata");return nt&&(_e.customdata=nt),n.texttemplateString(ke,_e,de._d3locale,Je,_e,Ee._meta||{})}function re(de,me,xe,He){var Re=de[0].trace,Ee=Re.orientation==="h",ke=Re.type==="waterfall",$=Re.type==="funnel";function le(nt){var at=Ee?He:xe;return d(at,nt,!0).text}function K(nt){var at=Ee?xe:He;return d(at,+nt,!0).text}var te=Re.textinfo,ie=de[me],ce=te.split("+"),ae=[],ve,pe=function(nt){return ce.indexOf(nt)!==-1};if(pe("label")&&ae.push(le(de[me].p)),pe("text")&&(ve=n.castOption(Re,ie.i,"text"),(ve===0||ve)&&ae.push(ve)),ke){var he=+ie.rawS||ie.s,ye=ie.v,_e=ye-he;pe("initial")&&ae.push(K(_e)),pe("delta")&&ae.push(K(he)),pe("final")&&ae.push(K(ye))}if($){pe("value")&&ae.push(K(ie.s));var je=0;pe("percent initial")&&je++,pe("percent previous")&&je++,pe("percent total")&&je++;var Je=je>1;pe("percent initial")&&(ve=n.formatPercent(ie.begR),Je&&(ve+=" of initial"),ae.push(ve)),pe("percent previous")&&(ve=n.formatPercent(ie.difR),Je&&(ve+=" of previous"),ae.push(ve)),pe("percent total")&&(ve=n.formatPercent(ie.sumR),Je&&(ve+=" of total"),ae.push(ve))}return ae.join("<br>")}i.exports={plot:j,toMoveInsideBar:ne}},{"../../components/color":103,"../../components/drawing":125,"../../components/fx/helpers":139,"../../lib":244,"../../lib/svg_text_utils":267,"../../plots/cartesian/axes":291,"../../registry":327,"./attributes":337,"./constants":339,"./helpers":343,"./style":351,"./uniform_text":353,"@plotly/d3":11,"fast-isnumeric":17}],349:[function(e,i,o){i.exports=function(n,l){var u=n.cd,h=n.xaxis,v=n.yaxis,d=u[0].trace,p=d.type==="funnel",_=d.orientation==="h",b=[],x;if(l===!1)for(x=0;x<u.length;x++)u[x].selected=0;else for(x=0;x<u.length;x++){var E=u[x],A="ct"in E?E.ct:a(E,h,v,_,p);l.contains(A,!1,x,n)?(b.push({pointNumber:x,x:h.c2d(E.x),y:v.c2d(E.y)}),E.selected=1):E.selected=0}return b};function a(s,n,l,u,h){var v=n.c2p(u?s.s0:s.p0,!0),d=n.c2p(u?s.s1:s.p1,!0),p=l.c2p(u?s.p0:s.s0,!0),_=l.c2p(u?s.p1:s.s1,!0);return h?[(v+d)/2,(p+_)/2]:u?[d,(p+_)/2]:[(v+d)/2,_]}},{}],350:[function(e,i,o){i.exports=n;var a=e("../../lib").distinctVals,s=e("../../constants/numerical").BADNUM;function n(l,u){this.traces=l,this.sepNegVal=u.sepNegVal,this.overlapNoMerge=u.overlapNoMerge;for(var h=1/0,v=[],d=0;d<l.length;d++){for(var p=l[d],_=0;_<p.length;_++){var b=p[_];b.p!==s&&v.push(b.p)}p[0]&&p[0].width1&&(h=Math.min(p[0].width1,h))}this.positions=v;var x=a(v);this.distinctPositions=x.vals,x.vals.length===1&&h!==1/0?this.minDiff=h:this.minDiff=Math.min(x.minDiff,h);var E=(u.posAxis||{}).type;(E==="category"||E==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}n.prototype.put=function(u,h){var v=this.getLabel(u,h),d=this.bins[v]||0;return this.bins[v]=d+h,d},n.prototype.get=function(u,h){var v=this.getLabel(u,h);return this.bins[v]||0},n.prototype.getLabel=function(u,h){var v=h<0&&this.sepNegVal?"v":"^",d=this.overlapNoMerge?u:Math.round(u/this.binWidth);return v+d}},{"../../constants/numerical":224,"../../lib":244}],351:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../components/color"),n=e("../../components/drawing"),l=e("../../lib"),u=e("../../registry"),h=e("./uniform_text").resizeText,v=e("./attributes"),d=v.textfont,p=v.insidetextfont,_=v.outsidetextfont,b=e("./helpers");function x(F){var V=a.select(F).selectAll("g.barlayer").selectAll("g.trace");h(F,V,"bar");var j=V.size(),H=F._fullLayout;V.style("opacity",function(Y){return Y[0].trace.opacity}).each(function(Y){(H.barmode==="stack"&&j>1||H.bargap===0&&H.bargroupgap===0&&!Y[0].trace.marker.line.width)&&a.select(this).attr("shape-rendering","crispEdges")}),V.selectAll("g.points").each(function(Y){var J=a.select(this),ne=Y[0].trace;E(J,ne,F)}),u.getComponentMethod("errorbars","style")(V)}function E(F,V,j){n.pointStyle(F.selectAll("path"),V,j),A(F,V,j)}function A(F,V,j){F.selectAll("text").each(function(H){var Y=a.select(this),J=l.ensureUniformFontSize(j,S(Y,H,V,j));n.font(Y,J)})}function P(F,V,j){var H=V[0].trace;H.selectedpoints?D(j,H,F):(E(j,H,F),u.getComponentMethod("errorbars","style")(j))}function D(F,V,j){n.selectedPointStyle(F.selectAll("path"),V),R(F.selectAll("text"),V,j)}function R(F,V,j){F.each(function(H){var Y=a.select(this),J;if(H.selected){J=l.ensureUniformFontSize(j,S(Y,H,V,j));var ne=V.selected.textfont&&V.selected.textfont.color;ne&&(J.color=ne),n.font(Y,J)}else n.selectedTextStyle(Y,V)})}function S(F,V,j,H){var Y=H._fullLayout.font,J=j.textfont;if(F.classed("bartext-inside")){var ne=U(V,j);J=T(j,V.i,Y,ne)}else F.classed("bartext-outside")&&(J=M(j,V.i,Y));return J}function I(F,V,j){return z(d,F.textfont,V,j)}function T(F,V,j,H){var Y=I(F,V,j),J=F._input.textfont===void 0||F._input.textfont.color===void 0||Array.isArray(F.textfont.color)&&F.textfont.color[V]===void 0;return J&&(Y={color:s.contrast(H),family:Y.family,size:Y.size}),z(p,F.insidetextfont,V,Y)}function M(F,V,j){var H=I(F,V,j);return z(_,F.outsidetextfont,V,H)}function z(F,V,j,H){V=V||{};var Y=b.getValue(V.family,j),J=b.getValue(V.size,j),ne=b.getValue(V.color,j);return{family:b.coerceString(F.family,Y,H.family),size:b.coerceNumber(F.size,J,H.size),color:b.coerceColor(F.color,ne,H.color)}}function U(F,V){return V.type==="waterfall"?V[F.dir].marker.color:F.mcc||F.mc||V.marker.color}i.exports={style:x,styleTextPoints:A,styleOnSelect:P,getInsideTextFont:T,getOutsideTextFont:M,getBarColor:U,resizeText:h}},{"../../components/color":103,"../../components/drawing":125,"../../lib":244,"../../registry":327,"./attributes":337,"./helpers":343,"./uniform_text":353,"@plotly/d3":11}],352:[function(e,i,o){var a=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,n=e("../../components/colorscale/defaults"),l=e("../../lib").coercePattern;i.exports=function(h,v,d,p,_){var b=d("marker.color",p),x=s(h,"marker");x&&n(h,v,_,d,{prefix:"marker.",cLetter:"c"}),d("marker.line.color",a.defaultLine),s(h,"marker.line")&&n(h,v,_,d,{prefix:"marker.line.",cLetter:"c"}),d("marker.line.width"),d("marker.opacity"),l(d,"marker.pattern",b,x),d("selected.marker.color"),d("unselected.marker.color")}},{"../../components/color":103,"../../components/colorscale/defaults":113,"../../components/colorscale/helpers":114,"../../lib":244}],353:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../lib");function n(v,d,p){var _=v._fullLayout,b=_["_"+p+"Text_minsize"];if(b){var x=_.uniformtext.mode==="hide",E;switch(p){case"funnelarea":case"pie":case"sunburst":E="g.slice";break;case"treemap":case"icicle":E="g.slice, g.pathbar";break;default:E="g.points > g.point"}d.selectAll(E).each(function(A){var P=A.transform;if(P){P.scale=x&&P.hide?0:b/P.fontSize;var D=a.select(this).select("text");s.setTransormAndDisplay(D,P)}})}}function l(v,d,p){if(p.uniformtext.mode){var _=h(v),b=p.uniformtext.minsize,x=d.scale*d.fontSize;d.hide=x<b,p[_]=p[_]||1/0,d.hide||(p[_]=Math.min(p[_],Math.max(x,b)))}}function u(v,d){var p=h(v);d[p]=void 0}function h(v){return"_"+v+"Text_minsize"}i.exports={recordMinTextSize:l,clearMinTextSize:u,resizeText:n}},{"../../lib":244,"@plotly/d3":11}],354:[function(e,i,o){var a=e("../../plots/attributes"),s=e("../../plots/domain").attributes,n=e("../../plots/font_attributes"),l=e("../../components/color/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,h=e("../../plots/template_attributes").texttemplateAttrs,v=e("../../lib/extend").extendFlat,d=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});i.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:v({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:u({},{keys:["label","color","value","percent","text"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:v({},d,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:v({},d,{}),outsidetextfont:v({},d,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:v({},d,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:s({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:v({},d,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":102,"../../lib/extend":238,"../../plots/attributes":287,"../../plots/domain":318,"../../plots/font_attributes":319,"../../plots/template_attributes":326}],355:[function(e,i,o){var a=e("../../plots/plots");o.name="pie",o.plot=function(s,n,l,u){a.plotBasePlot(o.name,s,n,l,u)},o.clean=function(s,n,l,u){a.cleanBasePlot(o.name,s,n,l,u)}},{"../../plots/plots":325}],356:[function(e,i,o){var a=e("fast-isnumeric"),s=e("tinycolor2"),n=e("../../components/color"),l={};function u(p,_){var b=[],x=p._fullLayout,E=x.hiddenlabels||[],A=_.labels,P=_.marker.colors||[],D=_.values,R=_._length,S=_._hasValues&&R,I,T;if(_.dlabel)for(A=new Array(R),I=0;I<R;I++)A[I]=String(_.label0+I*_.dlabel);var M={},z=h(x["_"+_.type+"colormap"]),U=0,F=!1;for(I=0;I<R;I++){var V,j,H;if(S){if(V=D[I],!a(V))continue;V=+V}else V=1;j=A[I],(j===void 0||j==="")&&(j=I),j=String(j);var Y=M[j];Y===void 0?(M[j]=b.length,H=E.indexOf(j)!==-1,H||(U+=V),b.push({v:V,label:j,color:z(P[I],j),i:I,pts:[I],hidden:H})):(F=!0,T=b[Y],T.v+=V,T.pts.push(I),T.hidden||(U+=V),T.color===!1&&P[I]&&(T.color=z(P[I],j)))}b=b.filter(function(ne){return ne.v>=0});var J=_.type==="funnelarea"?F:_.sort;return J&&b.sort(function(ne,q){return q.v-ne.v}),b[0]&&(b[0].vTotal=U),b}function h(p){return function(b,x){return!b||(b=s(b),!b.isValid())?!1:(b=n.addOpacity(b,b.getAlpha()),p[x]||(p[x]=b),b)}}function v(p,_){var b=(_||{}).type;b||(b="pie");var x=p._fullLayout,E=p.calcdata,A=x[b+"colorway"],P=x["_"+b+"colormap"];x["extend"+b+"colors"]&&(A=d(A,l));for(var D=0,R=0;R<E.length;R++){var S=E[R],I=S[0].trace.type;if(I===b)for(var T=0;T<S.length;T++){var M=S[T];M.color===!1&&(P[M.label]?M.color=P[M.label]:(P[M.label]=M.color=A[D%A.length],D++))}}}function d(p,_){var b,x=JSON.stringify(p),E=_[x];if(!E){for(E=p.slice(),b=0;b<p.length;b++)E.push(s(p[b]).lighten(20).toHexString());for(b=0;b<p.length;b++)E.push(s(p[b]).darken(20).toHexString());_[x]=E}return E}i.exports={calc:u,crossTraceCalc:v,makePullColorFn:h,generateExtendedColors:d}},{"../../components/color":103,"fast-isnumeric":17,tinycolor2:68}],357:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib"),n=e("./attributes"),l=e("../../plots/domain").defaults,u=e("../bar/defaults").handleText;function h(d,p){var _=Array.isArray(d),b=s.isArrayOrTypedArray(p),x=Math.min(_?d.length:1/0,b?p.length:1/0);if(isFinite(x)||(x=0),x&&b){for(var E,A=0;A<x;A++){var P=p[A];if(a(P)&&P>0){E=!0;break}}E||(x=0)}return{hasLabels:_,hasValues:b,len:x}}function v(d,p,_,b){function x(H,Y){return s.coerce(d,p,n,H,Y)}var E=x("labels"),A=x("values"),P=h(E,A),D=P.len;if(p._hasLabels=P.hasLabels,p._hasValues=P.hasValues,!p._hasLabels&&p._hasValues&&(x("label0"),x("dlabel")),!D){p.visible=!1;return}p._length=D;var R=x("marker.line.width");R&&x("marker.line.color"),x("marker.colors"),x("scalegroup");var S=x("text"),I=x("texttemplate"),T;if(I||(T=x("textinfo",Array.isArray(S)?"text+percent":"percent")),x("hovertext"),x("hovertemplate"),I||T&&T!=="none"){var M=x("textposition");u(d,p,b,x,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var z=Array.isArray(M)||M==="auto",U=z||M==="outside";U&&x("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&x("insidetextorientation")}l(p,b,x);var F=x("hole"),V=x("title.text");if(V){var j=x("title.position",F?"middle center":"top center");!F&&j==="middle center"&&(p.title.position="top center"),s.coerceFont(x,"title.font",b.font)}x("sort"),x("direction"),x("rotation"),x("pull")}i.exports={handleLabelsAndValues:h,supplyDefaults:v}},{"../../lib":244,"../../plots/domain":318,"../bar/defaults":341,"./attributes":354,"fast-isnumeric":17}],358:[function(e,i,o){var a=e("../../components/fx/helpers").appendArrayMultiPointValues;i.exports=function(n,l){var u={curveNumber:l.index,pointNumbers:n.pts,data:l._input,fullData:l,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,bbox:n.bbox,v:n.v};return n.pts.length===1&&(u.pointNumber=u.i=n.pts[0]),a(u,l,n.pts),l.type==="funnelarea"&&(delete u.v,delete u.i),u}},{"../../components/fx/helpers":139}],359:[function(e,i,o){var a=e("../../lib");function s(n){return n.indexOf("e")!==-1?n.replace(/[.]?0+e/,"e"):n.indexOf(".")!==-1?n.replace(/[.]?0+$/,""):n}o.formatPiePercent=function(l,u){var h=s((l*100).toPrecision(3));return a.numSeparate(h,u)+"%"},o.formatPieValue=function(l,u){var h=s(l.toPrecision(10));return a.numSeparate(h,u)},o.getFirstFilled=function(l,u){if(!!Array.isArray(l))for(var h=0;h<u.length;h++){var v=l[u[h]];if(v||v===0||v==="")return v}},o.castOption=function(l,u){if(Array.isArray(l))return o.getFirstFilled(l,u);if(l)return l},o.getRotationAngle=function(n){return(n==="auto"?0:n)*Math.PI/180}},{"../../lib":244}],360:[function(e,i,o){i.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":354,"./base_plot":355,"./calc":356,"./defaults":357,"./layout_attributes":361,"./layout_defaults":362,"./plot":363,"./style":364,"./style_one":365}],361:[function(e,i,o){i.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],362:[function(e,i,o){var a=e("../../lib"),s=e("./layout_attributes");i.exports=function(l,u){function h(v,d){return a.coerce(l,u,s,v,d)}h("hiddenlabels"),h("piecolorway",u.colorway),h("extendpiecolors")}},{"../../lib":244,"./layout_attributes":361}],363:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../plots/plots"),n=e("../../components/fx"),l=e("../../components/color"),u=e("../../components/drawing"),h=e("../../lib"),v=h.strScale,d=h.strTranslate,p=e("../../lib/svg_text_utils"),_=e("../bar/uniform_text"),b=_.recordMinTextSize,x=_.clearMinTextSize,E=e("../bar/constants").TEXTPAD,A=e("./helpers"),P=e("./event_data"),D=e("../../lib").isValidTextValue;function R(le,K){var te=le._context.staticPlot,ie=le._fullLayout,ce=ie._size;x("pie",ie),z(K,le),xe(K,ce);var ae=h.makeTraceGroups(ie._pielayer,K,"trace").each(function(ve){var pe=a.select(this),he=ve[0],ye=he.trace;Re(ve),pe.attr("stroke-linejoin","round"),pe.each(function(){var _e=a.select(this).selectAll("g.slice").data(ve);_e.enter().append("g").classed("slice",!0),_e.exit().remove();var je=[[[],[]],[[],[]]],Je=!1;_e.each(function(Ne,ht){if(Ne.hidden){a.select(this).selectAll("path,g").remove();return}Ne.pointNumber=Ne.i,Ne.curveNumber=ye.index,je[Ne.pxmid[1]<0?0:1][Ne.pxmid[0]<0?0:1].push(Ne);var Tt=he.cx,Xt=he.cy,Nt=a.select(this),Mt=Nt.selectAll("path.surface").data([Ne]);if(Mt.enter().append("path").classed("surface",!0).style({"pointer-events":te?"none":"all"}),Nt.call(I,le,ve),ye.pull){var Vt=+A.castOption(ye.pull,Ne.pts)||0;Vt>0&&(Tt+=Vt*Ne.pxmid[0],Xt+=Vt*Ne.pxmid[1])}Ne.cxFinal=Tt,Ne.cyFinal=Xt;function Yt(Dr,$e,pt,kt){var Me=kt*($e[0]-Dr[0]),rt=kt*($e[1]-Dr[1]);return"a"+kt*he.r+","+kt*he.r+" 0 "+Ne.largeArc+(pt?" 1 ":" 0 ")+Me+","+rt}var cr=ye.hole;if(Ne.v===he.vTotal){var Nr="M"+(Tt+Ne.px0[0])+","+(Xt+Ne.px0[1])+Yt(Ne.px0,Ne.pxmid,!0,1)+Yt(Ne.pxmid,Ne.px0,!0,1)+"Z";cr?Mt.attr("d","M"+(Tt+cr*Ne.px0[0])+","+(Xt+cr*Ne.px0[1])+Yt(Ne.px0,Ne.pxmid,!1,cr)+Yt(Ne.pxmid,Ne.px0,!1,cr)+"Z"+Nr):Mt.attr("d",Nr)}else{var er=Yt(Ne.px0,Ne.px1,!0,1);if(cr){var Wt=1-cr;Mt.attr("d","M"+(Tt+cr*Ne.px1[0])+","+(Xt+cr*Ne.px1[1])+Yt(Ne.px1,Ne.px0,!1,cr)+"l"+Wt*Ne.px0[0]+","+Wt*Ne.px0[1]+er+"Z")}else Mt.attr("d","M"+Tt+","+Xt+"l"+Ne.px0[0]+","+Ne.px0[1]+er+"Z")}ke(le,Ne,he);var dr=A.castOption(ye.textposition,Ne.pts),zr=Nt.selectAll("g.slicetext").data(Ne.text&&dr!=="none"?[0]:[]);zr.enter().append("g").classed("slicetext",!0),zr.exit().remove(),zr.each(function(){var Dr=h.ensureSingle(a.select(this),"text","",function(zt){zt.attr("data-notex",1)}),$e=h.ensureUniformFontSize(le,dr==="outside"?T(ye,Ne,ie.font):M(ye,Ne,ie.font));Dr.text(Ne.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(u.font,$e).call(p.convertToTspans,le);var pt=u.bBox(Dr.node()),kt;if(dr==="outside")kt=q(pt,Ne);else if(kt=U(pt,Ne,he),dr==="auto"&&kt.scale<1){var Me=h.ensureUniformFontSize(le,ye.outsidetextfont);Dr.call(u.font,Me),pt=u.bBox(Dr.node()),kt=q(pt,Ne)}var rt=kt.textPosAngle,st=rt===void 0?Ne.pxmid:Ee(he.r,rt);if(kt.targetX=Tt+st[0]*kt.rCenter+(kt.x||0),kt.targetY=Xt+st[1]*kt.rCenter+(kt.y||0),$(kt,pt),kt.outside){var ft=kt.targetY;Ne.yLabelMin=ft-pt.height/2,Ne.yLabelMid=ft,Ne.yLabelMax=ft+pt.height/2,Ne.labelExtraX=0,Ne.labelExtraY=0,Je=!0}kt.fontSize=$e.size,b(ye.type,kt,ie),ve[ht].transform=kt,h.setTransormAndDisplay(Dr,kt)})});var nt=a.select(this).selectAll("g.titletext").data(ye.title.text?[0]:[]);if(nt.enter().append("g").classed("titletext",!0),nt.exit().remove(),nt.each(function(){var Ne=h.ensureSingle(a.select(this),"text","",function(Xt){Xt.attr("data-notex",1)}),ht=ye.title.text;ye._meta&&(ht=h.templateString(ht,ye._meta)),Ne.text(ht).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(u.font,ye.title.font).call(p.convertToTspans,le);var Tt;ye.title.position==="middle center"?Tt=we(he):Tt=ee(he,ce),Ne.attr("transform",d(Tt.x,Tt.y)+v(Math.min(1,Tt.scale))+d(Tt.tx,Tt.ty))}),Je&&me(je,ye),S(_e,ye),Je&&ye.automargin){var at=u.bBox(pe.node()),Fe=ye.domain,Ie=ce.w*(Fe.x[1]-Fe.x[0]),Ke=ce.h*(Fe.y[1]-Fe.y[0]),Qe=(.5*Ie-he.r)/ce.w,it=(.5*Ke-he.r)/ce.h;s.autoMargin(le,"pie."+ye.uid+".automargin",{xl:Fe.x[0]-Qe,xr:Fe.x[1]+Qe,yb:Fe.y[0]-it,yt:Fe.y[1]+it,l:Math.max(he.cx-he.r-at.left,0),r:Math.max(at.right-(he.cx+he.r),0),b:Math.max(at.bottom-(he.cy+he.r),0),t:Math.max(he.cy-he.r-at.top,0),pad:5})}})});setTimeout(function(){ae.selectAll("tspan").each(function(){var ve=a.select(this);ve.attr("dy")&&ve.attr("dy",ve.attr("dy"))})},0)}function S(le,K){le.each(function(te){var ie=a.select(this);if(!te.labelExtraX&&!te.labelExtraY){ie.select("path.textline").remove();return}var ce=ie.select("g.slicetext text");te.transform.targetX+=te.labelExtraX,te.transform.targetY+=te.labelExtraY,h.setTransormAndDisplay(ce,te.transform);var ae=te.cxFinal+te.pxmid[0],ve=te.cyFinal+te.pxmid[1],pe="M"+ae+","+ve,he=(te.yLabelMax-te.yLabelMin)*(te.pxmid[0]<0?-1:1)/4;if(te.labelExtraX){var ye=te.labelExtraX*te.pxmid[1]/te.pxmid[0],_e=te.yLabelMid+te.labelExtraY-(te.cyFinal+te.pxmid[1]);Math.abs(ye)>Math.abs(_e)?pe+="l"+_e*te.pxmid[0]/te.pxmid[1]+","+_e+"H"+(ae+te.labelExtraX+he):pe+="l"+te.labelExtraX+","+ye+"v"+(_e-ye)+"h"+he}else pe+="V"+(te.yLabelMid+te.labelExtraY)+"h"+he;h.ensureSingle(ie,"path","textline").call(l.stroke,K.outsidetextfont.color).attr({"stroke-width":Math.min(2,K.outsidetextfont.size/8),d:pe,fill:"none"})})}function I(le,K,te){var ie=te[0],ce=ie.cx,ae=ie.cy,ve=ie.trace,pe=ve.type==="funnelarea";"_hasHoverLabel"in ve||(ve._hasHoverLabel=!1),"_hasHoverEvent"in ve||(ve._hasHoverEvent=!1),le.on("mouseover",function(he){var ye=K._fullLayout,_e=K._fullData[ve.index];if(!(K._dragging||ye.hovermode===!1)){var je=_e.hoverinfo;if(Array.isArray(je)&&(je=n.castHoverinfo({hoverinfo:[A.castOption(je,he.pts)],_module:ve._module},ye,0)),je==="all"&&(je="label+text+value+percent+name"),_e.hovertemplate||je!=="none"&&je!=="skip"&&je){var Je=he.rInscribed||0,nt=ce+he.pxmid[0]*(1-Je),at=ae+he.pxmid[1]*(1-Je),Fe=ye.separators,Ie=[];if(je&&je.indexOf("label")!==-1&&Ie.push(he.label),he.text=A.castOption(_e.hovertext||_e.text,he.pts),je&&je.indexOf("text")!==-1){var Ke=he.text;h.isValidTextValue(Ke)&&Ie.push(Ke)}he.value=he.v,he.valueLabel=A.formatPieValue(he.v,Fe),je&&je.indexOf("value")!==-1&&Ie.push(he.valueLabel),he.percent=he.v/ie.vTotal,he.percentLabel=A.formatPiePercent(he.percent,Fe),je&&je.indexOf("percent")!==-1&&Ie.push(he.percentLabel);var Qe=_e.hoverlabel,it=Qe.font,Ne=[];n.loneHover({trace:ve,x0:nt-Je*ie.r,x1:nt+Je*ie.r,y:at,_x0:pe?ce+he.TL[0]:nt-Je*ie.r,_x1:pe?ce+he.TR[0]:nt+Je*ie.r,_y0:pe?ae+he.TL[1]:at-Je*ie.r,_y1:pe?ae+he.BL[1]:at+Je*ie.r,text:Ie.join("<br>"),name:_e.hovertemplate||je.indexOf("name")!==-1?_e.name:void 0,idealAlign:he.pxmid[0]<0?"left":"right",color:A.castOption(Qe.bgcolor,he.pts)||he.color,borderColor:A.castOption(Qe.bordercolor,he.pts),fontFamily:A.castOption(it.family,he.pts),fontSize:A.castOption(it.size,he.pts),fontColor:A.castOption(it.color,he.pts),nameLength:A.castOption(Qe.namelength,he.pts),textAlign:A.castOption(Qe.align,he.pts),hovertemplate:A.castOption(_e.hovertemplate,he.pts),hovertemplateLabels:he,eventData:[P(he,_e)]},{container:ye._hoverlayer.node(),outerContainer:ye._paper.node(),gd:K,inOut_bbox:Ne}),he.bbox=Ne[0],ve._hasHoverLabel=!0}ve._hasHoverEvent=!0,K.emit("plotly_hover",{points:[P(he,_e)],event:a.event})}}),le.on("mouseout",function(he){var ye=K._fullLayout,_e=K._fullData[ve.index],je=a.select(this).datum();ve._hasHoverEvent&&(he.originalEvent=a.event,K.emit("plotly_unhover",{points:[P(je,_e)],event:a.event}),ve._hasHoverEvent=!1),ve._hasHoverLabel&&(n.loneUnhover(ye._hoverlayer.node()),ve._hasHoverLabel=!1)}),le.on("click",function(he){var ye=K._fullLayout,_e=K._fullData[ve.index];K._dragging||ye.hovermode===!1||(K._hoverdata=[P(he,_e)],n.click(K,a.event))})}function T(le,K,te){var ie=A.castOption(le.outsidetextfont.color,K.pts)||A.castOption(le.textfont.color,K.pts)||te.color,ce=A.castOption(le.outsidetextfont.family,K.pts)||A.castOption(le.textfont.family,K.pts)||te.family,ae=A.castOption(le.outsidetextfont.size,K.pts)||A.castOption(le.textfont.size,K.pts)||te.size;return{color:ie,family:ce,size:ae}}function M(le,K,te){var ie=A.castOption(le.insidetextfont.color,K.pts);!ie&&le._input.textfont&&(ie=A.castOption(le._input.textfont.color,K.pts));var ce=A.castOption(le.insidetextfont.family,K.pts)||A.castOption(le.textfont.family,K.pts)||te.family,ae=A.castOption(le.insidetextfont.size,K.pts)||A.castOption(le.textfont.size,K.pts)||te.size;return{color:ie||l.contrast(K.color),family:ce,size:ae}}function z(le,K){for(var te,ie,ce=0;ce<le.length;ce++)if(te=le[ce][0],ie=te.trace,ie.title.text){var ae=ie.title.text;ie._meta&&(ae=h.templateString(ae,ie._meta));var ve=u.tester.append("text").attr("data-notex",1).text(ae).call(u.font,ie.title.font).call(p.convertToTspans,K),pe=u.bBox(ve.node(),!0);te.titleBox={width:pe.width,height:pe.height},ve.remove()}}function U(le,K,te){var ie=te.r||K.rpx1,ce=K.rInscribed,ae=K.startangle===K.stopangle;if(ae)return{rCenter:1-ce,scale:0,rotate:0,textPosAngle:0};var ve=K.ring,pe=ve===1&&Math.abs(K.startangle-K.stopangle)===Math.PI*2,he=K.halfangle,ye=K.midangle,_e=te.trace.insidetextorientation,je=_e==="horizontal",Je=_e==="tangential",nt=_e==="radial",at=_e==="auto",Fe=[],Ie;if(!at){var Ke=function(Nt,Mt){if(F(K,Nt)){var Vt=Math.abs(Nt-K.startangle),Yt=Math.abs(Nt-K.stopangle),cr=Vt<Yt?Vt:Yt;Mt==="tan"?Ie=j(le,ie,ve,cr,0):Ie=V(le,ie,ve,cr,Math.PI/2),Ie.textPosAngle=Nt,Fe.push(Ie)}},Qe;if(je||Je){for(Qe=4;Qe>=-4;Qe-=2)Ke(Math.PI*Qe,"tan");for(Qe=4;Qe>=-4;Qe-=2)Ke(Math.PI*(Qe+1),"tan")}if(je||nt){for(Qe=4;Qe>=-4;Qe-=2)Ke(Math.PI*(Qe+1.5),"rad");for(Qe=4;Qe>=-4;Qe-=2)Ke(Math.PI*(Qe+.5),"rad")}}if(pe||at||je){var it=Math.sqrt(le.width*le.width+le.height*le.height);if(Ie={scale:ce*ie*2/it,rCenter:1-ce,rotate:0},Ie.textPosAngle=(K.startangle+K.stopangle)/2,Ie.scale>=1)return Ie;Fe.push(Ie)}(at||nt)&&(Ie=V(le,ie,ve,he,ye),Ie.textPosAngle=(K.startangle+K.stopangle)/2,Fe.push(Ie)),(at||Je)&&(Ie=j(le,ie,ve,he,ye),Ie.textPosAngle=(K.startangle+K.stopangle)/2,Fe.push(Ie));for(var Ne=0,ht=0,Tt=0;Tt<Fe.length;Tt++){var Xt=Fe[Tt].scale;if(ht<Xt&&(ht=Xt,Ne=Tt),!at&&ht>=1)break}return Fe[Ne]}function F(le,K){var te=le.startangle,ie=le.stopangle;return te>K&&K>ie||te<K&&K<ie}function V(le,K,te,ie,ce){K=Math.max(0,K-2*E);var ae=le.width/le.height,ve=J(ae,ie,K,te);return{scale:ve*2/le.height,rCenter:H(ae,ve/K),rotate:Y(ce)}}function j(le,K,te,ie,ce){K=Math.max(0,K-2*E);var ae=le.height/le.width,ve=J(ae,ie,K,te);return{scale:ve*2/le.width,rCenter:H(ae,ve/K),rotate:Y(ce+Math.PI/2)}}function H(le,K){return Math.cos(K)-le*K}function Y(le){return(180/Math.PI*le+720)%180-90}function J(le,K,te,ie){var ce=le+1/(2*Math.tan(K));return te*Math.min(1/(Math.sqrt(ce*ce+.5)+ce),ie/(Math.sqrt(le*le+ie/2)+le))}function ne(le,K){return le.v===K.vTotal&&!K.trace.hole?1:Math.min(1/(1+1/Math.sin(le.halfangle)),le.ring/2)}function q(le,K){var te=K.pxmid[0],ie=K.pxmid[1],ce=le.width/2,ae=le.height/2;return te<0&&(ce*=-1),ie<0&&(ae*=-1),{scale:1,rCenter:1,rotate:0,x:ce+Math.abs(ae)*(ce>0?1:-1)/2,y:ae/(1+te*te/(ie*ie)),outside:!0}}function we(le){var K=Math.sqrt(le.titleBox.width*le.titleBox.width+le.titleBox.height*le.titleBox.height);return{x:le.cx,y:le.cy,scale:le.trace.hole*le.r*2/K,tx:0,ty:-le.titleBox.height/2+le.trace.title.font.size}}function ee(le,K){var te=1,ie=1,ce,ae=le.trace,ve={x:le.cx,y:le.cy},pe={tx:0,ty:0};pe.ty+=ae.title.font.size,ce=de(ae),ae.title.position.indexOf("top")!==-1?(ve.y-=(1+ce)*le.r,pe.ty-=le.titleBox.height):ae.title.position.indexOf("bottom")!==-1&&(ve.y+=(1+ce)*le.r);var he=X(le.r,le.trace.aspectratio),ye=K.w*(ae.domain.x[1]-ae.domain.x[0])/2;return ae.title.position.indexOf("left")!==-1?(ye=ye+he,ve.x-=(1+ce)*he,pe.tx+=le.titleBox.width/2):ae.title.position.indexOf("center")!==-1?ye*=2:ae.title.position.indexOf("right")!==-1&&(ye=ye+he,ve.x+=(1+ce)*he,pe.tx-=le.titleBox.width/2),te=ye/le.titleBox.width,ie=re(le,K)/le.titleBox.height,{x:ve.x,y:ve.y,scale:Math.min(te,ie),tx:pe.tx,ty:pe.ty}}function X(le,K){return le/(K===void 0?1:K)}function re(le,K){var te=le.trace,ie=K.h*(te.domain.y[1]-te.domain.y[0]);return Math.min(le.titleBox.height,ie/2)}function de(le){var K=le.pull;if(!K)return 0;var te;if(Array.isArray(K))for(K=0,te=0;te<le.pull.length;te++)le.pull[te]>K&&(K=le.pull[te]);return K}function me(le,K){var te,ie,ce,ae,ve,pe,he,ye,_e,je,Je,nt,at;function Fe(it,Ne){return it.pxmid[1]-Ne.pxmid[1]}function Ie(it,Ne){return Ne.pxmid[1]-it.pxmid[1]}function Ke(it,Ne){Ne||(Ne={});var ht=Ne.labelExtraY+(ie?Ne.yLabelMax:Ne.yLabelMin),Tt=ie?it.yLabelMin:it.yLabelMax,Xt=ie?it.yLabelMax:it.yLabelMin,Nt=it.cyFinal+ve(it.px0[1],it.px1[1]),Mt=ht-Tt,Vt,Yt,cr,Nr,er,Wt;if(Mt*he>0&&(it.labelExtraY=Mt),!!Array.isArray(K.pull))for(Yt=0;Yt<je.length;Yt++)cr=je[Yt],!(cr===it||(A.castOption(K.pull,it.pts)||0)>=(A.castOption(K.pull,cr.pts)||0))&&((it.pxmid[1]-cr.pxmid[1])*he>0?(Nr=cr.cyFinal+ve(cr.px0[1],cr.px1[1]),Mt=Nr-Tt-it.labelExtraY,Mt*he>0&&(it.labelExtraY+=Mt)):(Xt+it.labelExtraY-Nt)*he>0&&(Vt=3*pe*Math.abs(Yt-je.indexOf(it)),er=cr.cxFinal+ae(cr.px0[0],cr.px1[0]),Wt=er+Vt-(it.cxFinal+it.pxmid[0])-it.labelExtraX,Wt*pe>0&&(it.labelExtraX+=Wt)))}for(ie=0;ie<2;ie++)for(ce=ie?Fe:Ie,ve=ie?Math.max:Math.min,he=ie?1:-1,te=0;te<2;te++){for(ae=te?Math.max:Math.min,pe=te?1:-1,ye=le[ie][te],ye.sort(ce),_e=le[1-ie][te],je=_e.concat(ye),nt=[],Je=0;Je<ye.length;Je++)ye[Je].yLabelMid!==void 0&&nt.push(ye[Je]);for(at=!1,Je=0;ie&&Je<_e.length;Je++)if(_e[Je].yLabelMid!==void 0){at=_e[Je];break}for(Je=0;Je<nt.length;Je++){var Qe=Je&&nt[Je-1];at&&!Je&&(Qe=at),Ke(nt[Je],Qe)}}}function xe(le,K){for(var te=[],ie=0;ie<le.length;ie++){var ce=le[ie][0],ae=ce.trace,ve=ae.domain,pe=K.w*(ve.x[1]-ve.x[0]),he=K.h*(ve.y[1]-ve.y[0]);ae.title.text&&ae.title.position!=="middle center"&&(he-=re(ce,K));var ye=pe/2,_e=he/2;ae.type==="funnelarea"&&!ae.scalegroup&&(_e/=ae.aspectratio),ce.r=Math.min(ye,_e)/(1+de(ae)),ce.cx=K.l+K.w*(ae.domain.x[1]+ae.domain.x[0])/2,ce.cy=K.t+K.h*(1-ae.domain.y[0])-he/2,ae.title.text&&ae.title.position.indexOf("bottom")!==-1&&(ce.cy-=re(ce,K)),ae.scalegroup&&te.indexOf(ae.scalegroup)===-1&&te.push(ae.scalegroup)}He(le,te)}function He(le,K){for(var te,ie,ce,ae=0;ae<K.length;ae++){var ve=1/0,pe=K[ae];for(ie=0;ie<le.length;ie++)if(te=le[ie][0],ce=te.trace,ce.scalegroup===pe){var he;if(ce.type==="pie")he=te.r*te.r;else if(ce.type==="funnelarea"){var ye,_e;ce.aspectratio>1?(ye=te.r,_e=ye/ce.aspectratio):(_e=te.r,ye=_e*ce.aspectratio),ye*=(1+ce.baseratio)/2,he=ye*_e}ve=Math.min(ve,he/te.vTotal)}for(ie=0;ie<le.length;ie++)if(te=le[ie][0],ce=te.trace,ce.scalegroup===pe){var je=ve*te.vTotal;ce.type==="funnelarea"&&(je/=(1+ce.baseratio)/2,je/=ce.aspectratio),te.r=Math.sqrt(je)}}}function Re(le){var K=le[0],te=K.r,ie=K.trace,ce=A.getRotationAngle(ie.rotation),ae=2*Math.PI/K.vTotal,ve="px0",pe="px1",he,ye,_e;if(ie.direction==="counterclockwise"){for(he=0;he<le.length&&le[he].hidden;he++);if(he===le.length)return;ce+=ae*le[he].v,ae*=-1,ve="px1",pe="px0"}for(_e=Ee(te,ce),he=0;he<le.length;he++)ye=le[he],!ye.hidden&&(ye[ve]=_e,ye.startangle=ce,ce+=ae*ye.v/2,ye.pxmid=Ee(te,ce),ye.midangle=ce,ce+=ae*ye.v/2,_e=Ee(te,ce),ye.stopangle=ce,ye[pe]=_e,ye.largeArc=ye.v>K.vTotal/2?1:0,ye.halfangle=Math.PI*Math.min(ye.v/K.vTotal,.5),ye.ring=1-ie.hole,ye.rInscribed=ne(ye,K))}function Ee(le,K){return[le*Math.sin(K),-le*Math.cos(K)]}function ke(le,K,te){var ie=le._fullLayout,ce=te.trace,ae=ce.texttemplate,ve=ce.textinfo;if(!ae&&ve&&ve!=="none"){var pe=ve.split("+"),he=function(Ne){return pe.indexOf(Ne)!==-1},ye=he("label"),_e=he("text"),je=he("value"),Je=he("percent"),nt=ie.separators,at;if(at=ye?[K.label]:[],_e){var Fe=A.getFirstFilled(ce.text,K.pts);D(Fe)&&at.push(Fe)}je&&at.push(A.formatPieValue(K.v,nt)),Je&&at.push(A.formatPiePercent(K.v/te.vTotal,nt)),K.text=at.join("<br>")}function Ie(Ne){return{label:Ne.label,value:Ne.v,valueLabel:A.formatPieValue(Ne.v,ie.separators),percent:Ne.v/te.vTotal,percentLabel:A.formatPiePercent(Ne.v/te.vTotal,ie.separators),color:Ne.color,text:Ne.text,customdata:h.castOption(ce,Ne.i,"customdata")}}if(ae){var Ke=h.castOption(ce,K.i,"texttemplate");if(!Ke)K.text="";else{var Qe=Ie(K),it=A.getFirstFilled(ce.text,K.pts);(D(it)||it==="")&&(Qe.text=it),K.text=h.texttemplateString(Ke,Qe,le._fullLayout._d3locale,Qe,ce._meta||{})}}}function $(le,K){var te=le.rotate*Math.PI/180,ie=Math.cos(te),ce=Math.sin(te),ae=(K.left+K.right)/2,ve=(K.top+K.bottom)/2;le.textX=ae*ie-ve*ce,le.textY=ae*ce+ve*ie,le.noCenter=!0}i.exports={plot:R,formatSliceLabel:ke,transformInsideText:U,determineInsideTextFont:M,positionTitleOutside:ee,prerenderTitles:z,layoutAreas:xe,attachFxHandlers:I,computeTransform:$}},{"../../components/color":103,"../../components/drawing":125,"../../components/fx":143,"../../lib":244,"../../lib/svg_text_utils":267,"../../plots/plots":325,"../bar/constants":339,"../bar/uniform_text":353,"./event_data":358,"./helpers":359,"@plotly/d3":11}],364:[function(e,i,o){var a=e("@plotly/d3"),s=e("./style_one"),n=e("../bar/uniform_text").resizeText;i.exports=function(u){var h=u._fullLayout._pielayer.selectAll(".trace");n(u,h,"pie"),h.each(function(v){var d=v[0],p=d.trace,_=a.select(this);_.style({opacity:p.opacity}),_.selectAll("path.surface").each(function(b){a.select(this).call(s,b,p)})})}},{"../bar/uniform_text":353,"./style_one":365,"@plotly/d3":11}],365:[function(e,i,o){var a=e("../../components/color"),s=e("./helpers").castOption;i.exports=function(l,u,h){var v=h.marker.line,d=s(v.color,u.pts)||a.defaultLine,p=s(v.width,u.pts)||0;l.style("stroke-width",p).call(a.fill,u.color).call(a.stroke,d)}},{"../../components/color":103,"./helpers":359}],366:[function(e,i,o){var a=e("../../lib");i.exports=function(n,l){for(var u=0;u<n.length;u++)n[u].i=u;a.mergeArray(l.text,n,"tx"),a.mergeArray(l.texttemplate,n,"txt"),a.mergeArray(l.hovertext,n,"htx"),a.mergeArray(l.customdata,n,"data"),a.mergeArray(l.textposition,n,"tp"),l.textfont&&(a.mergeArrayCastPositive(l.textfont.size,n,"ts"),a.mergeArray(l.textfont.color,n,"tc"),a.mergeArray(l.textfont.family,n,"tf"));var h=l.marker;if(h){a.mergeArrayCastPositive(h.size,n,"ms"),a.mergeArrayCastPositive(h.opacity,n,"mo"),a.mergeArray(h.symbol,n,"mx"),a.mergeArray(h.angle,n,"ma"),a.mergeArray(h.standoff,n,"mf"),a.mergeArray(h.color,n,"mc");var v=h.line;h.line&&(a.mergeArray(v.color,n,"mlc"),a.mergeArrayCastPositive(v.width,n,"mlw"));var d=h.gradient;d&&d.type!=="none"&&(a.mergeArray(d.type,n,"mgt"),a.mergeArray(d.color,n,"mgc"))}}},{"../../lib":244}],367:[function(e,i,o){var a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,s=e("../../plots/template_attributes").texttemplateAttrs,n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../components/colorscale/attributes"),u=e("../../plots/font_attributes"),h=e("../../components/drawing/attributes").dash,v=e("../../components/drawing/attributes").pattern,d=e("../../components/drawing"),p=e("./constants"),_=e("../../lib/extend").extendFlat;function b(A){return{valType:"any",dflt:0,editType:"calc"}}function x(A){return{valType:"any",editType:"calc"}}function E(A){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}i.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:b(),yperiod:b(),xperiod0:x(),yperiod0:x(),xperiodalignment:E(),yperiodalignment:E(),xhoverformat:a("x"),yhoverformat:a("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:s({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:n({},{keys:p.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:_({},h,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:v,marker:_({symbol:{valType:"enumerated",values:d.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:_({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},l("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},l("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:u({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":110,"../../components/drawing":125,"../../components/drawing/attributes":124,"../../lib/extend":238,"../../plots/cartesian/axis_format_attributes":294,"../../plots/font_attributes":319,"../../plots/template_attributes":326,"./constants":371}],368:[function(e,i,o){var a=e("fast-isnumeric"),s=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/align_period"),u=e("../../constants/numerical").BADNUM,h=e("./subtypes"),v=e("./colorscale_calc"),d=e("./arrays_to_calcdata"),p=e("./calc_selection");function _(D,R){var S=D._fullLayout,I=R._xA=n.getFromId(D,R.xaxis||"x","x"),T=R._yA=n.getFromId(D,R.yaxis||"y","y"),M=I.makeCalcdata(R,"x"),z=T.makeCalcdata(R,"y"),U=l(R,I,"x",M),F=l(R,T,"y",z),V=U.vals,j=F.vals,H=R._length,Y=new Array(H),J=R.ids,ne=P(R,S,I,T),q=!1,we,ee,X,re,de,me;E(S,R);var xe="x",He="y",Re;if(ne)s.pushUnique(ne.traceIndices,R._expandedIndex),we=ne.orientation==="v",we?(He="s",Re="x"):(xe="s",Re="y"),de=ne.stackgaps==="interpolate";else{var Ee=x(R,H);b(D,R,I,T,V,j,Ee)}var ke=!!R.xperiodalignment,$=!!R.yperiodalignment;for(ee=0;ee<H;ee++){var le=Y[ee]={},K=a(V[ee]),te=a(j[ee]);K&&te?(le[xe]=V[ee],le[He]=j[ee],ke&&(le.orig_x=M[ee],le.xEnd=U.ends[ee],le.xStart=U.starts[ee]),$&&(le.orig_y=z[ee],le.yEnd=F.ends[ee],le.yStart=F.starts[ee])):ne&&(we?K:te)?(le[Re]=we?V[ee]:j[ee],le.gap=!0,de?(le.s=u,q=!0):le.s=0):le[xe]=le[He]=u,J&&(le.id=String(J[ee]))}if(d(Y,R),v(D,R),p(Y,R),ne){for(ee=0;ee<Y.length;)Y[ee][Re]===u?Y.splice(ee,1):ee++;if(s.sort(Y,function(ve,pe){return ve[Re]-pe[Re]||ve.i-pe.i}),q){for(ee=0;ee<Y.length-1&&Y[ee].gap;)ee++;for(me=Y[ee].s,me||(me=Y[ee].s=0),X=0;X<ee;X++)Y[X].s=me;for(re=Y.length-1;re>ee&&Y[re].gap;)re--;for(me=Y[re].s,X=Y.length-1;X>re;X--)Y[X].s=me;for(;ee<re;)if(ee++,Y[ee].gap){for(X=ee+1;Y[X].gap;)X++;for(var ie=Y[ee-1][Re],ce=Y[ee-1].s,ae=(Y[X].s-ce)/(Y[X][Re]-ie);ee<X;)Y[ee].s=ce+(Y[ee][Re]-ie)*ae,ee++}}}return Y}function b(D,R,S,I,T,M,z){var U=R._length,F=D._fullLayout,V=S._id,j=I._id,H=F._firstScatter[A(R)]===R.uid,Y=(P(R,F,S,I)||{}).orientation,J=R.fill;S._minDtick=0,I._minDtick=0;var ne={padded:!0},q={padded:!0};z&&(ne.ppad=q.ppad=z);var we=U<2||T[0]!==T[U-1]||M[0]!==M[U-1];we&&(J==="tozerox"||J==="tonextx"&&(H||Y==="h"))?ne.tozero=!0:!(R.error_y||{}).visible&&(J==="tonexty"||J==="tozeroy"||!h.hasMarkers(R)&&!h.hasText(R))&&(ne.padded=!1,ne.ppad=0),we&&(J==="tozeroy"||J==="tonexty"&&(H||Y==="v"))?q.tozero=!0:(J==="tonextx"||J==="tozerox")&&(q.padded=!1),V&&(R._extremes[V]=n.findExtremes(S,T,ne)),j&&(R._extremes[j]=n.findExtremes(I,M,q))}function x(D,R){if(!!h.hasMarkers(D)){var S=D.marker,I=1.6*(D.marker.sizeref||1),T;if(D.marker.sizemode==="area"?T=function(V){return Math.max(Math.sqrt((V||0)/I),3)}:T=function(V){return Math.max((V||0)/I,3)},s.isArrayOrTypedArray(S.size)){var M={type:"linear"};n.setConvert(M);for(var z=M.makeCalcdata(D.marker,"size"),U=new Array(R),F=0;F<R;F++)U[F]=T(z[F]);return U}else return T(S.size)}}function E(D,R){var S=A(R),I=D._firstScatter;I[S]||(I[S]=R.uid)}function A(D){var R=D.stackgroup;return D.xaxis+D.yaxis+D.type+(R?"-"+R:"")}function P(D,R,S,I){var T=D.stackgroup;if(!!T){var M=R._scatterStackOpts[S._id+I._id][T],z=M.orientation==="v"?I:S;if(z.type==="linear"||z.type==="log")return M}}i.exports={calc:_,calcMarkerSize:x,calcAxisExpansion:b,setFirstScatter:E,getStackOpts:P}},{"../../constants/numerical":224,"../../lib":244,"../../plots/cartesian/align_period":288,"../../plots/cartesian/axes":291,"./arrays_to_calcdata":366,"./calc_selection":369,"./colorscale_calc":370,"./subtypes":392,"fast-isnumeric":17}],369:[function(e,i,o){var a=e("../../lib");i.exports=function(n,l){a.isArrayOrTypedArray(l.selectedpoints)&&a.tagSelected(n,l)}},{"../../lib":244}],370:[function(e,i,o){var a=e("../../components/colorscale/helpers").hasColorscale,s=e("../../components/colorscale/calc"),n=e("./subtypes");i.exports=function(u,h){n.hasLines(h)&&a(h,"line")&&s(u,h,{vals:h.line.color,containerStr:"line",cLetter:"c"}),n.hasMarkers(h)&&(a(h,"marker")&&s(u,h,{vals:h.marker.color,containerStr:"marker",cLetter:"c"}),a(h,"marker.line")&&s(u,h,{vals:h.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":111,"../../components/colorscale/helpers":114,"./subtypes":392}],371:[function(e,i,o){i.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],372:[function(e,i,o){var a=e("./calc");i.exports=function(u,h){var v=h.xaxis,d=h.yaxis,p=v._id+d._id,_=u._fullLayout._scatterStackOpts[p];if(!!_){var b=u.calcdata,x,E,A,P,D,R,S,I,T,M,z,U,F,V,j;for(var H in _){M=_[H];var Y=M.traceIndices;if(!!Y.length){for(z=M.stackgaps==="interpolate",U=M.groupnorm,M.orientation==="v"?(F="x",V="y"):(F="y",V="x"),j=new Array(Y.length),x=0;x<j.length;x++)j[x]=!1;R=b[Y[0]];var J=new Array(R.length);for(x=0;x<R.length;x++)J[x]=R[x][F];for(x=1;x<Y.length;x++){for(D=b[Y[x]],E=A=0;E<D.length;E++){for(S=D[E][F];S>J[A]&&A<J.length;A++)s(D,E,J[A],x,j,z,F),E++;if(S!==J[A]){for(P=0;P<x;P++)s(b[Y[P]],A,S,P,j,z,F);J.splice(A,0,S)}A++}for(;A<J.length;A++)s(D,E,J[A],x,j,z,F),E++}var ne=J.length;for(E=0;E<R.length;E++){for(I=R[E][V]=R[E].s,x=1;x<Y.length;x++)D=b[Y[x]],D[0].trace._rawLength=D[0].trace._length,D[0].trace._length=ne,I+=D[E].s,D[E][V]=I;if(U)for(T=(U==="fraction"?I:I/100)||1,x=0;x<Y.length;x++){var q=b[Y[x]][E];q[V]/=T,q.sNorm=q.s/T}}for(x=0;x<Y.length;x++){D=b[Y[x]];var we=D[0].trace,ee=a.calcMarkerSize(we,we._rawLength),X=Array.isArray(ee);if(ee&&j[x]||X){var re=ee;for(ee=new Array(ne),E=0;E<ne;E++)ee[E]=D[E].gap?0:X?re[D[E].i]:re}var de=new Array(ne),me=new Array(ne);for(E=0;E<ne;E++)de[E]=D[E].x,me[E]=D[E].y;a.calcAxisExpansion(u,we,v,d,de,me,ee),D[0].t.orientation=M.orientation}}}}};function s(l,u,h,v,d,p,_){d[v]=!0;var b={i:null,gap:!0,s:0};if(b[_]=h,l.splice(u,0,b),u&&h===l[u-1][_]){var x=l[u-1];b.s=x.s,b.i=x.i,b.gap=x.gap}else p&&(b.s=n(l,u,h,_));u||(l[0].t=l[1].t,l[0].trace=l[1].trace,delete l[1].t,delete l[1].trace)}function n(l,u,h,v){var d=l[u-1],p=l[u+1];return p?d?d.s+(p.s-d.s)*(h-d[v])/(p[v]-d[v]):p.s:d.s}},{"./calc":368}],373:[function(e,i,o){i.exports=function(s){for(var n=0;n<s.length;n++){var l=s[n];if(l.type==="scatter"){var u=l.fill;if(!(u==="none"||u==="toself")&&(l.opacity=void 0,u==="tonexty"||u==="tonextx"))for(var h=n-1;h>=0;h--){var v=s[h];if(v.type==="scatter"&&v.xaxis===l.xaxis&&v.yaxis===l.yaxis){v.opacity=void 0;break}}}}}},{}],374:[function(e,i,o){var a=e("../../lib"),s=e("../../registry"),n=e("./attributes"),l=e("./constants"),u=e("./subtypes"),h=e("./xy_defaults"),v=e("./period_defaults"),d=e("./stack_defaults"),p=e("./marker_defaults"),_=e("./line_defaults"),b=e("./line_shape_defaults"),x=e("./text_defaults"),E=e("./fillcolor_defaults"),A=e("../../lib").coercePattern;i.exports=function(D,R,S,I){function T(Y,J){return a.coerce(D,R,n,Y,J)}var M=h(D,R,I,T);if(M||(R.visible=!1),!!R.visible){v(D,R,I,T),T("xhoverformat"),T("yhoverformat");var z=d(D,R,I,T),U=!z&&M<l.PTS_LINESONLY?"lines+markers":"lines";T("text"),T("hovertext"),T("mode",U),u.hasLines(R)&&(_(D,R,S,I,T,{backoff:!0}),b(D,R,T),T("connectgaps"),T("line.simplify")),u.hasMarkers(R)&&p(D,R,S,I,T,{gradient:!0}),u.hasText(R)&&(T("texttemplate"),x(D,R,I,T));var F=[];(u.hasMarkers(R)||u.hasText(R))&&(T("cliponaxis"),T("marker.maxdisplayed"),F.push("points")),T("fill",z?z.fillDflt:"none"),R.fill!=="none"&&(E(D,R,S,T),u.hasLines(R)||b(D,R,T),A(T,"fillpattern",R.fillcolor,!1));var V=(R.line||{}).color,j=(R.marker||{}).color;(R.fill==="tonext"||R.fill==="toself")&&F.push("fills"),T("hoveron",F.join("+")||"points"),R.hoveron!=="fills"&&T("hovertemplate");var H=s.getComponentMethod("errorbars","supplyDefaults");H(D,R,V||j||S,{axis:"y"}),H(D,R,V||j||S,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(R,T)}}},{"../../lib":244,"../../registry":327,"./attributes":367,"./constants":371,"./fillcolor_defaults":375,"./line_defaults":380,"./line_shape_defaults":382,"./marker_defaults":386,"./period_defaults":387,"./stack_defaults":390,"./subtypes":392,"./text_defaults":393,"./xy_defaults":394}],375:[function(e,i,o){var a=e("../../components/color"),s=e("../../lib").isArrayOrTypedArray;i.exports=function(l,u,h,v){var d=!1;if(u.marker){var p=u.marker.color,_=(u.marker.line||{}).color;p&&!s(p)?d=p:_&&!s(_)&&(d=_)}v("fillcolor",a.addOpacity((u.line||{}).color||d||h,.5))}},{"../../components/color":103,"../../lib":244}],376:[function(e,i,o){var a=e("../../plots/cartesian/axes");i.exports=function(n,l,u){var h={},v={_fullLayout:u},d=a.getFromTrace(v,l,"x"),p=a.getFromTrace(v,l,"y");return h.xLabel=a.tickText(d,d.c2l(n.x),!0).text,h.yLabel=a.tickText(p,p.c2l(n.y),!0).text,h}},{"../../plots/cartesian/axes":291}],377:[function(e,i,o){var a=e("../../components/color"),s=e("./subtypes");i.exports=function(l,u){var h,v;if(l.mode==="lines")return h=l.line.color,h&&a.opacity(h)?h:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var d=u.mcc||(l.marker||{}).color,p=u.mlcc||((l.marker||{}).line||{}).color;return v=d&&a.opacity(d)?d:p&&a.opacity(p)&&(u.mlw||((l.marker||{}).line||{}).width)?p:"",v?a.opacity(v)<.3?a.addOpacity(v,.3):v:(h=(l.line||{}).color,h&&a.opacity(h)&&s.hasLines(l)&&l.line.width?h:l.fillcolor)}},{"../../components/color":103,"./subtypes":392}],378:[function(e,i,o){var a=e("../../lib"),s=e("../../components/fx"),n=e("../../registry"),l=e("./get_trace_color"),u=e("../../components/color"),h=a.fillText;i.exports=function(d,p,_,b){var x=d.cd,E=x[0].trace,A=d.xa,P=d.ya,D=A.c2p(p),R=P.c2p(_),S=[D,R],I=E.hoveron||"",T=E.mode.indexOf("markers")!==-1?3:.5,M=!!E.xperiodalignment,z=!!E.yperiodalignment;if(I.indexOf("points")!==-1){var U=function(ye){if(M){var _e=A.c2p(ye.xStart),je=A.c2p(ye.xEnd);return D>=Math.min(_e,je)&&D<=Math.max(_e,je)?0:1/0}var Je=Math.max(3,ye.mrc||0),nt=1-1/Je,at=Math.abs(A.c2p(ye.x)-D);return at<Je?nt*at/Je:at-Je+nt},F=function(ye){if(z){var _e=P.c2p(ye.yStart),je=P.c2p(ye.yEnd);return R>=Math.min(_e,je)&&R<=Math.max(_e,je)?0:1/0}var Je=Math.max(3,ye.mrc||0),nt=1-1/Je,at=Math.abs(P.c2p(ye.y)-R);return at<Je?nt*at/Je:at-Je+nt},V=function(ye){var _e=Math.max(T,ye.mrc||0),je=A.c2p(ye.x)-D,Je=P.c2p(ye.y)-R;return Math.max(Math.sqrt(je*je+Je*Je)-_e,1-T/_e)},j=s.getDistanceFunction(b,U,F,V);if(s.getClosest(x,j,d),d.index!==!1){var H=x[d.index],Y=A.c2p(H.x,!0),J=P.c2p(H.y,!0),ne=H.mrc||1;d.index=H.i;var q=x[0].t.orientation,we=q&&(H.sNorm||H.s),ee=q==="h"?we:H.orig_x!==void 0?H.orig_x:H.x,X=q==="v"?we:H.orig_y!==void 0?H.orig_y:H.y;return a.extendFlat(d,{color:l(E,H),x0:Y-ne,x1:Y+ne,xLabelVal:ee,y0:J-ne,y1:J+ne,yLabelVal:X,spikeDistance:V(H),hovertemplate:E.hovertemplate}),h(H,E,d),n.getComponentMethod("errorbars","hoverInfo")(H,E,d),[d]}}if(I.indexOf("fills")!==-1&&E._polygons){var re=E._polygons,de=[],me=!1,xe=1/0,He=-1/0,Re=1/0,Ee=-1/0,ke,$,le,K,te,ie,ce,ae,ve;for(ke=0;ke<re.length;ke++)le=re[ke],le.contains(S)&&(me=!me,de.push(le),Re=Math.min(Re,le.ymin),Ee=Math.max(Ee,le.ymax));if(me){Re=Math.max(Re,0),Ee=Math.min(Ee,P._length);var pe=(Re+Ee)/2;for(ke=0;ke<de.length;ke++)for(K=de[ke].pts,$=1;$<K.length;$++)ae=K[$-1][1],ve=K[$][1],ae>pe!=ve>=pe&&(ie=K[$-1][0],ce=K[$][0],ve-ae&&(te=ie+(ce-ie)*(pe-ae)/(ve-ae),xe=Math.min(xe,te),He=Math.max(He,te)));xe=Math.max(xe,0),He=Math.min(He,A._length);var he=u.defaultLine;return u.opacity(E.fillcolor)?he=E.fillcolor:u.opacity((E.line||{}).color)&&(he=E.line.color),a.extendFlat(d,{distance:d.maxHoverDistance,x0:xe,x1:He,y0:pe,y1:pe,color:he,hovertemplate:!1}),delete d.index,E.text&&!Array.isArray(E.text)?d.text=String(E.text):d.text=E.name,[d]}}}},{"../../components/color":103,"../../components/fx":143,"../../lib":244,"../../registry":327,"./get_trace_color":377}],379:[function(e,i,o){var a=e("./subtypes");i.exports={hasLines:a.hasLines,hasMarkers:a.hasMarkers,hasText:a.hasText,isBubble:a.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":303,"./arrays_to_calcdata":366,"./attributes":367,"./calc":368,"./cross_trace_calc":372,"./cross_trace_defaults":373,"./defaults":374,"./format_labels":376,"./hover":378,"./marker_colorbar":385,"./plot":388,"./select":389,"./style":391,"./subtypes":392}],380:[function(e,i,o){var a=e("../../lib").isArrayOrTypedArray,s=e("../../components/colorscale/helpers").hasColorscale,n=e("../../components/colorscale/defaults");i.exports=function(u,h,v,d,p,_){_||(_={});var b=(u.marker||{}).color;if(p("line.color",v),s(u,"line"))n(u,h,d,p,{prefix:"line.",cLetter:"c"});else{var x=(a(b)?!1:b)||v;p("line.color",x)}p("line.width"),_.noDash||p("line.dash"),_.backoff&&p("line.backoff")}},{"../../components/colorscale/defaults":113,"../../components/colorscale/helpers":114,"../../lib":244}],381:[function(e,i,o){var a=e("../../components/drawing"),s=e("../../constants/numerical"),n=s.BADNUM,l=s.LOG_CLIP,u=l+.5,h=l-.5,v=e("../../lib"),d=v.segmentsIntersect,p=v.constrain,_=e("./constants");i.exports=function(x,E){var A=E.trace||{},P=E.xaxis,D=E.yaxis,R=P.type==="log",S=D.type==="log",I=P._length,T=D._length,M=E.backoff,z=A.marker,U=E.connectGaps,F=E.baseTolerance,V=E.shape,j=V==="linear",H=A.fill&&A.fill!=="none",Y=[],J=_.minTolerance,ne=x.length,q=new Array(ne),we=0,ee,X,re,de,me,xe,He,Re,Ee,ke,$,le,K,te,ie,ce;function ae(Ae){var Oe=x[Ae];if(!Oe)return!1;var We=E.linearized?P.l2p(Oe.x):P.c2p(Oe.x),Ve=E.linearized?D.l2p(Oe.y):D.c2p(Oe.y);if(We===n){if(R&&(We=P.c2p(Oe.x,!0)),We===n)return!1;S&&Ve===n&&(We*=Math.abs(P._m*T*(P._m>0?u:h)/(D._m*I*(D._m>0?u:h)))),We*=1e3}if(Ve===n){if(S&&(Ve=D.c2p(Oe.y,!0)),Ve===n)return!1;Ve*=1e3}return[We,Ve]}function ve(Ae,Oe,We,Ve){var lt=We-Ae,mt=Ve-Oe,dt=.5-Ae,At=.5-Oe,Bt=lt*lt+mt*mt,ir=lt*dt+mt*At;if(ir>0&&ir<Bt){var tr=dt*mt-At*lt;if(tr*tr<Bt)return!0}}var pe,he;function ye(Ae,Oe){var We=Ae[0]/I,Ve=Ae[1]/T,lt=Math.max(0,-We,We-1,-Ve,Ve-1);return lt&&pe!==void 0&&ve(We,Ve,pe,he)&&(lt=0),lt&&Oe&&ve(We,Ve,Oe[0]/I,Oe[1]/T)&&(lt=0),(1+_.toleranceGrowth*lt)*F}function _e(Ae,Oe){var We=Ae[0]-Oe[0],Ve=Ae[1]-Oe[1];return Math.sqrt(We*We+Ve*Ve)}var je=_.maxScreensAway,Je=-I*je,nt=I*(1+je),at=-T*je,Fe=T*(1+je),Ie=[[Je,at,nt,at],[nt,at,nt,Fe],[nt,Fe,Je,Fe],[Je,Fe,Je,at]],Ke,Qe,it,Ne,ht,Tt;function Xt(Ae,Oe){for(var We=[],Ve=0,lt=0;lt<4;lt++){var mt=Ie[lt],dt=d(Ae[0],Ae[1],Oe[0],Oe[1],mt[0],mt[1],mt[2],mt[3]);dt&&(!Ve||Math.abs(dt.x-We[0][0])>1||Math.abs(dt.y-We[0][1])>1)&&(dt=[dt.x,dt.y],Ve&&_e(dt,Ae)<_e(We[0],Ae)?We.unshift(dt):We.push(dt),Ve++)}return We}function Nt(Ae){if(Ae[0]<Je||Ae[0]>nt||Ae[1]<at||Ae[1]>Fe)return[p(Ae[0],Je,nt),p(Ae[1],at,Fe)]}function Mt(Ae,Oe){if(Ae[0]===Oe[0]&&(Ae[0]===Je||Ae[0]===nt)||Ae[1]===Oe[1]&&(Ae[1]===at||Ae[1]===Fe))return!0}function Vt(Ae,Oe){var We=[],Ve=Nt(Ae),lt=Nt(Oe);return Ve&&lt&&Mt(Ve,lt)||(Ve&&We.push(Ve),lt&&We.push(lt)),We}function Yt(Ae,Oe,We){return function(Ve,lt){var mt=Nt(Ve),dt=Nt(lt),At=[];if(mt&&dt&&Mt(mt,dt))return At;mt&&At.push(mt),dt&&At.push(dt);var Bt=2*v.constrain((Ve[Ae]+lt[Ae])/2,Oe,We)-((mt||Ve)[Ae]+(dt||lt)[Ae]);if(Bt){var ir;mt&&dt?ir=Bt>0==mt[Ae]>dt[Ae]?mt:dt:ir=mt||dt,ir[Ae]+=Bt}return At}}var cr;V==="linear"||V==="spline"?cr=Xt:V==="hv"||V==="vh"?cr=Vt:V==="hvh"?cr=Yt(0,Je,nt):V==="vhv"&&(cr=Yt(1,at,Fe));function Nr(Ae,Oe){var We=Oe[0]-Ae[0],Ve=(Oe[1]-Ae[1])/We,lt=(Ae[1]*Oe[0]-Oe[1]*Ae[0])/We;return lt>0?[Ve>0?Je:nt,Fe]:[Ve>0?nt:Je,at]}function er(Ae){var Oe=Ae[0],We=Ae[1],Ve=Oe===q[we-1][0],lt=We===q[we-1][1];if(!(Ve&&lt))if(we>1){var mt=Oe===q[we-2][0],dt=We===q[we-2][1];Ve&&(Oe===Je||Oe===nt)&&mt?dt?we--:q[we-1]=Ae:lt&&(We===at||We===Fe)&&dt?mt?we--:q[we-1]=Ae:q[we++]=Ae}else q[we++]=Ae}function Wt(Ae){q[we-1][0]!==Ae[0]&&q[we-1][1]!==Ae[1]&&er([it,Ne]),er(Ae),ht=null,it=Ne=0}var dr=v.isArrayOrTypedArray(z);function zr(Ae){if(Ae&&M&&(Ae.i=ee,Ae.d=x,Ae.trace=A,Ae.marker=dr?z[Ae.i]:z,Ae.backoff=M),pe=Ae[0]/I,he=Ae[1]/T,Ke=Ae[0]<Je?Je:Ae[0]>nt?nt:0,Qe=Ae[1]<at?at:Ae[1]>Fe?Fe:0,Ke||Qe){if(!we)q[we++]=[Ke||Ae[0],Qe||Ae[1]];else if(ht){var Oe=cr(ht,Ae);Oe.length>1&&(Wt(Oe[0]),q[we++]=Oe[1])}else Tt=cr(q[we-1],Ae)[0],q[we++]=Tt;var We=q[we-1];Ke&&Qe&&(We[0]!==Ke||We[1]!==Qe)?(ht&&(it!==Ke&&Ne!==Qe?er(it&&Ne?Nr(ht,Ae):[it||Ke,Ne||Qe]):it&&Ne&&er([it,Ne])),er([Ke,Qe])):it-Ke&&Ne-Qe&&er([Ke||it,Qe||Ne]),ht=Ae,it=Ke,Ne=Qe}else ht&&Wt(cr(ht,Ae)[0]),q[we++]=Ae}for(ee=0;ee<ne;ee++)if(X=ae(ee),!!X){for(we=0,ht=null,zr(X),ee++;ee<ne;ee++){if(de=ae(ee),!de){if(U)continue;break}if(!j||!E.simplify){zr(de);continue}var Dr=ae(ee+1);if(ke=_e(de,X),!(!(H&&(we===0||we===ne-1))&&ke<ye(de,Dr)*J)){for(Re=[(de[0]-X[0])/ke,(de[1]-X[1])/ke],me=X,$=ke,le=te=ie=0,He=!1,re=de,ee++;ee<x.length;ee++){if(xe=Dr,Dr=ae(ee+1),!xe){if(U)continue;break}if(Ee=[xe[0]-X[0],xe[1]-X[1]],ce=Ee[0]*Re[1]-Ee[1]*Re[0],te=Math.min(te,ce),ie=Math.max(ie,ce),ie-te>ye(xe,Dr))break;re=xe,K=Ee[0]*Re[0]+Ee[1]*Re[1],K>$?($=K,de=xe,He=!1):K<le&&(le=K,me=xe,He=!0)}if(He?(zr(de),re!==me&&zr(me)):(me!==X&&zr(me),re!==de&&zr(de)),zr(re),ee>=x.length||!xe)break;zr(xe),X=xe}}ht&&er([it||ht[0],Ne||ht[1]]),Y.push(q.slice(0,we))}var $e=V.slice(V.length-1);if(M&&$e!=="h"&&$e!=="v"){for(var pt=!1,kt=-1,Me=[],rt=0;rt<Y.length;rt++)for(var st=0;st<Y[rt].length-1;st++){var ft=Y[rt][st],zt=Y[rt][st+1],Ue=a.applyBackoff(zt,ft);(Ue[0]!==zt[0]||Ue[1]!==zt[1])&&(pt=!0),Me[kt+1]||(kt++,Me[kt]=[ft,[Ue[0],Ue[1]]])}return pt?Me:Y}return Y}},{"../../components/drawing":125,"../../constants/numerical":224,"../../lib":244,"./constants":371}],382:[function(e,i,o){i.exports=function(s,n,l){var u=l("line.shape");u==="spline"&&l("line.smoothing")}},{}],383:[function(e,i,o){var a={tonextx:1,tonexty:1,tonext:1};i.exports=function(n,l,u){var h,v,d,p,_,b={},x=!1,E=-1,A=0,P=-1;for(v=0;v<u.length;v++)h=u[v][0].trace,d=h.stackgroup||"",d?d in b?_=b[d]:(_=b[d]=A,A++):h.fill in a&&P>=0?_=P:(_=P=A,A++),_<E&&(x=!0),h._groupIndex=E=_;var D=u.slice();x&&D.sort(function(S,I){var T=S[0].trace,M=I[0].trace;return T._groupIndex-M._groupIndex||T.index-M.index});var R={};for(v=0;v<D.length;v++)h=D[v][0].trace,d=h.stackgroup||"",h.visible===!0?(h._nexttrace=null,h.fill in a&&(p=R[d],h._prevtrace=p||null,p&&(p._nexttrace=h)),h._ownfill=h.fill&&(h.fill.substr(0,6)==="tozero"||h.fill==="toself"||h.fill.substr(0,2)==="to"&&!h._prevtrace),R[d]=h):h._prevtrace=h._nexttrace=h._ownfill=null;return D}},{}],384:[function(e,i,o){var a=e("fast-isnumeric");i.exports=function(n,l){l||(l=2);var u=n.marker,h=u.sizeref||1,v=u.sizemin||0,d=u.sizemode==="area"?function(p){return Math.sqrt(p/h)}:function(p){return p/h};return function(p){var _=d(p/l);return a(_)&&_>0?Math.max(_,v):0}}},{"fast-isnumeric":17}],385:[function(e,i,o){i.exports={container:"marker",min:"cmin",max:"cmax"}},{}],386:[function(e,i,o){var a=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,n=e("../../components/colorscale/defaults"),l=e("./subtypes");i.exports=function(h,v,d,p,_,b){var x=l.isBubble(h),E=(h.line||{}).color,A;if(b=b||{},E&&(d=E),_("marker.symbol"),_("marker.opacity",x?.7:1),_("marker.size"),b.noAngle||(_("marker.angle"),b.noAngleRef||_("marker.angleref"),b.noStandOff||_("marker.standoff")),_("marker.color",d),s(h,"marker")&&n(h,v,p,_,{prefix:"marker.",cLetter:"c"}),b.noSelect||(_("selected.marker.color"),_("unselected.marker.color"),_("selected.marker.size"),_("unselected.marker.size")),b.noLine||(E&&!Array.isArray(E)&&v.marker.color!==E?A=E:x?A=a.background:A=a.defaultLine,_("marker.line.color",A),s(h,"marker.line")&&n(h,v,p,_,{prefix:"marker.line.",cLetter:"c"}),_("marker.line.width",x?1:0)),x&&(_("marker.sizeref"),_("marker.sizemin"),_("marker.sizemode")),b.gradient){var P=_("marker.gradient.type");P!=="none"&&_("marker.gradient.color")}}},{"../../components/color":103,"../../components/colorscale/defaults":113,"../../components/colorscale/helpers":114,"./subtypes":392}],387:[function(e,i,o){var a=e("../../lib").dateTick0,s=e("../../constants/numerical"),n=s.ONEWEEK;function l(u,h){return u%n===0?a(h,1):a(h,0)}i.exports=function(h,v,d,p,_){if(_||(_={x:!0,y:!0}),_.x){var b=p("xperiod");b&&(p("xperiod0",l(b,v.xcalendar)),p("xperiodalignment"))}if(_.y){var x=p("yperiod");x&&(p("yperiod0",l(x,v.ycalendar)),p("yperiodalignment"))}}},{"../../constants/numerical":224,"../../lib":244}],388:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../registry"),n=e("../../lib"),l=n.ensureSingle,u=n.identity,h=e("../../components/drawing"),v=e("./subtypes"),d=e("./line_points"),p=e("./link_traces"),_=e("../../lib/polygon").tester;i.exports=function(P,D,R,S,I,T){var M,z,U=!I,F=!!I&&I.duration>0,V=p(P,D,R);if(M=S.selectAll("g.trace").data(V,function(H){return H[0].trace.uid}),M.enter().append("g").attr("class",function(H){return"trace scatter trace"+H[0].trace.uid}).style("stroke-miterlimit",2),M.order(),b(P,M,D),F){T&&(z=T());var j=a.transition().duration(I.duration).ease(I.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()});j.each(function(){S.selectAll("g.trace").each(function(H,Y){x(P,Y,D,H,V,this,I)})})}else M.each(function(H,Y){x(P,Y,D,H,V,this,I)});U&&M.exit().remove(),S.selectAll("path:not([d])").remove()};function b(A,P,D){P.each(function(R){var S=l(a.select(this),"g","fills");h.setClipUrl(S,D.layerClipId,A);var I=R[0].trace,T=[];I._ownfill&&T.push("_ownFill"),I._nexttrace&&T.push("_nextFill");var M=S.selectAll("g").data(T,u);M.enter().append("g"),M.exit().each(function(z){I[z]=null}).remove(),M.order().each(function(z){I[z]=l(a.select(this),"path","js-fill")})})}function x(A,P,D,R,S,I,T){var M;E(A,P,D,R,S);var z=!!T&&T.duration>0;function U(it){return z?it.transition():it}var F=D.xaxis,V=D.yaxis,j=R[0].trace,H=j.line,Y=a.select(I),J=l(Y,"g","errorbars"),ne=l(Y,"g","lines"),q=l(Y,"g","points"),we=l(Y,"g","text");if(s.getComponentMethod("errorbars","plot")(A,J,D,T),j.visible!==!0)return;U(Y).style("opacity",j.opacity);var ee,X,re=j.fill.charAt(j.fill.length-1);re!=="x"&&re!=="y"&&(re=""),R[0][D.isRangePlot?"nodeRangePlot3":"node3"]=Y;var de="",me=[],xe=j._prevtrace;xe&&(de=xe._prevRevpath||"",X=xe._nextFill,me=xe._polygons);var He,Re,Ee="",ke="",$,le,K,te,ie,ce,ae,ve=[],pe=n.noop;if(ee=j._ownFill,v.hasLines(j)||j.fill!=="none"){for(X&&X.datum(R),["hv","vh","hvh","vhv"].indexOf(H.shape)!==-1?($=h.steps(H.shape),le=h.steps(H.shape.split("").reverse().join(""))):H.shape==="spline"?$=le=function(it){var Ne=it[it.length-1];return it.length>1&&it[0][0]===Ne[0]&&it[0][1]===Ne[1]?h.smoothclosed(it.slice(1),H.smoothing):h.smoothopen(it,H.smoothing)}:$=le=function(it){return"M"+it.join("L")},K=function(it){return le(it.reverse())},ve=d(R,{xaxis:F,yaxis:V,trace:j,connectGaps:j.connectgaps,baseTolerance:Math.max(H.width||1,3)/4,shape:H.shape,backoff:H.backoff,simplify:H.simplify,fill:j.fill}),ae=j._polygons=new Array(ve.length),M=0;M<ve.length;M++)j._polygons[M]=_(ve[M]);ve.length&&(te=ve[0][0],ie=ve[ve.length-1],ce=ie[ie.length-1]),pe=function(it){return function(Ne){if(He=$(Ne),Re=K(Ne),Ee?re?(Ee+="L"+He.substr(1),ke=Re+("L"+ke.substr(1))):(Ee+="Z"+He,ke=Re+"Z"+ke):(Ee=He,ke=Re),v.hasLines(j)&&Ne.length>1){var ht=a.select(this);if(ht.datum(R),it)U(ht.style("opacity",0).attr("d",He).call(h.lineGroupStyle)).style("opacity",1);else{var Tt=U(ht);Tt.attr("d",He),h.singleLineStyle(R,Tt)}}}}}var he=ne.selectAll(".js-line").data(ve);U(he.exit()).style("opacity",0).remove(),he.each(pe(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(h.lineGroupStyle).each(pe(!0)),h.setClipUrl(he,D.layerClipId,A);function ye(it){U(it).attr("d","M0,0Z")}ve.length?(ee?(ee.datum(R),te&&ce&&(re?(re==="y"?te[1]=ce[1]=V.c2p(0,!0):re==="x"&&(te[0]=ce[0]=F.c2p(0,!0)),U(ee).attr("d","M"+ce+"L"+te+"L"+Ee.substr(1)).call(h.singleFillStyle,A)):U(ee).attr("d",Ee+"Z").call(h.singleFillStyle,A))):X&&(j.fill.substr(0,6)==="tonext"&&Ee&&de?(j.fill==="tonext"?U(X).attr("d",Ee+"Z"+de+"Z").call(h.singleFillStyle,A):U(X).attr("d",Ee+"L"+de.substr(1)+"Z").call(h.singleFillStyle,A),j._polygons=j._polygons.concat(me)):(ye(X),j._polygons=null)),j._prevRevpath=ke,j._prevPolygons=ae):(ee?ye(ee):X&&ye(X),j._polygons=j._prevRevpath=j._prevPolygons=null);function _e(it){return it.filter(function(Ne){return!Ne.gap&&Ne.vis})}function je(it){return it.filter(function(Ne){return Ne.vis})}function Je(it){return it.filter(function(Ne){return!Ne.gap})}function nt(it){return it.id}function at(it){if(it.ids)return nt}function Fe(){return!1}function Ie(it,Ne,ht){var Tt,Xt,Nt,Mt=ht[0].trace,Vt=v.hasMarkers(Mt),Yt=v.hasText(Mt),cr=at(Mt),Nr=Fe,er=Fe;if(Vt||Yt){var Wt=u,dr=Mt.stackgroup,zr=dr&&A._fullLayout._scatterStackOpts[F._id+V._id][dr].stackgaps==="infer zero";Mt.marker.maxdisplayed||Mt._needsCull?Wt=zr?je:_e:dr&&!zr&&(Wt=Je),Vt&&(Nr=Wt),Yt&&(er=Wt)}Xt=it.selectAll("path.point"),Tt=Xt.data(Nr,cr);var Dr=Tt.enter().append("path").classed("point",!0);z&&Dr.call(h.pointStyle,Mt,A).call(h.translatePoints,F,V).style("opacity",0).transition().style("opacity",1),Tt.order();var $e;Vt&&($e=h.makePointStyleFns(Mt)),Tt.each(function(pt){var kt=a.select(this),Me=U(kt);Nt=h.translatePoint(pt,Me,F,V),Nt?(h.singlePointStyle(pt,Me,Mt,$e,A),D.layerClipId&&h.hideOutsideRangePoint(pt,Me,F,V,Mt.xcalendar,Mt.ycalendar),Mt.customdata&&kt.classed("plotly-customdata",pt.data!==null&&pt.data!==void 0)):Me.remove()}),z?Tt.exit().transition().style("opacity",0).remove():Tt.exit().remove(),Xt=Ne.selectAll("g"),Tt=Xt.data(er,cr),Tt.enter().append("g").classed("textpoint",!0).append("text"),Tt.order(),Tt.each(function(pt){var kt=a.select(this),Me=U(kt.select("text"));Nt=h.translatePoint(pt,Me,F,V),Nt?D.layerClipId&&h.hideOutsideRangePoint(pt,kt,F,V,Mt.xcalendar,Mt.ycalendar):kt.remove()}),Tt.selectAll("text").call(h.textPointStyle,Mt,A).each(function(pt){var kt=F.c2p(pt.x),Me=V.c2p(pt.y);a.select(this).selectAll("tspan.line").each(function(){U(a.select(this)).attr({x:kt,y:Me})})}),Tt.exit().remove()}q.datum(R),we.datum(R),Ie(q,we,R);var Ke=j.cliponaxis===!1,Qe=Ke?null:D.layerClipId;h.setClipUrl(q,Qe,A),h.setClipUrl(we,Qe,A)}function E(A,P,D,R,S){var I=D.xaxis,T=D.yaxis,M=a.extent(n.simpleMap(I.range,I.r2c)),z=a.extent(n.simpleMap(T.range,T.r2c)),U=R[0].trace;if(!!v.hasMarkers(U)){var F=U.marker.maxdisplayed;if(F!==0){var V=R.filter(function(J){return J.x>=M[0]&&J.x<=M[1]&&J.y>=z[0]&&J.y<=z[1]}),j=Math.ceil(V.length/F),H=0;S.forEach(function(J,ne){var q=J[0].trace;v.hasMarkers(q)&&q.marker.maxdisplayed>0&&ne<P&&H++});var Y=Math.round(H*j/3+Math.floor(H/3)*j/7.1);R.forEach(function(J){delete J.vis}),V.forEach(function(J,ne){Math.round((ne+Y)%j)===0&&(J.vis=!0)})}}}},{"../../components/drawing":125,"../../lib":244,"../../lib/polygon":256,"../../registry":327,"./line_points":381,"./link_traces":383,"./subtypes":392,"@plotly/d3":11}],389:[function(e,i,o){var a=e("./subtypes");i.exports=function(n,l){var u=n.cd,h=n.xaxis,v=n.yaxis,d=[],p=u[0].trace,_,b,x,E,A=!a.hasMarkers(p)&&!a.hasText(p);if(A)return[];if(l===!1)for(_=0;_<u.length;_++)u[_].selected=0;else for(_=0;_<u.length;_++)b=u[_],x=h.c2p(b.x),E=v.c2p(b.y),b.i!==null&&l.contains([x,E],!1,_,n)?(d.push({pointNumber:b.i,x:h.c2d(b.x),y:v.c2d(b.y)}),b.selected=1):b.selected=0;return d}},{"./subtypes":392}],390:[function(e,i,o){var a=["orientation","groupnorm","stackgaps"];i.exports=function(n,l,u,h){var v=u._scatterStackOpts,d=h("stackgroup");if(d){var p=l.xaxis+l.yaxis,_=v[p];_||(_=v[p]={});var b=_[d],x=!1;b?b.traces.push(l):(b=_[d]={traceIndices:[],traces:[l]},x=!0);for(var E={orientation:l.x&&!l.y?"h":"v"},A=0;A<a.length;A++){var P=a[A],D=P+"Found";if(!b[D]){var R=n[P]!==void 0,S=P==="orientation";if((R||x)&&(b[P]=h(P,E[P]),S&&(b.fillDflt=b[P]==="h"?"tonextx":"tonexty"),R&&(b[D]=!0,!x&&(delete b.traces[0][P],S))))for(var I=0;I<b.traces.length-1;I++){var T=b.traces[I];T._input.fill!==T.fill&&(T.fill=b.fillDflt)}}}return b}}},{}],391:[function(e,i,o){var a=e("@plotly/d3"),s=e("../../components/drawing"),n=e("../../registry");function l(d){var p=a.select(d).selectAll("g.trace.scatter");p.style("opacity",function(_){return _[0].trace.opacity}),p.selectAll("g.points").each(function(_){var b=a.select(this),x=_.trace||_[0].trace;u(b,x,d)}),p.selectAll("g.text").each(function(_){var b=a.select(this),x=_.trace||_[0].trace;h(b,x,d)}),p.selectAll("g.trace path.js-line").call(s.lineGroupStyle),p.selectAll("g.trace path.js-fill").call(s.fillGroupStyle,d),n.getComponentMethod("errorbars","style")(p)}function u(d,p,_){s.pointStyle(d.selectAll("path.point"),p,_)}function h(d,p,_){s.textPointStyle(d.selectAll("text"),p,_)}function v(d,p,_){var b=p[0].trace;b.selectedpoints?(s.selectedPointStyle(_.selectAll("path.point"),b),s.selectedTextStyle(_.selectAll("text"),b)):(u(_,b,d),h(_,b,d))}i.exports={style:l,stylePoints:u,styleText:h,styleOnSelect:v}},{"../../components/drawing":125,"../../registry":327,"@plotly/d3":11}],392:[function(e,i,o){var a=e("../../lib");i.exports={hasLines:function(s){return s.visible&&s.mode&&s.mode.indexOf("lines")!==-1},hasMarkers:function(s){return s.visible&&(s.mode&&s.mode.indexOf("markers")!==-1||s.type==="splom")},hasText:function(s){return s.visible&&s.mode&&s.mode.indexOf("text")!==-1},isBubble:function(s){return a.isPlainObject(s.marker)&&a.isArrayOrTypedArray(s.marker.size)}}},{"../../lib":244}],393:[function(e,i,o){var a=e("../../lib");i.exports=function(s,n,l,u,h){h=h||{},u("textposition"),a.coerceFont(u,"textfont",l.font),h.noSelect||(u("selected.textfont.color"),u("unselected.textfont.color"))}},{"../../lib":244}],394:[function(e,i,o){var a=e("../../lib"),s=e("../../registry");i.exports=function(l,u,h,v){var d=v("x"),p=v("y"),_,b=s.getComponentMethod("calendars","handleTraceDefaults");if(b(l,u,["x","y"],h),d){var x=a.minRowLength(d);p?_=Math.min(x,a.minRowLength(p)):(_=x,v("y0"),v("dy"))}else{if(!p)return 0;_=a.minRowLength(p),v("x0"),v("dx")}return u._length=_,_}},{"../../lib":244,"../../registry":327}],395:[function(e,i,o){var a=e("../plots/cartesian/axes"),s=e("../lib"),n=e("../plot_api/plot_schema"),l=e("./helpers").pointsAccessorFunction,u=e("../constants/numerical").BADNUM;o.moduleType="transform",o.name="aggregate";var h=o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},v=h.aggregations;o.supplyDefaults=function(E,A){var P={},D;function R(J,ne){return s.coerce(E,P,h,J,ne)}var S=R("enabled");if(!S)return P;var I=n.findArrayAttributes(A),T={};for(D=0;D<I.length;D++)T[I[D]]=1;var M=R("groups");if(!Array.isArray(M)){if(!T[M])return P.enabled=!1,P;T[M]=0}var z=E.aggregations||[],U=P.aggregations=new Array(z.length),F;function V(J,ne){return s.coerce(z[D],F,v,J,ne)}for(D=0;D<z.length;D++){F={_index:D};var j=V("target"),H=V("func"),Y=V("enabled");Y&&j&&(T[j]||H==="count"&&T[j]===void 0)?(H==="stddev"&&V("funcmode"),T[j]=0,U[D]=F):U[D]={enabled:!1,_index:D}}for(D=0;D<I.length;D++)T[I[D]]&&U.push({target:I[D],func:v.func.dflt,enabled:!0,_index:-1});return P},o.calcTransform=function(E,A,P){if(!!P.enabled){var D=P.groups,R=s.getTargetArray(A,{target:D});if(!!R){var S,I,T,M,z={},U={},F=[],V=l(A.transforms,P),j=R.length;for(A._length&&(j=Math.min(j,A._length)),S=0;S<j;S++)I=R[S],T=z[I],T===void 0?(z[I]=F.length,M=[S],F.push(M),U[z[I]]=V(S)):(F[T].push(S),U[z[I]]=(U[z[I]]||[]).concat(V(S)));P._indexToPoints=U;var H=P.aggregations;for(S=0;S<H.length;S++)d(E,A,F,H[S]);typeof D=="string"&&d(E,A,F,{target:D,func:"first",enabled:!0}),A._length=F.length}}};function d(E,A,P,D){if(!!D.enabled){for(var R=D.target,S=s.nestedProperty(A,R),I=S.get(),T=a.getDataConversions(E,A,R,I),M=p(D,T),z=new Array(P.length),U=0;U<P.length;U++)z[U]=M(I,P[U]);S.set(z),D.func==="count"&&s.pushUnique(A._arrayAttrs,R)}}function p(E,A){var P=E.func,D=A.d2c,R=A.c2d;switch(P){case"count":return _;case"first":return b;case"last":return x;case"sum":return function(S,I){for(var T=0,M=0;M<I.length;M++){var z=D(S[I[M]]);z!==u&&(T+=z)}return R(T)};case"avg":return function(S,I){for(var T=0,M=0,z=0;z<I.length;z++){var U=D(S[I[z]]);U!==u&&(T+=U,M++)}return M?R(T/M):u};case"min":return function(S,I){for(var T=1/0,M=0;M<I.length;M++){var z=D(S[I[M]]);z!==u&&(T=Math.min(T,z))}return T===1/0?u:R(T)};case"max":return function(S,I){for(var T=-1/0,M=0;M<I.length;M++){var z=D(S[I[M]]);z!==u&&(T=Math.max(T,z))}return T===-1/0?u:R(T)};case"range":return function(S,I){for(var T=1/0,M=-1/0,z=0;z<I.length;z++){var U=D(S[I[z]]);U!==u&&(T=Math.min(T,U),M=Math.max(M,U))}return M===-1/0||T===1/0?u:R(M-T)};case"change":return function(S,I){var T=D(S[I[0]]),M=D(S[I[I.length-1]]);return T===u||M===u?u:R(M-T)};case"median":return function(S,I){for(var T=[],M=0;M<I.length;M++){var z=D(S[I[M]]);z!==u&&T.push(z)}if(!T.length)return u;T.sort(s.sorterAsc);var U=(T.length-1)/2;return R((T[Math.floor(U)]+T[Math.ceil(U)])/2)};case"mode":return function(S,I){for(var T={},M=0,z=u,U=0;U<I.length;U++){var F=D(S[I[U]]);if(F!==u){var V=T[F]=(T[F]||0)+1;V>M&&(M=V,z=F)}}return M?R(z):u};case"rms":return function(S,I){for(var T=0,M=0,z=0;z<I.length;z++){var U=D(S[I[z]]);U!==u&&(T+=U*U,M++)}return M?R(Math.sqrt(T/M)):u};case"stddev":return function(S,I){var T=0,M=0,z=1,U=u,F;for(F=0;F<I.length&&U===u;F++)U=D(S[I[F]]);if(U===u)return u;for(;F<I.length;F++){var V=D(S[I[F]]);if(V!==u){var j=V-U;T+=j,M+=j*j,z++}}var H=E.funcmode==="sample"?z-1:z;return H?Math.sqrt((M-T*T/z)/H):0}}}function _(E,A){return A.length}function b(E,A){return E[A[0]]}function x(E,A){return E[A[A.length-1]]}},{"../constants/numerical":224,"../lib":244,"../plot_api/plot_schema":279,"../plots/cartesian/axes":291,"./helpers":398}],396:[function(e,i,o){var a=e("../lib"),s=e("../registry"),n=e("../plots/cartesian/axes"),l=e("./helpers").pointsAccessorFunction,u=e("../constants/filter_ops"),h=u.COMPARISON_OPS,v=u.INTERVAL_OPS,d=u.SET_OPS;o.moduleType="transform",o.name="filter",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(h).concat(v).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},o.supplyDefaults=function(_){var b={};function x(D,R){return a.coerce(_,b,o.attributes,D,R)}var E=x("enabled");if(E){var A=x("target");if(a.isArrayOrTypedArray(A)&&A.length===0)return b.enabled=!1,b;x("preservegaps"),x("operation"),x("value");var P=s.getComponentMethod("calendars","handleDefaults");P(_,b,"valuecalendar",null),P(_,b,"targetcalendar",null)}return b},o.calcTransform=function(_,b,x){if(!x.enabled)return;var E=a.getTargetArray(b,x);if(!E)return;var A=x.target,P=E.length;b._length&&(P=Math.min(P,b._length));var D=x.targetcalendar,R=b._arrayAttrs,S=x.preservegaps;if(typeof A=="string"){var I=a.nestedProperty(b,A+"calendar").get();I&&(D=I)}var T=n.getDataToCoordFunc(_,b,A,E),M=p(x,T,D),z={},U={},F=0;function V(q,we){for(var ee=0;ee<R.length;ee++){var X=a.nestedProperty(b,R[ee]);q(X,we)}}var j,H;S?(j=function(q){z[q.astr]=a.extendDeep([],q.get()),q.set(new Array(P))},H=function(q,we){var ee=z[q.astr][we];q.get()[we]=ee}):(j=function(q){z[q.astr]=a.extendDeep([],q.get()),q.set([])},H=function(q,we){var ee=z[q.astr][we];q.get().push(ee)}),V(j);for(var Y=l(b.transforms,x),J=0;J<P;J++){var ne=M(E[J]);ne?(V(H,J),U[F++]=Y(J)):S&&F++}x._indexToPoints=U,b._length=F};function p(_,b,x){var E=_.operation,A=_.value,P=Array.isArray(A);function D(T){return T.indexOf(E)!==-1}var R=function(T){return b(T,0,_.valuecalendar)},S=function(T){return b(T,0,x)},I;switch(D(h)?I=R(P?A[0]:A):D(v)?I=P?[R(A[0]),R(A[1])]:[R(A),R(A)]:D(d)&&(I=P?A.map(R):[R(A)]),E){case"=":return function(T){return S(T)===I};case"!=":return function(T){return S(T)!==I};case"<":return function(T){return S(T)<I};case"<=":return function(T){return S(T)<=I};case">":return function(T){return S(T)>I};case">=":return function(T){return S(T)>=I};case"[]":return function(T){var M=S(T);return M>=I[0]&&M<=I[1]};case"()":return function(T){var M=S(T);return M>I[0]&&M<I[1]};case"[)":return function(T){var M=S(T);return M>=I[0]&&M<I[1]};case"(]":return function(T){var M=S(T);return M>I[0]&&M<=I[1]};case"][":return function(T){var M=S(T);return M<=I[0]||M>=I[1]};case")(":return function(T){var M=S(T);return M<I[0]||M>I[1]};case"](":return function(T){var M=S(T);return M<=I[0]||M>I[1]};case")[":return function(T){var M=S(T);return M<I[0]||M>=I[1]};case"{}":return function(T){return I.indexOf(S(T))!==-1};case"}{":return function(T){return I.indexOf(S(T))===-1}}}},{"../constants/filter_ops":222,"../lib":244,"../plots/cartesian/axes":291,"../registry":327,"./helpers":398}],397:[function(e,i,o){var a=e("../lib"),s=e("../plot_api/plot_schema"),n=e("../plots/plots"),l=e("./helpers").pointsAccessorFunction;o.moduleType="transform",o.name="groupby",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},o.supplyDefaults=function(h,v,d){var p,_={};function b(R,S){return a.coerce(h,_,o.attributes,R,S)}var x=b("enabled");if(!x)return _;b("groups"),b("nameformat",d._dataLength>1?"%{group} (%{trace})":"%{group}");var E=h.styles,A=_.styles=[];if(E)for(p=0;p<E.length;p++){var P=A[p]={};a.coerce(E[p],A[p],o.attributes.styles,"target");var D=a.coerce(E[p],A[p],o.attributes.styles,"value");a.isPlainObject(D)?P.value=a.extendDeep({},D):D&&delete P.value}return _},o.transform=function(h,v){var d,p,_,b=[];for(p=0;p<h.length;p++)for(d=u(h[p],v),_=0;_<d.length;_++)b.push(d[_]);return b};function u(h,v){var d,p,_,b,x,E,A,P,D,R,S=v.transform,I=v.transformIndex,T=h.transforms[I].groups,M=l(h.transforms,S);if(!a.isArrayOrTypedArray(T)||T.length===0)return[h];var z=a.filterUnique(T),U=new Array(z.length),F=T.length,V=s.findArrayAttributes(h),j=S.styles||[],H={};for(d=0;d<j.length;d++)H[j[d].target]=j[d].value;S.styles&&(R=a.keyedContainer(S,"styles","target","value.name"));var Y={},J={};for(d=0;d<z.length;d++){E=z[d],Y[E]=d,J[E]=0,A=U[d]=a.extendDeepNoArrays({},h),A._group=E,A.transforms[I]._indexToPoints={};var ne=null;for(R&&(ne=R.get(E)),ne||ne===""?A.name=ne:A.name=a.templateString(S.nameformat,{trace:h.name,group:E}),P=A.transforms,A.transforms=[],p=0;p<P.length;p++)A.transforms[p]=a.extendDeepNoArrays({},P[p]);for(p=0;p<V.length;p++)a.nestedProperty(A,V[p]).set([])}for(_=0;_<V.length;_++){for(b=V[_],p=0,D=[];p<z.length;p++)D[p]=a.nestedProperty(U[p],b).get();for(x=a.nestedProperty(h,b).get(),p=0;p<F;p++)D[Y[T[p]]].push(x[p])}for(p=0;p<F;p++){A=U[Y[T[p]]];var q=A.transforms[I]._indexToPoints;q[J[T[p]]]=M(p),J[T[p]]++}for(d=0;d<z.length;d++)E=z[d],A=U[d],n.clearExpandedTraceDefaultColors(A),A=a.extendDeepNoArrays(A,H[E]||{});return U}},{"../lib":244,"../plot_api/plot_schema":279,"../plots/plots":325,"./helpers":398}],398:[function(e,i,o){o.pointsAccessorFunction=function(a,s){for(var n,l,u=0;u<a.length&&(n=a[u],n!==s);u++)!n._indexToPoints||n.enabled===!1||(l=n._indexToPoints);var h=l?function(v){return l[v]}:function(v){return[v]};return h}},{}],399:[function(e,i,o){var a=e("../lib"),s=e("../plots/cartesian/axes"),n=e("./helpers").pointsAccessorFunction,l=e("../constants/numerical").BADNUM;o.moduleType="transform",o.name="sort",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},o.supplyDefaults=function(v){var d={};function p(b,x){return a.coerce(v,d,o.attributes,b,x)}var _=p("enabled");return _&&(p("target"),p("order")),d},o.calcTransform=function(v,d,p){if(!!p.enabled){var _=a.getTargetArray(d,p);if(!!_){var b=p.target,x=_.length;d._length&&(x=Math.min(x,d._length));var E=d._arrayAttrs,A=s.getDataToCoordFunc(v,d,b,_),P=u(p,_,A,x),D=n(d.transforms,p),R={},S,I;for(S=0;S<E.length;S++){var T=a.nestedProperty(d,E[S]),M=T.get(),z=new Array(x);for(I=0;I<x;I++)z[I]=M[P[I]];T.set(z)}for(I=0;I<x;I++)R[I]=D(P[I]);p._indexToPoints=R,d._length=x}}};function u(v,d,p,_){var b=new Array(_),x=new Array(_),E;for(E=0;E<_;E++)b[E]={v:d[E],i:E};for(b.sort(h(v,p)),E=0;E<_;E++)x[E]=b[E].i;return x}function h(v,d){switch(v.order){case"ascending":return function(p,_){var b=d(p.v),x=d(_.v);return b===l?1:x===l?-1:b-x};case"descending":return function(p,_){var b=d(p.v),x=d(_.v);return b===l?1:x===l?-1:x-b}}}},{"../constants/numerical":224,"../lib":244,"../plots/cartesian/axes":291,"./helpers":398}],400:[function(e,i,o){o.version="2.16.0"},{}]},{},[8])(8)})})(ix);const gI=m_(ix.exports);function Y1(r,t,e="#abc"){const i=gl.getSitesTimeseries(r,t);if(!i||t==="datainfo")return{x:[],y:[]};const o=i.getIndex().toArray().map(s=>new Date(s)),a=i.toArray();return{x:o,y:a,name:t,type:"scatter",marker:{color:e}}}function X1(r,t){if(t==="datainfo")return"";const e=r.size==1?Vb(r):`${r.size} sites`,i=Ul[t];return`${e}<br>${i}`}function yI(r){let t,e,i;return{c(){t=_n("div"),nn(t,"id","plotly")},m(o,a){Er(o,t,a),e||(i=ri(r[0].call(null,t)),e=!0)},p:qi,i:qi,o:qi,d(o){o&&Sr(t),e=!1,i()}}}const K1="#42124a",J1="#5caded";function _I(r,t,e){let i,o,a,s;Ei(r,_p,d=>e(3,i=d)),Ei(r,fv,d=>e(4,o=d)),Ei(r,yp,d=>e(5,a=d)),Ei(r,cv,d=>e(6,s=d));let{width:n,height:l}=t,u;function h(d){u=d,v(n,l,s,a,o,i)}function v(d,p,_,b,x,E){if(u){const A={width:d,height:p,margin:{autoexpand:!1,t:30,l:79},legend:{x:0,y:1.53},xaxis:{rangeslider:{},tickformat:`%H:%M
%Y-%m-%d`,tickangle:0,tickfont:{size:10}},yaxis:{title:{text:X1(_,b)},tickfont:{color:"#ccccc"},fixedrange:!1,color:K1},yaxis2:{title:{text:X1(x,E)},titlefont:{color:J1},tickfont:{color:"#ccccc"},anchor:"x",overlaying:"y",side:"right",fixedrange:!1}},P=Y1(_,b,K1),D=Y1(x,E,J1);D.yaxis="y2";const R=[P,D];gI.react(u,R,A)}}return r.$$set=d=>{"width"in d&&e(1,n=d.width),"height"in d&&e(2,l=d.height)},r.$$.update=()=>{r.$$.dirty&126&&v(n,l,s,a,o,i)},[h,n,l,i,o,a,s]}class bI extends ki{constructor(t){super(),Mi(this,t,_I,yI,_i,{width:1,height:2})}}function $1(r){let t,e,i,o;return e=new bI({props:{width:r[1],height:Q1}}),{c(){t=_n("div"),un(e.$$.fragment),nn(t,"id","timeseries"),nn(t,"class","elevation svelte-v7fjs4"),Do(t,"width",r[1]+"px"),Do(t,"height",Q1+"px")},m(a,s){Er(a,t,s),on(e,t,null),o=!0},p(a,s){r=a;const n={};s&2&&(n.width=r[1]),e.$set(n),(!o||s&2)&&Do(t,"width",r[1]+"px")},i(a){o||(Kt(e.$$.fragment,a),ic(()=>{i||(i=lu(t,xh,{x:r[0],duration:400},!0)),i.run(1)}),o=!0)},o(a){lr(e.$$.fragment,a),i||(i=lu(t,xh,{x:r[0],duration:400},!1)),i.run(0),o=!1},d(a){a&&Sr(t),sn(e),a&&i&&i.end()}}}function xI(r){let t,e,i=r[2]&&$1(r);return{c(){i&&i.c(),t=ea()},m(o,a){i&&i.m(o,a),Er(o,t,a),e=!0},p(o,[a]){o[2]?i?(i.p(o,a),a&4&&Kt(i,1)):(i=$1(o),i.c(),Kt(i,1),i.m(t.parentNode,t)):i&&(Ri(),lr(i,1,1,()=>{i=null}),Fi())},i(o){e||(Kt(i),e=!0)},o(o){lr(i),e=!1},d(o){i&&i.d(o),o&&Sr(t)}}}let Q1=292;function wI(r,t,e){let i,o,a;Ei(r,Qv,n=>e(0,i=n)),Ei(r,Df,n=>e(3,o=n)),Ei(r,zc,n=>e(2,a=n));let s=100;return r.$$.update=()=>{r.$$.dirty&9&&(o?e(1,s=i-396):e(1,s=i))},[i,s,a,o]}class TI extends ki{constructor(t){super(),Mi(this,t,wI,xI,_i,{})}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function AI(r){return r?r.scrollHeight>r.offsetHeight:!1}function SI(r){return r?r.scrollTop===0:!1}function EI(r){return r?Math.ceil(r.scrollHeight-r.scrollTop)===r.clientHeight:!1}function CI(r){var t=new Set;return[].forEach.call(r,function(e){return t.add(e.offsetTop)}),t.size>1}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Fa={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked",FULLSCREEN:"mdc-dialog--fullscreen",SCROLL_DIVIDER_HEADER:"mdc-dialog-scroll-divider-header",SCROLL_DIVIDER_FOOTER:"mdc-dialog-scroll-divider-footer",SURFACE_SCRIM_SHOWN:"mdc-dialog__surface-scrim--shown",SURFACE_SCRIM_SHOWING:"mdc-dialog__surface-scrim--showing",SURFACE_SCRIM_HIDING:"mdc-dialog__surface-scrim--hiding",SCRIM_HIDDEN:"mdc-dialog__scrim--hidden"},Qh={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},rv={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Hp;(function(r){r.POLL_SCROLL_POS="poll_scroll_position",r.POLL_LAYOUT_CHANGE="poll_layout_change"})(Hp||(Hp={}));var DI=function(r){xo(t,r);function t(e){var i=r.call(this,aa(aa({},t.defaultAdapter),e))||this;return i.dialogOpen=!1,i.isFullscreen=!1,i.animationFrame=0,i.animationTimer=0,i.escapeKeyAction=Qh.CLOSE_ACTION,i.scrimClickAction=Qh.CLOSE_ACTION,i.autoStackButtons=!0,i.areButtonsStacked=!1,i.suppressDefaultPressSelector=Qh.SUPPRESS_DEFAULT_PRESS_SELECTOR,i.animFrame=new Kb,i.contentScrollHandler=function(){i.handleScrollEvent()},i.windowResizeHandler=function(){i.layout()},i.windowOrientationChangeHandler=function(){i.layout()},i}return Object.defineProperty(t,"cssClasses",{get:function(){return Fa},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Qh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return rv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){},registerContentEventHandler:function(){},deregisterContentEventHandler:function(){},isScrollableContentAtTop:function(){return!1},isScrollableContentAtBottom:function(){return!1},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.hasClass(Fa.STACKED)&&this.setAutoStackButtons(!1),this.isFullscreen=this.adapter.hasClass(Fa.FULLSCREEN)},t.prototype.destroy=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.handleAnimationTimerEnd()),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.animFrame.cancelAll(),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler)},t.prototype.open=function(e){var i=this;this.dialogOpen=!0,this.adapter.notifyOpening(),this.adapter.addClass(Fa.OPENING),this.isFullscreen&&this.adapter.registerContentEventHandler("scroll",this.contentScrollHandler),e&&e.isAboveFullscreenDialog&&this.adapter.addClass(Fa.SCRIM_HIDDEN),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler),this.adapter.registerWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),this.runNextAnimationFrame(function(){i.adapter.addClass(Fa.OPEN),i.adapter.addBodyClass(Fa.SCROLL_LOCK),i.layout(),i.animationTimer=setTimeout(function(){i.handleAnimationTimerEnd(),i.adapter.trapFocus(i.adapter.getInitialFocusEl()),i.adapter.notifyOpened()},rv.DIALOG_ANIMATION_OPEN_TIME_MS)})},t.prototype.close=function(e){var i=this;e===void 0&&(e=""),this.dialogOpen&&(this.dialogOpen=!1,this.adapter.notifyClosing(e),this.adapter.addClass(Fa.CLOSING),this.adapter.removeClass(Fa.OPEN),this.adapter.removeBodyClass(Fa.SCROLL_LOCK),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){i.adapter.releaseFocus(),i.handleAnimationTimerEnd(),i.adapter.notifyClosed(e)},rv.DIALOG_ANIMATION_CLOSE_TIME_MS))},t.prototype.showSurfaceScrim=function(){var e=this;this.adapter.addClass(Fa.SURFACE_SCRIM_SHOWING),this.runNextAnimationFrame(function(){e.adapter.addClass(Fa.SURFACE_SCRIM_SHOWN)})},t.prototype.hideSurfaceScrim=function(){this.adapter.removeClass(Fa.SURFACE_SCRIM_SHOWN),this.adapter.addClass(Fa.SURFACE_SCRIM_HIDING)},t.prototype.handleSurfaceScrimTransitionEnd=function(){this.adapter.removeClass(Fa.SURFACE_SCRIM_HIDING),this.adapter.removeClass(Fa.SURFACE_SCRIM_SHOWING)},t.prototype.isOpen=function(){return this.dialogOpen},t.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction},t.prototype.setEscapeKeyAction=function(e){this.escapeKeyAction=e},t.prototype.getScrimClickAction=function(){return this.scrimClickAction},t.prototype.setScrimClickAction=function(e){this.scrimClickAction=e},t.prototype.getAutoStackButtons=function(){return this.autoStackButtons},t.prototype.setAutoStackButtons=function(e){this.autoStackButtons=e},t.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},t.prototype.setSuppressDefaultPressSelector=function(e){this.suppressDefaultPressSelector=e},t.prototype.layout=function(){var e=this;this.animFrame.request(Hp.POLL_LAYOUT_CHANGE,function(){e.layoutInternal()})},t.prototype.handleClick=function(e){var i=this.adapter.eventTargetMatches(e.target,Qh.SCRIM_SELECTOR);if(i&&this.scrimClickAction!=="")this.close(this.scrimClickAction);else{var o=this.adapter.getActionFromEvent(e);o&&this.close(o)}},t.prototype.handleKeydown=function(e){var i=e.key==="Enter"||e.keyCode===13;if(!!i){var o=this.adapter.getActionFromEvent(e);if(!o){var a=e.composedPath?e.composedPath()[0]:e.target,s=this.suppressDefaultPressSelector?!this.adapter.eventTargetMatches(a,this.suppressDefaultPressSelector):!0;i&&s&&this.adapter.clickDefaultButton()}}},t.prototype.handleDocumentKeydown=function(e){var i=e.key==="Escape"||e.keyCode===27;i&&this.escapeKeyAction!==""&&this.close(this.escapeKeyAction)},t.prototype.handleScrollEvent=function(){var e=this;this.animFrame.request(Hp.POLL_SCROLL_POS,function(){e.toggleScrollDividerHeader(),e.toggleScrollDividerFooter()})},t.prototype.layoutInternal=function(){this.autoStackButtons&&this.detectStackedButtons(),this.toggleScrollableClasses()},t.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Fa.OPENING),this.adapter.removeClass(Fa.CLOSING)},t.prototype.runNextAnimationFrame=function(e){var i=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){i.animationFrame=0,clearTimeout(i.animationTimer),i.animationTimer=setTimeout(e,0)})},t.prototype.detectStackedButtons=function(){this.adapter.removeClass(Fa.STACKED);var e=this.adapter.areButtonsStacked();e&&this.adapter.addClass(Fa.STACKED),e!==this.areButtonsStacked&&(this.adapter.reverseButtons(),this.areButtonsStacked=e)},t.prototype.toggleScrollableClasses=function(){this.adapter.removeClass(Fa.SCROLLABLE),this.adapter.isContentScrollable()&&(this.adapter.addClass(Fa.SCROLLABLE),this.isFullscreen&&(this.toggleScrollDividerHeader(),this.toggleScrollDividerFooter()))},t.prototype.toggleScrollDividerHeader=function(){this.adapter.isScrollableContentAtTop()?this.adapter.hasClass(Fa.SCROLL_DIVIDER_HEADER)&&this.adapter.removeClass(Fa.SCROLL_DIVIDER_HEADER):this.adapter.addClass(Fa.SCROLL_DIVIDER_HEADER)},t.prototype.toggleScrollDividerFooter=function(){this.adapter.isScrollableContentAtBottom()?this.adapter.hasClass(Fa.SCROLL_DIVIDER_FOOTER)&&this.adapter.removeClass(Fa.SCROLL_DIVIDER_FOOTER):this.adapter.addClass(Fa.SCROLL_DIVIDER_FOOTER)},t}(ws);const{document:MI,window:q1}=p_,kI=r=>({}),e_=r=>({});function t_(r){let t,e,i;return{c(){t=_n("div"),nn(t,"class","mdc-dialog__surface-scrim")},m(o,a){Er(o,t,a),e||(i=si(t,"transitionend",r[32]),e=!0)},p:qi,d(o){o&&Sr(t),e=!1,i()}}}function II(r){let t,e,i,o,a,s,n,l,u,h,v,d,p,_,b;const x=r[29].default,E=Ni(x,r,r[28],null);let A=r[5]&&t_(r),P=[{class:s=Pn({[r[9]]:!0,"mdc-dialog__surface":!0})},{role:"alertdialog"},{"aria-modal":"true"},xi(r[19],"surface$")],D={};for(let U=0;U<P.length;U+=1)D=cn(D,P[U]);let R=[{class:n=Pn({[r[8]]:!0,"mdc-dialog__container":!0})},xi(r[19],"container$")],S={};for(let U=0;U<R.length;U+=1)S=cn(S,R[U]);let I=[{class:h=Pn({[r[2]]:!0,"mdc-dialog":!0,"mdc-dialog--stacked":!r[4],"mdc-dialog--fullscreen":r[5],"mdc-dialog--sheet":r[6],"mdc-dialog--no-content-padding":r[7],"smui-dialog--selection":r[3],...r[12]})},{role:"alertdialog"},{"aria-modal":"true"},Os(r[19],["container$","surface$"])],T={};for(let U=0;U<I.length;U+=1)T=cn(T,I[U]);const M=r[29].over,z=Ni(M,r,r[28],e_);return{c(){t=Rn(),e=_n("div"),i=_n("div"),o=_n("div"),E&&E.c(),a=Rn(),A&&A.c(),l=Rn(),u=_n("div"),d=Rn(),z&&z.c(),Xn(o,D),Xn(i,S),nn(u,"class","mdc-dialog__scrim"),Xn(e,T)},m(U,F){Er(U,t,F),Er(U,e,F),En(e,i),En(i,o),E&&E.m(o,null),En(o,a),A&&A.m(o,null),En(e,l),En(e,u),r[33](e),Er(U,d,F),z&&z.m(U,F),p=!0,_||(b=[si(q1,"resize",r[30]),si(q1,"orientationchange",r[31]),si(MI.body,"keydown",function(){Ci(r[10]&&r[10].handleDocumentKeydown.bind(r[10]))&&(r[10]&&r[10].handleDocumentKeydown.bind(r[10])).apply(this,arguments)}),ri(v=ma.call(null,e,r[1])),ri(r[13].call(null,e)),si(e,"SMUIDialog:opening",r[16]),si(e,"SMUIDialog:opened",r[17]),si(e,"SMUIDialog:closed",r[18]),si(e,"click",function(){Ci(r[10]&&r[10].handleClick.bind(r[10]))&&(r[10]&&r[10].handleClick.bind(r[10])).apply(this,arguments)}),si(e,"keydown",function(){Ci(r[10]&&r[10].handleKeydown.bind(r[10]))&&(r[10]&&r[10].handleKeydown.bind(r[10])).apply(this,arguments)})],_=!0)},p(U,F){r=U,E&&E.p&&(!p||F[0]&268435456)&&Hi(E,x,r,r[28],p?Ui(x,r[28],F,null):Vi(r[28]),null),r[5]?A?A.p(r,F):(A=t_(r),A.c(),A.m(o,null)):A&&(A.d(1),A=null),Xn(o,D=li(P,[(!p||F[0]&512&&s!==(s=Pn({[r[9]]:!0,"mdc-dialog__surface":!0})))&&{class:s},{role:"alertdialog"},{"aria-modal":"true"},F[0]&524288&&xi(r[19],"surface$")])),Xn(i,S=li(R,[(!p||F[0]&256&&n!==(n=Pn({[r[8]]:!0,"mdc-dialog__container":!0})))&&{class:n},F[0]&524288&&xi(r[19],"container$")])),Xn(e,T=li(I,[(!p||F[0]&4348&&h!==(h=Pn({[r[2]]:!0,"mdc-dialog":!0,"mdc-dialog--stacked":!r[4],"mdc-dialog--fullscreen":r[5],"mdc-dialog--sheet":r[6],"mdc-dialog--no-content-padding":r[7],"smui-dialog--selection":r[3],...r[12]})))&&{class:h},{role:"alertdialog"},{"aria-modal":"true"},F[0]&524288&&Os(r[19],["container$","surface$"])])),v&&Ci(v.update)&&F[0]&2&&v.update.call(null,r[1]),z&&z.p&&(!p||F[0]&268435456)&&Hi(z,M,r,r[28],p?Ui(M,r[28],F,kI):Vi(r[28]),e_)},i(U){p||(Kt(E,U),Kt(z,U),p=!0)},o(U){lr(E,U),lr(z,U),p=!1},d(U){U&&Sr(t),U&&Sr(e),E&&E.d(U),A&&A.d(),r[33](null),U&&Sr(d),z&&z.d(U),_=!1,Ma(b)}}}function LI(r,t,e){const i=["use","class","open","selection","escapeKeyAction","scrimClickAction","autoStackButtons","fullscreen","sheet","noContentPadding","container$class","surface$class","isOpen","setOpen","layout","getElement"];let o=ei(t,i),a,s,{$$slots:n={},$$scope:l}=t;var u;const{FocusTrap:h}=z5,{closest:v,matches:d}=Ch,p=wa(oa());let{use:_=[]}=t,{class:b=""}=t,{open:x=!1}=t,{selection:E=!1}=t,{escapeKeyAction:A="close"}=t,{scrimClickAction:P="close"}=t,{autoStackButtons:D=!0}=t,{fullscreen:R=!1}=t,{sheet:S=!1}=t,{noContentPadding:I=!1}=t,{container$class:T=""}=t,{surface$class:M=""}=t,z,U,F={},V,j=_o(!1);Ei(r,j,he=>e(37,s=he));let H=Ki("SMUI:dialog:aboveFullscreen"),Y=(u=Ki("SMUI:dialog:aboveFullscreenShown"))!==null&&u!==void 0?u:_o(!1);Ei(r,Y,he=>e(27,a=he));let J=Ki("SMUI:addLayoutListener"),ne,q=[],we=he=>(q.push(he),()=>{const ye=q.indexOf(he);ye>=0&&q.splice(ye,1)});wi("SMUI:dialog:actions:reversed",j),wi("SMUI:addLayoutListener",we),wi("SMUI:dialog:selection",E),wi("SMUI:dialog:aboveFullscreen",H||R),wi("SMUI:dialog:aboveFullscreenShown",Y),S&&wi("SMUI:icon-button:context","dialog:sheet"),J&&(ne=J(te));let ee=a;bo(()=>{var he;return V=new h(z,{initialFocusEl:(he=Re())!==null&&he!==void 0?he:void 0}),e(10,U=new DI({addBodyClass:ye=>document.body.classList.add(ye),addClass:re,areButtonsStacked:()=>CI(me()),clickDefaultButton:()=>{const ye=xe();ye&&ye.click()},eventTargetMatches:(ye,_e)=>ye?d(ye,_e):!1,getActionFromEvent:ye=>{if(!ye.target)return"";const _e=v(ye.target,"[data-mdc-dialog-action]");return _e&&_e.getAttribute("data-mdc-dialog-action")},getInitialFocusEl:Re,hasClass:X,isContentScrollable:()=>AI(He()),notifyClosed:ye=>{e(0,x=!1),Di(ie(),"SMUIDialog:closed",ye?{action:ye}:{},void 0,!0)},notifyClosing:ye=>Di(ie(),"SMUIDialog:closing",ye?{action:ye}:{},void 0,!0),notifyOpened:()=>Di(ie(),"SMUIDialog:opened",{},void 0,!0),notifyOpening:()=>Di(ie(),"SMUIDialog:opening",{},void 0,!0),releaseFocus:()=>V.releaseFocus(),removeBodyClass:ye=>document.body.classList.remove(ye),removeClass:de,reverseButtons:()=>{Va(j,s=!0,s)},trapFocus:()=>V.trapFocus(),registerContentEventHandler:(ye,_e)=>{const je=He();je instanceof HTMLElement&&je.addEventListener(ye,_e)},deregisterContentEventHandler:(ye,_e)=>{const je=He();je instanceof HTMLElement&&je.removeEventListener(ye,_e)},isScrollableContentAtTop:()=>SI(He()),isScrollableContentAtBottom:()=>EI(He()),registerWindowEventHandler:(ye,_e)=>{window.addEventListener(ye,_e)},deregisterWindowEventHandler:(ye,_e)=>{window.removeEventListener(ye,_e)}})),U.init(),()=>{U.destroy()}}),Vc(()=>{ne&&ne()});function X(he){return he in F?F[he]:ie().classList.contains(he)}function re(he){F[he]||e(12,F[he]=!0,F)}function de(he){(!(he in F)||F[he])&&e(12,F[he]=!1,F)}function me(){return[].slice.call(z.querySelectorAll(".mdc-dialog__button"))}function xe(){return z.querySelector("[data-mdc-dialog-button-default")}function He(){return z.querySelector(".mdc-dialog__content")}function Re(){return z.querySelector("[data-mdc-dialog-initial-focus]")}function Ee(){H&&Va(Y,a=!0,a),requestAnimationFrame(()=>{q.forEach(he=>he())})}function ke(){q.forEach(he=>he())}function $(){H&&Va(Y,a=!1,a)}function le(){return x}function K(he){e(0,x=he)}function te(){return U.layout()}function ie(){return z}const ce=()=>x&&U&&U.layout(),ae=()=>x&&U&&U.layout(),ve=()=>U&&U.handleSurfaceScrimTransitionEnd();function pe(he){ci[he?"unshift":"push"](()=>{z=he,e(11,z)})}return r.$$set=he=>{t=cn(cn({},t),ga(he)),e(19,o=ei(t,i)),"use"in he&&e(1,_=he.use),"class"in he&&e(2,b=he.class),"open"in he&&e(0,x=he.open),"selection"in he&&e(3,E=he.selection),"escapeKeyAction"in he&&e(20,A=he.escapeKeyAction),"scrimClickAction"in he&&e(21,P=he.scrimClickAction),"autoStackButtons"in he&&e(4,D=he.autoStackButtons),"fullscreen"in he&&e(5,R=he.fullscreen),"sheet"in he&&e(6,S=he.sheet),"noContentPadding"in he&&e(7,I=he.noContentPadding),"container$class"in he&&e(8,T=he.container$class),"surface$class"in he&&e(9,M=he.surface$class),"$$scope"in he&&e(28,l=he.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&1049600&&U&&U.getEscapeKeyAction()!==A&&U.setEscapeKeyAction(A),r.$$.dirty[0]&2098176&&U&&U.getScrimClickAction()!==P&&U.setScrimClickAction(P),r.$$.dirty[0]&1040&&U&&U.getAutoStackButtons()!==D&&U.setAutoStackButtons(D),r.$$.dirty[0]&16&&(D||Va(j,s=!0,s)),r.$$.dirty[0]&1025&&U&&U.isOpen()!==x&&(x?U.open({isAboveFullscreenDialog:!!H}):U.close()),r.$$.dirty[0]&201327648&&R&&U&&ee!==a&&(e(26,ee=a),a?U.showSurfaceScrim():U.hideSurfaceScrim())},[x,_,b,E,D,R,S,I,T,M,U,z,F,p,j,Y,Ee,ke,$,o,A,P,le,K,te,ie,ee,a,l,n,ce,ae,ve,pe]}class PI extends ki{constructor(t){super(),Mi(this,t,LI,II,_i,{use:1,class:2,open:0,selection:3,escapeKeyAction:20,scrimClickAction:21,autoStackButtons:4,fullscreen:5,sheet:6,noContentPadding:7,container$class:8,surface$class:9,isOpen:22,setOpen:23,layout:24,getElement:25},null,[-1,-1])}get isOpen(){return this.$$.ctx[22]}get setOpen(){return this.$$.ctx[23]}get layout(){return this.$$.ctx[24]}get getElement(){return this.$$.ctx[25]}}nl({class:"mdc-dialog__header",tag:"div",contexts:{"SMUI:icon-button:context":"dialog:header"}});const RI=nl({class:"mdc-dialog__title",tag:"h2"}),Mh=nl({class:"mdc-dialog__content",tag:"div"}),FI=nl({class:"mdc-dialog__actions",tag:"div",classMap:{"smui-dialog__actions--reversed":"SMUI:dialog:actions:reversed"},contexts:{"SMUI:button:context":"dialog:action"}});function OI(r){let t,e,i,o,a,s,n,l,u,h,v,d,p,_,b,x,E,A,P,D,R=[{class:p=Pn({[r[1]]:!0,"mdc-linear-progress":!0,"mdc-linear-progress--indeterminate":r[3],"mdc-linear-progress--closed":r[4],"mdc-data-table__linear-progress":r[14]==="data-table",...r[8]})},{style:_=Object.entries(r[10]).map(i_).concat([r[2]]).join(" ")},{role:"progressbar"},{"aria-valuemin":b=0},{"aria-valuemax":x=1},{"aria-valuenow":E=r[3]?void 0:r[5]},r[9],r[16]],S={};for(let I=0;I<R.length;I+=1)S=cn(S,R[I]);return{c(){t=_n("div"),e=_n("div"),i=_n("div"),a=Rn(),s=_n("div"),n=Rn(),l=_n("div"),u=_n("span"),v=Rn(),d=_n("div"),d.innerHTML='<span class="mdc-linear-progress__bar-inner"></span>',nn(i,"class","mdc-linear-progress__buffer-bar"),nn(i,"style",o=Object.entries(r[11]).map(r_).join(" ")),nn(s,"class","mdc-linear-progress__buffer-dots"),nn(e,"class","mdc-linear-progress__buffer"),nn(u,"class","mdc-linear-progress__bar-inner"),nn(l,"class","mdc-linear-progress__bar mdc-linear-progress__primary-bar"),nn(l,"style",h=Object.entries(r[12]).map(n_).join(" ")),nn(d,"class","mdc-linear-progress__bar mdc-linear-progress__secondary-bar"),Xn(t,S)},m(I,T){Er(I,t,T),En(t,e),En(e,i),En(e,a),En(e,s),En(t,n),En(t,l),En(l,u),En(t,v),En(t,d),r[19](t),P||(D=[ri(A=ma.call(null,t,r[0])),ri(r[13].call(null,t)),si(t,"transitionend",r[20])],P=!0)},p(I,[T]){T&2048&&o!==(o=Object.entries(I[11]).map(r_).join(" "))&&nn(i,"style",o),T&4096&&h!==(h=Object.entries(I[12]).map(n_).join(" "))&&nn(l,"style",h),Xn(t,S=li(R,[T&282&&p!==(p=Pn({[I[1]]:!0,"mdc-linear-progress":!0,"mdc-linear-progress--indeterminate":I[3],"mdc-linear-progress--closed":I[4],"mdc-data-table__linear-progress":I[14]==="data-table",...I[8]}))&&{class:p},T&1028&&_!==(_=Object.entries(I[10]).map(i_).concat([I[2]]).join(" "))&&{style:_},{role:"progressbar"},{"aria-valuemin":b},{"aria-valuemax":x},T&40&&E!==(E=I[3]?void 0:I[5])&&{"aria-valuenow":E},T&512&&I[9],T&65536&&I[16]])),A&&Ci(A.update)&&T&1&&A.update.call(null,I[0])},i:qi,o:qi,d(I){I&&Sr(t),r[19](null),P=!1,Ma(D)}}}const r_=([r,t])=>`${r}: ${t};`,n_=([r,t])=>`${r}: ${t};`,i_=([r,t])=>`${r}: ${t};`;function zI(r,t,e){const i=["use","class","style","indeterminate","closed","progress","buffer","getElement"];let o=ei(t,i),a;const s=wa(oa());let{use:n=[]}=t,{class:l=""}=t,{style:u=""}=t,{indeterminate:h=!1}=t,{closed:v=!1}=t,{progress:d=0}=t,{buffer:p=void 0}=t,_,b,x={},E={},A={},P={},D={},R=Ki("SMUI:linear-progress:context"),S=Ki("SMUI:linear-progress:closed");Ei(r,S,ne=>e(21,a=ne)),bo(()=>(e(6,b=new I4({addClass:T,forceLayout:()=>{H().getBoundingClientRect()},setBufferBarStyle:V,setPrimaryBarStyle:j,hasClass:I,removeAttribute:U,removeClass:M,setAttribute:z,setStyle:F,attachResizeObserver:ne=>{const q=window.ResizeObserver;if(q){const we=new q(ne);return we.observe(H()),we}return null},getWidth:()=>H().offsetWidth})),b.init(),()=>{b.destroy()}));function I(ne){return ne in x?x[ne]:H().classList.contains(ne)}function T(ne){x[ne]||e(8,x[ne]=!0,x)}function M(ne){(!(ne in x)||x[ne])&&e(8,x[ne]=!1,x)}function z(ne,q){E[ne]!==q&&e(9,E[ne]=q,E)}function U(ne){(!(ne in E)||E[ne]!=null)&&e(9,E[ne]=void 0,E)}function F(ne,q){A[ne]!=q&&(q===""||q==null?(delete A[ne],e(10,A)):e(10,A[ne]=q,A))}function V(ne,q){P[ne]!=q&&(q===""||q==null?(delete P[ne],e(11,P)):e(11,P[ne]=q,P))}function j(ne,q){D[ne]!=q&&(q===""||q==null?(delete D[ne],e(12,D)):e(12,D[ne]=q,D))}function H(){return _}function Y(ne){ci[ne?"unshift":"push"](()=>{_=ne,e(7,_)})}const J=()=>b&&b.handleTransitionEnd();return r.$$set=ne=>{t=cn(cn({},t),ga(ne)),e(16,o=ei(t,i)),"use"in ne&&e(0,n=ne.use),"class"in ne&&e(1,l=ne.class),"style"in ne&&e(2,u=ne.style),"indeterminate"in ne&&e(3,h=ne.indeterminate),"closed"in ne&&e(4,v=ne.closed),"progress"in ne&&e(5,d=ne.progress),"buffer"in ne&&e(17,p=ne.buffer)},r.$$.update=()=>{r.$$.dirty&16&&S&&Va(S,a=v,a),r.$$.dirty&72&&b&&b.isDeterminate()!==!h&&b.setDeterminate(!h),r.$$.dirty&96&&b&&b.getProgress()!==d&&b.setProgress(d),r.$$.dirty&131136&&b&&(p==null?b.setBuffer(1):b.setBuffer(p)),r.$$.dirty&80&&b&&(v?b.close():b.open())},[n,l,u,h,v,d,b,_,x,E,A,P,D,s,R,S,o,p,H,Y,J]}class ax extends ki{constructor(t){super(),Mi(this,t,zI,OI,_i,{use:0,class:1,style:2,indeterminate:3,closed:4,progress:5,buffer:17,getElement:18})}get getElement(){return this.$$.ctx[18]}}async function ox(r,t){return fetch(r).then(e=>{if(!e.ok)throw new Error(e.status+" "+e.statusText);return t?e.json():e.text()}).catch(e=>{throw new Error(`Failed to load: ${r}
because: ${e.message}`)})}async function BI(r){return ox(r,!0)}async function Vp(r){return ox(r,!1)}const zv="04096405,04096515,04097500,040975299,04097540,04099000,04100500,04101000,04101500,04101535,04101800,04102500,04099750";async function NI(){try{let r=await UI();gl.importUSGSSites(r);let t=await HI();gl.processUSGSSeriesData(t)}catch(r){throw console.error(r),r}finally{yp.set("height"),_p.set("flow")}}async function UI(){const r=`https://waterservices.usgs.gov/nwis/iv/?format=json&sites=${zv}&siteStatus=all`;return BI(r)}async function HI(){const r="2000-01-01",t=_y("%F",new Date(QC())),e=_y("%F",new Date(Date.now())),i=`https://waterservices.usgs.gov/nwis/dv/?format=rdb&sites=${zv}&statCd=00003&siteStatus=all&startDT=${r}&endDT=${t}`,o=`https://waterservices.usgs.gov/nwis/iv/?format=rdb&sites=${zv}&parameterCd=00060,00065&siteStatus=all&startDT=${t}&endDT=${e}`,a=Vp(i),s=Vp(o);return Promise.all([a,s]).then(n=>n[0]+`
`+n[1])}function VI(r){let t,e,i;return t=new Mh({props:{id:"loader-content",$$slots:{default:[GI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn()},m(o,a){on(t,o,a),Er(o,e,a),i=!0},p(o,a){const s={};a&2&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){i||(Kt(t.$$.fragment,o),i=!0)},o(o){lr(t.$$.fragment,o),i=!1},d(o){sn(t,o),o&&Sr(e)}}}function GI(r){let t,e,i=r[0].message+"",o;return{c(){t=oi(`Loading USGS Data Error:
    `),e=_n("p"),o=oi(i),Do(e,"color","red")},m(a,s){Er(a,t,s),Er(a,e,s),En(e,o)},p:qi,d(a){a&&Sr(t),a&&Sr(e)}}}function ZI(r){let t,e;return t=new Mh({props:{id:"loader-content",$$slots:{default:[WI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function WI(r){let t;return{c(){t=oi("USGS Loaded!")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function jI(r){let t,e;return t=new Mh({props:{id:"loader-content",$$slots:{default:[YI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function YI(r){let t,e,i;return e=new ax({props:{indeterminate:!0}}),{c(){t=oi(`Loading USGS Data
    `),un(e.$$.fragment)},m(o,a){Er(o,t,a),on(e,o,a),i=!0},p:qi,i(o){i||(Kt(e.$$.fragment,o),i=!0)},o(o){lr(e.$$.fragment,o),i=!1},d(o){o&&Sr(t),sn(e,o)}}}function XI(r){let t,e,i={ctx:r,current:null,token:null,hasCatch:!0,pending:jI,then:ZI,catch:VI,error:0,blocks:[,,,]};return h_(NI(),i),{c(){t=ea(),i.block.c()},m(o,a){Er(o,t,a),i.block.m(o,i.anchor=a),i.mount=()=>t.parentNode,i.anchor=t,e=!0},p(o,[a]){r=o,d_(i,r,a)},i(o){e||(Kt(i.block),e=!0)},o(o){for(let a=0;a<3;a+=1){const s=i.blocks[a];lr(s)}e=!1},d(o){o&&Sr(t),i.block.d(o),i.token=null,i=null}}}class KI extends ki{constructor(t){super(),Mi(this,t,null,XI,_i,{})}}const sx="https://raw.githubusercontent.com/Limnogirl90/SJRBC-web-map-data/main";async function JI(){try{let r=await $I();const t=gl.importSJRBCSites(r);console.log(t);const e=t.map(async i=>{const o=await Vp(sx+"/"+i+".csv");await gl.processSJRBCSeriesData(o)});return Promise.all(e).then(()=>gl.updateSitesDataInfo())}catch(r){throw console.error(r),r}}async function $I(){const r=sx+"/sites.csv";return Vp(r)}function QI(r){let t,e,i;return t=new Mh({props:{id:"loader-content",$$slots:{default:[qI]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn()},m(o,a){on(t,o,a),Er(o,e,a),i=!0},p(o,a){const s={};a&2&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){i||(Kt(t.$$.fragment,o),i=!0)},o(o){lr(t.$$.fragment,o),i=!1},d(o){sn(t,o),o&&Sr(e)}}}function qI(r){let t,e,i=r[0].message+"",o;return{c(){t=oi(`Loading SJRBC Data Error:
    `),e=_n("p"),o=oi(i),Do(e,"color","red")},m(a,s){Er(a,t,s),Er(a,e,s),En(e,o)},p:qi,d(a){a&&Sr(t),a&&Sr(e)}}}function e6(r){let t,e;return t=new Mh({props:{id:"loader-content",$$slots:{default:[t6]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function t6(r){let t;return{c(){t=oi("SJRBC Loaded!")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function r6(r){let t,e;return t=new Mh({props:{id:"loader-content",$$slots:{default:[n6]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&2&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function n6(r){let t,e,i;return e=new ax({props:{indeterminate:!0}}),{c(){t=oi(`Loading SJRBC Data
    `),un(e.$$.fragment)},m(o,a){Er(o,t,a),on(e,o,a),i=!0},p:qi,i(o){i||(Kt(e.$$.fragment,o),i=!0)},o(o){lr(e.$$.fragment,o),i=!1},d(o){o&&Sr(t),sn(e,o)}}}function i6(r){let t,e,i={ctx:r,current:null,token:null,hasCatch:!0,pending:r6,then:e6,catch:QI,error:0,blocks:[,,,]};return h_(JI(),i),{c(){t=ea(),i.block.c()},m(o,a){Er(o,t,a),i.block.m(o,i.anchor=a),i.mount=()=>t.parentNode,i.anchor=t,e=!0},p(o,[a]){r=o,d_(i,r,a)},i(o){e||(Kt(i.block),e=!0)},o(o){for(let a=0;a<3;a+=1){const s=i.blocks[a];lr(s)}e=!1},d(o){o&&Sr(t),i.block.d(o),i.token=null,i=null}}}class a6 extends ki{constructor(t){super(),Mi(this,t,null,i6,_i,{})}}function o6(r){let t;return{c(){t=oi("Loading Data")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function s6(r){let t;return{c(){t=oi("Close")},m(e,i){Er(e,t,i)},d(e){e&&Sr(t)}}}function l6(r){let t,e;return t=new Xb({props:{$$slots:{default:[s6]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&4&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function u6(r){let t,e;return t=new ID({props:{action:"accept",$$slots:{default:[l6]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment)},m(i,o){on(t,i,o),e=!0},p(i,o){const a={};o&4&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(i){e||(Kt(t.$$.fragment,i),e=!0)},o(i){lr(t.$$.fragment,i),e=!1},d(i){sn(t,i)}}}function c6(r){let t,e,i,o,a,s,n,l;return t=new RI({props:{id:"loader-title",$$slots:{default:[o6]},$$scope:{ctx:r}}}),i=new KI({}),a=new a6({}),n=new FI({props:{$$slots:{default:[u6]},$$scope:{ctx:r}}}),{c(){un(t.$$.fragment),e=Rn(),un(i.$$.fragment),o=Rn(),un(a.$$.fragment),s=Rn(),un(n.$$.fragment)},m(u,h){on(t,u,h),Er(u,e,h),on(i,u,h),Er(u,o,h),on(a,u,h),Er(u,s,h),on(n,u,h),l=!0},p(u,h){const v={};h&4&&(v.$$scope={dirty:h,ctx:u}),t.$set(v);const d={};h&4&&(d.$$scope={dirty:h,ctx:u}),n.$set(d)},i(u){l||(Kt(t.$$.fragment,u),Kt(i.$$.fragment,u),Kt(a.$$.fragment,u),Kt(n.$$.fragment,u),l=!0)},o(u){lr(t.$$.fragment,u),lr(i.$$.fragment,u),lr(a.$$.fragment,u),lr(n.$$.fragment,u),l=!1},d(u){sn(t,u),u&&Sr(e),sn(i,u),u&&Sr(o),sn(a,u),u&&Sr(s),sn(n,u)}}}function f6(r){let t,e,i,o;function a(n){r[1](n)}let s={"aria-labelledby":"loader-title","aria-describedby":"loader-content",$$slots:{default:[c6]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.open=r[0]),e=new PI({props:s}),ci.push(()=>Ah(e,"open",a)),{c(){t=_n("div"),un(e.$$.fragment),nn(t,"class","loader")},m(n,l){Er(n,t,l),on(e,t,null),o=!0},p(n,[l]){const u={};l&4&&(u.$$scope={dirty:l,ctx:n}),!i&&l&1&&(i=!0,u.open=n[0],Th(()=>i=!1)),e.$set(u)},i(n){o||(Kt(e.$$.fragment,n),o=!0)},o(n){lr(e.$$.fragment,n),o=!1},d(n){n&&Sr(t),sn(e)}}}function h6(r,t,e){let i=!0;function o(a){i=a,e(0,i)}return[i,o]}class d6 extends ki{constructor(t){super(),Mi(this,t,h6,f6,_i,{})}}function p6(r){let t,e,i,o,a,s,n,l,u,h,v,d,p;return e=new p5({}),o=new k4({}),s=new TI({}),l=new vI({}),h=new fM({}),d=new d6({}),{c(){t=_n("main"),un(e.$$.fragment),i=Rn(),un(o.$$.fragment),a=Rn(),un(s.$$.fragment),n=Rn(),un(l.$$.fragment),u=Rn(),un(h.$$.fragment),v=Rn(),un(d.$$.fragment)},m(_,b){Er(_,t,b),on(e,t,null),En(t,i),on(o,t,null),En(t,a),on(s,t,null),En(t,n),on(l,t,null),En(t,u),on(h,t,null),En(t,v),on(d,t,null),p=!0},p:qi,i(_){p||(Kt(e.$$.fragment,_),Kt(o.$$.fragment,_),Kt(s.$$.fragment,_),Kt(l.$$.fragment,_),Kt(h.$$.fragment,_),Kt(d.$$.fragment,_),p=!0)},o(_){lr(e.$$.fragment,_),lr(o.$$.fragment,_),lr(s.$$.fragment,_),lr(l.$$.fragment,_),lr(h.$$.fragment,_),lr(d.$$.fragment,_),p=!1},d(_){_&&Sr(t),sn(e),sn(o),sn(s),sn(l),sn(h),sn(d)}}}class m6 extends ki{constructor(t){super(),Mi(this,t,null,p6,_i,{})}}const v6=window.navigator.userAgent;v6.includes("Chrom")?new m6({target:document.getElementById("app")}):alert("Currently only Chrome browsers are supported. Other browser support will be available soon");
